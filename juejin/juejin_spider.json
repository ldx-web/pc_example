{"tag_name": "JVM", "concern_user_count": 24906, "user_id": "2119514117904295", "title": "ç»™æˆ‘1ä¸‡å­—ï¼Œä¹Ÿè®²ä¸æ¸…Javaå†…å­˜æ’æŸ¥ã€‚1ä¸‡ä¸è¡Œæ¥2ä¸‡~.~", "mark_content": ">ä¸ç¾¡é¸³é¸¯ä¸ç¾¡ä»™ï¼Œä¸€è¡Œä»£ç è°ƒåŠå¤©ã€‚åŸåˆ›ï¼šå°å§å§å‘³é“ï¼ˆGZH IDï¼šxjjdogï¼‰ï¼Œæ¬¢è¿åˆ†äº«ï¼Œè½¬è½½è¯·ä¿ç•™å‡ºå¤„ã€‚\n\næœ¬ç¯‡æ–‡ç« æ˜¯[ã€ŠJavaå†…å­˜æ•…éšœï¼Ÿåªæ˜¯å› ä¸ºä½ ä¸å¤Ÿå¸…ï¼ã€‹](https://mp.weixin.qq.com/s/MAebo8x356IMlASocxPqRw) è¿™ç¯‡æ–‡ç« çš„ç»­ç¯‡ã€‚ä¸Šç¯‡ä¾§é‡äºç†è®ºï¼Œæœ¬ç¯‡ä¾§é‡äºå®è·µã€‚å¯¹äºå†…å­˜é—®é¢˜æ’æŸ¥æ¥è¯´ï¼Œæç†è®ºçš„ç—›è‹¦ï¼Œæå®è·µçš„ä¹Ÿç—›è‹¦ï¼Œæ²¡æœ‰ä¸€ç‰‡æ¸…å‡€ä¹‹åœ°ã€‚\n\nwhyï¼Ÿå› ä¸ºå†…å­˜æº¢å‡ºæ˜¯Javaç å†œæ°¸è¿œçš„ä¼¤ã€‚\n\næº¢å‡ºæœ‰å¾ˆå¤šç§è§£é‡Šï¼Œæœ‰ç²¾æ»¡è‡ªæº¢ï¼Œæœ‰ç¼“å†²åŒºæº¢å‡ºæ”»å‡»ï¼Œè¿˜æœ‰å¦å¤–ä¸€ç§å«åšé¢†å¯¼çš„æº¢å‡ºã€‚ä¸çŸ¥é“ä»€ä¹ˆå«ä½œ**æº¢å‡ºç†è®º**ï¼Œxjjdogåœ¨æ­¤æ™®åŠä¸€ä¸‹ã€‚ \n\n[ã€Šé¢†å¯¼çœ‹äº†ä¼šç‚¸æ¯›çš„æº¢å‡ºç†è®ºã€‹](http://mp.weixin.qq.com/s?__biz=MzA4MTc4NTUxNQ==&mid=2650520353&idx=1&sn=2fd5f0eee8eaf5e2025f7b2e57609b49&chksm=8780bce5b0f735f314775b17895ebe3429c26b1197573450cdd8032bccab70428d3cca061120&scene=21#wechat_redirect)  \n\n## å†…å­˜æº¢å‡ºä»€ä¹ˆæœ€é‡è¦ï¼Ÿ\n\nå…¶å®ï¼Œå†…å­˜æº¢å‡ºå°±åƒæ˜¯ä¸€åœºäº¤é€šäº‹æ•…ã€‚äº‹æ•…çš„å‘ç”Ÿæ–¹ï¼Œå°±æ˜¯å…·ä½“çš„æœåŠ¡ï¼›äº‹æ•…çš„å¤„ç†æ–¹ï¼Œå°±æ˜¯ç›¸å…³çš„ç¨‹åºå‘˜ã€‚å…¶ä¸­æœ‰ä¸€ä¸ªæœ€é‡è¦çš„ç¯èŠ‚ï¼Œå°±æ˜¯åœ¨äº‹æ•…ç°åœºéœ€è¦æ‹ç…§å–è¯ã€‚\n\nå¦‚æœæ²¡æœ‰ç…§ç‰‡æ²¡æœ‰è¡Œè½¦è®°å½•ä»ªæ²¡æœ‰è¯æ®ï¼Œå°±åªèƒ½é é‚£å¼ å˜´ï¼Œæ€ä¹ˆè¯´éƒ½æ˜¯ä¸å¯ä¿¡çš„ã€‚\n\n**è¿™å¥è¯å¾ˆé‡è¦å¾ˆé‡è¦ï¼šå†…å­˜é—®é¢˜æ’æŸ¥ä»€ä¹ˆæœ€é‡è¦ï¼Ÿå½“ç„¶æ˜¯ä¿¡æ¯æ”¶é›†ï¼Œç•™ä¸‹ä¸€äº›ä¸ºæˆ‘ä»¬çš„æ’æŸ¥æä¾›æ”¯æŒçš„ä¾æ®ã€‚**åƒä¸‡ä¸è¦èˆæœ¬é€æœ«ï¼Œå¯¹å†…å­˜é—®é¢˜æ’æŸ¥æœ¬èº«æ„Ÿå…´è¶£ï¼Œé‚£æ˜¯è‡ªè™è¡Œä¸ºã€‚\n\næœ‰å¾ˆå¤šå·¥å…·å¯ä»¥å¸®åŠ©æˆ‘ä»¬å®šä½é—®é¢˜ï¼Œä½†å‰ææ˜¯ä½ å¾—æŠŠå®ƒç•™ä¸‹æ¥ã€‚ä¸‹é¢è¿™ç¯‡æ–‡ç« æ˜¯xjjdogå¾ˆä¹…ä¹‹å‰ç•™ä¸‹æ¥çš„ï¼Œç”±äºæ ‡é¢˜çš„ç¼˜æ•…ï¼Œä½ å¯èƒ½å¿½ç•¥äº†ï¼Œä½†è¿™äº›å·¥å…·èƒ½å¤Ÿå¿«é€Ÿå¸®æˆ‘ä»¬å®šä½é—®é¢˜ã€‚\n\n[ã€Šå°†javaè¿›ç¨‹è½¬ç§»åˆ°â€œè§£å‰–å°â€ä¹‹å‰ï¼Œæ³•åŒ»éƒ½å¹²äº†ä»€ä¹ˆï¼Ÿã€‹](http://mp.weixin.qq.com/s?__biz=MzA4MTc4NTUxNQ==&mid=2650520084&idx=1&sn=b2ca0a4355f83b304715f24113e155a1&chksm=8780bdd0b0f734c6cdf898f9c11e024d3c141e58fa45ddfb36aa3f320eb38b22674aabbe9432&scene=21#wechat_redirect)\n\n ![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cc6e35f37c9643508358511f04654ef1~tplv-k3u1fbpfcp-zoom-1.image)\n```bash\nss -antp > $DUMP_DIR/ss.dump 2>&1\nnetstat -s > $DUMP_DIR/netstat-s.dump 2>&1\ntop -Hp $PID -b -n 1 -c >  $DUMP_DIR/top-$PID.dump 2>&1\nsar -n DEV 1 2 > $DUMP_DIR/sar-traffic.dump 2>&1\nlsof -p $PID > $DUMP_DIR/lsof-$PID.dump\niostat -x > $DUMP_DIR/iostat.dump 2>&1\nfree -h > $DUMP_DIR/free.dump 2>&1\njstat -gcutil $PID > $DUMP_DIR/jstat-gcutil.dump 2>&1\njstack $PID > $DUMP_DIR/jstack.dump 2>&1\njmap -histo $PID > $DUMP_DIR/jmap-histo.dump 2>&1\njmap -dump:format=b,file=$DUMP_DIR/heap.bin $PID > /dev/null  2>&1\n```\n\n## GCæ—¥å¿—é…ç½®\n\nä½†å¹¶ä¸æ˜¯æ¯æ¬¡å‡ºç°æ•…éšœï¼Œä½ éƒ½åœ¨æœºå™¨çš„èº«è¾¹ã€‚é äººå·¥ä¹Ÿä¸èƒ½ä¿è¯å®æ—¶æ€§ã€‚æ‰€ä»¥ï¼Œå¼ºçƒˆå»ºè®®ä½ æŠŠGCæ—¥å¿—è¾“å‡ºçš„è¯¦ç»†ä¸€äº›ï¼Œé‚£ä¹ˆå‡ºç°é—®é¢˜çš„æ—¶å€™å°±èˆ’å¦ä¸€äº›ã€‚\n\n**å®é™…ä¸Šï¼Œè¿™ä¸ªè¦æ±‚åœ¨æˆ‘çœ‹æ¥æ˜¯å¼ºåˆ¶çš„ã€‚**\n\nå¾ˆå¤šåŒå­¦ä¸Šæ¥å°±è¯´ï¼Œ**æˆ‘çš„å†…å­˜æº¢å‡ºäº†**ã€‚ä½†ä½ å’Œå®ƒè¦ä¸€äº›æ—¥å¿—ä¿¡æ¯ï¼Œè¦å †æ ˆï¼Œè¦ç°åœºä¿å­˜çš„å¿«ç…§ã€‚éƒ½æ²¡æœ‰ã€‚è¿™å°±æ˜¯çº¯ç²¹æ¥æç¬‘çš„ã€‚\n\nä¸‹é¢æ˜¯JDK8æˆ–è€…ä»¥ä¸‹çš„GCæ—¥å¿—å‚æ•°ï¼Œå¯ä»¥çœ‹åˆ°è¿˜æ˜¯å¾ˆé•¿çš„ã€‚\n```bash\n#!/bin/sh\nLOG_DIR=\"/tmp/logs\"\nJAVA_OPT_LOG=\" -verbose:gc\"\nJAVA_OPT_LOG=\"${JAVA_OPT_LOG} -XX:+PrintGCDetails\"\nJAVA_OPT_LOG=\"${JAVA_OPT_LOG} -XX:+PrintGCDateStamps\"\nJAVA_OPT_LOG=\"${JAVA_OPT_LOG} -XX:+PrintGCApplicationStoppedTime\"\nJAVA_OPT_LOG=\"${JAVA_OPT_LOG} -XX:+PrintTenuringDistribution\"\nJAVA_OPT_LOG=\"${JAVA_OPT_LOG} -Xloggc:${LOG_DIR}/gc_%p.log\"\n\nJAVA_OPT_OOM=\" -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=${LOG_DIR} -XX:ErrorFile=${LOG_DIR}/hs_error_pid%p.log \"\n\nJAVA_OPT=\"${JAVA_OPT_LOG} ${JAVA_OPT_OOM}\"\nJAVA_OPT=\"${JAVA_OPT} -XX:-OmitStackTraceInFastThrow\"\n```\n\nä¸‹é¢æ˜¯JDK9åŠå…¶ä»¥ä¸Šçš„æ—¥å¿—é…ç½®ã€‚å¯ä»¥çœ‹åˆ°å®ƒçš„é…ç½®æ–¹å¼å…¨å˜äº†ï¼Œè€Œä¸”ä¸å‘ä¸‹å…¼å®¹ã€‚Javaæçš„è¿™ä¸ªå˜åŒ–è¿˜æ˜¯æŒºè›‹ç–¼çš„ã€‚\n\n```bash\n#!/bin/sh\n\nLOG_DIR=\"/tmp/logs\"\nJAVA_OPT_LOG=\" -verbose:gc\"\nJAVA_OPT_LOG=\"${JAVA_OPT_LOG} -Xlog:gc,gc+ref=debug,gc+heap=debug,gc+age=trace:file=${LOG_DIR}/gc_%p.log:tags,uptime,time,level\"\nJAVA_OPT_LOG=\"${JAVA_OPT_LOG} -Xlog:safepoint:file=${LOG_DIR}/safepoint_%p.log:tags,uptime,time,level\"\n\nJAVA_OPT_OOM=\" -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=${LOG_DIR} -XX:ErrorFile=${LOG_DIR}/hs_error_pid%p.log \"\n\nJAVA_OPT=\"${JAVA_OPT_LOG} ${JAVA_OPT_OOM}\"\nJAVA_OPT=\"${JAVA_OPT} -XX:-OmitStackTraceInFastThrow\"\n\necho $JAVA_OPT\n```\n\nä¸€æ—¦å‘ç°äº†é—®é¢˜ï¼Œå°±å¯ä»¥æ‹¿GCæ—¥å¿—æ¥å¿«é€Ÿå®šä½å †å†…é—®é¢˜ã€‚ä½†æ˜¯å¹¶ä¸æ˜¯è®©ä½ ä¸€è¡Œè¡Œå»çœ‹ï¼Œé‚£å¤ªä½æ•ˆäº†ã€‚å› ä¸ºæ—¥å¿—å¯èƒ½ä¼šå¾ˆé•¿å¾ˆé•¿ï¼Œè€Œä¸”ä¹Ÿä¸ä¸€å®šçœ‹å¾—æ‡‚ã€‚è¿™ä¸ªæ—¶å€™ï¼Œå°±å¯ä»¥ä½¿ç”¨ä¸€äº›åœ¨çº¿å·¥å…·è¾…åŠ©è§£å†³ã€‚æˆ‘ç»å¸¸ä½¿ç”¨çš„æ˜¯gceasyï¼Œä¸‹é¢æ˜¯å®ƒçš„ä¸€å¼ æˆªå›¾ã€‚\n\n```java\nhttp://gceasy.io\n```\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bbcdde51705b45139ad798f2d9e6824a~tplv-k3u1fbpfcp-zoom-1.image)\n\n\næœ‰äº†GCæ—¥å¿—è¿˜ä¸è¡Œï¼Œå› ä¸ºå®ƒä»…ä»…æ˜¯è®°å½•äº†å †ç©ºé—´çš„ä¸€äº›å˜åŒ–ï¼Œè‡³äºæ“ä½œç³»ç»Ÿçš„ä¸€äº›èµ„æºå˜åŠ¨ï¼Œå®ƒæ˜¯æ— ä»çŸ¥æ™“çš„ã€‚æ‰€ä»¥ï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ªç›‘æ§ç³»ç»Ÿçš„è¯ï¼Œåœ¨å¯»æ‰¾é—®é¢˜çš„æ—¶å€™ä¹Ÿèƒ½å¸®åˆ°å¿™ã€‚ä»ä¸‹å›¾å¯ä»¥çœ‹åˆ°ç³»ç»Ÿèµ„æºçš„ä¸€äº›å˜åŠ¨ã€‚\n\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8db7dcb4956e4b459823309275471394~tplv-k3u1fbpfcp-zoom-1.image)\n\n## æº¢å‡ºç¤ºä¾‹\n\n### å †æº¢å‡º\nä»£ç ã€‚\n![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1b2f4b1c83064fa1b240453af9f9351a~tplv-k3u1fbpfcp-zoom-1.image)\n\næ—¥å¿—ã€‚\n```bash\njava -Xmx20m -Xmn4m -XX:+HeapDumpOnOutOfMemoryError - OOMTest\n[18.386s][info][gc] GC(10) Concurrent Mark 5.435ms\n[18.395s][info][gc] GC(12) Pause Full (Allocation Failure) 18M->18M(19M) 10.572ms\n[18.400s][info][gc] GC(13) Pause Full (Allocation Failure) 18M->18M(19M) 5.348ms\nException in thread \"main\" java.lang.OutOfMemoryError: Java heap space\n    at OldOOM.main(OldOOM.java:20)\n```\n\njvisualvmçš„ååº”ã€‚\n![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a6f3346b132c4303807e7147c697da78~tplv-k3u1fbpfcp-zoom-1.image)\n\n### å…ƒç©ºé—´æº¢å‡º\n\nä»£ç ã€‚\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7991e5859ee34c099b42bb443dc8fcdb~tplv-k3u1fbpfcp-zoom-1.image)\n\næ—¥å¿—ã€‚\n```bash\njava -Xmx20m -Xmn4m -XX:+HeapDumpOnOutOfMemoryError -XX:MetaspaceSize=16M -XX:MaxMetaspaceSize=16M MetaspaceOOMTest\n6.556s][info][gc] GC(30) Concurrent Cycle 46.668ms\njava.lang.OutOfMemoryError: Metaspace\nDumping heap to /tmp/logs/java_pid36723.hprof ..\n```\n\njvisualvmçš„ååº”ã€‚\n![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fc8be3ced1484c1692ceba1c3046aad4~tplv-k3u1fbpfcp-zoom-1.image)\n\n### ç›´æ¥å†…å­˜æº¢å‡º\nä»£ç ã€‚\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/eb8aedb0537e4efd93dae55feca1932f~tplv-k3u1fbpfcp-zoom-1.image)\n\næ—¥å¿—ã€‚\n```bash\njava -XX:MaxDirectMemorySize=10M -Xmx10M OffHeapOOMTest\nException in thread \"Thread-2\" java.lang.OutOfMemoryError: Direct buffer memory\n    at java.nio.Bits.reserveMemory(Bits.java:694)\n    at java.nio.DirectByteBuffer.<init>(DirectByteBuffer.java:123)\n    at java.nio.ByteBuffer.allocateDirect(ByteBuffer.java:311)\n    at OffHeapOOMTest.oom(OffHeapOOMTest.java:27)...\n```\n\n### æ ˆæº¢å‡º\nä»£ç ã€‚\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3bc8ef7276004c59a874648cb39235ce~tplv-k3u1fbpfcp-zoom-1.image)\n\næ—¥å¿—ã€‚\n```bash\njava -Xss128K StackOverflowTest\nException in thread \"main\" java.lang.StackOverflowError\n    at java.io.PrintStream.write(PrintStream.java:526)\n    at java.io.PrintStream.print(PrintStream.java:597)\n    at java.io.PrintStream.println(PrintStream.java:736)\n    at StackOverflowTest.a(StackOverflowTest.java:5)\n```\n\n## å“ªäº›ä»£ç å®¹æ˜“å‡ºç°é—®é¢˜\n\n### å¿˜è®°é‡å†™hashCodeå’Œequals\nçœ‹ä¸‹é¢çš„ä»£ç ã€‚ç”±äºæ²¡æœ‰é‡å†™Keyç±»çš„hashCodeå’Œequalsæ–¹æ³•ã€‚é€ æˆäº†æ”¾å…¥HashMapçš„æ‰€æœ‰å¯¹è±¡ï¼Œéƒ½æ— æ³•è¢«å–å‡ºæ¥ã€‚å®ƒä»¬å’Œå¤–ç•Œå¤±è”äº†ã€‚\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7881a878006941be999f420fca9b3fdc~tplv-k3u1fbpfcp-zoom-1.image)\n\nä¸‹é¢è¿™ç¯‡æ–‡ç« è¯¦ç»†çš„æè¿°äº†å®ƒçš„åŸç†ã€‚\n[æ¶æ„å¸ˆå†™çš„BUGï¼Œéæ¯”å¯»å¸¸](https://mp.weixin.qq.com/s/BBJKJXE7dFaGn5n7BAwHTQ)\n\n### ç»“æœé›†å¤±æ§\n\n![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7b60b4270f224181bf7ea3db3339a88c~tplv-k3u1fbpfcp-zoom-1.image)\nä¸è¦è§‰å¾—è¿™æ®µä»£ç å¯ç¬‘ã€‚åœ¨å®é™…å·¥ä½œä¸­çš„reviewä¸­ï¼Œxjjdogä¸æ­¢ä¸€æ¬¡å‘ç°è¿™ç§è›‹ç–¼çš„ä»£ç ã€‚è¿™æœ‰å¯èƒ½æ˜¯èµ¶å·¥æœŸï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯åˆšå­¦ä¼šå†™Javaã€‚è¿™è¡Œä»£ç æœ‰å¾ˆå¤§çš„å¯èƒ½æ€§è¸©å‘ã€‚\n\n### æ¡ä»¶å¤±æ§ \n\nä»£ç ã€‚ä¸ä¹‹ç±»ä¼¼çš„å°±æ˜¯æ¡ä»¶å¤±æ§ï¼Œå½“æŸä¸ªæ¡ä»¶ä¸æ»¡è¶³çš„æ—¶å€™ï¼Œå°†ä¼šé€ æˆç»“æœé›†çš„å¤±æ§ã€‚å¤§å®¶å¯ä»¥çœ‹ä¸‹é¢çš„ä»£ç ï¼Œfullname å’Œ otherä¸ºç©ºçš„æ—¶å€™ï¼Œä¼šå‡ºç°ä»€ä¹ˆåæœï¼Ÿ\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/108c139ca5884e709dc7422b303cd2c1~tplv-k3u1fbpfcp-zoom-1.image)\n\n### ä¸‡èƒ½å‚æ•°\n\nè¿˜æœ‰çš„åŒå­¦ä½¿ç”¨å„ç§Objectå’ŒHashMapæ¥è¿›è¡Œä¿¡æ¯äº¤æ¢ã€‚è¿™ç§ä»£ç æ­£å¸¸è¿è¡Œçš„æ—¶å€™æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†ä¸€æ—¦å‡ºé”™ï¼Œå‡ ä¹æ— æ³•æ’æŸ¥ã€‚æ’æŸ¥å‚æ•°ã€æ’æŸ¥å †æ ˆã€æ’æŸ¥è°ƒç”¨é“¾ï¼Œå…¨éƒ¨å¤±æ•ˆã€‚\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6f51617854534cbea386a6e895fb2bdc~tplv-k3u1fbpfcp-zoom-1.image)\n\n\n### ä¸€äº›é¢„é˜²çš„æªæ–½\n\n- å‡å°‘åˆ›å»ºå¤§å¯¹è±¡çš„é¢‘ç‡ï¼šæ¯”å¦‚byteæ•°ç»„çš„ä¼ é€’\n- ä¸è¦ç¼“å­˜å¤ªå¤šçš„å †å†…æ•°æ®ï¼šä½¿ç”¨guavaçš„weakå¼•ç”¨æ¨¡å¼\n- æŸ¥è¯¢çš„èŒƒå›´ä¸€å®šè¦å¯æ§ï¼šå¦‚åˆ†åº“åˆ†è¡¨ä¸­é—´ä»¶ï¼›ESç­‰æœ‰åŒæ ·é—®é¢˜\n- ç”¨å®Œçš„èµ„æºä¸€å®šè¦closeæ‰ï¼šå¯ä»¥ä½¿ç”¨æ–°çš„ try-with-resourcesè¯­æ³•\n- å°‘ç”¨internï¼šå­—ç¬¦ä¸²å¤ªé•¿ï¼Œä¸”æ— æ³•å¤ç”¨ï¼Œå°±ä¼šé€ æˆå†…å­˜æ³„æ¼\n- åˆç†çš„Sessionè¶…æ—¶æ—¶é—´\n- å°‘ç”¨ç¬¬ä¸‰æ–¹æœ¬åœ°ä»£ç ï¼Œä½¿ç”¨Javaæ–¹æ¡ˆæ›¿ä»£\n- åˆç†çš„æ± å¤§å°\n- XMLï¼ˆSAX/DOMï¼‰ã€JSONè§£æè¦æ³¨æ„å¯¹è±¡å¤§å°\n \n## æ¡ˆä¾‹åˆ†æä¸€\n\nè¿™æ˜¯æœ€å¸¸è§çš„ä¸€ç§æƒ…å†µã€‚äº†è§£äº†è¿™ç§æ–¹å¼ï¼Œèƒ½å¤Ÿåº”å¯¹å¤§å¤šæ•°å†…å­˜æº¢å‡ºå’Œå†…å­˜æ³„æ¼é—®é¢˜ã€‚\n\n### ç°è±¡\n\n- ç¯å¢ƒï¼šCentOS7ï¼ŒJDK1.8ï¼ŒSpringBoot\n- G1åƒåœ¾å›æ”¶å™¨\n- åˆšå¯åŠ¨æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œæ…¢æ…¢æ”¾é‡åï¼Œå‘ç”Ÿäº†OOM\n- ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆäº†heapdumpæ–‡ä»¶\n-  ä¸´æ—¶è§£å†³æ–¹å¼ï¼šé‡å¯ï¼Œä½†é—®é¢˜ä¾ç„¶å‘ç°\n\n### ä¿¡æ¯æ”¶é›†\n\n- æ—¥å¿—ï¼šGCçš„æ—¥å¿—ä¿¡æ¯ï¼š å†…å­˜çªå¢çªé™ï¼Œå˜åŠ¨è¿…é€Ÿ\n-  å †æ ˆï¼šThread Dumpæ–‡ä»¶ï¼šå¤§éƒ¨åˆ†é˜»å¡åœ¨æŸä¸ªæ–¹æ³•ä¸Š\n- å‹æµ‹ï¼šä½¿ç”¨wrkè¿›è¡Œå‹æµ‹ï¼Œå‘ç°20ä¸ªç”¨æˆ·å¹¶å‘ï¼Œå†…å­˜æº¢å‡º\n\n```bash\nwrk -t20 -c20 -d300s http://127.0.0.1:8084/api/test\n```\n\n### MATåˆ†æ\n\nå †æ ˆæ–‡ä»¶è·å–ï¼š\n\n```bash\njmap -dump:format=b,file=heap.bin 37340\njhsdb jmap  --binaryheap --pid  37340\n```\n\nMATå·¥å…·æ˜¯åŸºäºeclipseå¹³å°å¼€å‘çš„ï¼Œæœ¬èº«æ˜¯ä¸€ä¸ªJavaç¨‹åºã€‚åˆ†æHeap Dumpæ–‡ä»¶ï¼šå‘ç°å†…å­˜åˆ›å»ºäº†å¤§é‡çš„æŠ¥è¡¨å¯¹è±¡ã€‚\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7687b006508d4a3ca3991a87ed2fd00c~tplv-k3u1fbpfcp-zoom-1.image)\n\né€šè¿‡èœå•Find Leaksï¼Œä¸€é”®æ‰¾å‡ºé»‘æé€µã€‚\n\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4717bfa8b9df454bbc1a578df451446c~tplv-k3u1fbpfcp-zoom-1.image)\næ ¹æ®æç¤ºå‘ä¸‹æŒ–å°±å¯ä»¥ã€‚\n\n### è§£å†³\n\nåˆ†æç»“æœï¼š\n- ç³»ç»Ÿå­˜åœ¨å¤§æ•°æ®é‡æŸ¥è¯¢æœåŠ¡ï¼Œå¹¶åœ¨å†…å­˜åšåˆå¹¶\n- å½“å¹¶å‘é‡è¾¾åˆ°ä¸€å®šç¨‹åº¦ï¼Œä¼šæœ‰å¤§é‡æ•°æ®å †ç§¯åˆ°å†…å­˜è¿›è¡Œè¿ç®—\n\nè§£å†³æ–¹å¼ï¼š\n- é‡æ„æŸ¥è¯¢æœåŠ¡ï¼Œå‡å°‘æŸ¥è¯¢çš„å­—æ®µ\n- ä½¿ç”¨SQLæŸ¥è¯¢ä»£æ›¿å†…å­˜æ‹¼æ¥ï¼Œé¿å…å¯¹ç»“æœé›†çš„æ“ä½œ\n- ä¸¾ä¾‹ï¼šæŸ¥æ‰¾ä¸¤ä¸ªåˆ—è¡¨çš„äº¤é›†\n\n## æ¡ˆä¾‹åˆ†æäºŒ\n\n### ç°è±¡\n\n- ç¯å¢ƒï¼šCentOS7ï¼ŒJDK1.8ï¼ŒJBoss\n- CMSåƒåœ¾å›æ”¶å™¨\n- æ“ä½œç³»ç»ŸCPUèµ„æºè€—å°½\n- è®¿é—®ä»»ä½•æ¥å£ï¼Œå“åº”éƒ½éå¸¸çš„æ…¢\n\n### åˆ†æ\n\n- å‘ç°æ¯æ¬¡GCçš„æ•ˆæœéƒ½ç‰¹åˆ«å¥½ï¼Œä½†æ˜¯éå¸¸é¢‘ç¹\n- äº†è§£åˆ°ä½¿ç”¨äº†å †å†…ç¼“å­˜ï¼Œè€Œä¸”è®¾ç½®çš„å®¹é‡æ¯”è¾ƒå¤§\n- ç¼“å­˜å¡«å……çš„é€Ÿåº¦ç‰¹åˆ«å¿«ï¼\n\nç»“è®ºï¼š\n- å¼€äº†éå¸¸å¤§çš„ç¼“å­˜ï¼ŒGCä¹‹åè¿…é€Ÿå æ»¡ï¼Œé€ æˆGCé¢‘ç¹\n\n## æ¡ˆä¾‹åˆ†æä¸‰\n\n### ç°è±¡\n\n- javaè¿›ç¨‹å¼‚å¸¸é€€å‡º\n- javaè¿›ç¨‹ç›´æ¥æ¶ˆå¤±\n- æ²¡æœ‰ç•™ä¸‹dumpæ–‡ä»¶\n- GCæ—¥å¿—æ­£å¸¸\n- ç›‘æ§å‘ç°æ­»äº¡æ—¶ï¼Œå †å†…å†…å­˜å ç”¨å¾ˆå°‘ï¼Œå †å†…ä»æœ‰å¤§é‡å‰©ä½™ç©ºé—´\n\n### åˆ†æ\n\n- XX:+HeapDumpOnOutOfMemoryErrorä¸èµ·ä½œç”¨\n- ç›‘æ§å‘ç°æ“ä½œç³»ç»Ÿå†…å­˜æŒç»­å¢åŠ \n\nä¸‹é¢è¿™äº›æƒ…å†µéƒ½ä¼šé€ æˆç¨‹åºé€€å‡ºè€Œæ²¡ä»€ä¹ˆå“åº”ã€‚\n\n- è¢«æ“ä½œç³»ç»Ÿæ€æ­» dmesg oom-killer\n- System.exit()\n- java  com.cn.AA & åç»ˆç«¯å…³é—­\n- kill -9\n\n### è§£å†³\n\nå‘ç°ï¼š\n- åœ¨dmesgå‘½ä»¤ä¸­å‘ç°ç¡®å®è¢«oom-kill\n\nè§£å†³ï¼š\n- ç»™JVMå°‘åˆ†é…ä¸€äº›å†…å­˜ï¼Œè…¾å‡ºç©ºé—´ç»™å…¶ä»–è¿›ç¨‹\n\n## æ¡ˆä¾‹åˆ†æå››\n\nè¯·å‚è§å †å¤–å†…å­˜æ’æŸ¥è¿™ç¯‡æ–‡ç« ã€‚\n[ã€ŠJavaå †å¤–å†…å­˜æ’æŸ¥å°ç»“ã€‹](https://mp.weixin.qq.com/s/p0cQeDLm3A-C0gGQ3aBp1Q) \n\n\n## End\n\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5e98d5708e0d452dbf0d6ae757cc02e9~tplv-k3u1fbpfcp-zoom-1.image)\n\næœ€åï¼Œè¿˜æ˜¯ä»¥ä¸‹é¢è¿™å¼ å›¾ä½œä¸ºå°ç»“ã€‚å®è·µçŸ¥è¯†æ°¸è¿œé€ƒä¸å‡ºç†è®ºçš„æ”¯æŒï¼Œæ²¡æœ‰äº†å®è·µçš„å·©å›ºç†è®ºä¹Ÿå°±å˜æˆæ²¡æœ‰çµé­‚çš„èº¯ä½“ã€‚Javaå†…å­˜é—®é¢˜æ°¸è¿œéƒ½é€ƒä¸å‡ºä¸‹é¢è¿™å¼ å›¾ï¼Œå°±åƒè®¡ç®—æœºæ°¸è¿œéƒ½é€ƒä¸å‡º0å’Œ1ã€‚\n\n>ä½œè€…ç®€ä»‹ï¼š**å°å§å§å‘³é“**  (xjjdog)ï¼Œä¸€ä¸ªä¸å…è®¸ç¨‹åºå‘˜èµ°å¼¯è·¯çš„gzhã€‚èšç„¦åŸºç¡€æ¶æ„å’ŒLinuxã€‚åå¹´æ¶æ„ï¼Œæ—¥ç™¾äº¿æµé‡ï¼Œä¸ä½ æ¢è®¨é«˜å¹¶å‘ä¸–ç•Œï¼Œç»™ä½ ä¸ä¸€æ ·çš„å‘³é“ã€‚", "user_name": "å°å§å§å‘³é“", "description": "ä¸ç¾¡é¸³é¸¯ä¸ç¾¡ä»™ï¼Œä¸€è¡Œä»£ç è°ƒåŠå¤©", "got_view_count": 538098, "category_name": "åç«¯", "ctime": 1457483880}
{"tag_name": "React.js", "concern_user_count": 199177, "user_id": "1714893872433928", "title": "ï¼ˆä¸Šï¼‰æ‰‹æ‘¸æ‰‹æ•™ä½ å¤§å‚éƒ½åœ¨ç”¨ React+TS+Antd å¿«é€Ÿå…¥é—¨åˆ°NodeJSå…¨æ ˆé¡¹ç›®å®æˆ˜ï¼ˆé™„æºç ï¼‰", "mark_content": "# å‰è¨€\n\n> æœ€è¿‘è¿™æ®µæ—¶é—´å¿™ç€å…¬å¸é¡¹ç›®å’Œå¸¦å¨ƒï¼Œå‘è¡¨æŠ€æœ¯æ–‡ç« å°±è¢«æç½®äº†åŠä¸ªæœˆä¹‹ä¹…ã€‚ä¸ºäº†ç­”è°¢è¯»è€…å’Œæˆ‘çš„ç²‰ä¸ä»¬ï¼Œè¶ç€å‘¨æœ«å®Œæˆäº†ä¸€ä¸ªå°Domeé¡¹ç›®ï¼Œå‰ç«¯æŠ€æœ¯ç”¨åˆ° <span style=\"color:red\">Reactå…¨å®¶æ¡¶ + TypeScript + Antd</span>ã€‚æ¶è¡¥äº†ä¸€ä¸‹ç›¸å…³çŸ¥è¯†ç‚¹ï¼Œå°±è¿«ä¸åŠå¾…çš„æƒ³ç€åˆ†äº«å‡ºæ¥ã€‚å…¶å®è‡ªå·±å¾ˆä¹…éƒ½æ²¡ç”¨è¿‡çš„ React.js å‰ç«¯æ¡†æ¶ï¼Œå¤§å‚å¿…å¤‡é¢è¯•å¿…é—®ï¼Œä½œä¸ºå‰ç«¯ä¸‰å¤§ä¸»æµæ¡†æ¶ä¹‹ä¸€ï¼Œä¹Ÿæ˜¯æœ€æµè¡Œçš„ï¼Œå› ä¸ºå®ƒçš„è®¾è®¡å¾ˆä¼˜ç§€ã€‚ä¹‹å‰ä½œè€…ä¸€ç›´éƒ½åœ¨ç”¨ Vue.js æ¡†æ¶ï¼Œæ˜¯æœ€ç«çš„ä¸€é—¨å‰ç«¯æ¡†æ¶ï¼Œå®ƒæ˜¯ä¸­å›½äººå¼€å‘çš„ï¼Œå¯¹æˆ‘ä»¬æ¥è¯´ï¼Œæ–‡æ¡£è¦å‹å¥½ä¸€äº›ï¼Œä¸Šæ‰‹æ›´å¿«ã€‚ğŸ’ª\n\nåŸºäº Vue.js å‰ç«¯æ¡†æ¶å¼€å‘çš„å¼€æºé¡¹ç›®å¦‚ä¸‹ï¼š\n* [NodeJSå…¨æ ˆå¼€å‘ä¸€ä¸ªåŠŸèƒ½å®Œå–„çš„Expressé¡¹ç›®(é™„å®Œæ•´æºç )](https://juejin.im/post/6844904198551666701)\n* [Nodejså…¨æ ˆè¿›é˜¶-Vue+Express+Webpackè‡ªå»ºè„šæ‰‹æ¶å®Œå–„å•é¡µåº”ç”¨ï¼Œæ¡£æ¬¡ç¬é—´æé«˜ï¼ˆé™„å®Œæ•´æºç ï¼‰](https://juejin.im/post/6847902224073523208)\n* [Vue+Echartsæ„å»ºå¤§æ•°æ®å¯è§†åŒ–é…·ç‚«å±•ç¤ºå…¬å¸å“ç‰Œå®æˆ˜é¡¹ç›®åˆ†äº«ï¼ˆé™„æºç ï¼‰](https://juejin.im/post/6845166890449371149)\n\n# React æ˜¯ä»€ä¹ˆï¼Ÿ\n\n## ä»‹ç»\n\n* React æ˜¯ä¸€ä¸ªç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„ JAVASCRIPT åº“ï¼›\n* React ä¸»è¦ç”¨äºæ„å»ºUIï¼Œå¾ˆå¤šäººè®¤ä¸º React æ˜¯ MVC ä¸­çš„ Vï¼ˆè§†å›¾ï¼‰ï¼›\n* React èµ·æºäº Facebook çš„å†…éƒ¨é¡¹ç›®ï¼Œç”¨æ¥æ¶è®¾ Instagram çš„ç½‘ç«™ï¼Œå¹¶äº2013å¹´ 5æœˆå¼€æºï¼›\n* React æ‹¥æœ‰è¾ƒé«˜çš„æ€§èƒ½ï¼Œä»£ç é€»è¾‘éå¸¸ç®€å•ï¼Œè¶Šæ¥è¶Šå¤šçš„äººå·²å¼€å§‹å…³æ³¨å’Œä½¿ç”¨å®ƒã€‚\n\n## ç‰¹ç‚¹\n\n1. <span style=\"color:red\">å£°æ˜å¼è®¾è®¡</span> - React é‡‡ç”¨å£°æ˜èŒƒå¼ï¼Œå¯ä»¥è½»æ¾æè¿°åº”ç”¨ï¼›\n2. <span style=\"color:red\">é«˜æ•ˆ</span> - React é€šè¿‡å¯¹ DOM çš„æ¨¡æ‹Ÿï¼Œæœ€å¤§é™åº¦åœ°å‡å°‘ä¸ DOM çš„äº¤äº’ï¼›\n3. <span style=\"color:red\">çµæ´»</span> - React å¯ä»¥ä¸å·²çŸ¥çš„åº“æˆ–æ¡†æ¶å¾ˆå¥½åœ°é…åˆï¼›\n4. <span style=\"color:red\">JSX</span> - JSX æ˜¯ JavaScript è¯­æ³•çš„æ‰©å±•ï¼ŒReact å¼€å‘ä¸ä¸€å®šä½¿ç”¨ JSX ï¼Œä½†æˆ‘ä»¬å»ºè®®ä½¿ç”¨å®ƒï¼›\n5. <span style=\"color:red\">ç»„ä»¶åŒ–</span> - é€šè¿‡ React æ„å»ºç»„ä»¶ï¼Œä½¿å¾—ä»£ç æ›´åŠ å®¹æ˜“å¾—åˆ°å¤ç”¨ï¼Œèƒ½å¤Ÿå¾ˆå¥½çš„åº”ç”¨åœ¨å¤§é¡¹ç›®çš„å¼€å‘ä¸­ï¼›\n6. <span style=\"color:red\">å•å‘å“åº”çš„æ•°æ®æµ</span> âˆ’ React å®ç°äº†å•å‘å“åº”çš„æ•°æ®æµï¼Œä»è€Œå‡å°‘äº†é‡å¤ä»£ç ï¼Œè¿™ä¹Ÿæ˜¯å®ƒä¸ºä»€ä¹ˆæ¯”ä¼ ç»Ÿæ•°æ®ç»‘å®šæ›´ç®€å•ã€‚\n\n## ç¼ºç‚¹\n\n* å¯¹äºä¸€ç›´ä½¿ç”¨ JSï¼ŒjQuery çš„ä¼ ç»Ÿå‰ç«¯ï¼ŒReact éå¸¸ä¸å‹å¥½ï¼›\n* React å¼ºè°ƒç»„ä»¶å’ŒçŠ¶æ€ç®¡ç†ï¼Œå…¶ä¸–ç•Œè§‚æ˜¯é¢å‘ç¨‹åºè¯­è¨€çš„ï¼›\n* Vue.js å¼ºè°ƒè§†å›¾çš„è‡ªåŠ¨åŒæ­¥ï¼Œå…¶ä¸–ç•Œè§‚æ˜¯é¢å‘UIè„šæœ¬çš„ï¼›\n* React çš„å­¦ä¹ æˆæœ¬è¾ƒ Vue.js é«˜ï¼›\n* React æœ¬èº«æ²¡æœ‰å…¨å®¶æ¡¶ï¼ŒåªåšUIç•Œé¢ã€‚\n\n## ä¸ºä»€ä¹ˆè¦ç”¨ React ï¼Ÿ\n\n* å’Œå…¶ä»–æ¡†æ¶ç›¸æ¯”ï¼ŒReact è®¾è®¡å¾ˆä¼˜ç§€ï¼Œä¸€åˆ‡åŸºäº JavaScript å¹¶ä¸”å®ç°äº†ç»„ä»¶åŒ–å¼€å‘çš„æ€æƒ³ï¼›\n* å¼€å‘å›¢é˜Ÿå®åŠ›å¼ºæ‚ï¼Œä¸å¿…æ‹…å¿ƒä¸æ›´æ–°çš„æƒ…å†µï¼›\n* å¼ºå¤§çš„ç¤¾åŒºæ”¯æŒï¼Œå¾ˆå¤šé—®é¢˜éƒ½èƒ½æ‰¾åˆ°å¯¹åº”çš„è§£å†³æ–¹æ¡ˆï¼›\n* æé«˜å·¥ä½œæ•ˆç‡ï¼Œè™šæ‹Ÿ DOM æ“ä½œï¼Œç»„ä»¶å¯å¤ç”¨ï¼Œæœ‰æ•ˆä½¿ç”¨å¼€å‘å·¥å…·ï¼›\n* å—åˆ°å¤§å‚çš„ä¿¡èµ–ï¼Œå‰ç«¯é¡¹ç›®çš„æŠ€æœ¯é€‰å‹é‡‡ç”¨çš„æ˜¯ React.jsï¼›\n* æä¾›äº†æ— ç¼åˆ‡æ¢åˆ° React Native ä¸Šçš„ç§»åŠ¨ç«¯å¼€å‘ä½“éªŒï¼Œè®©æˆ‘ä»¬çš„æŠ€æœ¯èƒ½åŠ›å¾—åˆ°äº†æ‹“å±•ï¼Œå¢å¼ºäº†æˆ‘ä»¬çš„æ ¸å¿ƒç«äº‰åŠ›ã€‚\n\nReactçš„è®¾è®¡æ€æƒ³åŠå…¶ç‹¬ç‰¹ï¼Œå±äºé©å‘½æ€§åˆ›æ–°ï¼Œæ€§èƒ½å‡ºä¼—ï¼Œä»£ç é€»è¾‘å´éå¸¸ç®€å•ã€‚æ‰€ä»¥ï¼Œè¶Šæ¥è¶Šå¤šçš„äººå¼€å§‹å…³æ³¨å’Œä½¿ç”¨ï¼Œè®¤ä¸ºå®ƒå¯èƒ½æ˜¯å°†æ¥WEBå¼€å‘çš„ä¸»æµå·¥å…·ã€‚ğŸ˜‹\n\n# ç†è§£å‡ ä¸ªæ ¸å¿ƒæ¦‚å¿µğŸ‘\n\n## è™šæ‹Ÿ DOMï¼ˆVirtual Document Object Modelï¼‰\n\n* DOM çš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼šæµè§ˆå™¨ä¸­çš„æ¦‚å¿µï¼Œç”¨JSå¯¹è±¡æ¥è¡¨ç¤ºé¡µé¢ä¸Šçš„å…ƒç´ ï¼Œå¹¶æä¾›äº†æ“ä½œ DOM å¯¹è±¡çš„ APIï¼›\n* ä»€ä¹ˆæ˜¯ React ä¸­çš„è™šæ‹Ÿ DOMï¼šæ˜¯æ¡†æ¶ä¸­çš„æ¦‚å¿µï¼Œæ˜¯ç¨‹åºçŒ¿ç”¨JSå¯¹è±¡æ¥æ¨¡æ‹Ÿé¡µé¢ä¸Šçš„ DOM å…ƒç´ å’ŒåµŒå¥—å…³ç³»ï¼ˆ<span style=\"color:red\">è™šæ‹Ÿ DOMæ˜¯ä»¥JSå¯¹è±¡çš„å½¢å¼å­˜åœ¨</span>ï¼‰ï¼›\n* ä¸ºä»€ä¹ˆè¦å®ç°è™šæ‹Ÿ DOMï¼šä¸ºäº†å®ç°é¡µé¢ä¸­ï¼ŒDOM å…ƒç´ çš„é«˜æ•ˆæ›´æ–°ã€‚\n\n## Diff ç®—æ³•\n\n* <span style=\"color:red\">Tree Diff</span> - æ–°æ—§ä¸¤æ£µ DOM æ ‘ï¼Œé€å±‚å¯¹æ¯”çš„è¿‡ç¨‹ï¼Œå°±æ˜¯ Tree Diffã€‚å½“æ•´æ£µ DOM æ ‘é€å±‚å¯¹æ¯”å®Œæ¯•ï¼Œåˆ™æ‰€æœ‰éœ€è¦è¢«æŒ‰éœ€æ›´æ–°çš„å…ƒç´ ï¼Œå¿…ç„¶èƒ½å¤Ÿæ‰¾åˆ°ï¼›\n* <span style=\"color:red\">Component Diff</span> - åœ¨è¿›è¡Œ Tree Diff çš„æ—¶å€™ï¼Œæ¯ä¸€å±‚ä¸­ï¼Œç»„ä»¶çº§åˆ«çš„å¯¹æ¯”ï¼Œå«åš Component Diffã€‚å¦‚æœå¯¹æ¯”å‰åï¼Œç»„ä»¶çš„ç±»å‹ç›¸åŒï¼Œåˆ™æš‚æ—¶è®¤ä¸ºæ­¤ç»„ä»¶ä¸éœ€è¦è¢«æ›´æ–°ã€‚å¦‚æœå¯¹æ¯”å‰åï¼Œç»„ä»¶ç±»å‹ä¸åŒï¼Œåˆ™éœ€è¦ç§»é™¤æ—§ç»„ä»¶ï¼Œåˆ›å»ºæ–°ç»„ä»¶ï¼Œå¹¶è¿½åŠ åˆ°é¡µé¢ä¸Šï¼›\n* <span style=\"color:red\">Element Diff</span> - åœ¨è¿›è¡Œç»„ä»¶å¯¹æ¯”çš„æ—¶å€™ï¼Œå¦‚æœä¸¤ä¸ªç»„ä»¶ç±»å‹ç›¸åŒï¼Œåˆ™éœ€è¦è¿›è¡Œå…ƒç´ çº§åˆ«çš„å¯¹æ¯”ï¼Œè¿™å«åš Element Diffã€‚ \n\n## ç”Ÿå‘½å‘¨æœŸå‡½æ•°\n\n1ï¼‰<span style=\"color:red\">ç»„ä»¶åˆ›å»ºé˜¶æ®µ</span>ï¼šä¸€è¾ˆå­åªæ‰§è¡Œä¸€æ¬¡\n\n* componentWillMountï¼šç»„ä»¶å°†è¦è¢«æŒ‚è½½ï¼›\n\n* renderï¼šç¬¬ä¸€æ¬¡å¼€å§‹æ¸²æŸ“çœŸæ­£çš„è™šæ‹ŸDOMï¼Œå½“renderæ‰§è¡Œå®Œã€‚å†…å­˜ä¸­å°±æœ‰å®Œæ•´çš„è™šæ‹ŸDOMäº†ï¼›\n\n* componentDidMountï¼šç»„ä»¶å®ŒæˆæŒ‚è½½ï¼Œæ­¤æ—¶ç»„ä»¶å·²ç»æ˜¾ç¤ºåœ¨é¡µé¢ä¸Šã€‚\n\n2ï¼‰<span style=\"color:red\">ç»„ä»¶è¿è¡Œé˜¶æ®µ</span>ï¼šæŒ‰éœ€æ ¹æ®propså±æ€§æˆ–stateçŠ¶æ€çš„æ”¹å˜ï¼Œæœ‰é€‰æ‹©æ€§çš„æ‰§è¡Œ0æ¬¡åˆ°å¤šæ¬¡\n\n* componentWillReceivePropsï¼šç»„ä»¶å°†è¦æ¥å—æ–°çš„å±æ€§ï¼›\n\n* shouldComponentUpdateï¼šç»„ä»¶æ˜¯å¦éœ€è¦è¿›è¡Œæ›´æ–°ã€‚æ­¤æ—¶ï¼Œç»„ä»¶å°šæœªè¢«æ›´æ–°ï¼›\n\n* componentWillUpdateï¼šç»„ä»¶å°†è¦è¢«æ›´æ–°ï¼›\n\n* renderï¼šæ ¹æ®æ–°çš„stateå’Œpropsé‡æ–°çš„æ¸²æŸ“å†…å­˜ä¸­çš„è™šæ‹ŸDOMæ•°ï¼›\n\n* componentDidUpdateï¼šæ­¤æ—¶é¡µé¢è¢«é‡æ–°æ¸²æŸ“ã€‚\n\n3ï¼‰<span style=\"color:red\">ç»„ä»¶é”€æ¯é˜¶æ®µ</span>ï¼šä¸€è¾ˆå­åªæ‰§è¡Œä¸€æ¬¡\n\n* componentWillUnmountï¼šç»„ä»¶å°†è¦è¢«å¸è½½çš„æ—¶å€™ã€‚\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b6ab18a3b77b44369737ddbd846969a1~tplv-k3u1fbpfcp-zoom-1.image)\n\n## é«˜é˜¶ç»„ä»¶\n\né«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰æ˜¯ React ä¸­ç”¨äºå¤ç”¨ç»„ä»¶é€»è¾‘çš„ä¸€ç§é«˜çº§æŠ€å·§ã€‚HOC è‡ªèº«ä¸æ˜¯ React API çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒæ˜¯ä¸€ç§åŸºäº React çš„ç»„åˆç‰¹æ€§è€Œå½¢æˆçš„è®¾è®¡æ¨¡å¼ã€‚\n\nå…·ä½“è€Œè¨€ï¼Œé«˜é˜¶ç»„ä»¶æ˜¯å‚æ•°ä¸ºç»„ä»¶ï¼Œè¿”å›å€¼ä¸ºæ–°ç»„ä»¶çš„å‡½æ•°ã€‚\n\nç»„ä»¶æ˜¯å°† props è½¬æ¢ä¸º UIï¼Œè€Œé«˜é˜¶ç»„ä»¶æ˜¯å°†ç»„ä»¶è½¬æ¢ä¸ºå¦ä¸€ä¸ªç»„ä»¶ã€‚\n\n## çŠ¶æ€stateå’Œå±æ€§propsçš„åŒºåˆ«\n\n* ä»æ¥æºä¸Šæ¥çœ‹ï¼ŒçŠ¶æ€æ˜¯ç»„ä»¶å†…éƒ¨åˆ›å»ºå¹¶ç»´æŒçš„ï¼Œå±æ€§è™½ç„¶ä¹Ÿå¯ä»¥åœ¨ç»„ä»¶å†…åˆ›å»ºï¼Œä½†ä¸€èˆ¬æ˜¯ä»çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥;\n* å±æ€§å¯ä»¥ç”±çˆ¶ç»„ä»¶ä¿®æ”¹ï¼ŒçŠ¶æ€ä¸èƒ½;\n* çˆ¶ç»„ä»¶èƒ½è®¾ç½®å­ç»„ä»¶çš„å±æ€§åˆå§‹å€¼ï¼ŒçŠ¶æ€ä¸è¡Œ;\n* çŠ¶æ€åªèƒ½åœ¨ç»„ä»¶å†…éƒ¨æ›´æ–°ï¼Œå±æ€§é™¤éå¤–éƒ¨ç»„ä»¶ä¸»åŠ¨ä¼ æ¥æ–°çš„propså¦åˆ™æ°¸è¿œä¿æŒä¸å˜ã€‚\n\n\nä»¥ä¸Šå†…å®¹æ˜¯å¯¹Reactçš„åˆæ­¥è®¤è¯†ï¼Œå¦‚éœ€è¯¦ç»†å­¦ä¹ å¯ä»¥ç§»æ­¥åˆ°Reactå®˜ç½‘[https://reactjs.org/](https://reactjs.org/)\n\n# TypeScript æ˜¯ä»€ä¹ˆï¼Ÿ\n\n## ä»‹ç»\n\n* TypeScript æ˜¯ JavaScript ç±»å‹çš„è¶…é›†ï¼Œæ”¯æŒ ECMAScript 6 æ ‡å‡†ï¼›\n* TypeScript ç”±å¾®è½¯å¼€å‘çš„è‡ªç”±å’Œå¼€æºçš„ç¼–ç¨‹è¯­è¨€ï¼›\n* TypeScript è®¾è®¡ç›®æ ‡æ˜¯å¼€å‘å¤§å‹åº”ç”¨ï¼Œå®ƒå¯ä»¥ç¼–è¯‘æˆçº¯ JavaScriptï¼Œç¼–è¯‘å‡ºæ¥çš„ JavaScript å¯ä»¥è¿è¡Œåœ¨ä»»ä½•æµè§ˆå™¨ã€ä»»ä½•è®¡ç®—æœºå’Œä»»ä½•æ“ä½œç³»ç»Ÿä¸Šã€‚\n\n## è¯­è¨€ç‰¹æ€§\n\n* ç±»å‹æ‰¹æ³¨å’Œç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥\n* ç±»å‹æ¨æ–­\n* ç±»å‹æ“¦é™¤\n* æ¥å£\n* æšä¸¾\n* Mixin\n* æ³›å‹ç¼–ç¨‹\n* åå­—ç©ºé—´\n* å…ƒç»„\n* async / await\n* ç±»\n* æ¨¡å—\n* ç®­å¤´å‡½æ•°è¡¨è¾¾å¼\n* å¯é€‰å‚æ•°å’Œé»˜è®¤å‚æ•°\n\n## ä¸ºä»€ä¹ˆè¦ç”¨ TypeScriptï¼Ÿ\n\n* å¢åŠ äº†ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œå¢åŠ äº†ç¼–è¾‘å™¨å’ŒIDEçš„åŠŸèƒ½ï¼›\n* æ‹¥æœ‰æ´»è·ƒçš„ç¤¾åŒºï¼Œæ‹¥æŠ± ES6 è§„èŒƒï¼›\n* TypeScript éå¸¸åŒ…å®¹ï¼Œåç¼€ .js æ–‡ä»¶å¯ä»¥ç›´æ¥é‡å‘½å .ts å³å¯ã€‚\n\n## ç¼ºç‚¹\n\n* æœ‰ä¸€å®šçš„å­¦ä¹ æˆæœ¬ï¼Œéœ€è¦ç†è§£æ¥å£ï¼ˆInterfacesï¼‰ã€æ³›å‹ï¼ˆGenericsï¼‰ã€ç±»ï¼ˆClassesï¼‰ã€æšä¸¾ç±»å‹ï¼ˆEnumsï¼‰ç­‰å‰ç«¯å·¥ç¨‹å¸ˆå¯èƒ½ä¸æ˜¯å¾ˆç†Ÿæ‚‰çš„æ¦‚å¿µï¼›\n* çŸ­æœŸå¯èƒ½ä¼šå¢åŠ ä¸€äº›å¼€å‘æˆæœ¬ï¼Œæ¯•ç«Ÿè¦å¤šå†™ä¸€äº›ç±»å‹çš„å®šä¹‰ï¼Œä¸è¿‡å¯¹äºä¸€ä¸ªéœ€è¦é•¿æœŸç»´æŠ¤çš„é¡¹ç›®ï¼ŒTypeScript èƒ½å¤Ÿå‡å°‘å…¶ç»´æŠ¤æˆæœ¬ï¼›\n* é›†æˆåˆ°æ„å»ºæµç¨‹éœ€è¦ä¸€äº›å·¥ä½œé‡ï¼›\n* å¯èƒ½å’Œä¸€äº›åº“ç»“åˆçš„ä¸æ˜¯å¾ˆå®Œç¾ã€‚\n\nä¸Šè¿°å†…å®¹æ˜¯å¯¹ TypeScript çš„åˆæ­¥è®¤è¯†ï¼Œå¦‚éœ€è¯¦ç»†å­¦ä¹ å¯ä»¥ç§»æ­¥åˆ°TypeScriptå®˜ç½‘[https://www.typescriptlang.org/](https://www.typescriptlang.org/)\n\nå¦å¤–æ¨èå­¦ä¹  [TypeScript å…¥é—¨æ•™ç¨‹](https://ts.xcatliu.com/)\n\n# Ant Design of React ï¼ˆç®€ç§° antdï¼‰\n\n## ä»‹ç»\n\nantd æ˜¯åŸºäº [Ant Design](https://ant.design/docs/react/introduce-cn) è®¾è®¡ä½“ç³»çš„ React UI ç»„ä»¶åº“ï¼Œä¸»è¦ç”¨äºç ”å‘ä¼ä¸šçº§ä¸­åå°äº§å“ã€‚\n\n## ç‰¹æ€§\n\n* ğŸŒˆ æç‚¼è‡ªä¼ä¸šçº§ä¸­åå°äº§å“çš„äº¤äº’è¯­è¨€å’Œè§†è§‰é£æ ¼ã€‚\n* ğŸ“¦ å¼€ç®±å³ç”¨çš„é«˜è´¨é‡ React ç»„ä»¶ã€‚\n* ğŸŒ€ ä½¿ç”¨ TypeScript å¼€å‘ï¼Œæä¾›å®Œæ•´çš„ç±»å‹å®šä¹‰æ–‡ä»¶ã€‚\n* âš™ï¸ å…¨é“¾è·¯å¼€å‘å’Œè®¾è®¡å·¥å…·ä½“ç³»ã€‚\n* ğŸŒ æ•°åä¸ªå›½é™…åŒ–è¯­è¨€æ”¯æŒã€‚\n* ğŸ¨ æ·±å…¥æ¯ä¸ªç»†èŠ‚çš„ä¸»é¢˜å®šåˆ¶èƒ½åŠ›ã€‚\n\n# å‰åç«¯åˆ†ç¦»\n\nå‰ç«¯é¡¹ç›®é‡‡ç”¨çš„æŠ€æœ¯æ ˆæ˜¯åŸºäº`Reactå…¨å®¶æ¡¶ + TS + Antd`ï¼Œç”¨`create-react-app`å®˜æ–¹è„šæ‰‹æ¶æ„å»ºçš„å‰ç«¯ç•Œé¢ï¼Œåç«¯é¡¹ç›®é‡‡ç”¨çš„æŠ€æœ¯æ ˆæ˜¯åŸºäº`Node.js + Express + MySQL`ï¼Œç”¨Expressæ­å»ºçš„åç«¯æœåŠ¡å™¨ã€‚\n\nåœ¨çº¿æ¼”ç¤ºDEMOåœ°å€ğŸ‘‰ï¼š[http://106.55.168.13:9000/](http://106.55.168.13:9000/)\n\nå¦‚æœè§‰å¾—è¿˜ä¸é”™çš„è¯ï¼Œå°±è¯·ç»™ä¸ªğŸ‘å’Œâ¤ï¸æ”¶è—ï¼Œæ‚¨ä»¬çš„ç‚¹èµæ˜¯ä½œè€…ç»§ç»­åˆ›ä½œçš„åŠ¨åŠ›ã€‚\n\n# éƒ¨åˆ†æ•ˆæœæˆªå›¾\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2ef511287b0441d68787c60d9d0f8a92~tplv-k3u1fbpfcp-zoom-1.image)\n\n![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c5e5af7c493441d3b44d873be743079a~tplv-k3u1fbpfcp-zoom-1.image)\n\n![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/903c1f02f12a44a696449e215f125e99~tplv-k3u1fbpfcp-zoom-1.image)\n\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8fdc9c6390874c5985ab9d7c9de3bd1f~tplv-k3u1fbpfcp-zoom-1.image)\n\n![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2baeb7a255da4147a56da9c603e28892~tplv-k3u1fbpfcp-zoom-1.image)\n\n\n# ç›®å½•ç»“æ„\n\n```javascript\nâ”‚  .gitignore                 // gitå¿½ç•¥é…ç½®\nâ”‚  config-overrides.js        // webpackè‡ªå®šä¹‰é…ç½®\nâ”‚  package.json               // npmåŒ…ç®¡ç†æ‰€éœ€æ¨¡å—åŠé…ç½®ä¿¡æ¯\nâ”‚  paths.json                 // srcè·¯å¾„é…ç½®\nâ”‚  tsconfig.json              // typescripté…ç½®\nâ”‚  yarn.lock                  // è‡ªåŠ¨é”å®šå®‰è£…åŒ…ç‰ˆæœ¬       \nâ”œâ”€public\nâ”‚      favicon.ico            // å›¾æ ‡\nâ”‚      index.html             // å…¥å£htmlæ–‡ä»¶          \nâ””â”€src\n    â”‚  App.tsx                // è·¯ç”±ç»„ä»¶ \n    â”‚  declaration.d.ts       // ä¾èµ–å£°æ˜æ–‡ä»¶\n    â”‚  index.tsx              // å…¥å£ä¸»æ–‡ä»¶\n    â”‚  react-app-env.d.ts     // å£°æ˜æ–‡ä»¶\n    â”œâ”€assets                  // å­˜æ”¾å…¬å…±å›¾ç‰‡\n    â”œâ”€components              // å…¬å…±ç»„ä»¶ \n    â”‚      404.tsx            // é”™è¯¯é¡µé¢\n    â”‚      Footer.tsx         // åº•éƒ¨æ¨¡æ¿ç»„ä»¶\n    â”‚      Header.tsx         // å¤´éƒ¨æ¨¡æ¿ç»„ä»¶\n    â”œâ”€router\n    â”‚      config.js          // é¡¹ç›®è·¯ç”±é…ç½® \n    â”‚      index.js           // å•é¡µé¢è·¯ç”±æ³¨å†Œç»„ä»¶\n    â”‚      permissionAuth.js  // ç™»å½•æƒé™æ§åˆ¶ç»„ä»¶\n    â”œâ”€store                   // å…¨å±€storeçŠ¶æ€ç®¡ç†\n    â”‚  â”‚  actionTypes.js      // æ‹†åˆ†actionTypeçš„ç±»å‹å®šä¹‰å¸¸é‡\n    â”‚  â”‚  index.js            // åˆ›å»ºstoreç®¡ç†ä»“åº“  \n    â”‚  â”œâ”€actions              // æ‹†åˆ†actionï¼Œå°†å®ƒå°è£…åˆ°ä¸€ä¸ªå‡½æ•°é‡Œé¢å»ç®¡ç†\n    â”‚  â”‚      auth.js         // æƒé™actionå•ç‹¬ç®¡ç†\n    â”‚  â”‚      index.js        // åˆå¹¶å¤šä¸ªä¸åŒactionï¼Œç»Ÿä¸€å¯¹å¤–è¾“å‡º\n    â”‚  â”‚      user.js         // ç”¨æˆ·actionå•ç‹¬ç®¡ç†\n    â”‚  â””â”€reducers             // åˆ›å»ºreducerï¼Œæ›´æ–°stateæ•°æ®æ“ä½œ\n    â”‚          index.js       // åˆå¹¶å¤šä¸ªä¸åŒreducerï¼Œç»Ÿä¸€å¯¹å¤–è¾“å‡º\n    â”‚          user.js        // åˆ›å»ºç”¨æˆ·reducerï¼Œæ›´æ–°stateæ•°æ®æ“ä½œ\n    â”œâ”€styles\n    â”‚      base.less           // åŸºç¡€æ ·å¼  \n    â”‚      footer.less         // åº•éƒ¨æ ·å¼\n    â”‚      header.less         // å¤´éƒ¨æ ·å¼\n    â”‚      home.less           // é¦–é¡µæ ·å¼\n    â”‚      login.less          // ç™»å½•æ ·å¼\n    â”œâ”€utils\n    â”‚      api.js              // ç»Ÿä¸€å°è£…APIæ¥å£è°ƒç”¨æ–¹æ³•\n    â”‚      network.js          // axioså°è£…ä¸æ‹¦æˆªå™¨é…ç½®\n    â”‚      url.js              // è‡ªåŠ¨éƒ¨ç½²æœåŠ¡å™¨ç¯å¢ƒ\n    â”‚      valid.js            // ç»Ÿä¸€å°è£…å…¬ç”¨æ¨¡å—æ–¹æ³•\n    â””â”€views\n            Home.tsx           // é¦–é¡µ\n            Login.tsx          // ç™»å½•é¡µé¢\n```\n\n# å‰ç«¯éƒ¨åˆ†\n\n## æŠ€æœ¯æ ˆ\n\n* create-react-app\n* React v16.13\n* react-router-dom v5.2\n* redux v4.0\n* react-redux v7.2\n* react-thunk v2.3\n* typescript v3.7\n* antd v4.5\n* axios v0.19\n* react-persist v6.0\n\n## åŠŸèƒ½æ¨¡å—\n\n* ç™»å½•ï¼ˆç™»å‡ºï¼‰\n* æ³¨å†Œ\n* è®°ä½å¯†ç \n* å¿˜è®°å¯†ç ï¼ˆä¿®æ”¹å¯†ç ï¼‰\n* todoListå¢åˆ æ”¹æŸ¥\n* ç‚¹äº®çº¢æ˜Ÿæ ‡è®°\n* æŸ¥è¯¢æ¡ä»¶ç­›é€‰\n* é”™è¯¯é¡µé¢\n\n## ä»£ç å®ç°\n\nåœ¨ TypeScript ä¸­ä½¿ç”¨ `create-react-app` å®˜æ–¹è„šæ‰‹æ¶ä¸€æ­¥æ­¥åœ°åˆ›å»ºä¸€ä¸ª TypeScript é¡¹ç›®ï¼Œå¹¶å¼•å…¥ antdã€‚\n\n### å‡†å¤‡å·¥ä½œ\n\nè¯·ç¡®ä¿ç”µè„‘ä¸Šå·²ç»å®‰è£… [nodejs v10+](https://nodejs.org/en/) æˆ–è€…æœ€æ–°ç‰ˆçš„ [yarn](https://yarnpkg.com/getting-started/install)ã€‚\n\n```js\n// ä½¿ç”¨npmå®‰è£…yarn\nnpm i yarn -g\n\n// æŸ¥çœ‹ç‰ˆæœ¬å·\nyarn -v\n```\n\næ¨èå…¨éƒ¨ä½¿ç”¨yarnå®‰è£…ä¾èµ–åŒ…åŠè¿è¡Œé¡¹ç›®ï¼Œä¿è¯ç•…é€šæ— é˜»ï¼Œé€Ÿåº¦é£å¿«ã€‚\n\nè¯·å°†npmè®¾ç½®ä¸ºæ·˜å®æº\n\n```js\nnpm config set registry https://registry.npm.taobao.org\nnpm config set disturl https://npm.taobao.org/dist\n```\n\nè¯·å°†yarnè®¾ç½®ä¸ºæ·˜å®æº\n\n```js\nyarn config set registry https://registry.npm.taobao.org --global\nyarn config set disturl https://npm.taobao.org/dist --global\n```\n\n### å®‰è£…å’Œåˆå§‹åŒ–\n\nä½¿ç”¨yarnæˆ–npmåˆ›å»ºé¡¹ç›®\n\n```js\nnpx create-react-app react-ts-antd --typescript\nOR\nyarn create react-app react-ts-antd --template typescript\n```\n\nè¿›å…¥é¡¹ç›®å¹¶å¯åŠ¨\n\n```js\ncd react-ts-antd\nyarn start\n```\n\næ­¤æ—¶æµè§ˆå™¨ä¼šè®¿é—® http://localhost:3000/ï¼Œçœ‹åˆ° Welcome to React çš„ç•Œé¢å°±ç®—æˆåŠŸäº†ã€‚\n\nå¼•å…¥ antd å’Œ less æ–‡ä»¶\n\n* å®‰è£…ä¾èµ–\n\n```js\n// less-loaderå¿…é¡»æŒ‡å®š5.0ç‰ˆæœ¬\nyarn add antd less less-loader@5.0.0\n```\n\n* åœ¨src/index.tsxæ–‡ä»¶é¡¶éƒ¨å¼•å…¥antdæ ·å¼\n\n```js\nimport 'antd/dist/antd.less';\n```\n\n* æˆ–è€…åœ¨src/base.lessæ–‡ä»¶é¡¶éƒ¨å¼•å…¥antdæ ·å¼\n\n```js\n@import '~antd/dist/antd.less';\n```\n\n* åœ¨è‡ªå®šä¹‰ç»„ä»¶ä¸­æŒ‰éœ€å¼•å…¥antdçš„ç›¸å…³ç»„ä»¶ï¼Œæ¯”å¦‚æŒ‰é’®ç»„ä»¶\n\n```js\nimport * as React from 'react';\nimport { Button } from 'antd';\nimport 'antd/dist/antd.less';\n\nclass Custom extends React.Component {\n  <div className=\"container\">\n    <Button type=\"primary\">æŒ‰é’®</Button>\n  </div>\n};\n\nexport default Custom;\n```\n\n## webpack è‡ªå®šä¹‰é…ç½®\n\n### å¼•å…¥ react-app-rewired å’Œ customize-cra\n\n```js\nyarn add react-app-rewired customize-cra -D\n```\n\n### ä¿®æ”¹package.jsonæ–‡ä»¶\n\nå°†react-scriptså‘½ä»¤å…¨éƒ¨æ›¿æ¢æˆreact-app-rewiredï¼Œå·²æ”¹ä»£ç å¦‚ä¸‹ï¼š\n\n```js\n\"scripts\": {\n    \"start\": \"set BROWSER=none&& set PORT=9000&& react-app-rewired start\",\n    \"build\": \"react-app-rewired build\",\n    \"test\": \"react-app-rewired test\",\n    \"eject\": \"react-app-rewired eject\"\n  }\n```\n\nå¦å¤–å¼€å‘ç¯å¢ƒé…ç½®å…³é—­æµè§ˆå™¨è‡ªåŠ¨æ‰“å¼€ä»¥åŠæ›´æ”¹é»˜è®¤ç«¯å£å·3000\n\n```js\nset BROWSER=none&& set PORT=9000&& react-app-rewired start\n```\n\n### é…ç½®config-overrides.jsæ–‡ä»¶\n\nåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹(å’Œpackage.jsonåŒçº§)æ–°å»ºé…ç½®æ–‡ä»¶ config-overrides.jsï¼Œå¹¶æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š\n\n```js\nconst {\n    override,\n    fixBabelImports,\n    addLessLoader,\n    addWebpackPlugin, \n    addWebpackAlias,\n    addDecoratorsLegacy,\n    overrideDevServer\n  } = require('customize-cra');\n\n  const path = require('path');\n  const webpack = require('webpack');\n  const UglifyJsPlugin = require('uglifyjs-webpack-plugin');\n  const CompressionWebpackPlugin = require('compression-webpack-plugin');\n\n  const isProduction = process.env.NODE_ENV === 'production';\n\n  function resolve (pathUrl) {\n    return path.join(__dirname, pathUrl);\n  }\n\n  const addCustomize = () => (config) => {\n    // é…ç½®æ‰“åŒ…åçš„æ–‡ä»¶ä½ç½®\n    // config.output.path = resolve('dist');\n    if (config.output.publicPath) {\n      config.output.publicPath = '/';\n        // isProduction ? '/react-ts-antd-admin/' : '/';\n    }\n\n    if (config.resolve) {\n      config.resolve.extensions = ['.js', '.tsx', '.less', '.css'];\n    }\n\n    // æ·»åŠ jsã€cssæ‰“åŒ…gzipé…ç½®\n    config.plugins.push(\n      new CompressionWebpackPlugin({\n        test: /\\.js$|\\.css$/,\n        threshold: 1024,\n      }),\n    )\n\n    return config;\n  };\n\n  // è®¾ç½®ä»£ç†\n  const devServerConfig = () => config => {\n    return {\n      ...config,\n      proxy: {\n        '/api': {\n          target: 'http://106.55.168.13:9000',\n          changeOrigin: true,\n          secure: false\n        }\n      }\n    };\n  };\n\n  // å…³æ‰ sourceMap\n  process.env.GENERATE_SOURCEMAP = isProduction ? 'false' : 'true';\n\n  module.exports = {\n    webpack: override(\n    // åˆ¤æ–­ç¯å¢ƒï¼Œåªæœ‰åœ¨ç”Ÿäº§ç¯å¢ƒçš„æ—¶å€™æ‰å»ä½¿ç”¨è¿™ä¸ªæ’ä»¶\n    isProduction && addWebpackPlugin(new UglifyJsPlugin({\n      uglifyOptions: {\n        compress: {\n          drop_debugger: true,\n          drop_console: true\n        }\n      }\n    })),  \n      \n    // é…ç½®antdæŒ‰éœ€å¼•å…¥\n    fixBabelImports('import', {\n      libraryName: 'antd',\n      libraryDirectory: 'es',\n      style: true, // è‡ªåŠ¨æ‰“åŒ…ç›¸å…³çš„æ ·å¼\n    }),\n  \n    // ä½¿ç”¨less-loaderå¯¹æºç ä¸­çš„lessçš„å˜é‡è¿›è¡Œé‡æ–°æŒ‡å®š\n    addLessLoader({\n      javascriptEnabled: true,\n      modifyVars: { '@primary-color': '#2d8cf0' },\n    }),\n  \n    // é…ç½®è·¯å¾„åˆ«å\n    addWebpackAlias({\n      '@': resolve('src'),\n    }),\n    \n    // æ”¯æŒè£…é¥°å™¨\n    addDecoratorsLegacy(),\n\n    // å‹ç¼©JSç­‰\n    addCustomize()\n  ),\n\n  // æœ¬åœ°å¯åŠ¨é…ç½®ï¼Œå¯ä»¥è®¾ç½®ä»£ç†\n  devServer: overrideDevServer(devServerConfig())\n};\n```\n\n#### é…ç½® antd æŒ‰éœ€åŠ è½½ç»„ä»¶\n\n```js\nyarn add babel-plugin-import -D\n```\n\n```js\nconst { override, fixBabelImports } = require('customize-cra');\nconst webpack = require('webpack');\n\nmodule.exports = {\n\twebpack: override(\nã€€ã€€\t  fixBabelImports('import', {\n    \t\tlibraryName: 'antd',\n    \t\tlibraryDirectory: 'es',\n    \t\tstyle: true,\n\t\t})\n\t);\n}\n```\n\n#### é€šè¿‡å¼•å…¥ customize-cra æ¨¡å—ä¸­çš„ addLessLoader æ¥å®ç° antd è‡ªå®šä¹‰ä¸»é¢˜\n\n```js\nconst { override, addLessLoader } = require('customize-cra');\nconst webpack = require('webpack');\n\n// åˆ©ç”¨less-loaderçš„modifyVarså‚æ•°æ¥è¿›è¡Œä¸»é¢˜é…ç½®\nmodule.exports = {\n\twebpack: override(\nã€€ã€€\t  addLessLoader({\n        \tjavascriptEnabled: true,\n        \tmodifyVars: {}\n    \t})\n\t);\n}\n```\n\n#### é…ç½®è£…é¥°å™¨\n\n```js\nyarn add @babel/plugin-proposal-decorators -D\n```\n\n```js\nconst { override, addDecoratorsLegacy} = require('customize-cra');\nconst webpack = require('webpack');\n\nmodule.exports = {\n\twebpack: override(\n    \taddDecoratorsLegacy()\n\t);\n}\n```\n\nä»¥ä¸ŠåŸºæœ¬å·¥ä½œå·²å‡†å¤‡å°±ç»ªï¼Œæ¶æ„æ­å»ºä¹Ÿå·²å®Œå–„ï¼Œä¸‹é¢ç»ˆäºè¦è¿›å…¥é¡µé¢ç»„ä»¶åŠŸèƒ½å¼€å‘ï¼Œå¿ƒæƒ…ååˆ†é¸¡å†»ï¼Œæ•²ä»£ç çš„æ—¥å­æ‰åˆšåˆšå¼€å§‹ã€‚ä¸€èˆ¬å¼€å‘é¡¹ç›®ä¹‹å‰ï¼Œéœ€è¦å…ˆåˆ†æé¡µé¢éœ€æ±‚ï¼Œæœ‰å“ªäº›åŠŸèƒ½æ¨¡å—ï¼ˆåŠŸèƒ½æ‰©å±•ï¼‰ï¼ŒæŠ€æœ¯é€‰å‹ï¼Œæœ‰æ— æŠ€æœ¯éš¾ç‚¹ï¼ˆæ˜¯å¦å¯æ›¿ä»£ï¼‰ï¼Œå“ªäº›ç»„ä»¶å¯å¤ç”¨ï¼Œæ‰‹æœºé€‚é…ï¼Œå‰ç«¯æ€§èƒ½è€ƒè™‘ï¼Œæ˜¯å¦å¤šäººåä½œå¼€å‘ï¼Œä¸åç«¯çº¦å®šAPIæ¥å£è§„åˆ™ç­‰ç­‰ã€‚æ—¶é—´è¿‡å¾—çœŸå¿«ï¼Œå‘¨æœ«å°±è¿‡å®Œäº†ï¼Œå…ˆå†™åˆ°è¿™å§~ğŸ¶\n\n# å†™åœ¨æœ€å\n\nç”±äºæ—¶é—´å…³ç³»ï¼Œæ–‡ç« å†™çš„ä»“ä¿ƒï¼Œéš¾å…ä¼šæœ‰äº›å°é—®é¢˜æˆ–BUGå‡ºç°ï¼Œæ„¿æ¥å—æ‰¹è¯„å’ŒæŒ‡æ­£ã€‚æ­¤æ¬¡å®æˆ˜é¡¹ç›®åˆ†äº«å†…å®¹**åˆ†ä¸ºä¸Šä¸‹ä¸¤ç¯‡æ–‡ç« **ã€‚ä¸‹ä¸€ç¯‡è¦åˆ†äº«çš„å†…å®¹å¤§æ¦‚æ˜¯ç»“åˆå®ä¾‹è®²è§£<span style=\"color:red\">Reactå…¨å®¶æ¡¶çš„ç»„åˆä½¿ç”¨ã€æœ‰çŠ¶æ€ç»„ä»¶å’Œæ— çŠ¶æ€ç»„ä»¶çš„ä½¿ç”¨ã€ç»„ä»¶é—´é€šä¿¡ã€å°è£…å·¥å…·å‡½æ•°åº“ã€å‰ç«¯æ€§èƒ½ä¼˜åŒ–ã€RESTFUL APIæ¥å£å¼€å‘</span>ç­‰ç­‰ã€‚\n\n> å¦‚æœå°ä¼™ä¼´çœ‹å®Œï¼Œæ„Ÿè§‰è¿˜ä¸é”™çš„è¯ï¼Œè€é“ä»¬æ˜¯ä¸æ˜¯æ¥<span style=\"color:red\">githubé‡Œèµä¸ªâ˜…Star</span>é¼“åŠ±ä¸€å“ˆã€‚ä½ ä»¬çš„èµå’Œ`star`æ˜¯ä½œè€…ç¼–å†™æ›´å¤šæ›´ç²¾å½©æ–‡ç« çš„åŠ¨åŠ›ï¼\n\ngithubåœ°å€ï¼š[https://github.com/jackchen0120/react-ts-antd](https://github.com/jackchen0120/react-ts-antd)\n\næ­¤é¡¹ç›®å…¶å®è¿˜æœ‰å¾ˆå¤šä¸è¶³æˆ–ä¼˜åŒ–çš„åœ°æ–¹ï¼Œä¹ŸæœŸæœ›ä¸å¤§å®¶ä¸€èµ·äº¤æµå­¦ä¹ ã€‚ğŸ˜ƒ\n\n**æ¨èé˜…è¯»ç›¸å…³ä¼˜è´¨æ–‡ç« **\n\n* [å¼€å‘ä¸€æ¬¾å¾®ä¿¡å°ç¨‹åºçš„ä¸ªæ€§ç®€å†ï¼Œèƒ½æ‰“å¼€å¤§å‚ä¹‹é—¨å¹¶è·å¾—é—¨ç¥¨ï¼Ÿï¼ˆé™„æºç ï¼‰](https://juejin.im/post/5f01b5325188252e6e15095c)\n* [Vue+Echartsæ„å»ºå¤§æ•°æ®å¯è§†åŒ–é…·ç‚«å±•ç¤ºå…¬å¸å“ç‰Œå®æˆ˜é¡¹ç›®åˆ†äº«ï¼ˆé™„æºç ï¼‰](https://juejin.im/post/5efca542f265da22c058d8ed)\n* [å‰ç«¯å¿…çŸ¥å¿…ä¼šMySQLçš„é‚£äº›äº‹å„¿ - NodeJSå…¨æ ˆæˆé•¿ä¹‹è·¯](https://juejin.im/post/5ee6010ef265da76d3188ea8)\n* [2020å€¼å¾—æ”¶è—ä¸å­¦ä¹ 280å¤šæ¬¾H5å°æ¸¸æˆï¼Œä»å…¥é—¨åˆ°å½»åº•äº†è§£å®ƒï¼ˆé™„æºç ï¼‰](https://juejin.im/post/5ef8a8ed6fb9a07e944ed6d6)\n\n**æ¬¢è¿å…³æ³¨ä½œè€…å…¬ä¼—å·ï¼šæ‡’äººç å†œ**\n\n![](https://user-gold-cdn.xitu.io/2020/7/5/1731eb762d539047?w=750&h=520&f=gif&s=81787)\n\n", "user_name": "æ‡’äººç å†œ", "description": "ã€Œæ‡’äººç å†œã€å…¬ä¼—å·ä½œè€…ï¼Œæ”¯æŒæ–‡ç« æŠ•ç¨¿åŠç›¸äº’å¼€ç™½åå•ã€‚ä¸€åˆ‡æŠ€æœ¯é—®é¢˜ï¼Œ", "got_view_count": 27939, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "JavaScript", "concern_user_count": 343215, "user_id": "4212984289442750", "title": "Webå¼€å‘åº”äº†è§£çš„5ç§è®¾è®¡æ¨¡å¼ğŸŠ", "mark_content": "<section id=\"nice\" data-tool=\"mdniceç¼–è¾‘å™¨\" data-website=\"https://www.mdnice.com\" style=\"color: black; line-height: 1.6; word-spacing: 0px; letter-spacing: 0px; word-break: break-word; word-wrap: break-word; text-align: left; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, 'PingFang SC', Cambria, Cochin, Georgia, Times, 'Times New Roman', serif; font-size: 14px; padding: 10px;\"><h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-size: 22px; text-align: center; position: relative; font-weight: bold; color: black; line-height: 1.1em; padding-top: 12px; padding-bottom: 12px; margin: 70px 30px 30px; border: 1px solid #000;\"><span style=\"float: left; display: block; width: 90%; border-top: 1px solid #000; height: 1px; line-height: 1px; margin-left: -5px; margin-top: -17px;\"> </span><span class=\"prefix\" style=\"display: block; width: 3px; margin: 0 0 0 5%; height: 3px; line-height: 3px; overflow: hidden; background-color: #000; box-shadow: 3px 0 #000,\n    0 3px #000,\n    -3px 0 #000,\n    0 -3px #000;\"></span><span class=\"content\" style=\"display: block; -webkit-box-reflect: below 0em -webkit-gradient(linear,left top,left bottom, from(rgba(0,0,0,0)),to(rgba(255,255,255,0.1)));\">ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼ï¼Ÿ</span><span class=\"suffix\" style=\"display: block; width: 3px; margin: 0 0 0 95%; height: 3px; line-height: 3px; overflow: hidden; background-color: #000; box-shadow: 3px 0 #000,\n    0 3px #000,\n    -3px 0 #000,\n    0 -3px #000;\"></span><span style=\"float: right; display: block; width: 90%; border-bottom: 1px solid #000; height: 1px; line-height: 1px; margin-right: -5px; margin-top: 16px;\"> </span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">è®¾è®¡æ¨¡å¼æ˜¯å¯¹è½¯ä»¶è®¾è®¡å¼€å‘è¿‡ç¨‹ä¸­<strong style=\"font-weight: bold; color: black;\">åå¤å‡ºç°çš„æŸç±»é—®é¢˜çš„é€šç”¨è§£å†³æ–¹æ¡ˆ</strong>ã€‚è®¾è®¡æ¨¡å¼æ›´å¤šçš„æ˜¯æŒ‡å¯¼æ€æƒ³å’Œæ–¹æ³•è®ºï¼Œè€Œä¸æ˜¯ç°æˆçš„ä»£ç ï¼Œå½“ç„¶æ¯ç§è®¾è®¡æ¨¡å¼éƒ½æœ‰æ¯ç§è¯­è¨€ä¸­çš„å…·ä½“å®ç°æ–¹å¼ã€‚å­¦ä¹ è®¾è®¡æ¨¡å¼æ›´å¤šçš„æ˜¯ç†è§£å„ç§æ¨¡å¼çš„å†…åœ¨æ€æƒ³å’Œè§£å†³çš„é—®é¢˜ï¼Œæ¯•ç«Ÿè¿™æ˜¯å‰äººæ— æ•°ç»éªŒæ€»ç»“æˆçš„æœ€ä½³å®è·µï¼Œè€Œä»£ç å®ç°åˆ™æ˜¯å¯¹åŠ æ·±ç†è§£çš„è¾…åŠ©ã€‚ä½¿ç”¨è®¾è®¡æ¨¡å¼æ˜¯ä¸ºäº†<strong style=\"font-weight: bold; color: black;\">å¯é‡ç”¨ä»£ç ã€è®©ä»£ç æ›´å®¹æ˜“è¢«ä»–äººç†è§£ã€ä¿è¯ä»£ç å¯é æ€§</strong>ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†ä»‹ç»å…¶ä¸­å¸¸è§çš„å››ç§è®¾è®¡æ¨¡å¼åœ¨JavaScriptä¸­å®é™…ä½¿ç”¨åœºæ™¯ï¼š</p>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-size: 22px; text-align: center; position: relative; font-weight: bold; color: black; line-height: 1.1em; padding-top: 12px; padding-bottom: 12px; margin: 70px 30px 30px; border: 1px solid #000;\"><span style=\"float: left; display: block; width: 90%; border-top: 1px solid #000; height: 1px; line-height: 1px; margin-left: -5px; margin-top: -17px;\"> </span><span class=\"prefix\" style=\"display: block; width: 3px; margin: 0 0 0 5%; height: 3px; line-height: 3px; overflow: hidden; background-color: #000; box-shadow: 3px 0 #000,\n    0 3px #000,\n    -3px 0 #000,\n    0 -3px #000;\"></span><span class=\"content\" style=\"display: block; -webkit-box-reflect: below 0em -webkit-gradient(linear,left top,left bottom, from(rgba(0,0,0,0)),to(rgba(255,255,255,0.1)));\">å•ä¾‹è®¾è®¡æ¨¡å¼</span><span class=\"suffix\" style=\"display: block; width: 3px; margin: 0 0 0 95%; height: 3px; line-height: 3px; overflow: hidden; background-color: #000; box-shadow: 3px 0 #000,\n    0 3px #000,\n    -3px 0 #000,\n    0 -3px #000;\"></span><span style=\"float: right; display: block; width: 90%; border-bottom: 1px solid #000; height: 1px; line-height: 1px; margin-right: -5px; margin-top: 16px;\"> </span></h2>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; font-weight: bold; background-color: #000; color: #fff; padding: 2px 10px; width: fit-content; font-size: 17px; margin: 60px auto 10px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">å®šä¹‰</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<blockquote data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"display: block; font-size: 0.9em; overflow: auto; overflow-scrolling: touch; color: #6a737d; padding-top: 10px; padding-bottom: 10px; padding-left: 20px; padding-right: 10px; margin-bottom: 20px; margin-top: 20px; border-left: 3px solid rgba(0, 0, 0, 0.65); border-right: 1px solid rgba(0, 0, 0, 0.65); background: rgb(249, 249, 249);\">\n<p style=\"padding-top: 8px; padding-bottom: 8px; font-size: 14px; margin: 0px; color: black; line-height: 26px;\">å•ä¾‹æ¨¡å¼ä»…å…è®¸ç±»æˆ–å¯¹è±¡å…·æœ‰å•ä¸ªå®ä¾‹ï¼Œå¹¶ä¸”å®ƒä½¿ç”¨å…¨å±€å˜é‡æ¥å­˜å‚¨è¯¥å®ä¾‹ã€‚</p>\n</blockquote>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: square;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\"><strong style=\"font-weight: bold; color: black;\">å®ç°æ–¹æ³•</strong>æ˜¯åˆ¤æ–­æ˜¯å¦å­˜åœ¨è¯¥å¯¹è±¡çš„å®ä¾‹ï¼Œå¦‚æœå·²å­˜åœ¨åˆ™ä¸å†åˆ›å»º</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\"><strong style=\"font-weight: bold; color: black;\">ä½¿ç”¨åœºæ™¯</strong>é€‚ç”¨äºä¸šåŠ¡åœºæ™¯ä¸­åªèƒ½å­˜åœ¨ä¸€ä¸ªçš„å®ä¾‹ï¼Œæ¯”å¦‚å¼¹çª—ï¼Œè´­ç‰©è½¦</section></li></ul>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; font-weight: bold; background-color: #000; color: #fff; padding: 2px 10px; width: fit-content; font-size: 17px; margin: 60px auto 10px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">å®ç°</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\"><strong style=\"font-weight: bold; color: black;\">å•ä¾‹æ¨¡å¼åˆ†ä¸ºæ‡’æ±‰å¼å’Œé¥¿æ±‰å¼:</strong></p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: square;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">æ‡’æ±‰å¼</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px; max-width: 100%; border-radius: 4px; margin: 10px auto 0 auto;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #333; background: #f8f8f8; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch;\"><span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">let</span>&nbsp;ShopCar&nbsp;=&nbsp;(<span class=\"hljs-function\" style=\"line-height: 26px;\"><span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">function</span>&nbsp;(<span class=\"hljs-params\" style=\"line-height: 26px;\"></span>)&nbsp;</span>{<br>&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">let</span>&nbsp;instance;&nbsp;<br>&nbsp;<span class=\"hljs-function\" style=\"line-height: 26px;\"><span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">function</span>&nbsp;<span class=\"hljs-title\" style=\"color: #900; font-weight: bold; line-height: 26px;\">init</span>(<span class=\"hljs-params\" style=\"line-height: 26px;\"></span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">/*è¿™é‡Œå®šä¹‰å•ä¾‹ä»£ç */</span><br>&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">return</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;buy(good)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">this</span>.goods.push(good);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attr\" style=\"line-height: 26px;\">goods</span>:&nbsp;[],<br>&nbsp;&nbsp;&nbsp;};<br>&nbsp;}<br>&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">return</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;<span class=\"hljs-attr\" style=\"line-height: 26px;\">getInstance</span>:&nbsp;<span class=\"hljs-function\" style=\"line-height: 26px;\"><span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">function</span>&nbsp;(<span class=\"hljs-params\" style=\"line-height: 26px;\"></span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">if</span>&nbsp;(!instance)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instance&nbsp;=&nbsp;init();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">return</span>&nbsp;instance;<br>&nbsp;&nbsp;&nbsp;},<br>&nbsp;};<br>})();<br><span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">let</span>&nbsp;car1&nbsp;=&nbsp;ShopCar.getInstance();<br><span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">let</span>&nbsp;car2&nbsp;=&nbsp;ShopCar.getInstance();<br>car1.buy(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'æ©˜å­'</span>);&nbsp;<br>car2.buy(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'è‹¹æœ'</span>);&nbsp;<br><span class=\"hljs-built_in\" style=\"color: #0086b3; line-height: 26px;\">console</span>.log(car1.goods);<span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">//[&nbsp;'æ©˜å­',&nbsp;'è‹¹æœ'&nbsp;]</span><br><span class=\"hljs-built_in\" style=\"color: #0086b3; line-height: 26px;\">console</span>.log(car1&nbsp;===&nbsp;car2);&nbsp;<span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">//&nbsp;true</span><br></code></pre>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: square;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">é¥¿æ±‰å¼</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px; max-width: 100%; border-radius: 4px; margin: 10px auto 0 auto;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #333; background: #f8f8f8; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch;\"><span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">var</span>&nbsp;ShopCar&nbsp;=&nbsp;(<span class=\"hljs-function\" style=\"line-height: 26px;\"><span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">function</span>&nbsp;(<span class=\"hljs-params\" style=\"line-height: 26px;\"></span>)&nbsp;</span>{<br>&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">var</span>&nbsp;instance&nbsp;=&nbsp;init();<br>&nbsp;<span class=\"hljs-function\" style=\"line-height: 26px;\"><span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">function</span>&nbsp;<span class=\"hljs-title\" style=\"color: #900; font-weight: bold; line-height: 26px;\">init</span>(<span class=\"hljs-params\" style=\"line-height: 26px;\"></span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">/*è¿™é‡Œå®šä¹‰å•ä¾‹ä»£ç */</span><br>&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">return</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;buy(good)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">this</span>.goods.push(good);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attr\" style=\"line-height: 26px;\">goods</span>:&nbsp;[],<br>&nbsp;&nbsp;&nbsp;};<br>&nbsp;}<br>&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">return</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;<span class=\"hljs-attr\" style=\"line-height: 26px;\">getInstance</span>:&nbsp;<span class=\"hljs-function\" style=\"line-height: 26px;\"><span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">function</span>&nbsp;(<span class=\"hljs-params\" style=\"line-height: 26px;\"></span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">return</span>&nbsp;instance;<br>&nbsp;&nbsp;&nbsp;},<br>&nbsp;};<br>})();<br><span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">let</span>&nbsp;car1&nbsp;=&nbsp;ShopCar.getInstance();<br><span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">let</span>&nbsp;car2&nbsp;=&nbsp;ShopCar.getInstance();<br>car1.buy(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'æ©˜å­'</span>);<br>car2.buy(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'è‹¹æœ'</span>);&nbsp;<span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">//[&nbsp;'æ©˜å­',&nbsp;'è‹¹æœ'&nbsp;]</span><br><span class=\"hljs-built_in\" style=\"color: #0086b3; line-height: 26px;\">console</span>.log(car1.goods);<br><span class=\"hljs-built_in\" style=\"color: #0086b3; line-height: 26px;\">console</span>.log(car1&nbsp;===&nbsp;car2);&nbsp;<span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">//&nbsp;true</span><br></code></pre>\n<blockquote data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"display: block; font-size: 0.9em; overflow: auto; overflow-scrolling: touch; color: #6a737d; padding-top: 10px; padding-bottom: 10px; padding-left: 20px; padding-right: 10px; margin-bottom: 20px; margin-top: 20px; border-left: 3px solid rgba(0, 0, 0, 0.65); border-right: 1px solid rgba(0, 0, 0, 0.65); background: rgb(249, 249, 249);\">\n<p style=\"padding-top: 8px; padding-bottom: 8px; font-size: 14px; margin: 0px; color: black; line-height: 26px;\"><code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #ff6441;\">æ‡’æ±‰å¼</code>åœ¨ç±»åŠ è½½æ—¶ï¼Œä¸åˆ›å»ºå®ä¾‹ï¼Œå› æ­¤ç±»åŠ è½½é€Ÿåº¦å¿«ï¼Œä½†è¿è¡Œæ—¶è·å–å¯¹è±¡çš„é€Ÿåº¦æ…¢ï¼›<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #ff6441;\">é¥¿æ±‰å¼</code>åœ¨ç±»åŠ è½½æ—¶å°±å®Œæˆäº†åˆå§‹åŒ–ï¼Œæ‰€ä»¥ç±»åŠ è½½è¾ƒæ…¢ï¼Œä½†è·å–å¯¹è±¡çš„é€Ÿåº¦å¿«</p>\n</blockquote>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-size: 22px; text-align: center; position: relative; font-weight: bold; color: black; line-height: 1.1em; padding-top: 12px; padding-bottom: 12px; margin: 70px 30px 30px; border: 1px solid #000;\"><span style=\"float: left; display: block; width: 90%; border-top: 1px solid #000; height: 1px; line-height: 1px; margin-left: -5px; margin-top: -17px;\"> </span><span class=\"prefix\" style=\"display: block; width: 3px; margin: 0 0 0 5%; height: 3px; line-height: 3px; overflow: hidden; background-color: #000; box-shadow: 3px 0 #000,\n    0 3px #000,\n    -3px 0 #000,\n    0 -3px #000;\"></span><span class=\"content\" style=\"display: block; -webkit-box-reflect: below 0em -webkit-gradient(linear,left top,left bottom, from(rgba(0,0,0,0)),to(rgba(255,255,255,0.1)));\">ç­–ç•¥æ¨¡å¼</span><span class=\"suffix\" style=\"display: block; width: 3px; margin: 0 0 0 95%; height: 3px; line-height: 3px; overflow: hidden; background-color: #000; box-shadow: 3px 0 #000,\n    0 3px #000,\n    -3px 0 #000,\n    0 -3px #000;\"></span><span style=\"float: right; display: block; width: 90%; border-bottom: 1px solid #000; height: 1px; line-height: 1px; margin-right: -5px; margin-top: 16px;\"> </span></h2>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; font-weight: bold; background-color: #000; color: #fff; padding: 2px 10px; width: fit-content; font-size: 17px; margin: 60px auto 10px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">å®šä¹‰</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<blockquote data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"display: block; font-size: 0.9em; overflow: auto; overflow-scrolling: touch; color: #6a737d; padding-top: 10px; padding-bottom: 10px; padding-left: 20px; padding-right: 10px; margin-bottom: 20px; margin-top: 20px; border-left: 3px solid rgba(0, 0, 0, 0.65); border-right: 1px solid rgba(0, 0, 0, 0.65); background: rgb(249, 249, 249);\">\n<p style=\"padding-top: 8px; padding-bottom: 8px; font-size: 14px; margin: 0px; color: black; line-height: 26px;\">ç­–ç•¥æ¨¡å¼å®šä¹‰ä¸€ç³»åˆ—çš„ç®—æ³•ï¼Œå°†æ¯ä¸€ä¸ªç®—æ³•å°è£…èµ·æ¥ï¼Œå¹¶è®©ä»–ä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ã€‚</p>\n</blockquote>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: square;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\"><strong style=\"font-weight: bold; color: black;\">å®ç°æ–¹æ³•</strong>å®šä¹‰ä¸€ç»„å¯å˜çš„ç­–ç•¥ç±»å°è£…å…·ä½“ç®—æ³•ï¼Œå®šä¹‰ä¸€ç»„ä¸å˜çš„ç¯å¢ƒç±»å°†è¯·æ±‚å§”æ‰˜ç»™æŸä¸€ä¸ªç­–ç•¥ç±»</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\"><strong style=\"font-weight: bold; color: black;\">ä½¿ç”¨åœºæ™¯</strong>é€‚ç”¨äºä¸šåŠ¡åœºæ™¯ä¸­éœ€è¦åˆ¤æ–­å¤šç§æ¡ä»¶ï¼Œç”šè‡³åŒ…å«å¤æ‚æ¡ä»¶åµŒå¥—çš„ï¼Œå¯ä»¥ä½¿ç”¨ç­–ç•¥æ¨¡å¼æ¥æå‡ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯è¯»æ€§ã€‚æ¯”å¦‚æ”¯ä»˜ï¼Œåšå®¢æƒé™æ ¡éªŒ</section></li></ul>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; font-weight: bold; background-color: #000; color: #fff; padding: 2px 10px; width: fit-content; font-size: 17px; margin: 60px auto 10px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">å®ç°</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\"><strong style=\"font-weight: bold; color: black;\">å®ä¾‹:</strong></p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px; max-width: 100%; border-radius: 4px; margin: 10px auto 0 auto;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #333; background: #f8f8f8; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch;\"><span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">//&nbsp;å®šä¹‰å‡ ä¸ªç­–ç•¥ç±»</span><br><span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">var</span>&nbsp;PaymentMethodStrategy&nbsp;=&nbsp;{<br>&nbsp;<span class=\"hljs-attr\" style=\"line-height: 26px;\">BankAccount</span>:&nbsp;<span class=\"hljs-function\" style=\"line-height: 26px;\"><span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">function</span>&nbsp;(<span class=\"hljs-params\" style=\"line-height: 26px;\">money</span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">return</span>&nbsp;money&nbsp;&gt;&nbsp;<span class=\"hljs-number\" style=\"color: #008080; line-height: 26px;\">50</span>&nbsp;?&nbsp;money&nbsp;*&nbsp;<span class=\"hljs-number\" style=\"color: #008080; line-height: 26px;\">0.7</span>&nbsp;:&nbsp;money;<br>&nbsp;},<br>&nbsp;<span class=\"hljs-attr\" style=\"line-height: 26px;\">CreditCard</span>:&nbsp;<span class=\"hljs-function\" style=\"line-height: 26px;\"><span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">function</span>&nbsp;(<span class=\"hljs-params\" style=\"line-height: 26px;\">money</span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">return</span>&nbsp;money&nbsp;*&nbsp;<span class=\"hljs-number\" style=\"color: #008080; line-height: 26px;\">0.8</span>;<br>&nbsp;},<br>&nbsp;<span class=\"hljs-attr\" style=\"line-height: 26px;\">Alipay</span>:&nbsp;<span class=\"hljs-function\" style=\"line-height: 26px;\"><span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">function</span>&nbsp;(<span class=\"hljs-params\" style=\"line-height: 26px;\">money</span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">return</span>&nbsp;money;<br>&nbsp;},<br>};<br><span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">/*ç¯å¢ƒç±»*/</span><br><span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">var</span>&nbsp;userPay&nbsp;=&nbsp;<span class=\"hljs-function\" style=\"line-height: 26px;\"><span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">function</span>&nbsp;(<span class=\"hljs-params\" style=\"line-height: 26px;\">selectedStrategy,&nbsp;money</span>)&nbsp;</span>{<br>&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">return</span>&nbsp;PaymentMethodStrategy[selectedStrategy](money);<br>};<br><span class=\"hljs-built_in\" style=\"color: #0086b3; line-height: 26px;\">console</span>.log(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'é“¶è¡Œå¡æ”¯ä»˜ä»·æ ¼ä¸ºï¼š'</span>&nbsp;+&nbsp;userPay(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'BankAccount'</span>,&nbsp;<span class=\"hljs-number\" style=\"color: #008080; line-height: 26px;\">100</span>));&nbsp;<span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">//70</span><br><span class=\"hljs-built_in\" style=\"color: #0086b3; line-height: 26px;\">console</span>.log(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'æ”¯ä»˜å®æ”¯ä»˜ä»·æ ¼ä¸ºï¼š'</span>&nbsp;+&nbsp;userPay(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'Alipay'</span>,&nbsp;<span class=\"hljs-number\" style=\"color: #008080; line-height: 26px;\">100</span>));&nbsp;<span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">//100</span><br><span class=\"hljs-built_in\" style=\"color: #0086b3; line-height: 26px;\">console</span>.log(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'ä¿¡ç”¨å¡æ”¯ä»˜ä»·æ ¼ä¸ºï¼š'</span>&nbsp;+&nbsp;userPay(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'CreditCard'</span>,&nbsp;<span class=\"hljs-number\" style=\"color: #008080; line-height: 26px;\">100</span>));&nbsp;<span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">//80</span><br></code></pre>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-size: 22px; text-align: center; position: relative; font-weight: bold; color: black; line-height: 1.1em; padding-top: 12px; padding-bottom: 12px; margin: 70px 30px 30px; border: 1px solid #000;\"><span style=\"float: left; display: block; width: 90%; border-top: 1px solid #000; height: 1px; line-height: 1px; margin-left: -5px; margin-top: -17px;\"> </span><span class=\"prefix\" style=\"display: block; width: 3px; margin: 0 0 0 5%; height: 3px; line-height: 3px; overflow: hidden; background-color: #000; box-shadow: 3px 0 #000,\n    0 3px #000,\n    -3px 0 #000,\n    0 -3px #000;\"></span><span class=\"content\" style=\"display: block; -webkit-box-reflect: below 0em -webkit-gradient(linear,left top,left bottom, from(rgba(0,0,0,0)),to(rgba(255,255,255,0.1)));\">è§‚å¯Ÿè€…æ¨¡å¼</span><span class=\"suffix\" style=\"display: block; width: 3px; margin: 0 0 0 95%; height: 3px; line-height: 3px; overflow: hidden; background-color: #000; box-shadow: 3px 0 #000,\n    0 3px #000,\n    -3px 0 #000,\n    0 -3px #000;\"></span><span style=\"float: right; display: block; width: 90%; border-bottom: 1px solid #000; height: 1px; line-height: 1px; margin-right: -5px; margin-top: 16px;\"> </span></h2>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; font-weight: bold; background-color: #000; color: #fff; padding: 2px 10px; width: fit-content; font-size: 17px; margin: 60px auto 10px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">å®šä¹‰</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<blockquote data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"display: block; font-size: 0.9em; overflow: auto; overflow-scrolling: touch; color: #6a737d; padding-top: 10px; padding-bottom: 10px; padding-left: 20px; padding-right: 10px; margin-bottom: 20px; margin-top: 20px; border-left: 3px solid rgba(0, 0, 0, 0.65); border-right: 1px solid rgba(0, 0, 0, 0.65); background: rgb(249, 249, 249);\">\n<p style=\"padding-top: 8px; padding-bottom: 8px; font-size: 14px; margin: 0px; color: black; line-height: 26px;\">è§‚å¯Ÿè€…æ¨¡å¼ï¼Œä¹Ÿå«è®¢é˜…-å‘å¸ƒæ¨¡å¼ï¼Œæ˜¯å¯¹è±¡çš„è¡Œä¸ºæ¨¡å¼ï¼Œåœ¨å¯¹è±¡ä¹‹é—´å®šä¹‰äº†ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œå°±æ˜¯å¤šä¸ªè§‚å¯Ÿè€…å’Œä¸€ä¸ªè¢«è§‚å¯Ÿè€…ä¹‹é—´çš„å…³ç³»ï¼Œå½“è¢«è§‚å¯Ÿè€…å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œä¼šé€šçŸ¥æ‰€æœ‰çš„è§‚å¯Ÿè€…å¯¹è±¡ï¼Œä»–ä»¬åšå‡ºç›¸å¯¹åº”çš„æ“ä½œã€‚</p>\n</blockquote>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: square;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\"><strong style=\"font-weight: bold; color: black;\">å®ç°æ–¹æ³•</strong>å®šä¹‰ä¸€ç»„å¯å˜çš„ç­–ç•¥ç±»å°è£…å…·ä½“ç®—æ³•ï¼Œå®šä¹‰ä¸€ç»„ä¸å˜çš„ç¯å¢ƒç±»å°†è¯·æ±‚å§”æ‰˜ç»™æŸä¸€ä¸ªç­–ç•¥ç±»</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\"><strong style=\"font-weight: bold; color: black;\">ä½¿ç”¨åœºæ™¯</strong>é€‚ç”¨äºä¸šåŠ¡åœºæ™¯ä¸­å½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œéœ€è¦è‡ªåŠ¨é€šçŸ¥å…¶ä»–å…³è”å¯¹è±¡ï¼Œè‡ªåŠ¨åˆ·æ–°å¯¹è±¡çŠ¶æ€ï¼Œæˆ–è€…è¯´æ‰§è¡Œå¯¹åº”å¯¹è±¡çš„æ–¹æ³•ï¼Œæ¯”å¦‚ä½ æ˜¯ä¸€ä¸ªè€å¸ˆï¼Œéœ€è¦é€šçŸ¥ç­é‡Œå®¶é•¿çš„æ—¶å€™ï¼Œä½ å¯ä»¥å»ºä¸€ä¸ªç¾¤ï¼ˆåˆ—è¡¨ï¼‰ã€‚æ¯æ¬¡é€šçŸ¥äº‹ä»¶çš„æ—¶å€™åªè¦å¾ªç¯æ‰§è¡Œè¿™ä¸ªåˆ—è¡¨å°±å¥½äº†ï¼ˆç¾¤å‘ï¼‰ï¼Œè€Œä¸ç”¨å…³å¿ƒè¿™ä¸ªåˆ—è¡¨é‡Œæœ‰è°ã€‚</section></li></ul>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; font-weight: bold; background-color: #000; color: #fff; padding: 2px 10px; width: fit-content; font-size: 17px; margin: 60px auto 10px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">å®ç°</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\"><strong style=\"font-weight: bold; color: black;\">å®ä¾‹:</strong></p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px; max-width: 100%; border-radius: 4px; margin: 10px auto 0 auto;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #333; background: #f8f8f8; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch;\"><span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">//&nbsp;åˆ›å»ºä¸€ä¸ªç¾¤ï¼Œä¿å­˜é€šçŸ¥ï¼Œé€šçŸ¥å˜åŒ–ä¹‹åé€šçŸ¥æ¯ä¸ªå®¶é•¿ï¼ˆè§¦å‘æ‰€æœ‰è§‚å¯Ÿè€…å¯¹è±¡ï¼‰</span><br><span class=\"hljs-class\" style=\"line-height: 26px;\"><span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">class</span>&nbsp;<span class=\"hljs-title\" style=\"color: #458; font-weight: bold; line-height: 26px;\">Group</span>&nbsp;</span>{<br>&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">constructor</span>()&nbsp;{<br>&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">this</span>.message&nbsp;=&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'æš‚æ— é€šçŸ¥'</span>;<br>&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">this</span>.parents&nbsp;=&nbsp;[];<br>&nbsp;}<br><br>&nbsp;getMessage()&nbsp;{<br>&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">return</span>&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">this</span>.message;<br>&nbsp;}<br><br>&nbsp;setMassage(message)&nbsp;{<br>&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">this</span>.message&nbsp;=&nbsp;message;<br>&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">this</span>.notifyAllObservers();<br>&nbsp;}<br><br>&nbsp;notifyAllObservers()&nbsp;{<br>&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">this</span>.parents.forEach(<span class=\"hljs-function\" style=\"line-height: 26px;\">(<span class=\"hljs-params\" style=\"line-height: 26px;\">parent</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parent.update();<br>&nbsp;&nbsp;&nbsp;});<br>&nbsp;}<br><br>&nbsp;attach(parent)&nbsp;{<br>&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">this</span>.parents.push(parent);<br>&nbsp;}<br>}<br><br><span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">//&nbsp;è§‚å¯Ÿè€…ï¼Œæ¯ä¸ªå®¶é•¿</span><br><span class=\"hljs-class\" style=\"line-height: 26px;\"><span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">class</span>&nbsp;<span class=\"hljs-title\" style=\"color: #458; font-weight: bold; line-height: 26px;\">Parent</span>&nbsp;</span>{<br>&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">constructor</span>(name,&nbsp;group)&nbsp;{<br>&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">this</span>.name&nbsp;=&nbsp;name;<br>&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">this</span>.group&nbsp;=&nbsp;group;<br>&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">this</span>.group.attach(<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">this</span>);<br>&nbsp;}<br>&nbsp;update()&nbsp;{<br>&nbsp;&nbsp;&nbsp;<span class=\"hljs-built_in\" style=\"color: #0086b3; line-height: 26px;\">console</span>.log(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">`<span class=\"hljs-subst\" style=\"color: #333; font-weight: normal; line-height: 26px;\">${<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">this</span>.name}</span>&nbsp;æ”¶åˆ°é€šçŸ¥:&nbsp;<span class=\"hljs-subst\" style=\"color: #333; font-weight: normal; line-height: 26px;\">${<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">this</span>.group.getMessage()}</span>`</span>);<br>&nbsp;}<br>}<br><br><span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">let</span>&nbsp;group&nbsp;=&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">new</span>&nbsp;Group();<br><span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">let</span>&nbsp;t1&nbsp;=&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">new</span>&nbsp;Parent(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'æå¦ˆå¦ˆ'</span>,&nbsp;group);<br><span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">let</span>&nbsp;t2&nbsp;=&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">new</span>&nbsp;Parent(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'ç‹çˆ¸çˆ¸'</span>,&nbsp;group);<br><span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">let</span>&nbsp;t3&nbsp;=&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">new</span>&nbsp;Parent(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'å¼ çˆ·çˆ·'</span>,&nbsp;group);<br><br>group.setMassage(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'å¼€å®¶é•¿ä¼š'</span>);<br>group.setMassage(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'å¼€è¿åŠ¨ä¼š'</span>);<br><br><br><span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">/*<br>æå¦ˆå¦ˆ&nbsp;æ”¶åˆ°é€šçŸ¥:&nbsp;å¼€å®¶é•¿ä¼š<br>ç‹çˆ¸çˆ¸&nbsp;æ”¶åˆ°é€šçŸ¥:&nbsp;å¼€å®¶é•¿ä¼š<br>å¼ çˆ·çˆ·&nbsp;æ”¶åˆ°é€šçŸ¥:&nbsp;å¼€å®¶é•¿ä¼š<br>æå¦ˆå¦ˆ&nbsp;æ”¶åˆ°é€šçŸ¥:&nbsp;å¼€è¿åŠ¨ä¼š<br>ç‹çˆ¸çˆ¸&nbsp;æ”¶åˆ°é€šçŸ¥:&nbsp;å¼€è¿åŠ¨ä¼š<br>å¼ çˆ·çˆ·&nbsp;æ”¶åˆ°é€šçŸ¥:&nbsp;å¼€è¿åŠ¨ä¼š<br>*/</span><br></code></pre>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-size: 22px; text-align: center; position: relative; font-weight: bold; color: black; line-height: 1.1em; padding-top: 12px; padding-bottom: 12px; margin: 70px 30px 30px; border: 1px solid #000;\"><span style=\"float: left; display: block; width: 90%; border-top: 1px solid #000; height: 1px; line-height: 1px; margin-left: -5px; margin-top: -17px;\"> </span><span class=\"prefix\" style=\"display: block; width: 3px; margin: 0 0 0 5%; height: 3px; line-height: 3px; overflow: hidden; background-color: #000; box-shadow: 3px 0 #000,\n    0 3px #000,\n    -3px 0 #000,\n    0 -3px #000;\"></span><span class=\"content\" style=\"display: block; -webkit-box-reflect: below 0em -webkit-gradient(linear,left top,left bottom, from(rgba(0,0,0,0)),to(rgba(255,255,255,0.1)));\">è£…é¥°å™¨æ¨¡å¼</span><span class=\"suffix\" style=\"display: block; width: 3px; margin: 0 0 0 95%; height: 3px; line-height: 3px; overflow: hidden; background-color: #000; box-shadow: 3px 0 #000,\n    0 3px #000,\n    -3px 0 #000,\n    0 -3px #000;\"></span><span style=\"float: right; display: block; width: 90%; border-bottom: 1px solid #000; height: 1px; line-height: 1px; margin-right: -5px; margin-top: 16px;\"> </span></h2>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; font-weight: bold; background-color: #000; color: #fff; padding: 2px 10px; width: fit-content; font-size: 17px; margin: 60px auto 10px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">å®šä¹‰</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<blockquote data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"display: block; font-size: 0.9em; overflow: auto; overflow-scrolling: touch; color: #6a737d; padding-top: 10px; padding-bottom: 10px; padding-left: 20px; padding-right: 10px; margin-bottom: 20px; margin-top: 20px; border-left: 3px solid rgba(0, 0, 0, 0.65); border-right: 1px solid rgba(0, 0, 0, 0.65); background: rgb(249, 249, 249);\">\n<p style=\"padding-top: 8px; padding-bottom: 8px; font-size: 14px; margin: 0px; color: black; line-height: 26px;\">åœ¨ä¸æ”¹å˜åŸæ¥çš„ç»“æ„å’ŒåŠŸèƒ½åŸºç¡€ä¸Šï¼ŒåŠ¨æ€è£…é¥°ä¸€äº›é’ˆå¯¹ç‰¹åˆ«åœºæ™¯æ‰€é€‚ç”¨çš„æ–¹æ³•æˆ–å±æ€§ï¼Œå³æ·»åŠ ä¸€äº›æ–°åŠŸèƒ½ä»¥å¢å¼ºå®ƒçš„æŸç§èƒ½åŠ›</p>\n</blockquote>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: square;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\"><strong style=\"font-weight: bold; color: black;\">å®ç°æ–¹æ³•</strong>å®šä¹‰ä¸€ç»„å¯å˜çš„ç­–ç•¥ç±»å°è£…å…·ä½“ç®—æ³•ï¼Œå®šä¹‰ä¸€ç»„ä¸å˜çš„ç¯å¢ƒç±»å°†è¯·æ±‚å§”æ‰˜ç»™æŸä¸€ä¸ªç­–ç•¥ç±»</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\"><strong style=\"font-weight: bold; color: black;\">ä½¿ç”¨åœºæ™¯</strong>åŸæœ‰æ–¹æ³•ç»´æŒä¸å˜ï¼Œåœ¨åŸæœ‰æ–¹æ³•ä¸Šå†æŒ‚è½½å…¶ä»–æ–¹æ³•æ¥æ»¡è¶³ç°æœ‰éœ€æ±‚ï¼›å‡½æ•°çš„è§£è€¦ï¼Œå°†å‡½æ•°æ‹†åˆ†æˆå¤šä¸ªå¯å¤ç”¨çš„å‡½æ•°ï¼Œå†å°†æ‹†åˆ†å‡ºæ¥çš„å‡½æ•°æŒ‚è½½åˆ°æŸä¸ªå‡½æ•°ä¸Šï¼Œå®ç°ç›¸åŒçš„æ•ˆæœä½†å¢å¼ºäº†å¤ç”¨æ€§ã€‚æ¯”å¦‚å¤šå­”æ’åº§ï¼Œæœºè½¦æ”¹è£…</section></li></ul>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; font-weight: bold; background-color: #000; color: #fff; padding: 2px 10px; width: fit-content; font-size: 17px; margin: 60px auto 10px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">å®ç°</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\"><strong style=\"font-weight: bold; color: black;\">å®ä¾‹:</strong></p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px; max-width: 100%; border-radius: 4px; margin: 10px auto 0 auto;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #333; background: #f8f8f8; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch;\"><span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">const</span>&nbsp;Man&nbsp;=&nbsp;<span class=\"hljs-function\" style=\"line-height: 26px;\"><span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">function</span>&nbsp;(<span class=\"hljs-params\" style=\"line-height: 26px;\"></span>)&nbsp;</span>{<br>&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">this</span>.run&nbsp;=&nbsp;<span class=\"hljs-function\" style=\"line-height: 26px;\"><span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">function</span>&nbsp;(<span class=\"hljs-params\" style=\"line-height: 26px;\"></span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;<span class=\"hljs-built_in\" style=\"color: #0086b3; line-height: 26px;\">console</span>.log(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'è·‘æ­¥'</span>);<br>&nbsp;};<br>};<br><br><span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">const</span>&nbsp;Decorator&nbsp;=&nbsp;<span class=\"hljs-function\" style=\"line-height: 26px;\"><span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">function</span>&nbsp;(<span class=\"hljs-params\" style=\"line-height: 26px;\">old</span>)&nbsp;</span>{<br>&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">this</span>.oldAbility&nbsp;=&nbsp;old.run;<br>&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">this</span>.fly&nbsp;=&nbsp;<span class=\"hljs-function\" style=\"line-height: 26px;\"><span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">function</span>&nbsp;(<span class=\"hljs-params\" style=\"line-height: 26px;\"></span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;<span class=\"hljs-built_in\" style=\"color: #0086b3; line-height: 26px;\">console</span>.log(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'å…·å¤‡é£è¡Œèƒ½åŠ›'</span>);<br>&nbsp;};<br>&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">this</span>.newAbility&nbsp;=&nbsp;<span class=\"hljs-function\" style=\"line-height: 26px;\"><span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">function</span>&nbsp;(<span class=\"hljs-params\" style=\"line-height: 26px;\"></span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">this</span>.oldAbility();<br>&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">this</span>.fly();<br>&nbsp;};<br>};<br><br><span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">const</span>&nbsp;man&nbsp;=&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">new</span>&nbsp;Man();<br><span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">const</span>&nbsp;superMan&nbsp;=&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">new</span>&nbsp;Decorator(man);<br>superMan.fly();&nbsp;<span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">//&nbsp;å…·å¤‡é£è¡Œèƒ½åŠ›</span><br></code></pre>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-size: 22px; text-align: center; position: relative; font-weight: bold; color: black; line-height: 1.1em; padding-top: 12px; padding-bottom: 12px; margin: 70px 30px 30px; border: 1px solid #000;\"><span style=\"float: left; display: block; width: 90%; border-top: 1px solid #000; height: 1px; line-height: 1px; margin-left: -5px; margin-top: -17px;\"> </span><span class=\"prefix\" style=\"display: block; width: 3px; margin: 0 0 0 5%; height: 3px; line-height: 3px; overflow: hidden; background-color: #000; box-shadow: 3px 0 #000,\n    0 3px #000,\n    -3px 0 #000,\n    0 -3px #000;\"></span><span class=\"content\" style=\"display: block; -webkit-box-reflect: below 0em -webkit-gradient(linear,left top,left bottom, from(rgba(0,0,0,0)),to(rgba(255,255,255,0.1)));\">ä»£ç†æ¨¡å¼</span><span class=\"suffix\" style=\"display: block; width: 3px; margin: 0 0 0 95%; height: 3px; line-height: 3px; overflow: hidden; background-color: #000; box-shadow: 3px 0 #000,\n    0 3px #000,\n    -3px 0 #000,\n    0 -3px #000;\"></span><span style=\"float: right; display: block; width: 90%; border-bottom: 1px solid #000; height: 1px; line-height: 1px; margin-right: -5px; margin-top: 16px;\"> </span></h2>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; font-weight: bold; background-color: #000; color: #fff; padding: 2px 10px; width: fit-content; font-size: 17px; margin: 60px auto 10px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">å®šä¹‰</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<blockquote data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"display: block; font-size: 0.9em; overflow: auto; overflow-scrolling: touch; color: #6a737d; padding-top: 10px; padding-bottom: 10px; padding-left: 20px; padding-right: 10px; margin-bottom: 20px; margin-top: 20px; border-left: 3px solid rgba(0, 0, 0, 0.65); border-right: 1px solid rgba(0, 0, 0, 0.65); background: rgb(249, 249, 249);\">\n<p style=\"padding-top: 8px; padding-bottom: 8px; font-size: 14px; margin: 0px; color: black; line-height: 26px;\">ä»£ç†æ¨¡å¼ç»™æŸä¸€ä¸ªå¯¹è±¡æä¾›ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œå¹¶ç”±ä»£ç†å¯¹è±¡æ§åˆ¶å¯¹åŸå¯¹è±¡çš„å¼•ç”¨ã€‚é€šä¿—çš„æ¥è®²ä»£ç†æ¨¡å¼å°±æ˜¯æˆ‘ä»¬ç”Ÿæ´»ä¸­å¸¸è§çš„ä¸­ä»‹ã€‚</p>\n</blockquote>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: square;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\"><strong style=\"font-weight: bold; color: black;\">å®ç°æ–¹æ³•</strong>å®šä¹‰ä¸€ä¸ªå§”æ‰˜è€…å’Œä¸€ä¸ªä»£ç†ï¼Œéœ€è¦å§”æ‰˜çš„äº‹æƒ…åœ¨ä»£ç†ä¸­å®Œæˆ</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\"><strong style=\"font-weight: bold; color: black;\">ä½¿ç”¨åœºæ™¯</strong>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¸€ä¸ªå®¢æˆ·ç±»ä¸æƒ³æˆ–è€…ä¸èƒ½ç›´æ¥å¼•ç”¨ä¸€ä¸ªå§”æ‰˜å¯¹è±¡ï¼Œè€Œä»£ç†ç±»å¯¹è±¡å¯ä»¥åœ¨å®¢æˆ·ç±»å’Œå§”æ‰˜å¯¹è±¡ä¹‹é—´èµ·åˆ°ä¸­ä»‹çš„ä½œç”¨ã€‚ä»£ç†å¯ä»¥å¸®å®¢æˆ·è¿‡æ»¤æ‰ä¸€äº›è¯·æ±‚å¹¶ä¸”æŠŠä¸€äº›å¼€é”€å¤§çš„å¯¹è±¡ï¼Œå»¶è¿Ÿåˆ°çœŸæ­£éœ€è¦å®ƒæ—¶æ‰åˆ›å»ºã€‚ä¸­ä»‹è´­è½¦ã€ä»£è´­ã€è¯¾ä»£è¡¨æ›¿è€å¸ˆæ”¶ä½œä¸š</section></li></ul>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; font-weight: bold; background-color: #000; color: #fff; padding: 2px 10px; width: fit-content; font-size: 17px; margin: 60px auto 10px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">å®ç°</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\"><strong style=\"font-weight: bold; color: black;\">å®ä¾‹:</strong></p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px; max-width: 100%; border-radius: 4px; margin: 10px auto 0 auto;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #333; background: #f8f8f8; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch;\"><span class=\"hljs-class\" style=\"line-height: 26px;\"><span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">class</span>&nbsp;<span class=\"hljs-title\" style=\"color: #458; font-weight: bold; line-height: 26px;\">Letter</span>&nbsp;</span>{<br>&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">constructor</span>(name)&nbsp;{<br>&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">this</span>.name&nbsp;=&nbsp;name;<br>&nbsp;}<br>}<br><span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">//&nbsp;æš—æ‹äººå°æ˜</span><br><span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">let</span>&nbsp;XiaoMing&nbsp;=&nbsp;{<br>&nbsp;<span class=\"hljs-attr\" style=\"line-height: 26px;\">name</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'å°æ˜'</span>,<br>&nbsp;sendLetter(target)&nbsp;{<br>&nbsp;&nbsp;&nbsp;target.receiveLetter(<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">this</span>.name);<br>&nbsp;},<br>};<br><span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">//&nbsp;ä»£ç†å°å</span><br><span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">let</span>&nbsp;xiaoHua&nbsp;=&nbsp;{<br>&nbsp;receiveLetter(customer)&nbsp;{<br>&nbsp;&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">//&nbsp;å½“ç„¶è¦ç­‰å°çº¢å¥½å¿ƒæƒ…æ—¶æ‰é€æƒ…ä¹¦ï¼Œä¹Ÿåœ¨é€æƒ…ä¹¦ä¹Ÿæ‰åˆ›å»ºæƒ…ä¹¦</span><br>&nbsp;&nbsp;&nbsp;XiaoHong.listenGoodMood(<span class=\"hljs-function\" style=\"line-height: 26px;\"><span class=\"hljs-params\" style=\"line-height: 26px;\">()</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;XiaoHong.receiveLetter(<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">new</span>&nbsp;Letter(customer&nbsp;+&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'çš„æƒ…ä¹¦'</span>));<br>&nbsp;&nbsp;&nbsp;});<br>&nbsp;},<br>};<br><span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">//&nbsp;å¿ƒä»ªå¯¹è±¡å°çº¢</span><br><span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">let</span>&nbsp;XiaoHong&nbsp;=&nbsp;{<br>&nbsp;<span class=\"hljs-attr\" style=\"line-height: 26px;\">name</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'å°çº¢'</span>,<br>&nbsp;receiveLetter(letter)&nbsp;{<br>&nbsp;&nbsp;&nbsp;<span class=\"hljs-built_in\" style=\"color: #0086b3; line-height: 26px;\">console</span>.log(<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">this</span>.name&nbsp;+&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'æ”¶åˆ°ï¼š'</span>&nbsp;+&nbsp;letter.name);<br>&nbsp;},<br>&nbsp;listenGoodMood(fn)&nbsp;{<br>&nbsp;&nbsp;&nbsp;setTimeout(<span class=\"hljs-function\" style=\"line-height: 26px;\"><span class=\"hljs-params\" style=\"line-height: 26px;\">()</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fn();<br>&nbsp;&nbsp;&nbsp;},&nbsp;<span class=\"hljs-number\" style=\"color: #008080; line-height: 26px;\">1000</span>);<br>&nbsp;},<br>};<br><br>XiaoMing.sendLetter(xiaoHua);<span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">//å°çº¢æ”¶åˆ°ï¼šå°æ˜çš„æƒ…ä¹¦</span><br></code></pre>\n<blockquote data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"display: block; font-size: 0.9em; overflow: auto; overflow-scrolling: touch; color: #6a737d; padding-top: 10px; padding-bottom: 10px; padding-left: 20px; padding-right: 10px; margin-bottom: 20px; margin-top: 20px; border-left: 3px solid rgba(0, 0, 0, 0.65); border-right: 1px solid rgba(0, 0, 0, 0.65); background: rgb(249, 249, 249);\">\n<p style=\"padding-top: 8px; padding-bottom: 8px; font-size: 14px; margin: 0px; color: black; line-height: 26px;\">Proxy æ˜¯ ES6 æä¾›çš„ä¸“é—¨ä»¥ä»£ç†è§’è‰²å‡ºç°çš„ä»£ç†å™¨,Vue 3.0 çš„å“åº”å¼æ•°æ®éƒ¨åˆ†å¼ƒç”¨äº† Object.definePropertyï¼Œä½¿ç”¨ Proxy æ¥ä»£æ›¿å®ƒã€‚</p>\n</blockquote>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px; max-width: 100%; border-radius: 4px; margin: 10px auto 0 auto;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #333; background: #f8f8f8; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch;\"><span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">var</span>&nbsp;proxy&nbsp;=&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">new</span>&nbsp;<span class=\"hljs-built_in\" style=\"color: #0086b3; line-height: 26px;\">Proxy</span>(target,&nbsp;handler);<br></code></pre>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">ç°åœ¨ç”¨Proxyæ¨¡æ‹Ÿä¸€ä¸‹å¦ä¸€ç§åœºæ™¯:ä¸ºäº†ä¿æŠ¤ä¸åŠæ ¼çš„åŒå­¦ï¼Œè¯¾ä»£è¡¨æ‹¿åˆ°å…¨ç­æˆç»©å•ååªä¼šå…¬ç¤ºåŠæ ¼äººçš„æˆç»©ã€‚å¯¹è€ƒåˆ†æœ‰ç–‘é—®çš„è€ƒç”Ÿï¼Œå¤è®®åæ–°åˆ†æ•°æ¯”ä»¥å‰å¤§10åˆ†æ‰æœ‰æƒåˆ©å»æ›´æ–°æˆç»©</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px; max-width: 100%; border-radius: 4px; margin: 10px auto 0 auto;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #333; background: #f8f8f8; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch;\"><span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">const</span>&nbsp;scoreList&nbsp;=&nbsp;{<br>&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'wang'</span>:&nbsp;<span class=\"hljs-number\" style=\"color: #008080; line-height: 26px;\">90</span>,<br>&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'li'</span>:&nbsp;<span class=\"hljs-number\" style=\"color: #008080; line-height: 26px;\">60</span>,<br>&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'wu'</span>:<span class=\"hljs-number\" style=\"color: #008080; line-height: 26px;\">100</span>,<br>}<br><br><br><span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">const</span>&nbsp;yyProxy&nbsp;=&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">new</span>&nbsp;<span class=\"hljs-built_in\" style=\"color: #0086b3; line-height: 26px;\">Proxy</span>(scoreList,&nbsp;{<br>&nbsp;&nbsp;<span class=\"hljs-attr\" style=\"line-height: 26px;\">get</span>:<span class=\"hljs-function\" style=\"line-height: 26px;\"><span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">function</span>(<span class=\"hljs-params\" style=\"line-height: 26px;\">scoreList,name</span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">if</span>(scoreList[name]&nbsp;&gt;&nbsp;<span class=\"hljs-number\" style=\"color: #008080; line-height: 26px;\">69</span>)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-built_in\" style=\"color: #0086b3; line-height: 26px;\">console</span>.log(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'è¾“å‡ºæˆç»©'</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">return</span>&nbsp;scoreList[name]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">else</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-built_in\" style=\"color: #0086b3; line-height: 26px;\">console</span>.log(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'ä¸åŠæ ¼çš„æˆç»©æ— æ³•å…¬ç¤º'</span>)<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;},<br>&nbsp;&nbsp;<span class=\"hljs-attr\" style=\"line-height: 26px;\">set</span>:<span class=\"hljs-function\" style=\"line-height: 26px;\"><span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">function</span>(<span class=\"hljs-params\" style=\"line-height: 26px;\">scoreList,&nbsp;name,&nbsp;val</span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">if</span>(val&nbsp;-&nbsp;scoreList[name]&nbsp;&gt;&nbsp;<span class=\"hljs-number\" style=\"color: #008080; line-height: 26px;\">10</span>)&nbsp;{<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-built_in\" style=\"color: #0086b3; line-height: 26px;\">console</span>.log(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'ä¿®æ”¹æˆç»©'</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scoreList[name]&nbsp;=&nbsp;val<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">else</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-built_in\" style=\"color: #0086b3; line-height: 26px;\">console</span>.log(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'æ— æ³•ä¿®æ”¹æˆç»©'</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;}<br>})<br><br>yyProxy[<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'wang'</span>]&nbsp;=&nbsp;<span class=\"hljs-number\" style=\"color: #008080; line-height: 26px;\">98</span>&nbsp;<span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">//æ— æ³•ä¿®æ”¹æˆç»©</span><br>yyProxy[<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"li\"</span>]&nbsp;=&nbsp;<span class=\"hljs-number\" style=\"color: #008080; line-height: 26px;\">80</span>&nbsp;<span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">//ä¿®æ”¹æˆç»©</span><br></code></pre>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-size: 22px; text-align: center; position: relative; font-weight: bold; color: black; line-height: 1.1em; padding-top: 12px; padding-bottom: 12px; margin: 70px 30px 30px; border: 1px solid #000;\"><span style=\"float: left; display: block; width: 90%; border-top: 1px solid #000; height: 1px; line-height: 1px; margin-left: -5px; margin-top: -17px;\"> </span><span class=\"prefix\" style=\"display: block; width: 3px; margin: 0 0 0 5%; height: 3px; line-height: 3px; overflow: hidden; background-color: #000; box-shadow: 3px 0 #000,\n    0 3px #000,\n    -3px 0 #000,\n    0 -3px #000;\"></span><span class=\"content\" style=\"display: block; -webkit-box-reflect: below 0em -webkit-gradient(linear,left top,left bottom, from(rgba(0,0,0,0)),to(rgba(255,255,255,0.1)));\">æ€»ç»“</span><span class=\"suffix\" style=\"display: block; width: 3px; margin: 0 0 0 95%; height: 3px; line-height: 3px; overflow: hidden; background-color: #000; box-shadow: 3px 0 #000,\n    0 3px #000,\n    -3px 0 #000,\n    0 -3px #000;\"></span><span style=\"float: right; display: block; width: 90%; border-bottom: 1px solid #000; height: 1px; line-height: 1px; margin-right: -5px; margin-top: 16px;\"> </span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">æˆ‘æ›¾ç»ä»¥ä¸ºè®¾è®¡æ¨¡å¼æ˜¯ç–¯ç‹‚çš„ï¼Œé¥è¿œçš„è½¯ä»¶å¼€å‘æŒ‡å—ã€‚ç„¶åæˆ‘å‘ç°æˆ‘ä¸€ç›´åœ¨ä½¿ç”¨å®ƒä»¬ï¼</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">æˆ‘ä»‹ç»çš„ä¸€äº›æ¨¡å¼å·²åœ¨è®¸å¤šåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ã€‚ä½†å½’æ ¹ç»“åº•ï¼Œå®ƒä»¬åªæ˜¯ç†è®ºè€Œå·²ã€‚ä½œä¸ºå¼€å‘äººå‘˜ï¼Œæ˜¯å¦ä½¿ç”¨å–å†³äºä½¿ç”¨åæ˜¯å¦ä½¿ä»£ç é€»è¾‘æ›´æ˜“äºå®ç°å’Œç»´æŠ¤ã€‚</p>\n<span style=\"font-size: 15px; display: block; text-align: center; margin-top: 50px; color: #999; border-bottom: 1px solid #eee;\">- END -</span></section>", "user_name": "johnYu", "description": "ä¸€ä¸ªäººåƒä¸€æ”¯å†›é˜Ÿ", "got_view_count": 24308, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "Webpack", "concern_user_count": 181325, "user_id": "3737995267297838", "title": "é¢è¯•å®˜ï¼šwebpackåŸç†éƒ½ä¸ä¼šï¼Ÿ", "mark_content": "## å¼•è¨€\n\nå‰ä¸€æ®µæ—¶é—´æˆ‘æŠŠ`webpack`æºç å¤§æ¦‚è¯»äº†ä¸€éï¼Œ`webpack` åˆ°`4.x`ç‰ˆæœ¬åï¼Œå…¶æºç å·²ç»æ¯”è¾ƒåºå¤§ï¼Œå¯¹å„ç§å¼€å‘åœºæ™¯è¿›è¡Œäº†é«˜åº¦æŠ½è±¡ï¼Œé˜…è¯»æˆæœ¬ä¹Ÿæ„ˆå‘æ˜‚è´µã€‚\n\nè¿‡åº¦åˆ†ææºç å¯¹äºå¤§å®¶å¹¶æ²¡æœ‰å¤ªå¤§çš„å¸®åŠ©ã€‚æœ¬æ–‡ä¸»è¦æ˜¯æƒ³é€šè¿‡åˆ†æ`webpack`çš„æ„å»ºæµç¨‹ä»¥åŠå®ç°ä¸€ä¸ªç®€å•çš„`webpack`æ¥è®©å¤§å®¶å¯¹`webpack`çš„å†…éƒ¨åŸç†æœ‰ä¸€ä¸ªå¤§æ¦‚çš„äº†è§£ã€‚ï¼ˆä¿è¯èƒ½çœ‹æ‡‚ï¼Œä¸æ‡‚ä½ æ‰“æˆ‘ ğŸ™ˆï¼‰\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/38c47ae39f994be4b81915f1656a03ff~tplv-k3u1fbpfcp-zoom-1.image)\n\n## webpack æ„å»ºæµç¨‹åˆ†æ\n\né¦–å…ˆï¼Œæ— é¡»å¤šè¨€ï¼Œä¸Šå›¾ï½\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/71b263000fa94db792cf1e98d67a578a~tplv-k3u1fbpfcp-zoom-1.image)\n\n`webpack` çš„è¿è¡Œæµç¨‹æ˜¯ä¸€ä¸ªä¸²è¡Œçš„è¿‡ç¨‹ï¼Œä»å¯åŠ¨åˆ°ç»“æŸä¼šä¾æ¬¡æ‰§è¡Œä»¥ä¸‹æµç¨‹ï¼šé¦–å…ˆä¼šä»é…ç½®æ–‡ä»¶å’Œ `Shell` è¯­å¥ä¸­è¯»å–ä¸åˆå¹¶å‚æ•°ï¼Œå¹¶åˆå§‹åŒ–éœ€è¦ä½¿ç”¨çš„æ’ä»¶å’Œé…ç½®æ’ä»¶ç­‰æ‰§è¡Œç¯å¢ƒæ‰€éœ€è¦çš„å‚æ•°ï¼›åˆå§‹åŒ–å®Œæˆåä¼šè°ƒç”¨`Compiler`çš„`run`æ¥çœŸæ­£å¯åŠ¨`webpack`ç¼–è¯‘æ„å»ºè¿‡ç¨‹ï¼Œ`webpack`çš„æ„å»ºæµç¨‹åŒ…æ‹¬`compile`ã€`make`ã€`build`ã€`seal`ã€`emit`é˜¶æ®µï¼Œæ‰§è¡Œå®Œè¿™äº›é˜¶æ®µå°±å®Œæˆäº†æ„å»ºè¿‡ç¨‹ã€‚\n\n### åˆå§‹åŒ–\n\n#### entry-options å¯åŠ¨\n\nä»é…ç½®æ–‡ä»¶å’Œ `Shell` è¯­å¥ä¸­è¯»å–ä¸åˆå¹¶å‚æ•°ï¼Œå¾—å‡ºæœ€ç»ˆçš„å‚æ•°ã€‚\n\n#### run å®ä¾‹åŒ–\n\n`compiler`ï¼šç”¨ä¸Šä¸€æ­¥å¾—åˆ°çš„å‚æ•°åˆå§‹åŒ– `Compiler` å¯¹è±¡ï¼ŒåŠ è½½æ‰€æœ‰é…ç½®çš„æ’ä»¶ï¼Œæ‰§è¡Œå¯¹è±¡çš„ `run` æ–¹æ³•å¼€å§‹æ‰§è¡Œç¼–è¯‘\n\n### ç¼–è¯‘æ„å»º\n\n#### `entry ç¡®å®šå…¥å£`\n\næ ¹æ®é…ç½®ä¸­çš„ `entry` æ‰¾å‡ºæ‰€æœ‰çš„å…¥å£æ–‡ä»¶\n\n#### `make ç¼–è¯‘æ¨¡å—`\n\nä»å…¥å£æ–‡ä»¶å‡ºå‘ï¼Œè°ƒç”¨æ‰€æœ‰é…ç½®çš„ `Loader` å¯¹æ¨¡å—è¿›è¡Œç¿»è¯‘ï¼Œå†æ‰¾å‡ºè¯¥æ¨¡å—ä¾èµ–çš„æ¨¡å—ï¼Œå†é€’å½’æœ¬æ­¥éª¤ç›´åˆ°æ‰€æœ‰å…¥å£ä¾èµ–çš„æ–‡ä»¶éƒ½ç»è¿‡äº†æœ¬æ­¥éª¤çš„å¤„ç†\n\n#### `build module å®Œæˆæ¨¡å—ç¼–è¯‘`\n\nç»è¿‡ä¸Šé¢ä¸€æ­¥ä½¿ç”¨ `Loader` ç¿»è¯‘å®Œæ‰€æœ‰æ¨¡å—åï¼Œå¾—åˆ°äº†æ¯ä¸ªæ¨¡å—è¢«ç¿»è¯‘åçš„æœ€ç»ˆå†…å®¹ä»¥åŠå®ƒä»¬ä¹‹é—´çš„ä¾èµ–å…³ç³»\n\n#### `seal è¾“å‡ºèµ„æº`\n\næ ¹æ®å…¥å£å’Œæ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œç»„è£…æˆä¸€ä¸ªä¸ªåŒ…å«å¤šä¸ªæ¨¡å—çš„ `Chunk`ï¼Œå†æŠŠæ¯ä¸ª `Chunk` è½¬æ¢æˆä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶åŠ å…¥åˆ°è¾“å‡ºåˆ—è¡¨ï¼Œè¿™æ­¥æ˜¯å¯ä»¥ä¿®æ”¹è¾“å‡ºå†…å®¹çš„æœ€åæœºä¼š\n\n#### `emit è¾“å‡ºå®Œæˆ`\n\nåœ¨ç¡®å®šå¥½è¾“å‡ºå†…å®¹åï¼Œæ ¹æ®é…ç½®ç¡®å®šè¾“å‡ºçš„è·¯å¾„å’Œæ–‡ä»¶åï¼ŒæŠŠæ–‡ä»¶å†…å®¹å†™å…¥åˆ°æ–‡ä»¶ç³»ç»Ÿ\n\nåˆ†æå®Œæ„å»ºæµç¨‹ï¼Œä¸‹é¢è®©æˆ‘ä»¬è‡ªå·±åŠ¨æ‰‹å®ç°ä¸€ä¸ªç®€æ˜“çš„`webpack`å§ï½\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/89b1790f738e4dcc88913033414f52d3~tplv-k3u1fbpfcp-zoom-1.image)\n\n## å®ç°ä¸€ä¸ªç®€æ˜“çš„ webpack\n\n### å‡†å¤‡å·¥ä½œ\n\n#### ç›®å½•ç»“æ„\n\næˆ‘ä»¬å…ˆæ¥åˆå§‹åŒ–ä¸€ä¸ªé¡¹ç›®ï¼Œç»“æ„å¦‚ä¸‹ï¼š\n\n```\n|-- forestpack\n    |-- dist\n    |   |-- bundle.js\n    |   |-- index.html\n    |-- lib\n    |   |-- compiler.js\n    |   |-- index.js\n    |   |-- parser.js\n    |   |-- test.js\n    |-- src\n    |   |-- greeting.js\n    |   |-- index.js\n    |-- forstpack.config.js\n    |-- package.json\n```\n\nè¿™é‡Œæˆ‘å…ˆè§£é‡Šä¸‹æ¯ä¸ªæ–‡ä»¶/æ–‡ä»¶å¤¹å¯¹åº”çš„å«ä¹‰ï¼š\n\n- `dist`ï¼šæ‰“åŒ…ç›®å½•\n- `lib`ï¼šæ ¸å¿ƒæ–‡ä»¶ï¼Œä¸»è¦åŒ…æ‹¬`compiler`å’Œ`parser`\n  - `compiler.js`ï¼šç¼–è¯‘ç›¸å…³ã€‚`Compiler`ä¸ºä¸€ä¸ªç±», å¹¶ä¸”æœ‰`run`æ–¹æ³•å»å¼€å¯ç¼–è¯‘ï¼Œè¿˜æœ‰æ„å»º`module`ï¼ˆ`buildModule`ï¼‰å’Œè¾“å‡ºæ–‡ä»¶ï¼ˆ`emitFiles`ï¼‰\n  - `parser.js`ï¼šè§£æç›¸å…³ã€‚åŒ…å«è§£æ`AST`ï¼ˆ`getAST`ï¼‰ã€æ”¶é›†ä¾èµ–ï¼ˆ`getDependencies`ï¼‰ã€è½¬æ¢ï¼ˆ`es6è½¬es5`ï¼‰\n  - `index.js`ï¼šå®ä¾‹åŒ–`Compiler`ç±»ï¼Œå¹¶å°†é…ç½®å‚æ•°ï¼ˆå¯¹åº”`forstpack.config.js`ï¼‰ä¼ å…¥\n  - `test.js`ï¼šæµ‹è¯•æ–‡ä»¶ï¼Œç”¨äºæµ‹è¯•æ–¹æ³•å‡½æ•°æ‰“`console`ä½¿ç”¨\n- `src`ï¼šæºä»£ç ã€‚ä¹Ÿå°±å¯¹åº”æˆ‘ä»¬çš„ä¸šåŠ¡ä»£ç \n- `forstpack.config.js`ï¼š é…ç½®æ–‡ä»¶ã€‚ç±»ä¼¼`webpack.config.js`\n- `package.json`ï¼šè¿™ä¸ªå°±ä¸ç”¨æˆ‘å¤šè¯´äº†ï½ï½ï½ï¼ˆä»€ä¹ˆï¼Œä½ ä¸çŸ¥é“ï¼Ÿï¼Ÿï¼‰\n\n#### å…ˆå®Œæˆâ€œé€ è½®å­â€å‰ 30%çš„ä»£ç \n\né¡¹ç›®æèµ·æ¥äº†ï¼Œä½†ä¼¼ä¹è¿˜å°‘ç‚¹ä¸œè¥¿ï½ï½\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4f46adb6a5434a6f97cbc37d8ba5cb0d~tplv-k3u1fbpfcp-zoom-1.image)\n\nå¯¹äº†ï¼åŸºç¡€çš„æ–‡ä»¶æˆ‘ä»¬éœ€è¦å…ˆå®Œå–„ä¸‹ï¼š`forstpack.config.js`å’Œ`src`ã€‚\n\né¦–å…ˆæ˜¯`forstpack.config.js`ï¼š\n\n```js\nconst path = require(\"path\");\n\nmodule.exports = {\n  entry: path.join(__dirname, \"./src/index.js\"),\n  output: {\n    path: path.join(__dirname, \"./dist\"),\n    filename: \"bundle.js\",\n  },\n};\n```\n\nå†…å®¹å¾ˆç®€å•ï¼Œå®šä¹‰ä¸€ä¸‹å…¥å£ã€å‡ºå£ï¼ˆä½ è¿™ä¹Ÿå¤ªç®€å•äº†å§ï¼ï¼åˆ«æ€¥ï¼Œæ…¢æ…¢æ¥å˜›ï¼‰\n\nå…¶æ¬¡æ˜¯`src`ï¼Œè¿™é‡Œåœ¨`src`ç›®å½•ä¸‹å®šä¹‰äº†ä¸¤ä¸ªæ–‡ä»¶ï¼š\n\n- `greeting.js`ï¼š\n\n```js\n// greeting.js\nexport function greeting(name) {\n  return \"ä½ å¥½\" + name;\n}\n```\n\n- `index.js`ï¼š\n\n```js\nimport { greeting } from \"./greeting.js\";\n\ndocument.write(greeting(\"æ£®æ—\"));\n```\n\nokï¼Œåˆ°è¿™é‡Œæˆ‘ä»¬å·²ç»æŠŠéœ€è¦å‡†å¤‡çš„å·¥ä½œéƒ½å®Œæˆäº†ã€‚ï¼ˆé—®ï¼šä¸ºä»€ä¹ˆè¿™ä¹ˆåŸºç¡€ï¼Ÿç­”ï¼šå½“ç„¶è¦åŸºç¡€äº†ï¼Œæˆ‘ä»¬çš„æ ¸å¿ƒæ˜¯â€œé€ è½®å­â€ï¼ï¼ï¼‰\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a4763d030f684890836605179d3ab367~tplv-k3u1fbpfcp-zoom-1.image)\n### æ¢³ç†ä¸‹é€»è¾‘\n\nçŸ­æš‚çš„åœç•™ä¸€ä¸‹ï¼Œæˆ‘ä»¬æ¢³ç†ä¸‹é€»è¾‘ï¼š\n\n`Q`: æˆ‘ä»¬è¦åšä»€ä¹ˆï¼Ÿ\n\n`A`: åšä¸€ä¸ªæ¯”`webpack`æ›´å¼ºçš„`super webpack`ï¼ˆä¸å¥½æ„æ€ï¼Œå¤±æ€äº†ï¼Œä¸€ä¸å°å¿ƒè¯´å‡ºäº†æˆ‘çš„å¿ƒå£°ï¼‰ã€‚è¿˜æ˜¯ä½è°ƒç‚¹ï¼ˆé˜²æ­¢ä¸€ä¼šè¢«ç–¯ç‹‚æ‰“è„¸ï¼‰\n![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e86b0e957ba840cc8c0aa8a08fbf8789~tplv-k3u1fbpfcp-zoom-1.image)\n\n`Q`: æ€ä¹ˆå»åšï¼Ÿ\n\n`A`: çœ‹ä¸‹æ–‡ï¼ˆ23333ï¼‰\n\n`Q`: æ•´ä¸ªçš„æµç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ\n\n`A`: å“å˜¿ï¼Œå¤§æ¦‚æµç¨‹å°±æ˜¯ï¼š\n\n- è¯»å–å…¥å£æ–‡ä»¶\n- åˆ†æå…¥å£æ–‡ä»¶ï¼Œé€’å½’çš„å»è¯»å–æ¨¡å—æ‰€ä¾èµ–çš„æ–‡ä»¶å†…å®¹ï¼Œç”Ÿæˆ`AST`è¯­æ³•æ ‘ã€‚\n- æ ¹æ®`AST`è¯­æ³•æ ‘ï¼Œç”Ÿæˆæµè§ˆå™¨èƒ½å¤Ÿè¿è¡Œçš„ä»£ç \n\n### æ­£å¼å¼€å·¥\n\n#### compile.js ç¼–å†™\n\n```js\nconst path = require(\"path\");\nconst fs = require(\"fs\");\n\nmodule.exports = class Compiler {\n  // æ¥æ”¶é€šè¿‡lib/index.js new Compiler(options).run()ä¼ å…¥çš„å‚æ•°ï¼Œå¯¹åº”`forestpack.config.js`çš„é…ç½®\n  constructor(options) {\n    const { entry, output } = options;\n    this.entry = entry;\n    this.output = output;\n    this.modules = [];\n  }\n  // å¼€å¯ç¼–è¯‘\n  run() {}\n  // æ„å»ºæ¨¡å—ç›¸å…³\n  buildModule(filename, isEntry) {\n    // filename: æ–‡ä»¶åç§°\n    // isEntry: æ˜¯å¦æ˜¯å…¥å£æ–‡ä»¶\n  }\n  // è¾“å‡ºæ–‡ä»¶\n  emitFiles() {}\n};\n```\n\n`compile.js`ä¸»è¦åšäº†å‡ ä¸ªäº‹æƒ…ï¼š\n\n- æ¥æ”¶`forestpack.config.js`é…ç½®å‚æ•°ï¼Œå¹¶åˆå§‹åŒ–`entry`ã€`output`\n- å¼€å¯ç¼–è¯‘`run`æ–¹æ³•ã€‚å¤„ç†æ„å»ºæ¨¡å—ã€æ”¶é›†ä¾èµ–ã€è¾“å‡ºæ–‡ä»¶ç­‰ã€‚\n- `buildModule`æ–¹æ³•ã€‚ä¸»è¦ç”¨äºæ„å»ºæ¨¡å—ï¼ˆè¢«`run`æ–¹æ³•è°ƒç”¨ï¼‰\n- `emitFiles`æ–¹æ³•ã€‚è¾“å‡ºæ–‡ä»¶ï¼ˆåŒæ ·è¢«`run`æ–¹æ³•è°ƒç”¨ï¼‰\n\nåˆ°è¿™é‡Œï¼Œ`compiler.js`çš„å¤§è‡´ç»“æ„å·²ç»å‡ºæ¥äº†ï¼Œä½†æ˜¯å¾—åˆ°æ¨¡å—çš„æºç å, éœ€è¦å»è§£æ,æ›¿æ¢æºç å’Œè·å–æ¨¡å—çš„ä¾èµ–é¡¹, ä¹Ÿå°±å¯¹åº”æˆ‘ä»¬ä¸‹é¢éœ€è¦å®Œå–„çš„`parser.js`ã€‚\n\n#### parser.js ç¼–å†™\n\n```js\nconst fs = require(\"fs\");\n// const babylon = require(\"babylon\");\nconst parser = require(\"@babel/parser\");\nconst traverse = require(\"@babel/traverse\").default;\nconst { transformFromAst } = require(\"babel-core\");\nmodule.exports = {\n  // è§£ææˆ‘ä»¬çš„ä»£ç ç”ŸæˆASTæŠ½è±¡è¯­æ³•æ ‘\n  getAST: (path) => {\n    const source = fs.readFileSync(path, \"utf-8\");\n\n    return parser.parse(source, {\n      sourceType: \"module\", //è¡¨ç¤ºæˆ‘ä»¬è¦è§£æçš„æ˜¯ESæ¨¡å—\n    });\n  },\n  // å¯¹ASTèŠ‚ç‚¹è¿›è¡Œé€’å½’éå†\n  getDependencies: (ast) => {\n    const dependencies = [];\n    traverse(ast, {\n      ImportDeclaration: ({ node }) => {\n        dependencies.push(node.source.value);\n      },\n    });\n    return dependencies;\n  },\n  // å°†è·å¾—çš„ES6çš„ASTè½¬åŒ–æˆES5\n  transform: (ast) => {\n    const { code } = transformFromAst(ast, null, {\n      presets: [\"env\"],\n    });\n    return code;\n  },\n};\n```\n\nçœ‹å®Œè¿™ä»£ç æ˜¯ä¸æ˜¯æœ‰ç‚¹æ‡µï¼ˆè¯´å¥½çš„ä¿è¯è®©çœ‹æ‡‚çš„ ğŸ˜¤ï¼‰\n\nåˆ«ç€æ€¥ï¼Œä½ å¬æˆ‘è¾©è§£ï¼ï¼ğŸ˜·\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f842c011ba914a5392bdf8710b585d2a~tplv-k3u1fbpfcp-zoom-1.image)\n\nè¿™é‡Œè¦å…ˆç€é‡è¯´ä¸‹ç”¨åˆ°çš„å‡ ä¸ª`babel`åŒ…ï¼š\n\n- `@babel/parser`ï¼šç”¨äºå°†æºç ç”Ÿæˆ`AST`\n- `@babel/traverse`ï¼šå¯¹`AST`èŠ‚ç‚¹è¿›è¡Œé€’å½’éå†\n- `babel-core`/`@babel/preset-env`ï¼šå°†è·å¾—çš„`ES6`çš„`AST`è½¬åŒ–æˆ`ES5`\n\n`parser.js`ä¸­ä¸»è¦å°±ä¸‰ä¸ªæ–¹æ³•ï¼š\n\n- `getAST`ï¼š å°†è·å–åˆ°çš„æ¨¡å—å†…å®¹ è§£ææˆ`AST`è¯­æ³•æ ‘\n- `getDependencies`ï¼šéå†`AST`ï¼Œå°†ç”¨åˆ°çš„ä¾èµ–æ”¶é›†èµ·æ¥\n- `transform`ï¼šæŠŠè·å¾—çš„`ES6`çš„`AST`è½¬åŒ–æˆ`ES5`\n\n#### å®Œå–„ compiler.js\n\nåœ¨ä¸Šé¢æˆ‘ä»¬å·²ç»å°†`compiler.js`ä¸­ä¼šç”¨åˆ°çš„å‡½æ•°å å¥½ä½ç½®ï¼Œä¸‹é¢æˆ‘ä»¬éœ€è¦å®Œå–„ä¸€ä¸‹`compiler.js`ï¼Œå½“ç„¶ä¼šç”¨åˆ°`parser.js`ä¸­çš„ä¸€äº›æ–¹æ³•ï¼ˆåºŸè¯ï¼Œä¸ç„¶æˆ‘ä¸Šé¢å¹²å˜›è¦å…ˆæŠŠ`parser.js`å†™å®Œï½ï½ï¼‰\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/369b385f2ac1493daac93efdb7cdd633~tplv-k3u1fbpfcp-zoom-1.image)\n\nç›´æ¥ä¸Šä»£ç ï¼š\n\n```js\nconst { getAST, getDependencies, transform } = require(\"./parser\");\nconst path = require(\"path\");\nconst fs = require(\"fs\");\n\nmodule.exports = class Compiler {\n  constructor(options) {\n    const { entry, output } = options;\n    this.entry = entry;\n    this.output = output;\n    this.modules = [];\n  }\n  // å¼€å¯ç¼–è¯‘\n  run() {\n    const entryModule = this.buildModule(this.entry, true);\n    this.modules.push(entryModule);\n    this.modules.map((_module) => {\n      _module.dependencies.map((dependency) => {\n        this.modules.push(this.buildModule(dependency));\n      });\n    });\n    // console.log(this.modules);\n    this.emitFiles();\n  }\n  // æ„å»ºæ¨¡å—ç›¸å…³\n  buildModule(filename, isEntry) {\n    let ast;\n    if (isEntry) {\n      ast = getAST(filename);\n    } else {\n      const absolutePath = path.join(process.cwd(), \"./src\", filename);\n      ast = getAST(absolutePath);\n    }\n\n    return {\n      filename, // æ–‡ä»¶åç§°\n      dependencies: getDependencies(ast), // ä¾èµ–åˆ—è¡¨\n      transformCode: transform(ast), // è½¬åŒ–åçš„ä»£ç \n    };\n  }\n  // è¾“å‡ºæ–‡ä»¶\n  emitFiles() {\n    const outputPath = path.join(this.output.path, this.output.filename);\n    let modules = \"\";\n    this.modules.map((_module) => {\n      modules += `'${_module.filename}' : function(require, module, exports) {${_module.transformCode}},`;\n    });\n\n    const bundle = `\n        (function(modules) {\n          function require(fileName) {\n            const fn = modules[fileName];\n            const module = { exports:{}};\n            fn(require, module, module.exports)\n            return module.exports\n          }\n          require('${this.entry}')\n        })({${modules}})\n    `;\n\n    fs.writeFileSync(outputPath, bundle, \"utf-8\");\n  }\n};\n```\n\nå…³äº`compiler.js`çš„å†…éƒ¨å‡½æ•°ï¼Œä¸Šé¢æˆ‘è¯´è¿‡ä¸€éï¼Œè¿™é‡Œä¸»è¦æ¥çœ‹ä¸‹`emitFiles`ï¼š\n\n```js\nemitFiles() {\n    const outputPath = path.join(this.output.path, this.output.filename);\n    let modules = \"\";\n    this.modules.map((_module) => {\n      modules += `'${_module.filename}' : function(require, module, exports) {${_module.transformCode}},`;\n    });\n\n    const bundle = `\n        (function(modules) {\n          function require(fileName) {\n            const fn = modules[fileName];\n            const module = { exports:{}};\n            fn(require, module, module.exports)\n            return module.exports\n          }\n          require('${this.entry}')\n        })({${modules}})\n    `;\n\n    fs.writeFileSync(outputPath, bundle, \"utf-8\");\n  }\n\n```\n\nè¿™é‡Œçš„`bundle`ä¸€å¤§å¨ï¼Œä»€ä¹ˆé¬¼ï¼Ÿ\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/111299bc59044ed5870c759768659e86~tplv-k3u1fbpfcp-zoom-1.image)\n\næˆ‘ä»¬å…ˆæ¥äº†è§£ä¸‹`webpack`çš„æ–‡ä»¶ ğŸ“¦ æœºåˆ¶ã€‚ä¸‹é¢ä¸€æ®µä»£ç æ˜¯ç»è¿‡`webpack`æ‰“åŒ…ç²¾ç®€è¿‡åçš„ä»£ç ï¼š\n\n```js\n// dist/index.xxxx.js\n(function(modules) {\n  // å·²ç»åŠ è½½è¿‡çš„æ¨¡å—\n  var installedModules = {};\n\n  // æ¨¡å—åŠ è½½å‡½æ•°\n  function __webpack_require__(moduleId) {\n    if(installedModules[moduleId]) {\n      return installedModules[moduleId].exports;\n    }\n    var module = installedModules[moduleId] = {\n      i: moduleId,\n      l: false,\n      exports: {}\n    };\n    modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n    module.l = true;\n    return module.exports;\n  }\n  __webpack_require__(0);\n})([\n/* 0 module */\n(function(module, exports, __webpack_require__) {\n  ...\n}),\n/* 1 module */\n(function(module, exports, __webpack_require__) {\n  ...\n}),\n/* n module */\n(function(module, exports, __webpack_require__) {\n  ...\n})]);\n\n```\n\nç®€å•åˆ†æä¸‹ï¼š\n\n- `webpack` å°†æ‰€æœ‰æ¨¡å—(å¯ä»¥ç®€å•ç†è§£æˆæ–‡ä»¶)åŒ…è£¹äºä¸€ä¸ªå‡½æ•°ä¸­ï¼Œå¹¶ä¼ å…¥é»˜è®¤å‚æ•°ï¼Œå°†æ‰€æœ‰æ¨¡å—æ”¾å…¥ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œå–åä¸º `modules`ï¼Œå¹¶é€šè¿‡æ•°ç»„çš„ä¸‹æ ‡æ¥ä½œä¸º `moduleId`ã€‚\n- å°† `modules` ä¼ å…¥ä¸€ä¸ªè‡ªæ‰§è¡Œå‡½æ•°ä¸­ï¼Œè‡ªæ‰§è¡Œå‡½æ•°ä¸­åŒ…å«ä¸€ä¸ª `installedModules` å·²ç»åŠ è½½è¿‡çš„æ¨¡å—å’Œä¸€ä¸ªæ¨¡å—åŠ è½½å‡½æ•°ï¼Œæœ€ååŠ è½½å…¥å£æ¨¡å—å¹¶è¿”å›ã€‚\n- `__webpack_require__` æ¨¡å—åŠ è½½ï¼Œå…ˆåˆ¤æ–­ `installedModules` æ˜¯å¦å·²åŠ è½½ï¼ŒåŠ è½½è¿‡äº†å°±ç›´æ¥è¿”å› `exports` æ•°æ®ï¼Œæ²¡æœ‰åŠ è½½è¿‡è¯¥æ¨¡å—å°±é€šè¿‡ `modules[moduleId].call(module.exports, module, module.exports, __webpack_require__)` æ‰§è¡Œæ¨¡å—å¹¶ä¸”å°† `module.exports` ç»™è¿”å›ã€‚\n\nï¼ˆä½ ä¸Šé¢è¯´çš„è¿™ä¸€å¨åˆæ˜¯ä»€ä¹ˆé¬¼ï¼Ÿæˆ‘å¬ä¸æ‡‚å•Šå•Šå•Šå•Šï¼ï¼ï¼ï¼‰\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d6c8cba5cad8456eb1f0ef69f132fac0~tplv-k3u1fbpfcp-zoom-1.image)\n\né‚£æˆ‘æ¢ä¸ªè¯´æ³•å§ï¼š\n\n- ç»è¿‡`webpack`æ‰“åŒ…å‡ºæ¥çš„æ˜¯ä¸€ä¸ªåŒ¿åé—­åŒ…å‡½æ•°ï¼ˆ`IIFE`ï¼‰\n- `modules`æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ¯ä¸€é¡¹æ˜¯ä¸€ä¸ªæ¨¡å—åˆå§‹åŒ–å‡½æ•°\n- `__webpack_require__`ç”¨æ¥åŠ è½½æ¨¡å—ï¼Œè¿”å›`module.exports`\n- é€šè¿‡`WEBPACK_REQUIRE_METHOD(0)`å¯åŠ¨ç¨‹åº\n\nï¼ˆå°å£° bbï¼šæ€ä¹ˆæ ·ï¼Œè¿™æ ·å¬æ‡‚äº†å§ï¼‰\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f44e4ab3fb4744cf8c42fddf4af379a3~tplv-k3u1fbpfcp-zoom-1.image)\n\n#### lib/index.js å…¥å£æ–‡ä»¶ç¼–å†™\n\nåˆ°è¿™é‡Œï¼Œå°±å‰©æœ€åä¸€æ­¥äº†ï¼ˆä¼¼ä¹è§åˆ°äº†èƒœåˆ©çš„æ›™å…‰ï¼‰ã€‚åœ¨`lib`ç›®å½•åˆ›å»º`index.js`ï¼š\n\n```js\nconst Compiler = require(\"./compiler\");\nconst options = require(\"../forestpack.config\");\n\nnew Compiler(options).run();\n```\n\nè¿™é‡Œé€»è¾‘å°±æ¯”è¾ƒç®€å•äº†ï¼šå®ä¾‹åŒ–`Compiler`ç±»ï¼Œå¹¶å°†é…ç½®å‚æ•°ï¼ˆå¯¹åº”`forstpack.config.js`ï¼‰ä¼ å…¥ã€‚\n\nè¿è¡Œ`node lib/index.js`å°±ä¼šåœ¨`dist`ç›®å½•ä¸‹ç”Ÿæˆ`bundle.js`æ–‡ä»¶ã€‚\n\n```js\n(function (modules) {\n  function require(fileName) {\n    const fn = modules[fileName];\n    const module = { exports: {} };\n    fn(require, module, module.exports);\n    return module.exports;\n  }\n  require(\"/Users/fengshuan/Desktop/workspace/forestpack/src/index.js\");\n})({\n  \"/Users/fengshuan/Desktop/workspace/forestpack/src/index.js\": function (\n    require,\n    module,\n    exports\n  ) {\n    \"use strict\";\n\n    var _greeting = require(\"./greeting.js\");\n\n    document.write((0, _greeting.greeting)(\"æ£®æ—\"));\n  },\n  \"./greeting.js\": function (require, module, exports) {\n    \"use strict\";\n\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true,\n    });\n    exports.greeting = greeting;\n\n    function greeting(name) {\n      return \"ä½ å¥½\" + name;\n    }\n  },\n});\n```\n\nå’Œä¸Šé¢ç”¨`webpack`æ‰“åŒ…ç”Ÿæˆçš„`js`æ–‡ä»¶ä½œä¸‹å¯¹æ¯”ï¼Œæ˜¯ä¸æ˜¯å¾ˆç›¸ä¼¼å‘¢ï¼Ÿ\n![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2fb2ae629fcf4a75926443e7a84a84cc~tplv-k3u1fbpfcp-zoom-1.image)\n\n#### æ¥å§ï¼å±•ç¤º\n\næˆ‘ä»¬åœ¨`dist`ç›®å½•ä¸‹åˆ›å»º`index.html`æ–‡ä»¶ï¼Œå¼•å…¥æ‰“åŒ…ç”Ÿæˆçš„`bundle.js`æ–‡ä»¶ï¼š\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>Document</title>\n  </head>\n  <body>\n    <script src=\"./bundle.js\"></script>\n  </body>\n</html>\n```\n\næ­¤æ—¶æ‰“å¼€æµè§ˆå™¨ï¼š\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/530176a945e0475eab2520ef3ea75612~tplv-k3u1fbpfcp-zoom-1.image)\n\nå¦‚ä½ æ‰€æ„¿ï¼Œå¾—åˆ°äº†æˆ‘ä»¬é¢„æœŸçš„ç»“æœï½\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5464e1f3296c4db1a7f8cd5e05933fd0~tplv-k3u1fbpfcp-zoom-1.image)\n\n## æ€»ç»“\n\né€šè¿‡å¯¹`webpack`æ„å»ºæµç¨‹çš„åˆ†æä»¥åŠå®ç°äº†ä¸€ä¸ªç®€æ˜“çš„`forestpack`ï¼Œç›¸ä¿¡ä½ å¯¹`webpack`çš„æ„å»ºåŸç†å·²ç»æœ‰äº†ä¸€ä¸ªæ¸…æ™°çš„è®¤çŸ¥ï¼ï¼ˆå½“ç„¶ï¼Œè¿™é‡Œçš„`forestpack`å’Œ`webpack`ç›¸æ¯”è¿˜å¾ˆå¼±å¾ˆå¼±ï¼Œï¼Œï¼Œï¼Œï¼‰\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d484014578e0455ea7f93e4f5d7b2a4f~tplv-k3u1fbpfcp-zoom-1.image)\n\n## å‚è€ƒ\n\næœ¬æ–‡æ˜¯çœ‹è¿‡æå®¢æ—¶é—´ç¨‹æŸ³é”‹è€å¸ˆçš„ã€Œç©è½¬ webpackã€è¯¾ç¨‹åæ•´ç†çš„ã€‚è¿™é‡Œä¹Ÿååˆ†æ¨èå¤§å®¶å»å­¦ä¹ è¿™é—¨è¯¾ç¨‹ï½\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0b941e17454f45ec9d6fa26a10fd7949~tplv-k3u1fbpfcp-zoom-1.image)\n\n## â¤ï¸ çˆ±å¿ƒä¸‰è¿å‡»\n\n1.å¦‚æœè§‰å¾—è¿™ç¯‡æ–‡ç« è¿˜ä¸é”™ï¼Œæ¥ä¸ª<b style=\"color: #ff6441\">åˆ†äº«ã€ç‚¹èµã€åœ¨çœ‹</b>ä¸‰è¿å§ï¼Œè®©æ›´å¤šçš„äººä¹Ÿçœ‹åˆ°ï½\n\n2.å…³æ³¨å…¬ä¼—å·<b style=\"color: #ff6441\">å‰ç«¯æ£®æ—</b>ï¼Œå®šæœŸä¸ºä½ æ¨é€æ–°é²œå¹²è´§å¥½æ–‡ã€‚\n\n3.ç‰¹æ®Šé˜¶æ®µï¼Œå¸¦å¥½å£ç½©ï¼Œåšå¥½ä¸ªäººé˜²æŠ¤ã€‚\n", "user_name": "å‰ç«¯æ£®æ—", "description": "ã€Œå‰ç«¯æ£®æ—ã€å…¬ä¼—å·ä½œè€…ï¼Œæ”¯æŒæ–‡ç« æŠ•ç¨¿åŠç›¸äº’å¼€ç™½åå•", "got_view_count": 134115, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "React.js", "concern_user_count": 199177, "user_id": "4265760847567016", "title": "React Fiber æºç è§£æ", "mark_content": "\n> å›¾ç‰‡ä½œè€…ï¼šArtem Sapeginï¼Œæ¥æºï¼šhttps://unsplash.com/photos/b18TRXc8UPQ\n\n> æœ¬æ–‡ä½œè€…ï¼šåˆ˜é¹\n\n## å‰è¨€\n\nåœ¨ React v16.13 ç‰ˆæœ¬ä¸­ï¼Œæ­£å¼æ¨å‡ºäº†å®éªŒæ€§çš„ Concurrent Modeï¼Œå°¤å…¶æ˜¯æä¾›ä¸€ç§æ–°çš„æœºåˆ¶ Suspenseï¼Œéå¸¸è‡ªç„¶åœ°è§£å†³äº†ä¸€ç›´ä»¥æ¥å­˜åœ¨çš„å¼‚æ­¥å‰¯ä½œç”¨é—®é¢˜ã€‚ç»“åˆå‰é¢ v16.8 æ¨å‡ºçš„ Hooksï¼Œv16.0 åº•å±‚æ¶æ„ Fiberï¼ŒReact ç»™å¼€å‘è€…ä½“éªŒä¸Šå¸¦æ¥äº†æå¤§æå‡ä»¥åŠä¸€å®šç¨‹åº¦ä¸Šæ›´ä½³çš„ç”¨æˆ·ä½“éªŒã€‚æ‰€ä»¥ï¼Œå¯¹ React 17ï¼Œä½ ä¼šæœ‰ä»€ä¹ˆæœŸå¾…ï¼Ÿ\n\n## Stack Reconciler å’Œ Â Fiber Reconciler\n\næˆ‘ä»¬çŸ¥é“ï¼ŒStackÂ Reconciler æ˜¯ React v15 åŠä¹‹å‰ç‰ˆæœ¬ä½¿ç”¨çš„åè°ƒç®—æ³•ã€‚è€Œ React Fiber åˆ™æ˜¯ä» v16 ç‰ˆæœ¬å¼€å§‹å¯¹ Stack Reconciler è¿›è¡Œçš„é‡å†™ï¼Œæ˜¯ v16 ç‰ˆæœ¬çš„æ ¸å¿ƒç®—æ³•å®ç°ã€‚\nStackÂ Reconciler çš„å®ç°ä½¿ç”¨äº†åŒæ­¥é€’å½’æ¨¡å‹ï¼Œè¯¥æ¨¡å‹ä¾èµ–äºå†…ç½®å †æ ˆæ¥éå†ã€‚React å›¢é˜Ÿ Andrew ä¹‹å‰æœ‰æåˆ°ï¼š\n\n> å¦‚æœåªä¾èµ–å†…ç½®è°ƒç”¨å †æ ˆï¼Œé‚£ä¹ˆå®ƒå°†ä¸€ç›´å·¥ä½œï¼Œç›´åˆ°å †æ ˆä¸ºç©ºï¼Œå¦‚æœæˆ‘ä»¬å¯ä»¥éšæ„ä¸­æ–­è°ƒç”¨å †æ ˆå¹¶æ‰‹åŠ¨æ“ä½œå †æ ˆå¸§ï¼Œè¿™ä¸æ˜¯å¾ˆå¥½å—? è¿™å°±æ˜¯ React Fiber çš„ç›®æ ‡ã€‚Fiber æ˜¯å†…ç½®å †æ ˆçš„é‡æ–°å®ç°ï¼Œä¸“é—¨ç”¨äº React ç»„ä»¶ï¼Œå¯ä»¥å°†ä¸€ä¸ª fiber çœ‹ä½œæ˜¯ä¸€ä¸ªè™šæ‹Ÿå †æ ˆå¸§ã€‚\n\næ­£æ˜¯ç”±äºå…¶å†…ç½® Stack Reconciler å¤©ç”Ÿå¸¦æ¥çš„å±€é™æ€§ï¼Œä½¿å¾— DOM æ›´æ–°è¿‡ç¨‹æ˜¯åŒæ­¥çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨è™šæ‹Ÿ DOM çš„æ¯”å¯¹è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå‘ç°ä¸€ä¸ªå…ƒç´ å®ä¾‹æœ‰æ›´æ–°ï¼Œåˆ™ä¼šç«‹å³åŒæ­¥æ‰§è¡Œæ“ä½œï¼Œæäº¤åˆ°çœŸå® DOM çš„æ›´æ”¹ã€‚è¿™åœ¨åŠ¨ç”»ã€å¸ƒå±€ä»¥åŠæ‰‹åŠ¿ç­‰é¢†åŸŸï¼Œå¯èƒ½ä¼šå¸¦æ¥éå¸¸ç³Ÿç³•çš„ç”¨æˆ·ä½“éªŒã€‚å› æ­¤ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒReact å®ç°äº†ä¸€ä¸ªè™šæ‹Ÿå †æ ˆå¸§ã€‚å®é™…ä¸Šï¼Œè¿™ä¸ªæ‰€è°“çš„è™šæ‹Ÿå †æ ˆå¸§æœ¬è´¨ä¸Šæ˜¯å»ºç«‹äº†å¤šä¸ªåŒ…å«èŠ‚ç‚¹å’ŒæŒ‡é’ˆçš„é“¾è¡¨æ•°æ®ç»“æ„ã€‚æ¯ä¸€ä¸ªèŠ‚ç‚¹å°±æ˜¯ä¸€ä¸ª fiber åŸºæœ¬å•å…ƒï¼Œè¿™ä¸ªå¯¹è±¡å­˜å‚¨äº†ä¸€å®šçš„ç»„ä»¶ç›¸å…³çš„æ•°æ®åŸŸä¿¡æ¯ã€‚è€ŒæŒ‡é’ˆçš„æŒ‡å‘ï¼Œåˆ™æ˜¯ä¸²è”èµ·æ•´ä¸ª fibers æ ‘ã€‚é‡æ–°è‡ªå®šä¹‰å †æ ˆå¸¦æ¥æ˜¾è€Œæ˜“è§çš„ä¼˜ç‚¹æ˜¯ï¼Œå¯ä»¥å°†å †æ ˆä¿ç•™åœ¨å†…å­˜ä¸­ï¼Œåœ¨éœ€è¦æ‰§è¡Œçš„æ—¶å€™æ‰§è¡Œå®ƒä»¬ï¼Œè¿™ä½¿å¾—æš‚åœéå†å’Œåœæ­¢å †æ ˆé€’å½’æˆä¸ºå¯èƒ½ã€‚\n\nFiber çš„ä¸»è¦ç›®æ ‡æ˜¯å®ç°è™šæ‹Ÿ DOM çš„å¢é‡æ¸²æŸ“ï¼Œèƒ½å¤Ÿå°†æ¸²æŸ“å·¥ä½œæ‹†åˆ†æˆå—å¹¶å°†å…¶åˆ†æ•£åˆ°å¤šä¸ªå¸§çš„èƒ½åŠ›ã€‚åœ¨æ–°çš„æ›´æ–°åˆ°æ¥æ—¶ï¼Œèƒ½å¤Ÿæš‚åœã€ä¸­æ­¢å’Œå¤ç”¨å·¥ä½œï¼Œèƒ½ä¸ºä¸åŒç±»å‹çš„æ›´æ–°åˆ†é…ä¼˜å…ˆçº§é¡ºåºçš„èƒ½åŠ›ã€‚ç†è§£ React è¿è¡Œæœºåˆ¶å¯¹æˆ‘ä»¬æ›´å¥½ç†è§£å®ƒçš„è®¾è®¡æ€æƒ³ä»¥åŠåç»­ç‰ˆæœ¬æ–°å¢ç‰¹æ€§ï¼Œæ¯”å¦‚ v17 ç‰ˆæœ¬å¯èƒ½å¸¦æ¥çš„å¼‚æ­¥æ¸²æŸ“èƒ½åŠ›ï¼Œç›¸ä¿¡ä¼šæœ‰å¾ˆå¥½çš„å¸®åŠ©ã€‚æœ¬æ–‡åŸºäº ReactÂ v16.8.6 ç‰ˆæœ¬æºç ï¼Œè¾“å‡ºä¸€äº›æµ…è§ï¼Œå¸Œæœ›å¯¹ä½ ä¹Ÿæœ‰å¸®åŠ©ï¼Œå¦‚æœ‰ä¸å¯¹ï¼Œè¿˜æœ›æŒ‡æ­£ã€‚\n\n## åŸºç¡€æ¦‚å¿µ\n\nåœ¨äº†è§£ React Fiber æ¶æ„çš„å®ç°æœºåˆ¶ä¹‹å‰ï¼Œæœ‰å¿…è¦å…ˆæŠŠå‡ ä¸ªä¸»è¦çš„åŸºç¡€æ¦‚å¿µæŠ›å‡ºæ¥ï¼Œä»¥ä¾¿äºæˆ‘ä»¬æ›´å¥½åœ°ç†è§£ã€‚\n\n### Work\n\nåœ¨ ReactÂ Reconciliation è¿‡ç¨‹ä¸­å‡ºç°çš„å„ç§å¿…é¡»æ‰§è¡Œè®¡ç®—çš„æ´»åŠ¨ï¼Œæ¯”å¦‚ state updateï¼Œprops update æˆ– refs update ç­‰ï¼Œè¿™äº›æ´»åŠ¨æˆ‘ä»¬å¯ä»¥ç»Ÿä¸€ç§°ä¹‹ä¸º workã€‚\n\n### Fiber å¯¹è±¡\n\n> æ–‡ä»¶ä½ç½®ï¼špackages/react-reconciler/src/ReactFiber.js\n\næ¯ä¸€ä¸ª React å…ƒç´ å¯¹åº”ä¸€ä¸ª fiber å¯¹è±¡ï¼Œä¸€ä¸ª fiber å¯¹è±¡é€šå¸¸æ˜¯è¡¨å¾ work çš„ä¸€ä¸ªåŸºæœ¬å•å…ƒã€‚fiber å¯¹è±¡æœ‰å‡ ä¸ªå±æ€§ï¼Œè¿™äº›å±æ€§æŒ‡å‘å…¶ä»– fiber å¯¹è±¡ã€‚\n\n-   childï¼š å¯¹åº”äºçˆ¶ fiber èŠ‚ç‚¹çš„å­ fiber\n-   siblingï¼š å¯¹åº”äº fiber èŠ‚ç‚¹çš„åŒç±»å…„å¼ŸèŠ‚ç‚¹\n-   returnï¼š å¯¹åº”äºå­ fiber èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹\n\nå› æ­¤ fibers å¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€ä¸ªåŒ…å« React å…ƒç´ ä¸Šä¸‹æ–‡ä¿¡æ¯çš„æ•°æ®åŸŸèŠ‚ç‚¹ï¼Œä»¥åŠç”± child,Â sibling å’Œ return ç­‰æŒ‡é’ˆåŸŸæ„æˆçš„é“¾è¡¨ç»“æ„ã€‚\n\nfiber å¯¹è±¡ä¸»è¦çš„å±æ€§å¦‚ä¸‹æ‰€ç¤ºï¼š\n\n```javascript\nFiber = {\n    // æ ‡è¯† fiber ç±»å‹çš„æ ‡ç­¾ï¼Œè¯¦æƒ…å‚çœ‹ä¸‹è¿° WorkTag\n    tag: WorkTag,\n\n    // æŒ‡å‘çˆ¶èŠ‚ç‚¹\n    return: Fiber | null,\n\n    // æŒ‡å‘å­èŠ‚ç‚¹\n    child: Fiber | null,\n\n    // æŒ‡å‘å…„å¼ŸèŠ‚ç‚¹\n    sibling: Fiber | null,\n\n    // åœ¨å¼€å§‹æ‰§è¡Œæ—¶è®¾ç½® props å€¼\n    pendingProps: any,\n\n    // åœ¨ç»“æŸæ—¶è®¾ç½®çš„ props å€¼\n    memoizedProps: any,\n\n    // å½“å‰ state\n    memoizedState: any,\n\n    // Effect ç±»å‹ï¼Œè¯¦æƒ…æŸ¥çœ‹ä»¥ä¸‹ effectTag\n    effectTag: SideEffectTag,\n\n    // effect èŠ‚ç‚¹æŒ‡é’ˆï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ª effect\n    nextEffect: Fiber | null,\n\n    // effect list æ˜¯å•å‘é“¾è¡¨ï¼Œç¬¬ä¸€ä¸ª effect\n    firstEffect: Fiber | null,\n\n    // effect list æ˜¯å•å‘é“¾è¡¨ï¼Œæœ€åä¸€ä¸ª effect\n    lastEffect: Fiber | null,\n\n    // work çš„è¿‡æœŸæ—¶é—´ï¼Œå¯ç”¨äºæ ‡è¯†ä¸€ä¸ª work ä¼˜å…ˆçº§é¡ºåº\n    expirationTime: ExpirationTime,\n};\n```\n\nä» React å…ƒç´ åˆ›å»ºä¸€ä¸ª fiber å¯¹è±¡\n\n> æ–‡ä»¶ä½ç½®ï¼šreact-reconciler/src/ReactFiber.js\n\n```javascript\nexport function createFiberFromElement(\n    element: ReactElement,\n    mode: TypeOfMode,\n    expirationTime: ExpirationTime\n): Fiber {\n    const fiber = createFiberFromTypeAndProps(type, key, pendingProps, owner, mode, expirationTime);\n    return fiber;\n}\n```\n\n### workTag\n\n> æ–‡ä»¶ä½ç½®ï¼šshared/ReactWorkTags.js\n\nä¸Šè¿° fiber å¯¹è±¡çš„ tag å±æ€§å€¼ï¼Œç§°ä½œ workTagï¼Œç”¨äºæ ‡è¯†ä¸€ä¸ª React å…ƒç´ çš„ç±»å‹ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n\n```javascript\nexport const FunctionComponent = 0;\nexport const ClassComponent = 1;\nexport const IndeterminateComponent = 2; // Before we know whether it is function or class\nexport const HostRoot = 3; // Root of a host tree. Could be nested inside another node.\nexport const HostPortal = 4; // A subtree. Could be an entry point to a different renderer.\nexport const HostComponent = 5;\nexport const HostText = 6;\nexport const Fragment = 7;\nexport const Mode = 8;\nexport const ContextConsumer = 9;\nexport const ContextProvider = 10;\nexport const ForwardRef = 11;\nexport const Profiler = 12;\nexport const SuspenseComponent = 13;\nexport const MemoComponent = 14;\nexport const SimpleMemoComponent = 15;\nexport const LazyComponent = 16;\nexport const IncompleteClassComponent = 17;\nexport const DehydratedSuspenseComponent = 18;\nexport const EventComponent = 19;\nexport const EventTarget = 20;\nexport const SuspenseListComponent = 21;\n```\n\n### EffectTag\n\n> æ–‡ä»¶ä½ç½®ï¼šshared/ReactSideEffectTags.js\n\nä¸Šè¿° fiber å¯¹è±¡çš„ effectTag å±æ€§å€¼ï¼Œæ¯ä¸€ä¸ª fiber èŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªå’Œå®ƒç›¸å…³è”çš„ effectTag å€¼ã€‚  \næˆ‘ä»¬æŠŠä¸èƒ½åœ¨ render é˜¶æ®µå®Œæˆçš„ä¸€äº› work ç§°ä¹‹ä¸ºå‰¯ä½œç”¨ï¼ŒReact ç½—åˆ—äº†å¯èƒ½å­˜åœ¨çš„å„ç±»å‰¯ä½œç”¨ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n\n```javascript\nexport const NoEffect = /*              */ 0b000000000000;\nexport const PerformedWork = /*         */ 0b000000000001;\n\nexport const Placement = /*             */ 0b000000000010;\nexport const Update = /*                */ 0b000000000100;\nexport const PlacementAndUpdate = /*    */ 0b000000000110;\nexport const Deletion = /*              */ 0b000000001000;\nexport const ContentReset = /*          */ 0b000000010000;\nexport const Callback = /*              */ 0b000000100000;\nexport const DidCapture = /*            */ 0b000001000000;\nexport const Ref = /*                   */ 0b000010000000;\nexport const Snapshot = /*              */ 0b000100000000;\nexport const Passive = /*               */ 0b001000000000;\n\nexport const LifecycleEffectMask = /*   */ 0b001110100100;\nexport const HostEffectMask = /*        */ 0b001111111111;\n\nexport const Incomplete = /*            */ 0b010000000000;\nexport const ShouldCapture = /*         */ 0b100000000000;\n```\n\n### Reconciliation å’Œ Scheduling\n\nåè°ƒï¼ˆReconciliationï¼‰ï¼š  \nç®€è€Œè¨€ä¹‹ï¼Œæ ¹æ® diff ç®—æ³•æ¥æ¯”è¾ƒè™šæ‹Ÿ DOMï¼Œä»è€Œå¯ä»¥ç¡®è®¤å“ªäº›éƒ¨åˆ†çš„ React å…ƒç´ éœ€è¦æ›´æ”¹ã€‚\n\nè°ƒåº¦ï¼ˆSchedulingï¼‰ï¼š  \nå¯ä»¥ç®€å•ç†è§£ä¸ºæ˜¯ä¸€ä¸ªç¡®å®šåœ¨ä»€ä¹ˆæ—¶å€™æ‰§è¡Œ work çš„è¿‡ç¨‹ã€‚\n\n### Render é˜¶æ®µå’Œ Commit é˜¶æ®µ\n\nç›¸ä¿¡å¾ˆå¤šåŒå­¦éƒ½çœ‹è¿‡è¿™å¼ å›¾ï¼Œè¿™æ˜¯ React å›¢é˜Ÿä½œè€… Dan Abramov ç”»çš„ä¸€å¼ ç”Ÿå‘½å‘¨æœŸé˜¶æ®µå›¾ï¼Œ[è¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹](https://twitter.com/dan_abramov/status/981712092611989509?lang=en)ã€‚ä»–æŠŠ React çš„ç”Ÿå‘½å‘¨æœŸä¸»è¦åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼šrender é˜¶æ®µå’Œ commit é˜¶æ®µã€‚å…¶ä¸­ commit é˜¶æ®µåˆå¯ä»¥ç»†åˆ†ä¸º pre-commit é˜¶æ®µå’Œ commit é˜¶æ®µï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n![image.png](https://p1.music.126.net/sxGbXXgh_vcsGIBSpgzUwQ==/109951165071751568.png)\n\nä» v16.3 ç‰ˆæœ¬å¼€å§‹ï¼Œåœ¨ render é˜¶æ®µï¼Œä»¥ä¸‹å‡ ä¸ªç”Ÿå‘½å‘¨æœŸè¢«è®¤ä¸ºæ˜¯ä¸å®‰å…¨çš„ï¼Œå®ƒä»¬å°†åœ¨æœªæ¥çš„ç‰ˆæœ¬ä¸­è¢«ç§»é™¤ï¼Œå¯ä»¥çœ‹åˆ°è¿™äº›ç”Ÿå‘½å‘¨æœŸåœ¨ä¸Šå›¾ä¸­æœªè¢«åŒ…æ‹¬è¿›å»ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n\n-   [UNSAFE_]componentWillMount (deprecated)\n-   [UNSAFE_]componentWillReceiveProps (deprecated)\n-   [UNSAFE_]componentWillUpdate (deprecated)\n\nåœ¨ React å®˜ç½‘ä¸­æ˜ç¡®æåˆ°äº†åºŸå¼ƒçš„åŸå› ï¼Œè¿™äº›è¢«æ ‡è®°ä¸ºä¸å®‰å…¨çš„ç”Ÿå‘½å‘¨æœŸç”±äºå¸¸å¸¸è¢«å¼€å‘è€…é”™è¯¯ç†è§£ç”šè‡³è¢«æ»¥ç”¨ï¼Œæ¯”å¦‚ä¸€äº›å¼€å‘äººå‘˜ä¼šå€¾å‘äºå°†å¸¦æœ‰è¯·æ±‚æ•°æ®ç­‰å‰¯ä½œç”¨çš„é€»è¾‘æ”¾åœ¨è¿™äº›ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­ï¼Œè®¤ä¸ºèƒ½å¸¦æ¥æ›´å¥½çš„æ€§èƒ½ï¼Œè€Œå®é™…ä¸ŠçœŸæ­£å¸¦æ¥çš„æ”¶ç›Šå‡ ä¹å¯ä»¥å¿½ç•¥ã€‚åœ¨æœªæ¥ï¼Œ React é€æ­¥æ¨å´‡å¼‚æ­¥æ¸²æŸ“æ¨¡å¼ä¸‹ï¼Œè¿™å¾ˆæœ‰å¯èƒ½ä¼šå› ä¸ºä¸å…¼å®¹è€Œå¸¦æ¥å¾ˆå¤šé—®é¢˜ã€‚\n\nåœ¨ render é˜¶æ®µï¼ŒReact å¯ä»¥æ ¹æ®å½“å‰å¯ç”¨çš„æ—¶é—´ç‰‡å¤„ç†ä¸€ä¸ªæˆ–å¤šä¸ª fiber èŠ‚ç‚¹ï¼Œå¹¶ä¸”å¾—ç›Šäº fiber å¯¹è±¡ä¸­å­˜å‚¨çš„å…ƒç´ ä¸Šä¸‹æ–‡ä¿¡æ¯ä»¥åŠæŒ‡é’ˆåŸŸæ„æˆçš„é“¾è¡¨ç»“æ„ï¼Œä½¿å…¶èƒ½å¤Ÿå°†æ‰§è¡Œåˆ°ä¸€åŠçš„å·¥ä½œä¿å­˜åœ¨å†…å­˜çš„é“¾è¡¨ä¸­ã€‚å½“ React åœæ­¢å¹¶å®Œæˆä¿å­˜çš„å·¥ä½œåï¼Œè®©å‡ºæ—¶é—´ç‰‡å»å¤„ç†ä¸€äº›å…¶ä»–ä¼˜å…ˆçº§æ›´é«˜çš„äº‹æƒ…ã€‚ä¹‹åï¼Œåœ¨é‡æ–°è·å–åˆ°å¯ç”¨çš„æ—¶é—´ç‰‡åï¼Œå®ƒèƒ½å¤Ÿæ ¹æ®ä¹‹å‰ä¿å­˜åœ¨å†…å­˜çš„ä¸Šä¸‹æ–‡ä¿¡æ¯é€šè¿‡å¿«é€Ÿéå†çš„æ–¹å¼æ‰¾åˆ°åœæ­¢çš„ fiber èŠ‚ç‚¹å¹¶ç»§ç»­å·¥ä½œã€‚ç”±äºåœ¨æ­¤é˜¶æ®µæ‰§è¡Œçš„å·¥ä½œå¹¶ä¸ä¼šå¯¼è‡´ä»»ä½•ç”¨æˆ·å¯è§çš„æ›´æ”¹ï¼Œå› ä¸ºå¹¶æ²¡æœ‰è¢«æäº¤åˆ°çœŸå®çš„ DOMã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬è¯´æ˜¯ fiber è®©è°ƒåº¦èƒ½å¤Ÿå®ç°æš‚åœã€ä¸­æ­¢ä»¥åŠé‡æ–°å¼€å§‹ç­‰å¢é‡æ¸²æŸ“çš„èƒ½åŠ›ã€‚ç›¸åï¼Œåœ¨ commit é˜¶æ®µï¼Œwork æ‰§è¡Œæ€»æ˜¯åŒæ­¥çš„ï¼Œè¿™æ˜¯å› ä¸ºåœ¨æ­¤é˜¶æ®µæ‰§è¡Œçš„å·¥ä½œå°†å¯¼è‡´ç”¨æˆ·å¯è§çš„æ›´æ”¹ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨ commit é˜¶æ®µï¼Œ React éœ€è¦ä¸€æ¬¡æ€§æäº¤å¹¶å®Œæˆè¿™äº›å·¥ä½œçš„åŸå› ã€‚\n\n### Current æ ‘å’Œ WorkInProgress æ ‘\n\né¦–æ¬¡æ¸²æŸ“ä¹‹åï¼ŒReact ä¼šç”Ÿæˆä¸€ä¸ªå¯¹åº”äº UI æ¸²æŸ“çš„ fiber æ ‘ï¼Œç§°ä¹‹ä¸º current æ ‘ã€‚å®é™…ä¸Šï¼ŒReact åœ¨è°ƒç”¨ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°æ—¶å°±æ˜¯é€šè¿‡åˆ¤æ–­æ˜¯å¦å­˜åœ¨ current æ¥åŒºåˆ†ä½•æ—¶æ‰§è¡Œ componentDidMount å’Œ componentDidUpdateã€‚å½“ React éå† current æ ‘æ—¶ï¼Œå®ƒä¼šä¸ºæ¯ä¸€ä¸ªå­˜åœ¨çš„ fiber èŠ‚ç‚¹åˆ›å»ºäº†ä¸€ä¸ªæ›¿ä»£èŠ‚ç‚¹ï¼Œè¿™äº›èŠ‚ç‚¹æ„æˆä¸€ä¸ª workInProgress æ ‘ã€‚åç»­æ‰€æœ‰å‘ç”Ÿ work çš„åœ°æ–¹éƒ½æ˜¯åœ¨ workInProgress æ ‘ä¸­æ‰§è¡Œï¼Œå¦‚æœè¯¥æ ‘è¿˜æœªåˆ›å»ºï¼Œåˆ™ä¼šåˆ›å»ºä¸€ä¸ª current æ ‘çš„å‰¯æœ¬ï¼Œä½œä¸º workInProgress æ ‘ã€‚å½“ workInProgress æ ‘è¢«æäº¤åå°†ä¼šåœ¨ commit é˜¶æ®µçš„æŸä¸€å­é˜¶æ®µè¢«æ›¿æ¢æˆä¸º current æ ‘ã€‚\n\nè¿™é‡Œå¢åŠ ä¸¤ä¸ªæ ‘çš„ä¸»è¦åŸå› æ˜¯ä¸ºäº†é¿å…æ›´æ–°çš„ä¸¢å¤±ã€‚æ¯”å¦‚ï¼Œå¦‚æœæˆ‘ä»¬åªå¢åŠ æ›´æ–°åˆ° workInProgress æ ‘ï¼Œå½“ workInProgress æ ‘é€šè¿‡ä» current æ ‘ä¸­å…‹éš†è€Œé‡æ–°å¼€å§‹æ—¶ï¼Œä¸€äº›æ›´æ–°å¯èƒ½ä¼šä¸¢å¤±ã€‚åŒæ ·çš„ï¼Œå¦‚æœæˆ‘ä»¬åªå¢åŠ æ›´æ–°åˆ° current æ ‘ï¼Œå½“ workInProgress æ ‘è¢«æäº¤åä¼šè¢«æ›¿æ¢ä¸º current æ ‘ï¼Œæ›´æ–°ä¹Ÿä¼šè¢«ä¸¢å¤±ã€‚é€šè¿‡åœ¨ä¸¤ä¸ªé˜Ÿåˆ—éƒ½ä¿æŒæ›´æ–°ï¼Œå¯ä»¥ç¡®ä¿æ›´æ–°å§‹ç»ˆæ˜¯ä¸‹ä¸€ä¸ª workInProgress æ ‘çš„ä¸€éƒ¨åˆ†ã€‚å¹¶ä¸”ï¼Œå› ä¸º workInProgress æ ‘è¢«æäº¤æˆä¸º current æ ‘ï¼Œå¹¶ä¸ä¼šå‡ºç°ç›¸åŒçš„æ›´æ–°è€Œè¢«é‡å¤åº”ç”¨ä¸¤æ¬¡çš„æƒ…å†µã€‚\n\n### Effects list\n\neffect list å¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€ä¸ªå­˜å‚¨ effectTag å‰¯ä½œç”¨åˆ—è¡¨å®¹å™¨ã€‚å®ƒæ˜¯ç”± fiber èŠ‚ç‚¹å’ŒæŒ‡é’ˆ nextEffect æ„æˆçš„å•é“¾è¡¨ç»“æ„ï¼Œè¿™å…¶ä¸­è¿˜åŒ…æ‹¬ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ firstEffectï¼Œå’Œæœ€åä¸€ä¸ªèŠ‚ç‚¹ lastEffectã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n![image.png](https://p1.music.126.net/iLgNdiRLxrM0WZGYA1ORAA==/109951165071746326.png)\n\nReact é‡‡ç”¨æ·±åº¦ä¼˜å…ˆæœç´¢ç®—æ³•ï¼Œåœ¨ render é˜¶æ®µéå† fiber æ ‘æ—¶ï¼ŒæŠŠæ¯ä¸€ä¸ªæœ‰å‰¯ä½œç”¨çš„ fiber ç­›é€‰å‡ºæ¥ï¼Œæœ€åæ„å»ºç”Ÿæˆä¸€ä¸ªåªå¸¦å‰¯ä½œç”¨çš„ effect list é“¾è¡¨ã€‚  \nåœ¨ commit é˜¶æ®µï¼ŒReact æ‹¿åˆ° effect list æ•°æ®åï¼Œé€šè¿‡éå† effect listï¼Œå¹¶æ ¹æ®æ¯ä¸€ä¸ª effect èŠ‚ç‚¹çš„ effectTag ç±»å‹ï¼Œä»è€Œå¯¹ç›¸åº”çš„ DOM æ ‘æ‰§è¡Œæ›´æ”¹ã€‚\n\næ›´å¤š effect list æ„å»ºæ¼”ç¤ºæµç¨‹ï¼Œå¯ä»¥ç‚¹å‡»æŸ¥çœ‹åŠ¨ç”» [ã€ŠEffect List â€”â€” åˆä¸€ä¸ª Fiber é“¾è¡¨çš„æ„å»ºè¿‡ç¨‹ã€‹](https://www.bilibili.com/video/av48384879/)ã€‚\n\n## Render é˜¶æ®µ\n\nåœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ä»¥ç±»ç»„ä»¶ä¸ºä¾‹ï¼Œå‡è®¾å·²ç»å¼€å§‹è°ƒç”¨äº†ä¸€ä¸ª setState æ–¹æ³•ã€‚\n\n### enqueueSetState\n\næ¯ä¸ª React ç»„ä»¶éƒ½æœ‰ä¸€ä¸ªç›¸å…³è”çš„ updaterï¼Œä½œä¸ºç»„ä»¶å±‚å’Œæ ¸å¿ƒåº“ä¹‹é—´çš„æ¡¥æ¢ã€‚  \nreact.Component æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨å®ƒçš„åŸå‹å¯¹è±¡ä¸ŠæŒ‚è½½äº† setState æ–¹æ³•\n\n> æ–‡ä»¶ä½ç½®ï¼šreact/src/ReactBaseClasses.js\n\n```javascript\n// Componentå‡½æ•°\nfunction Component(props, context, updater) {\n    this.props = props;\n    this.context = context;\n    this.updater = updater || ReactNoopUpdateQueue;\n}\n\n// ComponentåŸå‹å¯¹è±¡æŒ‚è½½ setState\nComponent.prototype.setState = function (partialState, callback) {\n    this.updater.enqueueSetState(this, partialState, callback, 'setState');\n};\n```\n\nReact ç»™ work å¤§è‡´åˆ†æˆä»¥ä¸‹å‡ ç§ä¼˜å…ˆçº§ç±»å‹ï¼Œå…¶ä¸­ immediate æ¯”è¾ƒç‰¹æ®Šï¼Œå®ƒçš„ä¼˜å…ˆçº§æœ€é«˜ï¼Œå¯ä»¥ç†è§£ä¸ºæ˜¯åŒæ­¥è°ƒåº¦ï¼Œè°ƒåº¦è¿‡ç¨‹ä¸­ä¸ä¼šè¢«ä¸­æ–­ã€‚\n\n```javascript\nexport const NoPriority = 0;\nexport const ImmediatePriority = 1;\nexport const UserBlockingPriority = 2;\nexport const NormalPriority = 3;\nexport const LowPriority = 4;\nexport const IdlePriority = 5;\n```\n\nReact æœ‰ä¸€å¥—è®¡ç®—é€»è¾‘ï¼Œæ ¹æ®ä¸åŒçš„ä¼˜å…ˆçº§ç±»å‹ä¸ºä¸åŒçš„ work è®¡ç®—å‡ºä¸€ä¸ªè¿‡æœŸæ—¶é—´ expirationTimeï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªæ—¶é—´æˆ³ã€‚æ‰€è°“çš„ React åœ¨æ–°çš„æ›´æ–°åˆ°æ¥æ—¶ï¼Œèƒ½ä¸ºä¸åŒç±»å‹çš„æ›´æ–°åˆ†é…ä¼˜å…ˆçº§é¡ºåºçš„èƒ½åŠ›ï¼Œæœ¬è´¨ä¸Šæ˜¯æ ¹æ®è¿‡æœŸæ—¶é—´ expirationTime çš„å¤§å°æ¥ç¡®å®šä¼˜å…ˆçº§é¡ºåºï¼ŒexpirationTime æ•°å€¼è¶Šå°ï¼Œåˆ™ä¼˜å…ˆçº§è¶Šé«˜ã€‚åœ¨ç›¸å·®ä¸€å®šæ—¶é—´èŒƒå›´å†…çš„ workï¼ŒReact ä¼šè®¤ä¸ºå®ƒä»¬æ˜¯åŒä¸€ä¸ªæ‰¹æ¬¡ï¼ˆbatchï¼‰çš„ï¼Œå› æ­¤è¿™ä¸€æ‰¹æ¬¡çš„ work ä¼šåœ¨ä¸€æ¬¡æ›´æ–°ä¸­å®Œæˆã€‚\n\n> æ–‡ä»¶ä½ç½®ï¼šreact-reconciler/src/ReactFiberClassComponent.js\n\n```javascript\nconst classComponentUpdater = {\n    enqueueSetState(inst, payload, callback) {\n        // è·å– fiber å¯¹è±¡\n        const fiber = getInstance(inst);\n        const currentTime = requestCurrentTime();\n\n        // è®¡ç®—åˆ°æœŸæ—¶é—´ expirationTime\n        const expirationTime = computeExpirationForFiber(currentTime, fiber, suspenseConfig);\n\n        const update = createUpdate(expirationTime, suspenseConfig);\n        // æ’å…¥ update åˆ°é˜Ÿåˆ—\n        enqueueUpdate(fiber, update);\n        // è°ƒåº¦ work æ–¹æ³•\n        scheduleWork(fiber, expirationTime);\n    },\n};\n```\n\n### renderRoot\n\n> æ–‡ä»¶ä½ç½®ï¼šreact-reconciler/src/ReactFiberWorkLoop.js\n\nåè°ƒè¿‡ç¨‹æ€»æ˜¯ renderRoot å¼€å§‹ï¼Œæ–¹æ³•è°ƒç”¨æ ˆï¼šscheduleWork -->Â Â scheduleCallbackForRootÂ  -->Â renderRoot\n\nä»£ç å¦‚ä¸‹ï¼š\n\n```javascript\nfunction renderRoot(\n  root: FiberRoot,\n  expirationTime: ExpirationTime,\n  isSync: boolean,\n) | null {\n  do {\n    // ä¼˜å…ˆçº§æœ€é«˜ï¼Œèµ°åŒæ­¥åˆ†æ”¯\n    if (isSync) {\n      workLoopSync();\n    } else {\n      workLoop();\n    }\n  } while (true);\n}\n\n// æ‰€æœ‰çš„fiberèŠ‚ç‚¹éƒ½åœ¨workLoop ä¸­è¢«å¤„ç†\nfunction workLoop() {\n  while (workInProgress !== null && !shouldYield()) {\n    workInProgress = performUnitOfWork(workInProgress);\n  }\n}\n```\n\n### performUnitOfWork\n\næ‰€æœ‰çš„ fiber èŠ‚ç‚¹éƒ½åœ¨ workLoop æ–¹æ³•å¤„ç†ã€‚åè°ƒè¿‡ç¨‹æ€»æ˜¯ä»æœ€é¡¶å±‚çš„ hostRoot èŠ‚ç‚¹å¼€å§‹è¿›è¡Œ workInProgress æ ‘çš„éå†ã€‚ä½†æ˜¯ï¼ŒReact ä¼šè·³è¿‡å·²ç»å¤„ç†è¿‡çš„ fiber èŠ‚ç‚¹ï¼Œç›´åˆ°æ‰¾åˆ°è¿˜æœªå®Œæˆå·¥ä½œçš„èŠ‚ç‚¹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœåœ¨ç»„ä»¶æ ‘çš„æ·±å¤„è°ƒç”¨ setStateï¼ŒReact å°†ä»é¡¶éƒ¨å¼€å§‹ï¼Œä½†ä¼šå¿«é€Ÿè·³è¿‡çˆ¶èŠ‚ç‚¹ï¼Œç›´åˆ°åˆ°è¾¾è°ƒç”¨äº† setState æ–¹æ³•çš„ç»„ä»¶ã€‚æ•´ä¸ªè¿‡ç¨‹é‡‡ç”¨çš„æ˜¯æ·±åº¦ä¼˜å…ˆæœç´¢ç®—æ³•ï¼Œå¤„ç†å®Œå½“å‰ fiber èŠ‚ç‚¹åï¼ŒworkInProgress å°†åŒ…å«å¯¹æ ‘ä¸­ä¸‹ä¸€ä¸ª fiber èŠ‚ç‚¹çš„å¼•ç”¨ï¼Œå¦‚æœä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¸º null ä¸å­˜åœ¨ï¼Œåˆ™è®¤ä¸ºæ‰§è¡Œç»“æŸé€€å‡º workLoop å¾ªç¯å¹¶å‡†å¤‡è¿›è¡Œä¸€æ¬¡æäº¤æ›´æ”¹ã€‚\n\næ–¹æ³•è°ƒç”¨æ ˆå¦‚ä¸‹ï¼š\nperformUnitOfWorkÂ  -->Â Â beginWork -->Â  updateClassComponent --> finishedComponent --> completeUnitOfWork\n\nä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š\n\n> æ–‡ä»¶ä½ç½®ï¼šreact-reconciler/src/ReactFiberWorkLoop.js\n\n```javascript\nfunction performUnitOfWork(unitOfWork: Fiber): Fiber | null {\n    const current = unitOfWork.alternate;\n\n    let next;\n    next = beginWork(current, unitOfWork, renderExpirationTime);\n\n    // å¦‚æœæ²¡æœ‰æ–°çš„ workï¼Œåˆ™è®¤ä¸ºå·²å®Œæˆå½“å‰å·¥ä½œ\n    if (next === null) {\n        next = completeUnitOfWork(unitOfWork);\n    }\n\n    return next;\n}\n```\n\näº†è§£æ ‘çš„æ·±åº¦ä¼˜å…ˆæœç´¢ç®—æ³•ï¼Œå¯ç‚¹å‡»å‚è€ƒè¯¥ç¤ºä¾‹ [ã€Šjs-ntqfillã€‹](https://stackblitz.com/edit/js-ntqfil?file=index.js)ã€‚\n\n### completeUnitOfWork\n\n> æ–‡ä»¶ä½ç½®ï¼šreact-reconciler/src/completeUnitOfWork.js\n\nåœ¨ completeUnitOfWork æ–¹æ³•ä¸­æ„å»º effect-list é“¾è¡¨ï¼Œè¯¥ effect list åœ¨ä¸‹ä¸€ä¸ª commit é˜¶æ®µéå¸¸é‡è¦ï¼Œå…³äº effect list ä¸Šè¿°æœ‰ä»‹ç»ã€‚\n\nå¦‚ä¸‹æ‰€ç¤ºï¼š\n\n```javascript\nfunction completeUnitOfWork(unitOfWork: Fiber): Fiber | null {\n    // æ·±åº¦ä¼˜å…ˆæœç´¢ç®—æ³•\n    workInProgress = unitOfWork;\n    do {\n        const current = workInProgress.alternate;\n        const returnFiber = workInProgress.return;\n\n        /*\n    \tæ„å»º effect-listéƒ¨åˆ†\n    */\n        if (returnFiber.firstEffect === null) {\n            returnFiber.firstEffect = workInProgress.firstEffect;\n        }\n        if (workInProgress.lastEffect !== null) {\n            if (returnFiber.lastEffect !== null) {\n                returnFiber.lastEffect.nextEffect = workInProgress.firstEffect;\n            }\n            returnFiber.lastEffect = workInProgress.lastEffect;\n        }\n\n        if (returnFiber.lastEffect !== null) {\n            returnFiber.lastEffect.nextEffect = workInProgress;\n        } else {\n            returnFiber.firstEffect = workInProgress;\n        }\n        returnFiber.lastEffect = workInProgress;\n\n        const siblingFiber = workInProgress.sibling;\n        if (siblingFiber !== null) {\n            // If there is more work to do in this returnFiber, do that next.\n            return siblingFiber;\n        }\n        // Otherwise, return to the parent\n        workInProgress = returnFiber;\n    } while (workInProgress !== null);\n}\n```\n\nè‡³æ­¤ï¼Œä¸€ä¸ª render é˜¶æ®µå¤§æ¦‚æµç¨‹ç»“æŸã€‚\n\n## Commit é˜¶æ®µ\n\ncommit é˜¶æ®µæ˜¯ React æ›´æ–°çœŸå® DOM å¹¶è°ƒç”¨ pre-commit phase å’Œ commit phase ç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„åœ°æ–¹ã€‚ä¸ render é˜¶æ®µä¸åŒï¼Œcommit é˜¶æ®µçš„æ‰§è¡Œå§‹ç»ˆæ˜¯åŒæ­¥çš„ï¼Œå®ƒå°†ä¾èµ–ä¸Šä¸€ä¸ª render é˜¶æ®µæ„å»ºçš„ effect list é“¾è¡¨æ¥å®Œæˆã€‚\n\n### commitRootImpl\n\ncommit é˜¶æ®µå®è´¨ä¸Šè¢«åˆ†ä¸ºå¦‚ä¸‹ä¸‰ä¸ªå­é˜¶æ®µï¼š\n\n-   before mutation\n-   mutation phase\n-   layout phase\n\nmutation é˜¶æ®µä¸»è¦åšçš„äº‹æƒ…æ˜¯éå† effect-list åˆ—è¡¨ï¼Œæ‹¿åˆ°æ¯ä¸€ä¸ª effect å­˜å‚¨çš„ä¿¡æ¯ï¼Œæ ¹æ®å‰¯ä½œç”¨ç±»å‹ effectTag æ‰§è¡Œç›¸åº”çš„å¤„ç†å¹¶æäº¤æ›´æ–°åˆ°çœŸæ­£çš„ DOMã€‚æ‰€æœ‰çš„ mutation effects éƒ½ä¼šåœ¨ layout phase é˜¶æ®µä¹‹å‰è¢«å¤„ç†ã€‚å½“è¯¥é˜¶æ®µæ‰§è¡Œç»“æŸæ—¶ï¼ŒworkInProgress æ ‘ä¼šè¢«æ›¿æ¢æˆ current æ ‘ã€‚å› æ­¤åœ¨ mutation phase é˜¶æ®µä¹‹å‰çš„å­é˜¶æ®µ before mutationï¼Œæ˜¯è°ƒç”¨ getSnapshotBeforeUpdate ç”Ÿå‘½å‘¨æœŸçš„åœ°æ–¹ã€‚åœ¨ before mutation è¿™ä¸ªé˜¶æ®µï¼ŒçœŸæ­£çš„ DOM è¿˜æ²¡æœ‰è¢«å˜æ›´ã€‚æœ€åä¸€ä¸ªå­é˜¶æ®µæ˜¯ layout phaseï¼Œåœ¨è¿™ä¸ªé˜¶æ®µç”Ÿå‘½å‘¨æœŸ componentDidMount/Update è¢«æ‰§è¡Œã€‚\n\n> æ–‡ä»¶ä½ç½®ï¼šreact-reconciler/src/ReactFiberWorkLoop.js\n\nå¦‚ä¸‹æ‰€ç¤ºï¼š\n\n```javascript\nfunction commitRootImpl(root) {\n    if (firstEffect !== null) {\n        // before mutation é˜¶æ®µï¼Œéå† effect list\n        do {\n            try {\n                commitBeforeMutationEffects();\n            } catch (error) {\n                nextEffect = nextEffect.nextEffect;\n            }\n        } while (nextEffect !== null);\n\n        // the mutation phase é˜¶æ®µï¼Œéå† effect list\n        nextEffect = firstEffect;\n        do {\n            try {\n                commitMutationEffects();\n            } catch (error) {\n                nextEffect = nextEffect.nextEffect;\n            }\n        } while (nextEffect !== null);\n\n        // å°† work-in-progress æ ‘æ›¿æ¢ä¸º current æ ‘\n        root.current = finishedWork;\n\n        // layout phase é˜¶æ®µï¼Œéå† effect list\n        nextEffect = firstEffect;\n        do {\n            try {\n                commitLayoutEffects(root, expirationTime);\n            } catch (error) {\n                captureCommitPhaseError(nextEffect, error);\n                nextEffect = nextEffect.nextEffect;\n            }\n        } while (nextEffect !== null);\n\n        nextEffect = null;\n    } else {\n        // No effects.\n        root.current = finishedWork;\n    }\n}\n```\n\n### commitBeforeMutationEffects\n\nbefore mutation è°ƒç”¨é“¾è·¯ï¼šcommitRootImpl -->Â Â commitBeforeMutationEffects -->Â commitBeforeMutationLifeCycles\n\nä»£ç å¦‚ä¸‹ï¼š\n\n```javascript\nfunction commitBeforeMutationLifeCycles(\n  current: Fiber | null,\n  finishedWork: Fiber,\n): void {\n  switch (finishedWork.tag) {\n    case FunctionComponent:\n    case ForwardRef:\n    case SimpleMemoComponent:\n    ...\n    // å±æ€§ stateNode è¡¨ç¤ºå¯¹åº”ç»„ä»¶çš„å®ä¾‹\n    // åœ¨è¿™é‡Œ class ç»„ä»¶å®ä¾‹æ‰§è¡Œ instance.getSnapshotBeforeUpdate()\n    case ClassComponent: {\n      if (finishedWork.effectTag & Snapshot) {\n        if (current !== null) {\n          const prevProps = current.memoizedProps;\n          const prevState = current.memoizedState;\n          const instance = finishedWork.stateNode;\n          const snapshot = instance.getSnapshotBeforeUpdate(\n            finishedWork.elementType === finishedWork.type\n              ? prevProps\n              : resolveDefaultProps(finishedWork.type, prevProps),\n            prevState,\n          );\n\n          instance.__reactInternalSnapshotBeforeUpdate = snapshot;\n        }\n      }\n      return;\n    }\n    case HostRoot:\n    case HostComponent:\n    case HostText:\n    case HostPortal:\n    case IncompleteClassComponent:\n      ...\n  }\n}\n```\n\n### commitMutationEffects\n\n> æ–‡ä»¶ä½ç½®ï¼šreact-reconciler/src/ReactFiberWorkLoop.js\n\nmutation phase é˜¶æ®µè°ƒç”¨é“¾è·¯ï¼š\ncommitRootImpl -->Â Â commitMutationEffects -->Â commitWork\n\nä»£ç å¦‚ä¸‹ï¼š\n\n```javascript\nfunction commitMutationEffects() {\n  while (nextEffect !== null) {\n    const effectTag = nextEffect.effectTag;\n\n    let primaryEffectTag = effectTag & (Placement | Update | Deletion);\n    switch (primaryEffectTag) {\n      case Placement:\n        ...\n      case PlacementAndUpdate:\n        ...\n      case Update: {\n        const current = nextEffect.alternate;\n        commitWork(current, nextEffect);\n        break;\n      }\n      case Deletion: {\n        commitDeletion(nextEffect);\n        break;\n      }\n    }\n  }\n}\n```\n\n### commitLayoutEffects\n\n> æ–‡ä»¶ä½ç½®ï¼šreact-reconciler/src/ReactFiberCommitWork.js\n\nlayout phase è°ƒç”¨é“¾è·¯ï¼šcommitRootImpl -->Â Â commitLayoutEffects -->Â commitLifeCycles\n\nä»£ç å¦‚ä¸‹ï¼š\n\n```javascript\nfunction commitLifeCycles(\n  finishedRoot: FiberRoot,\n  current: Fiber | null,\n  finishedWork: Fiber,\n  committedExpirationTime: ExpirationTime,\n): void {\n  switch (finishedWork.tag) {\n    case FunctionComponent:\n    case ForwardRef:\n    case SimpleMemoComponent:\n      ...\n    case ClassComponent: {\n      // å±æ€§ stateNode è¡¨ç¤ºå¯¹åº”ç»„ä»¶çš„å®ä¾‹\n      // åœ¨è¿™é‡Œ class ç»„ä»¶å®ä¾‹æ‰§è¡Œ componentDidMount/DidUpdate\n      const instance = finishedWork.stateNode;\n      if (finishedWork.effectTag & Update) {\n        // é¦–æ¬¡æ¸²æŸ“æ—¶ï¼Œè¿˜æ²¡æœ‰ current æ ‘\n        if (current === null) {\n          instance.componentDidMount();\n        } else {\n          const prevProps =\n            finishedWork.elementType === finishedWork.type\n              ? current.memoizedProps\n              : resolveDefaultProps(finishedWork.type, current.memoizedProps);\n          const prevState = current.memoizedState;\n          instance.componentDidUpdate(\n            prevProps,\n            prevState,\n            instance.__reactInternalSnapshotBeforeUpdate,\n          );\n        }\n      }\n      const updateQueue = finishedWork.updateQueue;\n      if (updateQueue !== null) {\n        commitUpdateQueue(\n          finishedWork,\n          updateQueue,\n          instance,\n          committedExpirationTime,\n        );\n      }\n      return;\n    }\n    case HostRoot:\n    case HostComponent:\n    case HostText:\n    case HostPortal:\n    case Profiler:\n    case SuspenseComponent:\n    case SuspenseListComponent:\n      ...\n  }\n}\n```\n\n## æ‰©å±•\n\nä»¥ä¸‹æ˜¯ä¸€äº›å…³äº Fiber çš„æ‰©å±•å†…å®¹ã€‚\n\n### è°ƒç”¨é“¾è·¯\n\nå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ ¹æ® React æºç ç»˜åˆ¶çš„è°ƒç”¨é“¾è·¯å›¾ï¼Œä¸»è¦ç½—åˆ—äº†ä¸€äº›æ¯”è¾ƒé‡è¦çš„å‡½æ•°æ–¹æ³•ï¼Œå¯ä½œä¸ºå¤§å®¶äº†è§£ Fiber çš„å‚è€ƒã€‚æºç è°ƒè¯•è¿‡ç¨‹å¯ä»¥æ‰¾åˆ°å¯¹åº”çš„å‡½æ•°æ–¹æ³•æ‰“æ–­ç‚¹ï¼Œä»¥äº†è§£å®é™…è¿è¡Œçš„è¿‡ç¨‹ï¼Œä¾¿äºæ›´å¥½æ¢³ç†å‡ºå„ä¸ªé€»è¾‘æ–¹æ³•ä¹‹é—´çš„å…³ç³»ã€‚\n\n![fiberè°ƒç”¨é“¾è·¯.jpg](https://p1.music.126.net/VU37zHp-6hAUfNaZbu3HRw==/109951165071751567.jpg)\n\n### requestIdleCallback\n\nä¹‹å‰æœ‰æ–‡ç« åœ¨æ€»ç»“ React Fiber çš„è°ƒåº¦åŸç†æ—¶æåˆ°ï¼Œå®¢æˆ·ç«¯çº¿ç¨‹æ‰§è¡Œä»»åŠ¡æ—¶ä¼šä»¥å¸§çš„å½¢å¼åˆ’åˆ†ï¼Œåœ¨ä¸¤ä¸ªæ‰§è¡Œå¸§ä¹‹é—´ï¼Œä¸»çº¿ç¨‹é€šå¸¸ä¼šæœ‰ä¸€å°æ®µç©ºé—²æ—¶é—´ï¼Œåœ¨è¿™ä¸ªç©ºé—²æœŸè§¦å‘ requestIdleCallback æ–¹æ³•ï¼Œèƒ½å¤Ÿæ‰§è¡Œä¸€äº›ä¼˜å…ˆçº§è¾ƒä½çš„ workã€‚\n\næ®è¯´åœ¨æ—©æœŸçš„ React ç‰ˆæœ¬ä¸Šç¡®å®æ˜¯è¿™ä¹ˆåšçš„ï¼Œä½†ä½¿ç”¨ requestIdleCallback å®é™…ä¸Šæœ‰ä¸€äº›é™åˆ¶ï¼Œæ‰§è¡Œé¢‘æ¬¡ä¸è¶³ï¼Œä»¥è‡´äºæ— æ³•å®ç°æµç•…çš„ UI æ¸²æŸ“ï¼Œæ‰©å±•æ€§å·®ã€‚å› æ­¤ React å›¢é˜Ÿæ”¾å¼ƒäº† requestIdleCallback ç”¨æ³•ï¼Œå®ç°äº†è‡ªå®šä¹‰çš„ç‰ˆæœ¬ã€‚æ¯”å¦‚ï¼Œåœ¨å‘å¸ƒ v16.10 ç‰ˆæœ¬ä¸­ï¼Œæ¨å‡ºå®éªŒæ€§çš„ Schedulerï¼Œå°è¯•ä½¿ç”¨ postMessage æ¥ä»£æ›¿ requestAnimationFrameã€‚æ›´å¤šäº†è§£å¯ä»¥æŸ¥çœ‹ React æºç  packages/scheduler éƒ¨åˆ†ã€‚\n\n## å°ç»“\n\nFiber ç”±æ¥å·²ä¹…ï¼Œå¯ä»¥è¯´æ˜¯ React è®¾è®¡æ€æƒ³çš„ä¸€ä¸ªå…¸å‹è¡¨ç°ã€‚ç›¸æ¯”ä¸šç•Œå…¶ä»–æµè¡Œåº“æ›´å¤šé‡‡ç”¨å½“æ–°æ•°æ®åˆ°è¾¾æ—¶å†è®¡ç®—æ¨¡å¼ï¼ŒReact åšæŒæ‹‰å–æ¨¡å¼ï¼Œå³èƒ½å¤ŸæŠŠè®¡ç®—èµ„æºå»¶è¿Ÿåˆ°å¿…è¦æ—¶å€™å†ç”¨ï¼Œå¹¶ä¸”å®ƒçŸ¥é“ï¼Œä»€ä¹ˆæ—¶å€™æ›´é€‚åˆæ‰§è¡Œï¼Œä»€ä¹ˆæ—¶å€™ä¸æ‰§è¡Œã€‚çœ‹èµ·æ¥è™½ç„¶åªæ˜¯å¾®å°çš„åŒºåˆ«ï¼Œå´æ„ä¹‰å¾ˆå¤§ã€‚éšç€åç»­å¼‚æ­¥æ¸²æŸ“èƒ½åŠ›ç­‰æ–°ç‰¹æ€§çš„æ¨å‡ºï¼Œæˆ‘ä»¬æœ‰ç†ç”±ç›¸ä¿¡ï¼Œåœ¨æœªæ¥ï¼ŒReact å°†ä¼šåœ¨äººæœºäº¤äº’çš„åº”ç”¨ä¸­ç»™æˆ‘ä»¬å¸¦æ¥æ›´å¤šçš„æƒŠå–œã€‚\n\n## å‚è€ƒ\n\n-   [react-fiber-architecture](https://github.com/acdlite/react-fiber-architecture)\n-   [In-depth explanation of state and props update in react](https://medium.com/react-in-depth/in-depth-explanation-of-state-and-props-update-in-react-51ab94563311)\n-   [in-depth overview of the new reconciliationÂ algorithm in react](https://medium.com/react-in-depth/inside-fiber-in-depth-overview-of-the-new-reconciliation-algorithm-in-react-e1c04700ef6e)\n-   [The how and why on Reactâ€™s usage of linked list in Fiber to walk the componentâ€™s tree](https://medium.com/react-in-depth/in-depth-explanation-of-state-and-props-update-in-react-51ab94563311)\n-   [Effect List â€”â€” åˆä¸€ä¸ª Fiber é“¾è¡¨çš„æ„å»ºè¿‡ç¨‹](https://www.bilibili.com/video/av48384879/)\n-   [js-ntqfill](https://stackblitz.com/edit/js-ntqfil?file=index.js)\n\n> æœ¬æ–‡å‘å¸ƒè‡ª [ç½‘æ˜“äº‘éŸ³ä¹å¤§å‰ç«¯å›¢é˜Ÿ](https://github.com/x-orpheus)ï¼Œæ–‡ç« æœªç»æˆæƒç¦æ­¢ä»»ä½•å½¢å¼çš„è½¬è½½ã€‚æˆ‘ä»¬å¸¸å¹´æ‹›æ”¶å‰ç«¯ã€iOSã€Androidï¼Œå¦‚æœä½ å‡†å¤‡æ¢å·¥ä½œï¼Œåˆæ°å¥½å–œæ¬¢äº‘éŸ³ä¹ï¼Œé‚£å°±åŠ å…¥æˆ‘ä»¬ grp.music-fe(at)corp.netease.comï¼\n", "user_name": "ç½‘æ˜“äº‘éŸ³ä¹å¤§å‰ç«¯å›¢é˜Ÿ", "description": "", "got_view_count": 229068, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "å‰ç«¯", "concern_user_count": 455667, "user_id": "395479919373991", "title": "ä¸€ä»½ä¼˜ç§€çš„å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆç®€å†æ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ", "mark_content": "![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7ce90573b81246ba9bfbc98bcbc01a13~tplv-k3u1fbpfcp-zoom-1.image)\nä½œè€…|æ²ˆç ¾æ·(ç£å†²)\n\nç¼–è¾‘|æ©™å­å›\n\nå‡ºå“|é˜¿é‡Œå·´å·´æ–°é›¶å”®æ·˜ç³»æŠ€æœ¯\n\nå®¶æ˜¯å¦æœ‰è¿™æ ·çš„å›°æƒ‘ï¼Ÿåœ¨å…¬å¸è·Ÿäº†å‡ ä¸ªé¡¹ç›®ï¼Œå¯èƒ½å°±æ˜¯ç»„é•¿è·Ÿæˆ‘ä»¬è¯´ä¸‹éœ€æ±‚ç„¶åå°±å¼€å§‹åŠ¨æ‰‹å†™é¡µé¢ï¼Œä¹Ÿä¸ç”¨è‡ªå·±é€‰å‹ï¼Œè„šæ‰‹æ¶ä¹Ÿæ˜¯ç°æˆçš„ï¼Œé™¤äº† Vue å°±æ˜¯æ‹¿Echartså†™è¿‡å›¾è¡¨éƒ½æ²¡ä»€ä¹ˆæŠ€æœ¯å«é‡ï¼Œç…§ç€æ–‡æ¡£å†™ï¼Œé‡åˆ°é—®é¢˜æŸ¥ä¸€ä¸‹å°±è§£å†³äº†ã€‚ä½†å†™ç®€å†æ—¶åˆè¦ä½“ç°å‡ºåœ¨é¡¹ç›®ä¸­çš„ä½œç”¨ã€‚æ€æ ·æ‰¾åˆ°åªå±äºè‡ªå·±çš„é‚£äº›äº®ç‚¹å‘¢ï¼Ÿ\n\n# ä½ è´Ÿè´£çš„ä¸šåŠ¡æ˜¯ä»€ä¹ˆï¼Ÿ(å­¦ä¼šå‘ç°é—®é¢˜)\n\næˆ‘æ¥è§¦è¿‡ä¸å°‘åŒå­¦ï¼Œæœ‰è¯´åœ¨å°å…¬å¸ï¼Œè¢«ä¸šåŠ¡éœ€æ±‚å‹ç€ã€‚æ—¢ç„¶å¤§å®¶éƒ½è¯´åœ¨åšä¸šåŠ¡ï¼Œé‚£ä¹ˆï¼Œæ­£çœ‹åˆ°è¿™é‡Œçš„ä½ ï¼Œèƒ½ä¸èƒ½5åˆ†é’Ÿè¯´æ˜ç™½ï¼Œä½ è´Ÿè´£çš„ä¸šåŠ¡æ˜¯ä»€ä¹ˆï¼Ÿ\n\nè¿™ä¸ªé—®é¢˜æˆ‘åœ¨æ´»åŠ¨ç¾¤çš„ github issue æ´»åŠ¨ä¸­ï¼Œå¸¦æœ‰ä¸šåŠ¡ç†è§£æ ‡ç­¾çš„é¢˜ç›®é‡Œç»å¸¸ä¼šé—®åˆ°ï¼Œå¯æ˜¯å¤§éƒ¨åˆ†åŒå­¦éƒ½æ²¡æœ‰è¯´åˆ°ä½ï¼Œç”šè‡³ç­”éæ‰€é—®ã€‚\n\nè¿™é‡Œè°ˆè°ˆæˆ‘ä¸ªäººå¯¹ä¸šåŠ¡çš„ç†è§£ï¼Œæˆ–è®¸æ²¡æœ‰æ™®éæ„ä¹‰ï¼Œæ‰€ä»¥ä»…ä¾›å‚è€ƒã€‚\n\n\n## ä¸šåŠ¡æœ€æ ¸å¿ƒçš„è¦ç´ æ˜¯ä¸šåŠ¡æœ¬èº«çš„ä»·å€¼\n\nä¸€å®¶å…¬å¸ï¼Œæˆ–è€…ä¸€ä¸ªéƒ¨é—¨ï¼Œåšçš„äº‹æƒ…æœ‰è®¸è®¸å¤šå¤šï¼Œé›¶é›¶æ•£æ•£ã€‚ä¹Ÿæœ‰å¾ˆå¤šäº‹æƒ…åˆåˆ°ä¸€èµ·ï¼Œä¿ƒæˆäº†ä¸€ä»¶å¤§äº‹çš„æ—¶å€™ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬æ˜¯æŠŠé‚£äº›é›¶æ•£çš„äº‹æƒ…éƒ½çœ‹æˆä¸šåŠ¡ï¼Ÿè¿˜æ˜¯åªæŠŠé‚£ä¸€ä»¶å¤§äº‹çœ‹æˆä¸šåŠ¡å‘¢ï¼Ÿæˆ‘è®¤ä¸ºéƒ½å¯ä»¥ã€‚å†³å®šæƒåœ¨äºè¿™ä»¶äº‹æ˜¯å¦é€»è¾‘è‡ªæ´½ï¼Œä»¥åŠæ˜¯å¦å…·æœ‰ç‹¬ç‰¹çš„ä»·å€¼ã€‚\n\næ¥ä¸‹æ¥è®©æˆ‘ä»¬æ‹¿ç€ä¸€ä¸ªä¾‹å­æ¥è¯´ï¼Œå‡è®¾ä½ åœ¨å¼€å‘ä¸€ä¸ªè¥é”€æ´»åŠ¨é¡µï¼Œè¿™ä¸ªé¡µé¢èƒ½å¤Ÿç»™å…¬å¸å¸¦æ¥3000äººçš„æ–°ç”¨æˆ·ï¼Œè¿™äº›äººæœ‰å¯èƒ½ä¼šè´­ä¹°å…¬å¸çš„äº§å“ï¼Œä»è€Œå¸¦æ¥æ”¶å…¥ã€‚\n\nè¿™é‡Œæ˜æ˜¾å¯ä»¥æ„Ÿå—åˆ°ï¼Œè¥é”€æ˜¯ä¸€ä¸ªä¸šåŠ¡çº¿ï¼Œä»–çš„å•†ä¸šé€»è¾‘æ˜¯æŠ•æ”¾é¡µé¢ -> æ‹‰æ–°å›æµ -> å•†å“é”€å”®ï¼Œä»·å€¼åœ¨äºæ–°ç”¨æˆ·çš„è§¦è¾¾ï¼Œä»¥åŠå•†å“é”€å”®åˆ©ç›Šã€‚åŸºäºè¿™ä¸¤ç‚¹ï¼Œæˆ‘ä»¬å°±å€¼å¾—æŠ•å…¥ç²¾åŠ›ï¼Œå› ä¸ºåšçš„è¶Šå¥½ï¼Œå…¬å¸ä¸šç»©è¶Šå¥½ã€‚\n\n## é‚£ä¹ˆï¼Œåšä¸ªé¡µé¢å°±æ˜¯äº®ç‚¹äº†ï¼Ÿ\n\nå½“ç„¶ä¸æ˜¯ï¼Œä½†æ˜¯äº®ç‚¹å·²ç»ç¦»æˆ‘ä»¬å¾ˆè¿‘äº†ã€‚å¦‚æœä½ æƒ³è¦æœ‰äº®ç‚¹ï¼Œé‚£ä½ éœ€è¦ä¿æŒæ€è€ƒã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æœ‰è®¸å¤šå¯ä»¥ä¼˜åŒ–å’ŒéªŒè¯çš„äº‹æƒ…ã€‚\n\n1ã€è¥é”€é¡µæ¯å¤©æ¢å†…å®¹ï¼Œæ€ä¹ˆå¿«é€Ÿæ›¿æ¢ï¼Ÿ\n\n2ã€è¥é”€éƒ¨é—¨äººè¶Šæ¥è¶Šå¤šäº†ï¼Œé¡µé¢æ¯å¤©è¦10ä¸ªï¼Œä¸€ä¸ªäººæ€ä¹ˆåšå¾—å®Œï¼Ÿ\n\n3ã€å‰ç«¯çš„äººä¹Ÿè¶Šæ¥è¶Šå¤šäº†ï¼Œæ”¹ä¸ªç»„ä»¶ä¸èƒ½åªé å¤åˆ¶é»è´´ï¼Œæ€ä¹ˆç®¡ç†ï¼Ÿ\n\n4ã€æ‹‰æ–°å›æµæ•ˆç‡å…·ä½“æœ‰å¤šé«˜ï¼Ÿæ–°äººçœŸçš„æœ‰ä¹°æˆ‘ä»¬çš„å•†å“å—ï¼Ÿè¿™ä¹ˆå¤šäººæŠ•å…¥ï¼Œéƒ½æ˜¯è¦å·¥èµ„çš„ï¼Œå–å‡ºå»çš„å•†å“èƒ½å¤Ÿå‘æˆ‘ä»¬çš„å·¥èµ„å—ï¼Ÿ\n\n5ã€è½¬åŒ–ç‡ä½äº†ï¼Œæ€ä¹ˆæ‰èƒ½æå‡ï¼Ÿ\n\n6ã€è¿™ä¸ªæŒ‰é’®å†™é”™ä¸ªæ ·å¼åˆ°äº†å³è¾¹ï¼Œå±…ç„¶ç‚¹çš„äººç‰¹åˆ«å¤šï¼Ÿé‚£ä¸‹æ¬¡æ˜¯ä¸æ˜¯éƒ½åº”è¯¥æ”¾å³è¾¹ï¼Ÿ\n\nä¸Šé¢åˆ—ä¸¾çš„å‡ ä¸ªé—®é¢˜ï¼Œä¼°è®¡å¾ˆå¤šåŒå­¦æ—¥å¸¸éƒ½æœ‰åšç±»ä¼¼çš„äº‹æƒ…ã€‚ä½†é—®é¢˜æ˜¯ï¼Œè¿™äº›äº‹æƒ…æ˜¯ä½ æƒ³åšçš„ï¼Œè¿˜æ˜¯äº§å“è®©ä½ åšçš„ï¼Ÿè¿™äº›äº‹æƒ…èƒ½è¯ç”Ÿä»€ä¹ˆå‡ºæ¥å‘¢ï¼Ÿ\n\n1ã€è¿è¥é…ç½®åå°ä¸æŠ•æ”¾ç­–ç•¥\n\n2ã€è¥é”€æ­å»ºä½“ç³»\n\n3ã€å·¥ç¨‹åŒ–ç ”å‘å¥—ä»¶\n\n4ã€ä¸šåŠ¡åŸ‹ç‚¹ä¸æ•°æ®åˆ†æç³»ç»Ÿ\n\n5ã€æ•°æ®ä»“åº“ä¸æ•°æ®åˆ†æåå°\n\n6ã€A/B testç³»ç»Ÿ\n\nè‡³å°‘åœ¨æˆ‘çœ‹æ¥ï¼Œå¦‚æœé¢è¯•çš„åŒå­¦ä¸Šæ¥è‡ªæˆ‘ä»‹ç»çš„æ—¶å€™ï¼Œèƒ½å¤Ÿè®²ä¸€ä¸‹ä¸Šé¢ä¾‹å­ä¸­é‡åˆ°çš„é—®é¢˜ï¼Œä¹‹åå†è¯´åšäº†ä¸‹é¢å¯¹åº”çš„æŸä¸€ä¸ªç³»ç»Ÿï¼Œé‚£ä¹ˆï¼Œè¿™å°±æ˜¯ç»å¯¹å¤Ÿåˆ†é‡çš„äº®ç‚¹ã€‚åªå¯æƒœè¿™æ ·çš„åŒå­¦å°‘ä¹‹åˆå°‘ï¼Œå¤§éƒ¨åˆ†åŒå­¦æ˜¯å› ä¸ºäº§å“è¯´è¦åšå°±å»åšäº†ã€‚\n\næ‰€ä»¥ï¼Œä½ çœŸçš„æƒ³è¿‡ä¸šåŠ¡æ˜¯ä»€ä¹ˆå—ï¼Ÿæœ‰ä¸ºä¸šåŠ¡æƒ³è¿‡ä»€ä¹ˆå—ï¼Ÿæœ‰äº†ä½ ï¼Œä¸šåŠ¡æœ‰ä»€ä¹ˆä¸åŒå—ï¼Ÿ\n\n\n# å¯ä»¥å¼€å§‹å†™ä»£ç äº†ï¼Ÿ(å­¦ä¼šæ€è€ƒçš„æ–¹å¼)\n\n\nå¥½äº†ï¼Œå‡è®¾æˆ‘ä»¬æ€è€ƒäº†ä¸€ä¸‹ï¼Œæƒ³äº†ç‚¹ä¸œè¥¿å‡ºæ¥ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥å¼€å§‹å†™ä»£ç äº†.....å—ï¼Ÿ\n\n\nåšä¸€ä¸ªæœ‰äº®ç‚¹çš„æŠ€æœ¯äº§å‡ºï¼Œå¯ä¸æ˜¯æ’¸èµ·è¢–å­å°±èƒ½å¿«é€Ÿå¹²å‡ºæ¥çš„ï¼Œå½“ç„¶ï¼Œå¦‚æœä½ æ˜¯ä¸ªå¤©æ‰ï¼Œé‚£è¯·è‡ªä¾¿ã€‚å¦‚æœå’Œæˆ‘ä¸€æ ·æ˜¯æ™®é€šäººï¼Œé‚£ä¹ˆè¯·å…ˆåšå¥½æŠ€æœ¯æ–¹æ¡ˆè®¾è®¡ã€‚è€Œè®¾è®¡çš„ç¬¬ä¸€æ­¥ï¼Œå°±æ˜¯åšä¸€ä¸ªpptå·¥ç¨‹å¸ˆï¼Œç”»å›¾ã€‚\n\n\n## å›¾ï¼Œæ˜¯æ€æƒ³çš„ç»“æ™¶\n\nåœ¨ä¸Šé¢æåˆ°è¿‡çš„github issueæ´»åŠ¨é‡Œï¼Œå¤§éƒ¨åˆ†åŒå­¦çš„ä¸šåŠ¡å¤§å›¾æˆ–è€…æŠ€æœ¯æ¶æ„å›¾ï¼Œéƒ½æ²¡æ³•è¯´æ˜ç™½å…ˆè¡¨è¾¾çš„æ„æ€ã€‚\n\nå‡ ä¸ªæœ€å…¸å‹çš„é—®é¢˜æ˜¯ï¼š\n\n\n**1ã€æ€è·¯æ··ä¹±ï¼š** ä¸‹é¢å‡ ä¸ªæ¡†åœ¨å†™ä¸šåŠ¡çš„ç³»ç»Ÿï¼Œä¸Šé¢ç”»äº†ä¸€ä¸ªvueæˆ–è€…webpackçš„æ¡†ã€‚\n\n**2ã€å±‚çº§æ··ä¹±ï¼š** åº•å±‚å†™çš„æ˜¯nativeå®¹å™¨ï¼Œä¸Šå±‚ç”»äº†ä¸ªapi gatewayã€‚\n\n**3ã€ç­”éæ‰€é—®ï¼š** è¦æ±‚ç”»ä¸šåŠ¡å¤§å›¾ï¼Œç»“æœç”»äº†ä¸€å †å‰ç«¯è„šæ‰‹æ¶çš„å…³é”®å­—ï¼Œæˆ–è€…ç”»æˆäº†æµç¨‹å›¾ã€‚\n\nå¦‚æœçœ‹åˆ°è¿™é‡Œï¼Œä¸æ˜ç™½ç”»å›¾æ˜¯å¹²ä»€ä¹ˆçš„åŒå­¦ï¼Œå¯ä»¥å»æŸ¥ä¸€ä¸‹æ¶æ„å›¾æ˜¯ä»€ä¹ˆï¼Œä»¥åŠå¦‚ä½•åšç¨‹åºè®¾è®¡ã€‚è¿™ç»å¸¸æ˜¯è¢«å¤§å®¶å¿½ç•¥çš„äº‹æƒ…ï¼Œè™½ç„¶å¾ˆå¤šåŒå­¦åœ¨å¤§å­¦é‡Œå­¦ä¹ çš„æ—¶å€™ï¼Œéƒ½å­¦è¿‡ç›¸å…³çš„è¯¾ç¨‹ï¼Œä½†æ˜¯ä¼°è®¡å¤§éƒ¨åˆ†éƒ½è¿˜å›å»äº†ã€‚\n\n\n\n## æ€ä¹ˆç”»å¥½ä¸€å¼ å›¾ï¼Ÿ\n\nè¿™é‡Œä¸åšå…·ä½“çš„å±•å¼€ï¼Œæ¯•ç«Ÿæˆ‘è‡ªå·±ä¹Ÿä¸æ˜¯ç”»å›¾é«˜æ‰‹ï¼Œæ¯æ¬¡ç”»å›¾ä¹Ÿæ˜¯è¿Ÿè¿Ÿä¸çŸ¥å¦‚ä½•ä¸‹ç¬”ã€‚åªç»™åˆ°å‡ ä¸ªå»ºè®®ï¼Œä¾›å¤§å®¶å‚è€ƒã€‚\n\nåŒæ—¶ï¼Œä»¥ä¸€ä¸ªæ¨¡æ‹Ÿé¢è¯•åŒå­¦çš„æ¡ˆä¾‹æ¥åšå‚è€ƒã€‚\n\nåŸå›¾ï¼š\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ac5c272f65024ddfbd70206363da44b8~tplv-k3u1fbpfcp-zoom-1.image)\n\n\n**ç¬¬ä¸€æ­¥ï¼Œå…ˆæƒ³æ˜ç™½è¿™å¼ å›¾è¦è¡¨è¾¾ä»€ä¹ˆï¼Ÿ**\n\n\nè¿™ä½åŒå­¦è¯´ä»–å‚åŠ è¿‡å¾ˆå¤šæŠ€æœ¯ä¼šè®®ï¼Œçœ‹é‚£äº›åˆ†äº«çš„ppté‡Œé¢çš„å¤§å›¾ï¼Œéƒ½å¾ˆé…·ç‚«ï¼Œè‡ªå·±å¹³æ—¶ä¹Ÿæœ‰æ€»ç»“(è¿™ç‚¹éå¸¸å¥½)ï¼Œä½†æ˜¯æ€»ç”»ä¸å‡ºé‚£ç§å›¾æ¥ã€‚é¢è¯•è¿‡ç¨‹ä¸­æˆ‘é—®äº†è¿™ä½åŒå­¦ï¼Œè¿™å¼ å›¾ä»–æƒ³è¡¨è¾¾ä»€ä¹ˆï¼Œç­”æ¡ˆæ˜¯ä»–æƒ³è¯´æ˜ç™½æ¶ˆæ¯é€šä¿¡ä¸šåŠ¡çš„æŠ€æœ¯æ–¹æ¡ˆã€‚ä½†æ˜¯ï¼Œè¿™å¼ å›¾å¹¶ä¸èƒ½è¡¨è¾¾å‡ºä¸€ä¸ªæŠ€æœ¯æ–¹æ¡ˆæ¥ã€‚\n\n\n\nè¿™å¼ å›¾ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯ä¸å¤Ÿå®Œæ•´ï¼Œä»–åªæœ‰ä¸€æ¡ä¸»é“¾è·¯ï¼Œå¯¹äºIMè¿™æ ·çš„å¤æ‚æŠ€æœ¯äº§å“ï¼Œä¸»é“¾è·¯åªæ˜¯å†°å±±ä¸€è§’ï¼Œå¦‚æœçœŸçš„åªåšäº†ä¸»é“¾è·¯ï¼Œé‚£ä¹ˆä»£è¡¨æ€è€ƒä¸å¤Ÿï¼Œæ—©æ™šä¼šå‡ºç°çº¿ä¸Šæ•…éšœã€‚\n\n\n\nç¬¬äºŒä¸ªé—®é¢˜åœ¨äºå«ä¹‰ä¸æ˜ä¸å±‚æ¬¡æ··ä¹±ã€‚æœ€ä¸‹é¢çš„UIå±‚æœ‰ä¸ªç®­å¤´æŒ‡å‘å­˜å‚¨å±‚ï¼Œé‚£æ˜¯æŒ‡æ¸²æŸ“è¿›ç¨‹ä¼šå»è°ƒç”¨localStorageï¼Ÿé‚£å†å‘ä¸Š2çº§çš„ç½‘å…³å±‚å‘¢ï¼ŸUIå±‚ä¼šè°ƒç”¨ç½‘å…³å±‚ï¼Ÿè¿™é‡Œæ˜¾ç„¶é€»è¾‘æ˜¯ä¸é€šé¡ºçš„ã€‚\n\n\n\n**ç¬¬äºŒæ­¥ï¼Œå›¾é‡Œçš„æ¯ä¸€ä¸ªå¤§å—å¿…é¡»æ˜¯åŒä¸€ä¸ªé¢†åŸŸæˆ–ç±»ä¼¼æ¦‚å¿µçš„ï¼Œæ¯ä¸€ä¸ªæ¡†éƒ½æœ‰æ„ä¹‰**\n\n\nåœ¨è¿™ä¸ªé—®é¢˜ä¸Šï¼Œè¿™ä½åŒå­¦åšçš„è¿˜æ˜¯å¾ˆå¥½çš„ï¼Œä½†ä¹Ÿè¿˜æ˜¯æœ‰äº›å°é—®é¢˜ï¼Œæ¯”å¦‚UIå±‚é‡Œçš„ä¸¤ä¸ªè¿›ç¨‹ã€‚è¿™ä¸¤ä¸ªæ¡†æ˜¾å¾—æ„ä¹‰ä¸æ˜ï¼Œåœ¨æ²¡æœ‰æè¿°çš„æƒ…å†µä¸‹ï¼Œè‡³å°‘æˆ‘æ˜¯ä¸æ˜ç™½ä»–æƒ³è¡¨è¾¾çš„æ„æ€ï¼Œè€Œå®é™…åœ¨æ²Ÿé€šè¿‡ç¨‹ä¸­ï¼Œä»–ä¹Ÿè§‰å¾—è¿™é‡ŒæŒºå¥‡æ€ªçš„ã€‚\n\n\n\n**ç¬¬ä¸‰æ­¥ï¼Œç”»å®Œå›é¡¾ä¸€ä¸‹æ˜¯å¦æè¿°æ¸…æ¥šäº†ç¬¬ä¸€æ­¥é‡Œçš„æ ¸å¿ƒé€»è¾‘**\n\n\nå¾ˆå¤šæ—¶å€™æˆ‘ä»¬ä¸€æ°”å‘µæˆç”»äº†ä¸€å¼ å¤§å›¾ï¼Œç»“æœä¸€ä¸å°å¿ƒå®¹æ˜“ç”»æˆä¸€å¼ æµç¨‹å›¾ï¼ŒæŠŠæ€ä¹ˆå†™ä»£ç çš„æ€è·¯ä¹Ÿç”»åˆ°å›¾ä¸Šäº†ã€‚è¿™å°±ä¼šå¯¼è‡´å›¾ä¸Šæœ‰äº›åœ°æ–¹æ˜¯æ¨¡å—åˆ’åˆ†ï¼Œè€Œæœ‰äº›åœ°æ–¹åˆ™æ˜¯ç»†èŠ‚æµç¨‹ï¼Œæ•´ä½“å°±å¾ˆå¤±è°ƒã€‚è¿™åªèƒ½é€šè¿‡åå¤çš„å›é¡¾å’Œæ€è€ƒï¼Œè¿›è¡Œè‡ªæˆ‘è°ƒæ•´äº†ã€‚\n\n\n\næœ€åï¼Œæˆ‘ç»™å‡ºå½“æ—¶æ¨¡æ‹Ÿé¢è¯•æ—¶ï¼Œå¯¹äºè¿™ä¸ªä¸šåŠ¡çš„ç²—ç•¥è®¾æƒ³ï¼š\n\n\n![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b8cdcaf772bd467fb48bf3bb55a046f1~tplv-k3u1fbpfcp-zoom-1.image)\n\n\n\n\n# çŸ¥é“åŸç†æœ‰ä»€ä¹ˆç”¨ï¼Ÿ(æŠ€æœ¯å¦‚ä½•èµ‹èƒ½)\n\n\næœ‰äº†å¤§å›¾ï¼Œæˆ‘ä»¬ç»ˆäºå¯ä»¥å¼€å§‹å®ç°äº®ç‚¹äº†......å—ï¼Ÿ\n\n\nç°å®å¾ˆæ®‹é…·ï¼Œå“ªæ€•æˆ‘ä»¬æƒ³å‡ºäº†ä¸€ä¸ªå¤§é¥¼ï¼Œå¹¶ä¸ä»£è¡¨æˆ‘ä»¬èƒ½åƒåˆ°å˜´é‡Œï¼Œä»å›¾å˜æˆé¢é¥¼ï¼Œæˆ‘ä»¬éœ€è¦å¤ªå¤šçš„ä¸­é—´æ­¥éª¤ã€‚\n\n\n\nè€Œæ‘†åœ¨æŠ€æœ¯äººé¢å‰çš„é—®é¢˜æ˜¯ï¼šå¦‚æœæœ‰é¢ç²‰äº†ï¼Œä½ ä¼šæ‰é¢å—ï¼Ÿä½ æ‰é¢çš„æŠ€æœ¯èƒ½ä¿è¯çƒ¤å‡ºæ¥çš„é¥¼å¥½åƒå—ï¼Ÿ\n\n\n\n## çŸ¥å…¶ç„¶ï¼Œè€Œåä½¿å…¶ç„¶\n\n\næˆ‘è®¤ä¸ºè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦äº†è§£åŸç†ã€‚æ›¾ç»æœ‰ä¸€ä½æ¨¡æ‹Ÿé¢è¯•çš„åŒå­¦ï¼Œåœ¨æœ€åäº’é—®äº’ç­”çš„æ—¶å€™é—®äº†æˆ‘ä¸€ä¸ªé—®é¢˜ï¼Œæ€ä¹ˆçœ‹å¾…é¢è¯•é€ ç«ç®­ï¼Œå¹³æ—¶æ‹§èºä¸ï¼Ÿæˆ‘è§‰å¾—æœ‰ç‚¹å†¤æ‰ï¼Œå› ä¸ºä¸€é¢å¤§éƒ¨åˆ†é—®çš„éƒ½æ˜¯æ€ä¹ˆæ‹§èºä¸ï¼Œä»¥åŠèºä¸çš„å‹å·ï¼ŒäºŒé¢å¼€å§‹ä¹Ÿå°±é—®é—®æ€ä¹ˆé€ é£æœºï¼Œä½†æ˜¯çœŸçš„è¿›å…¥å·¥ä½œçŠ¶æ€ï¼Œé˜¿é‡Œçš„åœºæ™¯é‡Œï¼Œè‡³å°‘åœ¨æˆ‘ä»¬å›¢é˜Ÿçš„åœºæ™¯é‡Œï¼Œæˆ‘ä»¬å°±æ˜¯åœ¨é€ ç«ç®­ï¼Œåªæ˜¯é€ ç«ç®­çš„æ—¶å€™å¿…é¡»è¦æ‹§æ‹§èºä¸ï¼Œæ²¡èºä¸ä½ æ•¢ä¸Šï¼Ÿ\n\n\n\næœ‰åŒå­¦åˆä¸æœäº†ï¼Œæˆ‘ä¼šæ‹§èºä¸ï¼Œå’Œæˆ‘éœ€è¦çŸ¥é“ç”¨ä»€ä¹ˆèºä¸æœ‰ä»€ä¹ˆå…³ç³»ã€‚é‚£ä¹ˆä¸Šé¢é‚£ä¸ªçƒ¤é¥¼ï¼Œä½ èƒ½å‘Šè¯‰æˆ‘æ”¾ç™½èŠéº»å¥½åƒè¿˜æ˜¯æ”¾é»‘èŠéº»å¥½åƒå—ï¼Ÿæˆ‘ç›¸ä¿¡å¤§å¨ä¸€å®šèƒ½å›ç­”ä¸Šæ¥ï¼Œä»–ç”šè‡³è¿å°éº¦åŸäº§åœ°éƒ½ä¼šå’Œä½ æ°æ‰¯ä¸€ä¸‹ã€‚ä¸ºä»€ä¹ˆåˆ°äº†åŒæ ·éœ€è¦åŒ å¿ƒçš„ç¼–ç é¢†åŸŸï¼Œæˆ‘ä»¬å°±ä¸ç”¨å…³å¿ƒç”¨ä»€ä¹ˆèºä¸äº†å‘¢ï¼Ÿ\n\n\n\nå½“æ—¶æˆ‘ç»™è¿™ä¸ªåŒå­¦ä¸¾äº†ä¸ªå®é™…çš„ä¾‹å­ï¼šç®€å†ä¸­æœ‰æåˆ°ä¸Šä¼ ï¼Œé‚£ä½ èƒ½ä¸èƒ½å½“åœºå‘Šè¯‰æˆ‘ï¼Œè¿™ä¸ªä¸Šä¼ æ˜¯æœåŠ¡ç«¯httpæ¥å£é…åˆä½ ä¸Šä¼ ï¼Œè¿˜æ˜¯ç”¨é˜¿é‡Œäº‘ossï¼Ÿç”¨ossæ˜¯æœåŠ¡ç«¯æ¯æ¬¡åŠ ç­¾ï¼Œè¿˜æ˜¯ç”¨stsï¼Œè¿˜æ˜¯å‰ç«¯ç›´æ¥åŠ ç­¾ï¼Ÿhttpä¸Šä¼ ä½ ç”¨ä»€ä¹ˆcontentTypeï¼Ÿç”¨formè¡¨å•ç»„ä»¶æäº¤è¿˜æ˜¯è‡ªå·±é€šè¿‡xhrå‘é€ï¼Ÿå¦‚æœéœ€è¦ç™»å½•é‰´æƒæ€ä¹ˆåŠï¼Ÿå¦‚æœå‡ºç°è·¨åŸŸé—®é¢˜æ€ä¹ˆåŠï¼Ÿä¸¤ç§åœºæ™¯éƒ½æœ‰ï¼Œéƒ½è¦å®ç°ï¼Œæ€ä¹ˆå°è£…ç»„ä»¶ï¼Ÿ\n\n\n\nä»€ä¹ˆï¼Ÿä½ è¯´ä½ è¦ç™¾åº¦ä¸€ä¸‹ï¼Ÿä½ è¦ç™¾åº¦ä¸€å¤©ï¼Ÿé‚£æˆ‘ä¸ºä»€ä¹ˆä¸è˜ç”¨é‚£ä¸ªä¸ç”¨ç™¾åº¦çš„äººå‘¢ï¼Ÿä¸€å¤©çš„å·¥èµ„ç®—ä¸Š5é‡‘è¿™äº›æˆæœ¬ï¼Œæœˆè–ª20kæ¥ç®—ï¼Œä¼°è®¡ä¹Ÿå¾—æœ‰å°2000äº†ï¼Œå¦‚æœæˆ‘æŠŠè¿™2000å¢åŠ åˆ°ä¸€ä¸ªæ‡‚åŸç†çš„å¤§ç¥æ‰‹é‡Œï¼Œæˆ‘ä»¬å²‚ä¸æ˜¯åŒèµ¢ï¼Œä¸ºä»€ä¹ˆè¦ç­‰ä½ å»æœç´¢å‘¢ï¼Ÿåªæ˜¯ä¸ªç®€å•çš„ä¸Šä¼ æ–‡ä»¶åŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯é¡µé¢é‡Œçš„ä¸€ä¸ªè±†è…å—ï¼Œè¿™ä¹ˆå°çš„èºä¸ï¼Œé‡Œé¢å´æœ‰å¤§å¤§çš„å­¦é—®ã€‚è€Œæ—¥å¸¸å·¥ä½œä¸­æˆ‘ä»¬é‡åˆ°ç±»ä¼¼çš„é—®é¢˜æœ‰éå¸¸å¤šï¼Œå…·ä½“å¯ä»¥å‚è€ƒæˆ‘ä¸Šä¸€ç¯‡æ–‡ç« çš„è§£è¯»ï¼Œè¿™é‡Œå°±ä¸é‡å¤äº†ã€‚\n\n\n\n## ä»»åŠ¡çš„æ‹†è§£\n\n\nå¯¹äºå¹³æ—¶æ„¿æ„å­¦ä¹ çš„åŒå­¦ï¼Œåˆ°è¿™ä¸€æ­¥å¯èƒ½å¼€å§‹é™·å…¥è¿·èŒ«äº†ï¼Œæˆ‘ä¹‹å‰ä¹Ÿé‡åˆ°è¿‡ç±»ä¼¼çš„å›°æƒ‘ï¼Œé‚£å°±æ˜¯ï¼šè¦ä¸è¦é€ è½®å­\n\n\n\næˆ‘ä»¬ç»å¸¸ä¼šå‘ç°å¥½åƒä»€ä¹ˆéƒ½èƒ½åšï¼Œæ¯”å¦‚ï¼šä½ æœ‰çš„ï¼Œæˆ‘æ”¹æ”¹ä¹Ÿèƒ½å®ç°ï¼›ç¤¾åŒºæœ‰ä¸ªå·®ä¸å¤šèƒ½ç”¨çš„ï¼Œè¦ä¸è¦ç›´æ¥ç”¨ï¼›å¥½åƒå¤§å›¾ä¸Šéƒ½æœ‰å·®ä¸å¤šçš„ï¼Œé‚£æ˜¯ä¸æ˜¯æ‹¼æ‹¼å‡‘å‡‘å°±å¯ä»¥äº†ï¼Œè¿™ä¸ªæ–¹æ¡ˆæ˜¯ä¸æ˜¯æ²¡ä»€ä¹ˆå¥½åšçš„äº†ã€‚\n\n\n\nä»æˆ‘ä¸ªäººæ¥è¯´ï¼Œæ¯æ¬¡ç”»å›¾æˆ‘éƒ½ä¼šé™·å…¥è¿™æ ·çš„æ€è€ƒï¼Œè¿˜å¸¸å¸¸ä¼šé’»ç‰›è§’å°–ï¼Œä¸ºäº†æ•´ç‚¹å·®å¼‚åŒ–ï¼Œæ•…æ„æ¢ä¸€äº›æ€è·¯å»åšï¼Œè¿™æ ·èƒ½ä¿è¯è¿™ä¸ªé¥¼æ˜¯æˆ‘çš„ã€‚ä½†æœ€åæˆ‘éƒ½ä¼šç»•å‡ºæ¥ï¼Œè¿™å¾—ç›Šäºä¸Šé¢ç”»å›¾çš„ç¬¬ä¸‰æ­¥ï¼Œæ¯æ¬¡ç”»å®Œæˆ‘éƒ½ä¼šé‡æ–°å›é¡¾ä¸€ä¸‹æˆ‘çœŸæ­£æƒ³åšçš„äº‹æƒ…æ˜¯ä»€ä¹ˆã€‚æˆ‘è®¤ä¸ºè¿™ä¹Ÿæ˜¯æ˜¯å¦é€ è½®å­çš„ä¸€ä¸ªè¯„åˆ¤æ ‡å‡†ï¼šä»ä¸šåŠ¡çš„ä»·å€¼å‡ºå‘ï¼Œæ€è€ƒçœŸæ­£æ ¸å¿ƒçš„ç›®æ ‡ï¼Œå¹¶ä¸”ä¸ºä¹‹åŠªåŠ›ï¼Œå¦‚æœæœ‰ç°æˆçš„è½®å­ï¼Œèƒ½æ»¡è¶³ä¸šåŠ¡æ ¸å¿ƒè¯‰æ±‚ï¼Œé‚£å°±æ”¾æ‰‹å»ç”¨ã€‚\n\n\n\né¦–å…ˆï¼Œç°å®å¾€å¾€æ˜¯è¿™æ ·çš„ï¼Œå½“æˆ‘ä»¬æ”¾æ‰‹å»ç”¨çš„æ—¶å€™ï¼Œä¼šå‘ç°è¿™ä¸ªè½®å­å¥½åƒä¸é‚£ä¹ˆå¥½ç”¨ï¼Œæˆ–è€…è¿™ä¸ªè½®å­æ²¡äººç»´æŠ¤äº†ï¼Œåˆæˆ–è€…ä¸šåŠ¡å˜åŒ–å¤ªå¿«ï¼Œè½®å­è‡ªå·±è§‰å¾—é¡¶ä¸ä½äº†ã€‚æœºä¼šè‡ªç„¶ä¼šæ¥åˆ°èº«è¾¹ï¼Œè€Œè§¦å‘è¿™äº›æœºä¼šçš„ï¼Œæ˜¯æˆ‘ä»¬ä¸æ–­çš„ç«™åœ¨ä¸šåŠ¡çš„è§†è§’å»æ€è€ƒé—®é¢˜ï¼Œä¸šåŠ¡çš„å˜åŒ–ä¸€å®šæ¯”ä¸€ä¸ªå¹³å°åŒ–çš„è½®å­è¦æ¥å¾—å¿«ã€‚\n\n\n\nå…¶æ¬¡ï¼ŒçœŸæ­£æ ¸å¿ƒçš„ç³»ç»Ÿä¸€å®šæ˜¯ç´§è´´ä¸šåŠ¡ï¼Œè€Œä¸”å¾ˆéš¾å¤§èŒƒå›´å¤ç”¨çš„ï¼Œå¥½çš„æŠ€æœ¯æ¶æ„åœ¨è®¾è®¡çš„æ—¶å€™ï¼Œè®²ç©¶çš„æ˜¯å¤Ÿç”¨å³å¯ï¼Œè¿‡åº¦è®¾è®¡å¤§éƒ¨åˆ†å°±æ˜¯æ²¡ç”¨çš„è®¾è®¡ã€‚åœ¨ä¹‹åçš„è¿­ä»£ä¸­ï¼Œä¼šéšç€ä¸šåŠ¡çš„ä¸æ–­å˜åŒ–ï¼Œè¢«å¸¦åŠ¨ç€è‡ªæˆ‘è¿›åŒ–ï¼Œé‚£æœ€ç»ˆçš„äº§ç‰©ä¹Ÿè‡ªç„¶æ˜¯å’Œä¸šåŠ¡å½¢æ€éå¸¸è´´åˆã€‚æ‰€ä»¥ï¼Œæˆ‘ä¸ªäººåœ¨é€‰æ‹©çš„æ—¶å€™ï¼Œä¸€äº›æ ¸å¿ƒçš„è½®å­ï¼Œè¯¥é€ å°±é€ èµ·æ¥ï¼Œä½†è¿™äº›è½®å­ä¸€å®šæ˜¯å¸¦æœ‰ä¸šåŠ¡ç‰¹è‰²çš„ï¼Œæ¯”å¦‚æˆ‘ä¼šå»é€ ä¸€ä¸ªä¸šåŠ¡ç»„ä»¶åº“ï¼Œä½†æ˜¯æˆ‘ç»ä¸ä¼šå»é€ ä¸€ä¸ªantdã€‚\n\n\n\næœ€åï¼Œéšç€äº‹ç‰©çš„æ¼”å˜ï¼Œåˆ†ä¹…å¿…åˆåˆä¹…å¿…åˆ†ï¼Œå•ä¸€ä¸šåŠ¡ç”¨çš„å¥½çš„ç³»ç»Ÿä¸€å®šæ˜¯å¯ä»¥åœ¨æ›´é«˜çš„è§†è§’ä¸ŠæŠ½è±¡ã€æ•´åˆçš„ï¼Œåœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œæ¯ä¸ªäººçš„æˆé•¿å°±ä¼šæ˜¯æˆ‘ä»¬æƒ³è¦çš„äº®ç‚¹äº†ã€‚æˆ–è®¸åœ¨ç®€å†ä¸Šä½ å†™ä¸‹çš„æ˜¯ä¸€ä¸ªå·²ç»åºŸå¼ƒçš„ç³»ç»Ÿï¼Œä½†æ˜¯å®ƒçš„çµé­‚åœ¨ä½ å¿ƒé‡Œï¼Œä¹Ÿå­˜åœ¨äºæŠŠä»–æ•´åˆäº†çš„ç³»ç»Ÿé‡Œï¼Œè¿™ç§äº®ç‚¹åœ¨ä¸ªäººä»‹ç»çš„æ—¶å€™ï¼Œä¸€å®šæ˜¯èƒ½ä¾ƒä¾ƒè€Œè°ˆçš„ã€‚\n\n\n\n\n\n# ä»1åˆ°10èƒ½åšä»€ä¹ˆï¼Ÿ(æ€è€ƒæ–¹å¼çš„æŠ½è±¡)\n\n\nç»ˆäºï¼Œæˆ‘ä»¬ç»å†çš„å„ç§æŠ‰æ‹©ï¼ŒæŠ•å…¥äº†å¤§é‡çš„æ—¶é—´ï¼ŒæŠŠä¸€ä¸ªäº®ç‚¹åšå‡ºæ¥äº†ï¼Œå®Œæˆäº†ç¾å¥½çš„ä»0åˆ°1ï¼Œå¯æœ‰æ—¶å€™æˆ‘ä»¬ä¼šå‘ç°çš„é—®é¢˜ï¼šä»0åˆ°1çœ‹ä¸Šå»æœ‰å¾ˆå¤šè¦åšçš„ï¼Œåšå®Œäº†ï¼Œä»1åˆ°10è¿˜èƒ½åšä»€ä¹ˆï¼Ÿ\n\n\n\nè¿™ä¸ªé—®é¢˜æˆ‘ä¸ªäººä¹Ÿæ²¡æœ‰å¤ªå¤šè¯è¯­æƒï¼Œå› ä¸ºè¿™ä¸¤å¹´æ€»æ˜¯åœ¨åšä»0åˆ°1çš„äº‹æƒ…ï¼Œç”šè‡³å’Œæˆ‘è€æ¿ä¹ŸèŠè¿‡è¿™ä¸ªï¼Œæ€»æ„Ÿè§‰è‡ªå·±æ²¡æœ‰ä¸ªç¡®å®šçš„äº‹æƒ…ã€‚ä»0åˆ°1åšä¸€æ¬¡æŒºçˆ½çš„ï¼Œä¸€ç›´åšï¼Œä¸ä¼šä¸€ç›´çˆ½ï¼Œå´åªä¼šè®©äººè§‰å¾—å¿ƒæ…Œï¼Œæ¯•ç«Ÿè°èƒ½ä¿è¯æ°¸è¿œèƒ½æƒ³å‡ºä»0åˆ°1çš„äº‹æƒ…å‘¢ï¼Ÿ\n\n\n\nè€Œé™ä¸‹æ¥åæ€ä¹‹åï¼Œæˆ‘å‘ç°äº‹æƒ…å¹¶ä¸æ˜¯è¿™ä¹ˆä¸€åˆ€åˆ‡çš„ï¼Œè°èƒ½è¯´æ˜ç™½ç°åœ¨åšçš„äº‹æƒ…æ˜¯0åˆ°1ï¼Œè¿˜æ˜¯1åˆ°10å‘¢ï¼Ÿè¿™é‡Œçš„è¾¹ç•Œå…¶å®å¹¶æ²¡æœ‰é‚£ä¹ˆæ˜ç¡®ï¼Œä½†æŠ½è±¡çœ‹ï¼Œä»–ä»¬éƒ½æ˜¯åŒä¸€ä¸ªå¥—è·¯\n\n\n\n**ä¸šåŠ¡/æŠ€æœ¯æ€è€ƒ => å‘ç°ç—›ç‚¹ => äº§å‡ºæ–¹æ¡ˆ => æ‹†è§£å®ç°**\n\n\n\nä¼´éšç€è¿™ä¸ªé—­ç¯ï¼Œä¸šåŠ¡æ°¸è¿œåœ¨å˜åŒ–ï¼Œè€Œå˜åŒ–åˆä¼šå¸¦æ¥æ–°çš„é—®é¢˜ï¼Œåªè¦ä¿æŒä¸€ä¸ªæ€è€ƒçš„çŠ¶æ€ï¼Œæ²¡æœ‰å¿…è¦åŒºåˆ†å…·ä½“å†å“ªä¸ªé˜¶æ®µï¼Œå› ä¸ºä½ æ€»èƒ½æ‰¾åˆ°å¯ä»¥å®ç°è‡ªæˆ‘ä»·å€¼çš„åœ°æ–¹ï¼Œå‘ç°å±äºä½ çš„äº®ç‚¹ã€‚\n\n\n\n\n\n## é˜¿é‡Œå·´å·´æ·˜å®æŠ€æœ¯éƒ¨-èººå¹³æŠ€æœ¯å›¢é˜Ÿ\n\næˆ‘åœ¨é˜¿é‡Œå·´å·´æ·˜å®æŠ€æœ¯éƒ¨-èººå¹³æŠ€æœ¯å›¢é˜Ÿã€‚ç›®å‰ï¼Œèººå¹³æ­£åœ¨æ·±è€•å®¶å±…å®¶è£…è¡Œä¸šï¼Œçºµå‘æ·±å…¥è¡Œä¸šå†…éƒ¨ï¼Œå¸Œæœ›èƒ½ç»™è¡Œä¸šå¸¦æ¥ä¸€äº›åˆ›æ–°ã€‚æˆ‘ä»¬è¿˜æœ‰æ›´å¤šæœ‰è¶£ã€å……æ»¡æŒ‘æˆ˜å’Œè¶…å‡ºä½ æƒ³è±¡çš„ä¸šåŠ¡ã€‚\n\nå¦‚æœä½ æ„¿æ„æ¥å’Œæˆ‘ä»¬ä¸€èµ·ç›¸ä¿¡ï¼Œé‚£è¯·å‘é€ç®€å†è¿‡æ¥ï¼Œæˆ‘ä»¬ä¸€å®šä¼šä¸€èµ·çœ‹è§ï¼Œä¸€èµ·åˆ›é€ æ— æ•°çš„äº®ç‚¹ï¼\n\nå‰ç«¯ç®€å†è¯·å‘é€åˆ°ï¼šyefei.niuyf@alibaba-inc.com æˆ– lijie.slj@alibaba-inc.com\n\nä¸»æ”»3dæ–¹å‘çš„åŒå­¦ï¼Œç®€å†è¯·å‘é€åˆ°ï¼šjiangcheng.wxd@alibaba-inc.com\n\njavaç®€å†è¯·å‘é€åˆ°ï¼šxiaoxian.zzy@taobao.com æˆ– wuxin.sn@taobao.com\n\nå®¢æˆ·ç«¯ç®€å†è¯·å‘é€åˆ°ï¼šfangying.fy@alibaba-inc.com\n\n", "user_name": "é˜¿é‡Œå·´å·´æ·˜ç³»æŠ€æœ¯", "description": "å¦‚æœä½ ä¹Ÿå¤Ÿæœ‰å¥½å¥‡å¿ƒã€æœ‰æ’å¿ƒã€æœ‰æ€è€ƒåŠ›ï¼Œå¸Œæœ›ä¸€èµ·åˆ›é€ æ—¶ä»£ä¼ å¥‡ï¼ æ¬¢è¿åŠ ", "got_view_count": 111726, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "JavaScript", "concern_user_count": 343215, "user_id": "1961184474432830", "title": "æ¨¡æ¿å¼•æ“å®ç°åŸç†ï¼ˆVueç¯‡ï¼‰", "mark_content": "åœ¨ Vue æ¡†æ¶é‡Œé¢å†…ç½®äº†ä¸€ä¸ªæ¨¡æ¿å¼•æ“ï¼Œç”¨äºç¼–è¯‘ Vue ä¸“æœ‰è¯­æ³•ï¼Œä¾‹å¦‚ï¼š\n\n```html\n<div id=\"app\">\n  ä½ å¥½ï¼Œ{{ message }}ï¼\n  <p v-if=\"seen\" styles=\"color: red; fontSize: 16px\">æ¡ä»¶æ¸²æŸ“</p>\n  <button v-on:click=\"reverseMessage\">åè½¬æ¶ˆæ¯</button>\n  <ol>\n    <li v-for=\"todo in todos\" class=\"color-gray ml-2\">\n      {{ todo.text }}\n    </li>\n  </ol>\n</div>\n```\n\nè¿™é‡Œé¢æœ‰ `{{ message }}`ã€`v-if`ã€`v-on:click`ã€`v-for` ç­‰ç‰¹æ®Šçš„è¯­æ³•ï¼ŒVue éœ€è¦æŠŠè¿™äº›å†…å®¹æå–å‡ºæ¥ï¼Œè½¬æ¢æˆå“åº”å¼çš„å‡½æ•°æˆ–è€…å¯¹åº”çš„ DOM äº‹ä»¶ã€‚\n\nåœ¨ Vue ä¸­åŒæ ·æ˜¯ç”¨æ­£åˆ™æ¥æå–è¿™äº›å†…å®¹çš„ï¼Œå®ƒçš„è½¬åŒ–æµç¨‹å¦‚ä¸‹ï¼š\n\n- é€šè¿‡æ­£åˆ™æŠŠæ¨¡æ¿è½¬æ¢æˆ AST æŠ½è±¡è¯­æ³•æ ‘\n- ç”¨ AST ç”Ÿæˆ JS ä»£ç \n- ç”¨ `new Function` é…åˆ `with` æ¥æ‰§è¡Œ JS ä»£ç \n\n## AST æŠ½è±¡è¯­æ³•æ ‘\n\nAST ä¸­çš„èŠ‚ç‚¹æ˜¯å…·æœ‰ç‰¹æ®Šå±æ€§çš„ JS å¯¹è±¡ï¼Œå®ƒçš„ç»“æ„å¤§è‡´å¦‚ä¸‹ï¼š\n\n```js\n{\n  tag: tagName, // æ ‡ç­¾å\n  type: 1, // å…ƒç´ ç±»å‹\n  children: [], // å­©å­åˆ—è¡¨\n  attrs, // å±æ€§é›†åˆ\n  parent: null, // çˆ¶å…ƒç´ \n  text: null // æ–‡æœ¬èŠ‚ç‚¹å†…å®¹\n  ...\n}\n```\n\nåœ¨ AST æŠ½è±¡è¯­æ³•æ ‘ä¸­ï¼Œä¼šæŒ‰ç…§èŠ‚ç‚¹ç±»å‹çš„ä¸åŒè¿›è¡ŒåŒºåˆ†ï¼š\n\n- å…ƒç´ ç±»å‹\n- æ–‡æœ¬ç±»å‹\n- æ³¨é‡Šç±»å‹\n- ...\n\n\n## æ­£åˆ™åˆ†æ\n\næ¥ä¸‹æ¥å¼€å§‹ç”¨æ­£åˆ™å¯¹èŠ‚ç‚¹è¿›è¡Œæå–ï¼Œå…ˆçœ‹ä¸‹ Vue ä¸­å®šä¹‰çš„æ­£åˆ™ï¼š\n\n```js\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; // æ ‡ç­¾å\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`; // ?: è¡¨ç¤ºåŒ¹é…ä¸æ•è·\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // æ ‡ç­¾å¼€å¤´çš„æ­£åˆ™ æ•è·çš„å†…å®¹æ˜¯æ ‡ç­¾å\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // åŒ¹é…æ ‡ç­¾ç»“å°¾çš„ </div>\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // åŒ¹é…å±æ€§\nconst startTagClose = /^\\s*(\\/?)>/; // åŒ¹é…æ ‡ç­¾ç»“æŸçš„ > \n```\n\n### ncname\n\nncname å°±æ˜¯ä¸åŒ…å«å‰ç¼€çš„XMLæ ‡ç­¾åç§°ï¼Œè§„åˆ™å¦‚ä¸‹ï¼š\n\n> å­—æ¯ï¼ˆa-zA-Zï¼‰æˆ–ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰å¼€å¤´ï¼Œåé¢å¯ä»¥è·Ÿä»»æ„æ•°é‡çš„ï¼š\n> \n> - ä¸­æ¨ªçº¿ï¼ˆ-ï¼‰\n> - ç‚¹ï¼ˆ.ï¼‰\n> - æ•°å­—ï¼ˆ0-9ï¼‰\n> - ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰\n> - å­—æ¯ï¼ˆa-zA-Zï¼‰\n\n### qname å’Œ qnameCapture\n\nqname æ˜¯åˆæ³•çš„ XML æ ‡ç­¾ï¼Œå®ƒçš„ç»„æˆè§„åˆ™æ˜¯ `<å‰ç¼€:æ ‡ç­¾åç§°>`ï¼Œä¾‹å¦‚ï¼š`<abc:span></abc:span>`ï¼Œå…¶ä¸­å‰ç¼€å¯ä»¥çœç•¥ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¯èƒ½æ˜¯ä¸€ä¸ª ncnameï¼Œæˆ–è€…ä¸¤ä¸ª ncname ä¸­é—´é€šè¿‡å†’å·æ‹¼æ¥èµ·æ¥ã€‚\n\nè¿™ä¸ªæ­£åˆ™ä¸­å†’å·å’Œå†’å·å‰é¢çš„éƒ¨åˆ†æ˜¯ä¸€ä¸ªéæ•è·åˆ†ç»„ï¼Œåé¢çš„æ ‡ç­¾åæ˜¯æ•è·åˆ†ç»„ï¼Œå³å¯ä»¥å–åˆ°æ ‡ç­¾åç§°ã€‚\n\n\n### startTagOpen\n\nåŒ¹é…å¼€å§‹æ ‡ç­¾ï¼Œä¾‹å¦‚ `<div`ã€`<abc:span`ã€‚\n\n\n### endTag\n\næ¥åŒ¹é…ç»“æŸæ ‡ç­¾\n\n### attribute\n\n```\n/^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/\n```\n\nè¿™ä¸ªæ­£åˆ™æ¯”è¾ƒé•¿ï¼Œæ˜¯ç”¨äºåŒ¹é… HTML æ ‡ç­¾å±æ€§çš„ï¼Œå¯èƒ½çš„å±æ€§å†™æ³•æœ‰ï¼š\n\n- åŒå¼•å·ï¼š`class=\"some-class\"`\n- å•å¼•å·ï¼š`class='some-class'`\n- ä¸ç”¨å¼•å·ï¼š`class=some-class`\n- å•ç‹¬çš„å±æ€§åï¼š`disabled`\n\nè¿™ä¸ªè¡¨è¾¾å¼æœ‰äº”ä¸ªæ•è·ç»„ï¼Œç¬¬ä¸€ä¸ªæ•è·ç»„ç”¨æ¥åŒ¹é…å±æ€§åï¼Œç¬¬äºŒä¸ªæ•è·ç»„ç”¨æ¥åŒ¹é…ç­‰äºå·ï¼Œç¬¬ä¸‰ã€ç¬¬å››ã€ç¬¬äº”ä¸ªæ•è·ç»„éƒ½æ˜¯ç”¨æ¥åŒ¹é…å±æ€§å€¼çš„ï¼ŒåŒæ—¶ ? è¡¨æ˜ç¬¬ä¸‰ã€å››ã€äº”ä¸ªåˆ†ç»„æ˜¯å¯é€‰çš„ã€‚\n\n### startTagClose\n\nç”¨äºåŒ¹é…ç»“æŸæ ‡ç­¾ï¼Œä¾‹å¦‚ï¼š`br />` æˆ– `/div>`ã€‚\n\n## è§£æå™¨\n\nåˆ©ç”¨ä¸Šé¢çš„æ­£åˆ™ï¼Œå¯ä»¥å†™å‡ºä¸‹é¢ç®€åŒ–ç‰ˆ AST è§£æå™¨ï¼š\n\n```js\nfunction parseHTML(html) {\n  let root, parent, stack = []\n  // åªè¦å‰©ä½™çš„ html ä¸ä¸ºç©ºå°±ä¸€ç›´è§£æ\n  while (html) {\n    let textEnd = html.indexOf('<')\n    if (textEnd == 0) {\n      const { tag, attrs } = parseStartTag() || {}\n      if (tag) {\n        start(tag, attrs)\n        continue\n      }\n      const endTagMatch = html.match(endTag)\n      if (endTag) {\n        advance(endTagMatch[0].length)\n        end(endTagMatch[1])\n        continue\n      }\n    } else {\n      const text = textEnd > 0 ? html.substring(0, textEnd) : html\n      advance(text.length)\n      chars(text)\n    }\n  }\n  // è·å–æˆªå–åå‰©ä½™çš„html\n  function advance(n) {\n    html = html.substring(n)\n  }\n  // è§£æå¼€å§‹æ ‡ç­¾\n  function parseStartTag() {\n    const start = html.match(startTagOpen)\n    if (start) {\n      const match = { tag: start[1], attrs: [] }\n      advance(start[0].length)\n      let end, attr\n      while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\n        match.attrs.push({\n          name: attr[1],\n          value: attr[3] || attr[4] || attr[5],\n        })\n        advance(attr[0].length)\n      }\n      if (end) {\n        advance(end[0].length)\n        return match\n      }\n    }\n  }\n  // è§£æåˆ°å¼€å§‹æ ‡ç­¾æ—¶è§¦å‘\n  function start(tag, attrs) {\n    const el = createASTElement(tag, attrs)\n    if (!root) root = el\n    stack.push((parent = el))\n    processFor(el) // å¤„ç† v-for\n    processIf(el) // å¤„ç† v-if\n    processAttrs(el) // å¤„ç† v-onã€v-showã€v-bind ç­‰\n  }\n  // è§£æåˆ°ç»“æŸæ ‡ç­¾æ—¶è§¦å‘\n  function end(tag) {\n    const el = stack.pop()\n    parent = stack[stack.length - 1]\n    if (parent) {\n      el.parent = parent\n      parent.children.push(el)\n    }\n  }\n  // è§£æåˆ°æ–‡æœ¬æ—¶è§¦å‘\n  function chars(text) {\n    text = text.trim()\n    if (!text) return\n    const el = { type: 3, text }\n    if (parent) {\n      parent.children.push(el)\n      el.parent = parent\n    }\n  }\n  return root\n}\n// åˆ›å»ºå…ƒç´ èŠ‚ç‚¹\nfunction createASTElement(tag, attrs, parent) {\n  return {\n    type: 1,\n    tag,\n    attrsList: attrs,\n    attrsMap: makeAttrsMap(attrs),\n    parent,\n    children: [],\n  }\n}\n// æŠŠæ•°ç»„ç±»å‹çš„å±æ€§è½¬æ¢ä¸ºå¯¹è±¡\nfunction makeAttrsMap(attrs) {\n  const map = {}\n  attrs.forEach((it) => (map[it.name] = it.value))\n  return map\n}\n// è·å–å¹¶åˆ é™¤æ•°ç»„ä¸­çš„æŸä¸ªå±æ€§\nfunction getAndRemoveAttr(el, name) {\n  let val\n  if ((val = el.attrsMap[name]) != null) {\n    const list = el.attrsList\n    for (let i = list.length - 1; i >= 0; i--) {\n      if (list[i].name === name) {\n        list.splice(i, 1)\n        break\n      }\n    }\n  }\n  return val\n}\n// å¤„ç†v-for\nfunction processFor(el) {\n  let exp\n  if ((exp = getAndRemoveAttr(el, 'v-for'))) {\n    const inMatch = exp.match(/([\\s\\S]*?)\\s+(?:in|of)\\s+([\\s\\S]*)/)\n    if (!inMatch) return\n    Object.assign(el, {\n      alias: inMatch[1].trim(),\n      for: inMatch[2].trim(),\n    })\n  }\n}\n// å¤„ç†v-if\nfunction processIf(el) {\n  const exp = getAndRemoveAttr(el, 'v-if')\n  if (exp) el.if = exp\n}\n// å¤„ç†å„ç§å±æ€§ï¼Œè¿™é‡Œä»¥v-onä¸ºä¾‹\nfunction processAttrs(el) {\n  const list = el.attrsList,\n    onRE = /^@|^v-on:/\n  let i, l, name, rawName, value\n  for (i = 0, l = list.length; i < l; i++) {\n    name = rawName = list[i].name\n    value = list[i].value\n    if (onRE.test(name)) {\n      name = name.replace(onRE, '')\n      el.events = { [name]: value }\n      list.splice(i, 1)\n      break\n    }\n  }\n}\n```\n\nå¯¹æ–‡ç« å¼€å¤´çš„ç¤ºä¾‹æ¨¡æ¿è¿è¡Œè¿™æ®µä»£ç ï¼Œå¯ä»¥å¾—åˆ°å¦‚ä¸‹çš„ AST æ ‘ï¼š\n\n```js\n{\n  type: 1,\n  tag: 'div',\n  attrsList: [ { name: 'id', value: 'app' } ],\n  attrsMap: { id: 'app' },\n  children: [\n    { type: 3, text: 'ä½ å¥½ï¼Œ{{ message }}ï¼' },\n    {\n      type: 1,\n      tag: 'p',\n      attrsList: [ { name: 'style', value: 'color: red; fontSize: 16px' } ],\n      attrsMap: { 'v-if': 'seen', style: 'color: red; fontSize: 16px' },\n      children: [ { type: 3, text: 'æ¡ä»¶æ¸²æŸ“' } ],\n      if: 'seen'\n    },\n    {\n      type: 1,\n      tag: 'button',\n      attrsList: [],\n      attrsMap: { 'v-on:click': 'reverseMessage' },\n      children: [ { type: 3, text: 'åè½¬æ¶ˆæ¯' } ],\n      events: { click: 'reverseMessage' }\n    },\n    {\n      type: 1,\n      tag: 'ol',\n      attrsList: [],\n      attrsMap: {},\n      children: [\n        {\n          type: 1,\n          tag: 'li',\n          attrsList: [ { name: 'class', value: 'color-gray ml-2' } ],\n          attrsMap: { 'v-for': 'todo in todos', class: 'color-gray ml-2' },\n          children: [ { type: 3, text: '{{ todo.text }}' } ],\n          alias: 'todo',\n          for: 'todos'\n        }\n      ]\n    }\n  ]\n}\n```\n\næ³¨æ„è¿™é‡Œå¹¶æ²¡æœ‰å¯¹æ³¨é‡ŠèŠ‚ç‚¹ç­‰è¿›è¡Œè§£æï¼Œåªå¤„ç†äº†å…ƒç´ èŠ‚ç‚¹å’Œæ–‡æœ¬èŠ‚ç‚¹ã€‚\n\n\n## ç”Ÿæˆå™¨\n\næœ‰äº† AST ä¹‹åï¼Œå°±éœ€è¦å°†å…¶ç»„è£…æˆä»£ç äº†ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯æ‹¼æ¥ä»£ç å­—ç¬¦ä¸²ï¼Œç”¨ `new Function` å’Œ `with` è¿›è¡Œå¤„ç†ã€‚æ‰€ä»¥æ¥ä¸‹æ¥è¦å†™ä¸€ä¸ªå‡½æ•°æ¥å¤„ç†ä¸Šé¢çš„ AST æ ‘ï¼š\n\n```js\nfunction generate(node) {\n  return node.type === 1 ? genElement(node) : genText(node.text)\n}\n```\n\nåŒæ ·è¿™é‡Œåªè€ƒè™‘å…ƒç´ èŠ‚ç‚¹å’Œæ–‡æœ¬èŠ‚ç‚¹ä¸¤ç§æƒ…å†µã€‚\n\n### ç”Ÿæˆå…ƒç´ èŠ‚ç‚¹ä»£ç \n\nå¯¹äºå…ƒç´ èŠ‚ç‚¹ï¼Œè¦æ‹¼æˆ `_c(tag, data, childNodes)` å‡½æ•°ï¼Œ\n\n```js\nfunction genElement(el) {\n  const { tag, attrsList, children } = el\n  const childNodes = children.map((child) => generate(child))\n  if (el.for && !el.forProcessed) {\n    el.forProcessed = true\n    return (\n      `_l((${el.for}),` +\n      `function(${el.alias}){` +\n      `return ${genElement(el)}` +\n      '})'\n    )\n  } else if (el.if && !el.ifProcessed) {\n    el.ifProcessed = true\n    return `${el.if} ? ${genElement(el)}: _e('')`\n  }\n  return `_c('${tag}',${genAttrs(attrsList)},${childNodes})`\n}\n```\n\n### å¤„ç†å…ƒç´ èŠ‚ç‚¹ä¸Šçš„å±æ€§\n\nä¸‹é¢çš„ä»£ç ç”¨äºå¤„ç†å±æ€§ï¼š\n\n```js\nfunction genAttrs(attrs) {\n  const obj = {}\n  for (let i = 0; i < attrs.length; i++) {\n    let attr = attrs[i]\n    if (attr.name === 'style') {\n      const kv = {} // å¯¹æ ·å¼è¿›è¡Œç‰¹æ®Šçš„å¤„ç†\n      attr.value.split(';').forEach((item) => {\n        let [key, value] = item.split(':')\n        kv[key.trim()] = value.trim()\n      })\n      attr.value = kv\n    }\n    obj[attr.name] = attr.value\n  }\n  return JSON.stringify(obj)\n}\n```\n\n### ç”Ÿæˆæ–‡æœ¬èŠ‚ç‚¹ä»£ç \n\n```js\nfunction genText(text) {\n  const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\n  if (!defaultTagRE.test(text)) {\n    return `_v(${JSON.stringify(text)})`\n  }\n  let tokens = []\n  let lastIndex = (defaultTagRE.lastIndex = 0)\n  let match, index\n  while ((match = defaultTagRE.exec(text))) {\n    index = match.index\n    if (index > lastIndex) {\n      tokens.push(JSON.stringify(text.slice(lastIndex, index)))\n    }\n    tokens.push(`_s(${match[1].trim()})`)\n    lastIndex = index + match[0].length\n  }\n  if (lastIndex < text.length) {\n    tokens.push(JSON.stringify(text.slice(lastIndex)))\n  }\n  return `_v(${tokens.join('+')})`\n}\n```\n\n### ä»£ç ç”Ÿæˆç»“æœ\n\nå°† ast å¸¦å…¥å‡½æ•°å¾—åˆ°ä»£ç å­—ç¬¦ä¸²ä¸ºï¼š\n\n```js\n_c(\n  'div',\n  { id: 'app' },\n  _v('ä½ å¥½ï¼Œ' + _s(message) + 'ï¼'),\n  seen\n    ? _c('p', { style: { color: 'red', fontSize: '16px' } }, _v('æ¡ä»¶æ¸²æŸ“'))\n    : _e(''),\n  _c('button', {}, _v('åè½¬æ¶ˆæ¯')),\n  _c(\n    'ol',\n    {},\n    _l(todos, function (todo) {\n      return _c('li', { class: 'color-gray ml-2' }, _v(_s(todo.text)))\n    })\n  )\n)\n```\n\n\n## è™šæ‹Ÿ DOM\n\næœ‰äº†ä»£ç å­—ç¬¦ä¸²ä¹‹åï¼Œå°±å¯ä»¥å¸¦å…¥ç¯å¢ƒå˜é‡æ¥ç”Ÿæˆè™šæ‹Ÿ DOM äº†ï¼Œä¸‹é¢æ˜¯ç”Ÿæˆè™šæ‹Ÿ DOM ç”¨åˆ°çš„ä¸€äº›è¾…åŠ©å‡½æ•°ï¼š\n\n```js\nfunction _c(tag, data, ...children) {\n  return { tag, data, children: children.flat() }\n}\nfunction _v(text) {\n  return { text }\n}\n\nfunction _s(val) {\n  if (val == null) return ''\n  if (typeof val == 'object') return JSON.stringify(val, null, 2)\n  return String(val)\n}\n\nfunction _l(val, render) {\n  const ret = new Array(val.length)\n  for (i = 0, l = val.length; i < l; i++) {\n    ret[i] = render(val[i], i)\n  }\n  return ret\n}\n\nfunction _e(text) {\n  return { text, isComment: true }\n}\n\nfunction createVdom(vm, code) {\n  const f = new Function('vm', `with(vm){return ${code}}`)\n  return f({ ...vm, _c, _s, _v, _l, _e })\n}\n```\n\nå¦‚æœ vm ç”¨ä¸‹é¢çš„å˜é‡å¸¦å…¥ï¼š\n\n```js\n{\n  message: 'æ¶ˆæ¯',\n  seen: false,\n  todos: [{ text: 'study' }, { text: 'reading' }],\n}\n```\n\nä¼šå¾—åˆ°è™šæ‹Ÿ DOMï¼š\n\n```js\n{\n  tag: 'div',\n  data: { id: 'app' },\n  children: [\n    { text: 'ä½ å¥½ï¼Œæ¶ˆæ¯ï¼' },\n    { text: '', isComment: true },\n    { tag: 'button', data: {}, children: [ { text: 'åè½¬æ¶ˆæ¯' } ] },\n    {\n      tag: 'ol',\n      data: {},\n      children: [\n        {\n          tag: 'li',\n          data: { class: 'color-gray ml-2' },\n          children: [ { text: 'study' } ]\n        },\n        {\n          tag: 'li',\n          data: { class: 'color-gray ml-2' },\n          children: [ { text: 'reading' } ]\n        }\n      ]\n    }\n  ]\n}\n```\n\nå¦‚æœ vm æ¢æˆä¸‹é¢çš„ç¯å¢ƒï¼š\n\n```js\n{\n  message: 'æ°´æœ',\n  seen: true,\n  todos: [{ text: 'é¦™è•‰' }, { text: 'è‹¹æœ' }, { text: 'è¥¿ç“œ' }],\n}\n```\n\nåˆ™å¯ä»¥ç”Ÿæˆå¦ä¸€ç§ DOM ç»“æ„ï¼š\n\n```js\n{\n  tag: 'div',\n  data: { id: 'app' },\n  children: [\n    { text: 'ä½ å¥½ï¼Œæ°´æœï¼' },\n    {\n      tag: 'p',\n      data: { style: { color: 'red', fontSize: '16px' } },\n      children: [ { text: 'æ¡ä»¶æ¸²æŸ“' } ]\n    },\n    { tag: 'button', data: {}, children: [ { text: 'åè½¬æ¶ˆæ¯' } ] },\n    {\n      tag: 'ol',\n      data: {},\n      children: [\n        {\n          tag: 'li',\n          data: { class: 'color-gray ml-2' },\n          children: [ { text: 'é¦™è•‰' } ]\n        },\n        {\n          tag: 'li',\n          data: { class: 'color-gray ml-2' },\n          children: [ { text: 'è‹¹æœ' } ]\n        },\n        {\n          tag: 'li',\n          data: { class: 'color-gray ml-2' },\n          children: [ { text: 'è¥¿ç“œ' } ]\n        }\n      ]\n    }\n  ]\n}\n```\n\nç”±äº vue çš„æ•°æ®æ˜¯å“åº”å¼çš„ï¼Œæ•°æ®æ”¹å˜ä¼šè§¦å‘é¡µé¢æ¸²æŸ“ï¼Œè€Œé¡µé¢æ¸²æŸ“çš„é€»è¾‘å°±æ˜¯æ–°æ—§è™šæ‹Ÿ DOM åˆ©ç”¨ patch ç®—æ³•è¿›è¡Œæ¯”è¾ƒå¾—åˆ°å·®å¼‚ï¼Œæœ€ç»ˆæ›´æ–°çœŸå® DOMã€‚\n\n\n", "user_name": "ä¹”ç‚åŠ›", "description": "", "got_view_count": 1357, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "Linux", "concern_user_count": 198821, "user_id": "501033032750472", "title": "èŠèŠè™šæ‹Ÿå†…å­˜", "mark_content": "å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯è‰¯è®¸ã€‚\n\nç†Ÿæ‚‰è®¡ç®—æœºçš„å°ä¼™ä¼´éƒ½çŸ¥é“ï¼Œæˆ‘ä»¬å¸¸è¯´çš„ä¸»æœºä¸‰å¤§ä»¶åˆ†åˆ«æ˜¯ä¸»æ¿ï¼ŒCPUï¼Œå†…å­˜ï¼Œå¯è§å†…å­˜åœ¨è®¡ç®—æœºä¸»æœºä¸­çš„è§’è‰²ä¹ŸéåŒä¸€èˆ¬ï¼Œå–œæ¬¢ DIY ä¸»æœºçš„å°ä¼™ä¼´å¯¹è¿™ä¸‰å¤§ä»¶çš„äº†è§£æ›´æ˜¯ç²¾ç›Šæ±‚ç²¾ã€‚\n\nç¼–å†™è¿‡ç¨‹åºçš„å°ä¼™ä¼´å¯¹äºç¨‹åºçš„æ‰§è¡Œè¿‡ç¨‹ï¼Œä¹Ÿæ˜¯è€³ç†Ÿèƒ½è¯¦äº†ï¼Œå…ˆä»ç¡¬ç›˜åŠ è½½åˆ°å†…å­˜ï¼Œç„¶å CPU ä¸å†…å­˜è¿›è¡Œæ•°æ®äº¤æ¢ä¸å¤„ç†ï¼Œå®Œæˆç›¸åº”çš„æ“ä½œï¼ˆçœŸå®æ‰§è¡Œç»†èŠ‚ç›¸å½“å¤æ‚ï¼‰ï¼Œä»è€Œå®ç°ç›¸åº”çš„åŠŸèƒ½ã€‚\n\nä½†æ˜¯å†…å­˜çš„å®¹é‡éå¸¸æœ‰é™ï¼Œç”±äºå†…å­˜çš„é€ ä»·è¾ƒé«˜ï¼ˆç›®å‰å¸¸ç”¨çš„å†…å­˜ä¸ºåŒå€é€Ÿ SDRAM ï¼‰ï¼Œè®¡ç®—æœºç”¨æˆ·å‡çº§å†…å­˜å®¹é‡ä¹Ÿæ˜¯ä¸€ç¬”ä¸å°çš„å¼€æ”¯ã€‚\n\né‚£ä¹ˆè‰¯è®¸å°±å’Œå¤§å®¶æ¥è®¨è®ºä¸‹è®¡ç®—æœºçš„å†…å­˜å¦‚æœä¸å¤Ÿç”¨äº†, è™šæ‹Ÿå†…å­˜æŠ€æœ¯çš„åº”ç”¨ï¼Œè™šæ‹Ÿå†…å­˜çš„å‡ºç°ï¼Œè®©æœºå™¨å†…å­˜ä¸å¤Ÿçš„æƒ…å†µå¾—åˆ°éƒ¨åˆ†è§£å†³ï¼Œå¤§å®¶éœ€è¦æ³¨æ„çš„æ˜¯æœ‰äº›èµ„æ–™ä¹Ÿå°†è™šæ‹Ÿå†…å­˜ç§°ä¹‹ä¸ºäº¤æ¢å†…å­˜ã€‚\n\n#### 1\\. è®¨è®ºè™šæ‹Ÿå†…å­˜å‰çš„çƒ­èº«\n\næˆ‘ä»¬éœ€è¦çŸ¥é“çš„æ˜¯è®¡ç®—æœºå¯¹å†…å­˜åˆ†ä¸ºç‰©ç†å†…å­˜ä¸è™šæ‹Ÿå†…å­˜ï¼ˆæ³¨æ„è™šæ‹Ÿå†…å­˜å’Œè™šæ‹Ÿåœ°å€ç©ºé—´çš„åŒºåˆ«ï¼‰ã€‚ç‰©ç†å†…å­˜å°±æ˜¯è®¡ç®—æœºçš„å®é™…å†…å­˜å¤§å°ï¼Œç”± RAM èŠ¯ç‰‡ç»„æˆçš„ã€‚è™šæ‹Ÿå†…å­˜åˆ™æ˜¯è™šæ‹Ÿå‡ºæ¥çš„ã€ä½¿ç”¨ç£ç›˜ä»£æ›¿å†…å­˜ã€‚\n\n#### 2\\. è™šæ‹Ÿå†…å­˜çš„å·¥ä½œåŸç†\n\næ­£å¦‚å‰é¢æ‰€æè¿°çš„ï¼Œå½“ç³»ç»Ÿçš„ç‰©ç†å†…å­˜ä¸å¤Ÿç”¨çš„æ—¶å€™ï¼Œå°±éœ€è¦å°†ç‰©ç†å†…å­˜ä¸­çš„ä¸€éƒ¨åˆ†ç©ºé—´é‡Šæ”¾å‡ºæ¥ï¼Œä»¥ä¾›å½“å‰è¿è¡Œçš„ç¨‹åºä½¿ç”¨ã€‚\n\né‚£äº›è¢«é‡Šæ”¾çš„ç©ºé—´å¯èƒ½æ¥è‡ªä¸€äº›å¾ˆé•¿æ—¶é—´æ²¡æœ‰ä»€ä¹ˆæ“ä½œçš„ç¨‹åºï¼Œè¿™äº›è¢«é‡Šæ”¾çš„ç©ºé—´è¢«ä¸´æ—¶ä¿å­˜åˆ°äº¤æ¢ç©ºé—´ä¸­ï¼Œç­‰åˆ°é‚£äº›ç¨‹åºè¦è¿è¡Œæ—¶ï¼Œå†ä»äº¤æ¢ç©ºé—´ä¸­æ¢å¤ä¿å­˜çš„æ•°æ®åˆ°å†…å­˜ä¸­ã€‚\n\n#### 3\\. Linux è™šæ‹Ÿå†…å­˜çš„å®ç°æ–¹å¼\n\nLinux ç³»ç»Ÿå®ç°è™šæ‹Ÿå†…å­˜æœ‰ä¸¤ç§æ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯äº¤æ¢åˆ†åŒºï¼ˆ **swap** åˆ†åŒºï¼‰å’Œäº¤æ¢æ–‡ä»¶ã€‚\n\n#####ã€€äº¤æ¢åˆ†åŒº\n\näº¤æ¢åˆ†åŒºå…¶å®å°±æ˜¯æ–°å»ºä¸€ä¸ªåˆ†åŒºï¼Œç„¶åå°†è¯¥åˆ†åŒºæŒ‚è½½ä½œä¸ºäº¤æ¢ç©ºé—´ï¼Œæ–¹æ³•æ­¥éª¤ä¸ä¼ ç»Ÿçš„æ–°å»ºåˆ†åŒºä¸€æ ·ã€‚åªä¸è¿‡æ ¼å¼åŒ–åˆ†åŒºå’ŒæŒ‚è½½åˆ†åŒºåˆ†åˆ«é‡‡ç”¨ **mkswap** å’Œ **swapon** å‘½ä»¤ã€‚\n\n##### äº¤æ¢æ–‡ä»¶\n\nç¡¬ç›˜é©±åŠ¨å™¨ä¸­æ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—´æ¥åˆ›å»ºäº¤æ¢åˆ†åŒºï¼Œæˆ‘ä»¬å°±ä¼šæ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªäº¤æ¢æ–‡ä»¶ä»¥å°† RAM çš„éæ´»åŠ¨å†…å®¹äº¤æ¢åˆ°å…¶ä¸­ã€‚\n\n#### 4\\. ç†æƒ³çš„äº¤æ¢æƒé‡\n\nLinux å…è®¸æˆ‘ä»¬è‡ªè¡Œè®¾ç½®äº¤æ¢çš„æƒé‡ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥è®¾ç½®äº¤æ¢è¿‡ç¨‹å‘ç”Ÿçš„é¢‘ç‡ã€‚å°ä¼™ä¼´ä»¬å¯ä»¥æ ¹æ®éœ€è¦åœ¨0åˆ°100ä¹‹é—´è®¾ç½®äº¤æ¢çš„æƒé‡ã€‚å€¼è¶Šå°åˆ™ä»£è¡¨ä¼šè®©å†…æ ¸å°½é‡å°‘ç”¨äº¤æ¢ï¼Œå€¼è¶Šå¤§ä¼šä½¿å†…æ ¸æ›´å¤šçš„å»ä½¿ç”¨äº¤æ¢ç©ºé—´ã€‚\n\näº¤æ¢æƒé‡çš„é»˜è®¤å€¼å’Œå»ºè®®å€¼ä¸º60ï¼Œæœ‰å…´è¶£çš„å°ä¼™ä¼´å¯ä»¥å…·ä½“å»å­¦ä¹  **swappiness** ï¼Œè¿™ä¸ª Linux å†…æ ¸å‚æ•°,è¿™é‡Œä¸åšè¿‡å¤šçš„æè¿°äº†ã€‚\n\n#### 5.ä½¿ç”¨è™šæ‹Ÿå†…å­˜çš„å¥½å¤„\n\n*   å®ƒå¯ä»¥è½»æ¾åœ°ä¿å­˜é‚£äº›å‡ ä¹ä¸ä½¿ç”¨è€Œåˆè¢«å ç”¨çš„ RAM å—ã€‚ç„¶åå¯ä»¥å°†é‡Šæ”¾çš„ RAM ç”¨äºå®¹çº³æ›´å¤šå…·æœ‰æ›´é«˜ä¼˜å…ˆçº§çš„ç¨‹åºã€‚\n*   é˜²æ­¢ RAM ç©ºé—´ç”¨å®Œï¼Œæ— æ³•æ‰§è¡Œå…¶ä»–ç¨‹åºçš„å±€é¢ã€‚\n*   è™šæ‹Ÿå†…å­˜å……å½“äº† RAM çš„å¤‡ä»½ï¼Œä»è€Œå¢å¤§äº† RAM çš„å®é™…ç©ºé—´ã€‚\n*   åœ¨ä¼‘çœ è¿‡ç¨‹ä¸­ï¼ŒRAM çš„æ‰€æœ‰å†…å®¹å‡å†™å…¥äº¤æ¢ç©ºé—´ã€‚å› æ­¤ï¼ŒæˆåŠŸè¿›è¡Œä¼‘çœ ï¼Œè™šæ‹Ÿå†…å­˜æ˜¯å¿…éœ€çš„ã€‚\n*   å®ƒæé«˜äº†ç³»ç»Ÿçš„æ•´ä½“æ€§èƒ½ã€‚ï¼ˆåœ¨å†…æ ¸å‚æ•° **swappiness** è®¾ç½®åˆç†çš„æƒ…å†µä¸‹ï¼‰\n\n#### 6\\. ç»“è®º\n\nåœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ äº†äº¤æ¢å†…å­˜ä»¥åŠå®ƒçš„è®¸å¤šå¥½å¤„ï¼ŒRAM ç©ºé—´ä¸è¶³æ—¶ï¼Œå®ƒå°†ä½œä¸º RAM çš„æ‰©å……è¿›è¡Œä½¿ç”¨ï¼Œé¿å…æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå› å†…å­˜ä¸è¶³è€Œå´©æºƒã€‚\n\nå…¶å®ï¼Œ**Swap** çš„è°ƒæ•´å¯¹ Linux æœåŠ¡å™¨ï¼Œç‰¹åˆ«æ˜¯ Web æœåŠ¡å™¨çš„æ€§èƒ½è‡³å…³é‡è¦ã€‚é€šè¿‡è°ƒæ•´ **Swap**ï¼Œæœ‰æ—¶å¯ä»¥è¶Šè¿‡ç³»ç»Ÿæ€§èƒ½ç“¶é¢ˆï¼ŒèŠ‚çœç³»ç»Ÿå‡çº§è´¹ç”¨ã€‚", "user_name": "è‰¯è®¸Linux", "description": "å…¬ä¼—å·ï¼šè‰¯è®¸Linuxï¼Œå›å¤1024è·å–5TæŠ€æœ¯èµ„æ–™", "got_view_count": 72068, "category_name": "åç«¯", "ctime": 1457483880}
{"tag_name": "Docker", "concern_user_count": 116847, "user_id": "2277843825331959", "title": "ã€æ¯å¤©30åˆ†é’ŸGetæ–°æŠ€èƒ½ã€‘dockerå®¹å™¨ç¯‡ï¼ˆä¸€ï¼‰", "mark_content": "\n## Dockeræ˜¯ä»€ä¹ˆ\n\n**Docker å±äº Linux å®¹å™¨çš„ä¸€ç§å°è£…ï¼Œæä¾›ç®€å•æ˜“ç”¨çš„å®¹å™¨ä½¿ç”¨æ¥å£ã€‚**å®ƒæ˜¯ç›®å‰æœ€æµè¡Œçš„ Linux å®¹å™¨è§£å†³æ–¹æ¡ˆã€‚\n\nDocker å°†åº”ç”¨ç¨‹åºä¸è¯¥ç¨‹åºçš„ä¾èµ–ï¼Œæ‰“åŒ…åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œé¢ã€‚è¿è¡Œè¿™ä¸ªæ–‡ä»¶ï¼Œå°±ä¼šç”Ÿæˆä¸€ä¸ªè™šæ‹Ÿå®¹å™¨ã€‚ç¨‹åºåœ¨è¿™ä¸ªè™šæ‹Ÿå®¹å™¨é‡Œè¿è¡Œï¼Œå°±å¥½åƒåœ¨çœŸå®çš„ç‰©ç†æœºä¸Šè¿è¡Œä¸€æ ·ã€‚æœ‰äº† Dockerï¼Œå°±ä¸ç”¨æ‹…å¿ƒç¯å¢ƒé—®é¢˜ã€‚\n\næ€»ä½“æ¥è¯´ï¼ŒDocker çš„æ¥å£ç›¸å½“ç®€å•ï¼Œç”¨æˆ·å¯ä»¥æ–¹ä¾¿åœ°åˆ›å»ºå’Œä½¿ç”¨å®¹å™¨ï¼ŒæŠŠè‡ªå·±çš„åº”ç”¨æ”¾å…¥å®¹å™¨ã€‚å®¹å™¨è¿˜å¯ä»¥è¿›è¡Œç‰ˆæœ¬ç®¡ç†ã€å¤åˆ¶ã€åˆ†äº«ã€ä¿®æ”¹ï¼Œå°±åƒç®¡ç†æ™®é€šçš„ä»£ç ä¸€æ ·ã€‚\n\n## DockeråŸºæœ¬æ¦‚å¿µ\n\nDocker ä¸»è¦åŒ…å«ä¸‰ä¸ªåŸºæœ¬æ¦‚å¿µï¼Œåˆ†åˆ«æ˜¯é•œåƒã€å®¹å™¨å’Œä»“åº“ï¼Œç†è§£äº†è¿™ä¸‰ä¸ªæ¦‚å¿µï¼Œå°±ç†è§£äº† Docker çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸã€‚ä»¥ä¸‹ç®€è¦æ€»ç»“ä¸€ä¸‹è¿™ä¸‰ç‚¹ã€‚\n\n### é•œåƒï¼š\n\nDocker é•œåƒæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ç³»ç»Ÿï¼Œé™¤äº†æä¾›å®¹å™¨è¿è¡Œæ—¶æ‰€éœ€çš„ç¨‹åºã€åº“ã€èµ„æºã€é…ç½®ç­‰æ–‡ä»¶å¤–ï¼Œè¿˜åŒ…å«äº†ä¸€äº›ä¸ºè¿è¡Œæ—¶å‡†å¤‡çš„ä¸€äº›é…ç½®å‚æ•°ï¼ˆå¦‚åŒ¿åå·ã€ç¯å¢ƒå˜é‡ã€ç”¨æˆ·ç­‰ï¼‰ã€‚é•œåƒä¸åŒ…å«ä»»ä½•åŠ¨æ€æ•°æ®ï¼Œå…¶å†…å®¹åœ¨æ„å»ºä¹‹åä¹Ÿä¸ä¼šè¢«æ”¹å˜ã€‚\n\n### å®¹å™¨ï¼š\n\nå®¹å™¨çš„å®è´¨æ˜¯è¿›ç¨‹ï¼Œä½†ä¸ç›´æ¥åœ¨å®¿ä¸»æ‰§è¡Œçš„è¿›ç¨‹ä¸åŒï¼Œå®¹å™¨è¿›ç¨‹è¿è¡Œäºå±äºè‡ªå·±çš„ç‹¬ç«‹çš„å‘½åç©ºé—´å®¹å™¨å¯ä»¥è¢«ã€‚åˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€åˆ é™¤å’Œæš‚åœç­‰ç­‰ï¼Œè¯´åˆ°é•œåƒä¸å®¹å™¨ä¹‹é—´çš„å…³ç³»ï¼Œå¯ä»¥ç±»æ¯”é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ä¸­çš„ç±»å’Œå®ä¾‹ã€‚\n\n### ä»“åº“ï¼š\n\né•œåƒæ„å»ºå®Œæˆåï¼Œå¯ä»¥å¾ˆå®¹æ˜“çš„åœ¨å½“å‰å®¿ä¸»æœºä¸Šè¿è¡Œï¼Œä½†æ˜¯ï¼Œå¦‚æœéœ€è¦åœ¨å…¶å®ƒæœåŠ¡å™¨ä¸Šä½¿ç”¨è¿™ä¸ªé•œåƒï¼Œæˆ‘ä»¬å°±éœ€è¦ä¸€ä¸ªé›†ä¸­çš„å­˜å‚¨ã€åˆ†å‘é•œåƒçš„æœåŠ¡ï¼ŒDocker Registry å°±æ˜¯è¿™æ ·çš„æœåŠ¡ã€‚ä¸€ä¸ª Docker Registry ä¸­å¯ä»¥åŒ…å«å¤šä¸ªä»“åº“ï¼›æ¯ä¸ªä»“åº“å¯ä»¥åŒ…å«å¤šä¸ªæ ‡ç­¾ï¼›æ¯ä¸ªæ ‡ç­¾å¯¹åº”ä¸€ä¸ªé•œåƒï¼Œå…¶ä¸­æ ‡ç­¾å¯ä»¥ç†è§£ä¸ºé•œåƒçš„ç‰ˆæœ¬å·ã€‚\n\n## Docker ç”¨é€”\n\nDocker çš„ä¸»è¦ç”¨é€”ï¼Œç›®å‰æœ‰ä¸‰å¤§ç±»ã€‚\n\n**ï¼ˆ1ï¼‰æä¾›ä¸€æ¬¡æ€§çš„ç¯å¢ƒã€‚**æ¯”å¦‚ï¼Œæœ¬åœ°æµ‹è¯•ä»–äººçš„è½¯ä»¶ã€æŒç»­é›†æˆçš„æ—¶å€™æä¾›å•å…ƒæµ‹è¯•å’Œæ„å»ºçš„ç¯å¢ƒã€‚\n\n**ï¼ˆ2ï¼‰æä¾›å¼¹æ€§çš„äº‘æœåŠ¡ã€‚**å› ä¸º Docker å®¹å™¨å¯ä»¥éšå¼€éšå…³ï¼Œå¾ˆé€‚åˆåŠ¨æ€æ‰©å®¹å’Œç¼©å®¹ã€‚\n\n**ï¼ˆ3ï¼‰ç»„å»ºå¾®æœåŠ¡æ¶æ„ã€‚**é€šè¿‡å¤šä¸ªå®¹å™¨ï¼Œä¸€å°æœºå™¨å¯ä»¥è·‘å¤šä¸ªæœåŠ¡ï¼Œå› æ­¤åœ¨æœ¬æœºå°±å¯ä»¥æ¨¡æ‹Ÿå‡ºå¾®æœåŠ¡æ¶æ„ã€‚\n\n## Dockerå®‰è£…\n\nDocker åˆ†ä¸º CE å’Œ EE ä¸¤å¤§ç‰ˆæœ¬ã€‚CE å³ç¤¾åŒºç‰ˆï¼ˆå…è´¹ï¼Œæ”¯æŒå‘¨æœŸ 7 ä¸ªæœˆï¼‰ï¼ŒEE å³ä¼ä¸šç‰ˆï¼Œå¼ºè°ƒå®‰å…¨ï¼Œä»˜è´¹ä½¿ç”¨ï¼Œæ”¯æŒå‘¨æœŸ 24 ä¸ªæœˆã€‚\n\nDocker CE åˆ†ä¸º `stable` `test` å’Œ `nightly` ä¸‰ä¸ªæ›´æ–°é¢‘é“ã€‚\n\nå®˜æ–¹ç½‘ç«™ä¸Šæœ‰å„ç§ç¯å¢ƒä¸‹çš„ [å®‰è£…æŒ‡å—](https://docs.docker.com/install/)ï¼Œè¿™é‡Œä¸»è¦ä»‹ç» Docker CE åœ¨ `Linux` ã€`Windows 10` å’Œ `macOS` ä¸Šçš„å®‰è£…ã€‚\n\n### Ubuntu\n\n#### ç³»ç»Ÿè¦æ±‚\n\nDocker CE æ”¯æŒä»¥ä¸‹ç‰ˆæœ¬çš„ [Ubuntu](https://ubuntu.com/server) æ“ä½œç³»ç»Ÿï¼š\n\n- Ubuntu Focal 20.04 (LTS)\n- Eoan 19.10\n- Bionic 18.04 (LTS)\n- Xenial 16.04 (LTS)\n\nDocker CE å¯ä»¥å®‰è£…åœ¨ 64 ä½çš„ x86 å¹³å°æˆ– ARM å¹³å°ä¸Šã€‚Ubuntu å‘è¡Œç‰ˆä¸­ï¼ŒLTSï¼ˆLong-Term-Supportï¼‰é•¿æœŸæ”¯æŒç‰ˆæœ¬ï¼Œä¼šè·å¾— 5 å¹´çš„å‡çº§ç»´æŠ¤æ”¯æŒï¼Œè¿™æ ·çš„ç‰ˆæœ¬ä¼šæ›´ç¨³å®šï¼Œå› æ­¤åœ¨ç”Ÿäº§ç¯å¢ƒä¸­æ¨èä½¿ç”¨ LTS ç‰ˆæœ¬ã€‚\n\n#### å¸è½½æ—§ç‰ˆæœ¬\n\næ—§ç‰ˆæœ¬çš„ Docker ç§°ä¸º `docker` æˆ–è€… `docker-engine`ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¸è½½æ—§ç‰ˆæœ¬ï¼š\n\n```\n$ sudo apt-get remove docker \\\n               docker-engine \\\n               docker.io\n```\n\n#### ä½¿ç”¨ APT å®‰è£…\n\nç”±äº `apt` æºä½¿ç”¨ HTTPS ä»¥ç¡®ä¿è½¯ä»¶ä¸‹è½½è¿‡ç¨‹ä¸­ä¸è¢«ç¯¡æ”¹ã€‚å› æ­¤ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦æ·»åŠ ä½¿ç”¨ HTTPS ä¼ è¾“çš„è½¯ä»¶åŒ…ä»¥åŠ CA è¯ä¹¦ã€‚\n\n```\n$ sudo apt-get update\n$ sudo apt-get install \\\n    apt-transport-https \\\n    ca-certificates \\\n    curl \\\n    software-properties-common\n```\n\né‰´äºå›½å†…ç½‘ç»œé—®é¢˜ï¼Œå¼ºçƒˆå»ºè®®ä½¿ç”¨å›½å†…æºï¼Œå®˜æ–¹æºè¯·åœ¨æ³¨é‡Šä¸­æŸ¥çœ‹ã€‚\n\nä¸ºäº†ç¡®è®¤æ‰€ä¸‹è½½è½¯ä»¶åŒ…çš„åˆæ³•æ€§ï¼Œéœ€è¦æ·»åŠ è½¯ä»¶æºçš„ `GPG` å¯†é’¥ã€‚\n\n```\n$ curl -fsSL https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu/gpg | sudo apt-key add -\n# å®˜æ–¹æº\n# $ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -\n```\n\nç„¶åï¼Œæˆ‘ä»¬éœ€è¦å‘ `source.list` ä¸­æ·»åŠ  Docker è½¯ä»¶æº\n\n```\n$ sudo add-apt-repository \\\n    \"deb [arch=amd64] https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu \\\n    $(lsb_release -cs) \\\n    stable\"\n# å®˜æ–¹æº\n# $ sudo add-apt-repository \\\n#    \"deb [arch=amd64] https://download.docker.com/linux/ubuntu \\\n#    $(lsb_release -cs) \\\n#    stable\"\n```\n\n> ä»¥ä¸Šå‘½ä»¤ä¼šæ·»åŠ ç¨³å®šç‰ˆæœ¬çš„ Docker CE APT é•œåƒæºï¼Œå¦‚æœéœ€è¦æµ‹è¯•æˆ–æ¯æ—¥æ„å»ºç‰ˆæœ¬çš„ Docker CE è¯·å°† stable æ”¹ä¸º test æˆ–è€… nightlyã€‚\n\n#### å®‰è£… Docker CE\n\næ›´æ–° apt è½¯ä»¶åŒ…ç¼“å­˜ï¼Œå¹¶å®‰è£… `docker-ce`ï¼š\n\n```\n$ sudo apt-get update\n$ sudo apt-get install docker-ce\n```\n\n#### ä½¿ç”¨è„šæœ¬è‡ªåŠ¨å®‰è£…\n\nåœ¨æµ‹è¯•æˆ–å¼€å‘ç¯å¢ƒä¸­ Docker å®˜æ–¹ä¸ºäº†ç®€åŒ–å®‰è£…æµç¨‹ï¼Œæä¾›äº†ä¸€å¥—ä¾¿æ·çš„å®‰è£…è„šæœ¬ï¼ŒUbuntu ç³»ç»Ÿä¸Šå¯ä»¥ä½¿ç”¨è¿™å¥—è„šæœ¬å®‰è£…ï¼Œå¦å¤–å¯ä»¥é€šè¿‡ `--mirror` é€‰é¡¹ä½¿ç”¨å›½å†…æºè¿›è¡Œå®‰è£…ï¼š\n\n```\n$ curl -fsSL get.docker.com -o get-docker.sh\n$ sudo sh get-docker.sh --mirror Aliyun\n# $ sudo sh get-docker.sh --mirror AzureChinaCloud\n```\n\næ‰§è¡Œè¿™ä¸ªå‘½ä»¤åï¼Œè„šæœ¬å°±ä¼šè‡ªåŠ¨çš„å°†ä¸€åˆ‡å‡†å¤‡å·¥ä½œåšå¥½ï¼Œå¹¶ä¸”æŠŠ Docker CE çš„ç¨³å®š(stable)ç‰ˆæœ¬å®‰è£…åœ¨ç³»ç»Ÿä¸­ã€‚\n\n#### å¯åŠ¨ Docker CE\n\n```\n$ sudo systemctl enable docker\n$ sudo systemctl start docker\n```\n\n### Debian\n\n#### ç³»ç»Ÿè¦æ±‚\n\nDocker CE æ”¯æŒä»¥ä¸‹ç‰ˆæœ¬çš„ [Debian](https://www.debian.org/intro/about) æ“ä½œç³»ç»Ÿï¼š\n\n- Buster 10\n- Stretch 9\n\n#### å¸è½½æ—§ç‰ˆæœ¬\n\næ—§ç‰ˆæœ¬çš„ Docker ç§°ä¸º `docker` æˆ–è€… `docker-engine`ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¸è½½æ—§ç‰ˆæœ¬ï¼š\n\n```\n$ sudo apt-get remove docker \\\n               docker-engine \\\n               docker.io\n```\n\n#### ä½¿ç”¨ APT å®‰è£…\n\nç”±äº apt æºä½¿ç”¨ HTTPS ä»¥ç¡®ä¿è½¯ä»¶ä¸‹è½½è¿‡ç¨‹ä¸­ä¸è¢«ç¯¡æ”¹ã€‚å› æ­¤ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦æ·»åŠ ä½¿ç”¨ HTTPS ä¼ è¾“çš„è½¯ä»¶åŒ…ä»¥åŠ CA è¯ä¹¦ã€‚\n\n```\n$ sudo apt-get update\n$ sudo apt-get install \\\n     apt-transport-https \\\n     ca-certificates \\\n     curl \\\n     gnupg2 \\\n     lsb-release \\\n     software-properties-common\n```\n\né‰´äºå›½å†…ç½‘ç»œé—®é¢˜ï¼Œå¼ºçƒˆå»ºè®®ä½¿ç”¨å›½å†…æºï¼Œå®˜æ–¹æºè¯·åœ¨æ³¨é‡Šä¸­æŸ¥çœ‹ã€‚\n\nä¸ºäº†ç¡®è®¤æ‰€ä¸‹è½½è½¯ä»¶åŒ…çš„åˆæ³•æ€§ï¼Œéœ€è¦æ·»åŠ è½¯ä»¶æºçš„ GPG å¯†é’¥ã€‚\n\n```\n$ curl -fsSL https://mirrors.ustc.edu.cn/docker-ce/linux/debian/gpg | sudo apt-key add -\n# å®˜æ–¹æº\n# $ curl -fsSL https://download.docker.com/linux/debian/gpg | sudo apt-key add -\n```\n\nç„¶åï¼Œæˆ‘ä»¬éœ€è¦å‘ `source.list` ä¸­æ·»åŠ  Docker CE è½¯ä»¶æºï¼š\n\n```\n$ sudo add-apt-repository \\\n   \"deb [arch=amd64] https://mirrors.ustc.edu.cn/docker-ce/linux/debian \\\n   $(lsb_release -cs) \\\n   stable\"\n# å®˜æ–¹æº\n# $ sudo add-apt-repository \\\n#    \"deb [arch=amd64] https://download.docker.com/linux/debian \\\n#    $(lsb_release -cs) \\\n#    stable\"\n```\n\n> ä»¥ä¸Šå‘½ä»¤ä¼šæ·»åŠ ç¨³å®šç‰ˆæœ¬çš„ Docker CE APT æºï¼Œå¦‚æœéœ€è¦æµ‹è¯•æˆ–æ¯æ—¥æ„å»ºç‰ˆæœ¬çš„ Docker CE è¯·å°† stable æ”¹ä¸º test æˆ–è€… nightlyã€‚\n\n#### å®‰è£… Docker CE\n\næ›´æ–° apt è½¯ä»¶åŒ…ç¼“å­˜ï¼Œå¹¶å®‰è£… `docker-ce`ã€‚\n\n```\n$ sudo apt-get update\n$ sudo apt-get install docker-ce\n```\n\n#### ä½¿ç”¨è„šæœ¬è‡ªåŠ¨å®‰è£…\n\nåœ¨æµ‹è¯•æˆ–å¼€å‘ç¯å¢ƒä¸­ Docker å®˜æ–¹ä¸ºäº†ç®€åŒ–å®‰è£…æµç¨‹ï¼Œæä¾›äº†ä¸€å¥—ä¾¿æ·çš„å®‰è£…è„šæœ¬ï¼ŒDebian ç³»ç»Ÿä¸Šå¯ä»¥ä½¿ç”¨è¿™å¥—è„šæœ¬å®‰è£…ï¼Œå¦å¤–å¯ä»¥é€šè¿‡ `--mirror` é€‰é¡¹ä½¿ç”¨å›½å†…æºè¿›è¡Œå®‰è£…ï¼š\n\n```\n$ curl -fsSL get.docker.com -o get-docker.sh\n$ sudo sh get-docker.sh --mirror Aliyun\n# $ sudo sh get-docker.sh --mirror AzureChinaCloud\n```\n\næ‰§è¡Œè¿™ä¸ªå‘½ä»¤åï¼Œè„šæœ¬å°±ä¼šè‡ªåŠ¨çš„å°†ä¸€åˆ‡å‡†å¤‡å·¥ä½œåšå¥½ï¼Œå¹¶ä¸”æŠŠ Docker CE çš„ç¨³å®š(stable)ç‰ˆæœ¬å®‰è£…åœ¨ç³»ç»Ÿä¸­ã€‚\n\n#### å¯åŠ¨ Docker CE\n\n```\n$ sudo systemctl enable docker\n$ sudo systemctl start docker\n```\n\n### CentOS\n\n#### ç³»ç»Ÿè¦æ±‚\n\nDocker CE æ”¯æŒ 64 ä½ç‰ˆæœ¬ CentOS 7ï¼Œå¹¶ä¸”è¦æ±‚å†…æ ¸ç‰ˆæœ¬ä¸ä½äº 3.10ã€‚ CentOS 7 æ»¡è¶³æœ€ä½å†…æ ¸çš„è¦æ±‚ï¼Œä½†ç”±äºå†…æ ¸ç‰ˆæœ¬æ¯”è¾ƒä½ï¼Œéƒ¨åˆ†åŠŸèƒ½ï¼ˆå¦‚ `overlay2` å­˜å‚¨å±‚é©±åŠ¨ï¼‰æ— æ³•ä½¿ç”¨ï¼Œå¹¶ä¸”éƒ¨åˆ†åŠŸèƒ½å¯èƒ½ä¸å¤ªç¨³å®šã€‚\n\n#### å¸è½½æ—§ç‰ˆæœ¬\n\næ—§ç‰ˆæœ¬çš„ Docker ç§°ä¸º `docker` æˆ–è€… `docker-engine`ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¸è½½æ—§ç‰ˆæœ¬ï¼š\n\n```\n$ sudo yum remove docker \\\n                  docker-client \\\n                  docker-client-latest \\\n                  docker-common \\\n                  docker-latest \\\n                  docker-latest-logrotate \\\n                  docker-logrotate \\\n                  docker-selinux \\\n                  docker-engine-selinux \\\n                  docker-engine\n```\n\n#### ä½¿ç”¨ yum å®‰è£…\n\næ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…ä¾èµ–åŒ…ï¼š\n\n```\n$ sudo yum install -y yum-utils \\\n           device-mapper-persistent-data \\\n           lvm2\n```\n\né‰´äºå›½å†…ç½‘ç»œé—®é¢˜ï¼Œå¼ºçƒˆå»ºè®®ä½¿ç”¨å›½å†…æºï¼Œå®˜æ–¹æºè¯·åœ¨æ³¨é‡Šä¸­æŸ¥çœ‹ã€‚\n\næ‰§è¡Œä¸‹é¢çš„å‘½ä»¤æ·»åŠ  `yum` è½¯ä»¶æºï¼š\n\n```\n$ sudo yum-config-manager \\\n    --add-repo \\\n    https://mirrors.ustc.edu.cn/docker-ce/linux/centos/docker-ce.repo\n$ sudo sed -i 's/download.docker.com/mirrors.ustc.edu.cn\\/docker-ce/g' /etc/yum.repos.d/docker-ce.repo\n\n# å®˜æ–¹æº\n# $ sudo yum-config-manager \\\n#     --add-repo \\\n#     https://download.docker.com/linux/centos/docker-ce.repo\n```\n\nå¦‚æœéœ€è¦æµ‹è¯•ç‰ˆæœ¬çš„ Docker CE è¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š\n\n```\n$ sudo yum-config-manager --enable docker-ce-test\n```\n\nå¦‚æœéœ€è¦æ¯æ—¥æ„å»ºç‰ˆæœ¬çš„ Docker CE è¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š\n\n```\n$ sudo yum-config-manager --enable docker-ce-nightly\n```\n\n#### å®‰è£… Docker CE\n\næ›´æ–° `yum` è½¯ä»¶æºç¼“å­˜ï¼Œå¹¶å®‰è£… `docker-ce`ã€‚\n\n```\n$ sudo yum makecache fast\n$ sudo yum install docker-ce\n```\n\n#### ä½¿ç”¨è„šæœ¬è‡ªåŠ¨å®‰è£…\n\nåœ¨æµ‹è¯•æˆ–å¼€å‘ç¯å¢ƒä¸­ Docker å®˜æ–¹ä¸ºäº†ç®€åŒ–å®‰è£…æµç¨‹ï¼Œæä¾›äº†ä¸€å¥—ä¾¿æ·çš„å®‰è£…è„šæœ¬ï¼ŒCentOS ç³»ç»Ÿä¸Šå¯ä»¥ä½¿ç”¨è¿™å¥—è„šæœ¬å®‰è£…ï¼Œå¦å¤–å¯ä»¥é€šè¿‡ `--mirror` é€‰é¡¹ä½¿ç”¨å›½å†…æºè¿›è¡Œå®‰è£…ï¼š\n\n```\n$ curl -fsSL get.docker.com -o get-docker.sh\n$ sudo sh get-docker.sh --mirror Aliyun\n# $ sudo sh get-docker.sh --mirror AzureChinaCloud\n```\n\næ‰§è¡Œè¿™ä¸ªå‘½ä»¤åï¼Œè„šæœ¬å°±ä¼šè‡ªåŠ¨çš„å°†ä¸€åˆ‡å‡†å¤‡å·¥ä½œåšå¥½ï¼Œå¹¶ä¸”æŠŠ Docker CE çš„ç¨³å®š(stable)ç‰ˆæœ¬å®‰è£…åœ¨ç³»ç»Ÿä¸­ã€‚\n\n#### å¯åŠ¨ Docker CE\n\n```\n$ sudo systemctl enable docker\n$ sudo systemctl start docker\n```\n\n#### å»ºç«‹ docker ç”¨æˆ·ç»„\n\né»˜è®¤æƒ…å†µä¸‹ï¼Œ`docker` å‘½ä»¤ä¼šä½¿ç”¨ [Unix socket](https://en.wikipedia.org/wiki/Unix_domain_socket) ä¸ Docker å¼•æ“é€šè®¯ã€‚è€Œåªæœ‰ `root` ç”¨æˆ·å’Œ `docker` ç»„çš„ç”¨æˆ·æ‰å¯ä»¥è®¿é—® Docker å¼•æ“çš„ Unix socketã€‚å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œä¸€èˆ¬ Linux ç³»ç»Ÿä¸Šä¸ä¼šç›´æ¥ä½¿ç”¨ `root` ç”¨æˆ·ã€‚å› æ­¤ï¼Œæ›´å¥½åœ°åšæ³•æ˜¯å°†éœ€è¦ä½¿ç”¨ `docker` çš„ç”¨æˆ·åŠ å…¥ `docker` ç”¨æˆ·ç»„ã€‚\n\nå»ºç«‹ `docker` ç»„ï¼š\n\n```\n$ sudo groupadd docker\n```\n\nå°†å½“å‰ç”¨æˆ·åŠ å…¥ `docker` ç»„ï¼š\n\n```\n$ sudo usermod -aG docker $USER\n```\n\né€€å‡ºå½“å‰ç»ˆç«¯å¹¶é‡æ–°ç™»å½•ï¼Œè¿›è¡Œå¦‚ä¸‹æµ‹è¯•ã€‚\n\n#### æµ‹è¯• Docker æ˜¯å¦å®‰è£…æ­£ç¡®\n\n```\n$ docker run hello-world\nUnable to find image 'hello-world:latest' locally\nlatest: Pulling from library/hello-world\n0e03bdcc26d7: Pull complete\nDigest: sha256:49a1c8800c94df04e9658809b006fd8a686cab8028d33cfba2cc049724254202\nStatus: Downloaded newer image for hello-world:latest\n\nHello from Docker!\nThis message shows that your installation appears to be working correctly.\n\nTo generate this message, Docker took the following steps:\n 1. The Docker client contacted the Docker daemon.\n 2. The Docker daemon pulled the \"hello-world\" image from the Docker Hub.\n    (amd64)\n 3. The Docker daemon created a new container from that image which runs the\n    executable that produces the output you are currently reading.\n 4. The Docker daemon streamed that output to the Docker client, which sent it\n    to your terminal.\n\nTo try something more ambitious, you can run an Ubuntu container with:\n $ docker run -it ubuntu bash\n\nShare images, automate workflows, and more with a free Docker ID:\n https://hub.docker.com/\n\nFor more examples and ideas, visit:\n https://docs.docker.com/get-started/\n```\n\nè‹¥èƒ½æ­£å¸¸è¾“å‡ºä»¥ä¸Šä¿¡æ¯ï¼Œåˆ™è¯´æ˜å®‰è£…æˆåŠŸã€‚\n\n### macOS\n\n#### ç³»ç»Ÿè¦æ±‚\n\n[Docker Desktop for Mac](https://docs.docker.com/docker-for-mac/) è¦æ±‚ç³»ç»Ÿæœ€ä½ä¸º macOS Catalina 10.13ã€‚\n\n#### å®‰è£…\n\n##### ä½¿ç”¨ Homebrew å®‰è£…\n\n[Homebrew](https://brew.sh/) çš„ [Cask](https://github.com/Homebrew/homebrew-cask) å·²ç»æ”¯æŒ Docker Desktop for Macï¼Œå› æ­¤å¯ä»¥å¾ˆæ–¹ä¾¿çš„ä½¿ç”¨ Homebrew Cask æ¥è¿›è¡Œå®‰è£…ï¼š\n\n```bash\n$ brew cask install docker\n```\n\n##### æ‰‹åŠ¨ä¸‹è½½å®‰è£…\n\nå¦‚æœéœ€è¦æ‰‹åŠ¨ä¸‹è½½ï¼Œè¯·ç‚¹å‡»ä»¥ä¸‹é“¾æ¥ä¸‹è½½ [Stable](https://download.docker.com/mac/stable/Docker.dmg) æˆ– [Edge](https://download.docker.com/mac/edge/Docker.dmg) ç‰ˆæœ¬çš„ Docker Desktop for Macã€‚\n\nå¦‚åŒ macOS å…¶å®ƒè½¯ä»¶ä¸€æ ·ï¼Œå®‰è£…ä¹Ÿéå¸¸ç®€å•ï¼ŒåŒå‡»ä¸‹è½½çš„ `.dmg` æ–‡ä»¶ï¼Œç„¶åå°†é‚£åªå« [Moby](https://www.docker.com/blog/call-me-moby-dock/) çš„é²¸é±¼å›¾æ ‡æ‹–æ‹½åˆ° `Application` æ–‡ä»¶å¤¹å³å¯ï¼ˆå…¶é—´éœ€è¦è¾“å…¥ç”¨æˆ·å¯†ç ï¼‰ã€‚\n\n#### è¿è¡Œ\n\nä»åº”ç”¨ä¸­æ‰¾åˆ° Docker å›¾æ ‡å¹¶ç‚¹å‡»è¿è¡Œã€‚\n\n### Windows 10\n\n#### ç³»ç»Ÿè¦æ±‚\n\n[Docker Desktop for Windows](https://docs.docker.com/docker-for-windows/install/) æ”¯æŒ 64 ä½ç‰ˆæœ¬çš„ Windows 10 Proï¼Œä¸”å¿…é¡»å¼€å¯ Hyper-Vï¼ˆè‹¥ç‰ˆæœ¬ä¸º v2004 åŠä»¥ä¸Šåˆ™æ— éœ€å¼€å¯ Hyper-Vï¼‰ï¼Œæˆ–è€… 64 ä½ç‰ˆæœ¬çš„ Windows 10 Home v2004 åŠä»¥ä¸Šç‰ˆæœ¬ã€‚\n\n#### å®‰è£…\n\n**æ‰‹åŠ¨ä¸‹è½½å®‰è£…**\n\nç‚¹å‡»ä»¥ä¸‹é“¾æ¥ä¸‹è½½ [Stable](https://download.docker.com/win/stable/Docker Desktop Installer.exe) æˆ– [Edge](https://download.docker.com/win/edge/Docker Desktop Installer.exe) ç‰ˆæœ¬çš„ Docker Desktop for Windowsã€‚\n\nä¸‹è½½å¥½ä¹‹ååŒå‡» `Docker Desktop Installer.exe` å¼€å§‹å®‰è£…ã€‚\n\n#### è¿è¡Œ\n\nåœ¨ Windows æœç´¢æ è¾“å…¥ **Docker** ç‚¹å‡» **Docker Desktop** å¼€å§‹è¿è¡Œã€‚\n\n## Dockerå®æˆ˜\n\n### dockerå®‰è£…nginx\n\n#### æœç´¢é•œåƒ\n\nä½ å¯ä»¥é€šè¿‡ `docker search` å‘½ä»¤æ¥æŸ¥æ‰¾å®˜æ–¹ä»“åº“ä¸­çš„é•œåƒï¼Œå¹¶åˆ©ç”¨ `docker pull` å‘½ä»¤æ¥å°†å®ƒä¸‹è½½åˆ°æœ¬åœ°ã€‚\n\nä¾‹å¦‚ä»¥ `nginx` ä¸ºå…³é”®è¯è¿›è¡Œæœç´¢ï¼š\n\n```\n$ docker search nginx\nNAME                               DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED\nnginx                              Official build of Nginx.                        13580               [OK]\njwilder/nginx-proxy                Automated Nginx reverse proxy for docker conâ€¦   1857                                    [OK]\nricharvey/nginx-php-fpm            Container running Nginx + PHP-FPM capable ofâ€¦   782                                     [OK]\nlinuxserver/nginx                  An Nginx container, brought to you by LinuxSâ€¦   126\nbitnami/nginx                      Bitnami nginx Docker Image                      88                                      [OK]\ntiangolo/nginx-rtmp                Docker image with Nginx using the nginx-rtmpâ€¦   86                                      [OK]\njc21/nginx-proxy-manager           Docker container for managing Nginx proxy hoâ€¦   76\nalfg/nginx-rtmp                    NGINX, nginx-rtmp-module and FFmpeg from souâ€¦   72                                      [OK]\nnginxdemos/hello                   NGINX webserver that serves a simple page coâ€¦   58                                      [OK]\njlesage/nginx-proxy-manager        Docker container for Nginx Proxy Manager        53                                      [OK]\nnginx/nginx-ingress                NGINX Ingress Controller for Kubernetes         37\nprivatebin/nginx-fpm-alpine        PrivateBin running on an Nginx, php-fpm & Alâ€¦   31                                      [OK]\nschmunk42/nginx-redirect           A very simple container to redirect HTTP traâ€¦   18                                      [OK]\nnginxinc/nginx-unprivileged        Unprivileged NGINX Dockerfiles                  16\nnginx/nginx-prometheus-exporter    NGINX Prometheus Exporter                       14\nraulr/nginx-wordpress              Nginx front-end for the official wordpress:fâ€¦   13                                      [OK]\ncentos/nginx-112-centos7           Platform for running nginx 1.12 or building â€¦   13\ncentos/nginx-18-centos7            Platform for running nginx 1.8 or building nâ€¦   13\nblacklabelops/nginx                Dockerized Nginx Reverse Proxy Server.          13                                      [OK]\nmailu/nginx                        Mailu nginx frontend                            7                                       [OK]\nsophos/nginx-vts-exporter          Simple server that scrapes Nginx vts stats aâ€¦   7                                       [OK]\nbitwarden/nginx                    The Bitwarden nginx web server acting as a râ€¦   7\nbitnami/nginx-ingress-controller   Bitnami Docker Image for NGINX Ingress Contrâ€¦   6                                       [OK]\nwodby/nginx                        Generic nginx                                   1                                       [OK]\nansibleplaybookbundle/nginx-apb    An APB to deploy NGINX                          1                                       [OK]\n```\n\nå¯ä»¥çœ‹åˆ°è¿”å›äº†å¾ˆå¤šåŒ…å«å…³é”®å­—çš„é•œåƒï¼Œå…¶ä¸­åŒ…æ‹¬é•œåƒåå­—ã€æè¿°ã€æ”¶è—æ•°ï¼ˆè¡¨ç¤ºè¯¥é•œåƒçš„å—å…³æ³¨ç¨‹åº¦ï¼‰ã€æ˜¯å¦å®˜æ–¹åˆ›å»ºï¼ˆOFFICIALï¼‰ã€æ˜¯å¦è‡ªåŠ¨æ„å»º ï¼ˆAUTOMATEDï¼‰ã€‚\t\n\n#### æ‹‰å–é•œåƒ\n\n```\n$ docker pull nginx\nUsing default tag: latest\nlatest: Pulling from library/nginx\nbf5952930446: Pull complete\nba755a256dfe: Pull complete\nc57dd87d0b93: Pull complete\nd7fbf29df889: Pull complete\n1f1070938ccd: Pull complete\nDigest: sha256:36b74457bccb56fbf8b05f79c85569501b721d4db813b684391d63e02287c0b2\nStatus: Downloaded newer image for nginx:latest\ndocker.io/library/nginx:latest\n```\n\n#### æŸ¥çœ‹é•œåƒ\n\nä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥æŸ¥çœ‹æ˜¯å¦å·²å®‰è£…äº† nginxï¼š\n\n```\n$ docker images\nREPOSITORY                                               TAG                 IMAGE ID            CREATED             SIZE\nnginx                                                    latest              08393e824c32        4 days ago          132MB\n```\n\nåœ¨ä¸Šé¢çš„ä¿¡æ¯ä¸­å¯ä»¥çœ‹åˆ°æˆ‘ä»¬å·²ç»å®‰è£…äº†æœ€æ–°ç‰ˆæœ¬ï¼ˆlatestï¼‰çš„ nginx é•œåƒã€‚\n\n#### è¿è¡Œå®¹å™¨\n\næ‹‰å–é•œåƒå®Œæˆåï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥è¿è¡Œ nginx å®¹å™¨ï¼š\n\n```\n$ docker run --name nginx-test -p 8081:80 -d nginx\n```\n\nå‚æ•°è¯´æ˜ï¼š\n\n- **--name nginx-test**ï¼šå®¹å™¨åç§°ã€‚\n- **-p 8081:80**ï¼š ç«¯å£è¿›è¡Œæ˜ å°„ï¼Œå°†æœ¬åœ° 8081 ç«¯å£æ˜ å°„åˆ°å®¹å™¨å†…éƒ¨çš„ 80 ç«¯å£ã€‚\n- **-d nginx**ï¼š è®¾ç½®å®¹å™¨åœ¨åœ¨åå°ä¸€ç›´è¿è¡Œã€‚\n\n#### æµ‹è¯•å®‰è£…\n\næœ€åæˆ‘ä»¬å¯ä»¥é€šè¿‡æµè§ˆå™¨å¯ä»¥ç›´æ¥è®¿é—® 8081 ç«¯å£çš„ nginx æœåŠ¡ã€‚\n\n> æ­¤å¤„é€šè¿‡å®‰è£…nginxå®¹å™¨ï¼Œç®€å•çš„ä»‹ç»äº†dockerçš„ä¸€äº›åŸºç¡€å‘½ä»¤ã€‚å…¶ä»–æ›´å¤šå‘½ä»¤å¯ä»¥å‚è€ƒå®˜ç½‘æ–‡æ¡£ã€‚\n\n## Docker å¸¸ç”¨å‘½ä»¤\n\n### Dockeré•œåƒå¸¸ç”¨å‘½ä»¤\n\nä¸‹é¢ä»‹ç»å‡ ç§é•œåƒä¸­å¸¸ç”¨çš„æ“ä½œå‘½ä»¤ã€‚\n\n`docker image pull`æ˜¯ä¸‹è½½é•œåƒçš„å‘½ä»¤ã€‚é•œåƒä»è¿œç¨‹é•œåƒä»“åº“æœåŠ¡çš„ä»“åº“ä¸­ä¸‹è½½ã€‚\n\né»˜è®¤æƒ…å†µä¸‹ï¼Œé•œåƒä¼šä» [Docker](http://c.biancheng.net/docker/) Hub çš„ä»“åº“ä¸­æ‹‰å–ã€‚\n\n`docker image pull alpine:latest`å‘½ä»¤ä¼šä» Docker Hub çš„ alpine ä»“åº“ä¸­æ‹‰å–æ ‡ç­¾ä¸º latest çš„é•œåƒã€‚\n\n`docker image ls`åˆ—å‡ºäº†æœ¬åœ° Docker ä¸»æœºä¸Šå­˜å‚¨çš„é•œåƒã€‚å¯ä»¥é€šè¿‡ --digests å‚æ•°æ¥æŸ¥çœ‹é•œåƒçš„ SHA256 ç­¾åã€‚\n\n`docker image inspect`å‘½ä»¤éå¸¸æœ‰ç”¨ï¼è¯¥å‘½ä»¤å®Œç¾å±•ç¤ºäº†é•œåƒçš„ç»†èŠ‚ï¼ŒåŒ…æ‹¬é•œåƒå±‚æ•°æ®å’Œå…ƒæ•°æ®ã€‚\n\n`docker image rm`ç”¨äºåˆ é™¤é•œåƒã€‚\n\n`docker image rm alpine:latest`å‘½ä»¤çš„å«ä¹‰æ˜¯åˆ é™¤ alpine:latest é•œåƒã€‚å½“é•œåƒå­˜åœ¨å…³è”çš„å®¹å™¨ï¼Œå¹¶ä¸”å®¹å™¨å¤„äºè¿è¡Œï¼ˆUpï¼‰æˆ–è€…åœæ­¢ï¼ˆExitedï¼‰çŠ¶æ€æ—¶ï¼Œä¸å…è®¸åˆ é™¤è¯¥é•œåƒã€‚\n\n### Dockerå®¹å™¨å¸¸ç”¨å‘½ä»¤\n\n1) `docker container run`\n\nå¯åŠ¨æ–°å®¹å™¨çš„å‘½ä»¤ã€‚è¯¥å‘½ä»¤çš„æœ€ç®€å½¢å¼æ¥æ”¶é•œåƒå’Œå‘½ä»¤ä½œä¸ºå‚æ•°ã€‚é•œåƒç”¨äºåˆ›å»ºå®¹å™¨ï¼Œè€Œå‘½ä»¤åˆ™æ˜¯å¸Œæœ›å®¹å™¨è¿è¡Œçš„åº”ç”¨ã€‚\n\n`docker container run -it ubuntu /bin/bash` å‘½ä»¤ä¼šåœ¨å‰å°å¯åŠ¨ä¸€ä¸ª Ubuntu å®¹å™¨ï¼Œå¹¶è¿è¡Œ Bash Shellã€‚\n\nCtrl-PQ ä¼šæ–­å¼€ Shell å’Œå®¹å™¨ç»ˆç«¯ä¹‹é—´çš„é“¾æ¥ï¼Œå¹¶åœ¨é€€å‡ºåä¿æŒå®¹å™¨åœ¨åå°å¤„äºè¿è¡Œï¼ˆUPï¼‰çŠ¶æ€ã€‚\n\n2) `docker container ls`\n\nç”¨äºåˆ—å‡ºæ‰€æœ‰åœ¨è¿è¡Œï¼ˆUPï¼‰çŠ¶æ€çš„å®¹å™¨ã€‚å¦‚æœä½¿ç”¨ -a æ ‡è®°ï¼Œè¿˜å¯ä»¥çœ‹åˆ°å¤„äºåœæ­¢ï¼ˆExitedï¼‰çŠ¶æ€çš„å®¹å™¨ã€‚\n\n3) `docker container exec`\n\nç”¨äºåœ¨è¿è¡ŒçŠ¶æ€çš„å®¹å™¨ä¸­ï¼Œå¯åŠ¨ä¸€ä¸ªæ–°è¿›ç¨‹ã€‚è¯¥å‘½ä»¤åœ¨å°† Docker ä¸»æœº Shell è¿æ¥åˆ°ä¸€ä¸ªè¿è¡Œä¸­å®¹å™¨ç»ˆç«¯æ—¶éå¸¸æœ‰ç”¨ã€‚\n\n`docker container exec -it <container-name or container-id> bash` å‘½ä»¤ä¼šåœ¨å®¹å™¨å†…éƒ¨å¯åŠ¨ä¸€ä¸ª Bash Shell è¿›ç¨‹ï¼Œå¹¶è¿æ¥åˆ°è¯¥ Shellã€‚\n\nä¸ºäº†ä½¿è¯¥å‘½ä»¤ç”Ÿæ•ˆï¼Œç”¨äºåˆ›å»ºå®¹å™¨çš„é•œåƒå¿…é¡»åŒ…å« Bash Shellã€‚\n\n4) `docker container stop`\n\næ­¤å‘½ä»¤ä¼šåœæ­¢è¿è¡Œä¸­çš„å®¹å™¨ï¼Œå¹¶å°†çŠ¶æ€ç½®ä¸º Exited(0)ã€‚\n\nè¯¥å‘½ä»¤é€šè¿‡å‘é€ SIGTERM ä¿¡å·ç»™å®¹å™¨å†… PID ä¸º 1 çš„è¿›ç¨‹è¾¾åˆ°ç›®çš„ã€‚\n\nå¦‚æœè¿›ç¨‹æ²¡æœ‰åœ¨ 10s ä¹‹å†…å¾—åˆ°æ¸…ç†å¹¶åœæ­¢è¿è¡Œï¼Œé‚£ä¹ˆä¼šæ¥ç€å‘é€ SIGKILL ä¿¡å·æ¥å¼ºåˆ¶åœæ­¢è¯¥å®¹å™¨ã€‚\n\ndocker container stop å¯ä»¥æ¥æ”¶å®¹å™¨ ID ä»¥åŠå®¹å™¨åç§°ä½œä¸ºå‚æ•°ã€‚\n\n5) `docker container start`\n\né‡å¯å¤„äºåœæ­¢ï¼ˆExitedï¼‰çŠ¶æ€çš„å®¹å™¨ã€‚å¯ä»¥åœ¨ docker container start å‘½ä»¤ä¸­æŒ‡å®šå®¹å™¨çš„åç§°æˆ–è€… IDã€‚\n\n6) `docker container rm`\n\nåˆ é™¤åœæ­¢è¿è¡Œçš„å®¹å™¨ã€‚å¯ä»¥é€šè¿‡å®¹å™¨åç§°æˆ–è€… ID æ¥æŒ‡å®šè¦åˆ é™¤çš„å®¹å™¨ã€‚æ¨èé¦–å…ˆä½¿ç”¨ docker container stop å‘½ä»¤åœæ­¢å®¹å™¨ï¼Œç„¶åä½¿ç”¨ docker container rm æ¥å®Œæˆåˆ é™¤ã€‚\n\n7) `docker container inspect`\n\næ˜¾ç¤ºå®¹å™¨çš„é…ç½®ç»†èŠ‚å’Œè¿è¡Œæ—¶ä¿¡æ¯ã€‚è¯¥å‘½ä»¤æ¥æ”¶å®¹å™¨åç§°å’Œå®¹å™¨ ID ä½œä¸ºä¸»è¦å‚æ•°ã€‚\n\n> å®˜æ–¹é˜…è¯»é“¾æ¥ï¼š[docs.docker.com/engine/refeâ€¦](https://docs.docker.com/engine/reference/commandline/docker/)\n\n## Docker åŠ é€Ÿå™¨æ˜¯ä»€ä¹ˆ\n\nä½¿ç”¨ Docker çš„æ—¶å€™ï¼Œéœ€è¦ç»å¸¸ä»å®˜æ–¹è·å–é•œåƒï¼Œä½†æ˜¯ç”±äºæ˜¾è€Œæ˜“è§çš„ç½‘ç»œåŸå› ï¼Œæ‹‰å–é•œåƒçš„è¿‡ç¨‹éå¸¸è€—æ—¶ï¼Œä¸¥é‡å½±å“ä½¿ç”¨ Docker çš„ä½“éªŒã€‚å› \tæ­¤ DaoCloud æ¨å‡º Docker åŠ é€Ÿå™¨è§£å†³è¿™ä¸ªéš¾é¢˜ï¼Œé€šè¿‡æ™ºèƒ½è·¯ç”±å’Œç¼“å­˜æœºåˆ¶ï¼Œæå¤§æå‡äº†å›½å†…ç½‘ç»œè®¿é—® Docker Hub çš„é€Ÿåº¦ï¼Œç›®å‰å·²ç»æ‹¥æœ‰äº†å¹¿æ³›çš„ç”¨æˆ·ç¾¤ä½“ï¼Œå¹¶å¾—åˆ°äº† Docker å®˜æ–¹çš„å¤§åŠ›æ¨èã€‚å¦‚æœæ‚¨æ˜¯åœ¨å›½å†…çš„ç½‘ç»œç¯å¢ƒä½¿ç”¨ Dockerï¼Œé‚£ä¹ˆ Docker åŠ é€Ÿå™¨ä¸€å®šèƒ½å¸®åˆ°æ‚¨ã€‚\n\n### Docker Hub é•œåƒåŠ é€Ÿå™¨åˆ—è¡¨\n\n| é•œåƒåŠ é€Ÿå™¨                                                   | é•œåƒåŠ é€Ÿå™¨åœ°å€                            | ä¸“å±åŠ é€Ÿå™¨       | å…¶å®ƒåŠ é€Ÿ                                                     |\n| :----------------------------------------------------------- | ----------------------------------------- | ---------------- | ------------------------------------------------------------ |\n| [Docker ä¸­å›½å®˜æ–¹é•œåƒ](https://docker-cn.com/registry-mirror) | `https://registry.docker-cn.com`          |                  | Docker Hub                                                   |\n| [DaoCloud é•œåƒç«™](https://daocloud.io/mirror)                | `http://f1361db2.m.daocloud.io`           | å¯ç™»å½•ï¼Œç³»ç»Ÿåˆ†é… | Docker Hub                                                   |\n| [Azure ä¸­å›½é•œåƒ](https://github.com/Azure/container-service-for-azure-china/blob/master/aks/README.md#22-container-registry-proxy) | `https://dockerhub.azk8s.cn`              |                  | Docker Hubã€GCRã€Quay                                        |\n| [ç§‘å¤§é•œåƒç«™](https://mirrors.ustc.edu.cn/help/dockerhub.html) | `https://docker.mirrors.ustc.edu.cn`      |                  | Docker Hubã€[GCR](https://github.com/ustclug/mirrorrequest/issues/91)ã€[Quay](https://github.com/ustclug/mirrorrequest/issues/135) |\n| [é˜¿é‡Œäº‘](https://cr.console.aliyun.com/)                     | `https://<your_code>.mirror.aliyuncs.com` | éœ€ç™»å½•ï¼Œç³»ç»Ÿåˆ†é… | Docker Hub                                                   |\n| [ä¸ƒç‰›äº‘](https://kirk-enterprise.github.io/hub-docs/#/user-guide/mirror) | `https://reg-mirror.qiniu.com`            |                  | Docker Hubã€GCRã€Quay                                        |\n| [ç½‘æ˜“äº‘](https://c.163yun.com/hub)                           | `https://hub-mirror.c.163.com`            |                  | Docker Hub                                                   |\n| [è…¾è®¯äº‘](https://cloud.tencent.com/document/product/457/9113) | `https://mirror.ccs.tencentyun.com`       |                  | Docker Hub                                                   |\n\n### Docker Hub é•œåƒåŠ é€Ÿå™¨é…ç½®\n\n#### linux\n\nåˆ›å»ºæˆ–ä¿®æ”¹ /etc/docker/daemon.json æ–‡ä»¶ï¼Œä¿®æ”¹ä¸ºå¦‚ä¸‹å½¢å¼ \t\t\n\n```bash\n{\n    \"registry-mirrors\": [\n        \"åŠ é€Ÿåœ°å€\"\n    ],\n    \"insecure-registries\": []\n}\n```\n\nç„¶åé‡å¯dockerå³å¯\n\n```\n$ sudo systemctl daemon-reload\n$ sudo systemctl restart docker\n```\n\n#### Mac\n\nå³é”®ç‚¹å‡»æ¡Œé¢é¡¶æ çš„ docker å›¾æ ‡ï¼Œé€‰æ‹© Preferences ï¼Œåœ¨ Daemon æ ‡ç­¾ï¼ˆDocker 17.03 ä¹‹å‰ç‰ˆæœ¬ä¸º Advanced æ ‡ç­¾ï¼‰ä¸‹çš„ Registry mirrors åˆ—è¡¨ä¸­åŠ å…¥åŠ é€Ÿåœ°å€ã€‚ç‚¹å‡» Apply & Restart æŒ‰é’®ä½¿è®¾ç½®ç”Ÿæ•ˆã€‚\n\nå¦‚å›¾æ‰€ç¤º\n\n<img src=\"https://i.loli.net/2020/08/09/co4XC8i2GrRpN6a.png\" alt=\"image-20200809171907682\" style=\"zoom:50%;\" />\n\n![image-20200809172307328](https://i.loli.net/2020/08/09/htbC3H5TuDVp1fJ.png)\n\n#### Windows\n\nåœ¨æ¡Œé¢å³ä¸‹è§’çŠ¶æ€æ ä¸­å³é”® docker å›¾æ ‡ï¼Œä¿®æ”¹åœ¨ Docker Daemon æ ‡ç­¾é¡µä¸­çš„ json ï¼ŒæŠŠ åŠ é€Ÿåœ°å€åŠ åˆ°\"registry-mirrors\"çš„æ•°ç»„é‡Œã€‚ç‚¹å‡» Apply ä½¿è®¾ç½®ç”Ÿæ•ˆã€‚\n\nå¦‚å›¾æ‰€ç¤º\n\n![image-20200809173030151](https://i.loli.net/2020/08/09/IrRlytDJbkwWmX8.png)\t\n\n![image-20200809173130377](https://i.loli.net/2020/08/09/sOv9E4Zn3jT2uCJ.png)\n\n\n### éªŒè¯Docker HubåŠ é€Ÿå™¨ \n\nå‘½ä»¤è¡Œè¾“å‡ºdocker info,å¦‚æœä»ç»“æœä¸­çœ‹åˆ°äº†å¦‚ä¸‹å†…å®¹ï¼Œè¯´æ˜é…ç½®æˆåŠŸã€‚\n\n```\n[.....]\negistry Mirrors:\n  https://hub-mirror.c.163.com/\n  [....]\n```\n\n### Docker Hub é•œåƒæµ‹é€Ÿ   \n\né€šè¿‡pullæ‹‰å–nginxé•œåƒï¼Œæµ‹è¯•é€Ÿåº¦ã€‚ä½¿ç”¨ `time` ç»Ÿè®¡æ‰€èŠ±è´¹çš„æ€»æ—¶é—´ã€‚æµ‹é€Ÿå‰å…ˆç§»é™¤æœ¬åœ°çš„é•œåƒï¼\n\n```\n$ docker rmi nginx:latest\n$ time docker pull nginx:latest\nlatest: Pulling from library/nginx\nbf5952930446: Pull complete\nba755a256dfe: Pull complete\nc57dd87d0b93: Pull complete\nd7fbf29df889: Pull complete\n1f1070938ccd: Pull complete\nDigest: sha256:36b74457bccb56fbf8b05f79c85569501b721d4db813b684391d63e02287c0b2\nStatus: Downloaded newer image for nginx:latest\ndocker.io/library/nginx:latest\ndocker pull nginx:latest  0.09s user 0.05s system 0% cpu 26.465 total\n```\n\n\n\n## \tæœ‰è¶£çš„dockeré•œåƒ\n\né•œåƒâ‘ ï¼šrastasheep/ubuntu-sshd ï¼ˆå¸¦sshçš„ubuntuï¼‰\n\nåœ°å€ï¼š[https://hub.docker.com/r/rastasheep/ubuntu-sshd/](https://hub.docker.com/r/rastasheep/ubuntu-sshd/)\n\n```bash\nsudo docker run -d -p 22:22 rastasheep/ubuntu-sshd:16.04\n```\n\nç”¨æˆ·åã€å¯†ç ä¸ºroot\n\n------\n\né•œåƒâ‘¡ï¼šitscaro/debian-ssh ï¼ˆå¸¦sshçš„ubuntuï¼‰ \n\nåœ°å€ï¼š[https://hub.docker.com/r/itscaro/debian-ssh/](https://hub.docker.com/r/itscaro/debian-ssh/)\n\n```bash\nsudo docker run -d -p 22:22 itscaro/debian-ssh\n```\n\nç”¨æˆ·åã€å¯†ç ä¸ºroot\n\n------\n\n é•œåƒâ‘¢ï¼štutum/centos ï¼ˆå¸¦sshçš„centosï¼‰ \n\nåœ°å€ï¼š[https://hub.docker.com/r/tutum/centos/](https://hub.docker.com/r/tutum/centos/)\n\n sudo docker run -d -p 22:22  tutum/centos\n\nï¼ˆcentos7ï¼štutum/centos:centos7 ï¼‰\n\nç”¨æˆ·årootï¼Œ\n\nå¯†ç éšæœºï¼Œè¯·æ‰§è¡Œ docker logs <CONTAINER_ID> æŸ¥çœ‹\n\nè¿™ä¸ªä½œè€…è¿˜æœ‰å¥½å¤šå¥½ä¸œè¥¿ï¼š[https://hub.docker.com/r/tutum/centos/](https://hub.docker.com/r/tutum/centos/)\n\n------\n\né•œåƒâ‘£ï¼šalexwhen/docker-2048ï¼ˆæ¸¸æˆ2048ï¼‰\n\nåœ°å€ï¼š[https://hub.docker.com/r/alexwhen/docker-2048/](https://hub.docker.com/r/alexwhen/docker-2048/)\n\nsudo docker run -d -p 80:80 alexwhen/docker-2048\n\n------\n\né•œåƒâ‘¤ï¼šdorowu/ubuntu-desktop-lxde-vncï¼ˆnoVNCã€Firefox51ï¼‰\n\nåœ°å€ï¼š[https://hub.docker.com/r/dorowu/ubuntu-desktop-lxde-vnc/](https://hub.docker.com/r/dorowu/ubuntu-desktop-lxde-vnc/)\n\ndocker run -it  -p 80:80 dorowu/ubuntu-desktop-lxde-vnc\n\nBrowse [http://localhost](http://localhost)\n\n------\n\né•œåƒâ‘¥ï¼šconsol/centos-xfce-vnc ï¼ˆVNCã€noVNCã€å¯†ç ã€chromeã€Firefox45ï¼‰\n\nåœ°å€ï¼š[https://hub.docker.com/r/consol/ubuntu-xfce-vnc/](https://hub.docker.com/r/consol/ubuntu-xfce-vnc/)\n\nrun -it -p 5901:5901 -p 6901:6901 -e â€œVNC_PW=my-new-passwordâ€ -e VNC_RESOLUTION=800Ã—600 consol/centos-xfce-vnc\n\né»˜è®¤VNCå¯†ç ï¼švncpassword\n\nVNC-Server (default VNC port 5901)\n\nnoVNC â€“ HTML5 VNC client (default http port 6901)\n\nå…¶ä»–ç›¸å…³\n\nonsol/centos-xfce-vnc: Centos7 with Xfce4 UI session\n\nconsol/ubuntu-xfce-vnc: Ubuntu with Xfce4 UI session\n\nconsol/centos-icewm-vnc: dev   Centos7 with IceWM UI session\n\nconsol/ubuntu-icewm-vnc: dev    Ubuntu with IceWM UI session\n\n------\n\né•œåƒâ‘¦ï¼šfish/peerflix-server ï¼ˆæ”¯æŒç£åŠ›ï¼Œç§å­ï¼‰\n\nåœ°å€ï¼š[https://hub.docker.com/r/fish/peerflix-server](https://hub.docker.com/r/fish/peerflix-server)\n\ndocker run -it  -p 9000:9000 fish/peerflix-server\n\nBrowse [http://localhost:9000/](http://localhost:9000/)\n\n------\n\né•œåƒâ‘§ï¼šjpillora/cloud-torrentï¼ˆç§å­ä¸‹è½½ï¼Œæœç´¢ï¼‰\n\nåœ°å€ï¼š[https://hub.docker.com/r/jpillora/cloud-torrent/]([https://hub.docker.com/r/jpillora/cloud-torrent/)\n\ndocker run -d -p 3000:3000 -v /path/to/my/downloads:/downloads jpillora/cloud-torrent\n\nBrowse [http://localhos](http://localhost) \n\n------\n\né•œåƒâ‘¨ï¼šjim3ma/google-mirrorï¼ˆgoogleé•œåƒï¼Œå¦‚éœ€sslè¦æ‰‹åŠ¨æ·»åŠ ï¼‰\n\nåœ°å€ï¼š[https://hub.docker.com/r/jim3ma/google-mirror/](https://hub.docker.com/r/jim3ma/google-mirror/)\n\ndocker run -d -p 80:80 jim3ma/google-mirror\n\nBrowse [http://localhos](http://localhost) \n\n------\n\né•œåƒâ’‘ï¼šgoogle-reverse-proxyï¼ˆgoogleé•œåƒï¼Œæœ‰sslï¼‰\n\nåœ°å€ï¼š[https://hub.docker.com/r/jokester/google-reverse-proxy/](https://hub.docker.com/r/jokester/google-reverse-proxy/)\n\ndocker run -d â€“publish 54321:20081 â€“restart=always jokester/google-reverse-proxy\n\nBrowse [https://ip:54321/ ](https://ip:54321/)\n\n------\n\né•œåƒâ’’ï¼šforsaken-mailï¼ˆä¸´æ—¶é‚®ç®±ï¼‰\n\nåœ°å€ï¼š[https://hub.docker.com/r/rockmaity/forsaken-mail/](https://hub.docker.com/r/rockmaity/forsaken-mail/)\n\ndocker run â€“name forsaken-mail -itd -p 25:25 -p 3000:3000 rockmaity/forsaken-mail\n\nBrowse [http://ip:3000/ ](http://ip:3000/)\n\n------\n\né•œåƒâ’“ï¼šimdjh/owncloud-with-ocdownloaderï¼ˆowncloud,torrent,aria2,youtube-dlï¼‰\n\nåœ°å€ï¼š[https://hub.docker.com/r/imdjh/owncloud-with-ocdownloader/](https://hub.docker.com/r/imdjh/owncloud-with-ocdownloader/)\n\ndocker run -d -p 80:80 -e OWNCLOUD_VERSION=9.1.4 -v /var/www/html/data:/var/www/html/data imdjh/owncloud-with-ocdownloader\n\nBrowse [http://ip/ ](http://ip/ )\n\n------\n\né•œåƒâ’”ï¼šv2ray/officialï¼ˆv2rayï¼‰\n\nåœ°å€ï¼š[https://hub.docker.com/r/v2ray/official/](https://hub.docker.com/r/v2ray/official/)\ndocker run -d -p 8001:8001 v2ray/official\n\nå‚è€ƒï¼š[https://liyuans.com/archives/arukas-build-v2ray.html](https://liyuans.com/archives/arukas-build-v2ray.html)\n\n------\n\né•œåƒâ’•ï¼štimonier/aria2\n\nåœ°å€ï¼š[https://hub.docker.com/r/timonier/aria2/](https://hub.docker.com/r/timonier/aria2/)\n\ndocker run -i  -t -v /data:/data â€“net host timonier/aria2 â€“dir=/data â€“enable-rpc â€“rpc-listen-all=true\n\né…åˆä½¿ç”¨ï¼štimonier/webui-aria2ï¼ˆaria2webç®¡ç†ï¼‰\n\nåœ°å€ï¼š[https://hub.docker.com/r/timonier/webui-aria2/](https://hub.docker.com/r/timonier/webui-aria2/)\n\ndocker run -i -t -p 80:80 timonier/webui-aria2\n\n------\n\né•œåƒ15ï¼šjaegerdocker/pan\n\nDocker Hub: [https://hub.docker.com/r/jaegerdocker/pan/](https://hub.docker.com/r/jaegerdocker/pan/)\n\nç®€ä»‹ï¼šDocker-Pan: Filerun + AriaNg + Aria2 å®ç°ç¦»çº¿ä¸‹è½½åŠåœ¨çº¿æ’­æ”¾\n\nè¯¦ç»†ä»‹ç»ï¼šè€å¸æœºä½¿ç”¨ docker-pan ä¸€é”®æ­å»ºå¯ç¦»çº¿ç£åŠ›ç§å­çš„ç§æœ‰äº‘ç›˜,å¯åœ¨çº¿æ’­æ”¾é¢„è§ˆæ–‡ä»¶ \n\nhttps://www.v2ex.com/t/383801\n\n------\n\né•œåƒ16ï¼šaria2-ariang-x-docker-compose\n\nä»£ç åœ°å€ï¼š [https://github.com/wahyd4/aria2-ariang-x-docker-compose](https://github.com/wahyd4/aria2-ariang-x-docker-compose)\n\nç®€ä»‹ï¼šdocker-compose: docker-pan è€å¸æœºä¼˜åŒ–ç‰ˆ / åœ¨çº¿ä¸‹è½½ BT ç£é“¾ / åœ¨çº¿è§‚çœ‹ / å…¨åŠŸèƒ½æ–‡ä»¶ç®¡ç† / äº‘ç›˜åº”ç”¨\n\nè¯¦æƒ…ï¼šè€å¸æœºä¼˜åŒ–ç‰ˆï¼šä½¿ç”¨ docker / docker-compose æ­å»ºåœ¨çº¿ä¸‹è½½ BT, ç£åŠ›é“¾æ¥ï¼Œåœ¨çº¿è§‚çœ‹ï¼Œå…¨åŠŸèƒ½æ–‡ä»¶ç®¡ç†ï¼Œäº‘ç›˜åº”ç”¨ \n\nhttps://www.v2ex.com/t/385118\n\n\n\n\n\n## é™„ï¼šå‚è€ƒèµ„æ–™\t\n\n[https://docs.docker.com/registry/recipes/mirror/](https://docs.docker.com/registry/recipes/mirror/)\n\n[https://y0ngb1n.github.io/a/docker-registry-mirrors.html](https://y0ngb1n.github.io/a/docker-registry-mirrors.html)\n\n[Docker å‘½ä»¤å‚è€ƒæ–‡æ¡£](https://docs.docker.com/engine/reference/commandline/cli/?spm=5176.8351553.0.0.6eb21991rT7ejF)\n\n[Docker å…¥é—¨æ•™ç¨‹](https://www.ruanyifeng.com/blog/2018/02/docker-tutorial.html)\n\n[Dockerå®‰è£…æ–‡æ¡£](https://docs.docker.com/docker-for-windows/install/)\n\n[https://yeasy.gitbook.io/docker_practice/](https://yeasy.gitbook.io/docker_practice/)", "user_name": "å¿ƒæ¢¦", "description": "å¿ƒä¸­æœ‰æ¢¦ï¼Œè„šä¸‹æœ‰è·¯ï¼Œæœªæ¥å°±æœ‰æ–¹å‘ã€‚", "got_view_count": 4021, "category_name": "åç«¯", "ctime": 1457483880}
{"tag_name": "Java", "concern_user_count": 252043, "user_id": "536217406939703", "title": "çœ‹é˜¿é‡ŒP7è®²MyBatisï¼šä»MyBatisçš„ç†è§£ä»¥åŠé…ç½®å’Œå®ç°å…¨å¸®ä½ ææ‡‚", "mark_content": "## å‰è¨€\n\nMyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶ï¼Œä¸€ä¸ªåŠ ORMï¼ˆå¯¹è±¡å…³ç³»æ˜ å°„ï¼‰æ¡†æ¶ï¼Œå®ƒæ”¯æŒå®šåˆ¶åŒ– SQLã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ `å°„ã€‚MyBatis é¿å…äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç å’Œæ‰‹åŠ¨è®¾ç½®å‚æ•°ä»¥åŠè·å–ç»“æœé›†ã€‚MyBatis å¯ä»¥ä½¿ç”¨ç®€å•çš„ XML æˆ–æ³¨è§£æ¥é…ç½®å’Œæ˜ å°„åŸç”Ÿç±»å‹ã€æ¥å£å’Œ Java çš„ POJOï¼ˆPlain Old Java Objectsï¼Œæ™®é€šè€å¼ Java å¯¹è±¡ï¼‰ä¸ºæ•°æ®åº“ä¸­çš„è®°å½•ã€‚\n\n## MyBatisçš„ä½œç”¨\n\nMyBatisä½œç”¨æ˜¯åœ¨æŒä¹…å±‚ä¹Ÿå°±æ˜¯è®¿é—®æ•°æ®åº“çš„æ“ä½œ,ä»¥å‰æˆ‘ä»¬è®¿é—®æ•°æ®åº“æ˜¯ç”¨JDBCæ¥è®¿é—®æ•°æ®åº“,JDBCè®¿é—®æ•°æ®åº“éœ€è¦å†™å¾ˆå¤šé‡å¤çš„ä»£ç ,å‡å¦‚æ•°æ®åº“è®¿é—®å¾ˆå¤šè¿˜éœ€è¦å¯¹æ•°æ®åº“è¿æ¥è¿›è¡Œä¸åœçš„æ‰“å¼€è¿æ¥å’Œå…³é—­è¿æ¥,å¾ˆæ¶ˆè€—ç³»ç»Ÿæ€§èƒ½\nMyBatiså°è£…äº†JDBCåº•å±‚è®¿é—®æ•°æ®åº“çš„ä»£ç ,è®©æˆ‘ä»¬ç¨‹åºçŒ¿åªéœ€è¦å…³å¿ƒå¦‚ä½•å»å†™å¥½SQLå°±å¥½,ä¸åœ¨éœ€è¦å»å†™JDBCåº•å±‚çš„ä»£ç \n\n## MyBatisçš„ä¼˜ç¼ºç‚¹\n\n## ä¼˜ç‚¹\n\n*   MyBatiså°è£…äº†JBDCåº•å±‚è®¿é—®æ•°æ®åº“çš„ç»†èŠ‚,ä½¿æˆ‘ä»¬ç¨‹åºçŒ¿ä¸éœ€è¦ä¸JDBC APIæ‰“äº¤é“,å°±å¯ä»¥è®¿é—®æ•°æ®åº“\n*   MyBatisç®€å•æ˜“å­¦,ç¨‹åºçŒ¿ç›´æ¥ç¼–å†™SQLè¯­å¥,é€‚åˆäºå¯¹SQLè¯­å¥æ€§èƒ½è¦æ±‚æ¯”è¾ƒé«˜çš„é¡¹ç›®\n*   SQLè¯­å¥å°è£…åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œä¾¿äºç»Ÿä¸€ç®¡ç†ä¸ç»´æŠ¤ï¼Œé™ä½äº†ç¨‹åºçš„è€¦åˆåº¦\n*   SQLä»£ç ä»ç¨‹åºä»£ç ä¸­å½»åº•åˆ†ç¦»å‡ºæ¥ï¼Œå¯é‡ç”¨\n*   æä¾›äº†åŠ¨æ€SQLæ ‡ç­¾ï¼Œæ”¯æŒç¼–å†™åŠ¨æ€SQL\n*   æä¾›æ˜ å°„æ ‡ç­¾ï¼Œæ”¯æŒå¯¹è±¡ä¸æ•°æ®åº“çš„ORMå­—æ®µå…³ç³»æ˜ å°„\n\n## ç¼ºç‚¹\n\n*   è¿‡äºä¾èµ–æ•°æ®åº“SQLè¯­å¥,å¯¼è‡´æ•°æ®åº“ç§»æ¤æ€§å·®,æ›´æ¢æ•°æ®åº“,å¦‚æœSQLè¯­å¥æœ‰å·®å¼‚,SQLè¯­å¥å·¥ä½œé‡å¤§\n*   ç”±äºxmlé‡Œæ ‡ç­¾idå¿…é¡»å”¯ä¸€ï¼Œå¯¼è‡´DAOä¸­æ–¹æ³•ä¸æ”¯æŒæ–¹æ³•é‡è½½\n\n# MyBatisçš„é…ç½®æ–‡ä»¶\n\n## propertieså…ƒç´ \n\npropertieså…ƒç´ æè¿°çš„éƒ½æ˜¯å¤–éƒ¨åŒ–,å¯æ›¿ä»£çš„å±æ€§\nä¸€èˆ¬ç”¨æ¥é…ç½®è¿æ¥æ•°æ®æº,æˆ‘ä»¬å¯ä»¥ä½¿ç”¨propertyå­èŠ‚ç‚¹æ¥é…ç½®ä¹Ÿå¯ä»¥ä½¿ç”¨èµ„æºè·¯å¾„å¼•ç”¨\n\nä½¿ç”¨propertyå­èŠ‚ç‚¹æ¥é…ç½®\n\n```\n    <properties>\n        <property name=\"driver\" value=\"com.mysql.jdbc.Driver\"/>\n        <property name=\"url\" value=\"jdbc:mysql:///mybatis\"/>\n        <property name=\"username\" value=\"root\"/>\n        <property name=\"password\" value=\"root\"/>\n    </properties>\n\n```\n\nä½¿ç”¨èµ„æºè·¯å¾„å¼•ç”¨\n\n```\n    <properties resource=\"jdbcConfig.properties\"/>\n\n```\n\njdbcConfig.propertiesé‡Œé¢çš„å±æ€§\n\n```\ndriver=com.mysql.jdbc.Driver\nurl=jdbc:mysql://127.0.0.1:3306/test\nusername=root\npassword=123456\n\n```\n\nè¿æ¥æ•°æ®æºçš„é…ç½®\n\n```\n\t<dataSource type=\"POOLED\">\n        <property name=\"driver\" value=\"${driver}\"/>\n        <property name=\"url\" value=\"${url}\"/>\n        <property name=\"username\" value=\"${username}\"/>\n        <property name=\"password\" value=\"${password}\"/>\n    </dataSource>\n\n```\n\nå‡å¦‚ä½¿ç”¨propertyå­èŠ‚ç‚¹æ¥é…ç½®å’Œä½¿ç”¨èµ„æºè·¯å¾„å¼•ç”¨éƒ½ç”¨äº†,è¿™ä¸ªæ—¶å€™MyBatisä¼šè°ƒç”¨å“ªä¸ªå‹’?MyBatisä¼šè°ƒç”¨èµ„æºè·¯å¾„å¼•ç”¨çš„å±æ€§å€¼,å› ä¸ºèµ„æºè·¯å¾„å¼•ç”¨çš„ä¼˜å…ˆçº§é«˜äºpropertyå­èŠ‚ç‚¹çš„ä¼˜å…ˆçº§\n\n## settingså…ƒç´ \n\nsettingsæ˜¯ MyBatis ä¸­æä¸ºé‡è¦çš„è°ƒæ•´è®¾ç½®ï¼Œå®ƒä»¬ä¼šæ”¹å˜ MyBatis çš„è¿è¡Œæ—¶è¡Œä¸º\n\n```\n    <settings>\n        <!-- å…¨å±€æ˜ å°„å™¨å¯ç”¨ç¼“å­˜ -->\n        <setting name=\"cacheEnabled\" value=\"true\"/>\n\n        <!-- æŸ¥è¯¢æ—¶ï¼Œå…³é—­å…³è”å¯¹è±¡å³æ—¶åŠ è½½ä»¥æé«˜æ€§èƒ½ -->\n        <setting name=\"lazyLoadingEnabled\" value=\"true\"/>\n\n        <!-- è®¾ç½®å…³è”å¯¹è±¡åŠ è½½çš„å½¢æ€ï¼Œæ­¤å¤„ä¸ºæŒ‰éœ€åŠ è½½å­—æ®µ (åŠ è½½å­—æ®µç”± SQLæŒ‡ å®š )ï¼Œä¸ä¼šåŠ è½½å…³è”è¡¨çš„æ‰€æœ‰å­—æ®µï¼Œä»¥æé«˜æ€§èƒ½ -->\n        <setting name=\"aggressiveLazyLoading\" value=\"false\"/>\n\n        <!-- å¯¹äºæœªçŸ¥çš„ SQLæŸ¥è¯¢ï¼Œå…è®¸è¿”å›ä¸åŒçš„ç»“æœé›†ä»¥è¾¾åˆ°é€šç”¨çš„æ•ˆæœ -->\n        <setting name=\"multipleResultSetsEnabled\" value=\"true\"/>\n\n        <!-- å…è®¸ä½¿ç”¨åˆ—æ ‡ç­¾ä»£æ›¿åˆ—å -->\n        <setting name=\"useColumnLabel\" value=\"true\"/>\n\n        <!-- å…è®¸ä½¿ç”¨è‡ªå®šä¹‰çš„ä¸»é”®å€¼ (æ¯”å¦‚ç”±ç¨‹åºç”Ÿæˆçš„ UUID 32ä½ç¼–ç ä½œä¸ºé”®å€¼ )ï¼Œæ•°æ®è¡¨çš„ PKç”Ÿæˆç­–ç•¥å°†è¢«è¦†ç›– -->\n        <setting name=\"useGeneratedKeys\" value=\"true\"/>\n\n        <!-- ç»™äºˆè¢«åµŒå¥—çš„ resultMapä»¥å­—æ®µ -å±æ€§çš„æ˜ å°„æ”¯æŒ -->\n        <setting name=\"autoMappingBehavior\" value=\"FULL\"/>\n\n        <!-- å¯¹äºæ‰¹é‡æ›´æ–°æ“ä½œç¼“å­˜ SQLä»¥æé«˜æ€§èƒ½ -->\n        <setting name=\"defaultExecutorType\" value=\"BATCH\"/>\n\n        <!-- æ•°æ®åº“è¶…è¿‡ 25000ç§’ä»æœªå“åº”åˆ™è¶…æ—¶ -->\n        <setting name=\"defaultStatementTimeout\" value=\"25000\"/>\n    </settings>\n\n```\n\n## typeAliaseså…ƒç´ \n\ntypeAliaseså…ƒç´ çš„ä½œç”¨æ˜¯ç»™JavaBeanå–åˆ«å,æ–¹ä¾¿æˆ‘ä»¬åœ¨mappeeré…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨\n\nå½“æˆ‘ä»¬æ²¡æœ‰ç»™JavaBeanå–åˆ«å,mapperé…ç½®æ–‡ä»¶ä¸­è·å–JavaBeançš„æ—¶å€™,æˆ‘ä»¬å°±éœ€è¦è·å–JavaBeanæ‰€åœ¨é¡¹ç›®é‡Œé¢çš„å…¨è·¯å¾„\n\n```\n    <!--çœç•¥éƒ¨åˆ†ä»£ç -->\n    <select id=\"login\" resultType=\"cn.friday.pojo.DevUser\">\n        SELECT * FROM dev_user WHERE devCode=#{devCode} AND devPassword=#{devPassword}\n    </select>\n\n```\n\næ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥ç»™JavaBeanå–åˆ«å\n\n```\n    <typeAliases>\n        <typeAlias type=\"cn.friday.pojo.DevUser\" alias=\"devUser\"/>\n        <typeAlias type=\"cn.friday.pojo.AppInfo\" alias=\"appInfo\"/>\n    </typeAliases>\n\n```\n\nç»™æ¯ä¸ªJavaBeanå»å–ä¸€ä¸ªæŒ‡å®šçš„åˆ«å,è¿™æ ·æ˜¯æœ‰ç¼ºé™·çš„,ä¸‡ä¸€é¡¹ç›®ä¸­æœ‰å¾ˆå¤šä¸ªPOJOé‚£ä¹ˆå·¥ä½œé‡å°±å¤§äº†,ä¸è¿‡è¿˜æœ‰ä¸€ç§æ–¹æ³•ç»™æŒ‡å®šçš„åŒ…é‡Œé¢æ‰€æœ‰çš„JavaBeanéƒ½å–ä¸€ä¸ªåˆ«å,MyBatisä¼šè‡ªåŠ¨æ‰«ææ‰€æŒ‡å®šçš„åŒ…ä¸‹çš„JavaBeanå¹¶ä¸”ç»™ä¸€ä¸ªé»˜è®¤çš„åˆ«å,é»˜è®¤çš„åˆ«åä¸ºJavaBeançš„åç§°,è¯·çœ‹ä¸‹é¢\n\n```\n    <typeAliases>\n        <package name=\"cn.friday.pojo\"/>\n    </typeAliases>\n\n```\n\nmapperé‡Œé¢çš„é…ç½®æ–‡ä»¶å°±å¯ä»¥æ­£å¸¸ä½¿ç”¨JavaBeanå–çš„åˆ«åäº†,ä¸éœ€è¦å†å»è·å–JavaBeançš„å…¨è·¯å¾„äº†\n\n```\n    <!--çœç•¥éƒ¨åˆ†ä»£ç -->\n    <select id=\"login\" resultType=\"DevUser\">\n        SELECT * FROM dev_user WHERE devCode=#{devCode} AND devPassword=#{devPassword}\n    </select>\n\n```\n\n## environmentså…ƒç´ \n\nMyBatiså¯ä»¥é…ç½®å¤šç§ç¯å¢ƒ,å¦‚å¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒã€ç”Ÿäº§ç¯å¢ƒç­‰,æˆ‘ä»¬å¯ä»¥çµæ´»é€‰æ‹©ä¸åŒçš„é…ç½®,ä»è€Œå°†SQLæ˜ å°„åº”ç”¨åˆ°ä¸åŒçš„æ•°æ®åº“ç¯å¢ƒä¸Š.è¿™äº›ä¸åŒçš„è¿è¡Œç¯å¢ƒæˆ‘ä»¬å°±å¯ä»¥ç”¨environmentså…ƒç´ æ¥é…ç½®å®ç°\n\nenvironmentså…ƒç´ å…ƒç´ çš„é…ç½®\n\n```\n\t<!--å¼€å‘ç¯å¢ƒ-->\n \t<!--defaultå±æ€§è¡¨ç¤ºåœ¨é»˜è®¤çš„æƒ…å†µä¸‹æˆ‘ä»¬å°†å¯ç”¨çš„æ•°æ®æº-->\n    <environments default=\"development\">\n    <!--idå±æ€§ç”¨æ¥æ ‡è¯†ä¸€ä¸ªæ•°æ®æºçš„ï¼Œæ–¹ä¾¿åœ¨MyBatisä¸­ä½¿ç”¨ -->\n        <environment id=\"development\">\n            <!-- ä½¿ç”¨jdbcäº‹åŠ¡ç®¡ç† -->\n            <transactionManager type=\"JDBC\"/>\n            <!-- é…ç½®æ•°æ®åº“è¿æ¥æ±  -->\n            <dataSource type=\"POOLED\">\n                <property name=\"driver\" value=\"com.mysql.jdbc.Driver\"/>\n                <property name=\"url\" value=\"jdbc:mysql://127.0.0.1:3306/test\"/>\n                <property name=\"username\" value=\"root\"/>\n                <property name=\"password\" value=\"123456\"/>\n            </dataSource>\n        </environment>\n\n        <!--æˆ‘ä»¬åœ¨æ¥é…ç½®ä¸€ä¸ªæµ‹è¯•ç¯å¢ƒ-->\n         <environment id=\"test\">\n            <!-- ä½¿ç”¨jdbcäº‹åŠ¡ç®¡ç† -->\n            <transactionManager type=\"JDBC\"/>\n            <!-- é…ç½®æ•°æ®åº“è¿æ¥æ±  -->\n            <dataSource type=\"POOLED\">\n                <property name=\"driver\" value=\"com.mysql.jdbc.Driver\"/>\n                <property name=\"url\" value=\"jdbc:mysql://127.0.0.1:3306/test1\"/>\n                <property name=\"username\" value=\"root\"/>\n                <property name=\"password\" value=\"123456\"/>\n            </dataSource>\n        </environment>\n    </environments>\n\n```\n\nå‡å¦‚æˆ‘ä»¬æƒ³ä»å¼€å‘ç¯å¢ƒå˜æˆæµ‹è¯•ç¯å¢ƒåªéœ€è¦ä¿®æ”¹environmentså…ƒç´ é‡Œé¢çš„defaultå±æ€§å³å¯\n\n```\n <environments default=\"test\">\n \t<!--çœç•¥éƒ¨åˆ†ä»£ç -->\n </environments>\n\n```\n\n## mapperså…ƒç´ \n\nmappersæ˜ å°„å™¨,è¯´ç®€å•ç‚¹å°±æ˜¯å‘Šè¯‰MyBatiså»å“ªé‡Œæ‰¾åˆ°SQLè¯­å¥æ˜ å°„æ–‡ä»¶,æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç±»èµ„æºè·¯å¾„æˆ–è€…æ˜¯URLç­‰\nç”¨ç±»èµ„æºè·¯å¾„è·å–æ˜ å°„æ–‡ä»¶\n\n```\n    <mappers>\n        <mapper resource=\"cn/friday/dao/developer/DevUserMapper.xml\"/>\n        <mapper resource=\"cn/friday/dao/developer/AppInfoMapper.xml\"/>\n    </mappers>\n\n```\n\nç”¨URLè·å–æ˜ å°„æ–‡ä»¶\n\n```\n    <mappers>\n          <mapper url=\"file:///D:/mappers/DevUserMapper.xml\"/>\n          <mapper url=\"file:///D:/mappers/AppInfoMapper.xml\"/>\n    </mappers>\n\n```\n\n## å¦‚ä½•å®ç°MyBatis\n\nå…ˆç»™å¤§å®¶çœ‹ä¸€ä¸‹æˆ‘çš„é¡¹ç›®ç»“æ„\n![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fb4483345a7d4de39eb9800072f5e481~tplv-k3u1fbpfcp-zoom-1.image)\n\n## ç¬¬ä¸€æ­¥ å¯¼å…¥ä¾èµ–\n\næˆ‘çš„æ˜¯mavené¡¹ç›®æ‰€ä»¥åªéœ€è¦åœ¨pox.xmlé…ç½®æ–‡ä»¶ä¸­æ·»åŠ å…³äºMyBatisçš„ä¾èµ–å³å¯\n\n```\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n    <modelVersion>4.0.0</modelVersion>\n\n    <groupId>org.example</groupId>\n    <artifactId>MyBatis</artifactId>\n    <version>1.0-SNAPSHOT</version>\n\n    <dependencies>\n        <dependency>\n            <groupId>junit</groupId>\n            <artifactId>junit</artifactId>\n            <version>4.11</version>\n            <scope>test</scope>\n        </dependency>\n\n        <dependency>\n        <groupId>mysql</groupId>\n        <artifactId>mysql-connector-java</artifactId>\n        <version>6.0.6</version>\n    </dependency>\n\n        <dependency>\n            <groupId>org.mybatis</groupId>\n            <artifactId>mybatis</artifactId>\n            <version>3.4.4</version>\n        </dependency>\n\n    </dependencies>\n\n    <build>\n    <resources>\n        <resource>\n            <directory>src/main/java/</directory>\n            <includes>\n                <include>**/*.xml</include>\n            </includes>\n        </resource>\n    </resources>\n    </build>\n</project>\n\n```\n\n## ç¬¬äºŒæ­¥ åˆ›å»ºMyBatisé…ç½®æ–‡ä»¶\n\nè¿™äº›é…ç½®æ–‡ä»¶ä¸Šé¢ä¹Ÿç”¨è®²çš„è¿‡è¿™é‡Œå°±ä¸åšè¿‡å¤šçš„è§£é‡Šäº†\n\n```\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE configuration PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-config.dtd\">\n<configuration>\n    <properties resource=\"jdbc-config.properties\"/>\n\n    <typeAliases>\n        <package name=\"com.friday.pojo\"/>\n    </typeAliases>\n\n    <environments default=\"test\">\n        <environment id=\"test\">\n            <transactionManager type=\"JDBC\"></transactionManager>\n            <dataSource type=\"POOLED\">\n                <property name=\"driver\" value=\"${driver}\"/>\n                <property name=\"url\" value=\"${url}\"/>\n                <property name=\"username\" value=\"${username}\"/>\n                <property name=\"password\" value=\"${password}\"/>\n            </dataSource>\n        </environment>\n    </environments>\n\n    <mappers>\n        <mapper resource=\"com/friday/dao/UserMapper.xml\"></mapper>\n    </mappers>\n</configuration>\n\n```\n\njdbc-config.propertiesé‡Œé¢çš„å±æ€§\n\n```\ndriver=com.mysql.jdbc.Driver\nurl=jdbc:mysql://127.0.0.1:3306/test?serverTimezone=UTC\nusername=root\npassword=123456\n\n```\n\n## ç¬¬ä¸‰æ­¥ åˆ›å»ºæ¥å£ä»¥åŠæ˜ å°„æ–‡ä»¶\n\næ¥å£,æ™®é€šçš„javaæ¥å£\n\n```\npackage com.friday.dao;\n\nimport com.friday.pojo.User;\nimport org.apache.ibatis.annotations.Param;\n\npublic interface UserMapper {\n//@Paramç›¸å¯¹åº”ç»™String userCodeå–äº†ä¸€ä¸ªåˆ«åå«åšuserPassword,æˆ‘ä»¬åˆ°å†™æ˜ å°„SQLè¯­å¥çš„æ—¶å€™åªæœ‰#{æ³¨è§£åç§°}å³å¯,å¦‚#{userPassword}\n    public User login(@Param(\"userCode\") String userCode,@Param(\"userPassword\") String pwd);\n}\n\n```\n\næ˜ å°„æ–‡ä»¶\n\n```\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE mapper PUBLIC\n        \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"com.friday.dao.UserMapper\">\n    <select id=\"login\" resultType=\"User\" parameterType=\"string\">\n        SELECT * FROM smbms_user WHERE userCode=#{userCode} AND userPassword=#{userPassword}\n    </select>\n</mapper>\n\n```\n\nmapper æ–‡ä»¶é‡Œé¢çš„å±æ€§\n\n*   namespaceå±æ€§ æŒ‡å®šç›¸å¯¹åº”çš„æ¥å£\n*   idå±æ€§ æ¥å£é‡Œé¢å…·ä½“çš„æ–¹æ³•å\n*   resultType è¿”å›å€¼çš„ç±»å‹\n*   resultType ä¼ è¿›æ¥çš„å‚æ•°çš„ç±»å‹\n\n## ç¬¬å››æ­¥ æµ‹è¯•\n\n```\npackage com.friday.test;\n\nimport com.friday.dao.UserMapper;\nimport com.friday.pojo.User;\nimport org.apache.ibatis.annotations.Param;\nimport org.apache.ibatis.io.Resources;\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\nimport java.io.IOException;\nimport java.io.InputStream;\n\npublic class MyBatisTest {\n   public static void main(String[] args) throws IOException {\n       //è¯»å–mybatisé…ç½®æ–‡ä»¶\n       String resource = \"mybatis-config.xml\";\n       //è·å–mybatisé…ç½®æ–‡ä»¶çš„è¾“å…¥æµ\n       InputStream is = Resources.getResourceAsStream(resource);\n       //åˆ›å»ºSqlSessionFactoryå¯¹è±¡\n       SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(is);\n       //æ‰“å¼€sqlSessionå¯¹è±¡\n       SqlSession sqlSession =  factory.openSession();\n\n       //è·å–å¯¹åº”çš„Mapperï¼Œè®©æ˜ å°„å™¨é€šè¿‡å‘½åç©ºé—´å’Œæ–¹æ³•åç§°æ‰¾åˆ°å¯¹åº”çš„SQLï¼Œå‘é€ç»™æ•°æ®åº“æ‰§è¡Œåè¿”å›ç»“æœã€‚\n       User user = sqlSession.getMapper(UserMapper.class).login(\"zhanghua\",\"userPassword\");\n\n       //çœ‹ä¸€ä¸‹æ˜¯å¦å¯ä»¥æŸ¥åˆ°æ•°æ®\n       if (user != null) {\n           System.out.println(\"ç™»å½•æˆåŠŸ\");\n       } else {\n           System.out.println(\"ç™»å½•å¤±è´¥\");\n       }\n\n       //å…³é—­sqlSessionå¯¹è±¡\n       sqlSession.close();\n   }\n}\n```\n## æœ€å\næ„Ÿè°¢ä½ çœ‹åˆ°è¿™é‡Œï¼Œçœ‹å®Œæœ‰ä»€ä¹ˆçš„ä¸æ‡‚çš„å¯ä»¥åœ¨è¯„è®ºåŒºé—®æˆ‘ï¼Œè§‰å¾—æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©çš„è¯è®°å¾—ç»™æˆ‘ç‚¹ä¸ªèµï¼Œæ¯å¤©éƒ½ä¼šåˆ†äº«javaç›¸å…³æŠ€æœ¯æ–‡ç« æˆ–è¡Œä¸šèµ„è®¯ï¼Œæ¬¢è¿å¤§å®¶å…³æ³¨å’Œè½¬å‘æ–‡ç« ï¼\n", "user_name": "å‰ç¨‹æœ‰å…‰", "description": "", "got_view_count": 35979, "category_name": "åç«¯", "ctime": 1457483880}
{"tag_name": "Android", "concern_user_count": 240175, "user_id": "272334612601559", "title": "Looper.loop()å¼•å‘çš„æƒ¨æ¡ˆ", "mark_content": "## 1ã€æ¡ˆä»¶æè¿°\n\nåœ¨ä¸€ä¸ªå®‰é™çš„ä¸‹åˆï¼Œä¸€å¦¹å­åœ¨`RxHttp`ç¾¤é‡Œåé¦ˆ(ç¾¤å·ï¼š378530627)ï¼Œè‡ªå·±å¼€å‘çš„appï¼Œè´¦å·è¢«æŒ¤ä¸‹çº¿æ—¶ï¼Œé‡æ–°ç™»å½•åˆ°é¦–é¡µåï¼Œå‘ç°æœ‰ä¸€ä¸ªè¯·æ±‚ï¼Œä»£ç æ‰§è¡Œäº†ï¼Œå´æ²¡æœ‰ä»»ä½•å›è°ƒï¼Œçœ‹å¾—å‡ºï¼Œå¦¹å­å¾ˆç€æ€¥ã€‚\n\n\n\nwhat ???  è¿˜æœ‰è¿™ç§äº‹ï¼ŸåŸæœ¬å®‰é™çš„ç¾¤ï¼Œä¸€ä¸‹æ´»è·ƒäº†èµ·æ¥ï¼Œç”·åŒèƒä»¬ä¸€é¡¿ç‹‚çŒœï¼Œæˆ‘æ€»ç»“äº†ä¸‹ï¼Œå¦‚ä¸‹ï¼š\n\n- ä¼šä¸ä¼šè¯·æ±‚ä»£ç æ²¡æ‰§è¡Œï¼Œå¦¹å­è‡ªå·±æé”™äº†å§ï¼Ÿ\n\n- å‘è¯·æ±‚å‰ï¼Œå‡ºç°å¼‚å¸¸ï¼Œä»£ç è¢«ä¸­æ–­è¿è¡Œï¼Ÿ\n\n- è¯·æ±‚è¿‡ç¨‹ä¼´éšç€é¡µé¢è·³è½¬ï¼Œå¯¼è‡´é¡µé¢é”€æ¯æ—¶ï¼Œè¯·æ±‚è¢«è‡ªåŠ¨å…³é—­ï¼Ÿ\n\n- è¯·æ±‚è¿‡ç¨‹å‡ºç°å¼‚å¸¸ï¼Œè¢«RxJavaå…¨å±€å¼‚å¸¸æ•è·äº†ï¼Œå¹¶åƒæ‰äº†ï¼Œæ‰€ä»¥æ”¶ä¸åˆ°å¤±è´¥å›è°ƒï¼Ÿ\n\n\n\nè¿™é‡Œè§£é‡Šä¸‹ï¼Œå¦¹å­é‡‡ç”¨`RxHttp+RxJava`ç»“åˆçš„æ–¹å¼å‘è¯·æ±‚\n\n\n\nç»è¿‡ç¬¬ä¸€è½®è¯¢é—®åï¼Œä»¥ä¸ŠçŒœæƒ³è½»è€Œæ˜“ä¸¾çš„è¢«æ¨ç¿»äº†ï¼Œæˆ‘ä¹Ÿå¤§æ¦‚çŸ¥é“äº†æ¡ˆä»¶çš„ç»†èŠ‚ï¼Œä¸ºæ­¤ï¼Œæˆ‘ç”¨ä»£ç æ¥è¿˜åŸä¸€ä¸‹ï¼Œä¸ºç®€åŒ–æ¡ˆä»¶ï¼Œè¿˜åŸæ—¶ï¼Œæˆ‘ä¼šé€‚å½“çš„åšå‡ºä¿®æ”¹ï¼Œä½†æ„æ€è¿˜æ˜¯é‚£ä¸ªæ„æ€ã€‚\n\n## 2ã€æ¡ˆä»¶è¿˜åŸ\n\nå¦¹å­åœ¨é¦–é¡µ`MainActivity`çš„`OnCreate`æ–¹æ³•ï¼Œä¼šå¹¶è¡Œ3ä¸ªè¯·æ±‚ï¼Œå¦‚ä¸‹ï¼š\n\n```java\n@Override                                                              \nprotected void onCreate(Bundle savedInstanceState) {                   \n    super.onCreate(savedInstanceState);                                \n    setContentView(R.layout.main_activity);                            \n    request1();                                                        \n    request2();                                                        \n    request3();                                                        \n}                                                                      \n                                                                                                                                            \npublic void request1() {                                               \n    RxHttp.get(\"/service/...\")                                         \n        .asString()                                                    \n        .to(RxLife.toMain(this))  //é¡µé¢é”€æ¯ï¼Œè‡ªåŠ¨å…³é—­è¯·æ±‚ï¼Œå¹¶åœ¨UIçº¿ç¨‹å›è°ƒ                        \n        .subscribe(s -> {                                              \n            //æˆåŠŸå›è°ƒ                                                     \n        }, throwable -> {                                              \n            //å¼‚å¸¸å›è°ƒ                                                     \n        });                                                            \n}                                                                      \n                                                                       \npublic void request2() {                                               \n    //çœç•¥è¯·æ±‚ä»£ç ï¼Œè¯·æ±‚ä»£ç ç±»ä¼¼request1()æ–¹æ³•                                        \n}                                                                      \n                                                                       \npublic void request3() {                                               \n    //çœç•¥è¯·æ±‚ä»£ç ï¼Œè¯·æ±‚ä»£ç ç±»ä¼¼request1()æ–¹æ³•                                        \n}                                                                      \n```\n\n\n\nè¿™æ®µä»£ç çœ‹èµ·æ¥å¹¶æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œæ­£å¸¸ç™»å½•è¿›æ¥åï¼Œéƒ½æ˜¯æ­£å¸¸çš„ã€‚\n\nä½†æ˜¯å½“è´¦å·è¢«æŒ¤ä¸‹çº¿å(æŒ¤åˆ°ç™»å½•é¡µ)ï¼Œé‡æ–°ç™»å½•åˆ°é¦–é¡µåï¼Œå‘ç°`request1()ã€request2()ã€request3()`ä¸‰ä¸ªè¯·æ±‚æ–¹æ³•éƒ½æ‰§è¡Œäº†ï¼Œå¯`request2()`æ–¹æ³•å´è¿Ÿè¿Ÿæ”¶ä¸åˆ°å›è°ƒï¼Œä¸ç®¡æˆåŠŸ/å¤±è´¥éƒ½æ”¶ä¸åˆ°ã€‚\n\n\n\n## 3ã€å¼€å§‹åŠæ¡ˆ\n\nä»¥ä¸ŠçŒœæƒ³å…¨éƒ¨è¢«æ¨ç¿»ï¼Œæ¥ä¸‹æ¥æ€ä¹ˆåŠï¼Ÿå¾ˆæ˜æ˜¾ï¼Œæˆ‘ä»¬è¦æ˜ç¡®ä¸€ç‚¹ï¼š\n\n`è¯·æ±‚åˆ°åº•æœ‰æ²¡æœ‰å‘å‡ºå»ï¼ŸæœåŠ¡ç«¯æœ‰æ²¡æœ‰æ”¶åˆ°è¿™ä¸ªè¯·æ±‚ï¼Ÿ`\n\n\n\néšåï¼Œå¦¹å­ç”¨`Adnroid Studio`è‡ªå¸¦çš„`Profiler`å·¥å…·ï¼Œç›‘æ§äº†ä¸‹ï¼Œå‘ç°è¯·æ±‚å¹¶æœªå‘å‡ºæ¥ï¼Œæ¥ç€ï¼Œåˆæ‰¾åå°äººå‘˜ç¡®è®¤äº†ä¸‹ï¼Œåå°ä¹Ÿå¹¶æœªæ”¶åˆ°è¿™ä¸ªè¯·æ±‚ã€‚\n\n\n\né‚£å°±æ›´å¥‡æ€ªäº†ï¼Œè¯·æ±‚ä»£ç æ‰§è¡Œäº†ï¼Œè¯·æ±‚å´æ²¡æœ‰å‘å‡ºå»ï¼Ÿä½œä¸ºç¨‹åºå‘˜çš„æˆ‘ç¬¬ä¸€ååº”ï¼Œè¿™æ€ä¹ˆå¯èƒ½å‘¢ï¼Ÿå¦¹å­ä½ ç”¨çš„æ‰‹æœºæœ‰é—®é¢˜å§ï¼Ÿè¦ä¸æ¢ä¸ªæ‰‹æœºè¯•è¯•ï¼Ÿæ˜¾ç„¶æ¢äº†æ‰‹æœºï¼Œé—®é¢˜ä¸€æ ·å­˜åœ¨ï¼Œè¿™å°±å°´å°¬äº†ã€‚\n\n\n\næ¥ä¸‹æ¥ï¼Œè·Ÿå¦¹å­ä¸æ–­çš„è°ƒè¯•ï¼Œä¸€è€Œå†ï¼Œå†è€Œä¸‰çš„ç¡®è®¤äº†ï¼Œè¯·æ±‚ä»£ç æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œç„¶è€Œï¼Œæˆ‘å´é™·å…¥äº†æ²‰æ€ä¹‹ä¸­ï¼Œå¾ˆç»æœ›ï¼Œå¾ˆæ— åŠ©ï¼Œç”šè‡³æ€€ç–‘è¿™æ˜¯`OkHttp`çš„é—®é¢˜ã€‚\n\n\n\nä½œä¸ºä¸€åè€é¸Ÿï¼Œæœ€åæˆ‘è¿˜æ˜¯å†·é™äº†ä¸‹æ¥ï¼Œé‡æ–°æ•´ç†äº†çº¿ç´¢ï¼Œå‘ç°åˆä¸€æ¡çº¿ç´¢è¢«é—æ¼äº†ï¼Œé‚£å°±æ˜¯è´¦å·è¢«æŒ¤ï¼Œè‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µé¢ï¼Œä¸ºä»€ä¹ˆåªæœ‰åœ¨è´¦å·è¢«æŒ¤æ—¶ï¼Œæ‰ä¼šå‡ºç°é—®é¢˜ï¼Ÿäºæ˜¯ä¹ï¼Œæˆ‘è°ƒæ•´äº†è°ƒæŸ¥æ–¹å‘\n\n- è´¦å·æ˜¯å¦‚ä½•è¢«æŒ¤ï¼Ÿåˆæ˜¯å¦‚ä½•è·³è½¬åˆ°ç™»å½•é¡µé¢çš„ï¼Ÿ\n\nç»ˆäºï¼Œå‡¶æ‰‹éœ²å‡ºäº†æ°´é¢ï¼Œå‡¶æ‰‹å°±æ˜¯`Looper`ï¼ŒåŸæ¥å¦¹å­æ˜¯é€šè¿‡`OkHttp`çš„æ‹¦æˆªå™¨æ¥ç›‘å¬è´¦å·è¢«æŒ¤ï¼Œå¹¶é€šè¿‡`Looper`æ¥å¼¹å‡ºä¸€ä¸ª`Toast`æç¤ºï¼Œå¹¶ä¸”æ‰§è¡Œé¡µé¢è·³è½¬é€»è¾‘ï¼Œå¦‚ä¸‹ï¼š\n\n```java\npublic class TokenInterceptor implements Interceptor {\n    \n    private Context context;\n    \n    //çœç•¥éƒ¨åˆ†ä»£ç \n\n    @Override\n    public Response intercept(Chain chain) throws IOException {\n        Request request = chain.request();\n        Response originalResponse = chain.proceed(request);\n        String code = originalResponse.header(\"code\");\n        if (\"-1\".equals(code)) { //è´¦å·è¢«æŒ¤\n            Looper.prepare();\n            Toast.makeText(context, \"ä½ çš„è´¦å·åœ¨å…¶å®ƒè®¾å¤‡ä¸Šç™»å½•\", Toast.LENGTH_LONG).show();\n            context.startActivity(new Intent(context, LoginActivity.class));\n            Looper.loop();\n        }\n        return originalResponse;\n    }\n}\n```\n\nä¹Ÿè®¸ä½ ä¼šé—®ï¼Œè¿™ç¡®å®šæœ‰é—®é¢˜ï¼Ÿé€šè¿‡`Looper`åœ¨å­çº¿ç¨‹å¼¹å‡ºä¸€ä¸ª`Toast`ï¼Œè¿™ä¸æ˜¯å¾ˆæ­£å¸¸çš„ä¸€ä»¶äº‹ï¼Ÿç»å¸¸è¿™ä¹ˆå¹²ï¼Œä»æ¥æ²¡å‡ºç°ä»»ä½•é—®é¢˜ï¼Œä¸ºå•¥åˆ°ä½ è¿™å°±å‡ºé—®é¢˜ï¼Ÿ\n\n\n\næˆ‘è®©å¦¹å­æŠŠ`LooperåŠToast`ä»£ç æ³¨é‡Šæ‰ï¼Œ`if`è¯­å¥é‡Œé¢åªä¿ç•™ä¸€è¡Œ`startActivity`ï¼Œå¦¹å­è¯•åå¼€å¿ƒçš„è·Ÿæˆ‘è¯´ï¼Œå¥½äº†ï¼Œæ²¡é—®é¢˜äº†ï¼Œè¿™æ€ä¹ˆè§£é‡Šï¼Ÿ\n\n\n\n## 4ã€å¼€å§‹ç ´æ¡ˆ\n\n`Looper`ä¸€è„¸å§”å±ˆçš„è¯´é“ï¼šä½ è¯´æˆ‘æ˜¯å‡¶æ‰‹ï¼Œæˆ‘å°±æ˜¯å‡¶æ‰‹äº†ï¼Œè¯æ®å‘¢ï¼Ÿ\n\nokï¼Œæˆ‘ä»¬å°±æ¥å¯»æ‰¾è¯æ®ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œ`Looper.loop()`æ–¹æ³•å†…éƒ¨ï¼Œä¼šå¼€å¯ä¸€ä¸ªæ­»å¾ªç¯ï¼Œå¦‚ä¸‹ï¼š\n\n```java\n public static void loop() {\n     //çœç•¥éƒ¨åˆ†ä»£ç \n     for (;;) {                                                         \n         Message msg = queue.next(); // might block                 \n         if (msg == null) {                                             \n            // No message indicates that the message queue is quitting.\n            return;                                                    \n         }\n         //çœç•¥éƒ¨åˆ†ä»£ç    \n     }\n     //çœç•¥éƒ¨åˆ†ä»£ç                                                                \n }\n```\n\nå¯ä»¥çœ‹åˆ°ï¼Œ`queue.next()`è¿™è¡Œä»£ç å®˜æ–¹æ³¨é‡Šäº†ï¼Œæœ‰å¯èƒ½ä¼šè¢«å µå¡ï¼Œä»€ä¹ˆæ—¶å€™ä¼šå µå¡ï¼Ÿæ²¡æœ‰æ¶ˆæ¯çš„æ—¶å€™ï¼Œå¯è§ï¼Œè°ƒç”¨`Looper.loop()`æ–¹æ³•æ‰€åœ¨çš„çº¿ç¨‹ä¼šè¿›å…¥æ­»å¾ªç¯ã€‚\n\n\n\né‚£è¿™ä¸ªå’Œæˆ‘ä»¬çš„æ¡ˆä»¶æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿ\n\n\n\nè¿™å°±è¦æ¥è¯´è¯´`RxJava`çš„çº¿ç¨‹æ± äº†ï¼Œä¸Šé¢`TokenInterceptor`å›è°ƒæ‰€åœ¨çš„çº¿ç¨‹æ˜¯`RxJava`çš„`IO`çº¿ç¨‹ï¼Œè€Œ`RxJava`çš„`IO`çº¿ç¨‹æ± çš„é…ç½®ï¼Œå´ä»…å…è®¸ä¸€æ¡æ ¸å¿ƒçº¿ç¨‹æ‰§è¡Œä»»åŠ¡ï¼Œå½“ä»»åŠ¡åœ¨æ‰§è¡Œï¼Œå…¶å®ƒä»»åŠ¡è¿‡æ¥æ—¶ï¼Œå¿…é¡»ç­‰å¾…è‡³ä¸Šä¸€ä¸ªä»»åŠ¡ç»“æŸã€‚\n\nåœ¨`IoScheduler`ç±»ä¸­å¯ä»¥æ‰¾åˆ°é™æ€å†…éƒ¨ç±»`ThreadWorker`ï¼Œ`ThreadWorker`ç»§æ‰¿è‡³`NewThreadWorker`ï¼Œåœ¨è¯¥ç±»ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°çº¿ç¨‹æ± å¯¹è±¡ï¼Œå¦‚ä¸‹ï¼š\n\n```java\npublic class NewThreadWorker extends Scheduler.Worker implements Disposable {\n    private final ScheduledExecutorService executor;\n\n    //çœç•¥éƒ¨åˆ†ä»£ç \n    \n    public NewThreadWorker(ThreadFactory threadFactory) {\n        //è¿™é‡Œåˆ›å»ºäº†çº¿ç¨‹æ± \n        executor = SchedulerPoolFactory.create(threadFactory);\n    }\n    //çœç•¥éƒ¨åˆ†ä»£ç \n}    \n```\n\n`SchedulerPoolFactory.create`æ–¹æ³•ç‚¹è¿›å»çœ‹çœ‹\n\n```java\npublic static ScheduledExecutorService create(ThreadFactory factory) {\n    final ScheduledExecutorService exec = Executors.newScheduledThreadPool(1, factory);  //æ ¸å¿ƒçº¿ç¨‹æ•°é‡ä¸º1\n    //çœç•¥éƒ¨åˆ†ä»£ç \n    return exec;\n}\n```\n\nå¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œä¼ äº†ä¸ª1ï¼Œå°±æ˜¯æ ¸å¿ƒçº¿ç¨‹çš„æ•°é‡ï¼Œç»§ç»­å¾€ä¸‹çœ‹ï¼Œæœ€ç»ˆæ‰¾åˆ°äº†åˆ›å»ºçº¿ç¨‹æ± å¯¹è±¡ä»£ç ï¼Œå¦‚ä¸‹ï¼š\n\n```java\npublic ScheduledThreadPoolExecutor(int corePoolSize,             \n                                   ThreadFactory threadFactory) {\n    super(corePoolSize, Integer.MAX_VALUE,                       \n          DEFAULT_KEEPALIVE_MILLIS, MILLISECONDS,                \n          new DelayedWorkQueue(), threadFactory);                \n}                                                                \n```\n\nè¿™é‡Œç®€å•è§£è¯»ä¸€ä¸‹ï¼Œè¯¥çº¿ç¨‹æ± æ ¸å¿ƒçº¿ç¨‹æ•°é‡ä¸º1ï¼Œéæ ¸å¿ƒçº¿ç¨‹æ•°é‡æ— ä¸Šé™ï¼Œéæ ¸å¿ƒçº¿ç¨‹é—²ç½®æ—¶é—´è¶…è¿‡10æ¯«ç§’ä¾¿ä¼šè¢«å›æ”¶ï¼Œå¹¶ä½¿ç”¨äº†å»¶è¿Ÿé˜Ÿåˆ—ã€‚\n\n\n\n***æ³¨æ„æ³¨æ„ï¼Œå‰æ–¹é«˜èƒ½é¢„è­¦***\n\n\n\nç”¨ç®€å•çš„è¯æ¥è¯´ï¼Œè¯¥çº¿ç¨‹æ± ï¼ŒåŒä¸€æ—¶é—´ï¼Œä»…ä¼šæ‰§è¡Œä¸€ä¸ªä»»åŠ¡ï¼Œä¹Ÿå°±æ˜¯ä¸²è¡Œï¼Œè¿™ä¹Ÿå°±è§£é‡Š`Looper`ä¸æœ¬æ¡ˆçš„å…³ç³»ï¼Œå› ä¸º`Looper.loop()`æ‰€åœ¨çº¿ç¨‹è¿›å…¥æ­»å¾ªç¯ï¼Œè¯¥çº¿ç¨‹æ‰€åœ¨çº¿ç¨‹æ± æ”¶åˆ°å…¶å®ƒä»»åŠ¡æ—¶ï¼Œä¾¿å¿…é¡»å¾—ç­‰å¾…è‡³ä¸Šä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œç„¶è€Œä¸Šä¸€ä¸ªä»»åŠ¡åœ¨æ­»å¾ªç¯ï¼Œæ‰€ä»¥ä¸‹ä¸€ä¸ªä»»åŠ¡æ°¸è¿œå¾—ä¸åˆ°æ‰§è¡Œï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆè¯·æ±‚ä»£ç æ‰§è¡Œäº†ï¼Œè¯·æ±‚å´æ²¡å‘å‡ºå»åŸå› ã€‚\n\n\n\n## 5ã€å…¶å®ƒæ€è€ƒ\n\nåˆ°è¿™ï¼Œä¼°è®¡å¾ˆå¤šäººä¼šæœ‰ç–‘é—®\n\n- `RxJava`çš„`Io`çº¿ç¨‹æ± ï¼Œæ˜¯ä¸²è¡Œæ‰§è¡Œçš„ï¼Œé‚£ä¹ˆå®ƒåˆæ˜¯å¦‚ä½•åšåˆ°å¹¶è¡Œçš„å‘¢ï¼Ÿéš¾é“ä»¥å‰å†™çš„å¹¶è¡Œä»£ç ï¼Œå…¶å®éƒ½æ˜¯ä¸²è¡Œå®ç°çš„ï¼Ÿ\n\n- çº¿ç¨‹æ± å·²ç»æœ‰ä»»åŠ¡åœ¨æ‰§è¡Œäº†ï¼Œä¸ºå•¥è¿˜ä¼šæ‹¿åˆ°è¯¥çº¿ç¨‹æ± æ‰§è¡Œæ–°çš„ä»»åŠ¡å‘¢ï¼Ÿ\n\n- `RxJava`ä¸ºå•¥ä¸ä½¿ç”¨`OkHttp`å†…éƒ¨çš„çº¿ç¨‹æ± é…ç½®ï¼Œåªè¦æœ‰ä»»åŠ¡æ¥ï¼Œéƒ½å¼€å¯éæ ¸å¿ƒçº¿ç¨‹å»æ‰§è¡Œï¼Ÿ\n\n\n\nokï¼Œæ¥ä¸‹æ¥ä¸€ä¸€è§£ç­”\n\né¦–å…ˆï¼Œç¬¬ä¸€ä¸ªï¼Œ`RxJava`å¦‚ä½•æ ¹æ®ç›®å‰çš„`Io`çº¿ç¨‹æ± ï¼Œåšåˆ°å¹¶è¡Œä»»åŠ¡ï¼Ÿ\n\nå…¶å®å¾ˆç®€å•ï¼Œåœ¨`IoScheduler`çš„é™æ€å†…éƒ¨ç±»`CachedWorkerPool`ä¸­ï¼Œç»´æŠ¤äº†ä¸€ä¸ªçº¿ç¨‹æ± é˜Ÿåˆ—ï¼Œæ¯æ¬¡æ”¶åˆ°æ–°ä»»åŠ¡ï¼Œéƒ½ä¼šä»é˜Ÿåˆ—é‡Œé¢å–å‡ºä¸€ä¸ªçº¿ç¨‹æ± å»æ‰§è¡Œä»»åŠ¡ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹æ± ï¼Œå¦‚ä¸‹ï¼š\n\n```java\nstatic final class CachedWorkerPool implements Runnable {\n    //è¿™ä¸ªå°±æ˜¯çº¿ç¨‹æ± é˜Ÿåˆ—                                   \n    private final ConcurrentLinkedQueue<ThreadWorker> expiringWorkerQueue\n    final CompositeDisposable allWorkers;                             \n    private final ThreadFactory threadFactory;                        \n                                                                      \n    //çœç•¥éƒ¨åˆ†ä»£ç                                                               \n    \n    //å–å‡ºä¸€ä¸ªçº¿ç¨‹æ±                                                                   \n    ThreadWorker get() {                                              \n        if (allWorkers.isDisposed()) {                                \n            return SHUTDOWN_THREAD_WORKER;                            \n        }                                                             \n        while (!expiringWorkerQueue.isEmpty()) {                      \n            ThreadWorker threadWorker = expiringWorkerQueue.poll();   \n            if (threadWorker != null) {                               \n                return threadWorker;  //é˜Ÿåˆ—é‡Œæœ‰ï¼Œç›´æ¥è¿”å›                                  \n            }                                                         \n        }                                                             \n                                                                      \n        // é˜Ÿåˆ—æ²¡æœ‰ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„               \n        ThreadWorker w = new ThreadWorker(threadFactory);             \n        allWorkers.add(w);                                            \n        return w;                                                     \n    }\n    \n    //å›æ”¶çº¿ç¨‹æ± ï¼Œä»»åŠ¡è¢«å–æ¶ˆæˆ–è€…æ­£å¸¸æ‰§è¡Œå®Œæ¯•ï¼Œå°†çº¿ç¨‹æ± æ·»åŠ è¿›ç¼“å­˜é˜Ÿåˆ—\n    void release(ThreadWorker threadWorker) {                     \n        //è®¾ç½®çº¿ç¨‹æ± è¿‡æœŸæ—¶é—´ï¼Œ60s   keepAliveTime=60s\n        threadWorker.setExpirationTime(now() + keepAliveTime);    \n                                                                  \n        expiringWorkerQueue.offer(threadWorker);                  \n    }                                                             \n    //çœç•¥éƒ¨åˆ†ä»£ç \n}                                                                 \n```\n\né€šè¿‡å¤šä¸ªçº¿ç¨‹æ± ï¼Œå°±è¾¾åˆ°äº†å¹¶è¡Œçš„æ•ˆæœï¼›ä¸Šé¢ä»£ç `release`æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬æ³¨æ„åˆ°ï¼Œè¢«å›æ”¶çš„çº¿ç¨‹æ± ï¼Œå­˜æ´»æ—¶é—´ä¸º60sï¼Œåœ¨`CachedWorkerPool` æ„é€ æ–¹æ³•ä¸­ï¼Œä¼šå¼€å¯ä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œæ¯é—´éš”60sï¼Œå°±ä¼šå»æ£€æŸ¥çº¿ç¨‹æ± é˜Ÿåˆ—ï¼Œå¦‚æœçº¿ç¨‹æ± é—²ç½®è¶…è¿‡60sï¼Œä¾¿ä¼šå°†çº¿ç¨‹æ± å…³é—­ï¼Œå¹¶ä»é˜Ÿåˆ—ä¸­ç§»é™¤ã€‚\n\n\n\næ¥ç€ï¼Œå›ç­”ç¬¬äºŒä¸ªé—®é¢˜ï¼Œçº¿ç¨‹æ± å·²ç»æœ‰ä»»åŠ¡åœ¨æ‰§è¡Œäº†ï¼Œä¸ºå•¥è¿˜ä¼šæ‹¿åˆ°è¯¥çº¿ç¨‹æ± æ‰§è¡Œæ–°çš„ä»»åŠ¡ï¼Ÿ\n\n\n\nçœ‹äº†ä¸Šé¢çš„ä»£ç ï¼Œå…¶å®å°±å¾ˆå¥½å›ç­”äº†ï¼Œå›æ”¶çº¿ç¨‹æ± æœ‰ä¸¤ä¸ªæ¡ä»¶ä¼šè§¦å‘ï¼Œä¸€æ˜¯ä»»åŠ¡æ­£å¸¸æ‰§è¡Œå®Œæ¯•ï¼Œè¿™ä¸ªå¥½ç†è§£ï¼Œä¸åšè§£é‡Šï¼Œå¦å¤–ä¸€ä¸ªå°±æ˜¯ï¼Œä»»åŠ¡è¢«å–æ¶ˆï¼Œæ¯”å¦‚ï¼Œè°ƒç”¨`Disposable#isDisposed()`æ–¹æ³•å–æ¶ˆä»»åŠ¡ï¼Œä½†æ˜¯è¯¥æ–¹æ³•ä¸ä¼šå–æ¶ˆçº¿ç¨‹æ± é‡Œçš„ä»»åŠ¡ï¼Œè¿™å°±å¯¼è‡´äº†ï¼Œçº¿ç¨‹æ± è™½ç„¶è¢«å›æ”¶äº†ï¼Œä½†çº¿ç¨‹æ± é‡Œçš„ä»»åŠ¡ä¾ç„¶åœ¨æ‰§è¡Œï¼Œæ‰€ä»¥ä¸‹æ¬¡æ‹¿åˆ°è¯¥çº¿ç¨‹æ± çš„ä»»åŠ¡ï¼Œåªèƒ½ç­‰å¾…ã€‚\n\n\n\næœ€åï¼Œå°±æ˜¯RxJavaä¸ºä½•è¦å¦‚æ­¤è®¾è®¡çº¿ç¨‹æ± ï¼Ÿ\n\n\n\nåŸå› å¾ˆç®€å•ï¼Œé˜²æ­¢çº¿ç¨‹èµ„æºè¢«æµªè´¹ï¼Œå¦‚ä¸Šé¢è¯´åˆ°çš„ï¼Œçº¿ç¨‹æ± è™½ç„¶è¢«å›æ”¶äº†ï¼Œä½†é‡Œé¢çš„çº¿ç¨‹å´ä¾ç„¶åœ¨æ‰§è¡Œä»»åŠ¡ï¼Œè¿™æ ·çš„çº¿ç¨‹å¤šäº†ï¼Œæ— ç–‘æ˜¯ä¸€ç§æµªè´¹ï¼Œæ€ä¹ˆåŠï¼Ÿä¾é å®šæ—¶å™¨ï¼Œè®©è¢«å›æ”¶çš„çº¿ç¨‹æ± åœ¨ä¸€å®šæ—¶é—´åï¼Œå…³é—­ä»»åŠ¡ï¼Œå¹¶ä»é˜Ÿåˆ—ä¸­ç§»é™¤ã€‚è€Œå¦‚æœç›´æ¥é€šè¿‡çº¿ç¨‹æ± å»å›æ”¶çº¿ç¨‹ï¼Œé‚£ä¹ˆè¢«`Looper.loop()` çš„çº¿ç¨‹ï¼Œè¿›å…¥æ­»å¾ªç¯åï¼Œå°†æ°¸è¿œå¾—ä¸åˆ°å›æ”¶ã€‚\n\n\nåˆ°è¿™ï¼Œæˆ‘ä¹Ÿä¸¢ä¸ªé—®é¢˜ç»™å¤§å®¶ï¼ŒRxJavaåœ¨å°†çº¿ç¨‹æ± ä¸¢è¿›ç¼“å­˜é˜Ÿåˆ—æ—¶ï¼Œä¸ºå•¥ä¸å°†çº¿ç¨‹æ± å…³é—­æ‰ï¼Ÿæ¬¢è¿è¯„è®ºç¾¤ç•™è¨€è®¨è®º\n\n\n\n## 6ã€æ€»ç»“\n\nå›é¡¾ä¸‹æ¡ˆä»¶ï¼Œä»å¦¹å­åé¦ˆçš„é—®é¢˜ï¼Œè´¦å·è¢«æŒ¤ï¼Œé‡æ–°ç™»å½•åˆ°é¦–é¡µåï¼Œ`request2()`æ–¹æ³•å†…çš„è¯·æ±‚ä»£ç æ‰§è¡Œäº†ï¼Œå´æ”¶ä¸åˆ°å›è°ƒï¼Œçº¿ç¨‹æ± çš„åŸå› è¯·æ±‚å‹æ²¡æœ‰å¾—åˆ°æ‰§è¡Œï¼Œæ•…æ”¶ä¸åˆ°å›è°ƒï¼Œé‚£ä¸ºå•¥å°±`request2()`æ–¹æ³•ä¼šå‡ºé—®é¢˜å‘¢ï¼Ÿå…¶å®è¿™æ˜¯ä¸€ç§å‡è±¡ï¼Œåªè¦è¢«å›æ”¶çš„çº¿ç¨‹æ± é‡Œè¿˜æœ‰æœªå®Œæˆçš„ä»»åŠ¡ï¼Œé‚£ä¹ˆè¯¥çº¿ç¨‹æ± å†æ¬¡æ‰§è¡Œè¯·æ±‚ï¼Œéƒ½å¿…é¡»å¾—ç­‰å¾…ã€‚å¦‚æœè´¦å·åœ¨60så†…é‡å¤è¢«æŒ¤3æ¬¡ï¼Œé‚£ä¹ˆç™»å½•åˆ°é¦–é¡µåï¼Œ3ä¸ªè¯·æ±‚éƒ½å°†å¾—ä¸åˆ°æ‰§è¡Œï¼Œå› ä¸ºå›æ”¶æ± å¾—3ä¸ªçº¿ç¨‹æ± éƒ½ä¸èƒ½å†æ‰§è¡Œä»»åŠ¡äº†ï¼Œç›´åˆ°60såï¼Œè¢«è®¡æ—¶å™¨å¼ºåˆ¶å…³é—­å¹¶ç§»é™¤ã€‚\n\n\n\næœ€åï¼Œæé†’å¤§å®¶ï¼Œä¸€å®šè¦æ…ç”¨`Looper`ï¼Œä¸æ˜¯ä»»ä½•æ—¶å€™éƒ½é€‚åˆç”¨`Looper`çš„ï¼Œåƒå¦¹å­é‡åˆ°çš„è¿™ç§åœºæ™¯ï¼Œå®Œå…¨å¯ä»¥ç”¨ä¸»çº¿ç¨‹çš„`Handler post`ä¸€ä¸ªæ¶ˆæ¯å‡ºå»ï¼Œç„¶åå¤„ç†ä¸šåŠ¡ï¼Œäº¦æˆ–è€…é€šè¿‡`EventBusã€LiveData`ç­‰å‘é€æ¶ˆæ¯åˆ°ä¸»çº¿ç¨‹ï¼Œå†å¤„ç†ç›¸å…³é€»è¾‘ã€‚\n\n\n\n## 7ã€å…³äºæˆ‘\n\næˆ‘æ˜¯[RxHttp](https://github.com/liujingxing/okhttp-RxHttp) çš„ä½œè€…ï¼Œçƒ­çˆ±å¼€æºï¼Œè‡´åŠ›äºæ‰“é€ ä¸€æ¬¾ç®€å•å¥½ç”¨çš„httpè¯·æ±‚æ¡†æ¶ï¼Œæ”¯æŒ`RxJava2/RxJava3/åç¨‹`ï¼Œæˆªæ­¢ç›®å‰ï¼Œåœ¨[githubä¹Ÿæœ‰2200+star](https://github.com/liujingxing/okhttp-RxHttp)ï¼Œç›®å‰å¤„äºéå¸¸ç«çƒ­çš„ä¸€ä¸ªæ¡†æ¶ï¼›å¦å¤–ï¼Œæˆ‘è¿˜ä¸ªè‡ªå·±çš„ç¾¤ï¼š***RxHttp&RxLife äº¤æµç¾¤ï¼š378530627***ï¼Œæˆªæ­¢ç›®å‰æœ‰500+äººï¼Œé‡Œé¢ç»å¸¸ä¼šæœ‰æŠ€æœ¯äº¤æµï¼Œå¼€è½¦å‹¿è¿›ï¼Œéè¯šå‹¿æ‰°ã€‚\n\n\n", "user_name": "ä¸æ€•å¤©é»‘", "description": "æç®€ä¸»ä¹‰è€…", "got_view_count": 109072, "category_name": "Android", "ctime": 1461266353}
{"tag_name": "Java", "concern_user_count": 252043, "user_id": "377887732546702", "title": "ä½ çš„ç™»å½•æ¥å£çœŸçš„å®‰å…¨å—ï¼Ÿ", "mark_content": "<section id=\"nice\" data-tool=\"mdniceç¼–è¾‘å™¨\" data-website=\"https://www.mdnice.com\" style=\"color: black; line-height: 1.6; word-spacing: 0px; letter-spacing: 0px; word-break: break-word; word-wrap: break-word; text-align: left; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, 'PingFang SC', Cambria, Cochin, Georgia, Times, 'Times New Roman', serif; font-size: 14px; padding: 10px;\"><h1 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 24px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">å‰è¨€</span><span class=\"suffix\"></span></h1>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">å¤§å®¶å­¦å†™ç¨‹åºæ—¶ï¼Œç¬¬ä¸€è¡Œä»£ç éƒ½æ˜¯<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #ff6441;\">hello world</code>ã€‚ä½†æ˜¯å½“ä½ å¼€å§‹å­¦ä¹ WEBåå°æŠ€æœ¯æ—¶ï¼Œå¾ˆå¤šäººçš„ç¬¬ä¸€ä¸ªåŠŸèƒ½å°±æ˜¯å†™çš„ç™»å½• <em style=\"font-style: italic; color: black;\">ï¼ˆå°å£°ï¼šåˆ«äººæˆ‘ä¸çŸ¥é“ï¼Œåæ­£æˆ‘æ˜¯ï¼‰ã€‚</em><br>\nä½†æ˜¯æˆ‘åœ¨å’Œå¾ˆå¤šå·¥ä½œç»éªŒè¾ƒçŸ­çš„åŒå­¦é¢è¯•æˆ–æ²Ÿé€šçš„æ—¶å€™ï¼Œå‘ç°å¾ˆå¤šåŒå­¦è™½ç„¶éƒ½æœ‰åœ¨ç®€å†ä¸Šå†™ï¼š<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #ff6441;\">è´Ÿè´£é¡¹ç›®çš„ç™»å½•/æ³¨å†ŒåŠŸèƒ½æ¨¡å—çš„å¼€å‘å’Œè®¾è®¡å·¥ä½œ</code>ï¼Œä½†æ˜¯éƒ½åªæ˜¯ç®€å•çš„å®ç°äº†åŠŸèƒ½é€»è¾‘ï¼Œåœ¨å®‰å…¨æ–¹é¢å¹¶æ²¡æœ‰è€ƒè™‘å¤ªå¤šã€‚è¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯å’Œå¤§å®¶èŠä¸€èŠï¼Œåœ¨è®¾è®¡ä¸€ä¸ªç™»å½•æ¥å£æ—¶ï¼Œä¸ä»…ä»…æ˜¯åŠŸèƒ½ä¸Šçš„å®ç°ï¼Œåœ¨å®‰å…¨æ–¹é¢ï¼Œæˆ‘ä»¬è¿˜éœ€è¦è€ƒè™‘å“ªäº›åœ°æ–¹ã€‚</p>\n<h1 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 24px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">å®‰å…¨é£é™©</span><span class=\"suffix\"></span></h1>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-size: 22px; text-align: center; position: relative; font-weight: bold; color: black; line-height: 1.1em; padding-top: 12px; padding-bottom: 12px; margin: 70px 30px 30px; border: 1px solid #000;\"><span style=\"float: left; display: block; width: 90%; border-top: 1px solid #000; height: 1px; line-height: 1px; margin-left: -5px; margin-top: -17px;\"> </span><span class=\"prefix\" style=\"display: block; width: 3px; margin: 0 0 0 5%; height: 3px; line-height: 3px; overflow: hidden; background-color: #000; box-shadow: 3px 0 #000,\n    0 3px #000,\n    -3px 0 #000,\n    0 -3px #000;\"></span><span class=\"content\" style=\"display: block; -webkit-box-reflect: below 0em -webkit-gradient(linear,left top,left bottom, from(rgba(0,0,0,0)),to(rgba(255,255,255,0.1)));\">æš´åŠ›ç ´è§£ï¼</span><span class=\"suffix\" style=\"display: block; width: 3px; margin: 0 0 0 95%; height: 3px; line-height: 3px; overflow: hidden; background-color: #000; box-shadow: 3px 0 #000,\n    0 3px #000,\n    -3px 0 #000,\n    0 -3px #000;\"></span><span style=\"float: right; display: block; width: 90%; border-bottom: 1px solid #000; height: 1px; line-height: 1px; margin-right: -5px; margin-top: 16px;\"> </span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">åªè¦ç½‘ç«™æ˜¯æš´éœ²åœ¨å…¬ç½‘çš„ï¼Œé‚£ä¹ˆå¾ˆå¤§æ¦‚ç‡ä¸Šä¼šè¢«äººç›¯ä¸Šï¼Œå°è¯•çˆ†ç ´è¿™ç§ç®€å•ä¸”æœ‰æ•ˆçš„æ–¹å¼ï¼š<br>\n<strong style=\"font-weight: bold; color: black;\">é€šè¿‡å„ç§æ–¹å¼è·å¾—äº†ç½‘ç«™çš„ç”¨æˆ·åä¹‹åï¼Œé€šè¿‡ç¼–å†™ç¨‹åºæ¥éå†æ‰€æœ‰å¯èƒ½çš„å¯†ç ï¼Œç›´è‡³æ‰¾åˆ°æ­£ç¡®çš„å¯†ç ä¸ºæ­¢</strong></p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\"><em style=\"font-style: italic; color: black;\">ä¼ªä»£ç å¦‚ä¸‹ï¼š</em></p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px; max-width: 100%; border-radius: 4px; margin: 10px auto 0 auto;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; background: #282c34; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch;\"><span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">#&nbsp;å¯†ç å­—å…¸</span><br>password_dict&nbsp;=&nbsp;[]<br><span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">#&nbsp;ç™»å½•æ¥å£</span><br>login_url&nbsp;=&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">''</span><br><span class=\"hljs-function\" style=\"line-height: 26px;\"><span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">def</span>&nbsp;<span class=\"hljs-title\" style=\"color: #61aeee; line-height: 26px;\">attack</span><span class=\"hljs-params\" style=\"line-height: 26px;\">(username)</span>:</span><br>&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">for</span>&nbsp;password&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">in</span>&nbsp;password_dict:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data&nbsp;=&nbsp;{<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'username'</span>:&nbsp;username,&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'password'</span>:&nbsp;password}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;content&nbsp;=&nbsp;requests.post(login_url,&nbsp;data).content.decode(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'utf-8'</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">if</span>&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'login&nbsp;success'</span>&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">in</span>&nbsp;content:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'got&nbsp;it!&nbsp;password&nbsp;is&nbsp;:&nbsp;%s'</span>&nbsp;%&nbsp;password)<br></code></pre>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">é‚£ä¹ˆè¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬è¦æ€ä¹ˆé˜²èŒƒå‘¢ï¼Ÿ</p>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; font-weight: bold; background-color: #000; color: #fff; padding: 2px 10px; width: fit-content; font-size: 17px; margin: 60px auto 10px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">éªŒè¯ç </span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">æœ‰èªæ˜çš„åŒå­¦å°±æƒ³åˆ°äº†ï¼Œæˆ‘å¯ä»¥åœ¨å®ƒå¯†ç é”™è¯¯è¾¾åˆ°ä¸€å®šæ¬¡æ•°æ—¶ï¼Œå¢åŠ éªŒè¯ç æ ¡éªŒï¼ æ¯”å¦‚æˆ‘ä»¬è®¾ç½®ï¼Œå½“ç”¨æˆ·å¯†ç é”™è¯¯è¾¾åˆ°3æ¬¡ä¹‹åï¼Œåˆ™éœ€è¦ç”¨æˆ·è¾“å…¥å›¾ç‰‡éªŒè¯ç æ‰å¯ä»¥ç»§ç»­ç™»å½•æ“ä½œï¼š</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\"><em style=\"font-style: italic; color: black;\">ä¼ªä»£ç å¦‚ä¸‹ï¼š</em></p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px; max-width: 100%; border-radius: 4px; margin: 10px auto 0 auto;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; background: #282c34; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch;\">fail_count&nbsp;=&nbsp;get_from_redis(fail_username)<br><span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">if</span>&nbsp;fail_count&nbsp;&gt;=&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">3</span>:<br>&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">if</span>&nbsp;captcha&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">is</span>&nbsp;<span class=\"hljs-literal\" style=\"color: #56b6c2; line-height: 26px;\">None</span>:<br>&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">return</span>&nbsp;error(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'éœ€è¦éªŒè¯ç '</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;check_captcha(captcha)<br>success&nbsp;=&nbsp;do_login(username,&nbsp;password)<br><span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">if</span>&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">not</span>&nbsp;success:<br>&nbsp;set_redis(fail_username,&nbsp;fail_count&nbsp;+&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>)<br></code></pre>\n<blockquote data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"display: block; font-size: 0.9em; overflow: auto; overflow-scrolling: touch; color: #6a737d; padding-top: 10px; padding-bottom: 10px; padding-left: 20px; padding-right: 10px; margin-bottom: 20px; margin-top: 20px; border-left: 3px solid rgba(0, 0, 0, 0.65); border-right: 1px solid rgba(0, 0, 0, 0.65); background: rgb(249, 249, 249);\">\n<p style=\"padding-top: 8px; padding-bottom: 8px; font-size: 14px; margin: 0px; color: black; line-height: 26px;\">ä¼ªä»£ç æœªè€ƒè™‘å¹¶å‘ï¼Œå®é™…å¼€å‘å¯ä»¥è€ƒè™‘åŠ é”ã€‚</p>\n</blockquote>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">è¿™æ ·ç¡®å®å¯ä»¥è¿‡æ»¤æ‰ä¸€äº›éæ³•çš„æ”»å‡»ï¼Œä½†æ˜¯ä»¥ç›®å‰çš„OCRæŠ€æœ¯æ¥è¯´çš„è¯ï¼Œæ™®é€šçš„å›¾ç‰‡éªŒè¯ç çœŸçš„å¾ˆéš¾åšåˆ°æœ‰æ•ˆçš„é˜²æ­¢æœºå™¨äººï¼ˆ<em style=\"font-style: italic; color: black;\">æˆ‘ä»¬å°±åœ¨è¿™ä¸ªä¸Šé¢åƒè¿‡å¤§äº</em>ï¼‰ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥èŠ±é’±è´­ä¹°ç±»ä¼¼äºä¸‰æ–¹å…¬å¸æä¾›çš„æ»‘åŠ¨éªŒè¯ç­‰éªŒè¯æ–¹æ¡ˆï¼Œä½†æ˜¯ä¹Ÿå¹¶ä¸æ˜¯100%çš„å®‰å…¨ï¼Œä¸€æ ·å¯ä»¥è¢«ç ´è§£ï¼ˆ<em style=\"font-style: italic; color: black;\">æƒ¨ç—›æ•™è®­</em>ï¼‰ã€‚</p>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; font-weight: bold; background-color: #000; color: #fff; padding: 2px 10px; width: fit-content; font-size: 17px; margin: 60px auto 10px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">ç™»å½•é™åˆ¶</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">é‚£è¿™æ—¶å€™åˆæœ‰åŒå­¦è¯´äº†ï¼Œé‚£æˆ‘å¯ä»¥ç›´æ¥é™åˆ¶éæ­£å¸¸ç”¨æˆ·çš„ç™»å½•æ“ä½œï¼Œå½“å®ƒå¯†ç é”™è¯¯è¾¾åˆ°ä¸€å®šæ¬¡æ•°æ—¶ï¼Œç›´æ¥æ‹’ç»ç”¨æˆ·çš„ç™»å½•ï¼Œéš”ä¸€æ®µæ—¶é—´å†æ¢å¤ã€‚æ¯”å¦‚æˆ‘ä»¬è®¾ç½®æŸä¸ªè´¦å·åœ¨ç™»å½•æ—¶é”™è¯¯æ¬¡æ•°è¾¾åˆ°10æ¬¡æ—¶ï¼Œåˆ™5åˆ†é’Ÿå†…æ‹’ç»è¯¥è´¦å·çš„æ‰€æœ‰ç™»å½•æ“ä½œã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\"><em style=\"font-style: italic; color: black;\">ä¼ªä»£ç å¦‚ä¸‹ï¼š</em></p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px; max-width: 100%; border-radius: 4px; margin: 10px auto 0 auto;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; background: #282c34; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch;\">fail_count&nbsp;=&nbsp;get_from_redis(fail_username)<br>locked&nbsp;=&nbsp;get_from_redis(lock_username)<br><br><span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">if</span>&nbsp;locked:<br>&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">return</span>&nbsp;error(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'æ‹’ç»ç™»å½•'</span>)<br><span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">if</span>&nbsp;fail_count&nbsp;&gt;=&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">3</span>:<br>&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">if</span>&nbsp;captcha&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">is</span>&nbsp;<span class=\"hljs-literal\" style=\"color: #56b6c2; line-height: 26px;\">None</span>:<br>&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">return</span>&nbsp;error(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'éœ€è¦éªŒè¯ç '</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;check_captcha(captcha)&nbsp;<br>success&nbsp;=&nbsp;do_login(username,&nbsp;password)<br><span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">if</span>&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">not</span>&nbsp;success:<br>&nbsp;set_redis(fail_username,&nbsp;fail_count&nbsp;+&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">if</span>&nbsp;fail_count&nbsp;+&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>&nbsp;&gt;=&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">10</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">#&nbsp;å¤±è´¥è¶…è¿‡10æ¬¡ï¼Œè®¾ç½®é”å®šæ ‡è®°</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set_redis(lock_username,&nbsp;true,&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">300</span>s)<br></code></pre>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">ummï¼Œè¿™æ ·ç¡®å®å¯ä»¥è§£å†³ç”¨æˆ·å¯†ç è¢«çˆ†ç ´çš„é—®é¢˜ã€‚ä½†æ˜¯ï¼Œè¿™æ ·ä¼šå¸¦æ¥å¦ä¸€ä¸ªé£é™©ï¼šæ”»å‡»è€…è™½ç„¶ä¸èƒ½è·å–åˆ°ç½‘ç«™çš„ç”¨æˆ·ä¿¡æ¯ï¼Œä½†æ˜¯å®ƒå¯ä»¥è®©æˆ‘ä»¬ç½‘ç«™æ‰€æœ‰çš„ç”¨æˆ·éƒ½æ— æ³•ç™»å½•ï¼<br>\næ”»å‡»è€…åªéœ€è¦æ— é™å¾ªç¯éå†æ‰€æœ‰çš„ç”¨æˆ·åï¼ˆ<em style=\"font-style: italic; color: black;\">å³ä½¿æ²¡æœ‰ï¼Œéšæœºä¹Ÿè¡Œ</em>ï¼‰è¿›è¡Œç™»å½•ï¼Œé‚£ä¹ˆè¿™äº›ç”¨æˆ·ä¼šæ°¸è¿œå¤„äºé”å®šçŠ¶æ€ï¼Œå¯¼è‡´æ­£å¸¸çš„ç”¨æˆ·æ— æ³•ç™»å½•ç½‘ç«™ï¼</p>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; font-weight: bold; background-color: #000; color: #fff; padding: 2px 10px; width: fit-content; font-size: 17px; margin: 60px auto 10px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">IPé™åˆ¶</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">é‚£æ—¢ç„¶ç›´æ¥é’ˆå¯¹ç”¨æˆ·åä¸è¡Œçš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥é’ˆå¯¹IPæ¥å¤„ç†ï¼Œç›´æ¥æŠŠæ”»å‡»è€…çš„IPå°äº†ä¸å°±ä¸‡äº‹å¤§å‰äº†å˜›ã€‚ æˆ‘ä»¬å¯ä»¥è®¾å®šæŸä¸ªIPä¸‹è°ƒç”¨ç™»å½•æ¥å£é”™è¯¯æ¬¡æ•°è¾¾åˆ°ä¸€å®šæ—¶ï¼Œåˆ™ç¦æ­¢è¯¥IPè¿›è¡Œç™»å½•æ“ä½œã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\"><em style=\"font-style: italic; color: black;\">ä¼ªä»£ç å¦‚ä¸‹ï¼š</em></p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px; max-width: 100%; border-radius: 4px; margin: 10px auto 0 auto;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; background: #282c34; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch;\">ip&nbsp;=&nbsp;request[<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'IP'</span>]<br>fail_count&nbsp;=&nbsp;get_from_redis(fail_ip)<br><span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">if</span>&nbsp;fail_count&nbsp;&gt;&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">10</span>:<br>&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">return</span>&nbsp;error(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'æ‹’ç»ç™»å½•'</span>)<br><span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">#&nbsp;å…¶å®ƒé€»è¾‘</span><br><span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">#&nbsp;do&nbsp;something()</span><br>success&nbsp;=&nbsp;do_login(username,&nbsp;password)<br><span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">if</span>&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">not</span>&nbsp;success:<br>&nbsp;set_redis(fail_ip,&nbsp;true,&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">300</span>s)<br></code></pre>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">è¿™æ ·ä¹Ÿå¯ä»¥ä¸€å®šç¨‹åº¦ä¸Šè§£å†³é—®é¢˜ï¼Œäº‹å®ä¸Šæœ‰å¾ˆå¤šçš„é™æµæ“ä½œéƒ½æ˜¯é’ˆå¯¹IPè¿›è¡Œçš„ï¼Œæ¯”å¦‚niginxçš„é™æµæ¨¡å—å°±å¯ä»¥é™åˆ¶ä¸€ä¸ªIPåœ¨å•ä½æ—¶é—´å†…çš„è®¿é—®æ¬¡æ•°ã€‚<br>\nä½†æ˜¯è¿™é‡Œè¿˜æ˜¯å­˜åœ¨é—®é¢˜ï¼š</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: square;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">æ¯”å¦‚ç°åœ¨å¾ˆå¤šå­¦æ ¡ã€å…¬å¸éƒ½æ˜¯ä½¿ç”¨åŒä¸€ä¸ªå‡ºå£IPï¼Œå¦‚æœç›´æ¥æŒ‰IPé™åˆ¶ï¼Œå¯èƒ½ä¼šè¯¯æ€å…¶å®ƒæ­£å¸¸çš„ç”¨æˆ·</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">ç°åœ¨è¿™ä¹ˆå¤šVPNï¼Œæ”»å‡»è€…å®Œå…¨å¯ä»¥åœ¨IPè¢«å°ååˆ‡æ¢VPNæ¥æ”»å‡»</section></li></ul>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; font-weight: bold; background-color: #000; color: #fff; padding: 2px 10px; width: fit-content; font-size: 17px; margin: 60px auto 10px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">æ‰‹æœºéªŒè¯</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">é‚£éš¾é“å°±æ²¡æœ‰ä¸€ä¸ªæ¯”è¾ƒå¥½çš„æ–¹å¼æ¥é˜²èŒƒå—ï¼Ÿã€€å½“ç„¶æœ‰ã€‚ã€€æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿‘äº›å¹´æ¥ï¼Œå‡ ä¹æ‰€æœ‰çš„åº”ç”¨éƒ½ä¼šè®©ç”¨æˆ·ç»‘å®šæ‰‹æœºï¼Œä¸€ä¸ªæ˜¯å›½å®¶çš„å®ååˆ¶æ”¿ç­–è¦æ±‚ï¼Œç¬¬äºŒä¸ªæ˜¯æ‰‹æœºåŸºæœ¬ä¸Šå’Œèº«ä»½è¯ä¸€æ ·ï¼ŒåŸºæœ¬ä¸Šå¯ä»¥ä»£è¡¨ä¸€ä¸ªäººçš„èº«ä»½æ ‡è¯†äº†ã€‚æ‰€ä»¥å¾ˆå¤šå®‰å…¨æ“ä½œéƒ½æ˜¯åŸºäºæ‰‹æœºéªŒè¯æ¥è¿›è¡Œçš„ï¼Œç™»å½•ä¹Ÿå¯ä»¥ã€‚</p>\n<ol data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: decimal;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">å½“ç”¨æˆ·è¾“å…¥å¯†ç æ¬¡æ•°å¤§äº3æ¬¡æ—¶ï¼Œè¦æ±‚ç”¨æˆ·è¾“å…¥éªŒè¯ç ï¼ˆ<em style=\"font-style: italic; color: black;\">æœ€å¥½ä½¿ç”¨æ»‘åŠ¨éªŒè¯</em>ï¼‰</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">å½“ç”¨æˆ·è¾“å…¥å¯†ç æ¬¡æ•°å¤§äº10æ¬¡æ—¶ï¼Œå¼¹å‡ºæ‰‹æœºéªŒè¯ï¼Œéœ€è¦ç”¨æˆ·ä½¿ç”¨æ‰‹æœºéªŒè¯ç å’Œå¯†ç åŒé‡è®¤è¯è¿›è¡Œç™»å½•</section></li></ol>\n<blockquote data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"display: block; font-size: 0.9em; overflow: auto; overflow-scrolling: touch; color: #6a737d; padding-top: 10px; padding-bottom: 10px; padding-left: 20px; padding-right: 10px; margin-bottom: 20px; margin-top: 20px; border-left: 3px solid rgba(0, 0, 0, 0.65); border-right: 1px solid rgba(0, 0, 0, 0.65); background: rgb(249, 249, 249);\">\n<p style=\"padding-top: 8px; padding-bottom: 8px; font-size: 14px; margin: 0px; color: black; line-height: 26px;\">æ‰‹æœºéªŒè¯ç é˜²åˆ·å°±æ˜¯å¦ä¸€ä¸ªé—®é¢˜äº†ï¼Œè¿™é‡Œä¸å±•å¼€ï¼Œä»¥åå†æœ‰æ—¶é—´å†èŠèŠæˆ‘ä»¬åœ¨éªŒè¯ç é˜²åˆ·æ–¹é¢åšäº†å“ªäº›å·¥ä½œã€‚</p>\n</blockquote>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\"><em style=\"font-style: italic; color: black;\">ä¼ªä»£ç å¦‚ä¸‹ï¼š</em></p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px; max-width: 100%; border-radius: 4px; margin: 10px auto 0 auto;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; background: #282c34; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch;\">fail_count&nbsp;=&nbsp;get_from_redis(fail_username)<br><br><span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">if</span>&nbsp;fail_count&nbsp;&gt;&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">3</span>:<br>&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">if</span>&nbsp;captcha&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">is</span>&nbsp;<span class=\"hljs-literal\" style=\"color: #56b6c2; line-height: 26px;\">None</span>:<br>&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">return</span>&nbsp;error(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'éœ€è¦éªŒè¯ç '</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;check_captcha(captcha)&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<br><span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">if</span>&nbsp;fail_count&nbsp;&gt;&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">10</span>:<br>&nbsp;<span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">#&nbsp;å¤§äº10æ¬¡ï¼Œä½¿ç”¨éªŒè¯ç å’Œå¯†ç ç™»å½•</span><br>&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">if</span>&nbsp;dynamic_code&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">is</span>&nbsp;<span class=\"hljs-literal\" style=\"color: #56b6c2; line-height: 26px;\">None</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">return</span>&nbsp;error(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'è¯·è¾“å…¥æ‰‹æœºéªŒè¯ç '</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">if</span>&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">not</span>&nbsp;validate_dynamic_code(username,&nbsp;dynamic_code):<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete_dynamic_code(username)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">return</span>&nbsp;error(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'æ‰‹æœºéªŒè¯ç é”™è¯¯'</span>)<br><br>&nbsp;success&nbsp;=&nbsp;do_login(username,&nbsp;password,&nbsp;dynamic_code)<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">if</span>&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">not</span>&nbsp;success:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set_redis(fail_username,&nbsp;fail_count&nbsp;+&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>)<br></code></pre>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">æˆ‘ä»¬ç»“åˆäº†ä¸Šé¢è¯´çš„å‡ ç§æ–¹å¼çš„åŒæ—¶ï¼ŒåŠ ä¸Šäº†æ‰‹æœºéªŒè¯ç çš„éªŒè¯æ¨¡å¼ï¼ŒåŸºæœ¬ä¸Šå¯ä»¥é˜»æ­¢ç›¸å½“å¤šçš„ä¸€éƒ¨åˆ†æ¶æ„æ”»å‡»è€…ã€‚ä½†æ˜¯æ²¡æœ‰ç³»ç»Ÿæ˜¯ç»å¯¹å®‰å…¨çš„ï¼Œæˆ‘ä»¬åªèƒ½å¤Ÿå°½å¯èƒ½çš„å¢åŠ æ”»å‡»è€…çš„æ”»å‡»æˆæœ¬ã€‚å¤§å®¶å¯ä»¥æ ¹æ®è‡ªå·±ç½‘ç«™çš„å®é™…æƒ…å†µæ¥é€‰æ‹©åˆé€‚çš„ç­–ç•¥ã€‚</p>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-size: 22px; text-align: center; position: relative; font-weight: bold; color: black; line-height: 1.1em; padding-top: 12px; padding-bottom: 12px; margin: 70px 30px 30px; border: 1px solid #000;\"><span style=\"float: left; display: block; width: 90%; border-top: 1px solid #000; height: 1px; line-height: 1px; margin-left: -5px; margin-top: -17px;\"> </span><span class=\"prefix\" style=\"display: block; width: 3px; margin: 0 0 0 5%; height: 3px; line-height: 3px; overflow: hidden; background-color: #000; box-shadow: 3px 0 #000,\n    0 3px #000,\n    -3px 0 #000,\n    0 -3px #000;\"></span><span class=\"content\" style=\"display: block; -webkit-box-reflect: below 0em -webkit-gradient(linear,left top,left bottom, from(rgba(0,0,0,0)),to(rgba(255,255,255,0.1)));\">ä¸­é—´äººæ”»å‡»ï¼Ÿ</span><span class=\"suffix\" style=\"display: block; width: 3px; margin: 0 0 0 95%; height: 3px; line-height: 3px; overflow: hidden; background-color: #000; box-shadow: 3px 0 #000,\n    0 3px #000,\n    -3px 0 #000,\n    0 -3px #000;\"></span><span style=\"float: right; display: block; width: 90%; border-bottom: 1px solid #000; height: 1px; line-height: 1px; margin-right: -5px; margin-top: 16px;\"> </span></h2>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; font-weight: bold; background-color: #000; color: #fff; padding: 2px 10px; width: fit-content; font-size: 17px; margin: 60px auto 10px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">ä»€ä¹ˆæ˜¯ä¸­é—´äººæ”»å‡»</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">***ä¸­é—´äººæ”»å‡»(man-in-the-middle attack, abbreviated to MITM)***ï¼Œç®€å•ä¸€ç‚¹æ¥è¯´å°±æ˜¯ï¼ŒAå’ŒBåœ¨é€šè®¯è¿‡ç¨‹ä¸­ï¼Œæ”»å‡»è€…é€šè¿‡å—…æ¢ã€æ‹¦æˆªç­‰æ–¹å¼è·å–æˆ–ä¿®æ”¹Aå’ŒBçš„é€šè®¯å†…å®¹ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">ä¸¾ä¸ªæ —å­ï¼š <code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #ff6441;\">å°ç™½</code>ç»™<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #ff6441;\">å°é»„</code>å‘å¿«é€’ï¼Œé€”ä¸­è¦ç»è¿‡å¿«é€’ç‚¹Aï¼Œ<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #ff6441;\">å°é»‘</code>å°±èº²åœ¨å¿«é€’ç‚¹Aï¼Œæˆ–è€…å¹²è„†è‡ªå·±å¼€ä¸€ä¸ªå¿«é€’ç‚¹Bæ¥å†’å……å¿«é€’ç‚¹Aã€‚ç„¶åå·å·çš„æ‹†äº†<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #ff6441;\">å°ç™½</code>ç»™<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #ff6441;\">å°é»„</code>çš„å¿«é€’ï¼Œçœ‹çœ‹é‡Œé¢æœ‰å•¥ä¸œè¥¿ã€‚ç”šè‡³å¯ä»¥æŠŠ<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #ff6441;\">å°ç™½</code>çš„å¿«é€’ç»™ç•™ä¸‹æ¥ï¼Œè‡ªå·±å†æ‰“åŒ…ä¸€ä¸ªä¸€æ¯›ä¸€æ ·çš„ç®±å­å‘ç»™<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #ff6441;\">å°é»„</code>ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">é‚£åœ¨ç™»å½•è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæ”»å‡»è€…åœ¨å—…æ¢åˆ°äº†ä»å®¢æˆ·ç«¯å‘å¾€æœåŠ¡ç«¯çš„ç™»å½•è¯·æ±‚ï¼Œå°±å¯ä»¥å¾ˆè½»æ˜“çš„è·å–åˆ°ç”¨æˆ·çš„ç”¨æˆ·åå’Œå¯†ç ã€‚</p>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; font-weight: bold; background-color: #000; color: #fff; padding: 2px 10px; width: fit-content; font-size: 17px; margin: 60px auto 10px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">HTTPS</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">é˜²èŒƒä¸­é—´äººæ”»å‡»æœ€ç®€å•ä¹Ÿæ˜¯æœ€æœ‰æ•ˆçš„ä¸€ä¸ªæ“ä½œï¼Œæ›´æ¢HTTPSï¼ŒæŠŠç½‘ç«™ä¸­æ‰€æœ‰çš„HTTPè¯·æ±‚ä¿®æ”¹ä¸ºå¼ºåˆ¶ä½¿ç”¨HTTPSã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">***ä¸ºä»€ä¹ˆHTTPSå¯ä»¥é˜²èŒƒä¸­é—´äººæ”»å‡»ï¼Ÿ  ***<br>\nHTTPSå®é™…ä¸Šå°±æ˜¯åœ¨HTTPå’ŒTCPåè®®ä¸­é—´åŠ å…¥äº†SSL/TLSåè®®ï¼Œç”¨äºä¿éšœæ•°æ®çš„å®‰å…¨ä¼ è¾“ã€‚ç›¸æ¯”äºHTTPï¼ŒHTTPSä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: square;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">å†…å®¹åŠ å¯†</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">æ•°æ®å®Œæ•´æ€§</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">èº«ä»½éªŒè¯</section></li></ul>\n<blockquote data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"display: block; font-size: 0.9em; overflow: auto; overflow-scrolling: touch; color: #6a737d; padding-top: 10px; padding-bottom: 10px; padding-left: 20px; padding-right: 10px; margin-bottom: 20px; margin-top: 20px; border-left: 3px solid rgba(0, 0, 0, 0.65); border-right: 1px solid rgba(0, 0, 0, 0.65); background: rgb(249, 249, 249);\">\n<p style=\"padding-top: 8px; padding-bottom: 8px; font-size: 14px; margin: 0px; color: black; line-height: 26px;\">å…·ä½“çš„HTTPSåŸç†è¿™é‡Œå°±ä¸å†æ‰©å±•äº†ï¼Œå¤§å®¶å¯ä»¥è‡ªè¡ŒGoogle</p>\n</blockquote>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; font-weight: bold; background-color: #000; color: #fff; padding: 2px 10px; width: fit-content; font-size: 17px; margin: 60px auto 10px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">åŠ å¯†ä¼ è¾“</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">åœ¨HTTPSä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æ‰‹åŠ¨å¯¹æ•æ„Ÿæ•°æ®è¿›è¡ŒåŠ å¯†ä¼ è¾“ï¼š</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: square;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">ç”¨æˆ·åå¯ä»¥åœ¨å®¢æˆ·ç«¯ä½¿ç”¨éå¯¹ç§°åŠ å¯†ï¼Œåœ¨æœåŠ¡ç«¯è§£å¯†</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">å¯†ç å¯ä»¥åœ¨å®¢æˆ·ç«¯è¿›è¡ŒMD5ä¹‹åä¼ è¾“ï¼Œé˜²æ­¢æš´éœ²å¯†ç æ˜æ–‡</section></li></ul>\n<h1 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 24px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">å…¶å®ƒ</span><span class=\"suffix\"></span></h1>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">é™¤äº†ä¸Šé¢æˆ‘ä»¬èŠçš„è¿™äº›ä»¥å¤–ï¼Œå…¶å®è¿˜æœ‰å¾ˆå¤šå…¶å®ƒçš„å·¥ä½œå¯ä»¥è€ƒè™‘ï¼Œæ¯”å¦‚ï¼š</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: square;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\"><strong style=\"font-weight: bold; color: black;\">æ“ä½œæ—¥å¿—</strong>ï¼Œç”¨æˆ·çš„æ¯æ¬¡ç™»å½•å’Œæ•æ„Ÿæ“ä½œéƒ½éœ€è¦è®°å½•æ—¥å¿—ï¼ˆåŒ…æ‹¬IPã€è®¾å¤‡ç­‰ï¼‰</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\"><strong style=\"font-weight: bold; color: black;\">å¼‚å¸¸æ“ä½œæˆ–ç™»å½•æé†’</strong>ï¼Œæœ‰äº†ä¸Šé¢çš„æ“ä½œæ—¥å¿—ï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥åŸºäºæ—¥å¿—åšé£é™©æé†’ï¼Œæ¯”å¦‚ç”¨æˆ·åœ¨è¿›è¡Œéå¸¸ç™»å½•åœ°ç™»å½•ã€ä¿®æ”¹å¯†ç ã€ç™»å½•å¼‚å¸¸æ—¶ï¼Œå¯ä»¥çŸ­ä¿¡æé†’ç”¨æˆ·</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\"><strong style=\"font-weight: bold; color: black;\">æ‹’ç»å¼±å¯†ç </strong> æ³¨å†Œæˆ–ä¿®æ”¹å¯†ç æ—¶ï¼Œä¸å…è®¸ç”¨æˆ·è®¾ç½®å¼±å¯†ç </section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\"><strong style=\"font-weight: bold; color: black;\">é˜²æ­¢ç”¨æˆ·åè¢«éå†</strong> æœ‰äº›ç½‘ç«™åœ¨æ³¨å†Œæ—¶ï¼Œåœ¨è¾“å…¥å®Œç”¨æˆ·åä¹‹åï¼Œä¼šæç¤ºç”¨æˆ·åæ˜¯å¦å­˜åœ¨ã€‚è¿™æ ·ä¼šå­˜åœ¨ç½‘ç«™çš„æ‰€æœ‰ç”¨æˆ·åè¢«æ³„éœ²çš„é£é™©ï¼ˆ<em style=\"font-style: italic; color: black;\">éå†è¯¥æ¥å£å³å¯</em>ï¼‰ï¼Œéœ€è¦åœ¨äº¤äº’æˆ–é€»è¾‘ä¸Šåšé™åˆ¶</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">...</section></li></ul>\n<h1 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 24px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">åè®°</span><span class=\"suffix\"></span></h1>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">ç°åœ¨å›½å®¶ä¸æ–­çš„å‡ºå°å„ç§æ³•å¾‹ï¼Œå¯¹ç”¨æˆ·çš„æ•°æ®è¶Šæ¥è¶Šçœ‹é‡ã€‚ä½œä¸ºå¼€å‘è€…ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦åœ¨ä¿æŠ¤ç”¨æˆ·æ•°æ®å’Œç”¨æˆ·éšç§æ–¹é¢åšæ›´å¤šçš„å·¥ä½œã€‚åé¢æˆ‘ä¹Ÿä¼šå’Œå¤§å®¶èŠä¸€èŠï¼Œæˆ‘ä»¬åœ¨æ•°æ®å®‰å…¨æ–¹é¢ï¼Œåšäº†å“ªäº›å·¥ä½œï¼Œå¸Œæœ›å¯ä»¥ç»™åˆ°å¤§å®¶ä¸€ç‚¹ç‚¹å¸®åŠ©ã€‚</p>\n<h1 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 24px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">æ‰©å±•é˜…è¯»</span><span class=\"suffix\"></span></h1>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\"><a href=\"http://www.ruanyifeng.com/blog/2014/09/illustration-ssl.html\" style=\"text-decoration: none; color: #1e6bb8; word-wrap: break-word; font-weight: bold; border-bottom: 1px solid #1e6bb8;\">å›¾è§£SSL/TLSåè®® - é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—</a><br>\n<a href=\"https://en.wikipedia.org/wiki/HTTPS\" style=\"text-decoration: none; color: #1e6bb8; word-wrap: break-word; font-weight: bold; border-bottom: 1px solid #1e6bb8;\">HTTPS - Wikipedia</a><br>\n<a href=\"https://en.wikipedia.org/wiki/Man-in-the-middle_attack\" style=\"text-decoration: none; color: #1e6bb8; word-wrap: break-word; font-weight: bold; border-bottom: 1px solid #1e6bb8;\">Man-in-the-middle attack - Wikipedia</a></p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\"><strong style=\"font-weight: bold; color: black;\">ã€é‡è¦ã€‘è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼šhttps://juejin.im/post/6859214952704999438</strong></p>\n<span style=\"font-size: 15px; display: block; text-align: center; margin-top: 50px; color: #999; border-bottom: 1px solid #eee;\">- END -</span></section>", "user_name": "å“’å“’å“’å“’æ‰“ä»£ç ", "description": "", "got_view_count": 1009, "category_name": "åç«¯", "ctime": 1457483880}
{"tag_name": "Kotlin", "concern_user_count": 31708, "user_id": "2524134385917293", "title": "Android Kotliné‚£äº›å®ç”¨çš„è¯­æ³•ç³–ï¼šç©ºå®‰å…¨ã€ç±»å‹è½¬æ¢ & ç›¸ç­‰æ€§åˆ¤æ–­", "mark_content": "# å‰è¨€\nKotlinè¢«Googleå®˜æ–¹è®¤ä¸ºæ˜¯Androidå¼€å‘çš„ä¸€çº§ç¼–ç¨‹è¯­è¨€ã€‚ä»Šå¤©ï¼Œæˆ‘å°†ä¸»è¦è®²è§£ï¼Œå…³äºKotlinçš„ä¸€äº›å®ç”¨è¯­æ³•ç³–ï¼Œä¸»è¦åŒ…æ‹¬ï¼š\n- èŒƒå›´ä½¿ç”¨ï¼šinã€downToã€stepã€until\n- ç±»å‹æ£€æŸ¥ & è½¬æ¢ï¼šisã€æ™ºèƒ½è½¬æ¢ã€as\n- ç›¸ç­‰æ€§ï¼šequalsï¼ˆï¼‰ã€==ã€===\n- ç©ºå®‰å…¨\n\n![ç¤ºæ„å›¾](https://upload-images.jianshu.io/upload_images/944365-8252687460538ea4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\n***\n\n# 1. èŒƒå›´ä½¿ç”¨\nä¸»è¦ç”¨äºè¡¨ç¤ºèŒƒå›´ï¼Œä¸»è¦åŒ…æ‹¬ï¼šinã€downToã€stepã€until\n\n```\n/**\n *  1. in\n *  ä½œç”¨ï¼šåœ¨...èŒƒå›´å†…\n **/\n// è¡¨ç¤ºï¼šè‹¥iåœ¨1-5èŒƒå›´å†…ï¼Œåˆ™æ‰§è¡Œä¸‹é¢ä»£ç \n// æ³¨ï¼šé—­åŒºé—´ï¼Œ[1,5]\nif (i in 1..5) {\n    println(\"i åœ¨ 1-5 å†…\")\n}\n\n// è¡¨ç¤ºï¼šè‹¥iä¸åœ¨1-5èŒƒå›´å†…ï¼Œåˆ™æ‰§è¡Œä¸‹é¢ä»£ç \n// !inè¡¨ç¤ºä¸åœ¨...èŒƒå›´å†…\nif (i !in 1..5) {\n    println(\"i ä¸åœ¨ 1-5 å†…\")\n}\n\n/**\n *  2. until\n *  ä½œç”¨ï¼šè¡¨ç¤ºå¼€åŒºé—´\n **/\n// è¾“å‡º1234\nfor (i in 1 until 5) {\n println(i)\n}\n\n/**\n *  3. downTo\n *  ä½œç”¨ï¼šå€’åºåˆ¤æ–­\n **/\n for (i in 5 downTo 1) {\n \tprintln(i)\n }\n\n/**\n *  4. step\n *  ä½œç”¨ï¼šè°ƒæ•´æ­¥é•¿\n **/\n// è®¾ç½®æ­¥é•¿ä¸º2ï¼Œé¡ºåºè¾“å‡º1ã€3ã€5\nfor (i in 1..5 step 2) println(i) \n\n// è®¾ç½®æ­¥é•¿ä¸º2ï¼Œå€’åºè¾“å‡º5ã€3ã€1\nfor (i in 1 downTo 5 step 2) println(i) \n```\n\n***\n\n# 2. ç±»å‹æ£€æŸ¥ & è½¬æ¢\nåŒ…æ‹¬ï¼šisã€æ™ºèƒ½è½¬æ¢ å’Œ as \n```\n/**\n *  1. is\n *  ä½œç”¨ï¼šåˆ¤æ–­ä¸€ä¸ªå¯¹è±¡ä¸æŒ‡å®šçš„ç±»å‹æ˜¯å¦ä¸€è‡´\n **/\n// åˆ¤æ–­å˜é‡açš„æ•°æ®ç±»å‹æ˜¯å¦æ˜¯String\nvar a: Any = \"a\"\nif (a is String) {\n    println(\"aæ˜¯Stringç±»å‹\")\n}\nif (a !is Int) {\n    println(\"aä¸æ˜¯Intç±»å‹\")\n}\n\n/**\n *  2. æ™ºèƒ½è½¬æ¢\n *  è¯´æ˜ï¼š kotlinä¸å¿…ä½¿ç”¨æ˜¾å¼ç±»å‹è½¬æ¢æ“ä½œï¼Œå› ä¸ºç¼–è¯‘å™¨ä¼šè·Ÿè¸ªä¸å¯å˜å€¼çš„isæ£€æŸ¥ä»¥åŠæ˜¾å¼è½¬æ¢ï¼Œå¹¶åœ¨éœ€è¦æ—¶è‡ªåŠ¨æ’å…¥ï¼ˆå®‰å…¨çš„ï¼‰è½¬æ¢\n **/\n var a: Any = \"a\"\nif (a is String) {\n    println(\"aæ˜¯Stringç±»å‹\")\n    println(a.length) // a è‡ªåŠ¨è½¬æ¢ä¸ºStringç±»å‹\n    //è¾“å‡ºç»“æœä¸ºï¼š1\n}\n\n// åå‘æ£€æŸ¥ï¼š aè‡ªåŠ¨è½¬æ¢ä¸ºStringç±»å‹\nif (a !is String) {\n\tprint(a.length)\n}\n\n// åœ¨ && å’Œ || çš„å³ä¾§ä¹Ÿå¯ä»¥æ™ºèƒ½è½¬æ¢ï¼š\n// `&&` å³ä¾§çš„ a è‡ªåŠ¨è½¬æ¢ä¸ºString\nif (a is String && a.length > 0)\n// `||` å³ä¾§çš„ a è‡ªåŠ¨è½¬æ¢ä¸ºString\nif (a is String || a.length > 0)\n\n// åœ¨whenè¡¨è¾¾å¼å’Œwhileå¾ªç¯é‡Œä¹Ÿèƒ½æ™ºèƒ½è½¬æ¢ï¼š\nwhen(a){\n    is String -> a.length\n    is Int -> a + 1\n}\n\n// éœ€è¦æ³¨æ„ï¼šå½“ç¼–è¯‘å™¨ä¸èƒ½ä¿è¯å˜é‡åœ¨æ£€æŸ¥å’Œä½¿ç”¨ä¹‹é—´ä¸å¯æ”¹å˜æ—¶ï¼Œæ™ºèƒ½è½¬æ¢ä¸èƒ½ç”¨ã€‚æ™ºèƒ½è½¬æ¢èƒ½å¦é€‚ç”¨æ ¹æ®ä»¥ä¸‹è§„åˆ™ï¼š\n// 1. valÂ å±€éƒ¨å˜é‡â€”â€”æ€»æ˜¯å¯ä»¥ï¼Œå±€éƒ¨å§”æ‰˜å±æ€§é™¤å¤–ï¼›\n// 2. valÂ å±æ€§â€”â€”å¦‚æœå±æ€§æ˜¯ private æˆ– internalï¼Œæˆ–è€…è¯¥æ£€æŸ¥åœ¨å£°æ˜å±æ€§çš„åŒä¸€æ¨¡å—ä¸­æ‰§è¡Œã€‚æ™ºèƒ½è½¬æ¢ä¸é€‚ç”¨äº open çš„å±æ€§æˆ–è€…å…·æœ‰è‡ªå®šä¹‰ getter çš„å±æ€§ï¼›\n// 3. varÂ å±€éƒ¨å˜é‡â€”â€”å¦‚æœå˜é‡åœ¨æ£€æŸ¥å’Œä½¿ç”¨ä¹‹é—´æ²¡æœ‰ä¿®æ”¹ã€æ²¡æœ‰åœ¨ä¼šä¿®æ”¹å®ƒçš„ lambda ä¸­æ•è·ã€å¹¶ä¸”ä¸æ˜¯å±€éƒ¨å§”æ‰˜å±æ€§ï¼›\n// 4. varÂ å±æ€§â€”â€”å†³ä¸å¯èƒ½ï¼ˆå› ä¸ºè¯¥å˜é‡å¯ä»¥éšæ—¶è¢«å…¶ä»–ä»£ç ä¿®æ”¹ï¼‰\n\n/**\n *  3. å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼šas\n **/\nvar any: Any = \"abc\"\nvar str: String = any as String\n\n// å¼ºåˆ¶ç±»å‹è½¬æ¢æ˜¯ä¸å®‰å…¨çš„ï¼Œè‹¥ç±»å‹ä¸å…¼å®¹åˆ™ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸\nvar int: Int = 123\nvar str: String = int as String\n// æŠ›å‡ºClassCastException\n\n/**\n *  4. å¯ç©ºè½¬æ¢æ“ä½œç¬¦ï¼šasï¼Ÿ\n *  ä½œç”¨ï¼šnullä¸èƒ½è½¬æ¢ä¸ºStringï¼Œå› è¯¥ç±»å‹ä¸æ˜¯å¯ç©ºçš„ï¼Œæ­¤æ—¶ä½¿ç”¨å¯ç©ºè½¬æ¢æ“ä½œç¬¦as?\n **/\nvar str = null\nvar str2 = str as String\n// æŠ›å‡ºTypeCastException\n\n// ä½¿ç”¨å®‰å…¨è½¬æ¢æ“ä½œç¬¦as?å¯ä»¥åœ¨è½¬æ¢å¤±è´¥æ—¶è¿”å›nullï¼Œé¿å…äº†æŠ›å‡ºå¼‚å¸¸ã€‚\nvar str = null\nvar str2 = str as? String\nprintln(str2) //è¾“å‡ºç»“æœä¸ºï¼šnull\n```\n***\n\n# 3. ç›¸ç­‰æ€§åˆ¤æ–­\nåœ¨Kotlinä¸­ï¼Œå­˜åœ¨ç»“æ„ç›¸ç­‰ & å¼•ç”¨ç›¸ç­‰ ä¸¤ç§ç›¸ç­‰åˆ¤æ–­ã€‚\n\n```\n/**\n *  1. ç»“æ„ç›¸ç­‰ï¼šequals()æˆ– ==\n *  ä½œç”¨ï¼šåˆ¤æ–­ä¸¤ä¸ªç»“æ„æ˜¯å¦ç›¸ç­‰\n **/\nvar a = \"1\"\nvar b = \"1\"\nif (a.equals(b)) {\n    println(\"a å’Œ b ç»“æ„ç›¸ç­‰\")\n    // è¾“å‡ºç»“æœä¸ºï¼ša å’Œ b ç»“æ„ç›¸ç­‰\n}\n\nvar a = 1\nvar b = 1\nif (a == b) {\n    println(\"a å’Œ b ç»“æ„ç›¸ç­‰\")\n    // è¾“å‡ºç»“æœä¸ºï¼ša å’Œ b ç»“æ„ç›¸ç­‰\n}\n\n/**\n *  2. å¼•ç”¨ç›¸ç­‰ï¼š===\n *  ä½œç”¨ï¼šåˆ¤æ–­ä¸¤ä¸ªå¼•ç”¨æ˜¯å¦æŒ‡å‘åŒä¸€å¯¹è±¡\n */ \n// è®¾ç½®ä¸€ä¸ªç±»å¦‚ä¸‹\ndata class User(var name: String, var age: Int)\n\n// è®¾ç½®å€¼\nvar a = User(\"Czh\", 22)\nvar b = User(\"Czh\", 22)\nvar c = b\nvar d = a\n\n// å¯¹æ¯”ä¸¤ä¸ªå¯¹è±¡çš„ç»“æ„\nif (c == d) {\n    println(\"a å’Œ b ç»“æ„ç›¸ç­‰\")\n} else {\n    println(\"a å’Œ b ç»“æ„ä¸ç›¸ç­‰\")\n}\n\n// å¯¹æ¯”ä¸¤ä¸ªå¯¹è±¡çš„çš„å¼•ç”¨\nif (c === d) {\n    println(\"a å’Œ b å¼•ç”¨ç›¸ç­‰\")\n} else {\n    println(\"a å’Œ b å¼•ç”¨ä¸ç›¸ç­‰\")\n}\n\n// è¾“å‡ºç»“æœï¼š\na å’Œ b ç»“æ„ç›¸ç­‰\na å’Œ b å¼•ç”¨ä¸ç›¸ç­‰\n```\n\n***\n\n# 4. ç©ºå®‰å…¨\n- åœ¨Javaä¸­ï¼ŒNullPointerExceptionå¼‚å¸¸ååˆ†å¸¸è§\n- è€ŒKotlinçš„ä¼˜ç‚¹åˆ™æ˜¯å¯ä»¥å°½å¯èƒ½é¿å…æ‰§è¡Œä»£ç æ—¶å‡ºç°çš„ç©ºæŒ‡é’ˆå¼‚å¸¸\n\n```\n/**\n *  1. å¯ç©ºç±»å‹ä¸éç©ºç±»å‹\n *  åœ¨Kotlinä¸­ï¼Œæœ‰ä¸¤ç§æƒ…å†µæœ€å¯èƒ½å¯¼è‡´å‡ºç°NullPointerException\n **/\n\n// æƒ…å†µ1ï¼šæ˜¾å¼è°ƒç”¨ throw NullPointerException()\n// æƒ…å†µ2ï¼šä½¿ç”¨!! æ“ä½œç¬¦\n// è¯´æ˜ï¼š!!æ“ä½œç¬¦å°†ä»»ä½•å€¼è½¬æ¢ä¸ºéç©ºç±»å‹ï¼Œè‹¥è¯¥å€¼ä¸ºç©ºåˆ™æŠ›å‡ºå¼‚å¸¸\nvar a = null\na!!\n// æŠ›å‡ºKotlinNullPointerException\n\n// æƒ…å†µ3ï¼šæ•°æ®ç±»å‹ä¸èƒ½ä¸ºnull\n// åœ¨ Kotlin ä¸­ï¼Œç±»å‹ç³»ç»ŸåŒºåˆ†ä¸€ä¸ªå¼•ç”¨å¯ä»¥å®¹çº³ null ï¼ˆå¯ç©ºå¼•ç”¨ï¼‰ å’Œ ä¸èƒ½å®¹çº³ï¼ˆéç©ºå¼•ç”¨ï¼‰\n// å¦‚ï¼šStringç±»å‹å˜é‡ä¸èƒ½å®¹çº³null\n// è‹¥è¦å…è®¸ä¸ºç©ºï¼Œå¯å£°æ˜ä¸€ä¸ªå˜é‡ä¸ºå¯ç©ºå­—ç¬¦ä¸²ï¼šåœ¨å­—ç¬¦ä¸²ç±»å‹åé¢åŠ ä¸€ä¸ªé—®å·?\nå¯¹äºStringï¼Œåˆ™æ˜¯å†™ä½œï¼šString?\nvar b: String? = \"b\"\nb = null\n\n\n/**\n *  2. å®‰å…¨è°ƒç”¨æ“ä½œç¬¦\n *  ä½œç”¨ï¼šè¡¨ç¤ºå¦‚æœè‹¥ä¸ä¸ºnullæ‰ç»§ç»­è°ƒç”¨\n **/\n b?.length\n // è¡¨ç¤ºï¼šè‹¥bä¸ä¸ºnullï¼Œæ‰è°ƒç”¨b.length\n\n // æ³¨ï¼šå®‰å…¨è°ƒç”¨ç¬¦è¿˜å¯ä»¥é“¾å¼è°ƒç”¨\n a?.b?.c?.d\n // å‡è®¾aä¸ä¸ºnullï¼Œæ‰ç»§ç»­å¾€ä¸‹è°ƒç”¨ï¼Œä»¥æ­¤ç±»æ¨\n // è‹¥è¯¥é“¾å¼è°ƒç”¨ä¸­ä»»ä½•ä¸€ä¸ªå±æ€§ä¸ºnullï¼Œæ•´ä¸ªè¡¨è¾¾å¼éƒ½ä¼šè¿”å›nullã€‚\n // è‹¥åªå¯¹éç©ºå€¼æ‰§è¡ŒæŸä¸ªæ“ä½œï¼Œå¯ä¸letä¸€èµ·ä½¿ç”¨\na?.b?.let { println(it) }\n```\n\nè‡³æ­¤ï¼Œå…³äº`Kotlin`çš„å…¥é—¨è¯­æ³•è®²è§£å®Œæ¯•ã€‚\n\n***\n# 5. æ€»ç»“\n- æœ¬æ–‡ä»‹ç»äº†Kotlinçš„ä¸€äº›å®ç”¨è¯­æ³•ç³–\n- æ¥ä¸‹æ¥æ¨å‡ºçš„æ–‡ç« ï¼Œæˆ‘å°†ç»§ç»­è®²è§£Kotlinçš„ç›¸å…³çŸ¥è¯†ï¼ŒåŒ…æ‹¬ä½¿ç”¨ã€è¯­æ³•ç‰¹ç‚¹ç­‰ï¼Œæ„Ÿå…´è¶£çš„è¯»è€…å¯ä»¥ç»§ç»­å…³æ³¨æˆ‘çš„åšå®¢å“¦ï¼š[Carson_Hoçš„Androidåšå®¢](https://juejin.im/user/2524134385917293)\n\n***\n\n# è¯·å¸®é¡¶ / è¯„è®ºç‚¹èµï¼å› ä¸ºä½ ä»¬çš„èµåŒ/é¼“åŠ±æ˜¯æˆ‘å†™ä½œçš„æœ€å¤§åŠ¨åŠ›ï¼\n", "user_name": "Carson_Ho", "description": "CSDNåšå®¢ä¸“å®¶ - å¾®ä¿¡å…¬ä¼—å·ï¼šæ¯å¤©å­¦ä¸€ç‚¹Android", "got_view_count": 495704, "category_name": "é˜…è¯»", "ctime": 1457483895}
{"tag_name": "å‰ç«¯", "concern_user_count": 455667, "user_id": "2119514149365742", "title": "å¦‚ä½•è®¾è®¡å®ç°ä¸­åå°æ­å»ºPaaSå¹³å°", "mark_content": "**ä½œè€…ï¼šæœˆé£**\n\n**å‡ºå“ï¼šæ·˜ç³»å‰ç«¯å›¢é˜Ÿ**\n\n## å‰è¨€\n\næœ¬æ–‡å°†ç»™å¤§å®¶åˆ†äº«å…³äºã€Šå¦‚ä½•è®¾è®¡å®ç°ä¸­åå°æ­å»º PaaS å¹³å°ã€‹è¿™ä¸ªè¯é¢˜ï¼Œä¸»è¦å›´ç»•é˜¿é‡Œæ·˜ç³»æŠ€æœ¯éƒ¨é£å†°ç³»åˆ—äº§å“ä¸­çš„ä¸­åå°æ­å»ºäº§å“ iceluna æ¥è¿›è¡Œå±•å¼€ã€‚\n\n### è¯é¢˜ä»‹ç»\n\n[](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7cfab31e8dbc432aa60a14503d66e9bb~tplv-k3u1fbpfcp-zoom-1.image)\n\næ­å»ºï¼ŒæŒ‰é¢å‘è§’è‰²çš„ä¸åŒå¤§è‡´å¯ä»¥åˆ†ä¸ºé¢å‘è¿è¥å’Œé¢å‘ç ”å‘ä¸¤ç±»æ­å»ºäº§å“ã€‚é¢å‘è¿è¥çš„æ­å»ºäº§å“ä¸»è¦æ˜¯ä»¥å¯è§†åŒ–é…ç½® ( No-code ) çš„æ–¹å¼è¿›è¡Œå®Œæ•´é¡µé¢æ­å»ºï¼Œå¦‚è¥é”€æ´»åŠ¨é¡µé¢æ­å»ºã€‚é¢å‘ç ”å‘çš„æ­å»ºäº§å“ä¸»è¦ä»¥ä½ä»£ç å¼€å‘ ( Low-code ) çš„æ–¹å¼ï¼Œæ­å»ºâ€œä¸­åå°ç³»ç»Ÿâ€æˆ–è€…â€œæ— çº¿æ¨¡å—â€ï¼Œå¦‚å•†å®¶ã€å°äºŒåå°ç³»ç»Ÿçš„æ­å»ºï¼Œæ— çº¿ Rax æ¨¡å—çš„æ­å»ºã€‚æœ¬æ–‡ä¸»é¢˜æ˜¯ä¸­åå°ç³»ç»Ÿæ­å»ºï¼Œè·Ÿè¥é”€æ´»åŠ¨ç±»é¡µé¢çš„æ­å»ºåœ¨é¢å‘è§’è‰²å’Œæ­å»ºæ¨¡å¼ä¸Šæ˜¯éå¸¸ä¸åŒçš„ï¼Œæ¥ä¸‹æ¥ä¸»è¦å›´ç»• â€œ iceluna äº§å“ â€ å’Œ â€œ PaaS å¹³å°å»ºè®¾ â€ 2 ä¸ªç»´åº¦æ¥å±•å¼€è¯´æ˜ã€‚\n\n### å¤§çº²\n\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bc9cfb3a88194af6aacefb1b5aaa0fa0~tplv-k3u1fbpfcp-zoom-1.image)\n\nå¤§çº²å¦‚ä¸Šå›¾ï¼Œç¬¬ 1 éƒ¨åˆ†å¯¹ iceluna è¿™ä¸ªäº§å“è¿›è¡Œæ•´ä½“ä»‹ç»ï¼ŒåŒ…æ‹¬å…¶äº§å“èƒŒæ™¯ã€å®šä½åŠç°çŠ¶ã€‚ç¬¬ 2 éƒ¨åˆ†ä»æ¶æ„è®¾è®¡ã€åŠŸèƒ½æ¨¡å—è®¾è®¡ã€ç ”å‘æµç¨‹è®¾è®¡ä¸‰æ–¹é¢æ¥ä»‹ç»ä¸­åå°æ­å»ºäº§å“çš„è®¾è®¡æ€è·¯ã€‚ç¬¬ 3 éƒ¨åˆ†ä¼šç€é‡ä»ä¸­åå°æ­å»ºåŸºç¡€è®¾æ–½ç»´åº¦æ¥è®²ä¸€ä¸‹ iceluna æ˜¯å¦‚ä½•å»ºè®¾æ­å»ºåŸºç¡€è®¾æ–½çš„ã€‚ç¬¬ 4 éƒ¨åˆ†åˆ™ä¼šå›åˆ° PaaS å¹³å°è¿™ä¸ªç„¦ç‚¹ï¼Œæ¥è®²è§£ PaaS å¹³å°éœ€è¦å»ºè®¾çš„æ ¸å¿ƒèƒ½åŠ›ã€‚æœ€ååˆ™æ˜¯æ€»ç»“å’Œå±•æœ›ã€‚\n\n## iceluna äº§å“ä»‹ç»\n\n### äº§å“æ¼”ç¤º\n\n![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/32f3b5b8cb8643baa7e6f7096cd691e7~tplv-k3u1fbpfcp-zoom-1.image)\n\niceluna ç ”å‘ä¸­å¿ƒåŒ…å«ç«™ç‚¹é¦–é¡µã€ç«™ç‚¹åŒºå—ä¸­å¿ƒã€åº”ç”¨ç ”å‘ä¸­å¿ƒä»¥åŠä½ä»£ç æ­å»ºç¼–è¾‘å™¨ç­‰å‡ ä¸ªä¸»è¦ç•Œé¢ã€‚ä¸Šå›¾æ˜¯ iceluna çš„ä½ä»£ç æ­å»ºç¼–è¾‘å™¨ï¼Œä¹Ÿæ˜¯ iceluna äº§å“æœ€æ ¸å¿ƒçš„ä¸€ä¸ªèƒ½åŠ›ï¼Œå›¾ä¸Šç¤ºä¾‹é‡Œä¸­é—´æ­å»ºçš„æ˜¯ä¸€ä¸ªå•†å“åˆ—è¡¨é¡µé¢ã€‚\n\n### äº§å“èƒŒæ™¯!\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/996a6480acb143a8b353f3ef58bcaf13~tplv-k3u1fbpfcp-zoom-1.image)\n\n\niceluna äº§å“å‘å±•è‡³ä»Šå·²ç»ç»å†äº† 3 å¹´åŠæ—¶é—´ï¼Œäº§å“ä¸€è·¯è¿­ä»£æ¼”è¿›è‡³ä»Šçš„ä½ä»£ç å¼€å‘ PaaS å¹³å°ï¼ŒèƒŒåæœ‰ç€ä¸€ç³»åˆ—åŸå› ã€‚åœ¨äº†è§£è¿™äº›åŸå› ä¹‹å‰ï¼Œæƒ³å…ˆæ™®åŠä¸€ä¸ªæ¦‚å¿µï¼Œä»Šå¤©æˆ‘ä»¬ä¸€ç›´åœ¨æçš„â€œä½ä»£ç å¼€å‘â€ã€‚å¯¹äº iceluna é€šç”¨æ­å»ºæ¥è¯´ï¼Œæœ‰ç€è‡ªå·±çš„ä¸€ç‚¹ç†è§£ï¼Œå®ƒæ˜¯é€šè¿‡å¯è§†åŒ–çš„æ–¹å¼ï¼Œä½¿å…·æœ‰ä¸åŒç»éªŒæ°´å¹³çš„å¼€å‘äººå‘˜å¯ä»¥é€šè¿‡å›¾å½¢åŒ–çš„ç”¨æˆ·ç•Œé¢ï¼Œä½¿ç”¨æ‹–æ‹½ç»„ä»¶å’Œæ¨¡å‹é©±åŠ¨æ¥æ­å»ºç½‘é¡µçš„å¼€å‘æ¨¡å¼ã€‚\n\näº†è§£å®Œè¿™ä¸ªæ¦‚å¿µï¼Œæˆ‘ä»¬æ¥è°ˆä¸‹ iceluna äº§å“çš„èƒŒæ™¯ï¼š\n\n*   **ä¸­åå°æŠ€æœ¯ä¹‹æ®‡**ï¼šåœ¨æ·˜ç³»æ•´ä¸ªä¸šåŠ¡åæ¶ˆè´¹è€…ç«¯ï¼Œä¸­åå°è¿™ä¸€ä¾§äººåŠ›æŠ•å…¥æ˜¯åå¼±çš„ï¼Œè¿™æ˜¯ç›®å‰ä¸­åå°çš„ä¸€ä¸ªå›°å¢ƒã€‚æˆ‘ä»¬æœ‰å¤§é‡çš„å•†å®¶æˆ–å°äºŒæ“ä½œç³»ç»Ÿï¼Œå‰ç«¯äººåŠ›ç›¸å½“ç´§ç¼ºï¼Œå¤§é‡ç³»ç»Ÿä¾èµ–åç«¯/å¤–åŒ…/ ISV è´Ÿè´£ç ”å‘ï¼Œç”±äºå‰ç«¯å·¥ç¨‹ç¯å¢ƒå¤æ‚ï¼ŒæŠ€æœ¯è¿­ä»£å¿«ï¼Œé—¨æ§›é«˜ï¼Œåœ¨æ•ˆç‡/è´¨é‡/ä½“éªŒ/å¯ç»´æŠ¤æ€§ç­‰æ–¹é¢å­˜åœ¨è¾ƒå¤šé—®é¢˜ï¼Œå¯¹äºå¦‚ä½•èµ‹èƒ½ï¼Ÿå¦‚ä½•æ”¹å–„åä½œæ¨¡å¼ï¼Ÿä¼ ç»Ÿæºç æ¨¡å¼å·²ä¸èƒ½æ»¡è¶³ä¸šåŠ¡å‘å±•çš„è¯‰æ±‚ï¼Œå¯¹äºä½ä»£ç å¼€å‘æ¨¡å¼çš„éœ€æ±‚æ—¥è¶‹å¼ºçƒˆã€‚\n*   **ä½ä»£ç å¼€å‘æ¨¡å¼çš„å´›èµ·**ï¼šæ® Forrester å¸‚åœºè°ƒç ”ç»“æœï¼Œé€šè¿‡ä½ä»£ç å¼€å‘æ¨¡å¼å¯å¸¦æ¥æ•°å€ç”šè‡³ 10 å€ä»¥ä¸Šç ”å‘æ•ˆç‡çš„æå‡ã€‚è¿™å¯¹äºä¸­åå°ç°çŠ¶é¢ä¸´çš„ä¸€ä¸ªä¸šåŠ¡å‹åŠ›ï¼Œæ˜¯æˆ‘ä»¬éå¸¸è¿«åˆ‡éœ€è¦è§£å†³çš„ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯å¦‚ä½•ææ•ˆçš„é—®é¢˜ã€‚å®ƒç»™äº†æˆ‘ä»¬è¶³å¤Ÿå¤§çš„æƒ³è±¡ç©ºé—´ã€‚è¿‘å¹´æ¥å„å¤§äº’è”ç½‘å·¨å¤´å…¬å¸éƒ½ä»¥çº·çº·æŠ•å…¥åˆ°ä½ä»£ç æˆ–æ— ä»£ç å¹³å°çš„å»ºè®¾ä¸Šæ¥ã€‚åœ¨é˜¿é‡Œçš„è¯ï¼Œå„å¤§ BU ä¹Ÿæ˜¯é‡å…µæŠ•å…¥åˆ°è¿™ä¸€å—çš„ã€‚è¿™ä¹Ÿå°±è¡ç”Ÿå‡ºæ¥ç¬¬ 3 ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯æ­å»ºæ³›æ»¥åçš„æŠ€æœ¯æ”¶æ•›å’Œç»Ÿä¸€ã€‚\n*   **æ­å»ºæ³›æ»¥åçš„æ”¶æ•›å’Œç»Ÿä¸€ï¼š**é˜¿é‡Œå†…éƒ¨å„ BU é’ˆå¯¹ä¸åŒä¸šåŠ¡åœºæ™¯æ„å»ºä¿å®ˆä¼°è®¡æœ‰æ•°åä¸ªä»¥ä¸Šä½ä»£ç æ­å»ºäº§å“ï¼ŒæŠ•å…¥æˆæœ¬å·¨å¤§ï¼Œèƒ½åŠ›å®Œå–„ç¨‹åº¦ç›¸å¯¹ä¸ä¸€ã€‚åœ¨æ­å»ºè¿™å—å¦‚ä½•æ”¶æ•›å’Œç»Ÿä¸€ï¼Ÿå®Œå–„æ­å»ºåŸºç¡€è®¾æ–½ï¼Œç”±é›†å›¢å±‚é¢æä¾›ç»Ÿä¸€çš„æ­å»ºæœåŠ¡çš„è¿è¡Œå’Œå¼€å‘ç¯å¢ƒï¼Œæ˜¯åŠ¿åœ¨å¿…è¡Œã€‚æˆ‘ä¸ªäººä½œä¸ºé›†å›¢æ­å»ºåè®®çš„è´Ÿè´£äººï¼Œä¹Ÿæ˜¯å¸Œæœ›é€šè¿‡ iceluna äº§å“å»è§£å†³è¿™ä¸€å—çš„é—®é¢˜ï¼Œèƒ½è®² iceluna æ¼”è¿›æˆä¸ºä¸€ä¸ªæ­å»º PaaS å¹³å°ï¼Œå»æä¾›æ­å»ºåº•å±‚æœåŠ¡çš„èƒ½åŠ›ï¼ŒæœåŠ¡å…¨é›†å›¢çš„æ­å»ºäº§å“ã€‚\n\n### äº§å“å®šä½\n\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/342fea7137d74157884e764643b2ed1e~tplv-k3u1fbpfcp-zoom-1.image)\n\nç›®å‰ iceluna äº§å“æœ‰ç€ 3 å±‚å®šä½ï¼š\n\n1.  **ä¸­åå°é€šç”¨æ­å»ºäº§å“**ï¼šç”±æ·˜ç³»æŠ€æœ¯éƒ¨ç ”å‘ï¼Œé¢å‘å…¨ä½“ç ”å‘äººå‘˜å¯ç”¨ï¼Œæ‰“é€ ä¸€ä¸ªä¸­åå°é€šç”¨çš„æ­å»ºäº§å“ã€‚ç”±äºæ·˜ç³»ä¸šåŠ¡å‡ ä¹ä»¥å•†å®¶ï¼Œå°äºŒè¿è¥æ“ä½œç³»ç»Ÿä¸ºä¸»ï¼Œä¸šåŠ¡é€»è¾‘å¤šï¼Œäº¤äº’å¤æ‚ï¼Œå¾ˆéš¾æŠ½è±¡å›ºå®šåœºæ™¯çš„ä¸šåŠ¡æ¨¡ç‰ˆæˆ–å¯è§†åŒ–é…ç½®çš„è§£å†³æ–¹æ¡ˆã€‚å› æ­¤ï¼Œéœ€è¦æˆ‘ä»¬ä½ä»£ç å¼€å‘çš„ä¸­åå°æ­å»ºäº§å“å…·å¤‡æœ‰æå¼ºçš„é€šç”¨æ€§å’Œæ‰©å±•æ€§ï¼Œæ‰èƒ½å¤Ÿ 100% è¦†ç›–å¤æ‚äº¤äº’çš„ä¸­åå°ç³»ç»Ÿé¡µé¢çš„æ­å»ºã€‚\n2.  **å…¨é“¾è·¯ä½ä»£ç å¼€å‘å¹³å°**ï¼šé›†å‰ç«¯åº”ç”¨å·¥ç¨‹åˆ›å»ºã€å¼€å‘ã€è°ƒè¯•ã€å‘å¸ƒï¼Œç”šè‡³åˆ°é¡µé¢çš„æ‰˜ç®¡ï¼Œå…¨é“¾è·¯ä¸€ä½“åŒ–çš„ä½ä»£ç å¹³å°ã€‚å±è”½å¤æ‚çš„å‰ç«¯å·¥ç¨‹ä½“ç³»ï¼Œå…¨é“¾è·¯æ‰“é€šã€‚\n3.  **PaaS** **å¹³å°**ï¼šå»ºè®¾æ­å»ºåŸºç¡€è®¾æ–½ï¼ŒåŸºäºæ ‡å‡†æ­å»ºåè®®ç”Ÿäº§æ­å»ºç‰©æ–™ï¼Œä¸ºå„ä¸šåŠ¡åœºæ™¯æä¾›æ­å»ºæœåŠ¡çš„è¿è¡Œå’Œå¼€å‘ç¯å¢ƒã€‚ ç›®å‰ iceluna çš„ PaaS å¹³å°ä¸»è¦ä»¥ä»¥ä¸‹ 2 ç§æ¨¡å¼æä¾›æœåŠ¡ï¼š\n\n1.  **å¹³å°æ¨¡å¼**ï¼šä¸šåŠ¡ç ”å‘è¿›å…¥ iceluna ç ”å‘ä¸­å¿ƒï¼Œå…¨é“¾è·¯åœ¨ iceluna å¹³å°ä¸Šè¿›è¡Œç¼–è¾‘å™¨å®šåˆ¶å’Œè¿è¡Œï¼Œä¸šåŠ¡æ‰˜ç®¡åœ¨ iceluna å¹³å°ä¸Šï¼›\n2.  **ä¸­å°æ¨¡å¼**ï¼šè„±ç¦» iceluna ç ”å‘ä¸­å¿ƒï¼Œå¯¹å¤–å°† iceluna ç¼–è¾‘å™¨èƒ½åŠ›å’Œä½ä»£ç èƒ½åŠ›ä»¥ npm åŒ…å½¢å¼æä¾›å‡ºå»ï¼ŒåŠ©åŠ›äºå­µåŒ–å„ä¸ªé¢†åŸŸåœºæ™¯çš„ç‹¬ç«‹çš„ä½ä»£ç ç¼–è¾‘å™¨ï¼Œç‹¬ç«‹éƒ¨ç½²ã€‚\n\nç„¶åï¼Œæˆ‘ä»¬åœ¨ç›®æ ‡è®¾å®šä¸Šï¼Œå¯¹åº”æœ‰å¦‚ä¸‹ 3 ä¸ªç›®æ ‡ï¼š\n\n1.  **èµ‹èƒ½**ï¼šèµ‹èƒ½æ˜¯æˆ‘ä»¬ç¬¬ä¸€é‡è¦çš„ç›®æ ‡ï¼Œå› ä¸ºåœ¨ç›®å‰ä¸­åå°å‘å±•çš„ä¸šåŠ¡ç°çŠ¶ä¸‹æ¥è¯´ï¼Œèµ‹èƒ½æ°æ°æ˜¯ç›®å‰æœ€èƒ½æ¶ˆåŒ–ä¸­åå°ä¸šåŠ¡å‹åŠ›çš„ä¸€ä¸ªé‡è¦æ‰‹æ®µï¼Œè¿™æ˜¯æˆ‘ä»¬ç»è¿‡ 2 - 3 å¹´åœ¨ä¸šåŠ¡ä¸Šä¸æ–­æ‘¸ç´¢ä¸‹å¾—å‡ºçš„ä¸€ä¸ªç»“è®ºï¼Œèµ‹èƒ½å¯ä»¥é€šè¿‡åç«¯ã€å¤–åŒ…ï¼Œæ”¹å˜ä¸å‰ç«¯çš„ä¸€ä¸ªç”Ÿäº§å…³ç³»ï¼Œå»æ”¹å–„å’Œæå‡ç ”å‘é¡¹ç›®æˆ–è€…è¯´æ€»ä¸ªç ”å‘å›¢é˜Ÿçš„ç”Ÿäº§åŠ›ï¼Œä½¿å¾—æˆ‘ä»¬åç«¯å¤–åŒ…å¯ä»¥è·¨ç•Œçš„å·¥ä½œï¼Œå‡å°‘ä¸€äº›ä¸å¿…è¦çš„ä¾èµ–å’Œæˆæœ¬ã€‚\n2.  **ææ•ˆ**ï¼šç›®æ ‡è¿˜æ˜¯é™ä½ç ”å‘æˆæœ¬ã€‚ææ•ˆä¸€ç›´æ˜¯æˆ‘ä»¬æŠ€æœ¯æ°¸æ’çš„è¯é¢˜ï¼Œä½†å°± iceluna ç°çŠ¶æ¥è¯´ï¼Œææ•ˆæ•ˆæœå¹¶ä¸æ˜¯ç‰¹åˆ«çš„ç†æƒ³ï¼Œåœ¨ä¸‹ä¸€é¡µç°çŠ¶ä¼šèŠåˆ°ã€‚\n3.  **æ­å»ºç”Ÿæ€**ï¼šå¸Œæœ›æˆä¸ºä¸€ä¸ª PaaS å¹³å°æˆ–æ­å»ºä¸­å°ï¼Œå»å­µåŒ–é¢†åŸŸæ­å»ºäº§å“ï¼Œå½¢æˆæ­å»ºäº§å“çŸ©é˜µï¼Œåœ¨å„é¢†åŸŸä¸Šæœ‰æ›´é«˜ç ”å‘æ•ˆç‡ã€‚\n\n### äº§å“ç°çŠ¶\n\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/31c1b781974b49268e63cb120e2da698~tplv-k3u1fbpfcp-zoom-1.image)\n\niceluna æ˜¯ä¸€ä¸ªé¢å‘é›†å›¢æä¾›æœåŠ¡çš„é€šç”¨ä½ä»£ç å¼€å‘å¹³å°ï¼ŒåŸºäºäº§å“å®šä½å’Œç›®æ ‡ï¼Œiceluna åœ¨èµ‹èƒ½ã€ææ•ˆã€æ­å»ºç”Ÿæ€ä¸Šå‡å–å¾—ä¸é”™æˆæœã€‚\n\n*   **èµ‹èƒ½ï¼š**æ´»è·ƒç”¨æˆ·æ•° 1000+ ï¼Œåç«¯å æ¯” 44% ï¼Œå‰ç«¯å æ¯” 39% ï¼Œæµ‹è¯•å æ¯” 11% ï¼Œå¤–åŒ…å æ¯” 7% ã€‚ä»å æ¯”å¯ä»¥çœ‹åˆ°ï¼Œæœ‰è¶…è¿‡ 60% çš„ç”¨æˆ·å±äºéå‰ç«¯ç ”å‘äººå‘˜ï¼Œåœ¨ä½¿ç”¨ iceluna è¿›è¡Œç³»ç»Ÿé¡µé¢æ­å»ºã€‚é€šè¿‡æ•°æ®å¯ä»¥çœ‹åˆ°ï¼Œ iceluna åœ¨èµ‹èƒ½ä¸Šæœ‰ä¸é”™çš„æ•ˆæœã€‚\n*   **ææ•ˆï¼š**ä¸Šçº¿åº”ç”¨ 440+ ï¼Œé¡µé¢ 6000+ ï¼Œè¦†ç›–é˜¿é‡Œå¤šä¸ªéƒ¨é—¨ä¸­åå°åº”ç”¨ç ”å‘ï¼Œç»éœå°”æ–¯ç‰¹å¾·è½¯ä»¶å¤æ‚åº¦ç®—æ³•æ¨¡å‹æµ‹ç®—(åé¢ç« èŠ‚ä¼šä»‹ç»)ï¼Œäººå‡ç ”å‘æ•ˆèƒ½æå‡ 200% å·¦å³ã€‚\n*   **æ­å»ºç”Ÿæ€ï¼š**æä¾›å®Œå¤‡çš„æ­å»ºåŸºç¡€è®¾æ–½æœåŠ¡ & PaaS å¹³å°æœåŠ¡ï¼Œå·²å­µåŒ– 8+ ä¸šåŠ¡åœºæ™¯å®šåˆ¶çš„æ­å»ºäº§å“ã€‚\n\n## iceluna æ¶æ„è®¾è®¡\n\n### æ¶æ„è®¾è®¡\n\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ef7986aeeb2240ac93dbb9f42b6fad4b~tplv-k3u1fbpfcp-zoom-1.image)\n\nä¸Šå›¾æ˜¯ iceluna äº§å“ä» PaaS è§’åº¦çœ‹çš„ä¸€å¼ æ¶æ„åˆ†å±‚å›¾ï¼Œä»å›¾ä¸Šæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œæ ¸å¿ƒåŒ…å«åç«¯æœåŠ¡ã€æ­å»ºåŸºç¡€è®¾æ–½ã€PaaS æœåŠ¡ã€ç ”å‘ä¸­å¿ƒã€æ­å»ºäº§å“ 5 å±‚ã€‚ä¸‹é¢å¯¹æ¯ä¸€å±‚æœåŠ¡èƒ½åŠ›åšä»‹ç»ã€‚\n\n*   **åç«¯æœåŠ¡**ï¼šåŸºäº Node.js çš„ Midway æ¡†æ¶å®ç°çš„ä¸€ä¸ª Server å±‚ï¼Œæä¾›æ­å»ºå¹³å°æ•°æ®æ¥å£å’Œ Socket æœåŠ¡ã€‚\n*   **æ­å»ºåŸºç¡€è®¾æ–½å±‚**ï¼šç›®æ ‡æä¾›æ­å»ºç¼–è¾‘å™¨çš„å¼€å‘ç¯å¢ƒã€‚æ ¸å¿ƒåŒ…å«ä¸­åå°æ­å»ºæè¿°åè®®ã€ä½ä»£ç ç¼–è¾‘å™¨ã€æ’ä»¶ç”Ÿæ€ã€ç‰©æ–™ç”Ÿæ€ 4 ä¸ªæ¨¡å—èƒ½åŠ›å»ºè®¾ï¼›\n*   **PaaS** **æœåŠ¡å±‚**ï¼šæä¾›æ­å»ºç¼–è¾‘å™¨çš„è¿è¡Œç¯å¢ƒï¼Œä½¿å…¶èƒ½å…·å¤‡æœ‰å®Œå¤‡çš„æ­å»ºé…å¥—æœåŠ¡èƒ½åŠ›ã€‚\n*   **ç ”å‘ä¸­å¿ƒå±‚**ï¼šä¸šåŠ¡ç ”å‘çš„ä¸»é˜µåœ°ï¼Œæä¾›äº‘ç«¯ä¸€ä½“åŒ–çš„ç ”å‘æµç¨‹ã€‚åŒ…å«ç«™ç‚¹ä¸­å¿ƒï¼Œåº”ç”¨ä¸­å¿ƒï¼Œç‰©æ–™ä¸­å¿ƒï¼Œæ•°æ®ä¸­å¿ƒ 4 ä¸ªåŠŸèƒ½æ¨¡å—ã€‚\n*   **æ­å»ºäº§å“**ï¼šæœ€ä¸Šä¸€å±‚æ˜¯æ­å»ºäº§å“å±‚ï¼Œæ˜¯ iceluna ä½œä¸º PaaS å¹³å°æˆ–ä¸­å°ï¼Œç›®æ ‡å­µåŒ–çš„å„ä¸ªå‚ç›´é¢†åŸŸçš„æ­å»ºäº§å“ã€‚\n\n### åŠŸèƒ½æ¨¡å—è®¾è®¡!\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/def7d08e86804abdb3c266aef1b1025e~tplv-k3u1fbpfcp-zoom-1.image)\n\næ¥ä¸‹æ¥ä»åŠŸèƒ½æ¨¡å—è®¾è®¡è§’åº¦æ¥è¿›ä¸€æ­¥äº†è§£ iceluna çš„åŠŸèƒ½å…¨è²Œï¼Œè¿˜æ˜¯åŸºäºåˆš PaaS è§’åº¦çš„æ¶æ„è®¾è®¡æ ¸å¿ƒ 3 ä¸ªåˆ†å±‚æ¥æ‹†è§£é‡Œé¢çš„æ ¸å¿ƒæ¨¡å—ã€‚\n\næ­å»ºåŸºç¡€è®¾æ–½è¿™å±‚çš„è¯ï¼Œå°±åŒ…æ‹¬åŸºç¡€èƒ½åŠ›çš„å»ºè®¾ï¼ŒåŒ…å«æ­å»ºåè®®ï¼Œè§†è§‰è§„èŒƒï¼Œå·¥ç¨‹è„šæ‰‹æ¶ç­‰æºç çº§åˆ«çš„ä¸€äº›åŸºç¡€èƒ½åŠ›ã€‚å…¶æ¬¡æ˜¯æˆ‘ä»¬æ­å»ºç¼–è¾‘å™¨å†…æ ¸ï¼ŒåŒ…å«äº†éª¨æ¶ã€ä¸»é¢˜åŒ…ã€æ’ä»¶ã€ç”¨äºé…ç½®å¯è§†åŒ–å±æ€§é¢æ¿çš„æ§ä»¶ï¼Œå¦å¤–å°±æ˜¯æˆ‘ç”»å¸ƒå’Œæ¸²æŸ“å¼•æ“ 2 ä¸ªæ ¸å¿ƒæ¨¡å—ï¼Œå¦å¤–è¿˜æœ‰å›½é™…åŒ–èƒ½åŠ›æ¨¡å—ã€‚åœ¨æ’ä»¶ç”Ÿæ€æ¨¡å—ä¸Šï¼Œç›®å‰æ•´ä½“æ­å»ºç¼–è¾‘å™¨ä¸Šæ‰€æœ‰çš„åŠŸèƒ½æ¨¡å—å‡æ˜¯ä»¥æ’ä»¶çš„å½¢å¼å­˜åœ¨ã€‚æ¯”å¦‚åœ¨é¡¶éƒ¨æˆ‘ä»¬ä¼šæœ‰æ¨¡å‹é©±åŠ¨ã€å›¾åƒè¯†åˆ«ã€æ•°æ®é©±åŠ¨ã€é€»è¾‘ç¼–æ’ã€æµç¨‹ç¼–æ’ç­‰æ’ä»¶ï¼Œè¿™æ ·ä¸€äº›æ’ä»¶æ˜¯ç›®å‰æˆ‘ä»¬é‡ç‚¹æ¨å¹¿æˆ–é‡ç‚¹ç ”å‘çš„æ’ä»¶ï¼Œä½œä¸ºç ”å‘æ¨¡å¼å‡çº§æå‡æ•ˆç‡çš„æ ¸å¿ƒä¸»æŠ“æ‰‹ã€‚å…¶æ¬¡æ˜¯ç¼–è¾‘å™¨ä¸Šå¸¸è§„ä¸€äº›çš„å¤§çº²æ ‘ã€å±æ€§/äº‹ä»¶/æ ·å¼/æ•°æ®ç­‰æ’ä»¶ï¼Œåœ¨ç°é˜¶æ®µä¸»è¦ä»¥å¯è§†åŒ–å¢å¼ºæ¥è¾¾åˆ°ææ•ˆç›®çš„ã€‚åœ¨ç‰©æ–™ç”Ÿæ€æ–¹é¢ï¼Œæˆ‘ä»¬å¸Œæœ›æ„é€ ä¸€ä¸ªå®Œå¤‡çš„ç‰©æ–™ç”Ÿæ€ï¼Œé€šè¿‡ä½ä»£ç æ–¹å¼å¼€å‘æ­å»ºç»„ä»¶ã€æ­å»ºåŒºå—ã€æ­å»ºæ¨¡ç‰ˆã€ç»„ä»¶å®ä¾‹ï¼Œå¹¶è¿›è¡Œç‰©æ–™çš„å‘å¸ƒå’Œå…±äº«ã€‚å¯¹äº Â PaaS å’Œç ”å‘ä¸­å¿ƒæ¨¡å—å°±ä¸å†ä¸€ä¸€åšè¯¦ç»†ä»‹ç»ã€‚\n\n### ç ”å‘æµç¨‹è®¾è®¡\n\n![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b1f6a4c848534f68b69775ee43c71c99~tplv-k3u1fbpfcp-zoom-1.image)\n\nå›¾ä¸Šé‡ç‚¹ä»‹ç» iceluna ç ”å‘ä¸­å¿ƒçš„ç ”å‘æµç¨‹è®¾è®¡ï¼Œä¸»è¦åˆ† 2 ä¸ªæƒé™è§’è‰²ï¼š\n\n1.  **ç«™å®šç®¡ç†å‘˜**ï¼šä¸€èˆ¬ç”±ä¸“ä¸šä¸šåŠ¡å‰ç«¯è´Ÿè´£ï¼Œåˆ›å»ºç«™ç‚¹å®¡æ ¸é€šè¿‡åï¼Œå¯ä»¥å®Œæˆç«™ç‚¹åŸºæœ¬ä¿¡æ¯ã€ç¼–è¾‘å™¨é»˜è®¤é…ç½®ã€åº”ç”¨é»˜è®¤é…ç½®ã€ç‰©æ–™é»˜è®¤é…ç½®ç­‰ä¿¡æ¯ã€‚è¯¥é…ç½®è®²å†³å®šäº†åœ¨è¯¥ç«™ç‚¹ä¸‹åˆ›å»ºçš„åº”ç”¨ä¸»é¢˜ã€æ­å»ºç¼–è¾‘å½¢æ€ã€ä»¥åŠç‰©æ–™ä¾›é€‰æ± å­ç­‰ã€‚\n2.  **åº”ç”¨ç®¡ç†å‘˜**ï¼šé€‰æ‹©è¿›å…¥æŸä¸ªç«™ç‚¹åï¼Œå¯ä»¥åœ¨è¯¥ç«™ç‚¹ä¸‹åˆ›å»ºåº”ç”¨ã€åˆ›å»ºå¤šåˆ†æ”¯ã€è¿›å…¥æ­å»ºç¼–è¾‘å™¨æ­å»ºé¡µé¢æˆ–ç»„ä»¶ï¼Œåœ¨çº¿å®æ—¶è°ƒè¯•ï¼Œä¸€é”®å‘å¸ƒéƒ¨ç½²ç­‰æ“ä½œã€‚\n\n## ä¸­åå°æ­å»ºåŸºç¡€è®¾æ–½å»ºè®¾\n\n![](https://cdn.nlark.com/yuque/0/2020/jpeg/1054258/1585565543859-9615bf31-2678-49d1-8aef-092f0165bbcb.jpeg?x-oss-process=image%2Fresize%2Cw_1500)\n\näº†è§£äº† iceluna ä»å„ä¸ªç»´åº¦çš„è®¾è®¡ï¼Œç›¸ä¿¡å¯¹ iceluna çš„äº§å“è®¾è®¡æœ‰äº†ä¸€ä¸ªæ›´å…¨é¢çš„è®¤è¯†ï¼›é‚£ä¹ˆæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä»å®ç°å±‚é¢ï¼Œçœ‹çœ‹ iceluna å»ºè®¾äº†å“ªäº›åŸºç¡€è®¾æ–½èƒ½åŠ›ï¼Œæ¥ä¿éšœæ­å»ºå¹³å°çš„æŠ€æœ¯å…ˆè¿›æ€§ã€‚\n\nä»è¿™ä¸€é¡µå†…å®¹æ˜¯æˆ‘ä»¬æ•´ä¸ªä½ä»£ç æ­å»ºåŸºç¡€è®¾æ–½çš„ä¸€ä¸ªå†…å®¹å…¨å›¾ï¼Œä»å·¦ä¾§æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€ä¸ªç‰©æ–™ç ”å‘çš„æµç¨‹ï¼Œç”±ä¸“ä¸šå‰ç«¯åŒå­¦ç ”å‘æºç çš„ç‰©æ–™ï¼Œå¹¶æ²‰æ·€åˆ°ç‰©æ–™ä¸­å¿ƒï¼Œè¿™æ ·ä¸€ä¸ªæºç çš„ç‰©æ–™ï¼Œé€šè¿‡æˆ‘ä»¬ä¸€ä¸ªè§£ææ¨¡å—ï¼Œå¯ä»¥ç”Ÿæˆä¸€ä»½æ­å»ºç»„ä»¶æè¿°æ–‡ä»¶ï¼Œæœ‰äº†è¿™ä»½æè¿°æ–‡ä»¶ï¼Œå°±å¯ä»¥å…¥é©»åˆ°æˆ‘ä»¬çš„ä½ä»£ç æ­å»ºç¼–è¾‘å™¨é‡Œé¢æ¥ï¼Œä½ä»£ç æ­å»ºç¼–è¾‘å™¨ä¼šè¯†åˆ«è¿™ä¸ªç»„ä»¶ï¼Œç”Ÿæˆè¿™ä¸ªç»„ä»¶çš„å±æ€§é…ç½®é¢æ¿ï¼Œå¹¶å…·å¤‡æœ‰è‰¯å¥½çš„æ­å»ºç¼–è¾‘ä½“éªŒã€‚å…¶æ¬¡ï¼Œç¼–è¾‘å™¨å¯ä»¥å°†å·²å…¥é©»çš„æºç ç»„ä»¶ï¼Œä»¥å‘å¸ƒçš„æ–¹å¼ä¸Šè¡Œåˆ°ç‰©æ–™ä¸­å¿ƒï¼Œæ²‰æ·€æˆä¸ºä¸€ä¸ªæ­å»ºç»„ä»¶ã€‚å¤šä¸ªæ­å»ºäº§å“çŸ©é˜µï¼ŒåŸºäºç›¸åŒåè®®æ ‡å‡†ï¼Œä¸ç‰©æ–™ä¸­å¿ƒçš„ä¸Šä¸‹è¡Œï¼Œä½¿ç‰©æ–™å¾—ä»¥æµé€šå’Œå¤ç”¨ï¼Œä»è€Œå½¢æˆç‰©æ–™ç”Ÿæ€ã€‚ä»æœ€å³ä¾§å¯ä»¥çœ‹åˆ°ï¼Œå‰åç«¯ã€å¤–åŒ…ã€æµ‹è¯•éƒ½æ˜¯é€šè¿‡æ­å»ºæ–¹å¼æ¥ä½¿ç”¨ä½ä»£ç ç¼–è¾‘å™¨ï¼Œä½ä»£ç ç¼–è¾‘å™¨æˆä¸ºäº†æœ€æ ¸å¿ƒçš„ä¸€å—èƒ½åŠ›ã€‚å¦‚ä½•ä¿éšœä½ä»£ç ç¼–è¾‘å™¨çš„æŠ€æœ¯å…ˆè¿›æ€§ï¼Œæ€»ä½“å»ºè®¾çš„æ€è·¯ï¼Œä»ä»¥ä¸‹ 5 ä¸ªæ–¹å‘é˜è¿°ï¼š\n\n1.  é¦–å…ˆè¦å®šä¹‰ä¸€ä¸ªæ­å»ºæè¿°åè®®çš„æ ‡å‡†è§„èŒƒï¼Œæ‰€æœ‰æ­å»ºäº§å“éµå¾ªè¿™å¥—æ­å»ºè§„èŒƒï¼Œè¿™æ ·å¯ä»¥ä½¿ç‰©æ–™å¾—ä»¥æµé€šã€‚\n2.  æˆ‘ä»¬è¦æ„é€ ä¸€ä¸ªæ­å»ºç¼–è¾‘å™¨å¼€å‘ç”Ÿæ€ï¼Œiceluna ä½œä¸º PaaS å¹³å°æˆ–ä¸­å°æä¾›å‡ºæ¥çš„ä¸€ä¸ªèƒ½åŠ›ï¼Œå»ä½æˆæœ¬çš„å­µåŒ–å„åœºæ™¯ä¸‹çš„ä½ä»£ç ç¼–è¾‘å™¨ï¼›\n3.  å°±æ˜¯æˆ‘ä»¬æä¾›å‡ºæ¥çš„ä½ä»£ç ç¼–è¾‘å™¨ï¼Œåœ¨é¢å‘ä¸åŒç«¯çš„ä¸€ä¸ªè¯‰æ±‚ï¼Œæˆ‘ä»¬ä¼šåŒ…å« Reactï¼ŒRaxï¼Œå°ç¨‹åºç­‰æŠ€æœ¯æ ˆçš„æ­å»ºï¼Œéœ€è¦ç¼–è¾‘å™¨èƒ½æ”¯æŒå¤šæŠ€æœ¯æ ˆï¼Œé€‚é…å¤šç«¯ã€‚\n4.  ç›¸æ¯”å…¶ä»–ä½ä»£ç ç¼–è¾‘å™¨ï¼Œå®ƒå¦‚ä½•ä¿æŒæŠ€æœ¯å…ˆè¿›æ€§ï¼Œæœ‰å“ªäº›æ ¸å¿ƒèƒ½åŠ›å»ºè®¾ã€‚\n5.  æ˜¯æˆ‘ä»¬è¦æ‰“é€ çš„æ’ä»¶ç”Ÿæ€ å’Œ ç‰©æ–™ç”Ÿæ€ã€‚\n\n### æ­å»ºæè¿°åè®®æ ‡å‡†è§„èŒƒ\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/45747a2746f146fb90a0904932f2e8fd~tplv-k3u1fbpfcp-zoom-1.image)\n\nå¦‚ä½•æŒ‡å®šæ­å»ºæè¿°åè®®çš„æ ‡å‡†è§„èŒƒï¼Ÿä»ä»¥ä¸‹ 4 ä¸ªæ–¹é¢é˜è¿°æˆ‘çš„ä¸€äº›æ€è€ƒï¼š\n\n1.  **ç‰ˆæœ¬åŒ–ã€è¯­ä¹‰åŒ–ã€æ¸è¿›æ€§æè¿°**ï¼šç‰ˆæœ¬æ§åˆ¶ï¼Œè¯­ä¹‰æ¸…æ™°ï¼Œç®€æ˜æ˜“æ‡‚ï¼Œå¯è¯»æ€§å¼ºï¼›æ­å»ºçš„æœ¬è´¨æ˜¯é€šè¿‡æºç ç»„ä»¶è¿›è¡ŒåµŒå¥—ç»„åˆï¼Œä»å°å¾€å¤§ã€ä¾æ¬¡ç»„åˆç”Ÿæˆç»„ä»¶ã€åŒºå—ã€é¡µé¢ï¼Œæœ€ç»ˆé€šè¿‡äº‘ç«¯æ„å»ºç”Ÿæˆ åº”ç”¨ çš„è¿‡ç¨‹ã€‚å› æ­¤åœ¨æ­å»ºåŸºç¡€åè®®ä¸­ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“å¦‚ä½•å»æ¸è¿›æ€§çš„æè¿°ç»„ä»¶ã€åŒºå—ã€é¡µé¢ã€åº”ç”¨è¿™ 4 ä¸ªå®ä½“æ¦‚å¿µã€‚\n2.  **ä¸å¼•å…¥æ–°æ¦‚å¿µï¼Œå¯ä¸æ ‡å‡†æºç äº’è½¬**ï¼šä¸å¼•å…¥æ–°çš„è¯­æ³•æ¦‚å¿µï¼Œä»£ç éƒ¨åˆ†çº¯ JS è¯­æ³•ï¼Œé™ä½ä¸Šæ‰‹é—¨æ§›ï¼›æ˜ç¡®æ¯ä¸€ä¸ªå±æ€§ä¸æºç å¯¹åº”çš„è½¬æ¢å…³ç³»ï¼Œå¯ç”Ÿæˆè·Ÿæ‰‹å†™æ— å·®å¼‚çš„é«˜è´¨é‡æ ‡å‡†æºä»£ç ï¼›\n3.  **å¯æ‰©å±•ï¼Œå¯æµé€šæ€§ï¼Œé¢å‘å¤šç«¯**ï¼šæ”¯æŒç¬¬ä¸‰æ–¹ npm åŒ…çš„å¼•å…¥ï¼Œå¢å¼ºåè®®æè¿°èƒ½åŠ›çš„æ‰©å±•æ€§ï¼Œä»¥åº”å¯¹ä¸åŒåº”ç”¨å¤æ‚å¤šå˜çš„éœ€æ±‚ï¼Œå¦‚ Lodash ï¼ŒMoment.js ç­‰ç¬¬ä¸‰æ–¹å·¥å…·åº“ï¼›äº§ç‰©èƒ½åœ¨ä¸åŒæ­å»ºäº§å“ä¸­æµé€šï¼Œä¸æ¶‰åŠä»»ä½•ç§åŸŸæ•°æ®å­˜å‚¨ï¼Œç»Ÿä¸€æ ‡å‡†ï¼Œæ„å»ºæ­å»ºç‰©æ–™ç”Ÿæ€ã€‚ä¸èƒ½ä»…é¢å‘ Reactï¼Œè¿˜æœ‰å°ç¨‹åºç­‰å¤šç«¯ï¼›\n4.  **æ”¯æŒå›½é™…åŒ–**\n\n### ä½ä»£ç ç¼–è¾‘å™¨å¼€å‘ç”Ÿæ€\n![](https://cdn.nlark.com/yuque/0/2020/jpeg/1054258/1585565543844-839c625c-cf99-4adc-9723-d6e32ba8fc24.jpeg?x-oss-process=image%2Fresize%2Cw_1500)\n\niceluna ä½œä¸ºä¸€ä¸ª PaaS å¹³å°æˆ–æ­å»ºä¸­å°ï¼Œæˆ‘ä»¬å¸Œæœ›æŠŠæ­å»ºç¼–è¾‘å™¨åº•å±‚æ‰€æœ‰çš„èƒ½åŠ›éƒ½èƒ½åŸå­åŒ–çš„å¼€æ”¾å‡ºå»ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å»ºè®¾æ­å»ºç¼–è¾‘å™¨çš„æ—¶å€™è€ƒè™‘åˆ°äº†ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š\n\n1.  **åˆ†å±‚æ¶æ„**ï¼šæ•´ä¸ªæ¡†æ¶åˆ†ä¸ºå››å±‚èƒ½åŠ›çš„å»ºè®¾ï¼Œæœ€é‡Œå±‚ä¸ºæ­å»ºç¼–è¾‘å™¨çš„å†…æ ¸ï¼ˆä¸»è¦æœ‰æ¶ˆæ¯é€šè®¯ã€çŠ¶æ€çš„ç®¡ç†åŠé…åˆ¶çš„è§£æã€éª¨æ¶çš„åŠ è½½ã€æ’ä»¶çš„æœºåˆ¶çš„åŠ è½½ç­‰èƒ½åŠ›ï¼‰ï¼›å…¶æ¬¡ä¸ºæ¸²æŸ“æ¨¡å—ï¼Œä¹Ÿå°±æ˜¯æ¸²æŸ“æ¨¡å—çš„éƒ¨åˆ†ï¼Œå®ƒçš„è¾“å…¥å°±æ˜¯ç¬¦åˆæ­å»ºæè¿°åè®®çš„ Schemaï¼Œé€šè¿‡è¿™ä¸ªæ¨¡å—å¯ä»¥æŠŠæ•´ä¸ªé¡µé¢æ¸²æŸ“å‡ºæ¥ï¼›å†å¾€ä¸Šä¸ºç¼–æ’æ¨¡å—ï¼Œä¸»è¦è´Ÿè´£ç”»å¸ƒåŒºåŸŸçš„ç‰©æ–™æ‹–æ‹½ã€ä¸‹é’»ç¼–è¾‘ã€ç‚¹å‡»ï¼Œå¿«æ·é”®ï¼Œå¤šè®¾è®¡æ¨¡å¼ç­‰æ“ä½œï¼Œæä¾›äº†çµæ´»çš„æ‹“å±•èƒ½åŠ›ï¼›æœ€ä¸Šå±‚ä¸ºæ•´ä¸ªç¼–è¾‘å™¨çš„æ¡†æ¶ï¼ŒåŒ…æ‹¬éª¨æ¶ã€ä¸»é¢˜ä»¥åŠç¼–è¾‘å™¨é‡Œé¢æ‰€æœ‰çš„é¢æ¿éƒ½æ˜¯ä»¥åŠŸèƒ½æ’ä»¶çš„å½¢å¼é›†æˆè¿›å»çš„ã€‚\n2.  **æ¨¡å—åŒ–è§£è€¦**ï¼šè¿™é‡Œçš„æ¡†æ¶åˆ†å±‚ï¼Œæ¯ä¸€å±‚å‡ä¸ºç‹¬ç«‹ npm åŒ…ï¼Œæä¾›åŸå­åŒ–æœåŠ¡çš„èƒ½åŠ›å»å¼€æ”¾ã€‚æ¯”å¦‚æˆ‘ä»¬å¯ä»¥ä»¥æ•´ä½“ä½ä»£ç ç¼–è¾‘å™¨æ•´ä½“å¼€æ”¾ç»™éœ€è¦çš„åœºæ™¯ï¼Œä¹Ÿå¯ä»¥åªä»¥ç¼–æ’å¼•æ“æˆ–æ¸²æŸ“å¼•æ“çš„æ–¹å¼å»å¼€æ”¾ï¼Œå¦‚ç‰©æ–™ä¸­å¿ƒæ­å»ºç‰©æ–™çš„é¢„è§ˆã€‚\n3.  **æ‰©å±•èƒ½åŠ›åŠå¼€å‘ç”Ÿæ€**ï¼šé™¤äº†æä¾›ç°æœ‰çš„èƒ½åŠ›ä¹‹å¤–è¿˜æä¾›å®Œæ•´çš„éª¨æ¶ï¼Œæ’ä»¶åŠæ§ä»¶çš„å¼€å‘è„šæ‰‹æ¶åŠå‘½ä»¤è¡Œå·¥å…·æ¥ä¿è¯æ•´ä¸ªä½ä»£ç æ­å»ºç¼–è¾‘å¼€å‘æœºåˆ¶æ˜¯å®Œå¤‡å®Œå–„çš„ï¼ŒåŒæ—¶æ•´ä¸ªéª¨æ¶ã€æ’ä»¶ä¹Ÿæ˜¯å¯ä»¥åœ¨æˆ‘ä»¬æ•´ä¸ªå¹³å°è¿›è¡Œé…åˆ¶æˆ–å®šåˆ¶ã€‚\n\n### ä½ä»£ç ç¼–è¾‘å™¨å¤šç«¯é€‚é…\n\n![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/832af8060f6b49a1a570db75bb9a1973~tplv-k3u1fbpfcp-zoom-1.image)\n\nç›®å‰æ­å»ºç¼–è¾‘å™¨é¢å‘çš„é¢†åŸŸä¸ä»…ä»…æ˜¯ä¸­åå° React çš„ä½“ç³»ï¼Œè¿˜åŒ…å«æœ‰ Vue ï¼Œå°ç¨‹åºã€Rax çš„ä½“ç³»ï¼Œè¿™æ ·çš„ä¸€äº›ä½“ç³»å› ä¸ºåº•å±‚çš„æŠ€æœ¯æ ˆä¸åŒï¼Œå¯¹äºç»„ä»¶çš„è§£æå’Œæ¸²æŸ“å­˜åœ¨è¾ƒå¤§å·®å¼‚ï¼Œä¸èƒ½é€šè¿‡çº¯ç²¹çš„ React æ¸²æŸ“æ¨¡å—æ¥æŠŠæ€»ä¸ªé¡µé¢æ¸²æŸ“å‡ºæ¥ã€‚æ‰€æœ‰å‘¢ï¼Œæˆ‘ä»¬æ€æ ·å»é€‚é…å¤šç«¯ï¼Œéœ€è¦é’ˆå¯¹ä¸åŒçš„æŠ€æœ¯æ ˆï¼Œæ¥å®ç°å¯¹åº”çš„æ¸²æŸ“å¼•æ“ï¼Œé€šè¿‡å¾ˆè–„çš„ä¸€å±‚é€‚é…å±‚æ¥ä½¿å¾—æˆ‘ä»¬çš„æ­å»ºç¼–è¾‘å™¨æ”¯æŒå„ä¸ªæŠ€æœ¯æ ˆçš„æ¸²æŸ“ï¼Œä»è€Œè¾¾åˆ°å¤šç«¯é€‚é…çš„ç›®çš„ã€‚æ¯”å¦‚ï¼Œé˜¿é‡Œè¡¨æ ¼æ•°æ®æŠ¥è¡¨çš„æ­å»ºï¼Œ imgcook æ¶ˆè´¹è€…ç«¯æ­å»ºï¼Œæ·˜å®å°ç¨‹åºæ­å»ºç­‰ã€‚\n\n### ä½ä»£ç ç¼–è¾‘å™¨æ ¸å¿ƒèƒ½åŠ›\n\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4722376d85864831b48195b7b1f04aa4~tplv-k3u1fbpfcp-zoom-1.image)\n\nç¬¬ 4 å—å†…å®¹ï¼Œå°±æ˜¯æˆ‘ä»¬å¦‚ä½•ä¿éšœæ­å»ºç¼–è¾‘å™¨æŠ€æœ¯å…ˆè¿›æ€§çš„ä¸€äº›æ ¸å¿ƒèƒ½åŠ›ã€‚\n\n1.  **å¼€ç®±å³ç”¨**ï¼š æä¾›å…¨é“¾è·¯ä¸€ä½“åŒ–çš„æ­å»ºæœåŠ¡ï¼Œä¸éœ€è¦åˆ°çº¿ä¸‹å» 2 æ¬¡å¼€å‘ã€‚å…¶æ¬¡æ”¯æŒå®šåˆ¶æ­å»ºç¼–è¾‘å™¨å’Œå®šåˆ¶ä¸šåŠ¡ä¸»é¢˜é£æ ¼ã€‚åŒæ—¶åœ¨æˆ‘ä»¬å¹³å°ä¸Šæ”¯æŒå¤šäººåä½œã€å¤šåˆ†æ”¯å¹¶è¡Œå¼€å‘ï¼Œå¯ä»¥åº”å¯¹å¤§å‹å¤æ‚å·¥ç¨‹ã€‚æ¯”å¦‚æ·˜ç³»è¥é”€ç³»ç»Ÿï¼ŒåŒæ—¶ä¼šæœ‰æ•°åä¸ªäººå¹¶è¡Œå¼€å‘åŒä¸€ä¸ªåº”ç”¨ï¼Œå¾€å¾€ä¼šå»ºç«‹æ•°ä¸ªåˆ†æ”¯å¹¶è¡Œå¼€å‘éœ€æ±‚ã€‚æ‰€ä»¥å‘¢ï¼Œåƒè¿™æ ·ä¸€äº›å¤§å‹å¤æ‚ç³»ç»Ÿï¼Œä¸­åå°æ­å»ºç³»ç»Ÿä¸å…·å¤‡æœ‰å¤šäººåä½œå’Œå¤šåˆ†æ”¯å¹¶è¡Œå¼€å‘çš„èƒ½åŠ›ï¼Œé‚£åŸºæœ¬ä¸Šåœ¨æˆ‘ä»¬çš„ä¸šåŠ¡åœºæ™¯ä¸Šæ˜¯æ— æ³•è½åœ°çš„ã€‚æ‰€ä»¥è¿™ 2 å—èƒ½åŠ›å»ºè®¾éå¸¸å…³é”®å’Œé‡è¦ã€‚\n2.  **å®‰å…¨æ²™ç®±éš”ç¦»**ï¼šæˆ‘ä»¬å¯¹ä¸šå†…æ¯”è¾ƒå¤šçš„æ­å»ºäº§å“åšå¸‚åœºè°ƒç ”ï¼Œå‘ç°è¾ƒå¤šæ­å»ºç¼–è¾‘å™¨æ˜¯æ²¡æœ‰åšå¥½æ²™ç®±éš”ç¦»çš„ã€‚ iceluna å‘å±• 3 å¹´ï¼Œåå¤ä»åšéš”ç¦»åˆ°ä¸éš”ç¦»å‡ ä¸ªé˜¶æ®µçš„ä¸æ–­è¿­ä»£ï¼Œæœ€ç»ˆå½»åº•è§£å†³æ‰æ‰€æœ‰é—®é¢˜ï¼Œå®Œå…¨å®ç°æ²™ç®±éš”ç¦»ï¼Œä»è€Œä¿éšœæ­å»ºé¡µé¢ä¸ç¼–è¾‘å™¨æœ¬èº«å®Œå…¨éš”ç¦»ï¼Œäº’ä¸å¹²æ‰°ï¼Œå¹¶æ”¯æŒç‹¬ç«‹ä¸»é¢˜è®¾å®šã€‚\n3.  **å®æ—¶è°ƒè¯•èƒ½åŠ›**ï¼šæˆ‘ä»¬çš„ç”»å¸ƒæ˜¯ä¸€ä¸ªçœŸå®çš„ Runtime ï¼Œå®ƒä¸æ˜¯ä¸€ä¸ªæ¨¡æ‹Ÿå™¨æˆ–ä¸å®Œæ•´çš„æ¸²æŸ“ï¼Œä¸šå†…å¾ˆå¤šä½ä»£ç ç¼–è¾‘å™¨åœ¨æ­å»ºçŠ¶æ€å°±æ˜¯ä¸€ä¸ªçº¯ UI çš„æ¸²æŸ“ï¼Œé€šè¿‡ä½ä»£ç æ–¹å¼é…ç½®äº†äº¤äº’æ•°æ®æˆ–äº‹ä»¶ï¼Œå®ƒæ— æ³•å®æ—¶å®æ—¶ç”Ÿæ•ˆï¼Œéœ€è¦é€šè¿‡é¢„è§ˆæˆ–å‘å¸ƒç­‰é“¾è·¯æ‰èƒ½è°ƒè¯• ã€‚è€Œä¸­åå°åœºæ™¯ä¸šåŠ¡é€»è¾‘éå¸¸é‡ï¼Œå¾€å¾€éœ€è¦é«˜é¢‘çš„å®æ—¶è°ƒè¯•ï¼Œè¿™ä¹Ÿæ˜¯è·Ÿå…¶ä»–æ­å»ºäº§å“ä¸åŒï¼Œæ˜¯ç»“åˆä¸šåŠ¡åœºæ™¯å»ºè®¾çš„ä¸€ä¸ªé‡è¦èƒ½åŠ›ã€‚\n\n### ä½ä»£ç ç¼–è¾‘å™¨ç‰©æ–™ç”Ÿæ€\n\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/035a1046881d42b3ac9f3e0461ff0525~tplv-k3u1fbpfcp-zoom-1.image)\næˆ‘ä»¬æä¾›çš„é€šç”¨æ­å»ºå¹³å°ï¼Œå¯¹äºä¸åŒçš„ä¸šåŠ¡åœºæ™¯ï¼Œå¯¹äºç‰©æ–™çš„è¯‰æ±‚æ˜¯ä¸ä¸€æ ·çš„ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬çš„æ­å»ºå¹³å°æœåŠ¡äº 400 å¤šä¸ªå‰ç«¯åº”ç”¨ï¼Œè¦æœåŠ¡é›†å›¢ 20+ éƒ¨é—¨ï¼Œæˆ–è€…æ›´å¤§çš„ä¸€ä¸ªç»„ç»‡ä½“ç³»ï¼Œå¦‚æœåªæä¾›ä¸€å¥—ç‰©æ–™åº“ï¼Œé‚£æ­å»ºå¹³å°çš„å¯ç”¨æ€§ä¼šå› æ­¤è€Œå¤§æ‰“æŠ˜æ‰£ã€‚æˆ‘ä»¬éœ€è¦é’ˆå¯¹ä¸åŒ BU ä¸åŒä¸šåŠ¡åœºæ™¯ï¼Œèƒ½å¤Ÿå…·å¤‡æœ‰å¿«é€Ÿæ¥å…¥ä¸åŒç‰©æ–™çš„èƒ½åŠ›ï¼Œç¬¬ 1 ç‚¹æˆ‘ä»¬è¦èƒ½å¿«é€Ÿç”Ÿäº§ç‰©æ–™ï¼Œç¬¬ 2 ç‚¹èƒ½å¿«é€Ÿæ¥å…¥å·²æœ‰çš„ç‰©æ–™ï¼Œç¬¬ 3 ç‚¹å°±æ˜¯èƒ½å¤Ÿè®©è¿™ä¸ªç‰©æ–™æµé€šèµ·æ¥ï¼Œèƒ½å¤Ÿå˜æˆä¸€ä¸ªç”Ÿæ€çš„æœºåˆ¶ï¼Œå°±å¦‚ Iconfont å›¾æ ‡ç”Ÿæ€ä¸€æ ·ã€‚æ‰€ä»¥ iceluna ä¹Ÿåœ¨è‡´åŠ›äºæ€æ ·å»æ‰“é€ ä¸€ä¸ªä½ä»£ç æ­å»ºç‰©æ–™çš„ä¸€ä¸ªç”Ÿæ€ã€‚æˆ‘ä»¬åœ¨è¿™å—åšçš„æ ¸å¿ƒå·¥ä½œï¼Œä¸»è¦å¦‚ä¸‹ï¼š\n\n*   **ç»Ÿä¸€æ­å»ºç‰©æ–™æè¿°åè®®**ï¼šç»Ÿä¸€æ ‡å‡†ï¼Œè§„èŒƒç”Ÿäº§ï¼Œæå‡æ­å»ºç‰©æ–™çš„å¯å¤ç”¨æ€§ã€‚\n*   **å®ç°ç‰©æ–™ä½æˆæœ¬æ¥å…¥**ï¼šæ”¯æŒ React ç»„ä»¶ npm åŒ…ä½æˆæœ¬çš„æ¥å…¥ï¼Œä¸éœ€è¦å¯¹ç»„ä»¶è¿›è¡Œ 2 æ¬¡åŒ…è£…æˆ–å¼€å‘ï¼Œé€šè¿‡ç®€å•é…ç½®ä¸€ä¸ªè¡¨å•ï¼Œå°±å¯ä»¥å°†ç»„ä»¶æ¥å…¥è¿›æ¥ï¼Œå¹¶ä¸”ä¿éšœç»„ä»¶åœ¨æºç é‡Œé¢å®Œæ•´çš„æ‰€æœ‰å±æ€§ï¼Œåœ¨å±æ€§é…ç½®é¢æ¿å¯ä»¥å…·å¤‡å®Œæ•´çš„å¯è§†åŒ–é…ç½®èƒ½åŠ›ï¼Œæ— è®ºä½ çš„å±æ€§æ˜¯ä»€ä¹ˆç±»å‹ï¼Œæ•°ç»„ç±»å‹ä¹Ÿå¥½ï¼Œå¯¹è±¡ç±»å‹ä¹Ÿå¥½ï¼ŒReactNode ç±»å‹ä¹Ÿå¥½ï¼Œéƒ½å…·å¤‡æœ‰å®Œæ•´çš„å¯è§†åŒ–æœºåˆ¶ï¼Œæ¥ä¿éšœè‰¯å¥½çš„ç¼–è¾‘ä½“éªŒã€‚\n*   **æ­å»ºç‰©æ–™æµé€š**ï¼šå»ºè®¾æ­å»ºç‰©æ–™å¸‚åœºï¼Œå½¢æˆç±»ä¼¼ Iconfont çš„ç”Ÿæ€æœºåˆ¶ã€‚\n\næˆ‘ä»¬å›åˆ°å·¦ä¾§å›¾ä¸Šæ¥çœ‹ï¼Œæˆ‘ä»¬çš„ä½ä»£ç ç¼–è¾‘å™¨ï¼Œå®ƒä¸ä»…ä»…æ˜¯å¯ä»¥æ¥å…¥ç»„ä»¶ï¼Œæœ€é‡è¦çš„èƒ½åŠ›å°±æ˜¯é€šè¿‡ä½ä»£ç çš„æ–¹å¼æ¥ç”Ÿäº§ç»„ä»¶ï¼Œä¸ºä»€ä¹ˆï¼Ÿä½ä»£ç ç¼–è¾‘å™¨é¢å¯¹æ›´å¹¿çš„ç”¨æˆ·ï¼Œæ¯”å¦‚åç«¯å’Œå¤–åŒ…åŒå­¦ï¼Œä»–ä»¬ä¸æŒæ¡å¾ˆå¤šçš„æºç çŸ¥è¯†ï¼Œä¹Ÿä¸æŒæ¡æºç çš„å·¥ç¨‹ä½“ç³»ç¯å¢ƒï¼Œä½†æ˜¯ä»–ä»¬åŒæ ·ä¼šæœ‰åšç»„ä»¶çš„è¯‰æ±‚ã€‚å…¶æ¬¡ï¼Œæ­å»ºç¼–è¾‘å™¨æœ¬èº«å°±æ˜¯ä¸€ä¸ªææ•ˆçš„å¼€å‘æ¨¡å¼ï¼Œæ— è®ºæ˜¯å‰ç«¯è¿˜æ˜¯åç«¯ï¼Œç ”å‘é¡µé¢è¿˜æ˜¯ç»„ä»¶ï¼Œä½ä»£ç å¼€å‘åŒæ ·å¸¦æ¥å¼€å‘ä¾§çš„æ•ˆç‡æå‡ã€‚åœ¨ iceluna ä¸Šï¼Œæˆ‘ä»¬ä¹Ÿæä¾›äº†ç‰©æ–™ä¸“å±çš„æ­å»ºç¼–è¾‘å™¨ï¼Œå¯ä»¥åœ¨æˆ‘ä»¬çš„å¹³å°ä¸Šé€šè¿‡æ­å»ºçš„æ–¹å¼æ­å»ºç‰©æ–™ï¼Œå¹¶ä¸”æŠŠè¿™ä¸ªç‰©æ–™ä¸Šè¡Œåˆ°æˆ‘ä»¬çš„ç‰©æ–™ä¸­å¿ƒï¼Œæœ€åå½¢æˆç‰©æ–™æµé€šçš„æœºåˆ¶ã€‚\n\n## æä¾›æ­å»ºæœåŠ¡çš„ PaaS å¹³å°å»ºè®¾\n\n![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/31f4d63079f24acebd1f0d86e25d3909~tplv-k3u1fbpfcp-zoom-1.image)\n\nè®©æˆ‘ä»¬å›åˆ°ä¸»é¢˜çš„æ ¸å¿ƒé‡ç‚¹â€” PaaS å¹³å°èƒ½åŠ›å»ºè®¾ä¸Šæ¥ã€‚PaaSï¼šå¹³å°å³æœåŠ¡ ( Platform-as-a-Service )ï¼Œiceluna çš„ PaaS å®šä½æ˜¯æŠŠæ­å»ºç¼–è¾‘å™¨çš„è¿è¡Œå’Œå¼€å‘ç¯å¢ƒä½œä¸ºä¸€ç§æœåŠ¡ï¼Œæä¾›ç»™ä¸åŒä¸šåŠ¡åœºæ™¯ä¸‹çš„æ­å»ºäº§å“ã€‚\n\nå‰é¢ç« èŠ‚è®²åˆ°äº†æ­å»ºåŸºç¡€è®¾æ–½æ˜¯æä¾›æ­å»ºç¼–è¾‘å™¨çš„å¼€å‘ç¯å¢ƒï¼Œé‚£ä¸Šå±‚è¿˜éœ€è¦ä¸€ä¸ªæ›´åŠ å®Œå–„çš„å¹³å°ä¾§æœåŠ¡èƒ½åŠ›ï¼Œæ¥æä¾›æ­å»ºç¼–è¾‘å™¨å…·å¤‡å®Œæ•´è‰¯å¥½çš„è¿è¡Œç¯å¢ƒï¼Œä½¿å¾—æˆ‘ä»¬å…·å¤‡æœ‰ä¸€ä½“åŒ–ç ”å‘çš„èƒ½åŠ›ï¼Œåœ¨æ•´ä¸ªèƒ½åŠ›çš„åŸºç¡€ä¹‹ä¸Šå»å­µåŒ–å‚ç›´é¢†åŸŸçš„æ­å»ºäº§å“ã€‚\n\næˆ‘ä»¬å°†ä»ä¸‹é¢ 6 ä¸ªç»´åº¦æ¥ä»‹ç» Paas æœåŠ¡çš„èƒ½åŠ›ï¼šç ”å‘ä¸­å¿ƒç¼–è¾‘å™¨å®šåˆ¶ã€äº‘ç«¯æ„å»º & å‘å¸ƒ & å­˜å‚¨ã€å¤šäººåä½œã€å¤šåˆ†æ”¯å¼€å‘ã€ä»£ç å›æ»šã€æ•ˆèƒ½è¡¡é‡ã€‚\n\n### æ­å»ºç¼–è¾‘å™¨å®šåˆ¶æœåŠ¡\n\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/96583357b2764f459efc95fdb19ddf66~tplv-k3u1fbpfcp-zoom-1.image)\nåœ¨æˆ‘ä»¬çš„ç«™ç‚¹ä¸­å¿ƒæä¾›äº†ä¸€ä¸ªå¯è§†çš„æ–¹å¼æ¥è¿›è¡Œä¸€ä¸ªç¼–è¾‘å™¨çš„é…åˆ¶ï¼Œé€šè¿‡äº‘ç«¯æ„å»ºå°±å¯ä»¥æ„å»ºå‡ºä¸åŒæ­å»ºç¼–è¾‘å™¨ï¼Œæ¯”å¦‚å³è¾¹çš„ Iceluna æ­å»ºç¼–è¾‘å™¨åŠä¸‹é¢çš„ imgcook ç¼–è¾‘å™¨ï¼Œå°±æ˜¯åœ¨ç ”å‘ä¸­å¿ƒåˆ›å»ºäº† 2 ä¸ªä¸åŒçš„ç«™ç‚¹ï¼Œåˆ†åˆ«æ„å»ºå‡ºæ¥çš„ç¼–è¾‘å™¨ã€‚åˆšæˆ‘ä»¬çœ‹åˆ°äº†ç¼–è¾‘å™¨çš„ä¸€ä»½é…ç½®ï¼Œé‚£ä¹ˆç¼–è¾‘å™¨å…·ä½“å¯ä»¥é…ç½®å“ªäº›å†…å®¹å‘¢ï¼Ÿ\n\n*   **å¸ƒå±€å®šåˆ¶ï¼š**ç¼–è¾‘å™¨é¢å‘çš„é¢†åŸŸä¸åŒï¼Œåœºæ™¯ä¸åŒï¼Œåšæ¶ˆè´¹çš„é¡µé¢å’Œä¸­åå°é¡µé¢ï¼Œå®ƒå¯¹äºé¢æ¿ç”»å¸ƒçš„å¤§å°åŠå¯åˆ©ç”¨åŒºåŸŸéƒ½æ˜¯ä¸åŒçš„ï¼Œæ‰€æœ‰æˆ‘ä»¬å¯¹äºæ•´ä¸ªæ­å»ºç¼–è¾‘å™¨é¢æ¿å¸ƒå±€æ˜¯æœ‰ä¸åŒçš„è¯‰æ±‚ã€‚è€Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªçš„ä¸€ä¸ªå¸ƒå±€å®šåˆ¶æ¥å¿«é€Ÿæ„å»ºå‡ºä¸åŒçš„å¸ƒå±€å‡ºæ¥ï¼Œå†é…åˆ¶ä¸åŒçš„æ’ä»¶å¯ä»¥å½¢æˆä¸€ä¸ªå…¨æ–°çš„æ­å»ºç¼–è¾‘å™¨ã€‚\n\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/371e6a0e7acf4fe9a94aeccf0728d78a~tplv-k3u1fbpfcp-zoom-1.image)\n\n*   **ä¸»é¢˜å®šåˆ¶ï¼š**æ­å»ºç¼–è¾‘å™¨å¯ä»¥åµŒå…¥ä¸åŒçš„åœºæ™¯ï¼Œæ¯”å¦‚åœ¨æ·˜ç³»é‡Œé¢æˆ‘ä»¬å¯åµŒå…¥ WebIDE è·Ÿæºç è¿›è¡Œä¸€ä¸ªäº’è½¬èƒ½åŠ›çš„æ‰“é€šï¼Œä½ å¯ä»¥åŒæ—¶åˆ‡æ¢åˆ°æºç çš„å¼€å‘ï¼Œä¹Ÿå¯ä»¥åŒæ—¶åˆ‡æ¢åˆ°å¯è§†åŒ–çš„å¼€å‘ï¼Œåœ¨ WebIDE çš„ä¸‹é¢ï¼Œå®ƒæ•´ä¸ªè§†è§‰é£æ ¼å°±æ˜¯ä¸ªæ·±è‰²ç³»ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å¹³å°ä¸Šé¢ä¹Ÿæä¾›äº†ä¸»é¢˜åŒ…é…åˆ¶çš„ä¸€ä¸ªèƒ½åŠ›ï¼Œç„¶åå†é€‚é…ä¸åŒä¸»é¢˜é£æ ¼æ­é…æ¥å®šåˆ¶ç¼–è¾‘å™¨ã€‚\n\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c4d3660183094ed580e8b89d0d5cf33a~tplv-k3u1fbpfcp-zoom-1.image)\n\n*   **æ’ä»¶å®šåˆ¶**ï¼šæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªå®Œå¤‡çš„æ’ä»¶åŒ–æœºåˆ¶ï¼Œæ•´ä¸ªæ­å»ºç¼–è¾‘å™¨ä¸Šçš„æ‰€æœ‰é¢æ¿éƒ½æ˜¯ä»¥æ’ä»¶åŒ–çš„å½¢å¼æ¥æ‰¿è½½çš„ï¼Œç›®å‰ iceluna ç¼–è¾‘å™¨ä¸Šæ€»å…±æœ‰ 26 ä¸ªæ’ä»¶ï¼ˆå›¾å³å¯è§†ï¼‰ï¼ŒåŒæ—¶åœ¨æ’ä»¶ç”Ÿæ€æ± å­é‡Œé¢ï¼Œæˆ‘ä»¬å¾€åä¼šæ²‰æ·€è¶Šæ¥è¶Šå¤šçš„å…¬å…±æ’ä»¶ï¼Œå¹¶ä¸”è¿™ä¸ªæ’ä»¶éƒ½æ˜¯å¯ä»¥è¢«åµŒå…¥åˆ°æ­å»ºç¼–è¾‘å™¨é‡Œé¢çš„ã€‚ Â å¦‚æœè¿™ä¸ªæ’ä»¶æ± å­é‡Œé¢æ²¡æœ‰ä½ æƒ³è¦çš„æ’ä»¶ï¼Œæˆ‘ä»¬ä¹Ÿæä¾›äº†æ’ä»¶å¼€å‘è„šæ‰‹æ¶ï¼Œç»™ä½ æ¥å®ç°ä¸ç¼–è¾‘å™¨åŠŸèƒ½è§£è€¦ï¼Œå¯æ’æ‹”ï¼Œå¯å®šåˆ¶çš„ä¸€ä¸ªç‹¬ç«‹çš„æ’ä»¶ã€‚\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7b53d8509b4d43a9bb812e3c48178264~tplv-k3u1fbpfcp-zoom-1.image)\n\n### äº‘ç«¯æ„å»º/å‘å¸ƒ/ DB å­˜å‚¨æœåŠ¡\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f2d1d8b47dbf4bd3ac2b49d60f1e0d52~tplv-k3u1fbpfcp-zoom-1.image)\n\näº‘ç«¯æ„å»ºæœåŠ¡æ˜¯ iceluna ä½ä»£ç å¼€å‘å¹³å°æ ¸å¿ƒé“¾è·¯ä¹‹ä¸€ï¼Œç›®å‰äº‘ç«¯æ„å»ºçš„èƒ½åŠ›ä¸»è¦æ˜¯æŠŠæˆ‘ä»¬åœ¨åº”ç”¨æ­å»ºè¿‡ç¨‹ä¸­æ­å»ºå‡ºæ¥çš„é¡µé¢ï¼Œç„¶åç»„ä»¶äº§ç”Ÿå‡ºæ¥çš„ Schema ï¼Œå­˜åœ¨æ•°æ®åº“é‡Œé¢ä¹‹åçš„ç¢ç‰‡åŒ–æ•°æ®ï¼Œé€šè¿‡äº‘ç«¯æ„å»ºçš„æ–¹å¼ï¼Œå»å‘å¸ƒæˆåº”ç”¨æˆ–ç»„ä»¶æˆ–è€…ç¼–è¾‘å™¨èµ„æºåŒ…ï¼ŒåŒæ—¶æ„å»ºå‡ºæ¥çš„è¿™äº›åº”ç”¨ã€ç»„ä»¶å®ƒä»¬çš„æºä»£ç ï¼Œæˆ‘ä»¬ä¹Ÿæ¨é€åˆ° GitLab ä½œä¸ºå­˜å‚¨ï¼Œä¹Ÿä¼šå‘åˆ° CDN ï¼Œç”³è¯· CDN èµ„æºæœ€ç»ˆæ¨é€åˆ°çº¿ä¸Šå»ã€‚ç›®å‰äº‘ç«¯æ„å»ºä¸»è¦æ”¯æŒåº”ç”¨ï¼ˆæ—¥å¸¸/çº¿ä¸Šå‘å¸ƒï¼‰ã€ç»„ä»¶ï¼ˆLow code/ Procodeå‘å¸ƒ)ã€ç¼–è¾‘å™¨ï¼ˆç”»å¸ƒ/æ¡†æ¶çš„æ„å»ºï¼‰3 å¤§åŠŸèƒ½ 6 ç§å½¢æ€æ„å»ºèƒ½åŠ›ã€‚\n\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2ba21980843a43d39f43c8c626c16faa~tplv-k3u1fbpfcp-zoom-1.image)\n\näº‘ç«¯æ„å»ºæ¶æ„å›¾åˆ†ä¸ºæ•°æ®å±‚ï¼Œè¿è¡Œå±‚ï¼Œé€šä¿¡å±‚ï¼Œåº”ç”¨å±‚4å±‚ï¼Œå¦‚å›¾å·¦æ‰€ç¤ºã€‚å®ƒçš„æ ¸å¿ƒèƒ½åŠ›ä¸»è¦åŒ…å«å¦‚ä¸‹ï¼š\n\n1.  **ç¼–è¾‘å™¨å»ä¸­å¿ƒåŒ–**ï¼šåœ¨æˆ‘ä»¬çš„å¹³å°ï¼Œç«™ç‚¹ä¸‹åˆ›å»ºçš„æ¯ä¸€ä¸ªåº”ç”¨å‡å¯¹åº”ä¸€ä¸ªè‡ªå·±çš„ç¼–è¾‘å™¨èµ„æºåŒ…ï¼Œè¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥ç»™æ¯ä¸€ä¸ªåº”ç”¨å»å®šåˆ¶è‡ªå·±çš„ä¸»é¢˜å’Œç»„ä»¶çš„æ‰©å±•ï¼Œå¹¶å¸¦æœ‰ç‰ˆæœ¬åŒ–æ§åˆ¶çš„èƒ½åŠ›ã€‚\n2.  **ä¸€é”®å‘å¸ƒéƒ¨ç½²**ï¼šè¿›è¡Œæƒé™ç®¡æ§ï¼›å¯¹ç»„ä»¶çš„ä¾èµ–è¿›è¡ŒåŠ¨æ€åˆ†æï¼›åœ¨åˆ†æ”¯å‘å¸ƒè¿‡ç¨‹ä¸­ä¼šéœ€è¦åˆå¹¶ä¸»å¹²ï¼Œå¦‚æœäº§ç”Ÿå†²çªçš„è¯ï¼Œåœ¨çº¿è§£å†³å†²çªï¼›Webpack æ„å»ºå’Œ CDN å‘å¸ƒã€‚\n3.  **å¤šç³»ç»Ÿæ‰“é€š**ï¼šGitLab å­˜å‚¨ä»¥åŠé€šè¿‡ GitLab æ¥åšä»£ç å›æ»šçš„æœºåˆ¶ï¼Œå…¶æ¬¡é€šè¿‡ Tair åšæ„å»ºè¿‡ç¨‹çš„å¹¶å‘é”ï¼Œæœ€åï¼Œé€šè¿‡ ODPS åšæ„å»ºæ—¥å¿—çš„åˆ†æã€‚\n\n### å¤šäººåä½œæœåŠ¡\n\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e52cd793fe8e4c71a07457674572163c~tplv-k3u1fbpfcp-zoom-1.image)\nåœ¨ PaaS å¹³å°ï¼Œå¤šäººåä½œæ˜¯ä¸€ä¸ªä¸å¯ç¼ºå°‘çš„ä¸€ä¸ªèƒ½åŠ›ï¼Œå®ƒçš„ä¸»è¦åŸç†æ˜¯é€šè¿‡ WebSocket çš„è¿æ¥åŠ ä¸Šä¸€ä¸ªæ–‡ä»¶é”çš„æœºåˆ¶ï¼Œæ–‡ä»¶é”ç›®å‰åœ¨å¹³å°ä¸ŠåŒ…å«é¡µé¢é”ã€ç»„ä»¶é”ã€åº”ç”¨çº§åˆ«å…¬å…±æ–‡ä»¶é”è¿™ä¸‰ä¸ªç»´åº¦çš„é”ã€‚å¤§ä½“æ€è·¯ä¸»è¦æ˜¯åˆ©ç”¨WebSocket çš„ä¿æ´»çš„æœºåˆ¶ï¼Œä¸ Tair ä¿æŒä¸€ä¸ªå¿ƒè·³ä¿æ´»çš„æ¶ˆæ¯é€šä¿¡ã€‚åœ¨ Tair ä¾§åˆ™æ˜¯å­˜å‚¨ä¸€ä¸ªä¸»åŠ¨å¤±æ•ˆçš„åˆ†å¸ƒå¼ä¹è§‚é”ï¼Œç„¶åå»å­˜å‚¨è¿™ä¸ªé”çš„ä¿¡æ¯ï¼Œå¤§æ¦‚ 10 ç§’é’Ÿä¹‹å†…æ²¡æœ‰æ–°çš„å¿ƒè·³è¿‡æ¥ï¼Œè¿™ä¸ªé”å°±ä¼šå¤±æ•ˆã€‚æ‰€ä»¥è¯´ä¸€æ—¦å®¢æˆ·ç«¯æˆ– Server ç«¯çš„ client æ–­äº†ä¹‹åï¼Œé‚£è¿™ä¸ªæ–‡ä»¶é”å°±ä¼šè¢«è‡ªåŠ¨é‡Šæ”¾è¿™æ ·ä¸€ä¸ªæœºåˆ¶æ¥åšçš„å¤šäººåä½œæœåŠ¡ã€‚æˆ‘ä»¬ä¹Ÿå¯¹ä¸šç•Œå¤šäººåä½œçš„æ–¹æ¡ˆåšäº†ä¸€äº›è°ƒç ”ï¼Œæ¯”å¦‚é’‰é’‰æ–‡æ¡£ã€Google Docs ç­‰éƒ½åˆ©ç”¨äº†ä¸šç•Œæ¯”è¾ƒå…ˆè¿›çš„ OT æŠ€æœ¯ï¼Œå®ç°ç›¸å¯¹å¤æ‚ï¼ŒåŠŸèƒ½ä¹Ÿæ›´å¼ºå¤§ã€‚å¯¹äºä½ä»£ç æ­å»ºç¼–è¾‘å™¨åœºæ™¯æ¥è¯´ï¼Œç¼–è¾‘é”çš„èƒ½åŠ›å·²ç»å¤Ÿç”¨äº†ã€‚å·¦ä¾§ iceluna ç¼–è¾‘å™¨ä¸Šçº¢çº¿æ¡†å‡ºæ¥çš„ç‚¹ï¼Œéƒ½æ˜¯æœ‰é”çš„åŠŸèƒ½ã€‚\n\n### å¤šåˆ†æ”¯å¹¶è¡ŒæœåŠ¡\n\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c3fdaf19827b49cf88963d115e0754af~tplv-k3u1fbpfcp-zoom-1.image)\n\nå¤šåˆ†æ”¯å¹¶è¡Œçš„èƒ½åŠ›æœ€é‡è¦è§£å†³çš„ä¸€ä¸ªé—®é¢˜æ˜¯å†²çªè§£å†³ï¼Œå¯¹äºæºç æ¥è¯´ï¼Œå†²çªè§£å†³æ˜¯å·²ç»å­˜åœ¨çš„ä¸€ä¸ªèƒ½åŠ›ï¼Œä½†å¯¹äºä½ä»£ç äº‘ç«¯å·¥ç¨‹ä½“ç³»æ¥è¯´å´æ˜¯ä¸€ä¸ªéå¸¸éš¾è§£å†³çš„é—®é¢˜ã€‚æˆªæ­¢ç›®å‰ä¸ºæ­¢ iceluna å†²çªè§£å†³çš„ä»£ç ä»ç„¶æ˜¯æ­å»ºæè¿°åè®® Schema çš„ä»£ç ï¼Œæ¯”å¯¹æ—¶ç›¸å¯¹æ¯”è¾ƒå›°éš¾ï¼Œè¿™æ˜¯é—®é¢˜ä¹‹ä¸€ã€‚å…¶æ¬¡ï¼Œæ€»ä¸ªå†²çªè§£å†³çš„æµç¨‹ï¼Œå¤šåˆ†æ”¯å¹¶è¡Œï¼ŒåŒ…æ‹¬ä»£ç å›æ»šåˆ°æ•°æ®åº“ DB ï¼Œè¿™ä¸€å—æ€»ä¸ªæœºåˆ¶çš„æ„å»ºä¹Ÿæ˜¯ç›¸å¯¹æ¯”è¾ƒå¤æ‚çš„ã€‚æ€»ä½“çš„æµç¨‹å¦‚ä¸Šå›¾æ‰€ç¤ºã€‚\n\n### ä»£ç å›æ»šæœåŠ¡\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5e025e945a23469b85b0a12f5314c750~tplv-k3u1fbpfcp-zoom-1.image)\nä»£ç å›æ»šæœåŠ¡ä¸»è¦åˆ©ç”¨çš„å°±æ˜¯åŸºçº¿åŒæ­¥çš„æœºåˆ¶ï¼Œè¿™ä¸ªæœºåˆ¶ä¿éšœæˆ‘ä»¬å¯ä»¥æŒ‡å®šä»»æ„ commit hash è¿›è¡Œç¼–è¾‘å™¨åº”ç”¨ä»£ç å›æ»šã€‚å› ä¸ºæˆ‘ä»¬åœ¨ä½ä»£ç å¹³å°çš„æ¯ä¸€æ¬¡å‘å¸ƒï¼Œéƒ½ä¼šå°†ä»£ç åŒæ­¥åˆ° Git ï¼Œæ‰€ä»¥ä»»ä½•ä¸€æ¬¡å‘å¸ƒçš„ä»£ç éƒ½å¯ä»¥å›æ»šåˆ°æˆ‘ä»¬çš„ä½ä»£ç ç¼–è¾‘å™¨ã€‚è¿™é‡Œæœ€å¤§çš„éš¾ç‚¹å°±æ˜¯ â€œ æ•°æ®åº“çš„ç¢ç‰‡åŒ–ä¿¡æ¯ â€ ä¸ â€œ Git ä»“åº“ä¸Šæºç å·¥ç¨‹æ–‡ä»¶ â€ èƒ½å…·å¤‡æœ‰ä¸€ä¸€è½¬æ¢çš„å…³ç³»ã€‚\n\n### æ­å»ºæ•ˆèƒ½è¡¡é‡ä½“ç³»\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/435ec0dcc18046549812445408835d0b~tplv-k3u1fbpfcp-zoom-1.image)\nä½ä»£ç æ­å»ºå¹³å°çš„æ•ˆèƒ½è¡¡é‡ä½“ç³»ï¼Œåˆçœ‹è·ŸæŠ€æœ¯ä¸å¤ªç›¸å…³ï¼Œä½†ä¸ºä»€ä¹ˆè¦è®²æ•ˆèƒ½è¡¡é‡è¿™ä¸ªä½“ç³»å‘¢ï¼Ÿæˆ‘ä»¬åœ¨åšæ­å»ºå¹³å° 3 å¹´ï¼Œè¿˜æœ‰å…¶ä»–å…„å¼Ÿå›¢é˜Ÿçš„æ­å»ºå¹³å°éƒ½é¢ä¸´ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯éƒ½è¯´æ­å»ºèƒ½ææ•ˆï¼Œä½†æ²¡æœ‰ä¸€ä¸ªå¾ˆç²¾ç¡®è¡¡é‡ææ•ˆå¤šå°‘çš„æ–¹æ³•æˆ–ç­–ç•¥ï¼Œæ‰€ä»¥æˆ‘ä»¬èŠ±äº†å¾ˆé•¿æ—¶é—´å»ç ”ç©¶ï¼Œæ€æ ·æœ‰ä¸€ä¸ªç­–ç•¥æ¥è¡¡é‡æ­å»ºæ˜¯ä¸æ˜¯çœŸçš„ææ•ˆäº†ã€‚å…·ä½“çš„å®ç°æ–¹å¼ï¼Œè¡¡é‡æ ‡å‡†æ˜¯æˆ‘ä»¬å€ŸåŠ©ä¸šç•Œéœå°”æ–¯ç‰¹å¾·è½¯ä»¶å¤æ‚åº¦æµ‹é‡ç®—æ³•æ¨¡å‹ï¼Œè¿™ä¸ªç®—æ³•æ¨¡å‹å¯ä»¥å°†æ­å»ºé¡µé¢æ—¶äº§å‡ºçš„ Schema ä½œä¸ºä¸€ä¸ªè¾“å…¥ï¼Œå®ƒé€šè¿‡ Schema é‡Œé¢çš„å¦‚è¡¨è¾¾å¼ä¸ªæ•°ï¼Œä»£ç é•¿åº¦ç­‰æ•°åä¸ªç®—å­ï¼Œå¯ä»¥è®¡ç®—å‡º Schema çš„å¤æ‚åº¦ä»¥åŠé¢„è®¡å¼€å‘æ—¶é•¿ã€‚\n\nå½“ç„¶ï¼Œè¿™ä¸ªé¢„è®¡å¼€å‘æ—¶é•¿éœ€è¦åå¤å»è°ƒå‚ï¼Œæ¯”è¾ƒç¬¦åˆçœŸå®æƒ…å†µåä¼šå¾—åˆ°ä¸€ä¸ªç›¸å¯¹å‡†ç¡®çš„æ•°å­—ã€‚å¦å¤–å‘¢ï¼Œä½ä»£ç æ­å»ºç›¸å¯¹äºæºç å¼€å‘ï¼Œæœ‰ä¸€ä¸ªå¥½å¤„å°±æ˜¯ç”¨æˆ·éƒ½æ˜¯åœ¨æˆ‘ä»¬çš„å¹³å°ä¸Šè¿›è¡Œæ“ä½œï¼Œå¹³å°ä¾§å¯ä»¥é€šè¿‡åŸ‹ç‚¹ï¼Œæ“ä½œæ—¥å¿—ç­‰æ‰‹æ®µè®°å½•æ¯ä¸€ä¸ªç ”å‘äººå‘˜åœ¨æŸä¸ªé¡µé¢ä¸Šçš„æ“ä½œè®°å½•ï¼Œåœ¨ 2 æ¬¡æ“ä½œé—´éš”æ—¶é•¿åœ¨ 10 åˆ†é’Ÿä¹‹å†…çš„ç®—æœ‰æ•ˆå¼€å‘æ—¶é—´æ®µï¼Œæœ‰æ•ˆæ—¶é—´æ®µçš„æ€»å’Œå°±æ˜¯å®é™…å¼€å‘æ—¶é•¿ã€‚é€šè¿‡è®¡ç®—å…¬å¼ ç ”å‘æ•ˆèƒ½ = é¢„è®¡å¼€å‘æ—¶é•¿/å®é™…å¼€å‘æ—¶é•¿ å°±å¯ä»¥çŸ¥é“è¯¥ç”¨æˆ·å¼€å‘æ•ˆèƒ½æ˜¯æå‡è¿˜æ˜¯é™ä½ã€‚åœ¨ iceluna å¹³å°ä¸Šæ•°æ®ä¸­å¿ƒä¼šæœ‰ä¸“é—¨ä¸€ä¸ªæ•ˆèƒ½ä¸­å¿ƒï¼Œæ¥åé¦ˆæ€»ä¸ªå¹³å°çš„æ€»ä½“äººå‡ç ”å‘æ•ˆèƒ½ã€ä¸ªäººç ”å‘æ•ˆèƒ½ç­‰æ•°æ®ã€‚æ‰€ä»¥è¯´è¿™ä¸€ç‚¹éå¸¸æœ‰ä»·å€¼ï¼Œæ‰€ä»¥åˆ†äº«ç»™å¤§å®¶ã€‚\n\n## æ€»ç»“&å±•æœ›\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3ced97d134c44036b23d3b0e349730da~tplv-k3u1fbpfcp-zoom-1.image)\n\n*   **å‰è·¯æ€»ç»“**ï¼šä¸­åå°é€šç”¨æ­å»ºäº§å“å»ºè®¾æˆæœ¬è¶…é«˜ï¼Œèƒ½å¾ˆå¥½çš„è§£å†³èµ‹èƒ½&åä½œçš„é—®é¢˜ï¼Œä½†ç ”å‘ææ•ˆæœªè¾¾æ•°å€ç”šè‡³ 10 å€çš„é¢„æœŸï¼Œéœ€è¦å¾€æ¨¡å‹é©±åŠ¨ã€æ™ºèƒ½æ­å»ºç­‰ Nocode æ–°ç ”å‘æ¨¡å¼å‡çº§ï¼Œæˆ–å»ºè®¾é¢†åŸŸæ­å»ºäº§å“çŸ©é˜µæ¥è¾¾æˆæ•°å€ææ•ˆçš„ç›®æ ‡ã€‚\n*   **å±•æœ›æœªæ¥**ï¼šè‡´åŠ›äºå°† iceluna æ‰“é€ ä¸ºä¸­åå°é¢†åŸŸçš„ hpaPaaS å¹³å°ï¼ˆè¶…é«˜ç”Ÿäº§åŠ›å¹³å°ï¼‰ã€‚å¦‚æœå¿—åŒé“åˆï¼ŒæœŸå¾…çš„ä½ çš„åŠ å…¥ï¼\n![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b9730b71840c44b7ab6eb8c292a698e4~tplv-k3u1fbpfcp-zoom-1.image)", "user_name": "æ·˜ç³»å‰ç«¯å›¢é˜ŸFED", "description": "é˜¿é‡Œå·´å·´æ·˜ç³»å‰ç«¯å›¢é˜Ÿï¼Œä¸œåŠçƒæœ€å¤§çš„å‰ç«¯å›¢é˜Ÿï¼Œå…¬ä¼—å·@æ·˜ç³»å‰ç«¯å›¢é˜Ÿ", "got_view_count": 24933, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "æ•°æ®åº“", "concern_user_count": 239573, "user_id": "3139860942303527", "title": "ã€Oracleã€‘æ‰‹åŠ¨å®‰è£…å’Œå¸è½½Oracleï¼Œè¿™æ˜¯æœ€å…¨çš„ä¸€ç¯‡äº†ï¼ï¼", "mark_content": "## å†™åœ¨å‰é¢\n\n> ä¹‹å‰å†™è¿‡ä¸€ç¯‡åœ¨CentOS 7/8ä¸Šå®‰è£…Oracleçš„æ–‡ç« ï¼ŒæŒ‰ç…§æˆ‘å†™çš„æ–‡ç« å®‰è£…æˆåŠŸäº†ï¼Œä½†æ˜¯å¸è½½Oracleæ—¶å‡ºç°äº†é—®é¢˜ã€‚ä»Šå¤©ï¼Œæˆ‘å°±æ•´ç†ä¸€ç¯‡æ‰‹åŠ¨å®‰è£…å’Œå¸è½½Oracleçš„æ–‡ç« å§ã€‚å…¨æ–‡ä¸ºå®æˆ˜å‹å†…å®¹ï¼Œå…¨ç¨‹å¹²è´§ã€‚\n>\n> å¦‚æœæ–‡ç« å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œè¯·ä¸è¦åæƒœä½ çš„ç‚¹èµã€åœ¨çœ‹ã€ç•™è¨€å’Œè½¬å‘ï¼Œä½ çš„æ”¯æŒæ˜¯æˆ‘æŒç»­åˆ›ä½œçš„æœ€å¤§åŠ¨åŠ›ï¼\n\n## ç¯å¢ƒå‡†å¤‡\n\n1.CentOS7 / CentOS8 64ä½æœ€å°åŒ–å®‰è£…çš„è™šæ‹Ÿæœºç¯å¢ƒï¼ˆè¿™é‡Œçš„å®‰è£…æ­¥éª¤ï¼Œæˆ‘å°±ç›´æ¥çœç•¥äº†ï¼Œå¤§å®¶è‡ªè¡Œå®‰è£…è™šæ‹Ÿæœºç¯å¢ƒï¼‰\n\n2.Oracle 11gR2 64ä½ Linuxç‰ˆå®‰è£…åŒ…ï¼ˆå…³æ³¨ã€å†°æ²³æŠ€æœ¯ã€‘å¾®ä¿¡å…¬ä¼—å·ï¼Œå›å¤â€œoracleâ€å…³é”®å­—å³å¯è·å–Oracleæ•°æ®åº“å®‰è£…åŒ…ä¸‹è½½é“¾æ¥ï¼‰ã€‚\n\n> linux.x64_11gR2_database_1of2.zip\n>\n> linux.x64_11gR2_database_2of2.zip\n\n## å®‰è£…è¿‡ç¨‹\n\n### 1.å…³é—­é˜²ç«å¢™\n\næ“ä½œç”¨æˆ·ï¼šroot\n\n```bash\nsystemctl stop firewalld.service\nsystemctl disable firewalld.service\n```\n\n### 2.å®‰è£…ä¾èµ–åŒ…\n\næ“ä½œç”¨æˆ·ä¸ºï¼šrootã€‚\n\næ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å®‰è£…ä¾èµ–åŒ…ã€‚\n\n```bash\nyum install -y automake autotools-dev binutils bzip2 elfutils expat \\\ngawk gcc gcc-multilib g++-multilib lib32ncurses5 lib32z1 \\\nksh less lib32z1 libaio1 libaio-dev libc6-dev libc6-dev-i386 \\\nlibc6-i386 libelf-dev libltdl-dev libodbcinstq4-1 libodbcinstq4-1:i386 \\\nlibpth-dev libpthread-stubs0-dev libstdc++5 make openssh-server rlwrap \\\nrpm sysstat unixodbc unixodbc-dev unzip x11-utils zlibc unzip cifs-utils \\\nlibXext.x86_64  glibc.i686\n```\n\n### 3.åˆ›å»ºoracleç”¨æˆ·\n\næ“ä½œç”¨æˆ·ä¸ºï¼šroot\n\n```bash\ngroupadd -g 502 oinstall\ngroupadd -g 503 dba\ngroupadd -g 504 oper\ngroupadd -g 505 asmadmin\nuseradd -u 502 -g oinstall -G oinstall,dba,asmadmin,oper -s /bin/bash -m oracle\npasswd oracle\n```\n\nä¸Šè¿°å‘½ä»¤æ‰§è¡Œå®Œæ¯•åï¼Œä¸ºoracleç”¨æˆ·è®¾ç½®å¯†ç ï¼Œä¾‹å¦‚ï¼Œæˆ‘è¿™é‡Œè®¾ç½®çš„å¯†ç ä¸ºoracle\n\n### 4.è§£å‹Oracleæ•°æ®åº“å®‰è£…åŒ…\n\næ“ä½œç”¨æˆ·ï¼šoracle\næ“ä½œç›®å½•ï¼š/home/oracle\n\nå°†Oracle 11gR2å®‰è£…æ–‡ä»¶ä¸Šä¼ ï¼ˆå¯ä»¥ä½¿ç”¨sftpä¸Šä¼ ï¼‰åˆ°è¯¥æ“ä½œç›®å½•ä¸‹é¢ï¼Œç„¶åé¡ºåºè§£å‹å®‰è£…æ–‡ä»¶åˆ°è¯¥ç›®å½•ã€‚\n\n```bash\nunzip linux.x64_11gR2_database_1of2.zip\nunzip linux.x64_11gR2_database_2of2.zip\n```\n\n### 5.ä¿®æ”¹æ“ä½œç³»ç»Ÿé…ç½®\n\næ“ä½œç”¨æˆ·ï¼šroot\næ“ä½œæ–‡ä»¶ï¼š/etc/security/limits.conf\n\n```bash\nvim /etc/security/limits.conf\n```\n\nåœ¨æ–‡ä»¶çš„æœ«å°¾æ·»åŠ å¦‚ä¸‹é…ç½®é¡¹ã€‚\n\n```bash\noracle          soft      nproc   2047\noracle          hard      nproc   16384\noracle          soft      nofile  1024\noracle          hard      nofile  65536\noracle          soft      stack   10240\n```\n\n### 6.åˆ›å»ºOracleå®‰è£…ç›®å½•\n\næ“ä½œç”¨æˆ·ï¼šoracle\n\n```bash\nmkdir ~/tools/oracle11g\n```\n\n### 7.ä¿®æ”¹ç¯å¢ƒå˜é‡\n\næ“ä½œç”¨æˆ·ï¼šoracle\næ“ä½œç›®å½•ï¼š/home/oracle\n\n```bash\nvim ~/.bash_profile\n```\n\nåœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ å¦‚ä¸‹é…ç½®é¡¹\n\n```bash\nexport ORACLE_BASE=/home/oracle/tools/oracle11g\nexport ORACLE_HOME=$ORACLE_BASE/product/11.2.0/dbhome_1\nexport ORACLE_SID=orcl\nexport ORACLE_UNQNAME=orcl\nexport NLS_LANG=.AL32UTF8\nexport PATH=${PATH}:${ORACLE_HOME}/bin/:$ORACLE_HOME/lib64\n```\n\nä½¿å¾—ç¯å¢ƒå˜é‡ç”Ÿæ•ˆã€‚\n\n```bash\nsource ~/.bash_profile\n```\n\n### 8.ä¿®æ”¹Oracleé…ç½®æ–‡ä»¶\n\næ“ä½œç”¨æˆ·ï¼šoracle\næ“ä½œç›®å½•ï¼š/home/oracle\n\nå¤åˆ¶æ–‡ä»¶æ¨¡æ¿\n\n```bash\ncp /home/oracle/database/response/db_install.rsp .\n```\n\n**æ³¨æ„ï¼šå¤åˆ¶å‘½ä»¤çš„æœ€åä¸€ä¸ª . ä¸èƒ½çœç•¥ï¼Œè¡¨ç¤ºå°†db_install.rspæ–‡ä»¶ä»/home/oracle/database/responseç›®å½•æ‹·è´åˆ°å½“å‰ç›®å½•ã€‚**\n\nå¯¹db_install.rspæ–‡ä»¶è¿›è¡Œç¼–è¾‘ã€‚\n\n```bash\nvim db_install.rsp\n```\n\néœ€è¦ä¿®æ”¹çš„é…ç½®é¡¹å¦‚ä¸‹æ‰€ç¤ºï¼Œè¿™é‡Œï¼Œæˆ‘å°†ä¿®æ”¹åçš„é…ç½®é¡¹åˆ—ä¸¾å‡ºæ¥ã€‚\n\n```bash\noracle.install.option=INSTALL_DB_AND_CONFIG\nORACLE_HOSTNAME=localhost #å®é™…ä¸Šå¯ä»¥ä¿®æ”¹æˆä½ è‡ªå·±çš„ä¸»æœºåæˆ–è€…åŸŸå(IP)\nUNIX_GROUP_NAME=oinstall\nINVENTORY_LOCATION=/home/oracle/tools/oraInventory\nSELECTED_LANGUAGES=en,zh_CN\nORACLE_HOME=/home/oracle/tools/oracle11g/product/11.2.0/dbhome_1\nORACLE_BASE=/home/oracle/tools/oracle11g\noracle.install.db.InstallEdition=EE\noracle.install.db.DBA_GROUP=dba\noracle.install.db.OPER_GROUP=oper\noracle.install.db.config.starterdb.type=GENERAL_PURPOSE\noracle.install.db.config.starterdb.globalDBName=orcl\noracle.install.db.config.starterdb.SID=orcl\noracle.install.db.config.starterdb.characterSet=AL32UTF8\noracle.install.db.config.starterdb.memoryOption=true\noracle.install.db.config.starterdb.memoryLimit=1024\noracle.install.db.config.starterdb.installExampleSchemas=false\noracle.install.db.config.starterdb.password.ALL=Oracle#123456\noracle.install.db.config.starterdb.control=DB_CONTROL\noracle.install.db.config.starterdb.dbcontrol.enableEmailNotification=false\noracle.install.db.config.starterdb.dbcontrol.emailAddress=test@qq.com #å¯ä»¥å¡«å†™ä½ è‡ªå·±çš„é‚®ç®±åœ°å€\noracle.install.db.config.starterdb.automatedBackup.enable=false\noracle.install.db.config.starterdb.storageType=FILE_SYSTEM_STORAGE\noracle.install.db.config.starterdb.fileSystemStorage.dataLocation=/home/oracle/tools/oracle11g/oradata\noracle.install.db.config.starterdb.fileSystemStorage.recoveryLocation=/home/oracle/tools/oracle11g/fast_recovery_area\noracle.install.db.config.starterdb.automatedBackup.enable=false\nDECLINE_SECURITY_UPDATES=true\n```\n\n### 9.é™é»˜å®‰è£…Oracle 11gR2\n\næ“ä½œç”¨æˆ·ï¼šoracle\næ“ä½œç›®å½•ï¼š/home/oracle/database\n\n```bash\n./runInstaller -silent -ignoreSysPrereqs -responseFile /home/oracle/db_install.rsp\n```\n\næ¥ä¸‹æ¥ï¼Œå°±æ˜¯é»˜é»˜çš„ç­‰å¾…Oracleè‡ªè¡Œå®‰è£…äº†ï¼Œç­‰å¾…ä¸€æ®µæ—¶é—´åï¼Œå¦‚æœè¾“å‡ºå¦‚ä¸‹ä¿¡æ¯ï¼Œåˆ™è¡¨æ˜Oracleæ•°æ®åº“å·²ç»å®‰è£…æˆåŠŸã€‚\n\n```bash\nThe following configuration scripts need to be executed as the \"root\" user.\n#!/bin/sh\n#Root scripts to run\n\n/home/oracle/tools/oraInventory/orainstRoot.sh\n/home/oracle/tools/oracle11g/product/11.2.0/dbhome_1/root.sh\nTo execute the configuration scripts:\n\n        1. Open a terminal window\n         2. Log in as \"root\"\n         3. Run the scripts\n         4. Return to this window and hit \"Enter\" key to continue\n\nSuccessfully Setup Software.\n```\n\n### 10.å®‰è£…å®Œæˆ\n\næ“ä½œç”¨æˆ·ï¼šroot\n\næ ¹æ®ä¸Šä¸€æ­¥å®Œæˆä¿¡æ¯æç¤ºï¼Œæ‰§è¡Œä»¥ä¸‹ä¸¤è¡Œå‘½ä»¤ï¼Œå…·ä½“ä½ç½®éœ€è¦æ ¹æ®ä½ çš„å®‰è£…ä½ç½®å†³å®šï¼š\n\n```bash\n/home/oracle/tools/oraInventory/orainstRoot.sh\n/home/oracle/tools/oracle11g/product/11.2.0/dbhome_1/root.sh\n```\n\n### 11.åˆ›å»ºè¿æ¥ç”¨æˆ·\n\næ“ä½œç”¨æˆ·ï¼šoracle\n\n```bash\nsqlplus /nolog\nconn /as sysdba\nstartup\n```\n\næ¥ä¸‹æ¥ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ã€‚\n\n```bash\nalter user system identified by system;\nalter user sys identified by sys;\n```\n\nåˆ›å»ºè¿æ¥ç”¨æˆ·ã€‚\n\n```bash\ncreate user SYNC identified by SYNC;\ngrant connect,resource,dba to SYNC;\n```\n\n## éªŒè¯å®‰è£…ç»“æœ\n\n### 1.å¯åŠ¨æ•°æ®åº“\n\nå¯åŠ¨å·²ç»å®‰è£…çš„æ•°æ®åº“orclã€‚\n\næ“ä½œç”¨æˆ·oracle\n\n```bash\nsqlplus /nolog\n```\n\nä½¿ç”¨dbaæƒé™è¿æ¥Oralce\n\n```bash\nconnect / as sysdba\n```\n\nå¯åŠ¨æ•°æ®åº“\n\n```bash\nstartup\n```\n\nç¡®è®¤å¯åŠ¨ç»“æœï¼š\n\n```bash\nORACLE instance started.\n\nTotal System Global Area  534462464 bytes\nFixed Size                  2215064 bytes\nVariable Size            373293928 bytes\nDatabase Buffers          150994944 bytes\nRedo Buffers                7958528 bytes\nDatabase mounted.\nDatabase opened.\n```\n\n### 2.éªŒè¯æ•°æ®åº“\n\nè¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨Navicatè¿æ¥Oracleæ•°æ®åº“ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚\n\n![](https://img-blog.csdnimg.cn/2020052412331415.jpg#pic_center)\n\nè¿™é‡Œï¼Œè¾“å…¥çš„ç”¨æˆ·åä¸ºSYNCï¼Œå¯†ç ä¸ºSYNCã€‚\n\næ¥ä¸‹æ¥ï¼Œç‚¹å‡»â€œè¿æ¥æµ‹è¯•â€ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚\n\n![](https://img-blog.csdnimg.cn/20200524123327698.jpg#pic_center)\n\nå¯ä»¥çœ‹åˆ°ï¼ŒOracleæ•°æ®åº“è¿æ¥æˆåŠŸã€‚\n\n## æ‰‹åŠ¨å¸è½½Oracle\n\n### 1.åœæ­¢ç›‘å¬\n\n```bash\n[oracle@binghe101 ~]$ lsnrctl stop\n[oracle@binghe101 ~]$ lsnrctl status\n```\n\n### 2.åœæ­¢æ•°æ®åº“\n\n```bash\n[oracle@binghe101 ~]$ sqlplus / as sysdba\nSQL> shutdown immediate\n```\n\n### 3.åˆ é™¤oracleçš„inventory ç›®å½•\n\n```bash\n[root@binghe101 app]# rm -rf /home/oracle/tools/oraInventory/\n```\n\n### 4.åˆ é™¤Oracleçš„baseç›®å½•ä¸‹æ‰€æœ‰çš„ç›®å½•\n\n```bash\n[root@binghe101 oracle]# rm -rf /home/oracle/tools/oracle11g/*\n```\n\n### 5.åˆ é™¤ä¸´æ—¶ç›®å½•/tmp\n\n```bash\n[root@binghe101 tmp]# rm -rf /tmp/*\n```\n\n### 6.åˆ é™¤Oracleçš„é…ç½®æ–‡ä»¶\n\n```bash\n[root@binghe101 tmp]# rm -f /etc/ora*\n```\n\n### 7.åˆ é™¤oracleäº§ç”Ÿå‘½ä»¤\n\n```bash\n[root@binghe101 tmp]# rm -f /usr/local/bin/*\n```\n\n### 8.å…¶ä»–çš„æ–‡ä»¶\n\n```bash\n[root@binghe101 .oracle]# rm -rf /usr/tmp/.oracle/\n```\n\n### 9.åˆ é™¤ç”¨æˆ·å’Œç»„\n\n```bash\n[root@binghe101 tmp]# userdel -r oracle\n[root@binghe101 tmp]# groupdel oper\n[root@binghe101 tmp]# groupdel dba    \n[root@binghe101 tmp]# groupdel oinstall\n[root@binghe101 tmp]# groupdel asmadmin\n```\n\n### 10.æ’¤é”€oracleçš„èµ„æºé™åˆ¶æ–‡ä»¶\n\n```bash\n[root@binghe101 tmp]# vi /etc/security/limits.conf\n```\n\n### 11.å†…æ ¸å‚æ•°\n\n```bash\n[root@binghe101 tmp]# vi /etc/sysctl.conf \n[root@binghe101 tmp]# sysctl -p\n```\n\n### 12.åˆ é™¤oracle base\n\n```bash\n[root@binghe101 ~]# rm -rf /home/oracle/tools/oracle11g\n```\n\n## é‡ç£…ç¦åˆ©\n\nå…³æ³¨ã€Œ **å†°æ²³æŠ€æœ¯** ã€å¾®ä¿¡å…¬ä¼—å·ï¼Œåå°å›å¤ â€œ**è®¾è®¡æ¨¡å¼**â€ å…³é”®å­—é¢†å–ã€Š**æ·±å…¥æµ…å‡ºJava 23ç§è®¾è®¡æ¨¡å¼**ã€‹PDFæ–‡æ¡£ã€‚å›å¤â€œ**Java8**â€å…³é”®å­—é¢†å–ã€Š**Java8æ–°ç‰¹æ€§æ•™ç¨‹**ã€‹PDFæ–‡æ¡£ã€‚å›å¤â€œ**é™æµ**â€å…³é”®å­—è·å–ã€Š**äº¿çº§æµé‡ä¸‹çš„åˆ†å¸ƒå¼é™æµè§£å†³æ–¹æ¡ˆ**ã€‹PDFæ–‡æ¡£ï¼Œä¸‰æœ¬PDFå‡æ˜¯ç”±å†°æ²³åŸåˆ›å¹¶æ•´ç†çš„è¶…ç¡¬æ ¸æ•™ç¨‹ï¼Œé¢è¯•å¿…å¤‡ï¼ï¼\n\n<font color=\"#FF0000\">**å¥½äº†ï¼Œä»Šå¤©å°±èŠåˆ°è¿™å„¿å§ï¼åˆ«å¿˜äº†ç‚¹ä¸ªèµï¼Œç»™ä¸ªåœ¨çœ‹å’Œè½¬å‘ï¼Œè®©æ›´å¤šçš„äººçœ‹åˆ°ï¼Œä¸€èµ·å­¦ä¹ ï¼Œä¸€èµ·è¿›æ­¥ï¼ï¼**</font>\n\n## å†™åœ¨æœ€å\n\n> å¦‚æœä½ è§‰å¾—å†°æ²³å†™çš„è¿˜ä¸é”™ï¼Œè¯·å¾®ä¿¡æœç´¢å¹¶å…³æ³¨ã€Œ **å†°æ²³æŠ€æœ¯** ã€å¾®ä¿¡å…¬ä¼—å·ï¼Œè·Ÿå†°æ²³å­¦ä¹ é«˜å¹¶å‘ã€åˆ†å¸ƒå¼ã€å¾®æœåŠ¡ã€å¤§æ•°æ®ã€äº’è”ç½‘å’Œäº‘åŸç”ŸæŠ€æœ¯ï¼Œã€Œ **å†°æ²³æŠ€æœ¯** ã€å¾®ä¿¡å…¬ä¼—å·æ›´æ–°äº†å¤§é‡æŠ€æœ¯ä¸“é¢˜ï¼Œæ¯ä¸€ç¯‡æŠ€æœ¯æ–‡ç« å¹²è´§æ»¡æ»¡ï¼ä¸å°‘è¯»è€…å·²ç»é€šè¿‡é˜…è¯»ã€Œ **å†°æ²³æŠ€æœ¯** ã€å¾®ä¿¡å…¬ä¼—å·æ–‡ç« ï¼ŒåŠæ‰“é¢è¯•å®˜ï¼ŒæˆåŠŸè·³æ§½åˆ°å¤§å‚ï¼›ä¹Ÿæœ‰ä¸å°‘è¯»è€…å®ç°äº†æŠ€æœ¯ä¸Šçš„é£è·ƒï¼Œæˆä¸ºå…¬å¸çš„æŠ€æœ¯éª¨å¹²ï¼å¦‚æœä½ ä¹Ÿæƒ³åƒä»–ä»¬ä¸€æ ·æå‡è‡ªå·±çš„èƒ½åŠ›ï¼Œå®ç°æŠ€æœ¯èƒ½åŠ›çš„é£è·ƒï¼Œè¿›å¤§å‚ï¼Œå‡èŒåŠ è–ªï¼Œé‚£å°±å…³æ³¨ã€Œ **å†°æ²³æŠ€æœ¯** ã€å¾®ä¿¡å…¬ä¼—å·å§ï¼Œæ¯å¤©æ›´æ–°è¶…ç¡¬æ ¸æŠ€æœ¯å¹²è´§ï¼Œè®©ä½ å¯¹å¦‚ä½•æå‡æŠ€æœ¯èƒ½åŠ›ä¸å†è¿·èŒ«ï¼\n\n![](https://img-blog.csdnimg.cn/20200716220443647.png#pic_center)\n\n\n\n", "user_name": "å†°_æ²³", "description": "å¤§æ•°æ®æ¶æ„å¸ˆï¼Œç¼–ç¨‹ä¸“å®¶ï¼ŒMykitç³»åˆ—å¼€æºæ¡†æ¶ä½œè€…ï¼Œå¤šå¹´æ¥è‡´åŠ›äºåˆ†å¸ƒå¼ç³»", "got_view_count": 16819, "category_name": "åç«¯", "ctime": 1457483880}
{"tag_name": "Node.js", "concern_user_count": 245462, "user_id": "166781497387390", "title": "ä¸€å¹´Node.jså¼€å‘ç»éªŒæ€»ç»“", "mark_content": "> æœ¬æ–‡é¦–å‘äºå…¬ä¼—å·ï¼šç¬¦åˆé¢„æœŸçš„CoyPan\n\n#### å†™åœ¨å‰é¢\n\nä¸çŸ¥ä¸è§‰çš„ï¼Œå†™Node.jså·²ç»ä¸€å¹´äº†ã€‚ä¸åŒäºæœ€å¼€å§‹çš„demoã€æœ¬åœ°å·¥å…·ç­‰ï¼Œè¿™ä¸€å¹´é‡Œï¼Œéƒ½æ˜¯ç”¨Node.jså†™çš„çº¿ä¸Šä¸šåŠ¡ã€‚ä»ä¸€å¼€å§‹çš„Node.jsåŒæ„ç›´å‡ºï¼Œåˆ°æœ€è¿‘çš„Nodeæ¥å…¥å±‚ï¼Œä¹Ÿç®—æ˜¯å¯¹Nodeå¼€å‘å…¥é—¨äº†å§ã€‚ç›®å‰ï¼Œæˆ‘ä¸€ä¸ªäººç»´æŠ¤äº†å¤§éƒ¨åˆ†ç»„å†…æµä¼ ä¸‹æ¥çš„NodeæœåŠ¡ï¼ŒåŒ…æ‹¬å†…éƒ¨ç³»ç»Ÿå’Œçº¿ä¸ŠæœåŠ¡ã€‚æ–°å¢çš„åå°æœåŠ¡ï¼Œä¹Ÿæ˜¯å°½å¯èƒ½åœ°ä½¿ç”¨Nodeè¿›è¡Œå¼€å‘ã€‚æœ¬æ–‡æ˜¯ä¸€ä¸‹è‡ªå·±æœ€è¿‘çš„ä¸€äº›å°å°çš„æ€»ç»“å’Œæ€è€ƒã€‚\n\n> æœ¬æ–‡ä¸ä¼šæ·±å…¥è®²è§£Node.jsæœ¬èº«çš„ç‰¹æ€§ï¼Œæ¶æ„ç­‰ç­‰ã€‚æˆ‘ä¹Ÿæ²¡æœ‰å†™è¿‡Nodeæ‰©å±•æˆ–è€…åº“ä»€ä¹ˆçš„ï¼Œå¯¹Node.jsçš„äº†è§£ä¹Ÿå¹¶ä¸å¤Ÿæ·±å…¥ã€‚\n\n\n#### ä¸ºä½•ç”¨Node\n\nå¯¹äºæˆ‘æ¥è¯´ï¼Œå¯¹äºå›¢é˜Ÿæ¥è¯´ï¼Œé€‚ç”¨Nodeçš„åŸå› å…¶å®å¾ˆç®€å•ï¼š**å¼€å‘èµ·æ¥å¿«**ã€‚ç†Ÿæ‚‰JSçš„å‰ç«¯åŒå­¦å¯ä»¥å¾ˆå¿«ä¸Šæ‰‹ï¼ŒèŠ‚çœæˆæœ¬ã€‚é€‰ä¸€ä¸ªhttp serveråº“èµ·ä¸€ä¸ªserverï¼Œé€‰æ‹©åˆé€‚çš„ä¸­é—´ä»¶ï¼ŒåŒ¹é…å¥½è¯·æ±‚è·¯ç”±ï¼Œçœ‹æƒ…å†µåˆç†ä½¿ç”¨ORMåº“é“¾æ¥æ•°æ®åº“ã€å¢åˆ æ”¹æŸ¥å³å¯ã€‚\n\n\n\n#### Nodeçš„é€‚ç”¨åœºæ™¯\n\nNode.js ä½¿ç”¨äº†ä¸€ä¸ªäº‹ä»¶é©±åŠ¨ã€éé˜»å¡å¼ I/O çš„æ¨¡å‹ï¼Œä½¿å…¶è½»é‡åˆé«˜æ•ˆã€‚è¿™ç§æ¨¡å‹ä½¿å¾—Node.js å¯ä»¥é¿å…äº†ç”±äºéœ€è¦ç­‰å¾…è¾“å…¥æˆ–è€…è¾“å‡ºï¼ˆæ•°æ®åº“ã€æ–‡ä»¶ç³»ç»Ÿã€WebæœåŠ¡å™¨...ï¼‰å“åº”è€Œé€ æˆçš„ CPU æ—¶é—´æŸå¤±ã€‚æ‰€ä»¥ï¼ŒNode.jsé€‚åˆè¿ç”¨åœ¨é«˜å¹¶å‘ã€I/Oå¯†é›†ã€å°‘é‡ä¸šåŠ¡é€»è¾‘çš„åœºæ™¯ã€‚\n\nå¯¹åº”åˆ°å¹³æ—¶å…·ä½“çš„ä¸šåŠ¡ä¸Šï¼Œå¦‚æœæ˜¯å†…éƒ¨çš„ç³»ç»Ÿï¼Œå¤§éƒ¨åˆ†ä»…ä»…å°±æ˜¯éœ€è¦å¯¹æŸä¸ªæ•°æ®åº“è¿›è¡Œå¢åˆ æ”¹æŸ¥ï¼Œé‚£ä¹ˆServerç«¯ç›´æ¥å°±æ˜¯Node.jsä¸€æŠŠæ¢­ã€‚\n\nå¯¹äºçº¿ä¸Šä¸šåŠ¡ï¼Œå¦‚æœæµé‡ä¸å¤§ï¼Œå¹¶ä¸”ä¸šåŠ¡é€»è¾‘ç®€å•çš„æƒ…å†µä¸‹ï¼ŒServerç«¯ä¹Ÿå¯ä»¥å®Œå…¨ä½¿ç”¨Node.jsã€‚å¯¹äºæµé‡å·¨å¤§ï¼Œå¤æ‚åº¦é«˜çš„é¡¹ç›®ï¼Œä¸€èˆ¬ç”¨Node.jsä½œä¸ºæ¥å…¥å±‚ï¼Œåå°åŒå­¦è´Ÿè´£å®ç°æœåŠ¡ã€‚å¦‚ä¸‹å›¾ï¼š\n\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0de09a1e9f284a138bf7bec13f135d72~tplv-k3u1fbpfcp-zoom-1.image)\n\n#### åŒæ ·æ˜¯å†™JSï¼ŒNode.jså¼€å‘å’Œé¡µé¢å¼€å‘æœ‰ä»€ä¹ˆåŒºåˆ«\n\nåœ¨æµè§ˆå™¨ç«¯å¼€å‘é¡µé¢ï¼Œæ˜¯å’Œç”¨æˆ·æ‰“äº¤é“ã€é‡äº¤äº’ï¼Œæµè§ˆå™¨è¿˜æä¾›äº†å„ç§Web Apiä¾›æˆ‘ä»¬ä½¿ç”¨ã€‚Node.jsä¸»è¦é¢å‘æ•°æ®ï¼Œæ”¶åˆ°è¯·æ±‚åï¼Œè¿”å›å…·ä½“çš„æ•°æ®ã€‚è¿™æ˜¯ä¸¤è€…åœ¨ä¸šåŠ¡è·¯å¾„ä¸Šçš„åŒºåˆ«ã€‚è€ŒçœŸæ­£çš„åŒºåˆ«å…¶å®æ˜¯åœ¨äºä¸šåŠ¡æ¨¡å‹ä¸Šï¼ˆä¸šåŠ¡æ¨¡å‹ï¼Œè¿™æ˜¯æˆ‘è‡ªå·±çæƒ³çš„ä¸€ä¸ªè¯ï¼‰ã€‚ç›´æ¥ç”¨å›¾è¡¨ç¤ºå§ã€‚\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7fb3d2e65f6841af919bccbbae940734~tplv-k3u1fbpfcp-zoom-1.image)\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e447232843224ef09d08f4a16cc9af94~tplv-k3u1fbpfcp-zoom-1.image)\n\nå¼€å‘é¡µé¢æ—¶ï¼Œæ¯ä¸€ä¸ªç”¨æˆ·çš„æµè§ˆå™¨ä¸Šéƒ½æœ‰ä¸€ä»½JSä»£ç ã€‚å¦‚æœä»£ç åœ¨æŸç§æƒ…å†µä¸‹å´©äº†ï¼Œåªä¼šå¯¹å½“å‰ç”¨æˆ·äº§ç”Ÿå½±å“ï¼Œå¹¶ä¸ä¼šå½±å“å…¶ä»–ç”¨æˆ·ï¼Œç”¨æˆ·åˆ·æ–°ä¸€ä¸‹å³å¯æ¢å¤ã€‚è€Œåœ¨Node.jsä¸­ï¼Œ**åœ¨ä¸å¼€å¯å¤šè¿›ç¨‹çš„æƒ…å†µä¸‹**ï¼Œæ‰€æœ‰ç”¨æˆ·çš„è¯·æ±‚ï¼Œéƒ½ä¼šèµ°è¿›åŒä¸€ä»½JSä»£ç ï¼Œå¹¶ä¸”åªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨æ‰§è¡Œè¿™ä»½JSä»£ç ã€‚å¦‚æœæŸä¸ªç”¨æˆ·çš„è¯·æ±‚ï¼Œå¯¼è‡´å‘ç”Ÿé”™è¯¯ï¼ŒNode.jsè¿›ç¨‹æŒ‚æ‰ï¼Œserverç«¯ç›´æ¥å°±æŒ‚äº†ã€‚å°½ç®¡å¯èƒ½æœ‰è¿›ç¨‹å®ˆæŠ¤ï¼ŒæŒ‚æ‰çš„è¿›ç¨‹ä¼šè¢«é‡å¯ï¼Œä½†æ˜¯åœ¨ç”¨æˆ·è¯·æ±‚é‡å¤§çš„æƒ…å†µä¸‹ï¼Œé”™è¯¯ä¼šè¢«é¢‘ç¹è§¦å‘ï¼Œå¯èƒ½å°±ä¼šå‡ºç°serverç«¯ä¸åœæŒ‚æ‰ï¼Œä¸åœé‡å¯çš„æƒ…å†µï¼Œå¯¹ç”¨æˆ·ä½“éªŒé€ æˆå½±å“ã€‚\n\nä»¥ä¸Šï¼Œå¯èƒ½æ˜¯Node.jså¼€å‘å’Œå‰ç«¯JSå¼€å‘æœ€å¤§çš„åŒºåˆ«ã€‚\n\n\n\n#### Node.jså¼€å‘æ—¶çš„æ³¨æ„äº‹é¡¹\n\nç”¨æˆ·åœ¨è®¿é—®Node.jsæœåŠ¡æ—¶ï¼Œå¦‚æœæŸä¸€ä¸ªè¯·æ±‚å¡ä½äº†ï¼ŒæœåŠ¡è¿Ÿè¿Ÿä¸èƒ½è¿”å›ç»“æœï¼Œæˆ–è€…è¯´é€»è¾‘å‡ºé”™ï¼Œå¯¼è‡´æœåŠ¡æŒ‚æ‰ï¼Œéƒ½ä¼šå¸¦æ¥å¤§è§„æ¨¡çš„ä½“éªŒé—®é¢˜ã€‚serverç«¯çš„ç›®æ ‡ï¼Œå°±æ˜¯è¦ **å¿«é€Ÿã€å¯é ** åœ°è¿”å›æ•°æ®ã€‚\n\n##### ç¼“å­˜\n\nç”±äºNode.jsä¸æ“…é•¿å¤„ç†å¤æ‚é€»è¾‘ï¼ˆJavaScriptæœ¬èº«æ‰§è¡Œæ•ˆç‡è¾ƒä½ï¼‰ï¼Œå¦‚æœè¦ç”¨Node.jsåšæ¥å…¥å±‚ï¼Œåº”è¯¥é¿å…å¤æ‚çš„é€»è¾‘ã€‚æƒ³è¦å¿«é€Ÿå¤„ç†æ•°æ®å¹¶è¿”å›ï¼Œä¸€ä¸ªè‡³å…³é‡è¦çš„ç‚¹ï¼šä½¿ç”¨ç¼“å­˜ã€‚\n\nä¾‹å¦‚ï¼Œä½¿ç”¨NodeåšReactåŒæ„ç›´å‡ºï¼Œ`renderToString`è¿™ä¸ªApiï¼Œå¯ä»¥è¯´æ˜¯æ¯”è¾ƒé‡çš„é€»è¾‘äº†ã€‚å¦‚æœé¡µé¢çš„å¤æ‚åº¦é«˜ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½å®Œæ•´æ‰§è¡Œ`renderToString`ï¼Œä¼šé•¿æ—¶é—´å ç”¨çº¿ç¨‹æ¥æ‰§è¡Œä»£ç ï¼Œå¢åŠ å“åº”æ—¶é—´ï¼Œé™ä½æœåŠ¡çš„ååé‡ã€‚è¿™ä¸ªæ—¶å€™ï¼Œç¼“å­˜å°±ååˆ†é‡è¦äº†ã€‚\n\nå®ç°ç¼“å­˜çš„ä¸»è¦æ–¹å¼ï¼šå†…å­˜ç¼“å­˜ã€‚å¯ä»¥ä½¿ç”¨Mapï¼ŒWeakMapï¼ŒWeakRefç­‰å®ç°ã€‚å‚è€ƒä»¥ä¸‹ç®€å•çš„ç¤ºä¾‹ä»£ç ï¼š\n\n```javascript\nconst cache = new Map();\n\nrouter.get('/getContent', async (req, res) => {\n  const id = req.query.id;\n  \n  // å‘½ä¸­ç¼“å­˜\n  if(cache.get(id)) {\n    return res.send(cache.get(id));\n  }\n  \n  // è¯·æ±‚æ•°æ®\n  const rsp = await rpc.get(id);\n \t// ç»è¿‡ä¸€é¡¿å¤æ‚çš„æ“ä½œï¼Œå¤„ç†æ•°æ®\n  const content = process(rsp);\n  // è®¾ç½®ç¼“å­˜\n  cache.set(id, content);\n  \n  return res.send(content);\n});\n```\n\nä½¿ç”¨ç¼“å­˜æ—¶ï¼Œæœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„é—®é¢˜æ˜¯ï¼šå†…å­˜ç¼“å­˜å¦‚ä½•æ›´æ–°ã€‚ä¸€ç§æœ€ç®€å•çš„æ–¹æ³•ï¼Œå¼€ä¸€ä¸ªå®šæ—¶å™¨ï¼Œå®šæœŸåˆ é™¤ç¼“å­˜ï¼Œä¸‹ä¸€æ¬¡è¯·æ±‚åˆ°æ¥æ—¶ï¼Œé‡æ–°è®¾ç½®ç¼“å­˜å³å¯ã€‚åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œå¢åŠ å¦‚ä¸‹ä»£ç ï¼š\n\n```javascript\nsetTimeout(function() {\n  cache.clear();\n}, 1000 * 60); // 1åˆ†é’Ÿåˆ é™¤ä¸€æ¬¡ç¼“å­˜\n```\n\nå¦‚æœserverç«¯å®Œå…¨ä½¿ç”¨Nodeå®ç°ï¼Œéœ€è¦ç”¨Nodeç«¯ç›´æ¥è¿æ¥æ•°æ®åº“ï¼Œåœ¨æ•°æ®æ—¶æ•ˆæ€§è¦æ±‚ä¸å¤ªé«˜ã€ä¸”æµé‡ä¸å¤ªå¤§çš„æƒ…å†µä¸‹ï¼Œå°±å¯ä»¥ä½¿ç”¨ä¸Šè¿°ç±»ä¼¼çš„æ¨¡å‹ï¼Œå¦‚ä¸‹å›¾ã€‚è¿™æ ·å¯ä»¥é™ä½æ•°æ®åº“çš„å‹åŠ›ä¸”åŠ å¿«Nodeçš„å“åº”é€Ÿåº¦ã€‚\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/52d75d6bcd6d4bb083369ab455e570f0~tplv-k3u1fbpfcp-zoom-1.image)\n\n\n\nå¦å¤–ï¼Œ**è¿˜éœ€è¦æ³¨æ„å†…å­˜ç¼“å­˜çš„å¤§å°**ã€‚å¦‚æœä¸€ç›´å¾€ç¼“å­˜é‡Œå†™å…¥æ–°æ•°æ®ï¼Œé‚£ä¹ˆå†…å­˜ä¼šè¶Šæ¥è¶Šå¤§ï¼Œæœ€ç»ˆçˆ†æ‰ã€‚å¯ä»¥è€ƒè™‘ä½¿ç”¨LRUï¼ˆLeast Recently Usedï¼‰ç®—æ³•æ¥åšç¼“å­˜ã€‚å¼€è¾Ÿä¸€å—å†…å­˜ä¸“é—¨ä½œä¸ºç¼“å­˜åŒºåŸŸã€‚å½“ç¼“å­˜å¤§å°è¾¾åˆ°ä¸Šé™æ—¶ï¼Œæ·˜æ±°æœ€ä¹…æœªä½¿ç”¨çš„ç¼“å­˜ã€‚\n\nå†…å­˜ç¼“å­˜ä¼šéšç€è¿›ç¨‹çš„é‡å¯è€Œå…¨éƒ¨å¤±æ•ˆã€‚\n\nå½“åå°ä¸šåŠ¡æ¯”è¾ƒå¤æ‚ï¼Œæ¥å…¥å±‚æµé‡ï¼Œæ•°æ®é‡è¾ƒå¤§æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„æ¶æ„ï¼Œä½¿ç”¨ç‹¬ç«‹çš„å†…å­˜ç¼“å­˜æœåŠ¡ã€‚Nodeæ¥å…¥å±‚ç›´æ¥ä»ç¼“å­˜æœåŠ¡å–æ•°æ®ï¼Œåå°æœåŠ¡ç›´æ¥æ›´æ–°ç¼“å­˜æœåŠ¡ã€‚\n\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0b4daf46a6d8474382fc42c843139198~tplv-k3u1fbpfcp-zoom-1.image)\n\nå½“ç„¶ï¼Œä¸Šå›¾ä¸­çš„æ¶æ„æ˜¯æœ€ç®€å•çš„æƒ…å½¢ï¼Œç°å®ä¸­è¿˜éœ€è¦è€ƒè™‘åˆ†å¸ƒå¼ç¼“å­˜ã€ç¼“å­˜ä¸€è‡´æ€§çš„é—®é¢˜ã€‚è¿™åˆæ˜¯å¦å¤–ä¸€ä¸ªè¯é¢˜äº†ã€‚\n\n\n\n##### é”™è¯¯å¤„ç†\n\nç”±äºNode.jsè¯­è¨€çš„ç‰¹æ€§ï¼ŒNodeæœåŠ¡æ˜¯æ¯”è¾ƒå®¹æ˜“å‡ºé”™çš„ã€‚è€Œä¸€æ—¦å‡ºé”™ï¼Œé€ æˆçš„å½±å“å°±æ˜¯æœåŠ¡ä¸å¯ç”¨ã€‚å› æ­¤ï¼Œå¯¹äºé”™è¯¯çš„å¤„ç†ååˆ†çš„é‡è¦ã€‚\n\nå¤„ç†é”™è¯¯ï¼Œæœ€å¸¸ç”¨çš„å°±æ˜¯`try catch `äº†ã€‚å¯æ˜¯ `try catch`æ— æ³•æ•è·å¼‚æ­¥é”™è¯¯ã€‚Node.jsä¸­ï¼Œå¼‚æ­¥æ“ä½œæ˜¯ååˆ†å¸¸è§çš„ï¼Œå¼‚æ­¥æ“ä½œä¸»è¦æ˜¯åœ¨å›è°ƒå‡½æ•°ä¸­æš´éœ²é”™è¯¯ã€‚çœ‹ä¸€ä¸ªä¾‹å­ï¼š\n\n```javascript\nconst readFile = function(path) {\n\treturn new Promise((resolve,reject) => {\n\t\tfs.readFile(path, (err, data) => {\n\t\t\tif(err) { \n\t\t\t\tthrow err; // catchæ— æ³•æ•è·é”™è¯¯ï¼Œè¿™å’ŒNodeçš„eventloopæœ‰å…³ã€‚\n        // reject(err); // catchå¯ä»¥æ•è·\n      }\n      resolve(data);\n\t\t});\n\t});\n}\n\nrouter.get('/xxx', async function(req, res) {\n  try {\n    const res = await readFile('xxx');\n    ...\n  } catch (e){\n    // æ•è·é”™è¯¯å¤„ç†\n    ...\n    res.send(500);\n  }\n});\n\n```\n\nä¸Šé¢çš„ä»£ç ä¸­ï¼ŒreadFile ä¸­ throw å‡ºæ¥çš„é”™è¯¯ï¼Œæ˜¯æ— æ³•è¢«catchæ•è·çš„ã€‚å¦‚æœæˆ‘ä»¬æŠŠ `throw err` æ¢æˆ `Promise.reject(err)`ï¼Œcatchä¸­æ˜¯å¯ä»¥æ•è·åˆ°é”™è¯¯çš„ã€‚ \n\n**æˆ‘ä»¬å¯ä»¥æŠŠå¼‚æ­¥æ“ä½œéƒ½PromiseåŒ–ï¼Œç„¶åç»Ÿä¸€ä½¿ç”¨  async ã€tryã€catch æ¥å¤„ç†é”™è¯¯**ã€‚\n\nä½†æ˜¯ï¼Œæ€»ä¼šæœ‰åœ°æ–¹ä¼šè¢«é—æ¼ã€‚è¿™ä¸ªæ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨processæ¥æ•è·å…¨å±€é”™è¯¯ï¼Œé˜²æ­¢è¿›ç¨‹ç›´æ¥é€€å‡ºï¼Œå¯¼è‡´åé¢çš„è¯·æ±‚æŒ‚æ‰ã€‚ç¤ºä¾‹ä»£ç ï¼š\n\n```javascript\nprocess.on('uncaughtException', (err) => {\n  console.error(`${err.message}\\n${err.stack}`);\n});\n\nprocess.on('unhandledRejection', (reason, p) => {\n  console.error(`Unhandled Rejection at: Promise ${p} reason: `, reason);\n});\n```\n\nå…³äºNode.jsä¸­é”™è¯¯çš„æ•è·ï¼Œè¿˜å¯ä»¥ä½¿ç”¨```domain```æ¨¡å—ã€‚ç°åœ¨è¿™ä¸ªæ¨¡å—å·²ç»ä¸æ¨èä½¿ç”¨äº†ï¼Œæˆ‘ä¹Ÿæ²¡æœ‰åœ¨é¡¹ç›®ä¸­å®è·µè¿‡ï¼Œè¿™é‡Œå°±ä¸å±•å¼€äº†ã€‚Node.js è¿‘å‡ å¹´æ¨å‡ºçš„ async_hooks æ¨¡å—ï¼Œä¹Ÿè¿˜å¤„äºå®éªŒé˜¶æ®µï¼Œä¸å¤ªå»ºè®®çº¿ä¸Šç¯å¢ƒç›´æ¥ä½¿ç”¨ã€‚åšå¥½è¿›ç¨‹å®ˆæŠ¤ï¼Œå¼€å¯å¤šè¿›ç¨‹ï¼Œé”™è¯¯å‘Šè­¦åŠæ—¶ä¿®å¤ï¼Œå…»æˆè‰¯å¥½çš„ç¼–ç è§„èŒƒï¼Œä½¿ç”¨åˆé€‚çš„æ¡†æ¶ï¼Œæ‰èƒ½æé«˜NodeæœåŠ¡çš„æ•ˆç‡åŠç¨³å®šæ€§ã€‚\n\n\n\n#### å†™åœ¨åé¢\n\næœ¬æ–‡æ€»ç»“äº†Node.jså¼€å‘ä¸€å¹´å¤šä»¥æ¥çš„å®è·µæ€»ç»“ç­‰ã€‚Node.jsçš„å¼€å‘ä¸å‰ç«¯ç½‘é¡µçš„å¼€å‘æ€è·¯ä¸åŒï¼Œç€é‡ç‚¹ä¸ä¸€æ ·ã€‚æˆ‘æ­£å¼å¼€å‘Node.jsçš„æ—¶é—´ä¹Ÿä¸ç®—å¤ªé•¿ï¼Œä¸€äº›ç‚¹å¹¶æ²¡æœ‰æ·±å…¥çš„ç†è§£ï¼Œæœ¬æ–‡ä»…ä»…æ˜¯ä¸€äº›ç»éªŒä¹‹è°ˆã€‚æ¬¢è¿äº¤æµã€‚\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5c585aea63ea4fbea508390ca2f2eab7~tplv-k3u1fbpfcp-zoom-1.image)", "user_name": "CoyPan", "description": "å…¬ä¼—å·: ç¬¦åˆé¢„æœŸçš„CoyPan", "got_view_count": 48217, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "Node.js", "concern_user_count": 245462, "user_id": "2717648473821736", "title": "ä» 0 åˆ° 1 node é¡¹ç›®ç®¡ç†ç³»ç»Ÿï¼šæ­å»ºåŸºç¡€å¹³å°ï¼ˆä¸­ï¼‰", "mark_content": "## å‰è¨€\n\næ­å»º[åŸºç¡€å¹³å°æ­å»ºä¸Šç¯‡](https://juejin.im/post/6856485896724676615)çš„æ—¶å€™çš„æ—¶å€™ï¼Œå·²ç»ä»‹ç»è¿‡äº†é¡¹ç›®æµç¨‹è®¾è®¡ã€æ•°æ®åº“æ­å»ºã€jwt ç™»å½•ç­‰æ¨¡å—ã€‚\n\næ­¤ç¯‡æˆ‘ä»¬ä»‹ç»åˆ†æ”¯ç®¡ç†è®¾è®¡åŠå…¶ä»–çš„åŸºç¡€æ¨¡å—ã€‚\n\n**åç«¯æ¨¡å—**\n\n1. [DevOps - Gitlab Apiä½¿ç”¨ï¼ˆå·²å®Œæˆï¼Œç‚¹å‡»è·³è½¬ï¼‰](https://juejin.im/post/6855129008066002958)\n2. DevOps - æ­å»º DevOps åŸºç¡€å¹³å°ï¼ˆå·²å®Œæˆ 50%ï¼‰[åŸºç¡€å¹³å°æ­å»ºä¸Šï¼Œç‚¹å‡»è·³è½¬](https://juejin.im/post/6856485896724676615)\n3. DevOps - Gitlab CI æµæ°´çº¿æ„å»º\n4. DevOps - Jenkins æµæ°´çº¿æ„å»º\n5. DevOps - Docker ä½¿ç”¨\n6. DevOps - å‘å¸ƒä»»åŠ¡æµç¨‹è®¾è®¡\n7. DevOps - ä»£ç å®¡æŸ¥å¡ç‚¹\n8. DevOps - Node æœåŠ¡è´¨é‡ç›‘æ§\n\n> åæœŸå¯èƒ½ä¼šæ ¹æ® DevOps é¡¹ç›®çš„å®é™…å¼€å‘è¿›åº¦å¯¹ä¸Šè¿°ç³»åˆ—è¿›è¡Œè°ƒæ•´\n\n## Git åˆ†æ”¯ç®¡ç†æµç¨‹\n\n### Git Flow æµç¨‹\n\n![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c5b691c99f3746fc967b0835227790f9~tplv-k3u1fbpfcp-zoom-1.image)\n\n**Production åˆ†æ”¯**\n\nå°±æ˜¯å¸¸ç”¨çš„ Master åˆ†æ”¯ï¼Œè¿™ä¸ªåˆ†æ”¯åŒ…å«æœ€è¿‘å‘å¸ƒåˆ°ç”Ÿäº§ç¯å¢ƒçš„ä»£ç ï¼Œæœ€è¿‘å‘å¸ƒçš„ Releaseï¼Œ è¿™ä¸ªåˆ†æ”¯åªèƒ½ä»å…¶ä»–åˆ†æ”¯åˆå¹¶ï¼Œä¸èƒ½åœ¨è¿™ä¸ªåˆ†æ”¯ç›´æ¥ä¿®æ”¹\n\n**Develop åˆ†æ”¯**\n\nè¿™ä¸ªåˆ†æ”¯æ˜¯çš„ä¸»å¼€å‘åˆ†æ”¯ï¼ŒåŒ…å«æ‰€æœ‰è¦å‘å¸ƒåˆ°ä¸‹ä¸€ä¸ªReleaseçš„ä»£ç ï¼Œè¿™ä¸ªä¸»è¦åˆå¹¶äºå…¶ä»–åˆ†æ”¯ï¼Œæ¯”å¦‚ Feature åˆ†æ”¯\n\n**Feature åˆ†æ”¯**\n\nè¿™ä¸ªåˆ†æ”¯ä¸»è¦æ˜¯ç”¨æ¥å¼€å‘ä¸€ä¸ªæ–°çš„åŠŸèƒ½ï¼Œä¸€æ—¦å¼€å‘å®Œæˆï¼Œæˆ‘ä»¬åˆå¹¶å› Develop åˆ†æ”¯ï¼Œå¹¶è¿›å…¥ä¸‹ä¸€ä¸ª Release\n\n**Release åˆ†æ”¯**\n\nå½“éœ€è¦å‘å¸ƒä¸€ä¸ªæ–° Release çš„æ—¶å€™ï¼ŒåŸºäº Develop åˆ†æ”¯åˆ›å»ºä¸€ä¸ª Release åˆ†æ”¯ï¼Œå®Œæˆ Release åï¼Œåˆå¹¶åˆ° Master å’Œ Develop åˆ†æ”¯\n\n**Hotfix åˆ†æ”¯**\n\nå½“åœ¨ Production å‘ç°æ–°çš„ Bu gæ—¶å€™ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ª Hotfix, å®Œæˆ Hotfix åï¼Œåˆå¹¶å› Master å’Œ Develop åˆ†æ”¯ï¼Œæ‰€ä»¥ Hotfix çš„æ”¹åŠ¨ä¼šè¿›å…¥ä¸‹ä¸€ä¸ª Release\n\næ•´ä½“çš„åˆ†æ”¯ç®¡ç†æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤º\n\n![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e48ee7b35b684ceeb41b0ee2bf875bfa~tplv-k3u1fbpfcp-zoom-1.image)\n\n### é¡¹ç›®è‡ªå»ºæµç¨‹\n\nä¸Šè¿°çš„ Git Flow æµç¨‹ä½¿ç”¨å¯ä»¥è§„èŒƒçº¦æŸå¼€å‘è´¨é‡è·Ÿæµç¨‹ï¼Œæˆ‘ä»¬ç¨å¾®ä¿®æ”¹ä¸€ä¸‹éƒ¨åˆ†æµç¨‹ï¼Œèå…¥åˆ°é¡¹ç›®ä¸­è¿›è¡Œä½¿ç”¨ã€‚\n\n![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/eb27b54fe24c485ba062efabc82e0b3a~tplv-k3u1fbpfcp-zoom-1.image)\n\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/632d2d88b95941f981d35c5281cbf93a~tplv-k3u1fbpfcp-zoom-1.image)\n\nå¦‚å›¾æ¯ä¸ªå·¥ç¨‹éƒ½å…±äº«ä¸€ä¸ª version ç‰ˆæœ¬å·ï¼Œåˆ†æ”¯åˆ›å»ºåˆ†ä¸ºç‰ˆæœ¬å‡çº§ã€ç‰¹æ€§æ›´æ–°ã€ä¿®è®¢è¡¥ä¸ä¸‰ç§æ¨¡å¼ï¼Œå¼ºåˆ¶é¡¹ç›®æ‰€æœ‰åˆ†æ”¯åˆ›å»ºçš„å‘½åè§„åˆ™éƒ½ä¼šå‡çº§ï¼Œä¸ä¼šå‡ºç°é‡å¤è·Ÿé™çº§ã€‚\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1bd83af2a5be4bb48a0f0404ce8f8c0f~tplv-k3u1fbpfcp-zoom-1.image)\n\n**ä¸Šè¿°æµç¨‹çš„ä¼˜ç‚¹**ï¼š\n\n1. å·¥ç¨‹ä½¿ç”¨å›ºå®šçš„ç‰ˆæœ¬é”æ­»ï¼Œç‰ˆæœ¬å¯¹åº”éœ€æ±‚æµç¨‹ï¼Œä¸Šçº¿è´¨é‡å¾—åˆ°ä¿éšœ\n2. æ¯ä¸ªå¼€å‘åˆ†æ”¯éƒ½åªèƒ½éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒï¼Œå¿…é¡»åˆå¹¶åˆ°åˆå¹¶åˆ°å¯¹åº”çš„ç‰ˆæœ¬åˆ†æ”¯ä¹‹åæ‰èƒ½ä¸Šç”Ÿäº§\n3. æ‰€æœ‰åˆå¹¶åˆ° master æˆ–è€… relase åˆ†æ”¯ä¼šè¢«åˆ é™¤ï¼Œé˜²æ­¢ä¸€æ¡åˆ†æ”¯å¤„ç†è¿‡å¤šä¸šåŠ¡ï¼ŒåæœŸ reviewã€å›æ»šéš¾åº¦æå‡\n4. realse ç‰ˆæœ¬åˆ†æ”¯ä¸Šçº¿ä¹‹åï¼Œç”Ÿæˆå¯¹åº” tag\n5. hotfix ç‰ˆæœ¬å¯ä»¥ä»å¯¹åº”çš„ tag æ‹‰å‡ºï¼Œå¯ä»¥æ˜ç¡®çš„çŸ¥é“ hotfix å…·ä½“ä¿®å¤çš„æ˜¯å“ªä¸ªç‰ˆæœ¬çš„é—®é¢˜\n\n**ä¸Šè¿°æµç¨‹çš„ç¼ºç‚¹**ï¼š\n\n1. å›ºåŒ–ç‰ˆæœ¬æµç¨‹å¯¼è‡´åˆ›å»ºå‘½åè§„åˆ™å›ºå®šï¼Œä¸”ç‰ˆæœ¬å·ä¸èƒ½å‡çº§åªèƒ½é™çº§\n2. æµç¨‹é™åˆ¶ï¼Œé™ä½å¼€å‘çµæ´»æ€§\n\n> æ²¡æœ‰å®Œç¾çš„è§£å†³æ–¹æ³•ï¼Œæ‰€æœ‰ devops æµç¨‹éƒ½è¦ç»“åˆçœŸå®é¡¹ç›®éœ€æ±‚æ¥è®¾è®¡ï¼Œä¸Šè¿°åªæ˜¯ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œæœ‰æ›´é€šç”¨çš„æ–¹æ¡ˆè®¾è®¡è¯·åŠ æˆ‘å¾®ä¿¡ Cookieboty æ¢è®¨ \n\n## DevOps å¼€å‘ä¸­ç¯‡\n\n### æ·»åŠ å…¨å±€æŠ¥é”™å›è°ƒ\n\næ²¡æœ‰ç»å¯¹å®‰å…¨çš„ç¨‹åºï¼Œæ‰€æœ‰ç¨‹åºåœ¨è¿è¡Œä¸­å› å„ç§æƒ…å†µä¼šå‡ºç° errorï¼Œå…¨å±€é”™è¯¯å›è°ƒæ˜¯åŸºç¡€æ¨¡å—å¿…è¦çš„ã€‚\n\n```js\nexport default class HttpExceptions extends Error { // ç»§æ‰¿ä¿®æ”¹ error ç±»å‹\n  code: number;\n  msg: string;\n  httpCode: number;\n\n  constructor({ msg = \"æœåŠ¡å™¨å¼‚å¸¸\", code = 1, httpCode = 400 }) {\n    super();\n    this.msg = msg;\n    this.code = code;\n    this.httpCode = httpCode;\n  }\n}\n\nimport HttpExceptions from \"../exceptions/http_exceptions\"; // å…¨å±€æ‹¦æˆªé”™è¯¯å¤„ç†\n\nexport default () => {\n  return async function errorHandler(ctx, next) {\n    try {\n      await next();\n    } catch (err) {\n      // æ‰€æœ‰çš„å¼‚å¸¸éƒ½åœ¨ app ä¸Šè§¦å‘ä¸€ä¸ª error äº‹ä»¶ï¼Œæ¡†æ¶ä¼šè®°å½•ä¸€æ¡é”™è¯¯æ—¥å¿—\n      ctx.app.emit(\"error\", err, ctx);\n\n      let status = err.status || 500;\n      let error: any = {};\n\n      if (err instanceof HttpExceptions) {\n        status = err.httpCode;\n        error.requestUrl = `${ctx.method} : ${ctx.path}`;\n        error.msg = err.msg;\n        error.code = err.code;\n        error.httpCode = err.httpCode;\n      } else {\n        // æœªçŸ¥å¼‚å¸¸ï¼Œç³»ç»Ÿå¼‚å¸¸ï¼Œçº¿ä¸Šä¸æ˜¾ç¤ºå †æ ˆä¿¡æ¯\n        // ç”Ÿäº§ç¯å¢ƒæ—¶ 500 é”™è¯¯çš„è¯¦ç»†é”™è¯¯å†…å®¹ä¸è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå› ä¸ºå¯èƒ½åŒ…å«æ•æ„Ÿä¿¡æ¯\n        error.code = 500;\n        error.errsInfo =\n          status === 500 && ctx.app.config.env === \"prod\"\n            ? \"Internal Server Error\"\n            : err.message;\n      }\n      // ä» error å¯¹è±¡ä¸Šè¯»å‡ºå„ä¸ªå±æ€§ï¼Œè®¾ç½®åˆ°å“åº”ä¸­\n      ctx.body = error;\n      if (status === 422) {\n        ctx.body.detail = err.errors;\n      }\n      ctx.status = status;\n    }\n  };\n};\n```\nå¦‚ä¸Šï¼Œæˆ‘ä»¬æ‹“å±•é»˜è®¤é”™è¯¯ç±»ï¼Œæ·»åŠ é”™è¯¯ä¸­é—´ä»¶æ‹¦æˆªå…¨å±€å¼‚å¸¸ï¼Œå¦‚æœå‡ºç°è‡ªå®šä¹‰å¼‚å¸¸æŠ›å‡ºçš„æ—¶å€™ï¼Œåˆ™å¤„ç†å…¨å±€å¼‚å¸¸ï¼Œå¦åˆ™ç»Ÿä¸€æŠ›å‡º 500 é”™è¯¯ï¼Œå»é™¤æ•æ„Ÿä¿¡æ¯ã€‚\n\n### webSocket ä½¿ç”¨\n\n#### ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ webSocket\n\né¡¹ç›®ç®¡ç†ä¸­ï¼Œä¼šæ¶‰åŠåˆ°åŒä¸€ä¸ªé¡¹ç›®å¤šäººåä½œæ“ä½œï¼Œè€Œ ajax è½®è®­æ—¢æ¶ˆè€—æ€§èƒ½ï¼Œå®æ—¶æ€§ä¹Ÿä¸èƒ½å®Œå…¨ä¿è¯ï¼Œä¹Ÿä¼šæ¨é€å¤§é‡æ— æ•ˆä¿¡æ¯ã€‚æ‰€ä»¥é¡¹ç›®é‡‡ç”¨ websocket æ¥æ¨é€å¤šäººåä½œä¿¡æ¯ä»¥åŠåæœŸ**æ„å»ºæµç¨‹çš„çŠ¶æ€æ¨é€**ã€‚\n\n#### egg-socket\n\næ¡†æ¶æä¾›äº† egg-socket.io æ’ä»¶ï¼Œå¢åŠ äº†ä»¥ä¸‹å¼€å‘è§„çº¦ï¼š\n\n- namespace: é€šè¿‡é…ç½®çš„æ–¹å¼å®šä¹‰ namespaceï¼ˆå‘½åç©ºé—´ï¼‰\n- middleware: å¯¹æ¯ä¸€æ¬¡ socket è¿æ¥çš„å»ºç«‹/æ–­å¼€ã€æ¯ä¸€æ¬¡æ¶ˆæ¯/æ•°æ®ä¼ é€’è¿›è¡Œé¢„å¤„ç†\n- controller: å“åº” socket.io çš„ event äº‹ä»¶\n- router: ç»Ÿä¸€äº† socket.io çš„ event ä¸ æ¡†æ¶è·¯ç”±çš„å¤„ç†é…ç½®æ–¹å¼ã€‚ \n\nå…·ä½“çš„ä½¿ç”¨æ–¹å¼è¯·å‚è€ƒï¼š[egg-socket.io ä½¿ç”¨](https://eggjs.org/zh-cn/tutorials/socketio.html)ï¼Œä¸‹é¢ç®€å•è¯´ä¸‹ ts çš„é…ç½®\n\n```js\nimport { Application } from \"egg\"; // ioè·¯ç”±ä½¿ç”¨æ–¹å¼\nimport { EggShell } from \"egg-shell-decorators\";\n\nexport default (app: Application) => {\n  const { router, controller, io } = app;\n\n  EggShell(app);\n\n  // socket.io\n  io.of('/').route('server', io.controller.nsp.ping);\n};\n```\n\nts ä½¿ç”¨ä¸­ io.controller.nsp ä¼šæŠ¥ç±»å‹æœªå®šä¹‰ï¼Œæ‰€ä»¥éœ€è¦ä¿®æ”¹ä¸€ä¸‹ **typings/index.d.ts** æ–‡ä»¶ã€‚\n\n```js\nimport \"egg\";\n\ndeclare module \"egg\" {\n  interface Application { }\n  interface CustomController {\n    nsp: any;\n  }\n\n  interface EggSocketNameSpace {\n    emit: any\n  }\n}\n```\n\n#### socket.io-client\n\n```js\nwindow.onload = function () {\n  // init\n  const socket = io('http://127.0.0.1:7001', {\n    // å®é™…ä½¿ç”¨ä¸­å¯ä»¥åœ¨è¿™é‡Œä¼ é€’å‚æ•°\n    query: {\n      room: 'nsp',\n      userId: `client_${Math.random()}`,\n    },\n\n    transports: ['websocket'],\n  });\n\n  socket.on('connect', () => {\n    const id = socket.id;\n\n    log('#connect,', id, socket);\n\n    // ç›‘å¬è‡ªèº« id ä»¥å®ç° p2p é€šè®¯\n    socket.on(id, (msg: any) => {\n      log('#receive,', msg);\n    });\n  });\n\n  // æ¥æ”¶åœ¨çº¿ç”¨æˆ·ä¿¡æ¯\n  socket.on('online', (msg: any) => {\n    log('#online,', msg);\n  });\n\n  // ç³»ç»Ÿäº‹ä»¶\n  socket.on('disconnect', (msg: any) => {\n    log('#disconnect', msg);\n  });\n\n  socket.on('disconnecting', () => {\n    log('#disconnecting');\n  });\n\n  socket.on('error', () => {\n    log('#error');\n  });\n\n  window.socket = socket;\n};\n```\nå®¢æœç«¯é‡‡ç”¨ socket.io-client å»é“¾æ¥ websocketã€‚ä¸Šè¿°æ˜¯åŸºç¡€é“¾æ¥éƒ¨åˆ†ï¼Œå…·ä½“çš„å®ç°è¦æ ¹æ®ä¸šåŠ¡éœ€æ±‚å¼€å‘ã€‚\n\n### å®¢æœç«¯å®ç°\n\nä¸ºäº†ä¿éšœé¡¹ç›®å¼€å‘é€Ÿåº¦ï¼Œå®¢æˆ·ç«¯é€‰æ‹©äº† [ANT DESIGN PRO](https://eggjs.org/zh-cn/tutorials/socketio.html)ã€‚å…·ä½“å®‰è£…æ­¥éª¤è¯·å‚è€ƒæ•™ç¨‹ï¼Œè¿™è¾¹å±•ç¤ºä¸€ä¸‹éƒ¨åˆ†ä¸šåŠ¡ç«¯çš„ä»£ç ã€‚\n\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/528e6d7582bc479290b1d1f5ca4aab50~tplv-k3u1fbpfcp-zoom-1.image)\n\n#### JWT å‰ç«¯ä½¿ç”¨\n```js\n/**\n * å¼‚å¸¸å¤„ç†ç¨‹åº\n */\nconst errorHandler = (error: { response: Response }): Response => {\n  const { response } = error;\n  if (response && response.status) {\n    const errorText = codeMessage[response.status] || response.statusText;\n    const { status, url } = response;\n\n    if (response.status === 401) {\n      window.location.href = '/user/login';\n    }\n    notification.error({\n      message: `è¯·æ±‚é”™è¯¯ ${status}: ${url}`,\n      description: errorText,\n    });\n  } else if (!response) {\n    notification.error({\n      description: 'æ‚¨çš„ç½‘ç»œå‘ç”Ÿå¼‚å¸¸ï¼Œæ— æ³•è¿æ¥æœåŠ¡å™¨',\n      message: 'ç½‘ç»œå¼‚å¸¸',\n    });\n  }\n  return response;\n};\n\n/**\n * é…ç½®requestè¯·æ±‚æ—¶çš„é»˜è®¤å‚æ•°\n */\nconst request = extend({\n  prefix: '/api',\n  errorHandler, // é»˜è®¤é”™è¯¯å¤„ç†\n  credentials: 'include', // é»˜è®¤è¯·æ±‚æ˜¯å¦å¸¦ä¸Šcookie\n  headers: {\n    authorization: localStorage.getItem('authorization'), // è¯»å–æœ¬åœ°ä¿å­˜çš„ authorization token\n  },\n});\n\nexport default request;\n```\n\næ”¹é€  request æ¨¡å—\n\n```js\nimport request from '@/utils/request';\n\nexport interface LoginParamsType {\n  username: string;\n  password: string;\n  mobile: string;\n  captcha: string;\n}\n\nexport async function fakeAccountLogin(params: LoginParamsType) {\n  return request('/user/getUserToken', {\n    getResponse: true, // å¼€å¯å¯ä»¥æ‹¿åˆ°è¿”å› header å‚æ•°ï¼Œå°†å¯¹åº”çš„ authorization token å­˜å…¥æœ¬åœ°ä½¿ç”¨\n    method: 'POST',\n    data: { params },\n  });\n}\n```\n\nå¦‚ä¸Šï¼Œæ‹¿åˆ° response header é‡Œé¢çš„ tokenï¼Œåç»­å¯ä»¥æ­£å¸¸è¯·æ±‚æ¥å£ã€‚\n\n## å°¾å£°\n\næ­¤é¡¹ç›®æ˜¯ä»é›¶å¼€å‘ï¼Œåç»­æ­¤ç³»åˆ—åšå®¢ä¼šæ ¹æ®å®é™…å¼€å‘è¿›åº¦æ¨å‡ºï¼ˆ**çœŸ TMD ç´¯**ï¼‰ï¼Œé¡¹ç›®å®Œæˆä¹‹åï¼Œä¼šå¼€æ”¾éƒ¨åˆ†æºç ä¾›å„ä½åŒå­¦å‚è€ƒã€‚\n\nå¦‚å¯¹æ–‡ç« å†…å®¹æœ‰ä»»ä½•ç–‘é—®ã€è§è§£å¯æ·»åŠ å¾®ä¿¡ Cookieboty æ²Ÿé€šã€‚\n\nå¦å¤–å…³æ³¨å…¬ä¼—å· Cookieboty1024ï¼Œæ¬¢è¿åŠ å…¥å‰ç«¯å°å…µæˆé•¿è¥\n", "user_name": "Cookieboty", "description": "å·¥èµ„åˆ°ä½ï¼Œå››çš‡å¹²åºŸ", "got_view_count": 19443, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "Vue.js", "concern_user_count": 263220, "user_id": "3509296847679559", "title": "30è¡Œå†™ä¸€ä¸ªVueå›¾ç‰‡æ‡’åŠ è½½æŒ‡ä»¤", "mark_content": "<section id=\"nice\" data-tool=\"mdniceç¼–è¾‘å™¨\" data-website=\"https://www.mdnice.com\" style=\"font-size: 16px; color: black; padding: 0 10px; line-height: 1.6; word-spacing: 0px; letter-spacing: 0px; word-break: break-word; word-wrap: break-word; text-align: left; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, 'PingFang SC', Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;\"><h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; border-bottom: 2px solid rgb(239, 112, 96); font-size: 1.3em;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"display: inline-block; font-weight: bold; background: rgb(239, 112, 96); color: #ffffff; padding: 3px 10px 1px; border-top-right-radius: 3px; border-top-left-radius: 3px; margin-right: 3px;\">å‰è¨€</span><span class=\"suffix\"></span><span style=\"display: inline-block; vertical-align: bottom; border-bottom: 36px solid #efebe9; border-right: 20px solid transparent;\"> </span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">OK,å…„å¼Ÿä»¬ã€‚å‰é¢ä¸€ç¯‡æ–‡ç« å°±è¯´è¿‡è¦ç”¨æŒ‡ä»¤çš„æ–¹å¼æ¥å®ç°å›¾ç‰‡çš„æ‡’åŠ è½½ã€‚å…¶å®ï¼Œå‰ç«¯å‘å±•è¿™ä¹ˆå¤šå¹´ï¼Œè¦å®ç°å›¾ç‰‡æ‡’åŠ è½½éå¸¸çš„ç®€å•ï¼Œé…åˆä¸ŠVueçš„æŒ‡ä»¤ï¼Œ30è¡Œè½»è½»æ¾æ¾å®ç°ä¸€ä¸ªé«˜å¤ç”¨çš„VueæŒ‡ä»¤ã€‚ä¸€èµ·æ¥çœ‹çœ‹å§ã€‚</p>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; border-bottom: 2px solid rgb(239, 112, 96); font-size: 1.3em;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"display: inline-block; font-weight: bold; background: rgb(239, 112, 96); color: #ffffff; padding: 3px 10px 1px; border-top-right-radius: 3px; border-top-left-radius: 3px; margin-right: 3px;\">v-imgLazy</span><span class=\"suffix\"></span><span style=\"display: inline-block; vertical-align: bottom; border-bottom: 36px solid #efebe9; border-right: 20px solid transparent;\"> </span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">è¿™é‡Œæˆ‘æ˜¯ç”¨çš„IntersectionObserver APIå»å®ç°çš„ã€‚</p>\n<blockquote data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"display: block; font-size: 0.9em; overflow: auto; overflow-scrolling: touch; border-left: 3px solid rgba(0, 0, 0, 0.4); color: #6a737d; padding-top: 10px; padding-bottom: 10px; padding-left: 20px; padding-right: 10px; margin-bottom: 20px; margin-top: 20px; border-left-color: rgb(239, 112, 96); background: #fff9f9;\">\n<p style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0px; color: black; line-height: 26px;\">IntersectionObserver å¯¹è±¡çš„observe() æ–¹æ³•å‘IntersectionObserverå¯¹è±¡ç›‘å¬çš„ç›®æ ‡é›†åˆæ·»åŠ ä¸€ä¸ªå…ƒç´ ã€‚ä¸€ä¸ªç›‘å¬è€…æœ‰ä¸€ç»„é˜ˆå€¼å’Œä¸€ä¸ªæ ¹ï¼Œ ä½†æ˜¯å¯ä»¥ç›‘è§†å¤šä¸ªç›®æ ‡å…ƒç´ ï¼Œä»¥æŸ¥çœ‹è¿™äº›ç›®æ ‡å…ƒç´ å¯è§åŒºåŸŸçš„å˜åŒ–ã€‚</p>\n</blockquote>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">ç®€å•æ¥è¯´å¯ä»¥ç›‘å¬domå…ƒç´ è¿›å‡ºå¯è§†åŒºåŸŸï¼Œå¹¶ä¸”å¯ä»¥æ§åˆ¶å…·ä½“çš„å˜åŒ–ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">å…·ä½“çš„ä½¿ç”¨è¯·çœ‹ <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/IntersectionObserver/observe\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: rgb(239, 112, 96); border-bottom: 1px solid rgb(239, 112, 96);\">IntersectionObserver API</a></p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">æ–°å»ºä¸€ä¸ªdirectiveç”¨æ¥å­˜æ”¾è‡ªå®šä¹‰æŒ‡ä»¤</p>\n<blockquote data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"display: block; font-size: 0.9em; overflow: auto; overflow-scrolling: touch; border-left: 3px solid rgba(0, 0, 0, 0.4); color: #6a737d; padding-top: 10px; padding-bottom: 10px; padding-left: 20px; padding-right: 10px; margin-bottom: 20px; margin-top: 20px; border-left-color: rgb(239, 112, 96); background: #fff9f9;\">\n<p style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0px; color: black; line-height: 26px;\">directive/imgLazy.js</p>\n</blockquote>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #fff; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: black; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #fff; border-radius: 5px;\"><span class=\"hljs-comment\" style=\"color: #007400; line-height: 26px;\">//&nbsp;å¼•å…¥é»˜è®¤å›¾ç‰‡</span><br><span class=\"hljs-keyword\" style=\"color: #aa0d91; line-height: 26px;\">import</span>&nbsp;baseImg&nbsp;<span class=\"hljs-keyword\" style=\"color: #aa0d91; line-height: 26px;\">from</span>&nbsp;<span class=\"hljs-string\" style=\"color: #c41a16; line-height: 26px;\">'@/assets/logo.png'</span>;<br><br><span class=\"hljs-keyword\" style=\"color: #aa0d91; line-height: 26px;\">let</span>&nbsp;timer&nbsp;=&nbsp;<span class=\"hljs-literal\" style=\"color: #aa0d91; line-height: 26px;\">null</span>;<br><span class=\"hljs-comment\" style=\"color: #007400; line-height: 26px;\">//&nbsp;åˆ›å»ºä¸€ä¸ªç›‘å¬å™¨</span><br><span class=\"hljs-keyword\" style=\"color: #aa0d91; line-height: 26px;\">let</span>&nbsp;observer&nbsp;=&nbsp;<span class=\"hljs-keyword\" style=\"color: #aa0d91; line-height: 26px;\">new</span>&nbsp;IntersectionObserver(<span class=\"hljs-function\" style=\"line-height: 26px;\">(<span class=\"hljs-params\" style=\"color: #5c2699; line-height: 26px;\">entries</span>)=&gt;</span>{<br>&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #007400; line-height: 26px;\">//&nbsp;entriesæ˜¯æ‰€æœ‰è¢«ç›‘å¬å¯¹è±¡çš„é›†åˆ</span><br>&nbsp;&nbsp;entries.forEach(<span class=\"hljs-function\" style=\"line-height: 26px;\"><span class=\"hljs-params\" style=\"color: #5c2699; line-height: 26px;\">entry</span>&nbsp;=&gt;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #aa0d91; line-height: 26px;\">if</span>(entry.isIntersecting&nbsp;||&nbsp;entry.intersectionRatio&gt;<span class=\"hljs-number\" style=\"color: #1c00cf; line-height: 26px;\">0</span>){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #007400; line-height: 26px;\">//&nbsp;å½“è¢«ç›‘å¬å…ƒç´ åˆ°ä¸´ç•Œå€¼ä¸”æœªåŠ è½½å›¾ç‰‡æ—¶è§¦å‘ã€‚</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;!entry.target.isLoaded&nbsp;&nbsp;&amp;&amp;&nbsp;showImage(entry.target,entry.target.data_src)<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;})<br>})<br><span class=\"hljs-function\" style=\"line-height: 26px;\"><span class=\"hljs-keyword\" style=\"color: #aa0d91; line-height: 26px;\">function</span>&nbsp;<span class=\"hljs-title\" style=\"color: #1c00cf; line-height: 26px;\">showImage</span>(<span class=\"hljs-params\" style=\"color: #5c2699; line-height: 26px;\">el,imgSrc</span>)</span>{<br>&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #aa0d91; line-height: 26px;\">const</span>&nbsp;img&nbsp;=&nbsp;<span class=\"hljs-keyword\" style=\"color: #aa0d91; line-height: 26px;\">new</span>&nbsp;Image();<br>&nbsp;&nbsp;img.src&nbsp;=&nbsp;imgSrc;<br>&nbsp;&nbsp;img.onload&nbsp;=&nbsp;<span class=\"hljs-function\" style=\"line-height: 26px;\"><span class=\"hljs-params\" style=\"color: #5c2699; line-height: 26px;\">()</span>=&gt;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;el.src&nbsp;=&nbsp;imgSrc;<br>&nbsp;&nbsp;&nbsp;&nbsp;el.isLoaded&nbsp;=&nbsp;<span class=\"hljs-literal\" style=\"color: #aa0d91; line-height: 26px;\">true</span>;<br>&nbsp;&nbsp;}<br>}<br><span class=\"hljs-keyword\" style=\"color: #aa0d91; line-height: 26px;\">export</span>&nbsp;<span class=\"hljs-keyword\" style=\"color: #aa0d91; line-height: 26px;\">default</span>&nbsp;{<br>&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #007400; line-height: 26px;\">//&nbsp;è¿™é‡Œç”¨insertedå’Œbindéƒ½è¡Œï¼Œå› ä¸ºIntersectionObserveræ—¶å¼‚æ­¥çš„ï¼Œä»¥é˜²æ„å¤–è¿˜æ˜¯ç”¨insertedå¥½ä¸€ç‚¹</span><br>&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #007400; line-height: 26px;\">//&nbsp;insertedå’Œbindçš„åŒºåˆ«åœ¨äºinsertedæ—¶å…ƒç´ å·²ç»æ’å…¥é¡µé¢ï¼Œèƒ½å¤Ÿç›´æ¥è·å–åˆ°domå…ƒç´ çš„ä½ç½®ä¿¡æ¯ã€‚</span><br>&nbsp;&nbsp;inserted(el,binding,vnode)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;clearTimeout(timer)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #007400; line-height: 26px;\">//&nbsp;åˆå§‹åŒ–æ—¶å±•ç¤ºé»˜è®¤å›¾ç‰‡</span><br>&nbsp;&nbsp;&nbsp;&nbsp;el.src&nbsp;=&nbsp;baseImg;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #007400; line-height: 26px;\">//&nbsp;å°†éœ€è¦åŠ è½½çš„å›¾ç‰‡åœ°å€ç»‘å®šåœ¨domä¸Š</span><br>&nbsp;&nbsp;&nbsp;&nbsp;el.data_src&nbsp;=&nbsp;binding.value;<br>&nbsp;&nbsp;&nbsp;&nbsp;observer.observe(el)<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #007400; line-height: 26px;\">//&nbsp;é˜²æŠ–ï¼Œè¿™é‡Œåœ¨ç»„ä»¶å¸è½½çš„æ—¶å€™åœæ­¢ç›‘å¬</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #aa0d91; line-height: 26px;\">const</span>&nbsp;vm&nbsp;=&nbsp;vnode.context;<br>&nbsp;&nbsp;&nbsp;&nbsp;timer&nbsp;=&nbsp;setTimeout(<span class=\"hljs-function\" style=\"line-height: 26px;\"><span class=\"hljs-params\" style=\"color: #5c2699; line-height: 26px;\">()</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vm.$on(<span class=\"hljs-string\" style=\"color: #c41a16; line-height: 26px;\">'hook:beforeDestroy'</span>,&nbsp;()&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;observer.disconnect();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br>&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;<span class=\"hljs-number\" style=\"color: #1c00cf; line-height: 26px;\">20</span>);<br>&nbsp;&nbsp;},<br>&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #007400; line-height: 26px;\">//&nbsp;å›¾ç‰‡æ›´æ–°è§¦å‘</span><br>&nbsp;&nbsp;update(el,binding){<br>&nbsp;&nbsp;&nbsp;&nbsp;el.isLoaded&nbsp;=&nbsp;<span class=\"hljs-literal\" style=\"color: #aa0d91; line-height: 26px;\">false</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;el.data_src&nbsp;=&nbsp;binding.value;<br>&nbsp;&nbsp;},<br>&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #007400; line-height: 26px;\">//&nbsp;unbindä¸å¤ªå¥½ï¼Œä¼šæ‰§è¡Œå¤šæ¬¡ï¼Œæ”¹è¿›ä¸€ä¸‹ç”¨ç»„ä»¶çš„beforeDestroyå¸è½½</span><br>&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #007400; line-height: 26px;\">//&nbsp;unbind(){</span><br>&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #007400; line-height: 26px;\">//&nbsp;&nbsp;&nbsp;//&nbsp;åœæ­¢ç›‘å¬</span><br>&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #007400; line-height: 26px;\">//&nbsp;&nbsp;&nbsp;observer.disconnect();</span><br>&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #007400; line-height: 26px;\">//&nbsp;}</span><br>}<br></code></pre>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\"><strong style=\"font-weight: bold; color: black;\">åœ¨main.jsä¸­ä½¿ç”¨,æ³¨å†Œå…¨å±€æŒ‡ä»¤</strong></p>\n<blockquote data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"display: block; font-size: 0.9em; overflow: auto; overflow-scrolling: touch; border-left: 3px solid rgba(0, 0, 0, 0.4); color: #6a737d; padding-top: 10px; padding-bottom: 10px; padding-left: 20px; padding-right: 10px; margin-bottom: 20px; margin-top: 20px; border-left-color: rgb(239, 112, 96); background: #fff9f9;\">\n<p style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0px; color: black; line-height: 26px;\">main.js</p>\n</blockquote>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #fff; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: black; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #fff; border-radius: 5px;\"><span class=\"hljs-keyword\" style=\"color: #aa0d91; line-height: 26px;\">import</span>&nbsp;imgLazy&nbsp;<span class=\"hljs-keyword\" style=\"color: #aa0d91; line-height: 26px;\">from</span>&nbsp;<span class=\"hljs-string\" style=\"color: #c41a16; line-height: 26px;\">'@/directive/imgLazy.js'</span><br>Vue.directive(<span class=\"hljs-string\" style=\"color: #c41a16; line-height: 26px;\">'imgLazy'</span>,&nbsp;imgLazy)<br></code></pre>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\"><strong style=\"font-weight: bold; color: black;\">åœ¨ç»„ä»¶ä¸­å®šä¹‰directivesä½¿ç”¨ï¼Œç»™å½“å‰ç»„ä»¶æ³¨å†ŒæŒ‡ä»¤</strong></p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #fff; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: black; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #fff; border-radius: 5px;\"><span class=\"hljs-keyword\" style=\"color: #aa0d91; line-height: 26px;\">import</span>&nbsp;imgLazy&nbsp;<span class=\"hljs-keyword\" style=\"color: #aa0d91; line-height: 26px;\">from</span>&nbsp;<span class=\"hljs-string\" style=\"color: #c41a16; line-height: 26px;\">'@/directive/imgLazy.js'</span><br><span class=\"hljs-keyword\" style=\"color: #aa0d91; line-height: 26px;\">export</span>&nbsp;<span class=\"hljs-keyword\" style=\"color: #aa0d91; line-height: 26px;\">default</span>&nbsp;{<br>&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #007400; line-height: 26px;\">//&nbsp;...</span><br>&nbsp;&nbsp;directives:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attr\" style=\"color: #836C28; line-height: 26px;\">imgLazy</span>:&nbsp;imgLazy,<br>&nbsp;&nbsp;},<br>}<br></code></pre>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\"><strong style=\"font-weight: bold; color: black;\">ç»„ä»¶ä¸­ä½¿ç”¨</strong></p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #fff; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: black; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #fff; border-radius: 5px;\"><span class=\"hljs-tag\" style=\"color: #aa0d91; line-height: 26px;\">&lt;<span class=\"hljs-name\" style=\"color: #aa0d91; line-height: 26px;\">template</span>&gt;</span><br>&nbsp;&nbsp;<span class=\"hljs-tag\" style=\"color: #aa0d91; line-height: 26px;\">&lt;<span class=\"hljs-name\" style=\"color: #aa0d91; line-height: 26px;\">div</span>&nbsp;<span class=\"hljs-attr\" style=\"color: #836C28; line-height: 26px;\">class</span>=<span class=\"hljs-string\" style=\"color: #c41a16; line-height: 26px;\">'container'</span>&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-tag\" style=\"color: #aa0d91; line-height: 26px;\">&lt;<span class=\"hljs-name\" style=\"color: #aa0d91; line-height: 26px;\">div</span>&nbsp;<span class=\"hljs-attr\" style=\"color: #836C28; line-height: 26px;\">v-for</span>=<span class=\"hljs-string\" style=\"color: #c41a16; line-height: 26px;\">\"(item,index)&nbsp;in&nbsp;imgSrc\"</span>&nbsp;<span class=\"hljs-attr\" style=\"color: #836C28; line-height: 26px;\">:key</span>=<span class=\"hljs-string\" style=\"color: #c41a16; line-height: 26px;\">\"index\"</span>&nbsp;&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-tag\" style=\"color: #aa0d91; line-height: 26px;\">&lt;<span class=\"hljs-name\" style=\"color: #aa0d91; line-height: 26px;\">img</span>&nbsp;<span class=\"hljs-attr\" style=\"color: #836C28; line-height: 26px;\">v-imgLazy</span>=<span class=\"hljs-string\" style=\"color: #c41a16; line-height: 26px;\">\"item\"</span>&nbsp;&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-tag\" style=\"color: #aa0d91; line-height: 26px;\">&lt;/<span class=\"hljs-name\" style=\"color: #aa0d91; line-height: 26px;\">div</span>&gt;</span><br>&nbsp;&nbsp;<span class=\"hljs-tag\" style=\"color: #aa0d91; line-height: 26px;\">&lt;/<span class=\"hljs-name\" style=\"color: #aa0d91; line-height: 26px;\">div</span>&gt;</span><br><span class=\"hljs-tag\" style=\"color: #aa0d91; line-height: 26px;\">&lt;/<span class=\"hljs-name\" style=\"color: #aa0d91; line-height: 26px;\">template</span>&gt;</span><br><br><span class=\"hljs-tag\" style=\"color: #aa0d91; line-height: 26px;\">&lt;<span class=\"hljs-name\" style=\"color: #aa0d91; line-height: 26px;\">script</span>&gt;</span><span class=\"javascript\" style=\"line-height: 26px;\"><br><span class=\"hljs-keyword\" style=\"color: #aa0d91; line-height: 26px;\">import</span>&nbsp;imgLazy&nbsp;<span class=\"hljs-keyword\" style=\"color: #aa0d91; line-height: 26px;\">from</span>&nbsp;<span class=\"hljs-string\" style=\"color: #c41a16; line-height: 26px;\">'@/directive/imgLazy.js'</span><br><span class=\"hljs-keyword\" style=\"color: #aa0d91; line-height: 26px;\">export</span>&nbsp;<span class=\"hljs-keyword\" style=\"color: #aa0d91; line-height: 26px;\">default</span>&nbsp;{<br>&nbsp;&nbsp;<span class=\"hljs-attr\" style=\"color: #836C28; line-height: 26px;\">directives</span>:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attr\" style=\"color: #836C28; line-height: 26px;\">imgLazy</span>:&nbsp;imgLazy,<br>&nbsp;&nbsp;},<br>&nbsp;&nbsp;data(){<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #aa0d91; line-height: 26px;\">return</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attr\" style=\"color: #836C28; line-height: 26px;\">imgSrc</span>:[<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #c41a16; line-height: 26px;\">\"https://dss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=1091405991,859863778&amp;fm=26&amp;gp=0.jpg\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #c41a16; line-height: 26px;\">\"https://dss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=2396395246,715775841&amp;fm=26&amp;gp=0.jpg\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #c41a16; line-height: 26px;\">\"https://dss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=224866248,765861809&amp;fm=26&amp;gp=0.jpg\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #c41a16; line-height: 26px;\">\"https://dss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=2670715487,1547868437&amp;fm=26&amp;gp=0.jpg\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #c41a16; line-height: 26px;\">\"https://dss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=2988957523,3295751190&amp;fm=26&amp;gp=0.jpg\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #c41a16; line-height: 26px;\">\"https://dss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=2698110318,782174384&amp;fm=26&amp;gp=0.jpg\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #c41a16; line-height: 26px;\">\"https://dss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=1102788601,953675482&amp;fm=26&amp;gp=0.jpg\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #c41a16; line-height: 26px;\">\"https://dss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=1091405991,859863778&amp;fm=26&amp;gp=0.jpg\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #c41a16; line-height: 26px;\">\"https://dss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=2396395246,715775841&amp;fm=26&amp;gp=0.jpg\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #c41a16; line-height: 26px;\">\"https://dss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=224866248,765861809&amp;fm=26&amp;gp=0.jpg\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #c41a16; line-height: 26px;\">\"https://dss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=2670715487,1547868437&amp;fm=26&amp;gp=0.jpg\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #c41a16; line-height: 26px;\">\"https://dss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=2988957523,3295751190&amp;fm=26&amp;gp=0.jpg\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #c41a16; line-height: 26px;\">\"https://dss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=2698110318,782174384&amp;fm=26&amp;gp=0.jpg\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #c41a16; line-height: 26px;\">\"https://dss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=1102788601,953675482&amp;fm=26&amp;gp=0.jpg\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #c41a16; line-height: 26px;\">\"https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=2004055534,3969071219&amp;fm=26&amp;gp=0.jpg\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;}<br>}<br></span><span class=\"hljs-tag\" style=\"color: #aa0d91; line-height: 26px;\">&lt;/<span class=\"hljs-name\" style=\"color: #aa0d91; line-height: 26px;\">script</span>&gt;</span><br><br><span class=\"hljs-tag\" style=\"color: #aa0d91; line-height: 26px;\">&lt;<span class=\"hljs-name\" style=\"color: #aa0d91; line-height: 26px;\">style</span>&nbsp;<span class=\"hljs-attr\" style=\"color: #836C28; line-height: 26px;\">lang</span>=<span class=\"hljs-string\" style=\"color: #c41a16; line-height: 26px;\">\"scss\"</span>&nbsp;<span class=\"hljs-attr\" style=\"color: #836C28; line-height: 26px;\">scoped</span>&gt;</span><span class=\"css\" style=\"line-height: 26px;\"><br><span class=\"hljs-selector-tag\" style=\"color: #aa0d91; line-height: 26px;\">img</span>{<br>&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #aa0d91; line-height: 26px;\">width</span>:&nbsp;<span class=\"hljs-number\" style=\"color: #1c00cf; line-height: 26px;\">200px</span>;<br>&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #aa0d91; line-height: 26px;\">height</span>:&nbsp;<span class=\"hljs-number\" style=\"color: #1c00cf; line-height: 26px;\">200px</span>;<br>}<br></span><span class=\"hljs-tag\" style=\"color: #aa0d91; line-height: 26px;\">&lt;/<span class=\"hljs-name\" style=\"color: #aa0d91; line-height: 26px;\">style</span>&gt;</span><br><br></code></pre>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">å…·ä½“çš„æ•ˆæœå¦‚ä¸‹ï¼š\n<img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d3732f4bb6024a90b4146a12b45a6869~tplv-k3u1fbpfcp-zoom-1.image\" alt style=\"display: block; margin: 0 auto; max-width: 100%;\"></p>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; border-bottom: 2px solid rgb(239, 112, 96); font-size: 1.3em;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"display: inline-block; font-weight: bold; background: rgb(239, 112, 96); color: #ffffff; padding: 3px 10px 1px; border-top-right-radius: 3px; border-top-left-radius: 3px; margin-right: 3px;\">IntersectionObserverå…¼å®¹æ€§</span><span class=\"suffix\"></span><span style=\"display: inline-block; vertical-align: bottom; border-bottom: 36px solid #efebe9; border-right: 20px solid transparent;\"> </span></h2>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cad186d8d21247d382bebf43fd55a006~tplv-k3u1fbpfcp-zoom-1.image\" alt style=\"display: block; margin: 0 auto; max-width: 100%;\"></figure>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">IntersectionObserver API çš„å…¼å®¹æ€§æ–¹é¢åŸºæœ¬ä¸Šé™¤äº†ieéƒ½å…¼å®¹ï¼Œæ‰€ä»¥è¯´ä½ å¦‚æœæƒ³è¦åœ¨ieä¸Šå®ç°æ‡’åŠ è½½å°±åªèƒ½è‡ªå·±è®¡ç®—æ¯ä¸€ä¸ªå…ƒç´ äº†ã€‚æˆ‘åœ¨ä¹‹å‰ä¸€ç¯‡æ–‡ç« ä¸­ä»‹ç»mixinçš„æ—¶å€™æœ‰å†™è¿‡æ‡’åŠ è½½ï¼Œå¯ä»¥æä¾›å‚è€ƒã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\"><strong style=\"font-weight: bold; color: black;\">ä¸‡æ¶çš„IE</strong></p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\"><strong style=\"font-weight: bold; color: black;\">å¾€æœŸæ–‡ç« ï¼š</strong></p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\"><a href=\"https://juejin.im/post/6856980221816799245\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: rgb(239, 112, 96); border-bottom: 1px solid rgb(239, 112, 96);\">æ‰‹æŠŠæ‰‹æ•™ä½ ä½¿ç”¨VueæŒ‡ä»¤ï¼Œäº²æ‰‹å®ç°ä¸€ä¸ªæ–°é—»æ ‡è®°å’Œè¿åŠ¨åŠ¨ç”»æŒ‡ä»¤</a></p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\"><a href=\"https://juejin.im/post/6856232743286767624\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: rgb(239, 112, 96); border-bottom: 1px solid rgb(239, 112, 96);\">Vueçš„æ··å…¥(mixin)çŸ¥å¤šå°‘ï¼Ÿå¦‚ä½•ç”¨mixinå®ç°ä¸€ä¸ªå›¾ç‰‡æ‡’åŠ è½½åŠŸèƒ½</a></p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">ä»¥ä¸Šçš„çš„ä»£ç å·²ç»ç»Ÿä¸€æ•´ç†åˆ°<a href=\"https://gitee.com/yonggecode/vue_directive\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: rgb(239, 112, 96); border-bottom: 1px solid rgb(239, 112, 96);\">giteeä»“åº“</a></p>\n</section>", "user_name": "YongCode", "description": "é»˜é»˜ä¼æœ¨ï¼Œåœ¨çº¿æ±‚èŒ", "got_view_count": 13351, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "ç¨‹åºå‘˜", "concern_user_count": 238890, "user_id": "3122268753634541", "title": "é˜¿é‡Œå®ä¹  90 å¤©ï¼šä»å®ä¹ ç”Ÿçš„è§†è§’è°ˆè°ˆä¸ªäººæˆé•¿", "mark_content": "<section id=\"nice\" data-tool=\"mdniceç¼–è¾‘å™¨\" data-website=\"https://www.mdnice.com\" style=\"font-size: 16px; padding: 0 10px; word-spacing: 0px; word-break: break-word; word-wrap: break-word; text-align: left; line-height: 1.25; color: #2b2b2b; font-family: Optima-Regular, Optima, PingFangTC-Light, PingFangSC-light, PingFangTC-light; letter-spacing: 2px; background-image: linear-gradient(90deg, rgba(50, 0, 0, 0.04) 3%, rgba(0, 0, 0, 0) 3%), linear-gradient(360deg, rgba(50, 0, 0, 0.04) 3%, rgba(0, 0, 0, 0) 3%); background-size: 20px 20px; background-position: center center;\"><h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #40B8FA;\"><span class=\"prefix\" style=\"display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://files.mdnice.com/fullstack-1.png); margin-bottom: -22px;\"></span><span class=\"content\" style=\"display: flex; color: #40B8FA; font-size: 20px; margin-left: 25px;\">å‰è¨€</span><span class=\"suffix\" style=\"display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(64, 184, 250, .5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;\"></span></h2>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"http://cdn.jack-wjq.cn/90%20%E5%A4%A9%E7%BA%AA%E5%BF%B5.png\" alt=\"90 å¤©ç•™å¿µ\" style=\"max-width: 100%; border-radius: 6px; display: block; margin: 20px auto; object-fit: contain; box-shadow: 2px 4px 7px #999;\"><figcaption style=\"margin-top: 5px; text-align: center; display: block; font-size: 13px; color: #2b2b2b;\"><span style=\"background-image: url(https://img.alicdn.com/tfs/TB1Yycwyrj1gK0jSZFuXXcrHpXa-32-32.png); display: inline-block; width: 18px; height: 18px; background-size: 18px; background-repeat: no-repeat; background-position: center; margin-right: 5px; margin-bottom: -5px;\"></span>90 å¤©ç•™å¿µ</figcaption></figure>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ä»Šå¤©æ˜¯æˆ‘åˆ°é˜¿é‡Œå®ä¹ çš„ç¬¬ 90 å¤©äº†ï¼Œæœ€è¿‘ä¹Ÿæ‹œè¯»äº†ä¸å°‘å‰è¾ˆçš„æ–‡ç« ï¼Œå°¤å…¶æ˜¯ <a href=\"https://juejin.im/user/4212984287594775\" style=\"text-decoration: none; word-wrap: break-word; color: #40B8FA; font-weight: normal; border-bottom: 1px solid #3BAAFA;\">@äºæ±Ÿæ°´</a> å‰è¾ˆçš„æ–‡ç« æ›´æ˜¯è®©æˆ‘æœ‰ç§é†é†çŒé¡¶çš„æ„Ÿè§‰ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å›é¡¾è¿™ 90 å¤©çš„æˆé•¿ï¼Œæ„Ÿæ…¨è‰¯å¤šï¼Œåœ¨è¿™é‡Œå’Œå¤§å®¶åšä¸€ä¸‹åˆ†äº«ï¼Œä¹Ÿä»å®ä¹ ç”Ÿçš„è§†è§’ï¼Œå°¤å…¶æ˜¯æœ¬ç§‘æ¯•ä¸šå°±å‚åŠ å·¥ä½œçš„åŒå­¦çš„è§†è§’ï¼Œè°ˆè°ˆä¸ªäººåº”è¯¥å¦‚ä½•æˆé•¿ã€‚</p>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #40B8FA;\"><span class=\"prefix\" style=\"display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://files.mdnice.com/fullstack-1.png); margin-bottom: -22px;\"></span><span class=\"content\" style=\"display: flex; color: #40B8FA; font-size: 20px; margin-left: 25px;\">ç¼˜èµ·</span><span class=\"suffix\" style=\"display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(64, 184, 250, .5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;\"></span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">2020 å¹´ï¼Œä¸€åœºç–«æƒ…è®©è¿™ä¸ªåŸæœ¬å¹³å¹³æ— å¥‡çš„å¹´ä»½ï¼Œå˜å¾—ç‰¹æ®Šã€‚æ–°å‹å† çŠ¶ç—…æ¯’è‚ºç‚å¸­å·äº†å…¨å›½ï¼Œè”“å»¶è‡³å…¨çƒã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">åœ¨è¿™ä¸ªç‰¹æ®Šçš„ä¸€å¹´ï¼Œæˆ‘ä¹Ÿèµ°åˆ°äº†å¤§ä¸‰ä¸‹å­¦æœŸè¯¥æ‰¾å®ä¹ çš„æ—¶å€™äº†ã€‚<strong style=\"color: #3594F7; font-weight: bold;\"><span>ã€Œ</span>æ›¾ç»æ¢¦æƒ³è‡ªå·±èƒ½å¤Ÿè¿›å…¥å¤§å‚ï¼Œåœ¨è‡ªå·±å–œæ¬¢çš„åŸå¸‚ã€å–œæ¬¢çš„å…¬å¸ï¼Œåšè‡ªå·±å–œæ¬¢çš„å·¥ä½œã€‚<span>ã€</span></strong></p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">åœ¨ 2 æœˆä»½çš„æ—¶å€™ï¼Œå› ä¸ºç–«æƒ…çš„åŸå› ï¼Œæˆ‘çš„è€ä¸œå®¶å‡ºå°äº†ç–«æƒ…æœŸé—´å·¥ä½œçš„æ”¿ç­–ï¼Œå®ä¹ ç”Ÿ 2 æœˆä»½ç»Ÿä¸€ä¸å‚ä¸åŠå…¬ã€‚äºæ˜¯ 2 æœˆä»½å¾—é—²ï¼Œå¼€å§‹å‡†å¤‡å¤ä¹ ä¸€äº›åŸºç¡€çŸ¥è¯†ï¼Œæ˜¥æ‹›è¯•ä¸€è¯•å¤§å‚ä»¬ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æ— æ„é—´é€›ç‰›å®¢çš„æ—¶å€™çœ‹åˆ°äº†ä¸€ä¸ªå°å§å§å‘äº†å¸–å­ï¼Œè¯´æ‰¾ä¸€èµ·å¤ç›˜é¢è¯•æ‰¾å®ä¹ çš„å°ä¼™ä¼´ï¼Œäºæ˜¯å°±æ‰«ç åŠ å…¥äº†ç¾¤èŠï¼Œä¸å¥¹ä»¬æˆä¸ºäº†æœ‹å‹ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\"><strong style=\"color: #3594F7; font-weight: bold;\"><span>ã€Œ</span>ä»ä¸€å¼€å§‹çš„ä¸è®¤è¯†ï¼Œåˆ°æ…¢æ…¢ç†Ÿæ‚‰ï¼Œå†åˆ°æœ€åå¤§å®¶ä¸€èµ·æœç€ä¸€ä¸ªç›®æ ‡åŠªåŠ›ï¼Œè¿™ç§æ„Ÿè§‰æˆ‘å¥½åƒå¾ˆä¹…éƒ½æ²¡æœ‰ä½“ä¼šè¿‡äº†ã€‚<span>ã€</span></strong></p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\"><strong style=\"color: #3594F7; font-weight: bold;\"><span>ã€Œ</span>ä¸Šä¸€æ¬¡æœ‰è¿™ç§å¹¶è‚©ä½œæˆ˜çš„æ„Ÿè§‰ï¼Œå¥½åƒåªæœ‰ä¸‰å¹´å‰çš„é«˜è€ƒäº†ã€‚<span>ã€</span></strong></p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">é€›ç‰›å®¢çš„åŒæ—¶ï¼Œè¿˜çœ‹åˆ°äº†<strong style=\"color: #3594F7; font-weight: bold;\"><span>ã€Œ</span>æ·˜ç³»<span>ã€</span></strong>çš„å®ä¹ ç”Ÿæ‹›è˜è´´ï¼Œäºæ˜¯æŠ±ç€è¯•ä¸€è¯•çš„å¿ƒæ€ï¼ŒåŠ äº†å¸ˆå…„çš„å¾®ä¿¡ï¼Œå°å¿ƒç¿¼ç¿¼åœ°æ•´ç†äº†è‡ªå·±çš„ç®€å†ï¼Œå‘é€ç»™äº†å¸ˆå…„ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ç„¶åæˆ‘æƒ³èµ·æ¥è‡ªå·±è¿˜æœ‰ä¸€ä¸ªæ ¡å‹ <a href=\"https://juejin.im/user/3210229686482942\" style=\"text-decoration: none; word-wrap: break-word; color: #40B8FA; font-weight: normal; border-bottom: 1px solid #3BAAFA;\">@æ¸Šè¾°</a>ï¼Œè®¤è¯†å¾ˆä¹…äº†ï¼ŒçŸ¥é“ä»–æŠ€æœ¯è¿˜ä¸é”™ï¼Œå°±æŠŠå¸ˆå…„ä¹Ÿæ¨èç»™äº†ä»–ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æ²¡å¤šä¹…ï¼Œå°±æ”¶åˆ°äº†æå‰æ‰¹çš„ç®€å†åˆç­›ï¼Œé¢è¯•å®˜æ˜¯ä¸€ä¸ªéå¸¸å’Œå–„çš„å¸ˆå…„ï¼ŒèŠå¤©çš„è¿‡ç¨‹ä¸­é—®äº†ä¸€äº›åŸºç¡€çŸ¥è¯†ï¼ŒåŒæ—¶è¿˜èŠäº†ä¸€äº›ä¸ªäººçš„æƒ…å†µå’Œæœªæ¥çš„è§„åˆ’ï¼Œéå¸¸äº²åˆ‡ï¼Œä½“éªŒéå¸¸æ£’ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å½“æ—¶æš—è‡ªä¸‹å†³å¿ƒï¼Œæˆ‘ä¸€å®šè¦åŠªåŠ›åŠ å…¥<strong style=\"color: #3594F7; font-weight: bold;\"><span>ã€Œ</span>æ·˜ç³»<span>ã€</span></strong>ï¼ŒåŠ å…¥è¿™ä¸ª<strong style=\"color: #3594F7; font-weight: bold;\"><span>ã€Œ</span>ä¸œåŠçƒæœ€å¼ºçš„å‰ç«¯å›¢é˜Ÿ<span>ã€</span></strong>ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">åæ¥éå¸¸å¹¸è¿åœ°æ”¶åˆ°äº†ç®€å†åˆç­›é€šè¿‡çš„æ¶ˆæ¯ï¼Œé€šè¿‡äº†ç®€å†åˆç­›çš„åŒå­¦è¢«ç»Ÿä¸€æ‹‰åˆ°äº†ä¸€ä¸ªç¾¤é‡Œï¼Œè¿™æ—¶æˆ‘æƒŠå–œåœ°å‘ç°ï¼Œæˆ‘çš„æ ¡å‹ <a href=\"https://juejin.im/user/3210229686482942\" style=\"text-decoration: none; word-wrap: break-word; color: #40B8FA; font-weight: normal; border-bottom: 1px solid #3BAAFA;\">@æ¸Šè¾°</a> ä¹Ÿåœ¨é‡Œé¢ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å½“æ—¶ä»–å·²ç»åœ¨å‡†å¤‡è€ƒç ”äº†ï¼Œæˆ‘æŠŠå›¢é˜Ÿçš„ JD å‘ç»™ä»–ï¼Œè®©ä»–è¯•è¯•ã€‚ç„¶åä»–å°±è¯•äº†è¯•ï¼Œæ²¡æƒ³åˆ°æˆ‘ä»¬é€šè¿‡äº†ç®€å†åˆç­›ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æœ‰ä¸€å¤©æˆ‘åœ¨æˆ‘çš„å­¦é•¿ï¼ˆä¹Ÿæ˜¯æˆ‘çš„å‰ç«¯å¯è’™è€å¸ˆï¼‰å»ºçš„äº¬ä¸œå†…è´­ç¾¤é‡Œï¼Œçœ‹åˆ°äº†å½“æ—¶å†…æ¨æˆ‘çš„å¸ˆå…„ï¼Œç„¶åä¸€é—® â€”â€” ä»–ä¿©æ—©å°±è®¤è¯†ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\"><strong style=\"color: #3594F7; font-weight: bold;\"><span>ã€Œ</span>ç¼˜ï¼Œå¦™ä¸å¯è¨€<span>ã€</span></strong>ã€‚</p>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #40B8FA;\"><span class=\"prefix\" style=\"display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://files.mdnice.com/fullstack-1.png); margin-bottom: -22px;\"></span><span class=\"content\" style=\"display: flex; color: #40B8FA; font-size: 20px; margin-left: 25px;\">ç¼˜èš</span><span class=\"suffix\" style=\"display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(64, 184, 250, .5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;\"></span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å†åæ¥çš„å‡ è½®é¢è¯•ä¹‹ä¸­ï¼Œå¾—åˆ°äº†æˆ‘çš„å¸ˆå…„ï¼Œä¹Ÿæ˜¯ç°åœ¨æˆ‘çš„è€æ¿çš„ä¸€äº›æŒ‡å¯¼ï¼Œæ•´ç†è‡ªå·±çš„å®ä¹ å’Œé¡¹ç›®ç»å†ï¼šä»é¡¹ç›®èƒŒæ™¯ã€æŠ€æœ¯æ–¹æ¡ˆã€é‡éš¾ç‚¹ä»¥åŠè§£å†³åŠæ³•å’Œæ²‰æ·€åˆ°é¡¹ç›®æˆæœï¼Œå°†è‡ªå·±çš„æ¯ä¸€ä¸ªé¡¹ç›®æ•´ç†æˆä¸€ä¸ªå®Œæ•´çš„é—­ç¯ï¼Œæœ€åé€šè¿‡äº†äºŒé¢ä¸‰é¢ï¼Œèµ°åˆ°äº†äº¤å‰é¢ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">äº¤å‰é¢çš„é¢è¯•å®˜æ˜¯èœé¸Ÿçš„å¸ˆå…„ï¼ŒèŠäº†å¾ˆå¤šäººç”Ÿè§„åˆ’ã€å‰ç«¯æœªæ¥è¶‹åŠ¿çš„çœ‹æ³•ï¼Œè¿˜æœ‰ä¸€äº›é¡¹ç›®è¿‡ç¨‹ä¸­å®é™…ä½¿ç”¨è¿‡çš„æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆï¼Œéå¸¸æ„‰å¿«çš„é¢è¯•è¿‡ç¨‹ï¼Œé¢è¯•ç»“æŸçš„æ—¶å€™é¢è¯•å®˜è¿˜è¯´ï¼š<strong style=\"color: #3594F7; font-weight: bold;\"><span>ã€Œ</span>â€œè¦æ˜¯è¿˜æœ‰è®¤è¯†çš„ä¼˜ç§€çš„åŒå­¦è®°å¾—å¸®æˆ‘æ¨èåˆ°èœé¸Ÿæ¥å‘€ï¼â€<span>ã€</span></strong></p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">åœ¨é˜¿é‡Œçš„é¢è¯•è¿‡ç¨‹ä¸­ï¼Œéƒ½æ˜¯ä¸€ä¸ªéå¸¸æ„‰å¿«çš„äº¤æµå­¦ä¹ çš„è¿‡ç¨‹ï¼Œé—®åˆ°ä¸€äº›åŸºç¡€çš„é—®é¢˜ï¼Œé¦–å…ˆä¼šè®©ä½ èƒ½å¤Ÿç­”å¾—å‡ºæ¥æœ€åŸºç¡€çš„éƒ¨åˆ†ï¼Œç„¶åå†é€æ­¥æ·±æŒ–ï¼Œå»æ¢ç´¢ä½ çš„æ·±åº¦ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">åŒæ—¶è¿˜ä¼šæ‹“å±•ï¼Œå»æ¢ç´¢ä½ çš„å¹¿åº¦ã€‚è¿™æ ·çš„é¢è¯•æ–¹å¼ï¼Œä½ æ°¸è¿œä¸ç”¨æ‹…å¿ƒé¢è¯•å®˜æ­£å¥½é—®åˆ°ä½ ä¸ä¼šçš„éƒ¨åˆ†è€Œæ²¡æœ‰åœ¨ä½ æ“…é•¿çš„é¢†åŸŸæé—®ï¼Œå¾ˆå¤§ç¨‹åº¦é¿å…äº†è¿æ°”æˆåˆ†ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">é¢è¯•å®˜è¿˜ä¼šä¸ä½ äº¤æµä¸€äº›å¯¹æŸä¸ªæŠ€æœ¯çš„çœ‹æ³•ï¼Œæˆ–æ˜¯æŸé¡¹æŠ€æœ¯æœªæ¥çš„è¶‹åŠ¿ã€‚ä»å¼€å§‹é¢è¯•åˆ°æœ€åç­¾ä¸‹æ„å‘ä¹¦æ‹¿ä¸‹ offerï¼Œå…¶ä¸­çš„æ¯ä¸€è½®é¢è¯•éƒ½æ˜¯ä¸€ä¸ªå­¦ä¹ äº¤æµçš„è¿‡ç¨‹ï¼Œäº¦å¸ˆäº¦å‹ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">åº”è˜å˜›ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªåŒå‘é€‰æ‹©çš„è¿‡ç¨‹ï¼Œé˜¿é‡Œçš„é¢è¯•å®˜ç»™æˆ‘ç•™ä¸‹äº†éå¸¸æ·±åˆ»çš„å°è±¡ï¼Œä¸è®ºæ˜¯æ·˜ç³»ï¼Œè¿˜æ˜¯åœ¨æŠ•æ·˜ç³»ä¹‹å‰æŠ•è¿‡çš„é’‰é’‰ï¼Œé¢è¯•å®˜éƒ½æ˜¯éå¸¸ Nice çš„ï¼Œäºæˆ‘ä¸ªäººè€Œè¨€ï¼Œæˆ‘éå¸¸å–œæ¬¢ä¸”äº«å—è¿™æ ·çš„é¢è¯•è¿‡ç¨‹ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æ‹¿åˆ°æ„å‘ä¹¦å’Œ offer ä¹‹å‰ï¼Œè¿˜æœ‰ä¸€ä¸ªå°æ’æ›²ï¼šè€æ¿å¸Œæœ›æˆ‘ä»¬èƒ½å¤Ÿå°½å¿«å…¥èŒï¼Œäºæ˜¯ç»™æˆ‘ä»¬å®‰æ’åœ¨ 4 æœˆåˆå‰å¾€æ­å·ï¼Œç„¶åæˆ‘ä»¬å‡ ä¸ªå®ä¹ ç”Ÿå°ä¼™ä¼´ä¹°å¥½äº†ç¥¨ï¼Œå„è‡ªéƒ½å‡†å¤‡å¥½äº†å‰å¾€æ­å·ï¼Œç„¶åè€æ¿åœ¨æˆ‘ä»¬å‡ºå‘çš„å‰ä¸€å¤©æ™šä¸Šå¾—çŸ¥è¦å…¬å¸æ”¿ç­–ç›®å‰è¿˜ä¸èƒ½å®‰æ’å®ä¹ ç”Ÿå…¥èŒï¼Œäºæ˜¯æˆ‘ä»¬åªèƒ½é€€ç¥¨ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å½“æ—¶æˆ‘è€æ¿å°±è¯´ï¼š<strong style=\"color: #3594F7; font-weight: bold;\"><span>ã€Œ</span>ä½ ä»¬é€€ç¥¨å§ï¼Œæ‰‹ç»­è´¹å¤šå°‘æˆ‘è¡¥ç»™ä½ ä»¬<span>ã€</span></strong>ï¼Œç–«æƒ…åŸå› é›†å›¢æ”¿ç­–è¿˜æ²¡æ”¾å¼€ï¼Œä¼°è®¡è¿˜è¦ç­‰ä¸€æ®µæ—¶é—´ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ç­¾äº†æ„å‘ä¹¦ä¹‹åï¼Œç­‰ offer ä¹Ÿç­‰äº†å¥½ä¸€æ®µæ—¶é—´ï¼Œè€æ¿åœ¨è¿™è¿‡ç¨‹ä¸­ç§¯æåè°ƒï¼Œä¸æ–­è·Ÿ HRG æ²Ÿé€šï¼Œå¸Œæœ›æˆ‘ä»¬èƒ½å¤Ÿå°½æ—©å…¥èŒã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ç­‰å¾… offer çš„è¿™æ®µæ—¶é—´ï¼Œæˆ‘è·‘å»äº†è…¾è®¯ï¼Œå®ä¹ äº†ä¸€æ®µæ—¶é—´ã€‚ç”±äºæ˜¯è¿œç¨‹åŠå…¬ï¼Œç„¶åè¿˜æ˜¯ä¸€äº›æ‰“æ‚çš„å·¥ä½œï¼Œåšçš„ä¸æ˜¯å¾ˆå¼€å¿ƒï¼Œåæ¥æ”¶åˆ°äº†é˜¿é‡Œçš„ offer ä¹‹åï¼Œå°±ç¦»èŒäº†ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ä¹°äº†äººç”Ÿä¸­çš„ç¬¬ä¸€å¼ æœºç¥¨ï¼Œä¸€ä¸ªäººæç€è¡Œæç®±ï¼Œäººç”Ÿä¸­ç¬¬ä¸€æ¬¡åé£æœºï¼Œè½åœ°æ­å·ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">åˆ°äº†æ­å·ä¹‹åå› ä¸ºç–«æƒ…çš„åŸå› ï¼Œæš‚æ—¶åªèƒ½ä½é…’åº—è¿œç¨‹åŠå…¬ï¼Œè€Œä¸”æ°é€¢é˜¿é‡Œæ—¥ï¼Œå›­åŒºå†…å¤–å¼‚å¸¸çƒ­é—¹ï¼Œæ— æ³•å…¥å›­çš„æˆ‘é”™è¿‡äº†è¿™ä¸€å¹´ä¸€åº¦çš„ç››å…¸ã€‚åªèƒ½é€šè¿‡é’‰é’‰ï¼Œçœ‹ä¸€çœ‹å¸ˆå…„å¸ˆå§ä»¬çš„åˆç…§ï¼Œé€šè¿‡ç›´æ’­ï¼Œçœ‹ä¸€çœ‹å›­åŒºé‡Œæœ‰ä»€ä¹ˆçƒ­é—¹çš„æ´»åŠ¨ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">7 å¤©ä¹‹åï¼Œå¾—çŸ¥å¯ä»¥å…¥å›­äº†ï¼Œæ¿€åŠ¨åˆå…´å¥‹çš„æˆ‘ï¼Œæ€€æ£ç€è‡ªå·±å½“åˆè¿›å¤§å‚çš„æ¢¦æƒ³ï¼Œèµ°è¿›äº†è¿™ä¸ªæˆ‘ä¸€ç›´å‘å¾€å’Œæ†§æ†¬çš„å…¬å¸ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">6 å·æ¥¼åŒ—é¢ï¼Œä¸€è¿›é—¨å°±çœ‹åˆ°äº†æˆ‘ä»¬ç”¨æˆ·å¢é•¿çš„å¤§æ——ï¼Œç„¶åå°±æ˜¯è§åˆ°äº†è‡ªå·±çš„è€æ¿ã€‚è·Ÿè€æ¿æ‰“äº†æ‹›å‘¼ä¹‹åï¼Œæˆ‘è¢«é¢†åˆ°äº†æˆ‘çš„å¯¼å¸ˆï¼Œä¹Ÿå°±æ˜¯æˆ‘çš„å¸ˆå§çš„å·¥ä½ï¼Œåœ¨å¸ˆå§çš„å¸¦é¢†ä¸‹èµ°è®¿äº†å„ä¸ªå¸ˆå…„çš„å·¥ä½ï¼Œä¸å¸ˆå…„ä»¬æ‰“äº†æ‹›å‘¼ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æˆ‘å…¶å®æ˜¯ä¸€ä¸ªæ¯”è¾ƒè…¼è…†çš„äººï¼Œå°¤å…¶æ˜¯ç¬¬ä¸€æ¬¡è§åˆ°çš„æ—¶å€™ï¼Œä¼šæœ‰äº›æ‰­æï¼Œå¹¶ä¸æ˜¯éå¸¸æ”¾å¾—å¼€ã€‚å¥½åœ¨å¸ˆå…„å¸ˆå§ä»¬éƒ½éå¸¸ Niceï¼Œå¾ˆçƒ­æƒ…åœ°è·Ÿæˆ‘æ‰“äº†æ‹›å‘¼ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">çœŸæ­£ä¸è‡ªå·±æœªæ¥çš„åŒäº‹ä»¬è§äº†é¢ï¼Œè¿˜æœ‰ä¸€ç›´å´‡æ‹œçš„ã€Rax GitHub ä»“åº“ Star è¿˜æ²¡ä»–åšå®¢ Star çš„é›¶å¤´å¤šçš„ <a href=\"https://juejin.im/user/712139234359182\" style=\"text-decoration: none; word-wrap: break-word; color: #40B8FA; font-weight: normal; border-bottom: 1px solid #3BAAFA;\">@å†´ç¾½</a> è€å¸ˆï¼ˆè¯¯ï¼‰ï¼Œæ²¡è§è¿‡ä¸–é¢çš„å†œæ‘å­©å­æµéœ²å‡ºéš¾ä»¥è¨€è¡¨çš„å–œæ‚¦ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ä¹‹åçš„æ—¶å…‰ï¼Œæˆ‘ç™½å«–äº†ä¸¤ä¸‰æ¬¡å›¢å»ºï¼Œç™½å«–äº†æ¯å‘¨ä¸¤æ¬¡çš„ä¸‹åˆèŒ¶ï¼Œå›¢å»ºé‡Œç©æ¸¸æˆæ‹¿äº†ç¬¬ä¸€åè¿˜å¾—åˆ°äº†è€æ¿èµ é€çš„é˜¿é‡Œå®šåˆ¶èƒŒåŒ…ç­‰ç­‰ï¼Œäº«å—äº†ä¸€äº›å…¬å¸çš„ç¦åˆ©ï¼ˆäº²æ©™é‡Œå¾ˆå¤šåº—é“ºé˜¿é‡ŒåŒå­¦ä¼˜æƒ ã€æ­å·å£è…”åŒ»é™¢é˜¿é‡ŒåŒå­¦å…«æŠ˜ï¼‰ï¼Œä¹Ÿå’Œå¸ˆå…„å¸ˆå§ä»¬ä¸€èµ·å‚ä¸äº†ä¸€äº›ä¸šåŠ¡çš„å¼€å‘ï¼Œå……å®ä¸”å¿«ä¹~</p>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #40B8FA;\"><span class=\"prefix\" style=\"display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://files.mdnice.com/fullstack-1.png); margin-bottom: -22px;\"></span><span class=\"content\" style=\"display: flex; color: #40B8FA; font-size: 20px; margin-left: 25px;\">æˆé•¿</span><span class=\"suffix\" style=\"display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(64, 184, 250, .5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;\"></span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å‰é¢æ˜¯ä¸€äº›é—²èŠçš„å†…å®¹ï¼Œè®²è¿°äº†ç›®å‰ä¸ºæ­¢æˆ‘ä¸é˜¿é‡Œçš„æ•…äº‹ï¼Œè¿™ä¸ªéƒ¨åˆ†å°±æ¥è®²è®²ï¼Œé˜¿é‡Œä¸æˆ‘çš„æ•…äº‹ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å¯¹äºé˜¿é‡Œåœ¨å›½å†…çš„æŠ€æœ¯å®åŠ›å’Œå½±å“åŠ›ï¼Œç›¸ä¿¡åº”è¯¥ä¸ç”¨æˆ‘å¤šè¯´ã€‚é˜¿é‡Œå°±åƒæ˜¯ä¸€æ‰€å¤§å­¦ï¼Œæ˜¯ä¸€ä¸ªéå¸¸å¹¿é˜”çš„å¹³å°ï¼Œè¿™é‡Œæœ‰ä»»ä½•ä½ æ„Ÿå…´è¶£çš„ã€é¢†åŸŸé‡Œæœ€å‰æ²¿çš„ä¸€äº›çŸ¥è¯†ä¾›ä½ å­¦ä¹ ï¼Œä¹Ÿæœ‰å„ä¸ªé¢†åŸŸå«å¾—å‡ºåå­—çš„å¤§ä½¬æ—¶å¸¸åšä¸€äº›åˆ†äº«ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\"><strong style=\"color: #3594F7; font-weight: bold;\"><span>ã€Œ</span>ä½œä¸ºä¸€åé˜¿é‡Œçš„å®ä¹ ç”Ÿï¼Œæˆ‘å¾ˆå¹¸è¿ï¼Œä¹Ÿå¾ˆè£å¹¸èƒ½å¤Ÿè¿›å…¥è¿™æ ·çš„ä¸€ä¸ªå¤§å¹³å°ã€‚<span>ã€</span></strong></p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æˆ‘è¯´è¿™æ ·ä¸€å¥è¯è‚¯å®šæœ‰äººä¼šè¯´é˜¿é‡Œå‘³å¤ªé‡ä¹‹ç±»çš„å°–é…¸åˆ»è–„çš„è¯ã€‚æ²¡å…³ç³»ï¼Œæ¢ä¸€ä¸ªç«‹åœºï¼šå¦‚æœä½ æ˜¯æˆ‘ï¼Œæœ¬ç§‘è¿˜æ²¡æ¯•ä¸šå°±èƒ½è¿›å…¥ä¸€å®¶å¸‚å€¼æ¥è¿‘ä¸‡äº¿ç¾å…ƒçš„å…¬å¸å·¥ä½œï¼Œä½ çš„å¿ƒæƒ…æ˜¯æ€æ ·çš„ï¼Œä½ æ˜¯å¦ä¼šè·Ÿæˆ‘æœ‰ä¸€æ ·çš„æ„Ÿå—ã€‚æ›´ä½•å†µæ˜¯ä¸€æ‰€ä¸çŸ¥åçš„åŒéæœ¬ç§‘ã€‚</p>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding: 0px; color: black; font-size: 17px; font-weight: bold; text-align: center; position: relative; margin-top: 20px; margin-bottom: 20px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid RGBA(79, 177, 249, .65); color: #2b2b2b; padding-bottom: 2px;\"><span style=\"width: 30px; height: 30px; display: block; background-image: url(https://files.mdnice.com/fullstack-2.png); background-position: center; background-size: 30px; margin: auto; opacity: 1; background-repeat: no-repeat; margin-bottom: -8px;\"></span>äººé™…äº¤å¾€</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">è¯´å®è¯ï¼Œåº”å±Šç”Ÿå¤šå°‘éƒ½è¿˜å¸¦ä¸€äº›ä¹¦ç”Ÿæ°”ï¼Œå°¤å…¶æ˜¯æœ¬ç§‘ç”Ÿã€‚å¦‚ä½•å°½å¿«åœ°èå…¥ä¸€ä¸ªå¤§é›†ä½“ï¼Œèå…¥ç¤¾ä¼šï¼Œæ˜¯æˆ‘æœ€å…ˆé¢ä¸´çš„é—®é¢˜ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å¤§å­¦å…¥å­¦ï¼Œå¤§å®¶ä¼šé€šè¿‡å†›è®­çš„æ–¹å¼ç›¸äº’äº†è§£è®¤è¯†ï¼Œå¸®åŠ©æˆ‘ä»¬å°½å¿«èå…¥é›†ä½“ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">åˆ°äº†å…¬å¸ï¼Œå¤§å®¶éƒ½æœ‰è‡ªå·±çš„å·¥ä½œï¼Œæ¯å¤©éƒ½æ˜¯å¿™ç¢Œå……å®çš„ï¼Œå¦‚ä½•ç›¸äº’äº†è§£è®¤è¯†ï¼Œå»å»ºç«‹è‰¯å¥½çš„äººé™…å…³ç³»æ˜¯é¦–å½“å…¶å†²éœ€è¦è§£å†³çš„é—®é¢˜ï¼Œä¹Ÿæ˜¯æœ€é‡è¦çš„é—®é¢˜ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">äºæˆ‘è€Œè¨€ï¼Œæˆ‘ä¸ªäººçš„åšæ³•å°±æ˜¯çæƒœæ¯ä¸€æ¬¡è¡¨è¾¾è‡ªæˆ‘çš„æœºä¼šï¼Œæ— è®ºæ˜¯å‘¨ä¼šè¿˜æ˜¯å›¢å»ºæ´»åŠ¨ï¼Œæœ‰è¡¨è¾¾è‡ªæˆ‘çš„æœºä¼šå°±å¥½å¥½æŠŠæ¡åœ¨æ‰‹ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\"><strong style=\"color: #3594F7; font-weight: bold;\"><span>ã€Œ</span>åªæœ‰é¦–å…ˆå¯¹ä»–äººæ•å¼€å¿ƒæ‰‰ï¼Œæ‰èƒ½è®©ä»–äººå¯¹ä½ æ›´åŠ äº†è§£ï¼Œæ‰æœ‰è¿¸å‘å‡ºç«èŠ±çš„å¯èƒ½~<span>ã€</span></strong></p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ä¸šä½™æ—¶é—´å¯ä»¥å¤šèŠèŠç”Ÿæ´»ï¼Œèšé¤çš„æ—¶å€™å¤šèŠå¤©ï¼Œåˆ†äº«è‡ªå·±æœ€è¿‘çš„äº†è§£åˆ°çš„å¥‡é—»ä¹äº‹ï¼ŒæŠ›å‡ºä¸€ä¸ªè¯é¢˜ï¼Œå°±å¾ˆå®¹æ˜“èŠèµ·æ¥ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å¯¹äºè‡ªå·±çš„äººé™…äº¤å¾€ï¼Œé€æ¸æœ‰äº†è‡ªå·±çš„æ–¹æ³•ï¼Œè¿™ç‚¹åº”è¯¥ä¹Ÿç®—æ˜¯æˆé•¿ä¸­çš„ä¸€ç¯å§ã€‚</p>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding: 0px; color: black; font-size: 17px; font-weight: bold; text-align: center; position: relative; margin-top: 20px; margin-bottom: 20px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid RGBA(79, 177, 249, .65); color: #2b2b2b; padding-bottom: 2px;\"><span style=\"width: 30px; height: 30px; display: block; background-image: url(https://files.mdnice.com/fullstack-2.png); background-position: center; background-size: 30px; margin: auto; opacity: 1; background-repeat: no-repeat; margin-bottom: -8px;\"></span>æŠ€æœ¯èƒ½åŠ›</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">åˆšè¿›å…¥ä¸€ä¸ªå¤§å‹çš„ä¼ä¸šï¼Œç›¸ä¿¡å¾ˆå¤šåŒå­¦éƒ½æœ‰ä¸€ä¸ªé€‚åº”æŠ€æœ¯çš„è¿‡ç¨‹ï¼Œæˆ‘ä¹Ÿä¸€æ ·ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æ·˜ç³» ToC çš„ä¸šåŠ¡å¤§å¤šæ•°éƒ½ä½¿ç”¨çš„æ˜¯è·¨å¹³å°çš„è‡ªç ”æ¡†æ¶ <a href=\"https://rax.js.org/\" style=\"text-decoration: none; word-wrap: break-word; color: #40B8FA; font-weight: normal; border-bottom: 1px solid #3BAAFA;\">Rax</a>ï¼Œè¦è¾ƒå¥½åœ°èå…¥å¼€å‘ï¼Œå­¦ä¹  Rax å°±æ˜¯ä¸€ä¸ªä¸èƒ½ç»•è¿‡å»çš„è¿‡ç¨‹ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å¥½åœ¨ Rax çš„è¯­æ³•å’Œ React åŸºæœ¬ä¸€è‡´ï¼ŒReact çš„å¼€å‘å·²ç»æ¯”è¾ƒç†Ÿç»ƒäº†ï¼ŒRax ä¸Šæ‰‹ä¹Ÿæ²¡æœ‰ä»€ä¹ˆå¤ªå¤§çš„å›°éš¾ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">éœ€è¦é€‚åº”çš„åœ°æ–¹å…¶å®åœ¨äºï¼šç›¸å…³çš„ç ”å‘å¹³å°ä¼—å¤šï¼Œè‡ªå·±æ‰‹ä¸Šçš„ä¸šåŠ¡æ¶‰åŠåˆ°çš„å„ç§ç ”å‘å¹³å°/æ­å»ºå¹³å°éƒ½éœ€è¦å­¦ä¼šå¦‚ä½•ä½¿ç”¨ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">è¿™ä¸€ç‚¹æ˜¯éå¸¸æ¶ˆè€—æ—¶é—´å’Œç²¾åŠ›çš„ï¼Œä»é¡¹ç›®çš„æ­å»ºåˆ°æœ€åçš„å¼€å‘ï¼Œè¿‡ç¨‹ä¸­å¯èƒ½éœ€è¦ä½¿ç”¨åˆ°å››äº”ä¸ªç ”å‘å¹³å°/æ­å»ºå¹³å°ï¼Œå¯¹äºæ–°äººæ¥è®²ä¸æ˜¯å¾ˆå‹å¥½ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å¥½åœ¨æˆ‘çš„å¸ˆå§éå¸¸è´´å¿ƒï¼Œæ¶‰åŠåˆ°å¹³å°çš„ä½¿ç”¨çš„æ—¶å€™ï¼Œéƒ½ä¼šä¸€æ­¥ä¸€æ­¥æ¼”ç¤ºç»™æˆ‘çœ‹ï¼Œæ‰‹æŠŠæ‰‹æ•™æˆ‘å¦‚ä½•ä½¿ç”¨è¿™äº›å¹³å°ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">åˆšæ¥çš„ä¸€ä¸ªå¤šæœˆï¼ŒåŸºæœ¬éƒ½åœ¨ç†Ÿæ‚‰è¿™äº›å¹³å°ï¼Œå¼€å‘ä¸€äº›ç®€å•çš„æ¨¡å—ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å¼€å‘çš„è¿‡ç¨‹ä¸­è‚¯å®šä¹Ÿä¼šé‡åˆ°ä¸€äº›é—®é¢˜ï¼Œå¤§éƒ¨åˆ†æƒ…å†µæ˜¯è‡ªå·±çš„ä»£ç æœ‰é—®é¢˜ï¼Œåˆæˆ–æ˜¯ç¼ºå°‘æŸäº›é…ç½®é¡¹ï¼Œè¿™äº›é—®é¢˜ä¸€èˆ¬éƒ½èƒ½é€šè¿‡ Debug å’ŒæŸ¥æ–‡æ¡£å¾—åˆ°è§£å†³ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">è€ç‰Œå¤§å‚çš„æŠ€æœ¯æ²‰æ·€éå¸¸æ·±åšï¼ŒåŒæ—¶ä¹Ÿæœ‰ä¸€äº›å†å²åŒ…è¢±ï¼ŒWeex åº”è¯¥å¯ä»¥è¯´æ˜¯æ¯”è¾ƒå¤§çš„å†å²åŒ…è¢±äº†ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å¤§å¤šæ•°æ—¶å€™å¼€å‘ Weex çš„ Native é¡µï¼Œéƒ½éœ€è¦å…ˆåœ¨ Web ä¸Šå¼€å‘å®Œæˆäº†ä¹‹åå†æŸ¥çœ‹ Native é¡µï¼Œç„¶åè§£å†³ä¸€äº›å…¼å®¹é—®é¢˜å¸¦æ¥çš„å·®å¼‚ã€‚åœ¨ Weex ä¸­çš„è°ƒè¯•æ˜¯æ¯”è¾ƒå›°éš¾çš„ï¼Œè€Œä¸”è¿˜æœ‰ä¸€äº›æ ·å¼/è¯­æ³•çº¦æŸï¼Œåœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­éœ€è¦æ—¶åˆ»æ³¨æ„ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æœ€è¿‘ Rax å°ç¨‹åºçš„è¿è¡Œæ—¶æ–¹æ¡ˆä¹Ÿå‡ºç‚‰äº†ï¼Œèƒ½å¤ŸæŠ›å¼€è¯­æ³•çº¦æŸç›´æ¥ä½¿ç”¨ Rax å†™å°ç¨‹åºäº†ï¼Œè¿™ä¸ªæ–¹æ¡ˆå¯ä»¥è¯´æå¤§åœ°æ–¹ä¾¿äº†å¼€å‘è€…ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æœ€è¿‘åœ¨åšçš„ä¸šåŠ¡ï¼Œå°±ä½¿ç”¨åˆ°äº† Rax å°ç¨‹åºçš„è¿è¡Œæ—¶æ–¹æ¡ˆï¼Œç”±äºæ˜¯ç¬¬ä¸€æ¬¡åœ¨ä¸šåŠ¡ä¸­è½åœ°è¿™ä¸ªæ–¹æ¡ˆï¼Œè¸©äº†ä¸å°‘å‘ï¼Œè¿™å…¶ä¸­è¿˜æ¶‰åŠåˆ°äº†ä¸å°‘æŠ€æœ¯é—®é¢˜ï¼Œç”±äºè‡ªèº«çš„æŠ€æœ¯èƒ½åŠ›è¿˜ä¸å¤Ÿï¼Œæœ‰äº›é—®é¢˜æ²¡åŠæ³•è‡ªå·±è§£å†³ï¼Œéœ€è¦å››å¤„è¯·æ•™å¸ˆå…„å¸ˆå§ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">Rax çš„è„šæ‰‹æ¶é…ç½®æ˜¯ä¸é€æ˜çš„ï¼Œå¼€å‘è€…æ²¡åŠæ³•é€šè¿‡ä¿®æ”¹é…ç½®çš„æ–¹å¼è§£å†³å¼€å‘ä¸­é‡åˆ°çš„ä¸€äº›é—®é¢˜ï¼Œåªèƒ½é€šè¿‡è„šæ‰‹æ¶å¯¹å¤–æš´éœ²çš„é…ç½®é¡¹ï¼Œè¿›è¡Œæœ‰é™çš„è‡ªå®šä¹‰ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜ï¼Œå¾ˆå¤šæ—¶å€™ä¼šæ¶‰åŠåˆ°ä¸€äº›ç»„ä»¶æˆ–ä»“åº“çš„æºç ï¼Œå¦‚æœæ˜¯å¤šç«¯é¡¹ç›®è¿˜ä¼šæ¶‰åŠåˆ°ä¸€äº›å®¹å™¨ç›¸å…³çš„çŸ¥è¯†ï¼Œè¿™å…¶ä¸­å› ä¸ºè‡ªå·±è¯»æºç çš„èƒ½åŠ›æ¬ ç¼ºï¼Œç»™å¼€å‘å¸¦æ¥äº†ä¸å°‘å›°æ‰°ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ç»è¿‡è¿™ä¸€æ®µæ—¶é—´çš„å­¦ä¹ å¼€å‘ï¼Œä¹Ÿç®—æ˜¯æ¢³ç†å‡ºäº†ä¸€ä¸ªè§£å†³å¼€å‘è¿‡ç¨‹ä¸­çš„ bug çš„æ€è·¯ï¼š</p>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"http://cdn.jack-wjq.cn/BugFix.png\" alt=\"BugFix\" style=\"max-width: 100%; border-radius: 6px; display: block; margin: 20px auto; object-fit: contain; box-shadow: 2px 4px 7px #999;\"><figcaption style=\"margin-top: 5px; text-align: center; display: block; font-size: 13px; color: #2b2b2b;\"><span style=\"background-image: url(https://img.alicdn.com/tfs/TB1Yycwyrj1gK0jSZFuXXcrHpXa-32-32.png); display: inline-block; width: 18px; height: 18px; background-size: 18px; background-repeat: no-repeat; background-position: center; margin-right: 5px; margin-bottom: -5px;\"></span>BugFix</figcaption></figure>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ä¸šåŠ¡å¼€å‘è¿‡ç¨‹ä¸­çš„é—®é¢˜ï¼Œå¦‚æœè‡ªå·±æ²¡åŠæ³•è§£å†³çš„ï¼ŒåŸºæœ¬éƒ½èƒ½å¤Ÿé€šè¿‡æ²Ÿé€šæˆ–è€…å’¨è¯¢è§£å†³ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">è¸©è¿‡çš„å‘ä¹Ÿéœ€è¦åŠæ—¶è®°å½•ä¸‹æ¥ï¼Œå…¶ä»–åŒå­¦é‡åˆ°çš„æ—¶å€™èƒ½å¤Ÿç»™ä»–ä»¬æŒ‡ä¸ªè·¯ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å¼€å‘çš„è¿‡ç¨‹ä¸­ä¹Ÿä¸€ç›´åœ¨æ€è€ƒï¼Œå¦‚ä½•å†™å‡ºä½è€¦åˆã€å¯è¯»æ€§é«˜ã€å¯æ‹“å±•æ€§å¥½çš„ä»£ç ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ä¸ºäº†è¾¾æˆè¿™ä¸ªç›®æ ‡ï¼Œæœ€è¿‘ä¹Ÿä¸€ç›´åœ¨å­¦ä¹ è®¾è®¡æ¨¡å¼ï¼Œåœ¨æ¯æ¬¡å†™ä»£ç ä¹‹å‰æ€è€ƒä¸šåŠ¡é€»è¾‘ï¼Œè®¾è®¡ä»£ç ç»“æ„å®ç°æœ€ç»ˆçš„åŠŸèƒ½ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å›é¡¾è‡ªå·±çš„ä»£ç ï¼Œå…¶ä¸­æœ‰ä¸å°‘æ²¡å¿…è¦çš„åˆ†æ”¯ç»“æ„ï¼Œå°±å¯ä»¥å°è¯•ä½¿ç”¨ç­–ç•¥æ¨¡å¼å¯¹ä»£ç é‡æ–°è®¾è®¡ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æ¥åˆ°æ·˜ç³»ä¹‹åï¼Œæˆ‘æ¯”è¾ƒç³»ç»Ÿåœ°äº†è§£å’Œå­¦ä¹ äº†<a href=\"https://juejin.im/post/6844904194600599560\" style=\"text-decoration: none; word-wrap: break-word; color: #40B8FA; font-weight: normal; border-bottom: 1px solid #3BAAFA;\">å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•</a>çš„ä¸€äº›çŸ¥è¯†ï¼Œå­¦ä¼šäº†å¦‚ä½•<a href=\"https://github.com/wjq990112/Holiday-Editor\" style=\"text-decoration: none; word-wrap: break-word; color: #40B8FA; font-weight: normal; border-bottom: 1px solid #3BAAFA;\">ä½¿ç”¨ Electron è¿›è¡Œæ¡Œé¢åº”ç”¨å¼€å‘</a>ï¼Œæ¥è§¦åˆ°äº†<a href=\"https://rax.js.org/\" style=\"text-decoration: none; word-wrap: break-word; color: #40B8FA; font-weight: normal; border-bottom: 1px solid #3BAAFA;\"> Rax å’Œ Weex å®ç°çš„æ¶æ„</a>ï¼Œè§è¯†åˆ°äº†ä¸å°‘ç ”å‘/æ­å»ºå¹³å°ï¼Œäº†è§£åˆ°äº†ä»–ä»¬çš„è®¾è®¡æ€æƒ³å’Œå®ç°æ–¹å¼ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ç«™åœ¨ç°åœ¨çš„è§’åº¦å›é¡¾è‡ªå·±è¿›å…¥æ·˜ç³»ä¹‹å‰çš„å­¦ä¹ è¿‡ç¨‹ï¼Œå‰åçš„å˜åŒ–å¯ä»¥ç”¨ä¸€ä¸ªæ®µå­æ¥å½¢å®¹ï¼š<strong style=\"color: #3594F7; font-weight: bold;\"><span>ã€Œ</span>åœŸå…«è·¯<span>ã€</span></strong> å’Œ <strong style=\"color: #3594F7; font-weight: bold;\"><span>ã€Œ</span>æ­£è§„å†›<span>ã€</span></strong>ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æ·˜ç³»è¿™æ ·çš„å¤§å¹³å°ï¼Œèƒ½å¤Ÿæä¾›éå¸¸å¹¿é˜”çš„è§†é‡ï¼Œä»å‰å¾ˆå¤šä»åšå®¢ä¸­äº†è§£åˆ°çš„æ¦‚å¿µï¼Œä»åªèƒ½æ³›æ³›è€Œè°ˆåˆ°èƒ½å¤Ÿç»“åˆå®é™…åœºæ™¯è°ˆçœ‹æ³•å’Œåº”ç”¨ï¼Œä¹Ÿè®¸æ˜¯æˆ‘è¿™æ®µæ—¶é—´åœ¨æŠ€æœ¯æ–¹é¢æœ€å¤§çš„æˆé•¿ã€‚</p>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding: 0px; color: black; font-size: 17px; font-weight: bold; text-align: center; position: relative; margin-top: 20px; margin-bottom: 20px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid RGBA(79, 177, 249, .65); color: #2b2b2b; padding-bottom: 2px;\"><span style=\"width: 30px; height: 30px; display: block; background-image: url(https://files.mdnice.com/fullstack-2.png); background-position: center; background-size: 30px; margin: auto; opacity: 1; background-repeat: no-repeat; margin-bottom: -8px;\"></span>ä¸šåŠ¡èƒ½åŠ›</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">äºæˆ‘ä¸ªäººè€Œè¨€ï¼Œå­¦ä¹ å‰ç«¯æ›´å¤šçš„æ˜¯å¯¹å‰ç«¯æŠ€æœ¯çš„çƒ­çˆ±ï¼Œä¸€ç›´æƒ³åšä¸€ä¸ªæŠ€æœ¯é¡¶å°–çš„å¼€å‘è€…ï¼Œåƒå°¤å¤§ä¸€æ ·ï¼Œèƒ½å¤Ÿåˆ©ç”¨è‡ªå·±çš„çŸ¥è¯†å’ŒæŠ€æœ¯ï¼Œå¼€å‘å‡ºç±»ä¼¼ Vue ä¸€æ ·çš„ç°è±¡çº§æ¡†æ¶ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æ›¾ç»åœ¨å¾®ä¿¡ä¸Šä¹Ÿä¸ <a href=\"https://juejin.im/user/430664257382462\" style=\"text-decoration: none; word-wrap: break-word; color: #40B8FA; font-weight: normal; border-bottom: 1px solid #3BAAFA;\">@ç¥ä¸‰å…ƒ</a> åšè¿‡è¾ƒä¸ºæ·±å…¥çš„è®¨è®ºï¼š</p>\n<blockquote data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"display: block; font-size: 0.9em; overflow: auto; overflow-scrolling: touch; padding-top: 10px; padding-bottom: 10px; padding-left: 20px; padding-right: 10px; margin-bottom: 20px; margin-top: 20px; text-size-adjust: 100%; line-height: 1.55em; font-weight: 400; border-radius: 6px; color: #595959; font-style: normal; text-align: left; box-sizing: inherit; border-left: none; border: 1px solid RGBA(64, 184, 250, .4); background: RGBA(64, 184, 250, .1);\"><span style=\"color: RGBA(64, 184, 250, .5); font-size: 34px; line-height: 1; font-weight: 700;\">â</span>\n<p style=\"padding-top: 8px; padding-bottom: 8px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px; margin: 0px; line-height: 26px; color: #595959;\">åœ¨å¤§å¤šæ•°å…¬å¸é‡Œï¼Œå‰ç«¯éƒ½æ˜¯ä»¥åŠä¸ªå·¥å…·äººçš„èº«ä»½ï¼Œä½œä¸ºåç«¯åŒå­¦ä¸äº§å“è¿è¥ä¹‹é—´çš„çº½å¸¦è¿›è¡Œæ²Ÿé€šå’Œå¼€å‘ã€‚å¤§å¤šæ•°çš„å‰ç«¯éƒ½æ˜¯ä¸šåŠ¡å‰ç«¯ï¼Œæ¯å¤©è·Ÿå„ç§å„æ ·çš„ä¸šåŠ¡æ–¹æ‰“äº¤é“ï¼Œå‚åŠ å„ç§å„æ ·çš„ä¸šåŠ¡è¯„å®¡ï¼Œæ¸¸èµ°åœ¨ä¸šåŠ¡çš„æœ€å‰çº¿ã€‚</p>\n<p style=\"padding-top: 8px; padding-bottom: 8px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px; margin: 0px; line-height: 26px; color: #595959;\">åŸºäºè¿™æ ·çš„ç°çŠ¶ï¼Œæˆ‘ä»¬åº”è¯¥æ€ä¹ˆå»å¹³è¡¡æŠ€æœ¯å’Œä¸šåŠ¡ä¹‹é—´çš„é—®é¢˜ï¼Ÿ</p>\n<span style=\"float: right; color: RGBA(64, 184, 250, .5);\">â</span></blockquote>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æˆ‘ç›¸ä¿¡å¤§å¤šæ•°çš„å®ä¹ ç”ŸåŒå­¦åº”è¯¥è·Ÿæˆ‘ä¸€æ ·ï¼Œä¸å¤ªå–œæ¬¢å»æ·±å…¥äº†è§£ä¸šåŠ¡ï¼Œæ›´åŠ å€¾å‘äºæŠ€æœ¯ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ä»¥å‰æˆ‘ä¼šè§‰å¾—å»ç†è§£ä¸šåŠ¡ä¸åº”è¯¥æ˜¯æˆ‘ä»¬å¼€å‘æ¥åšï¼Œè€Œæ˜¯ç”±äº§å“å’Œè¿è¥çš„åŒå­¦æ¥åšï¼Œå¼€å‘è¿‡ç¨‹ä¸­ä»–ä»¬æä»€ä¹ˆéœ€æ±‚æˆ‘ä»¬å°±åšä»€ä¹ˆï¼Œè¿™å¯èƒ½ä¹Ÿæ˜¯ä½œä¸ºä¸€ååœ¨æ ¡ç”Ÿçš„æƒ¯æ€§æ€ç»´ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ä¸€ç›´ä»¥æ¥æˆ‘éƒ½æ˜¯å¸Œæœ›åšä¸€äº›çº¯ç²¹ç‚¹çš„æŠ€æœ¯å‹é¡¹ç›®ï¼Œç”¨æŠ€æœ¯è§£å†³ä¸€äº›æŠ€æœ¯é—®é¢˜ï¼Œå¼€å‘ä¸€äº›ç°è±¡çº§çš„å¼€æºé¡¹ç›®ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘å­¦ä¹ å‰ç«¯çš„åŠ¨åŠ›å’Œåˆå¿ƒã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ç›´åˆ°æœ€è¿‘æ‹œè¯»äº† <a href=\"https://juejin.im/user/4212984287594775\" style=\"text-decoration: none; word-wrap: break-word; color: #40B8FA; font-weight: normal; border-bottom: 1px solid #3BAAFA;\">@äºæ±Ÿæ°´</a> å‰è¾ˆçš„<a href=\"https://juejin.im/post/6844903783198097416\" style=\"text-decoration: none; word-wrap: break-word; color: #40B8FA; font-weight: normal; border-bottom: 1px solid #3BAAFA;\">ã€Šæˆ‘åœ¨æ·˜å®åšå‰ç«¯çš„è¿™ä¸‰å¹´ã€‹ç³»åˆ—</a>ï¼Œæ„Ÿè§¦é¢‡æ·±ï¼Œå¼€å§‹ä»å¿ƒåº•æ”¹å˜è¿™ç§æƒ³æ³•ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å…¶ä¸­æœ‰ä¸€æ®µè¯è®©æˆ‘è™èº¯ä¸€éœ‡ï¼Œæœ‰ç§é†é†çŒé¡¶çš„æ„Ÿè§‰ï¼š</p>\n<blockquote data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"display: block; font-size: 0.9em; overflow: auto; overflow-scrolling: touch; padding-top: 10px; padding-bottom: 10px; padding-left: 20px; padding-right: 10px; margin-bottom: 20px; margin-top: 20px; text-size-adjust: 100%; line-height: 1.55em; font-weight: 400; border-radius: 6px; color: #595959; font-style: normal; text-align: left; box-sizing: inherit; border-left: none; border: 1px solid RGBA(64, 184, 250, .4); background: RGBA(64, 184, 250, .1);\"><span style=\"color: RGBA(64, 184, 250, .5); font-size: 34px; line-height: 1; font-weight: 700;\">â</span>\n<p style=\"padding-top: 8px; padding-bottom: 8px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px; margin: 0px; line-height: 26px; color: #595959;\"><strong style=\"color: #3594F7; font-weight: bold;\"><span>ã€Œ</span>ä¸šåŠ¡èƒ½åŠ›åº”è¯¥æ˜¯ç¨‹åºå‘˜é™¤äº†æŠ€æœ¯ä¹‹å¤–ï¼Œæœ€å…·ä»·å€¼çš„èƒ½åŠ›ï¼Œä¹Ÿæ˜¯æœ€å¿…è¦çš„ã€‚å› ä¸ºæŠ€æœ¯æœ¬èº«å¾ˆéš¾èµšé’±ï¼Œä¸šåŠ¡è½åœ°æ‰èƒ½èµšé’±ã€‚å½“ç¨‹åºå‘˜å…·å¤‡äº†ä¸šåŠ¡å’Œäº§å“èƒ½åŠ›ï¼Œæ‰å¯èƒ½é€‰å–ä¸šåŠ¡å’ŒæŠ€æœ¯çš„æŠ˜ä¸­ç‚¹ï¼Œåˆå¿«åˆå¥½çš„æ”¯æ’‘ä¸šåŠ¡ï¼Œå¸¦æ¥ä»·å€¼å’Œæ•ˆç›Šã€‚æ‡‚äº§å“å’Œä¸šåŠ¡ï¼ˆç”šè‡³äº¤äº’è®¾è®¡ï¼‰çš„æŠ€æœ¯ï¼Œæ›´å®¹æ˜“è·Ÿå…¶ä»–å·¥ç§è¿›è¡Œæ²Ÿé€šï¼Œç”¨é€šä¿—æ˜“æ‡‚çš„æ–¹å¼ä»‹ç»æŠ€æœ¯å®ç°å’Œéš¾åº¦ï¼Œå¯ä»¥æå‡åœ¨ä¼ä¸šä¸­çš„è‡ªèº«åœ°ä½å’Œä»·å€¼ã€‚æ­¤å¤–ï¼Œå¯¹äºæ¶æ„å¸ˆï¼Œç†è§£ä¸šåŠ¡ä¹Ÿæ˜¯å¿…å¤‡èƒ½åŠ›ã€‚<span>ã€</span></strong></p>\n<span style=\"float: right; color: RGBA(64, 184, 250, .5);\">â</span></blockquote>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å¾ˆå¤šæ—¶å€™çº¯ç²¹çš„æŠ€æœ¯é¡¹ç›®æ˜¯æ²¡æœ‰ç”¨çš„ï¼Œä¸€ä¸ªæŠ€æœ¯é¡¹ç›®çš„äº§ç”Ÿï¼ŒèƒŒåä¸€å®šæ˜¯æœ‰ç›®å‰ç”Ÿäº§å®é™…ä¸­çš„ç—›ç‚¹é©±åŠ¨çš„ã€‚å¦‚æœä¸€ä¸ªæŠ€æœ¯é¡¹ç›®çš„å‡ºç°ï¼Œæ²¡åŠæ³•è§£å†³ç”Ÿäº§å®é™…ä¸­çš„é—®é¢˜ï¼Œé‚£ä¹ˆæ•´ä¸ªæŠ€æœ¯é¡¹ç›®å‡ºç°çš„æ„ä¹‰åœ¨å“ªé‡Œï¼Ÿ</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ä»»ä½•ç°è±¡çº§çš„å¼€æºæ¡†æ¶ï¼Œéƒ½æ˜¯è§£å†³äº†ä¸€ä¸ªé¢†åŸŸä¸­ä¸€äº›éå¸¸æ£˜æ‰‹çš„ã€è¿«åˆ‡æ”¹å˜çš„é—®é¢˜çš„ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æœ€è¿‘åœ¨é€›çŸ¥ä¹çš„æ—¶å€™ï¼Œçœ‹åˆ°äº†é˜¿é‡Œçš„ React Hooks åº“ <a href=\"https://ahooks.js.org/zh-CN\" style=\"text-decoration: none; word-wrap: break-word; color: #40B8FA; font-weight: normal; border-bottom: 1px solid #3BAAFA;\">ahooks</a>ï¼Œç„¶åè·³è½¬åˆ°å®˜ç½‘ä¸€çœ‹ï¼Œè¿™ç®€ç›´å°±æ˜¯ä¸€ä¸ªç¥ä»™åº“ï¼ŒåŸºæœ¬è¦†ç›–äº†å¤§éƒ¨åˆ†ä¸šåŠ¡ä¸­å¯èƒ½æ¶‰åŠåˆ°çš„ Hooks éœ€æ±‚ï¼Œå°è¯•äº†ä¸€ä¸‹ä¹‹åç›´å‘¼è¿‡ç˜¾ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ç”¨è¿‡ä¹‹åå°±åœ¨æ€è€ƒï¼Œè¿™æ ·ä¸€ä¸ªå¥½ç”¨çš„åº“ï¼Œè¿˜æ˜¯ä»ä¸šåŠ¡ä¸­æ¥åˆ°ä¸šåŠ¡ä¸­å»çš„ï¼Œå°è¯äº†å‰è¾ˆçš„è¯ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æœ€è¿‘åœ¨åšçš„ä¸šåŠ¡ç®—æ˜¯æ¯”è¾ƒè´´è¿‘è‡ªå·±çš„å¨±ä¹ç”Ÿæ´»äº†ï¼Œåœ¨å‚åŠ è¯„å®¡çš„æ—¶å€™ä¹Ÿä¼šå¯¹ä¸šåŠ¡æ–¹çš„éœ€æ±‚åšå‡ºä¸€äº›æ€è€ƒï¼Œæœ‰æ—¶å€™åœ¨ä¸šåŠ¡å¼€å‘çš„è¿‡ç¨‹ä¸­é‡åˆ°ä¸€äº›é—®é¢˜ï¼Œä¼šç«™åœ¨ç”¨æˆ·çš„è§’åº¦å»å®¡è§†è¿™ä¸ªéœ€æ±‚çš„å¿…è¦æ€§å’Œåˆç†æ€§ï¼Œç„¶åå»å’Œäº§å“åŒå­¦æ²Ÿé€šã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å¾ˆå¤šæ—¶å€™æˆ‘ä»¬éœ€è¦ç«™åœ¨ä¸šåŠ¡æ–¹çš„è§’åº¦å»æ€è€ƒï¼Œç”¨ä»€ä¹ˆæ ·çš„æ–¹å¼å’ŒæŠ€æœ¯èƒ½ä¸ºä¸šåŠ¡æ–¹å¸¦æ¥æ›´å¤§çš„æ”¶ç›Šï¼Œè¿™ç‚¹æ˜¯æœ€èƒ½ä½“ç°è‡ªèº«ä»·å€¼çš„ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æŠ€æœ¯çš„å‡ºç°æœ¬èº«å°±æ˜¯ç«‹è¶³äºè§£å†³å®é™…é—®é¢˜çš„ï¼Œæ²¡æœ‰ä»»ä½•ä¸€ä¸ªæŠ€æœ¯æ˜¯èƒ½å¤Ÿè„±ç¦»ç°å®è€Œå­˜åœ¨çš„ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å¯¹äºä¸šåŠ¡å‰ç«¯ï¼Œæœ€èƒ½å±•ç°è‡ªèº«ä»·å€¼çš„äº‹æƒ…åº”è¯¥æ˜¯åœ¨ä¸šåŠ¡æ”¯æ’‘çš„è¿‡ç¨‹ä¸­äº§ç”Ÿä¸€äº›æ²‰æ·€ï¼Œè¿™äº›æ²‰æ·€èƒ½å¤Ÿä¸ºæ•´ä¸ªä¸šåŠ¡ä¸­çš„æ¯ä¸€ä¸ªåŒå­¦å‡è´Ÿï¼Œä¼˜åŒ–æ•´ä¸ªæµç¨‹ï¼Œæå‡å¼€å‘æ•ˆç‡ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">è€Œå¯¹äºæŠ€æœ¯å‰ç«¯ï¼Œåˆ™åº”è¯¥æ·±å…¥ä¸šåŠ¡å‰çº¿ï¼Œå»äº†è§£ä¸šåŠ¡ä¸­æ™®éåé¦ˆã€æ·±æ¶ç—›ç»çš„é—®é¢˜ï¼ŒåŸºäºè¿™äº›é—®é¢˜ï¼Œç”¨æŠ€æœ¯ç»™å‡ºä¸€ä¸ªå®Œç¾çš„è§£å†³æ–¹æ¡ˆã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">åœ¨åˆšæ¥æ·˜ç³»çš„ä¸€æ®µæ—¶é—´é‡Œï¼Œç”±äºéœ€æ±‚éƒ½æ¯”è¾ƒé›¶æ•£ï¼Œå¾ˆéš¾å»ç³»ç»Ÿåœ°å»äº†è§£å’Œæ€è€ƒä¸šåŠ¡ä¸­çš„ä¸€äº›é—®é¢˜ï¼Œæœ€è¿‘æ·±å…¥åˆ°äº†ä¸šåŠ¡ä¸­æ‰çœŸæ­£æ„Ÿå—åˆ°äº†è§£ä¸šåŠ¡çš„é‡è¦æ€§ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">äº‹å®å°±æ˜¯ï¼Œä½ åªæœ‰åœ¨æ·±å…¥äº†è§£äº†ä¸šåŠ¡ä¹‹åï¼Œæ ¹æ®ä¸šåŠ¡ç±»å‹å’Œå®é™…æƒ…å†µï¼Œå»é€‰æ‹©ç›¸åº”çš„èƒ½å¤Ÿåˆå¥½åˆå¿«å®ç°ä¸šåŠ¡éœ€æ±‚çš„æŠ€æœ¯ï¼Œè‡³äºä½ ç”¨ Reactã€Vueã€Angular è¿˜æ˜¯å…¶ä»–æ¡†æ¶æ¥å®ç°ï¼Œä¸šåŠ¡æ–¹å¹¶ä¸å…³å¿ƒï¼Œä»–ä»¬å…³å¿ƒçš„æ˜¯ä¸šåŠ¡ä¸Šçº¿åçš„æ•°æ®æ˜¯å¦ç¬¦åˆé¢„æœŸã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ä¹‹å‰åœ¨å­¦ä¹ å®Œäº†è‡ªåŠ¨åŒ–æµ‹è¯•çš„ä¸€äº›å†…å®¹ä¹‹åï¼Œåœ¨å›¢é˜Ÿé‡Œåšäº†ä¸€æ¬¡åˆ†äº«ï¼Œç®€å•è®²äº†ä¸€ä¸‹å­¦ä¹ çš„å¿ƒå¾—ï¼Œä½†æ˜¯ç”±äº Rax çš„é€‚é…åŸå› æ²¡èƒ½åœ¨å›¢é˜Ÿé‡Œæ¨å¹¿ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">è‡ªåŠ¨åŒ–æµ‹è¯•çš„æŠ€æœ¯å¥½å—ï¼Ÿå½“ç„¶å¥½ã€‚é‚£ä¸ºä»€ä¹ˆæ²¡èƒ½çœŸæ­£è½åœ°ï¼Ÿ</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æŠ›å¼€ Rax çš„é€‚é…é—®é¢˜ï¼Œå¦‚æœä½¿ç”¨çš„æ¡†æ¶æ˜¯ Reactï¼Œå¦‚æœæ²¡èƒ½è§£å†³å¼€å‘ä¸­çš„ç—›ç‚¹ï¼Œåªä¼šå¾’å¢å¼€å‘è€…çš„è´Ÿæ‹…ï¼Œä¸€æ ·æ˜¯ä¸€é—¨æ— ç”¨çš„æŠ€æœ¯ã€‚</p>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding: 0px; color: black; font-size: 17px; font-weight: bold; text-align: center; position: relative; margin-top: 20px; margin-bottom: 20px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid RGBA(79, 177, 249, .65); color: #2b2b2b; padding-bottom: 2px;\"><span style=\"width: 30px; height: 30px; display: block; background-image: url(https://files.mdnice.com/fullstack-2.png); background-position: center; background-size: 30px; margin: auto; opacity: 1; background-repeat: no-repeat; margin-bottom: -8px;\"></span>å…¶ä»–æ–¹é¢</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å…¶ä»–æ–¹é¢çš„æˆé•¿æœ€å¤šçš„è¿˜æ˜¯ä¸äººæ²Ÿé€šçš„èƒ½åŠ›å§ï¼Œè¶Šæ¥è¶Šèƒ½å¤Ÿæ¸…æ™°åœ°æè¿°ä¸€ä¸ªé—®é¢˜ï¼Œè¶Šæ¥è¶Šæ•¢äºè¡¨è¾¾è‡ªå·±çš„çœ‹æ³•ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å…¶å®æœ‰æ—¶å€™ä¼šè§‰å¾—è‡ªå·±åªæ˜¯ä¸€ä¸ªå®ä¹ ç”Ÿï¼Œå®³æ€•è‡ªå·±æäº†ä»€ä¹ˆå¾ˆæ„šè ¢çš„é—®é¢˜ï¼Œç»™äººå°è±¡ä¸å¥½ï¼Œæ€»æ˜¯ä¸æ•¢è¡¨è¾¾è‡ªå·±çš„çœ‹æ³•ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æ·±å…¥æŒ–æ˜è¿™å…¶ä¸­çš„åŸå› å…¶å®å°±æ˜¯å¯¹ä¸€ä»¶äº‹æƒ…è¿˜ä¸å¤Ÿäº†è§£ï¼Œæ²¡èƒ½æŠ“ä½ä¸€ä»¶äº‹æƒ…çš„æœ¬è´¨å’Œä¸»è¦çŸ›ç›¾ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">è¿˜æœ‰ä¸€ç‚¹å°±æ˜¯é¢„ä¼°å·¥æœŸè¶Šæ¥è¶Šæœ‰æŠŠæ¡äº†ï¼Œä»¥å‰æ€»æ˜¯ä¸çŸ¥é“ä¸€ä¸ªåŠŸèƒ½æˆ–è€…é¡µé¢å¼€å‘è¦å¤šé•¿æ—¶é—´ï¼Œè‡ªå·±å¿ƒé‡Œæ²¡æœ‰åº•ï¼Œç°åœ¨å¤§è‡´å¯ä»¥æ ¹æ®é¡µé¢çš„å¤æ‚ç¨‹åº¦å’Œå…¶ä¸­å¯èƒ½å‡ºç°çš„é—®é¢˜ä¼°è®¡ä¸€ä¸ªæ¯”è¾ƒå‡†ç¡®çš„å·¥æœŸäº†ã€‚</p>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #40B8FA;\"><span class=\"prefix\" style=\"display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://files.mdnice.com/fullstack-1.png); margin-bottom: -22px;\"></span><span class=\"content\" style=\"display: flex; color: #40B8FA; font-size: 20px; margin-left: 25px;\">ç»“è¯­</span><span class=\"suffix\" style=\"display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(64, 184, 250, .5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;\"></span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\"><strong style=\"color: #3594F7; font-weight: bold;\"><span>ã€Œ</span>90 å¤©ï¼Œæ—¶é—´çœŸçš„å¥½å¿«å‘€~<span>ã€</span></strong></p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">è¿™ 90 å¤©é‡Œæ„Ÿè§‰æ¯å‘¨éƒ½æœ‰èšé¤æˆ–è€…å›¢å»ºæ´»åŠ¨ï¼Œåœ¨è¿™æ ·çš„å›¢é˜Ÿå·¥ä½œç”Ÿæ´»çœŸçš„éå¸¸æ„‰å¿«ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ä¹Ÿéå¸¸æ„Ÿè°¢æˆ‘çš„å¸ˆå…„å¸ˆå§ä»¬ï¼Œç»™äº†æˆ‘å¾ˆå¤šå¸®åŠ©ï¼Œåœ¨æˆ‘åˆšæ¥æ­å·çš„æ—¶å€™ç»™äººç”Ÿåœ°ä¸ç†Ÿçš„æˆ‘å¾ˆå¤šç”Ÿæ´»ä¸Šçš„æŒ‡å¯¼ï¼Œä¹Ÿåœ¨æˆ‘å®ä¹ çš„è¿™æ®µæ—¶é—´æ•™ä¼šæˆ‘å¦‚ä½•åœ¨ä¸šåŠ¡ä¸­ç‹¬å½“ä¸€é¢ï¼Œè‡³å°‘ç°åœ¨åšé¡¹ç›®æœ‰åº•æ°”æœ‰ä¿¡å¿ƒï¼Œä¹Ÿèƒ½å¾ˆå¥½åœ°é¢„ä¼°å·¥æœŸäº†ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ç‰¹åˆ«æ„Ÿè°¢ä¸€ä¸‹å…¨ä¸–ç•Œæœ€å¥½çš„å…ƒæ³‰å¸ˆå…„ï¼Œæ¸©æŸ”æ¼‚äº®ã€è„–å­ä»¥ä¸‹å…¨æ˜¯è…¿çš„è‹¥æ¬¢å¸ˆå§ï¼Œå¾ˆæ¸©æš–å¾ˆè´´å¿ƒã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ä»¤æˆ‘æ„Ÿåˆ°éš¾è¿‡çš„æ˜¯å¸ˆå§æ²¡å¤šä¹…è½¬å²—äº†ï¼Œæˆ‘çš„å¯¼å¸ˆæ¢æˆäº†æ¥æ‰‹å¸ˆå§ä¸šåŠ¡çš„ç‡ƒå ‚å¸ˆå…„ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å…¶å®è¿™ä¸ªæ—¶å€™æ˜¯å®ä¹ ç”Ÿæœ€ç„¦è™‘çš„æ—¶å€™ï¼Œå¤–é¢å„ç§å¤§å‚çš„ç§‹æ‹›ä¿¡æ¯æ»¡å¤©é£ï¼Œä½†æ˜¯å®ä¹ ç”Ÿæ‰‹ä¸Šåˆæœ‰ä¸šåŠ¡ï¼Œè¿˜æœ‰è½¬æ­£çš„å‹åŠ›ï¼Œå¾ˆéš¾æŠ½å‡ºæ—¶é—´å»å¤ä¹ é¢è¯•ï¼Œå¦‚æœè½¬æ­£ç­”è¾©æƒ…å†µä¸å¥½ï¼Œå¾—çŸ¥ç»“æœçš„æ—¶å€™ä¹Ÿå·²ç» 9 æœˆä»½äº†ï¼Œé”™è¿‡äº†å¾ˆå¤šå…¶ä»–åœ°æ–¹çš„å¥½æœºä¼šã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å…¶å®è¿™ä¹Ÿä¸æ˜¯ä»€ä¹ˆåƒé‡Œæ‰’å¤–æˆ–è€…åƒç€ç¢—é‡Œçš„çœ‹ç€é”…é‡Œçš„ä»€ä¹ˆçš„ï¼Œæˆ‘ç›¸ä¿¡è¿™ç§ç„¦è™‘å¤§å‚çš„å®ä¹ ç”Ÿä»¬åº”è¯¥éƒ½æœ‰ï¼Œæ¯•ç«Ÿå…¬å¸çš„å²—ä½æ•°é‡å—ç¯å¢ƒå½±å“å¤§ï¼Œå¦‚æœå¤§ç¯å¢ƒä¸æ˜¯ç‰¹åˆ«å¥½ï¼Œå®ä¹ è½¬æ­£çš„æœºä¼šä¹Ÿå¯èƒ½ä¸ä¼šç‰¹åˆ«å¤šã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æœ€è¿‘ä¹Ÿå¾—çŸ¥äº†è½¬æ­£ç­”è¾©çš„æ¶ˆæ¯ï¼Œç¦»è½¬æ­£ç­”è¾©æ²¡å¤šä¹…äº†ï¼Œå¸ˆå…„ä¹Ÿå¾ˆè®¤çœŸè´Ÿè´£çš„è·Ÿæˆ‘ä¸€èµ·æ¢³ç†äº†ä¸€äº›å®ä¹ çš„é¡¹ç›®ï¼Œå¸Œæœ›æˆ‘èƒ½åœ¨å¸ˆå…„çš„æŒ‡å¯¼ä¸‹é¡ºåˆ©è½¬æ­£ï¼Œèƒ½å¤Ÿç•™åœ¨è¿™ä¸ªæ¸©æš–çš„å¤§å®¶åº­ï¼Œç»§ç»­è·Ÿè¿™ç¾¤å¯çˆ±çš„åŒäº‹ä»¬ä¸€èµ·å·¥ä½œã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å°±è¿™ä¹ˆå¤šå§ï¼Œç¥è‡ªå·±èƒ½å¤Ÿé¡ºåˆ©è½¬æ­£ï¼Œä¹Ÿç¥æ‰€æœ‰æ­£åœ¨å®ä¹ æˆ–æ˜¯ç§‹æ‹›é¢è¯•çš„å°ä¼™ä¼´ä»¬èƒ½å¤Ÿæ‹¿åˆ°å¿ƒä»ªçš„ offerï¼Œæˆ‘ä»¬ä¸€èµ·åŠ æ²¹~</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">è¿™ç¯‡æ–‡ç« æˆ‘ä¼šåŒæ­¥å‘é€åˆ°æˆ‘çš„å…¬ä¼—å·ï¼š<strong style=\"color: #3594F7; font-weight: bold;\"><span>ã€Œ</span>Hello FE<span>ã€</span></strong>ï¼Œæ¬¢è¿å¤§å®¶å…³æ³¨~</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æˆ‘åšå…¬ä¼—å·æŒºä½›ç³»çš„ï¼Œæ›´æ–°é¢‘ç‡ä¸é«˜ï¼Œä¸»è¦éƒ½æ˜¯åˆ†äº«ä¸€äº›åœ¨åˆ«çš„å…¬ä¼—å·çœ‹åˆ°çš„å¥½çš„æ–‡ç« æˆ–è€…å®æˆ˜æ•™ç¨‹ï¼Œå®‰åˆ©ç»™ç²‰ä¸ä»¬ï¼Œä¹Ÿç»™è‡ªå·±åšä¸ªå¤‡å¿˜ï¼Œä»…æ­¤è€Œå·²ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å…³æ³¨å…¬ä¼—å·çš„è¯è¿˜æœ‰ä¸€äº›ç”µå­ä¹¦ï¼Œå¤§å¤šéƒ½æ˜¯æˆ‘çœ‹è¿‡çš„ï¼Œå¸Œæœ›èƒ½ç»™æ­£åœ¨å­¦ä¹ å‰ç«¯çš„åŒå­¦ä»¬ä¸€ç‚¹å¸®åŠ©~</p>\n</section>", "user_name": "ç‚½ç¿", "description": "æŒ£æ‰çš„å°èœé¸Ÿ å…¬ä¼—å·ï¼šHello FE", "got_view_count": 56604, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "JavaScript", "concern_user_count": 343215, "user_id": "1011206425950605", "title": "1.1wå­— ï½œ åˆä¸­çº§å‰ç«¯ JavaScript è‡ªæµ‹æ¸…å• - 2", "mark_content": "# å‰è¨€\nåœ¨[ã€Šåˆä¸­çº§å‰ç«¯ JavaScript è‡ªæµ‹æ¸…å• - 1ã€‹](https://juejin.im/post/6846687584710557710)éƒ¨åˆ†ä¸­ï¼Œå’Œå¤§å®¶ç®€å•è¿‡äº†ä¸€é JavaScript åŸºç¡€çŸ¥è¯†ï¼Œæ²¡çœ‹è¿‡çš„æœ‹å‹å¯ä»¥å›é¡¾ä¸€ä¸‹ğŸ˜\n\næœ¬ç³»åˆ—æ–‡ç« æ˜¯æˆ‘åœ¨æˆ‘ä»¬å›¢é˜Ÿå†…éƒ¨çš„â€œ**ç°ä»£ JavaScript çªå‡»é˜Ÿ**â€ï¼Œç¬¬ä¸€æœŸå­¦ä¹ å†…å®¹ä¸º[ã€Šç°ä»£ JavaScript æ•™ç¨‹ã€‹](https://zh.javascript.info/)ç³»åˆ—çš„**ç¬¬äºŒéƒ¨åˆ†**è¾“å‡ºå†…å®¹ï¼Œå¸Œæœ›è¿™ä»½è‡ªæµ‹æ¸…å•ï¼Œèƒ½å¤Ÿå¸®åŠ©å¤§å®¶å·©å›ºçŸ¥è¯†ï¼Œæ¸©æ•…çŸ¥æ–°ã€‚\n\næœ¬éƒ¨åˆ†å†…å®¹ï¼Œä»¥ **JavaScript å¯¹è±¡**ä¸ºä¸»ï¼Œå¤§è‡´åŒ…æ‹¬ä»¥ä¸‹å†…å®¹ï¼š\n![åˆä¸­çº§å‰ç«¯ JavaScript è‡ªæµ‹æ¸…å• 2.png](http://images.pingan8787.com/JavaScript-Base/section2/xmind.png)\n\n# ä¸€ã€å¯¹è±¡\nJavaScript æœ‰å…«ç§æ•°æ®é¢ç±»å‹ï¼Œæœ‰ä¸ƒç§åŸå§‹ç±»å‹ï¼Œå®ƒä»¬å€¼åªåŒ…å«ä¸€ç§ç±»å‹ï¼ˆå­—ç¬¦ä¸²ï¼Œæ•°å­—æˆ–å…¶ä»–ï¼‰ï¼Œè€Œå¯¹è±¡æ˜¯ç”¨æ¥**ä¿å­˜é”®å€¼å¯¹å’Œæ›´å¤æ‚å®ä½“ã€‚**\næˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨å¸¦æœ‰å¯é€‰**å±æ€§åˆ—è¡¨**çš„èŠ±æ‹¬å· `**{...}**` æ¥åˆ›å»ºå¯¹è±¡ï¼Œä¸€ä¸ªå±æ€§å°±æ˜¯ä¸€ä¸ªé”®å€¼å¯¹ `{\"key\" : \"value\"}` ï¼Œå…¶ä¸­é”®ï¼ˆ `key` ï¼‰æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆæˆ–ç§°å±æ€§åï¼‰ï¼Œå€¼ï¼ˆ `value` ï¼‰å¯ä»¥æ˜¯ä»»ä½•ç±»å‹ã€‚\n\n## 1. åˆ›å»ºå¯¹è±¡\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨ 2 ç§æ–¹å¼æ¥åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼š\n```javascript\n// 1. é€šè¿‡â€œæ„é€ å‡½æ•°â€åˆ›å»º\nlet user = new Object();\n\n// 2. é€šè¿‡â€œå­—é¢é‡â€åˆ›å»º\nlet user = {};\n```\n\n## 2. å¯¹è±¡æ–‡æœ¬å’Œå±æ€§\nåˆ›å»ºå¯¹è±¡æ—¶ï¼Œå¯ä»¥åˆå§‹åŒ–å¯¹è±¡çš„ä¸€äº›å±æ€§ï¼š\n```javascript\nlet user = {\n\tname : 'leo',\n  age  : 18\n}\n```\nç„¶åå¯ä»¥å¯¹è¯¥å¯¹è±¡è¿›è¡Œå±æ€§å¯¹**å¢åˆ æ”¹æŸ¥**æ“ä½œï¼š\n```javascript\n// å¢åŠ å±æ€§\nuser.addr = \"China\";\n// user => {name: \"leo\", age: 18, addr: \"China\"}\n\n// åˆ é™¤å±æ€§\ndelete user.addr\n// user => {name: \"leo\", age: 18}\n\n// ä¿®æ”¹å±æ€§\nuser.age  = 20;\n// user => {name: \"leo\", age: 20}\n\n// æŸ¥æ‰¾å±æ€§\nuser.age;\n// 20\n```\n\n## 3. æ–¹æ‹¬å·çš„ä½¿ç”¨\nå½“ç„¶å¯¹è±¡çš„é”®ï¼ˆ `key` ï¼‰ä¹Ÿå¯ä»¥æ˜¯å¤šè¯å±æ€§ï¼Œä½†å¿…é¡»åŠ å¼•å·ï¼Œä½¿ç”¨çš„æ—¶å€™ï¼Œå¿…é¡»ä½¿ç”¨æ–¹æ‹¬å·ï¼ˆ `[]` ï¼‰è¯»å–ï¼š\n```javascript\nlet user = {\n\tname : 'leo',\n  \"my interest\" : [\"coding\", \"football\", \"cycling\"]\n}\nuser[\"my interest\"]; // [\"coding\", \"football\", \"cycling\"]\ndelete user[\"my interest\"];\n```\n\næˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨æ–¹æ‹¬å·ä¸­ä½¿ç”¨å˜é‡ï¼Œæ¥è·å–å±æ€§å€¼ï¼š\n```javascript\nlet key = \"name\";\nlet user = {\n\tname : \"leo\",\n  age  : 18 \n}\n// ok\nuser[key]; // \"leo\"\nuser[key] = \"pingan\";\n\n// error\nuser.key; // undefined\n```\n\n## 4. è®¡ç®—å±æ€§\nåˆ›å»ºå¯¹è±¡æ—¶ï¼Œå¯ä»¥åœ¨å¯¹è±¡å­—é¢é‡ä¸­ä½¿ç”¨æ–¹æ‹¬å·ï¼Œå³ **è®¡ç®—å±æ€§** ï¼š\n```javascript\nlet key = \"name\";\nlet inputKey = prompt(\"è¯·è¾“å…¥key\", \"age\");\nlet user = {\n\t[key] : \"leo\",\n  [inputKey] : 18\n}\n// å½“ç”¨æˆ·åœ¨ prompt ä¸Šè¾“å…¥ \"age\" æ—¶ï¼Œuser å˜æˆä¸‹é¢æ ·å­ï¼š\n// {name: \"leo\", age: 18}\n```\nå½“ç„¶ï¼Œè®¡ç®—å±æ€§ä¹Ÿå¯ä»¥æ˜¯è¡¨è¾¾å¼ï¼š\n```javascript\nlet key = \"name\";\nlet user = {\n\t[\"my_\" + key] : \"leo\"\n}\nuser[\"my_\" + key]; // \"leo\"\n```\n\n## 5. å±æ€§åç®€å†™\nå®é™…å¼€å‘ä¸­ï¼Œå¯ä»¥å°†ç›¸åŒçš„å±æ€§åå’Œå±æ€§å€¼ç®€å†™æˆæ›´çŸ­çš„è¯­æ³•ï¼š\n```javascript\n// åŸæœ¬ä¹¦å†™æ–¹å¼\nlet getUser = function(name, age){\n  // ...\n\treturn {\n\t\tname: name,\n    age: age\n\t}\n}\n\n// ç®€å†™æ–¹å¼\nlet getUser = function(name, age){\n  // ...\n\treturn {\n\t\tname,\n    age\n\t}\n}\n```\nä¹Ÿå¯ä»¥æ··ç”¨ï¼š\n```javascript\n// åŸæœ¬ä¹¦å†™æ–¹å¼\nlet getUser = function(name, age){\n  // ...\n\treturn {\n\t\tname: name,\n    age: 18\n\t}\n}\n\n// ç®€å†™æ–¹å¼\nlet getUser = function(name, age){\n  // ...\n\treturn {\n\t\tname,\n    age: 18\n\t}\n}\n```\n\n## 6. å¯¹è±¡å±æ€§å­˜åœ¨æ€§æ£€æµ‹\n\n### 6.1 ä½¿ç”¨ in å…³é”®å­—\nè¯¥æ–¹æ³•å¯ä»¥åˆ¤æ–­**å¯¹è±¡çš„è‡ªæœ‰å±æ€§å’Œç»§æ‰¿æ¥çš„å±æ€§**æ˜¯å¦å­˜åœ¨ã€‚\n\n```javascript\nlet user = {name: \"leo\"};\n\"name\" in user;            //trueï¼Œè‡ªæœ‰å±æ€§å­˜åœ¨\n\"age\"  in user;            //false\n\"toString\" in user;     //trueï¼Œæ˜¯ä¸€ä¸ªç»§æ‰¿å±æ€§\n```\n\n### 6.2ä½¿ç”¨å¯¹è±¡çš„ hasOwnProperty() æ–¹æ³•ã€‚\nè¯¥æ–¹æ³•åªèƒ½åˆ¤æ–­**è‡ªæœ‰å±æ€§**æ˜¯å¦å­˜åœ¨ï¼Œå¯¹äº**ç»§æ‰¿å±æ€§**ä¼šè¿”å› `false` ã€‚\n```javascript\nlet user = {name: \"leo\"};\nuser.hasOwnProperty(\"name\");       //trueï¼Œè‡ªæœ‰å±æ€§ä¸­æœ‰ name\nuser.hasOwnProperty(\"age\");        //falseï¼Œè‡ªæœ‰å±æ€§ä¸­ä¸å­˜åœ¨ age\nuser.hasOwnProperty(\"toString\");   //falseï¼Œè¿™æ˜¯ä¸€ä¸ªç»§æ‰¿å±æ€§ï¼Œä½†ä¸æ˜¯è‡ªæœ‰å±æ€§\n```\n\n### 6.3 ç”¨ undefined åˆ¤æ–­\nè¯¥æ–¹æ³•å¯ä»¥åˆ¤æ–­å¯¹è±¡çš„**è‡ªæœ‰å±æ€§å’Œç»§æ‰¿å±æ€§**ã€‚\n```javascript\nlet user = {name: \"leo\"};\nuser.name !== undefined;        // true\nuser.age  !== undefined;        // false\nuser.toString !== undefined     // true\n```\n\nè¯¥æ–¹æ³•å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœå±æ€§çš„å€¼å°±æ˜¯ `undefined`Â  çš„è¯ï¼Œè¯¥æ–¹æ³•ä¸èƒ½è¿”å›æƒ³è¦çš„ç»“æœï¼š\n```javascript\nlet user = {name: undefined};\nuser.name !== undefined;        // falseï¼Œå±æ€§å­˜åœ¨ï¼Œä½†å€¼æ˜¯undefined\nuser.age  !== undefined;        // false\nuser.toString !== undefined;    // true\n```\n\n### 6.4 åœ¨æ¡ä»¶è¯­å¥ä¸­ç›´æ¥åˆ¤æ–­\n```javascript\nlet user = {};\nif(user.name) user.name = \"pingan\";\n//å¦‚æœ name æ˜¯ undefined, null, false, \" \", 0 æˆ– NaN,å®ƒå°†ä¿æŒä¸å˜\n\nuser; // {}\n```\n\n## 7. å¯¹è±¡å¾ªç¯éå†\nå½“æˆ‘ä»¬éœ€è¦éå†å¯¹è±¡ä¸­æ¯ä¸€ä¸ªå±æ€§ï¼Œå¯ä»¥ä½¿ç”¨ `for...in` è¯­å¥æ¥å®ç°\n\n### 7.1 for...in å¾ªç¯\n[`for...in`](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/for...in) è¯­å¥ä»¥ä»»æ„é¡ºåºéå†ä¸€ä¸ªå¯¹è±¡çš„é™¤ [`Symbol`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol) ä»¥å¤–çš„[å¯æšä¸¾](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Enumerability_and_ownership_of_properties)å±æ€§ã€‚\n**æ³¨æ„** ï¼š `for...in` ä¸åº”è¯¥åº”ç”¨åœ¨ä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­ç´¢å¼•é¡ºåºå¾ˆé‡è¦ã€‚\n```javascript\nlet user = {\n\tname : \"leo\",\n  age  : 18\n}\n\nfor(let k in user){\n\tconsole.log(k, user[k]);\n}\n// name leo\n// age 18\n```\n\n### 7.2 ES7 æ–°å¢æ–¹æ³•\nES7ä¸­æ–°å¢åŠ çš„Â `Object.values()`å’Œ`Object.entries()`ä¸ä¹‹å‰çš„`Object.keys()`ç±»ä¼¼ï¼Œè¿”å›æ•°ç»„ç±»å‹ã€‚\n\n#### 1. Object.keys() \nè¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯å‚æ•°å¯¹è±¡è‡ªèº«çš„ï¼ˆä¸å«ç»§æ‰¿çš„ï¼‰æ‰€æœ‰**å¯éå†å±æ€§**çš„å¥åã€‚\n```javascript\nlet user = { name: \"leo\", age: 18};\nObject.keys(user); // [\"name\", \"age\"]\n```\n\n#### 2. Object.values()\nè¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯å‚æ•°å¯¹è±¡è‡ªèº«çš„ï¼ˆä¸å«ç»§æ‰¿çš„ï¼‰æ‰€æœ‰å¯éå†å±æ€§çš„é”®å€¼ã€‚\n```javascript\nlet user = { name: \"leo\", age: 18};\nObject.values(user); // [\"leo\", 18]\n```\n\nå¦‚æœå‚æ•°ä¸æ˜¯å¯¹è±¡ï¼Œåˆ™è¿”å›ç©ºæ•°ç»„ï¼š\n```\nObject.values(10);   // []\nObject.values(true); // []\n```\n\n#### 3. Object.entries()\nè¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯å‚æ•°å¯¹è±¡è‡ªèº«çš„ï¼ˆä¸å«ç»§æ‰¿çš„ï¼‰æ‰€æœ‰**å¯éå†å±æ€§**çš„é”®å€¼å¯¹æ•°ç»„ã€‚\n```javascript\nlet user = { name: \"leo\", age: 18};\nObject.entries(user);\n// [[\"name\",\"leo\"],[\"age\",18]]\n```\n\næ‰‹åŠ¨å®ç°`Object.entries()`æ–¹æ³•ï¼š\n```javascript\n// Generatorå‡½æ•°å®ç°ï¼š  \nfunction* entries(obj){\n    for (let k of Object.keys(obj)){\n        yield [k ,obj[k]];\n    }\n}\n// éGeneratorå‡½æ•°å®ç°ï¼š\nfunction entries (obj){\n    let arr = [];\n    for(let k of Object.keys(obj)){\n        arr.push([k, obj[k]]);\n    }\n    return arr;\n}\n```\n\n#### 4. Object.getOwnPropertyNames(Obj)\nè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œå®ƒåŒ…å«äº†å¯¹è±¡Â `Obj`Â æ‰€æœ‰æ‹¥æœ‰çš„å±æ€§ï¼ˆ**æ— è®ºæ˜¯å¦å¯æšä¸¾**ï¼‰çš„åç§°ã€‚\n```javascript\nlet user = { name: \"leo\", age: 18};\nObject.getOwnPropertyNames(user);\n// [\"name\", \"age\"]\n```\n\n# äºŒã€å¯¹è±¡æ‹·è´\nå‚è€ƒæ–‡ç« [ã€Šæä¸æ‡‚JSä¸­èµ‹å€¼Â·æµ…æ‹·è´Â·æ·±æ‹·è´çš„è¯·çœ‹è¿™é‡Œã€‹](https://juejin.im/post/5d235d1ef265da1b855c7b5d)\n\n## 1. èµ‹å€¼æ“ä½œ\né¦–å…ˆå›é¡¾ä¸‹åŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹ï¼š\n\n- åŸºæœ¬ç±»å‹\n\næ¦‚å¿µï¼šåŸºæœ¬ç±»å‹å€¼åœ¨å†…å­˜ä¸­å æ®å›ºå®šå¤§å°ï¼Œä¿å­˜åœ¨`æ ˆå†…å­˜`ä¸­ï¼ˆä¸åŒ…å«`é—­åŒ…`ä¸­çš„å˜é‡ï¼‰ã€‚\nå¸¸è§åŒ…æ‹¬ï¼šundefined,null,Boolean,String,Number,Symbol\n\n- å¼•ç”¨ç±»å‹\n\næ¦‚å¿µï¼šå¼•ç”¨ç±»å‹çš„å€¼æ˜¯å¯¹è±¡ï¼Œä¿å­˜åœ¨`å †å†…å­˜`ä¸­ã€‚è€Œæ ˆå†…å­˜å­˜å‚¨çš„æ˜¯å¯¹è±¡çš„å˜é‡æ ‡è¯†ç¬¦ä»¥åŠå¯¹è±¡åœ¨å †å†…å­˜ä¸­çš„å­˜å‚¨åœ°å€(å¼•ç”¨)ï¼Œå¼•ç”¨æ•°æ®ç±»å‹åœ¨æ ˆä¸­å­˜å‚¨äº†æŒ‡é’ˆï¼Œè¯¥æŒ‡é’ˆæŒ‡å‘å †ä¸­è¯¥å®ä½“çš„èµ·å§‹åœ°å€ã€‚å½“è§£é‡Šå™¨å¯»æ‰¾å¼•ç”¨å€¼æ—¶ï¼Œä¼šé¦–å…ˆæ£€ç´¢å…¶åœ¨æ ˆä¸­çš„åœ°å€ï¼Œå–å¾—åœ°å€åä»å †ä¸­è·å¾—å®ä½“ã€‚\nå¸¸è§åŒ…æ‹¬ï¼šObject,Array,Date,Function,RegExpç­‰\n\n### 1.1 åŸºæœ¬æ•°æ®ç±»å‹èµ‹å€¼\nåœ¨æ ˆå†…å­˜ä¸­çš„æ•°æ®å‘ç”Ÿæ•°æ®å˜åŒ–çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä¸ºæ–°çš„å˜é‡åˆ†é…ä¸€ä¸ªæ–°çš„ä¹‹å€¼åœ¨æ ˆå†…å­˜ä¸­ï¼Œä¸¤ä¸ªå˜é‡ç›¸äº’ç‹¬ç«‹ï¼Œäº’ä¸å½±å“çš„ã€‚\n```javascript\nlet user  = \"leo\";\nlet user1 = user;\nuser1 = \"pingan\";\nconsole.log(user);  // \"leo\"\nconsole.log(user1); // \"pingan\" \n```\n\n### 1.2 å¼•ç”¨æ•°æ®ç±»å‹èµ‹å€¼\nåœ¨ JavaScript ä¸­ï¼Œå˜é‡ä¸å­˜å‚¨å¯¹è±¡æœ¬èº«ï¼Œè€Œæ˜¯å­˜å‚¨å…¶â€œå†…å­˜ä¸­çš„åœ°å€â€ï¼Œæ¢å¥è¯è¯´å°±æ˜¯å­˜å‚¨å¯¹å…¶çš„â€œå¼•ç”¨â€ã€‚\nå¦‚ä¸‹é¢ `leo`Â  å˜é‡åªæ˜¯ä¿å­˜å¯¹`user` å¯¹è±¡å¯¹åº”å¼•ç”¨ï¼š\n```javascript\nlet user = { name: \"leo\", age: 18};\nlet leo  = user;\n```\nå…¶ä»–å˜é‡ä¹Ÿå¯ä»¥å¼•ç”¨ `user` å¯¹è±¡ï¼š\n```javascript\nlet leo1 = user;\nlet leo2 = user;\n```\nä½†æ˜¯ç”±äºå˜é‡ä¿å­˜çš„æ˜¯å¼•ç”¨ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬ä¿®æ”¹å˜é‡ `leo` \\ `leo1` \\ `leo2` è¿™äº›å€¼æ—¶ï¼Œ**ä¹Ÿä¼šæ”¹åŠ¨åˆ°å¼•ç”¨å¯¹è±¡** `user` ï¼Œä½†å½“ `user` ä¿®æ”¹ï¼Œåˆ™å…¶ä»–å¼•ç”¨è¯¥å¯¹è±¡çš„å˜é‡ï¼Œå€¼éƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼š\n```javascript\nleo.name = \"pingan\";\nconsole.log(leo);   // {name: \"pingan\", age: 18}\nconsole.log(leo1);  // {name: \"pingan\", age: 18}\nconsole.log(leo2);  // {name: \"pingan\", age: 18}\nconsole.log(user);  // {name: \"pingan\", age: 18}\n\nuser.name = \"pingan8787\";\nconsole.log(leo);   // {name: \"pingan8787\", age: 18}\nconsole.log(leo1);  // {name: \"pingan8787\", age: 18}\nconsole.log(leo2);  // {name: \"pingan8787\", age: 18}\nconsole.log(user);  // {name: \"pingan8787\", age: 18}\n```\nè¿™ä¸ªè¿‡ç¨‹ä¸­æ¶‰åŠå˜é‡åœ°å€æŒ‡é’ˆæŒ‡å‘é—®é¢˜ï¼Œè¿™é‡Œæš‚æ—¶ä¸å±•å¼€è®¨è®ºï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥ç½‘ä¸ŠæŸ¥é˜…ç›¸å…³èµ„æ–™ã€‚\n\n## 2. å¯¹è±¡æ¯”è¾ƒ\nå½“ä¸¤ä¸ªå˜é‡å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå®ƒä»¬æ— è®ºæ˜¯ `==` è¿˜æ˜¯ `===` éƒ½ä¼šè¿”å› `true` ã€‚\n```javascript\nlet user = { name: \"leo\", age: 18};\nlet leo  = user;\nlet leo1 = user;\nleo ==  leo1;   // true\nleo === leo1;   // true\nleo ==  user;   // true\nleo === user;   // true\n```\nä½†å¦‚æœä¸¤ä¸ªå˜é‡æ˜¯ç©ºå¯¹è±¡ `{}` ï¼Œåˆ™ä¸ç›¸ç­‰ï¼š\n```javascript\nlet leo1 = {};\nlet leo2 = {};\nleo1 ==  leo2;  // false\nleo1 === leo2;  // false\n```\n\n## 3. æµ…æ‹·è´\n\n### 3.1 æ¦‚å¿µ\næ¦‚å¿µï¼š**æ–°çš„å¯¹è±¡å¤åˆ¶å·²æœ‰å¯¹è±¡ä¸­éå¯¹è±¡å±æ€§çš„å€¼å’Œå¯¹è±¡å±æ€§çš„å¼•ç”¨**ã€‚ä¹Ÿå¯ä»¥ç†è§£ä¸ºï¼š**ä¸€ä¸ªæ–°çš„å¯¹è±¡ç›´æ¥æ‹·è´å·²å­˜åœ¨çš„å¯¹è±¡çš„å¯¹è±¡å±æ€§çš„å¼•ç”¨**ï¼Œå³æµ…æ‹·è´ã€‚\n\næµ…æ‹·è´**åªå¯¹ç¬¬ä¸€å±‚å±æ€§è¿›è¡Œäº†æ‹·è´**ï¼Œå½“ç¬¬ä¸€å±‚çš„å±æ€§å€¼æ˜¯åŸºæœ¬æ•°æ®ç±»å‹æ—¶ï¼Œæ–°çš„å¯¹è±¡å’ŒåŸå¯¹è±¡äº’ä¸å½±å“ï¼Œä½†æ˜¯å¦‚æœç¬¬ä¸€å±‚çš„å±æ€§å€¼æ˜¯å¤æ‚æ•°æ®ç±»å‹ï¼Œé‚£ä¹ˆæ–°å¯¹è±¡å’ŒåŸå¯¹è±¡çš„å±æ€§å€¼å…¶æŒ‡å‘çš„æ˜¯åŒä¸€å—å†…å­˜åœ°å€ã€‚\n\né€šè¿‡ç¤ºä¾‹ä»£ç æ¼”ç¤ºæ²¡æœ‰ä½¿ç”¨æµ…æ‹·è´åœºæ™¯ï¼š\n```javascript\n// ç¤ºä¾‹1 å¯¹è±¡åŸå§‹æ‹·è´\nlet user = { name: \"leo\", skill: { JavaScript: 90, CSS: 80}};\nlet leo = user;\nleo.name = \"leo1\";\nleo.skill.CSS = 90;\nconsole.log(leo.name);      // \"leo1\"\nconsole.log(user.name);     // \"leo1\"\nconsole.log(leo.skill.CSS); // 90\nconsole.log(user.skill.CSS);// 90\n\n// ç¤ºä¾‹2 æ•°ç»„åŸå§‹æ‹·è´\nlet user = [\"leo\", \"pingan\", {name: \"pingan8787\"}];\nlet leo  = user;\nleo[0] = \"pingan888\";\nleo[2][\"name\"] = \"pingan999\";\nconsole.log(leo[0]);          // \"pingan888\"\nconsole.log(user[0]);         // \"pingan888\"\nconsole.log(leo[2][\"name\"]);  // \"pingan999\"\nconsole.log(user[2][\"name\"]); // \"pingan999\"\n```\nä»ä¸Šé¢ç¤ºä¾‹ä»£ç å¯ä»¥çœ‹å‡ºï¼š\nç”±äºå¯¹è±¡è¢«ç›´æ¥æ‹·è´ï¼Œç›¸å½“äºæ‹·è´ **å¼•ç”¨æ•°æ®ç±»å‹** ï¼Œæ‰€ä»¥åœ¨æ–°å¯¹è±¡ä¿®æ”¹ä»»ä½•å€¼æ—¶ï¼Œéƒ½ä¼šæ”¹åŠ¨åˆ°æºæ•°æ®ã€‚\n\næ¥ä¸‹æ¥å®ç°æµ…æ‹·è´ï¼Œå¯¹æ¯”ä»¥ä¸‹ã€‚\n\n### 3.2 å®ç°æµ…æ‹·è´\n\n#### 1. Object.assign()Â \nè¯­æ³•ï¼š `Object.assign(target, ...sources)`\nES6ä¸­æ‹·è´å¯¹è±¡çš„æ–¹æ³•ï¼Œæ¥å—çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ‹·è´çš„ç›®æ ‡targetï¼Œå‰©ä¸‹çš„å‚æ•°æ˜¯æ‹·è´çš„æºå¯¹è±¡sourcesï¼ˆå¯ä»¥æ˜¯å¤šä¸ªï¼‰ã€‚\nè¯¦ç»†ä»‹ç»ï¼Œå¯ä»¥é˜…è¯»æ–‡æ¡£[ã€ŠMDN Object.assignã€‹](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)ã€‚\n```javascript\n// ç¤ºä¾‹1 å¯¹è±¡æµ…æ‹·è´\nlet user = { name: \"leo\", skill: { JavaScript: 90, CSS: 80}};\nlet leo = Object.assign({}, user);\nleo.name = \"leo1\";\nleo.skill.CSS = 90;\nconsole.log(leo.name);      // \"leo1\" âš ï¸ å·®å¼‚ï¼\nconsole.log(user.name);     // \"leo\"  âš ï¸ å·®å¼‚ï¼\nconsole.log(leo.skill.CSS); // 90\nconsole.log(user.skill.CSS);// 90\n\n// ç¤ºä¾‹2 æ•°ç»„æµ…æ‹·è´\nlet user = [\"leo\", \"pingan\", {name: \"pingan8787\"}];\nlet leo  = Object.assign({}, user);\nleo[0] = \"pingan888\";\nleo[2][\"name\"] = \"pingan999\";\nconsole.log(leo[0]);          // \"pingan888\"  âš ï¸ å·®å¼‚ï¼\nconsole.log(user[0]);         // \"leo\"        âš ï¸ å·®å¼‚ï¼\nconsole.log(leo[2][\"name\"]);  // \"pingan999\"\nconsole.log(user[2][\"name\"]); // \"pingan999\"\n```\nä»æ‰“å°ç»“æœå¯ä»¥çœ‹å‡ºï¼Œæµ…æ‹·è´åªæ˜¯åœ¨æ ¹å±æ€§(å¯¹è±¡çš„ç¬¬ä¸€å±‚çº§)åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œä½†æ˜¯å¯¹äºå±æ€§çš„å€¼æ˜¯å¯¹è±¡çš„è¯åªä¼šæ‹·è´ä¸€ä»½ç›¸åŒçš„å†…å­˜åœ°å€ã€‚\n\n`Object.assign()` ä½¿ç”¨æ³¨æ„ï¼š\n\n- åªæ‹·è´æºå¯¹è±¡çš„è‡ªèº«å±æ€§ï¼ˆä¸æ‹·è´ç»§æ‰¿å±æ€§ï¼‰ï¼›\n- ä¸ä¼šæ‹·è´å¯¹è±¡ä¸å¯æšä¸¾çš„å±æ€§ï¼›\n- å±æ€§åä¸º`Symbol`Â å€¼çš„å±æ€§ï¼Œå¯ä»¥è¢«Object.assignæ‹·è´ï¼›\n- `undefined`å’Œ`null`æ— æ³•è½¬æˆå¯¹è±¡ï¼Œå®ƒä»¬ä¸èƒ½ä½œä¸º`Object.assign`å‚æ•°ï¼Œä½†æ˜¯å¯ä»¥ä½œä¸ºæºå¯¹è±¡ã€‚\n```javascript\nObject.assign(undefined); // æŠ¥é”™\nObject.assign(null);      // æŠ¥é”™\n\nObject.assign({}, undefined); // {}\nObject.assign({}, null);      // {}\n\nlet user = {name: \"leo\"};\nObject.assign(user, undefined) === user; // true\nObject.assign(user, null)      === user; // true\n```\n\n#### 2. Array.prototype.slice()\nè¯­æ³•ï¼š `arr.slice([begin[, end]])`\n`slice()` æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„å¯¹è±¡ï¼Œè¿™ä¸€å¯¹è±¡æ˜¯ä¸€ä¸ªç”± `begin` å’Œ `end` å†³å®šçš„åŸæ•°ç»„çš„æµ…æ‹·è´ï¼ˆåŒ…æ‹¬ `begin`ï¼Œä¸åŒ…æ‹¬`end`ï¼‰ã€‚åŸå§‹æ•°ç»„ä¸ä¼šè¢«æ”¹å˜ã€‚\nè¯¦ç»†ä»‹ç»ï¼Œå¯ä»¥é˜…è¯»æ–‡æ¡£[ã€ŠMDN Array sliceã€‹](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/slice)ã€‚\n```javascript\n// ç¤ºä¾‹ æ•°ç»„æµ…æ‹·è´\nlet user = [\"leo\", \"pingan\", {name: \"pingan8787\"}];\nlet leo  = Array.prototype.slice.call(user);\nleo[0] = \"pingan888\";\nleo[2][\"name\"] = \"pingan999\";\nconsole.log(leo[0]);          // \"pingan888\"  âš ï¸ å·®å¼‚ï¼\nconsole.log(user[0]);         // \"leo\"        âš ï¸ å·®å¼‚ï¼\nconsole.log(leo[2][\"name\"]);  // \"pingan999\"\nconsole.log(user[2][\"name\"]); // \"pingan999\"\n```\n\n#### 3. Array.prototype.concat()\nè¯­æ³•ï¼š `var new_array = old_array.concat(value1[, value2[, ...[, valueN]]])`\n`concat()` æ–¹æ³•ç”¨äºåˆå¹¶ä¸¤ä¸ªæˆ–å¤šä¸ªæ•°ç»„ã€‚æ­¤æ–¹æ³•ä¸ä¼šæ›´æ”¹ç°æœ‰æ•°ç»„ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæ–°æ•°ç»„ã€‚\nè¯¦ç»†ä»‹ç»ï¼Œå¯ä»¥é˜…è¯»æ–‡æ¡£[ã€ŠMDN Array concatã€‹](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/concat)ã€‚\n```javascript\nlet user  = [{name: \"leo\"},   {age: 18}];\nlet user1 = [{age: 20},{addr: \"fujian\"}];\nlet user2 = user.concat(user1);\nuser1[0][\"age\"] = 25;\nconsole.log(user);  // [{\"name\":\"leo\"},{\"age\":18}]\nconsole.log(user1); // [{\"age\":25},{\"addr\":\"fujian\"}]\nconsole.log(user2); // [{\"name\":\"leo\"},{\"age\":18},{\"age\":25},{\"addr\":\"fujian\"}]\n```\n`Array.prototype.concat` ä¹Ÿæ˜¯ä¸€ä¸ªæµ…æ‹·è´ï¼Œåªæ˜¯åœ¨æ ¹å±æ€§(å¯¹è±¡çš„ç¬¬ä¸€å±‚çº§)åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œä½†æ˜¯å¯¹äºå±æ€§çš„å€¼æ˜¯å¯¹è±¡çš„è¯åªä¼šæ‹·è´ä¸€ä»½ç›¸åŒçš„å†…å­˜åœ°å€ã€‚\n\n\n#### 4. æ‹“å±•è¿ç®—ç¬¦ï¼ˆ...ï¼‰\nè¯­æ³•ï¼š `var cloneObj = { ...obj };`\næ‰©å±•è¿ç®—ç¬¦ä¹Ÿæ˜¯æµ…æ‹·è´ï¼Œå¯¹äºå€¼æ˜¯å¯¹è±¡çš„å±æ€§æ— æ³•å®Œå…¨æ‹·è´æˆ2ä¸ªä¸åŒå¯¹è±¡ï¼Œä½†æ˜¯å¦‚æœå±æ€§éƒ½æ˜¯åŸºæœ¬ç±»å‹çš„å€¼çš„è¯ï¼Œä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ä¹Ÿæ˜¯ä¼˜åŠ¿æ–¹ä¾¿çš„åœ°æ–¹ã€‚\n```javascript\nlet user = { name: \"leo\", skill: { JavaScript: 90, CSS: 80}};\nlet leo = {...user};\nleo.name = \"leo1\";\nleo.skill.CSS = 90;\nconsole.log(leo.name);      // \"leo1\" âš ï¸ å·®å¼‚ï¼\nconsole.log(user.name);     // \"leo\"  âš ï¸ å·®å¼‚ï¼\nconsole.log(leo.skill.CSS); // 90\nconsole.log(user.skill.CSS);// 90\n```\n\n### 3.3 æ‰‹å†™æµ…æ‹·è´\nå®ç°åŸç†ï¼šæ–°çš„å¯¹è±¡å¤åˆ¶å·²æœ‰å¯¹è±¡ä¸­éå¯¹è±¡å±æ€§çš„å€¼å’Œå¯¹è±¡å±æ€§çš„**å¼•ç”¨**,ä¹Ÿå°±æ˜¯è¯´å¯¹è±¡å±æ€§å¹¶ä¸å¤åˆ¶åˆ°å†…å­˜ã€‚\n```javascript\nfunction cloneShallow(source) {\n    let target = {};\n    for (let key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n            target[key] = source[key];\n        }\n    }\n    return target;\n}\n```\n\n- **for in**\n\nfor...inè¯­å¥ä»¥ä»»æ„é¡ºåºéå†ä¸€ä¸ªå¯¹è±¡è‡ªæœ‰çš„ã€ç»§æ‰¿çš„ã€`å¯æšä¸¾çš„`ã€éSymbolçš„å±æ€§ã€‚å¯¹äºæ¯ä¸ªä¸åŒçš„å±æ€§ï¼Œè¯­å¥éƒ½ä¼šè¢«æ‰§è¡Œã€‚\n\n- **hasOwnProperty**\n\nè¯¥å‡½æ•°è¿”å›å€¼ä¸ºå¸ƒå°”å€¼ï¼Œæ‰€æœ‰ç»§æ‰¿äº† Object çš„å¯¹è±¡éƒ½ä¼šç»§æ‰¿åˆ° `hasOwnProperty` æ–¹æ³•ï¼Œå’Œ `in` è¿ç®—ç¬¦ä¸åŒï¼Œè¯¥å‡½æ•°ä¼šå¿½ç•¥æ‰é‚£äº›ä»åŸå‹é“¾ä¸Šç»§æ‰¿åˆ°çš„å±æ€§å’Œè‡ªèº«å±æ€§ã€‚\nè¯­æ³•ï¼š`obj.hasOwnProperty(prop)`\n`prop` æ˜¯è¦æ£€æµ‹çš„å±æ€§**å­—ç¬¦ä¸²åç§°**æˆ–è€…`Symbol`ã€‚\n\n## 4. æ·±æ‹·è´\n\n### 4.1 æ¦‚å¿µ\nå¤åˆ¶å˜é‡å€¼ï¼Œå¯¹äºå¼•ç”¨æ•°æ®ï¼Œåˆ™é€’å½’è‡³åŸºæœ¬ç±»å‹åï¼Œå†å¤åˆ¶ã€‚æ·±æ‹·è´åçš„å¯¹è±¡**ä¸åŸæ¥çš„å¯¹è±¡å®Œå…¨éš”ç¦»**ï¼Œäº’ä¸å½±å“ï¼Œå¯¹ä¸€ä¸ªå¯¹è±¡çš„ä¿®æ”¹å¹¶ä¸ä¼šå½±å“å¦ä¸€ä¸ªå¯¹è±¡ã€‚\n\n### 4.2 å®ç°æ·±æ‹·è´\n\n#### 1. JSON.parse(JSON.stringify())\nå…¶åŸç†æ˜¯æŠŠä¸€ä¸ªå¯¹è±¡åºåˆ—åŒ–æˆä¸ºä¸€ä¸ªJSONå­—ç¬¦ä¸²ï¼Œå°†å¯¹è±¡çš„å†…å®¹è½¬æ¢æˆå­—ç¬¦ä¸²çš„å½¢å¼å†ä¿å­˜åœ¨ç£ç›˜ä¸Šï¼Œå†ç”¨`JSON.parse()` ååºåˆ—åŒ–å°†JSONå­—ç¬¦ä¸²å˜æˆä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚\n```javascript\nlet user = { name: \"leo\", skill: { JavaScript: 90, CSS: 80}};\nlet leo = JSON.parse(JSON.stringify(user));\nleo.name = \"leo1\";\nleo.skill.CSS = 90;\nconsole.log(leo.name);      // \"leo1\" âš ï¸ å·®å¼‚ï¼\nconsole.log(user.name);     // \"leo\"  âš ï¸ å·®å¼‚ï¼\nconsole.log(leo.skill.CSS); // 90 âš ï¸ å·®å¼‚ï¼\nconsole.log(user.skill.CSS);// 80 âš ï¸ å·®å¼‚ï¼\n```\n`JSON.stringify()` ä½¿ç”¨æ³¨æ„ï¼š\n\n- æ‹·è´çš„å¯¹è±¡çš„å€¼ä¸­å¦‚æœæœ‰å‡½æ•°ï¼Œ `undefined` ï¼Œ `symbol` åˆ™ç»è¿‡ `JSON.stringify()` `åºåˆ—åŒ–åçš„JSONå­—ç¬¦ä¸²ä¸­è¿™ä¸ªé”®å€¼å¯¹ä¼šæ¶ˆå¤±ï¼›\n- æ— æ³•æ‹·è´ä¸å¯æšä¸¾çš„å±æ€§ï¼Œæ— æ³•æ‹·è´å¯¹è±¡çš„åŸå‹é“¾ï¼›\n- æ‹·è´ `Date` å¼•ç”¨ç±»å‹ä¼šå˜æˆå­—ç¬¦ä¸²ï¼›\n- æ‹·è´ `RegExp` å¼•ç”¨ç±»å‹ä¼šå˜æˆç©ºå¯¹è±¡ï¼›\n- å¯¹è±¡ä¸­å«æœ‰ `NaN` ã€ `Infinity` å’Œ `-Infinity` ï¼Œåˆ™åºåˆ—åŒ–çš„ç»“æœä¼šå˜æˆ `null` ï¼›\n- æ— æ³•æ‹·è´å¯¹è±¡çš„å¾ªç¯åº”ç”¨(å³ `obj[key] = obj` )ã€‚\n\n\n#### 2. ç¬¬ä¸‰æ–¹åº“\n\n### 4.3 æ‰‹å†™æ·±æ‹·è´\næ ¸å¿ƒæ€æƒ³æ˜¯**é€’å½’**ï¼Œéå†å¯¹è±¡ã€æ•°ç»„ç›´åˆ°é‡Œè¾¹éƒ½æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œç„¶åå†å»å¤åˆ¶ï¼Œå°±æ˜¯æ·±åº¦æ‹·è´ã€‚ å®ç°ä»£ç ï¼š\n```javascript\nconst isObject = obj => typeof obj === 'object' && obj != null;\n\nfunction cloneDeep(source) {\n    if (!isObject(source)) return source; // éå¯¹è±¡è¿”å›è‡ªèº«\n    const target = Array.isArray(source) ? [] : {};\n    for(var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n            if (isObject(source[key])) {\n                target[key] = cloneDeep(source[key]); // æ³¨æ„è¿™é‡Œ\n            } else {\n                target[key] = source[key];\n            }\n        }\n    }\n    return target;\n}\n```\nè¯¥æ–¹æ³•ç¼ºé™·ï¼š é‡åˆ°å¾ªç¯å¼•ç”¨ï¼Œä¼šé™·å…¥ä¸€ä¸ªå¾ªç¯çš„é€’å½’è¿‡ç¨‹ï¼Œä»è€Œå¯¼è‡´çˆ†æ ˆã€‚\nå…¶ä»–å†™æ³•ï¼Œå¯ä»¥é˜…è¯»[ã€Šå¦‚ä½•å†™å‡ºä¸€ä¸ªæƒŠè‰³é¢è¯•å®˜çš„æ·±æ‹·è´?ã€‹](https://juejin.im/post/5d6aa4f96fb9a06b112ad5b1) ã€‚\n\n## 5. å°ç»“\n**æµ…æ‹·è´**ï¼šå°†å¯¹è±¡çš„æ¯ä¸ªå±æ€§è¿›è¡Œä¾æ¬¡å¤åˆ¶ï¼Œä½†æ˜¯å½“å¯¹è±¡çš„å±æ€§å€¼æ˜¯å¼•ç”¨ç±»å‹æ—¶ï¼Œå®è´¨å¤åˆ¶çš„æ˜¯å…¶å¼•ç”¨ï¼Œå½“å¼•ç”¨æŒ‡å‘çš„å€¼æ”¹å˜æ—¶ä¹Ÿä¼šè·Ÿç€å˜åŒ–ã€‚\n\n**æ·±æ‹·è´**ï¼šå¤åˆ¶å˜é‡å€¼ï¼Œå¯¹äºå¼•ç”¨æ•°æ®ï¼Œåˆ™é€’å½’è‡³åŸºæœ¬ç±»å‹åï¼Œå†å¤åˆ¶ã€‚æ·±æ‹·è´åçš„å¯¹è±¡**ä¸åŸæ¥çš„å¯¹è±¡å®Œå…¨éš”ç¦»**ï¼Œäº’ä¸å½±å“ï¼Œå¯¹ä¸€ä¸ªå¯¹è±¡çš„ä¿®æ”¹å¹¶ä¸ä¼šå½±å“å¦ä¸€ä¸ªå¯¹è±¡ã€‚\n\n**æ·±æ‹·è´å’Œæµ…æ‹·è´æ˜¯é’ˆå¯¹å¤æ‚æ•°æ®ç±»å‹æ¥è¯´çš„ï¼Œæµ…æ‹·è´åªæ‹·è´ä¸€å±‚ï¼Œè€Œæ·±æ‹·è´æ˜¯å±‚å±‚æ‹·è´ã€‚**\n![æ·±æ‹·è´å’Œæµ…æ‹·è´](http://images.pingan8787.com/JavaScript-Base/section2/object-copy.png)\n\n# ä¸‰ã€åƒåœ¾å›æ”¶æœºåˆ¶ï¼ˆGCï¼‰\n[åƒåœ¾å›æ”¶ï¼ˆGarbage Collectionï¼Œç¼©å†™ä¸ºGCï¼‰](https://zh.wikipedia.org/zh-hans/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6_(%E8%A8%88%E7%AE%97%E6%A9%9F%E7%A7%91%E5%AD%B8))æ˜¯ä¸€ç§è‡ªåŠ¨çš„å­˜å‚¨å™¨ç®¡ç†æœºåˆ¶ã€‚å½“æŸä¸ªç¨‹åºå ç”¨çš„ä¸€éƒ¨åˆ†å†…å­˜ç©ºé—´ä¸å†è¢«è¿™ä¸ªç¨‹åºè®¿é—®æ—¶ï¼Œè¿™ä¸ªç¨‹åºä¼šå€ŸåŠ©åƒåœ¾å›æ”¶ç®—æ³•å‘æ“ä½œç³»ç»Ÿå½’è¿˜è¿™éƒ¨åˆ†å†…å­˜ç©ºé—´ã€‚åƒåœ¾å›æ”¶å™¨å¯ä»¥å‡è½»ç¨‹åºå‘˜çš„è´Ÿæ‹…ï¼Œä¹Ÿå‡å°‘ç¨‹åºä¸­çš„é”™è¯¯ã€‚åƒåœ¾å›æ”¶æœ€æ—©èµ·æºäºLISPè¯­è¨€ã€‚\nç›®å‰è®¸å¤šè¯­è¨€å¦‚Smalltalkã€Javaã€C#å’ŒDè¯­è¨€éƒ½æ”¯æŒåƒåœ¾å›æ”¶å™¨ï¼Œæˆ‘ä»¬ç†ŸçŸ¥çš„ JavaScript å…·æœ‰è‡ªåŠ¨åƒåœ¾å›æ”¶æœºåˆ¶ã€‚\n\n**åœ¨ JavaScript ä¸­ï¼ŒåŸå§‹ç±»å‹çš„æ•°æ®è¢«åˆ†é…åˆ°æ ˆç©ºé—´ä¸­ï¼Œå¼•ç”¨ç±»å‹çš„æ•°æ®ä¼šè¢«åˆ†é…åˆ°å †ç©ºé—´ä¸­ã€‚**\n\n## 1. æ ˆç©ºé—´ä¸­çš„åƒåœ¾å›æ”¶\nå½“å‡½æ•° `showName` è°ƒç”¨å®Œæˆåï¼Œé€šè¿‡ä¸‹ç§» [ESPï¼ˆExtended Stack Pointerï¼‰](https://baike.baidu.com/item/esp/35173)æŒ‡é’ˆï¼Œæ¥é”€æ¯ `showName` å‡½æ•°ï¼Œä¹‹åè°ƒç”¨å…¶ä»–å‡½æ•°æ—¶ï¼Œå°†è¦†ç›–æ‰æ—§å†…å­˜ï¼Œå­˜æ”¾å¦ä¸€ä¸ªå‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå®ç°åƒåœ¾å›æ”¶ã€‚\n![](hhttp://images.pingan8787.com/JavaScript-Base/section2/v8-1.jpg)\nå›¾ç‰‡æ¥è‡ªã€Šæµè§ˆå™¨å·¥ä½œåŸç†ä¸å®è·µã€‹\n\n## 2. å †ç©ºé—´ä¸­çš„åƒåœ¾å›æ”¶\nå †ä¸­æ•°æ®åƒåœ¾å›æ”¶ç­–ç•¥çš„åŸºç¡€æ˜¯ï¼š[**ä»£é™…å‡è¯´**ï¼ˆThe Generational Hypothesisï¼‰](https://plumbr.io/handbook/garbage-collection-in-java/generational-hypothesis)ã€‚å³ï¼š\n\n1. å¤§éƒ¨åˆ†å¯¹è±¡åœ¨å†…å­˜ä¸­å­˜åœ¨æ—¶é—´æçŸ­ï¼Œå¾ˆå¤šå¯¹è±¡å¾ˆå¿«å°±ä¸å¯è®¿é—®ã€‚\n1. ä¸æ­»çš„å¯¹è±¡å°†æ´»å¾—æ›´ä¹…ã€‚\n\nè¿™ä¸¤ä¸ªç‰¹ç‚¹ä¸ä»…ä»…é€‚ç”¨äº JavaScriptï¼ŒåŒæ ·é€‚ç”¨äºå¤§å¤šæ•°çš„åŠ¨æ€è¯­è¨€ï¼Œå¦‚ Javaã€Python ç­‰ã€‚\nV8 å¼•æ“å°†å †ç©ºé—´åˆ†ä¸º**æ–°ç”Ÿä»£**ï¼ˆå­˜æ”¾ç”Ÿå­˜**æ—¶é—´çŸ­**çš„å¯¹è±¡ï¼‰å’Œ**è€ç”Ÿä»£**ï¼ˆå­˜æ”¾ç”Ÿå­˜**æ—¶é—´é•¿**çš„å¯¹è±¡ï¼‰ä¸¤ä¸ªåŒºåŸŸï¼Œå¹¶ä½¿ç”¨ä¸åŒçš„åƒåœ¾å›æ”¶å™¨ã€‚\n\n- å‰¯åƒåœ¾å›æ”¶å™¨ï¼Œä¸»è¦è´Ÿè´£æ–°ç”Ÿä»£çš„åƒåœ¾å›æ”¶ã€‚\n- ä¸»åƒåœ¾å›æ”¶å™¨ï¼Œä¸»è¦è´Ÿè´£è€ç”Ÿä»£çš„åƒåœ¾å›æ”¶ã€‚\n\nä¸ç®¡æ˜¯å“ªç§åƒåœ¾å›æ”¶å™¨ï¼Œéƒ½ä½¿ç”¨ç›¸åŒåƒåœ¾å›æ”¶æµç¨‹ï¼š**æ ‡è®°æ´»åŠ¨å¯¹è±¡å’Œéæ´»åŠ¨å¯¹è±¡ï¼Œå›æ”¶éæ´»åŠ¨å¯¹è±¡çš„å†…å­˜ï¼Œæœ€åå†…å­˜æ•´ç†ã€‚**\n**\n\n### 1.1 å‰¯åƒåœ¾å›æ”¶å™¨\nä½¿ç”¨ Scavenge ç®—æ³•å¤„ç†ï¼Œå°†æ–°ç”Ÿä»£ç©ºé—´å¯¹åŠåˆ†ä¸ºä¸¤ä¸ªåŒºåŸŸï¼Œä¸€ä¸ªå¯¹è±¡åŒºåŸŸï¼Œä¸€ä¸ªç©ºé—²åŒºåŸŸã€‚\n![](hhttp://images.pingan8787.com/JavaScript-Base/section2/v8-2.jpg)\nå›¾ç‰‡æ¥è‡ªã€Šæµè§ˆå™¨å·¥ä½œåŸç†ä¸å®è·µã€‹\n\næ‰§è¡Œæµç¨‹ï¼š\n\n- æ–°å¯¹è±¡å­˜åœ¨åœ¨**å¯¹è±¡åŒºåŸŸ**ï¼Œå½“å¯¹è±¡åŒºåŸŸå°†è¦å†™æ»¡æ—¶ï¼Œæ‰§è¡Œä¸€æ¬¡åƒåœ¾å›æ”¶ï¼›\n- åƒåœ¾å›æ”¶è¿‡ç¨‹ä¸­ï¼Œé¦–å…ˆå¯¹å¯¹è±¡åŒºåŸŸä¸­çš„åƒåœ¾åšæ ‡è®°ï¼Œç„¶åå‰¯åƒåœ¾å›æ”¶å™¨å°†å­˜æ´»çš„å¯¹è±¡å¤åˆ¶å¹¶æœ‰åºæ’åˆ—åˆ°ç©ºé—²åŒºåŸŸï¼Œç›¸å½“äºå®Œæˆå†…å­˜æ•´ç†ã€‚\n- å¤åˆ¶å®Œæˆåï¼Œå°†å¯¹è±¡åŒºåŸŸå’Œç©ºé—²åŒºåŸŸç¿»è½¬ï¼Œå®Œæˆåƒåœ¾å›æ”¶æ“ä½œï¼Œè¿™ä¹Ÿè®©æ–°ç”Ÿä»£ä¸­ä¸¤å—åŒºåŸŸæ— é™é‡å¤ä½¿ç”¨ã€‚\n\nå½“ç„¶ï¼Œè¿™ä¹Ÿå­˜åœ¨ä¸€äº›é—®é¢˜ï¼šè‹¥å¤åˆ¶æ“ä½œçš„æ•°æ®è¾ƒå¤§åˆ™å½±å“æ¸…ç†æ•ˆç‡ã€‚\nJavaScript å¼•æ“çš„è§£å†³æ–¹å¼æ˜¯ï¼šå°†æ–°ç”Ÿä»£åŒºåŸŸè®¾ç½®å¾—æ¯”è¾ƒå°ï¼Œå¹¶é‡‡ç”¨å¯¹è±¡æ™‹å‡ç­–ç•¥ï¼ˆç»è¿‡ä¸¤æ¬¡å›æ”¶ä»å­˜æ´»çš„å¯¹è±¡ï¼Œä¼šè¢«ç§»åŠ¨åˆ°è€ç”ŸåŒºï¼‰ï¼Œé¿å…å› ä¸ºæ–°ç”Ÿä»£åŒºåŸŸè¾ƒå°å¼•èµ·å­˜æ´»å¯¹è±¡è£…æ»¡æ•´ä¸ªåŒºåŸŸçš„é—®é¢˜ã€‚\n\n### 1.2 ä¸»åƒåœ¾å›æ”¶å™¨\nåˆ†ä¸ºï¼š**æ ‡è®° - æ¸…é™¤ï¼ˆMark-Sweepï¼‰ç®—æ³•**ï¼Œå’Œ**æ ‡è®° - æ•´ç†ï¼ˆMark-Compactï¼‰ç®—æ³•**ã€‚\n\n**a)æ ‡è®° - æ¸…é™¤ï¼ˆMark-Sweepï¼‰ç®—æ³•**\n**è¿‡ç¨‹ï¼š**\n\n- æ ‡è®°è¿‡ç¨‹ï¼šä»ä¸€ç»„æ ¹å…ƒç´ å¼€å§‹éå†æ•´ä¸ªå…ƒç´ ï¼Œèƒ½åˆ°è¾¾çš„å…ƒç´ ä¸ºæ´»åŠ¨å¯¹è±¡ï¼Œåä¹‹ä¸ºåƒåœ¾æ•°æ®ï¼›\n- æ¸…é™¤è¿‡ç¨‹ï¼šæ¸…ç†è¢«æ ‡è®°çš„æ•°æ®ï¼Œå¹¶äº§ç”Ÿå¤§é‡ç¢ç‰‡å†…å­˜ã€‚ï¼ˆç¼ºç‚¹ï¼šå¯¼è‡´å¤§å¯¹è±¡æ— æ³•åˆ†é…åˆ°è¶³å¤Ÿçš„è¿ç»­å†…å­˜ï¼‰\n\n![](hhttp://images.pingan8787.com/JavaScript-Base/section2/v8-3.jpg)\nå›¾ç‰‡æ¥è‡ªã€Šæµè§ˆå™¨å·¥ä½œåŸç†ä¸å®è·µã€‹\n\n**b)æ ‡è®° - æ•´ç†ï¼ˆMark-Compactï¼‰ç®—æ³•**\n**è¿‡ç¨‹ï¼š**\n\n- æ ‡è®°è¿‡ç¨‹ï¼šä»ä¸€ç»„æ ¹å…ƒç´ å¼€å§‹éå†æ•´ä¸ªå…ƒç´ ï¼Œèƒ½åˆ°è¾¾çš„å…ƒç´ ä¸ºæ´»åŠ¨å¯¹è±¡ï¼Œåä¹‹ä¸ºåƒåœ¾æ•°æ®ï¼›\n- æ•´ç†è¿‡ç¨‹ï¼šå°†æ‰€æœ‰å­˜æ´»çš„å¯¹è±¡ï¼Œå‘ä¸€æ®µç§»åŠ¨ï¼Œç„¶åæ¸…é™¤ç«¯è¾¹ç•Œä»¥å¤–çš„å†…å®¹ã€‚\n\n![](hhttp://images.pingan8787.com/JavaScript-Base/section2/v8-4.jpg)\nå›¾ç‰‡æ¥è‡ªã€Šæµè§ˆå™¨å·¥ä½œåŸç†ä¸å®è·µã€‹\n\n## 3. æ‹“å±•é˜…è¯»\n1.[ã€Šå›¾è§£Java åƒåœ¾å›æ”¶æœºåˆ¶ã€‹](https://blog.csdn.net/justloveyou_/article/details/71216049)\n2.[ã€ŠMDN å†…å­˜ç®¡ç†ã€‹](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Memory_Management)\n\n# å››ã€å¯¹è±¡æ–¹æ³•å’Œ this\n\n## 1. å¯¹è±¡æ–¹æ³•\nå…·ä½“ä»‹ç»å¯é˜…è¯» [ã€ŠMDN æ–¹æ³•çš„å®šä¹‰ã€‹](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/Method_definitions) ã€‚\nå°†ä½œä¸ºå¯¹è±¡å±æ€§çš„æ–¹æ³•ç§°ä¸ºâ€œå¯¹è±¡æ–¹æ³•â€ï¼Œå¦‚ä¸‹é¢ `user` å¯¹è±¡çš„ `say` æ–¹æ³•ï¼š\n```javascript\nlet user = {};\nlet say = function(){console.log(\"hello!\")};\n\nuser.say = say;  // èµ‹å€¼åˆ°å¯¹è±¡ä¸Š\nuser.say(); // \"hello!\"\n```\nä¹Ÿå¯ä»¥ä½¿ç”¨æ›´åŠ ç®€æ´çš„æ–¹æ³•ï¼š\n```javascript\nlet user = {\n\tsay: function(){}\n  \n  // ç®€å†™ä¸º\n\tsay (){console.log(\"hello!\")}\n\n\t// ES8 async æ–¹æ³•\n\tasync say (){/.../}\n}\nuser.say();\n```\nå½“ç„¶å¯¹è±¡æ–¹æ³•çš„åç§°ï¼Œè¿˜æ”¯æŒè®¡ç®—çš„å±æ€§åç§°ä½œä¸ºæ–¹æ³•åï¼š\n```javascript\nconst hello = \"Hello\";\nlet user = {\n\t['say' + hello](){console.log(\"hello!\")}\n}\nuser['say' + hello](); // \"hello!\"\n```\n\n\nå¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼šæ‰€æœ‰æ–¹æ³•å®šä¹‰ä¸æ˜¯æ„é€ å‡½æ•°ï¼Œå¦‚æœæ‚¨å°è¯•å®ä¾‹åŒ–å®ƒä»¬ï¼Œå°†æŠ›å‡º[`TypeError`](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypeError)ã€‚\n```javascript\nlet user = {\n\tsay(){};\n}\nnew user.say; // TypeError: user.say is not a constructor\n```\n\n## 2. this\n\n### 2.1 this ç®€ä»‹\nå½“å¯¹è±¡æ–¹æ³•éœ€è¦ä½¿ç”¨å¯¹è±¡ä¸­çš„å±æ€§ï¼Œå¯ä»¥ä½¿ç”¨ `this` å…³é”®å­—ï¼š\n```javascript\nlet user = {\n\tname : 'leo',\n  say(){ console.log(`hello ${this.name}`)}\n}\n\nuser.say(); // \"hello leo\"\n```\nå½“ä»£ç  `user.say()` æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œ `this` æŒ‡çš„æ˜¯ `user` å¯¹è±¡ã€‚å½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨å˜é‡å `user` æ¥å¼•ç”¨ `say()` æ–¹æ³•ï¼š\n```javascript\nlet user = {\n\tname : 'leo',\n  say(){ console.log(`hello ${user.name}`)}\n}\n\nuser.say(); // \"hello leo\"\n```\nä½†æ˜¯è¿™æ ·å¹¶ä¸å®‰å…¨ï¼Œå› ä¸º `user` å¯¹è±¡å¯èƒ½èµ‹å€¼ç»™å¦å¤–ä¸€ä¸ªå˜é‡ï¼Œå¹¶ä¸”å°†å…¶ä»–å€¼èµ‹å€¼ç»™ `user` å¯¹è±¡ï¼Œå°±å¯èƒ½å¯¼è‡´æŠ¥é”™ï¼š\n```javascript\nlet user = {\n\tname : 'leo',\n  say(){ console.log(`hello ${user.name}`)}\n}\n\nlet leo = user;\nuser = null;\n\nleo.say(); // Uncaught TypeError: Cannot read property 'name' of null\n```\nä½†å°† Â `user.name` Â æ”¹æˆ `this.name` ä»£ç ä¾¿æ­£å¸¸è¿è¡Œã€‚\n\n### 2.2 this å–å€¼\n`this` çš„å€¼æ˜¯åœ¨ **ä»£ç è¿è¡Œæ—¶è®¡ç®—å‡ºæ¥** çš„ï¼Œå®ƒçš„å€¼å–å†³äºä»£ç ä¸Šä¸‹æ–‡ï¼š\n```javascript\nlet user = { name: \"leo\"};\nlet admin = {name: \"pingan\"};\nlet say = function (){\n\tconsole.log(`hello ${this.name}`)\n};\n\nuser.fun = say;\nadmin.fun = say;\n\n// å‡½æ•°å†…éƒ¨ this æ˜¯æŒ‡â€œç‚¹ç¬¦å·å‰é¢â€çš„å¯¹è±¡\nuser.fun();     // \"hello leo\"\nadmin.fun();    // \"hello pingan\"\nadmin['fun'](); // \"hello pingan\"\n```\nè§„åˆ™ï¼šå¦‚æœ `obj.fun()` è¢«è°ƒç”¨ï¼Œåˆ™ `this` åœ¨ `fun` å‡½æ•°è°ƒç”¨æœŸé—´æ˜¯ `obj` ï¼Œæ‰€ä»¥ä¸Šé¢çš„ `this` å…ˆæ˜¯ `user` ï¼Œç„¶åæ˜¯ `admin` ã€‚\n\n\nä½†æ˜¯åœ¨å…¨å±€ç¯å¢ƒä¸­ï¼Œæ— è®ºæ˜¯å¦å¼€å¯ä¸¥æ ¼æ¨¡å¼ï¼Œ `this` éƒ½æŒ‡å‘å…¨å±€å¯¹è±¡\n```javascript\nconsole.log(this == window); // true\n\nlet a = 10;\nthis.b = 10;\na === this.b; // true\n```\n\n### 2.3 ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„ this\nç®­å¤´å‡½æ•°æ¯”è¾ƒç‰¹åˆ«ï¼Œæ²¡æœ‰è‡ªå·±çš„ `this` ï¼Œå¦‚æœæœ‰å¼•ç”¨ `this` çš„è¯ï¼Œåˆ™æŒ‡å‘å¤–éƒ¨æ­£å¸¸å‡½æ•°ï¼Œä¸‹é¢ä¾‹å­ä¸­ï¼Œ `this` æŒ‡å‘ `user.say()` æ–¹æ³•ï¼š\n```javascript\nlet user = {\n\tname : 'leo',\n  say : () => {\n  \tconsole.log(`hello ${this.name}`);\n  },\n  hello(){\n\t\tlet fun = () => console.log(`hello ${this.name}`);\n    fun();\n\t}\n}\n\nuser.say();   // hello      => say() å¤–éƒ¨å‡½æ•°æ˜¯ window\nuser.hello(); // hello leo  => fun() å¤–éƒ¨å‡½æ•°æ˜¯ hello\n```\n\n### 2.4 call / apply / bind\nè¯¦ç»†å¯ä»¥é˜…è¯»[ã€ŠjsåŸºç¡€-å…³äºcall,apply,bindçš„ä¸€åˆ‡ã€‹](https://cloud.tencent.com/developer/article/1479810) ã€‚\nå½“æˆ‘ä»¬æƒ³æŠŠ `this` å€¼ç»‘å®šåˆ°å¦ä¸€ä¸ªç¯å¢ƒä¸­ï¼Œå°±å¯ä»¥ä½¿ç”¨ `call` / `apply` / `bind` æ–¹æ³•å®ç°ï¼š\n```javascript\nvar user = { name: 'leo' };\nvar name = 'pingan';\nfunction fun(){\n\treturn console.log(this.name); // this çš„å€¼å–å†³äºå‡½æ•°è°ƒç”¨æ–¹å¼\n}\n\nfun();           // \"pingan\"\nfun.call(user);  // \"leo\"\nfun.apply(user); // \"leo\"\n```\næ³¨æ„ï¼šè¿™é‡Œçš„ `var name = 'pingan';` éœ€è¦ä½¿ç”¨ `var` æ¥å£°æ˜ï¼Œä½¿ç”¨ `let` çš„è¯ï¼Œ `window` ä¸Šå°†æ²¡æœ‰ `name` å˜é‡ã€‚\n\nä¸‰è€…è¯­æ³•å¦‚ä¸‹ï¼š\n```javascript\nfun.call(thisArg, param1, param2, ...)\nfun.apply(thisArg, [param1,param2,...])\nfun.bind(thisArg, param1, param2, ...)\n```\n\n# äº”ã€æ„é€ å‡½æ•°å’Œ new è¿ç®—ç¬¦\n\n## 1. æ„é€ å‡½æ•°\næ„é€ å‡½æ•°çš„ä½œç”¨åœ¨äº **å®ç°å¯é‡ç”¨çš„å¯¹è±¡åˆ›å»ºä»£ç ** ã€‚\né€šå¸¸ï¼Œå¯¹äºæ„é€ å‡½æ•°æœ‰ä¸¤ä¸ªçº¦å®šï¼š\n\n- å‘½åæ—¶é¦–å­—æ¯å¤§å†™ï¼›\n- åªèƒ½ä½¿ç”¨ `new` è¿ç®—ç¬¦æ‰§è¡Œã€‚\n\n**`new` è¿ç®—ç¬¦**åˆ›å»ºä¸€ä¸ªç”¨æˆ·å®šä¹‰çš„å¯¹è±¡ç±»å‹çš„å®ä¾‹æˆ–å…·æœ‰æ„é€ å‡½æ•°çš„å†…ç½®å¯¹è±¡çš„å®ä¾‹ã€‚\nè¯­æ³•å¦‚ä¸‹ï¼š\n```javascript\nnew constructor[([arguments])]\n```\nå‚æ•°å¦‚ä¸‹ï¼š\n\n- `constructor`ä¸€ä¸ªæŒ‡å®šå¯¹è±¡å®ä¾‹çš„ç±»å‹çš„ç±»æˆ–å‡½æ•°ã€‚\n- `arguments`ä¸€ä¸ªç”¨äºè¢« `constructor` è°ƒç”¨çš„å‚æ•°åˆ—è¡¨ã€‚\n\n## 2. ç®€å•ç¤ºä¾‹\nä¸¾ä¸ªç®€å•ç¤ºä¾‹ï¼š\n```javascript\nfunction User (name){\n\tthis.name = name;\n  this.isAdmin = false; \n}\nconst leo = new User('leo');\nconsole.log(leo.name, leo.isAdmin); // \"leo\" false\n```\n\n## 3. new è¿ç®—ç¬¦æ“ä½œè¿‡ç¨‹\nå½“ä¸€ä¸ªå‡½æ•°è¢«ä½¿ç”¨ `new` è¿ç®—ç¬¦æ‰§è¡Œæ—¶ï¼Œå®ƒæŒ‰ç…§ä»¥ä¸‹æ­¥éª¤ï¼š\n\n1. ä¸€ä¸ªæ–°çš„ç©ºå¯¹è±¡è¢«åˆ›å»ºå¹¶åˆ†é…ç»™ `this`ã€‚\n1. å‡½æ•°ä½“æ‰§è¡Œã€‚é€šå¸¸å®ƒä¼šä¿®æ”¹ `this`ï¼Œä¸ºå…¶æ·»åŠ æ–°çš„å±æ€§ã€‚\n1. è¿”å› `this` çš„å€¼ã€‚\n\nä»¥å‰é¢ `User` æ–¹æ³•ä¸ºä¾‹ï¼š\n```javascript\nfunction User(name) {\n  // this = {};ï¼ˆéšå¼åˆ›å»ºï¼‰\n\n  // æ·»åŠ å±æ€§åˆ° this\n  this.name = name;\n  this.isAdmin = false;\n\n  // return this;ï¼ˆéšå¼è¿”å›ï¼‰\n}\nconst leo = new User('leo');\nconsole.log(leo.name, leo.isAdmin); // \"leo\" false\n```\n\nå½“æˆ‘ä»¬æ‰§è¡Œ `new User('leo')` æ—¶ï¼Œå‘ç”Ÿä»¥ä¸‹äº‹æƒ…ï¼š\n\n1. ä¸€ä¸ªç»§æ‰¿è‡ª `User.prototype` çš„æ–°å¯¹è±¡è¢«åˆ›å»ºï¼›\n1. ä½¿ç”¨æŒ‡å®šå‚æ•°è°ƒç”¨æ„é€ å‡½æ•° `User` ï¼Œå¹¶å°† `this` ç»‘å®šåˆ°æ–°åˆ›å»ºçš„å¯¹è±¡ï¼›\n1. ç”±æ„é€ å‡½æ•°è¿”å›çš„å¯¹è±¡å°±æ˜¯ `new` è¡¨è¾¾å¼çš„ç»“æœã€‚å¦‚æœæ„é€ å‡½æ•°æ²¡æœ‰æ˜¾å¼è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™ä½¿ç”¨æ­¥éª¤1åˆ›å»ºçš„å¯¹è±¡ã€‚\n\n**éœ€è¦æ³¨æ„**ï¼š\n\n1. ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ„é€ å‡½æ•°ä¸è¿”å›å€¼ï¼Œä½†æ˜¯å¼€å‘è€…å¯ä»¥é€‰æ‹©ä¸»åŠ¨è¿”å›å¯¹è±¡ï¼Œæ¥è¦†ç›–æ­£å¸¸çš„å¯¹è±¡åˆ›å»ºæ­¥éª¤ï¼›\n1. `new User` ç­‰åŒäº `new User()` ï¼Œåªæ˜¯æ²¡æœ‰æŒ‡å®šå‚æ•°åˆ—è¡¨ï¼Œå³ `User` ä¸å¸¦å‚æ•°çš„æƒ…å†µï¼›\n```javascript\nlet user = new User; // <-- æ²¡æœ‰å‚æ•°\n// ç­‰åŒäº\nlet user = new User();\n```\n\n3. ä»»ä½•å‡½æ•°éƒ½å¯ä»¥ä½œä¸ºæ„é€ å™¨ï¼Œå³éƒ½å¯ä»¥ä½¿ç”¨ `new` è¿ç®—ç¬¦è¿è¡Œã€‚\n\n## 4. æ„é€ å‡½æ•°ä¸­çš„æ–¹æ³•\nåœ¨æ„é€ å‡½æ•°ä¸­ï¼Œä¹Ÿå¯ä»¥å°†æ–¹æ³•ç»‘å®šåˆ° `this` ä¸Šï¼š\n```javascript\nfunction User (name){\n\tthis.name = name;\n  this.isAdmin = false; \n\tthis.sayHello = function(){\n\t\tconsole.log(\"hello \" + this.name);\n\t}\n}\nconst leo = new User('leo');\nconsole.log(leo.name, leo.isAdmin); // \"leo\" false\nleo.sayHello(); // \"hello leo\"\n```\n\n# å…­ã€å¯é€‰é“¾ \"?.\"\nè¯¦ç»†ä»‹ç»å¯ä»¥æŸ¥çœ‹ [ã€ŠMDN å¯é€‰é“¾æ“ä½œç¬¦ã€‹](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/å¯é€‰é“¾) ã€‚\n\n## 1. èƒŒæ™¯ä»‹ç»\nåœ¨å®é™…å¼€å‘ä¸­ï¼Œå¸¸å¸¸å‡ºç°ä¸‹é¢å‡ ç§æŠ¥é”™æƒ…å†µï¼š\n```javascript\n// 1. å¯¹è±¡ä¸­ä¸å­˜åœ¨æŒ‡å®šå±æ€§\nconst leo = {};\nconsole.log(leo.name.toString()); \n// Uncaught TypeError: Cannot read property 'toString' of undefined\n\n// 2. ä½¿ç”¨ä¸å­˜åœ¨çš„ DOM èŠ‚ç‚¹å±æ€§\nconst dom = document.getElementById(\"dom\").innerHTML; \n// Uncaught TypeError: Cannot read property 'innerHTML' of null\n```\nåœ¨å¯é€‰é“¾ `?.` å‡ºç°ä¹‹å‰ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨çŸ­è·¯æ“ä½œ `&&` è¿ç®—ç¬¦æ¥è§£å†³è¯¥é—®é¢˜ï¼š\n```javascript\nconst leo = {};\nconsole.log(leo && leo.name && leo.name.toString()); // undefined\n```\nè¿™ç§å†™æ³•çš„ç¼ºç‚¹å°±æ˜¯ **å¤ªéº»çƒ¦äº†** ã€‚\n\n## 2. å¯é€‰é“¾ä»‹ç» \nå¯é€‰é“¾ `?.` æ˜¯ä¸€ç§ **è®¿é—®åµŒå¥—å¯¹è±¡å±æ€§çš„é˜²é”™è¯¯æ–¹æ³•** ã€‚å³ä½¿ä¸­é—´çš„å±æ€§ä¸å­˜åœ¨ï¼Œä¹Ÿä¸ä¼šå‡ºç°é”™è¯¯ã€‚\nå¦‚æœå¯é€‰é“¾ `?.` å‰é¢éƒ¨åˆ†æ˜¯ `undefined` æˆ–è€… `null`ï¼Œå®ƒä¼šåœæ­¢è¿ç®—å¹¶è¿”å› `undefined`ã€‚\n\nè¯­æ³•ï¼š\n```javascript\nobj?.prop\nobj?.[expr]\narr?.[index]\nfunc?.(args)\n```\n**\n**æˆ‘ä»¬æ”¹é€ å‰é¢ç¤ºä¾‹ä»£ç ï¼š**\n```javascript\n// 1. å¯¹è±¡ä¸­ä¸å­˜åœ¨æŒ‡å®šå±æ€§\nconst leo = {};\nconsole.log(leo?.name?.toString()); \n// undefined\n\n// 2. ä½¿ç”¨ä¸å­˜åœ¨çš„ DOM èŠ‚ç‚¹å±æ€§\nconst dom = document?.getElementById(\"dom\")?.innerHTML; \n// undefined\n```\n\n## 3. ä½¿ç”¨æ³¨æ„\nå¯é€‰é“¾è™½ç„¶å¥½ç”¨ï¼Œä½†éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š\n\n1. **ä¸èƒ½è¿‡åº¦ä½¿ç”¨å¯é€‰é“¾**ï¼›\n\næˆ‘ä»¬åº”è¯¥åªå°† `?.` ä½¿ç”¨åœ¨ä¸€äº›å±æ€§æˆ–æ–¹æ³•å¯ä»¥ä¸å­˜åœ¨çš„åœ°æ–¹ï¼Œä»¥ä¸Šé¢ç¤ºä¾‹ä»£ç ä¸ºä¾‹ï¼š\n```javascript\nconst leo = {};\nconsole.log(leo.name?.toString()); \n```\nè¿™æ ·å†™ä¼šæ›´å¥½ï¼Œå› ä¸º `leo` å¯¹è±¡æ˜¯å¿…é¡»å­˜åœ¨ï¼Œè€Œ `name` å±æ€§åˆ™å¯èƒ½ä¸å­˜åœ¨ã€‚\n\n2. **å¯é€‰é“¾ `?.` ä¹‹å‰çš„å˜é‡å¿…é¡»å·²å£°æ˜**ï¼›\n\nåœ¨å¯é€‰é“¾ `?.` ä¹‹å‰çš„å˜é‡å¿…é¡»ä½¿ç”¨ `let/const/var` å£°æ˜ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼š\n```javascript\nleo?.name;\n// Uncaught ReferenceError: leo is not defined\n```\n\n3. **å¯é€‰é“¾ä¸èƒ½ç”¨äºèµ‹å€¼** ï¼›\n```javascript\nlet object = {};\nobject?.property = 1; \n// Uncaught SyntaxError: Invalid left-hand side in assignment\n```\n\n4. **å¯é€‰é“¾è®¿é—®æ•°ç»„å…ƒç´ çš„æ–¹æ³•** ï¼›\n```javascript\nlet arrayItem = arr?.[42];\n```\n\n## 4. å…¶ä»–æƒ…å†µï¼š?.() å’Œ ?.[]\néœ€è¦è¯´æ˜çš„æ˜¯ `?.` æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„è¯­æ³•ç»“æ„ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªè¿ç®—ç¬¦ï¼Œå®ƒè¿˜å¯ä»¥ä¸å…¶ `()` å’Œ `[]` ä¸€èµ·ä½¿ç”¨ï¼š\n\n### 4.1 å¯é€‰é“¾ä¸å‡½æ•°è°ƒç”¨ ?.()\n`?.()` ç”¨äºè°ƒç”¨ä¸€ä¸ªå¯èƒ½ä¸å­˜åœ¨çš„å‡½æ•°ï¼Œæ¯”å¦‚ï¼š\n```javascript\nlet user1 = {\n  admin() {\n    alert(\"I am admin\");\n  }\n}\n\nlet user2 = {};\n\nuser1.admin?.(); // I am admin\nuser2.admin?.();\n```\n`?.()` ä¼šæ£€æŸ¥å®ƒå·¦è¾¹çš„éƒ¨åˆ†ï¼šå¦‚æœ admin å‡½æ•°å­˜åœ¨ï¼Œé‚£ä¹ˆå°±è°ƒç”¨è¿è¡Œå®ƒï¼ˆå¯¹äº `user1`ï¼‰ã€‚å¦åˆ™ï¼ˆå¯¹äº `user2`ï¼‰è¿ç®—åœæ­¢ï¼Œæ²¡æœ‰é”™è¯¯ã€‚\n\n### 4.2 å¯é€‰é“¾å’Œè¡¨è¾¾å¼ ?.[]\n`?.[]` å…è®¸ä»ä¸€ä¸ªå¯èƒ½ä¸å­˜åœ¨çš„å¯¹è±¡ä¸Šå®‰å…¨åœ°è¯»å–å±æ€§ã€‚\n```javascript\nlet user1 = {\n  firstName: \"John\"\n};\n\nlet user2 = null; // å‡è®¾ï¼Œæˆ‘ä»¬ä¸èƒ½æˆæƒæ­¤ç”¨æˆ·\n\nlet key = \"firstName\";\n\nalert( user1?.[key] ); // John\nalert( user2?.[key] ); // undefined\n\nalert( user1?.[key]?.something?.not?.existing); // undefined\n```\n\n## 5. å¯é€‰é“¾ `?.` è¯­æ³•æ€»ç»“\nå¯é€‰é“¾ `?.` è¯­æ³•æœ‰ä¸‰ç§å½¢å¼ï¼š\n\n1. `obj?.prop` â€”â€” å¦‚æœ `obj` å­˜åœ¨åˆ™è¿”å› `obj.prop`ï¼Œå¦åˆ™è¿”å› `undefined`ã€‚\n1. `obj?.[prop]` â€”â€” å¦‚æœ `obj` å­˜åœ¨åˆ™è¿”å› `obj[prop]`ï¼Œå¦åˆ™è¿”å› `undefined`ã€‚\n1. `obj?.method()` â€”â€” å¦‚æœ `obj` å­˜åœ¨åˆ™è°ƒç”¨ `obj.method()`ï¼Œå¦åˆ™è¿”å› `undefined`ã€‚\n\næ­£å¦‚æˆ‘ä»¬æ‰€çœ‹åˆ°çš„ï¼Œè¿™äº›è¯­æ³•å½¢å¼ç”¨èµ·æ¥éƒ½å¾ˆç®€å•ç›´æ¥ã€‚`?.` æ£€æŸ¥å·¦è¾¹éƒ¨åˆ†æ˜¯å¦ä¸º `null/undefined`ï¼Œå¦‚æœä¸æ˜¯åˆ™ç»§ç»­è¿ç®—ã€‚\n`?.` é“¾ä½¿æˆ‘ä»¬èƒ½å¤Ÿå®‰å…¨åœ°è®¿é—®åµŒå¥—å±æ€§ã€‚\n\n# ä¸ƒã€Symbol\nè§„èŒƒè§„å®šï¼ŒJavaScript ä¸­å¯¹è±¡çš„å±æ€§åªèƒ½ä¸º **å­—ç¬¦ä¸²ç±»å‹** æˆ–è€… **Symbolç±»å‹** ï¼Œæ¯•ç«Ÿæˆ‘ä»¬ä¹Ÿåªè§è¿‡è¿™ä¸¤ç§ç±»å‹ã€‚\n\n## 1. æ¦‚å¿µä»‹ç»\nES6å¼•å…¥`Symbol`ä½œä¸ºä¸€ç§æ–°çš„**åŸå§‹æ•°æ®ç±»å‹**ï¼Œè¡¨ç¤º**ç‹¬ä¸€æ— äºŒ**çš„å€¼ï¼Œä¸»è¦æ˜¯ä¸ºäº†**é˜²æ­¢å±æ€§åå†²çª**ã€‚\nES6ä¹‹åï¼ŒJavaScriptä¸€å…±æœ‰å…¶ä¸­æ•°æ®ç±»å‹ï¼š`Symbol`ã€`undefined`ã€`null`ã€`Boolean`ã€`String`ã€`Number`ã€`Object`ã€‚\n**ç®€å•ä½¿ç”¨**ï¼š\n```javascript\nlet leo = Symbol();\ntypeof leo; // \"symbol\"\n```\nSymbol æ”¯æŒä¼ å…¥å‚æ•°ä½œä¸º Symbol åï¼Œæ–¹ä¾¿ä»£ç è°ƒè¯•ï¼š\n**\n```javascript\nlet leo = Symbol(\"leo\");\n```\n\n## 2. æ³¨æ„äº‹é¡¹**\n\n- `Symbol`å‡½æ•°ä¸èƒ½ç”¨`new`ï¼Œä¼šæŠ¥é”™ã€‚\n\nç”±äº`Symbol`æ˜¯ä¸€ä¸ªåŸå§‹ç±»å‹ï¼Œä¸æ˜¯å¯¹è±¡ï¼Œæ‰€ä»¥ä¸èƒ½æ·»åŠ å±æ€§ï¼Œå®ƒæ˜¯ç±»ä¼¼äºå­—ç¬¦ä¸²çš„æ•°æ®ç±»å‹ã€‚\n```javascript\nlet leo = new Symbol()\n// Uncaught TypeError: Symbol is not leo constructor\n```\n\n- `Symbol`éƒ½æ˜¯ä¸ç›¸ç­‰çš„ï¼Œ**å³ä½¿å‚æ•°ç›¸åŒ**ã€‚\n```javascript\n// æ²¡æœ‰å‚æ•°\nlet leo1 = Symbol();\nlet leo2 = Symbol();\nleo1 === leo2; // false \n\n// æœ‰å‚æ•°\nlet leo1 = Symbol('leo');\nlet leo2 = Symbol('leo');\nleo1 === leo2; // false\n```\n\n- `Symbol`ä¸èƒ½ä¸å…¶ä»–ç±»å‹çš„å€¼è®¡ç®—ï¼Œä¼šæŠ¥é”™ã€‚\n```javascript\nlet leo = Symbol('hello');\nleo + \" world!\";  // æŠ¥é”™\n`${leo} world!`;  // æŠ¥é”™\n```\n\n- `Symbol` ä¸èƒ½è‡ªåŠ¨è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œåªèƒ½æ˜¾å¼è½¬æ¢ã€‚\n```javascript\nlet leo = Symbol('hello');\nalert(leo); \n// Uncaught TypeError: Cannot convert a Symbol value to a string\n\nString(leo);    // \"Symbol(hello)\"\nleo.toString(); // \"Symbol(hello)\"\n```\n\n- `Symbol` å¯ä»¥è½¬æ¢ä¸ºå¸ƒå°”å€¼ï¼Œä½†ä¸èƒ½è½¬ä¸ºæ•°å€¼ï¼š\n```javascript\nlet a1 = Symbol();\nBoolean(a1);\n!a1;        // false\nNumber(a1); // TypeError\na1 + 1 ;    // TypeError\n```\n\n- `Symbol` å±æ€§ä¸å‚ä¸ `for...in/of` å¾ªç¯ã€‚\n```javascript\nlet id = Symbol(\"id\");\nlet user = {\n  name: \"Leo\",\n  age: 30,\n  [id]: 123\n};\n\nfor (let key in user) console.log(key); // name, age (no symbols)\n\n// ä½¿ç”¨ Symbol ä»»åŠ¡ç›´æ¥è®¿é—®\nconsole.log( \"Direct: \" + user[id] );\n```\n\n## 3. å­—é¢é‡ä¸­ä½¿ç”¨ Symbol ä½œä¸ºå±æ€§å\nåœ¨å¯¹è±¡å­—é¢é‡ä¸­ä½¿ç”¨ `Symbol` ä½œä¸ºå±æ€§åæ—¶ï¼Œéœ€è¦ä½¿ç”¨ **æ–¹æ‹¬å·** ï¼ˆ `[]` ï¼‰ï¼Œå¦‚ `[leo]: \"leo\"` ã€‚\nå¥½å¤„ï¼šé˜²æ­¢åŒåå±æ€§ï¼Œè¿˜æœ‰é˜²æ­¢é”®è¢«æ”¹å†™æˆ–è¦†ç›–ã€‚\n```javascript\nlet leo = Symbol();\n// å†™æ³•1\nlet user = {};\nuser[leo] = 'leo';\n\n// å†™æ³•2\nlet user = {\n    [leo] : 'leo'\n} \n\n// å†™æ³•3\nlet user = {};\nObject.defineProperty(user, leo, {value : 'leo' });\n\n// 3ç§å†™æ³• ç»“æœç›¸åŒ\nuser[leo]; // 'leo'\n```\n\n**éœ€è¦æ³¨æ„** ï¼šSymbolä½œä¸ºå¯¹è±¡å±æ€§åæ—¶ï¼Œä¸èƒ½ç”¨ç‚¹è¿ç®—ç¬¦ï¼Œå¹¶ä¸”å¿…é¡»æ”¾åœ¨æ–¹æ‹¬å·å†…ã€‚\n```javascript\nlet leo = Symbol();\nlet user = {};\n// ä¸èƒ½ç”¨ç‚¹è¿ç®—\nuser.leo = 'leo';\nuser[leo] ; // undefined\nuser['leo'] ; // 'leo'\n\n// å¿…é¡»æ”¾åœ¨æ–¹æ‹¬å·å†…\nlet user = {\n    [leo] : function (text){\n        console.log(text);\n    }\n}\nuser[leo]('leo'); // 'leo'\n\n// ä¸Šé¢ç­‰ä»·äº æ›´ç®€æ´\nlet user = {\n    [leo](text){\n        console.log(text);\n    }\n}\n```\n**å¸¸å¸¸è¿˜ç”¨äºåˆ›å»ºä¸€ç»„å¸¸é‡ï¼Œä¿è¯æ‰€æœ‰å€¼ä¸ç›¸ç­‰**ï¼š\n```javascript\nlet user = {};\nuser.list = {\n    AAA: Symbol('Leo'),\n    BBB: Symbol('Robin'),\n    CCC: Symbol('Pingan')\n}\n```\n\n## 4. åº”ç”¨ï¼šæ¶ˆé™¤é­”æœ¯å­—ç¬¦ä¸²\n**é­”æœ¯å­—ç¬¦ä¸²**ï¼šæŒ‡ä»£ç ä¸­å¤šæ¬¡å‡ºç°ï¼Œå¼ºè€¦åˆçš„å­—ç¬¦ä¸²æˆ–æ•°å€¼ï¼Œåº”è¯¥é¿å…ï¼Œè€Œä½¿ç”¨å«ä¹‰æ¸…æ™°çš„å˜é‡ä»£æ›¿ã€‚\n```javascript\nfunction fun(name){\n    if(name == 'leo') {\n        console.log('hello');\n    }\n}\nfun('leo');   // 'hello' ä¸ºé­”æœ¯å­—ç¬¦ä¸²\n```\n\nå¸¸ä½¿ç”¨å˜é‡ï¼Œæ¶ˆé™¤é­”æœ¯å­—ç¬¦ä¸²ï¼š\n```javascript\nlet obj = {\n    name: 'leo'\n};\nfunction fun(name){\n    if(name == obj.name){\n        console.log('hello');\n    }\n}\nfun(obj.name); // 'hello'\n```\n\nä½¿ç”¨`Symbol`æ¶ˆé™¤å¼ºè€¦åˆï¼Œä½¿å¾—ä¸éœ€å…³ç³»å…·ä½“çš„å€¼:\n```javascript\nlet obj = {\n    name: Symbol()\n};\nfunction fun (name){\n    if(name == obj.name){\n        console.log('hello');\n    }\n}\nfun(obj.name); // 'hello'\n```\n\n## 5. å±æ€§åéå†\nSymbolä½œä¸ºå±æ€§åéå†ï¼Œä¸å‡ºç°åœ¨`for...in`ã€`for...of`å¾ªç¯ï¼Œä¹Ÿä¸è¢«`Object.keys()`ã€`Object.getOwnPropertyNames()`ã€`JSON.stringify()`è¿”å›ã€‚\n```javascript\nlet leo = Symbol('leo'), robin = Symbol('robin');\nlet user = {\n    [leo]:'18', [robin]:'28'\n}\nfor(let k of Object.values(user)){console.log(k)}\n// æ— è¾“å‡º\n\nlet user = {};\nlet leo = Symbol('leo');\nObject.defineProperty(user, leo, {value: 'hi'});\nfor(let k in user){\n    console.log(k); // æ— è¾“å‡º\n}\nObject.getOwnPropertyNames(user);   // []\nObject.getOwnPropertySymbols(user); // [Symbol(leo)]\n```\n`Object.getOwnPropertySymbols`æ–¹æ³•è¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«å½“å‰å¯¹è±¡æ‰€æœ‰ç”¨åšå±æ€§åçš„Symbolå€¼ã€‚\n```javascript\nlet user = {};\nlet leo = Symbol('leo');\nlet pingan = Symbol('pingan');\nuser[leo] = 'hi leo';\nuser[pingan] = 'hi pingan';\nlet obj = Object.getOwnPropertySymbols(user);\nobj; //  [Symbol(leo), Symbol(pingan)]\n```\n\nå¦å¤–å¯ä»¥ä½¿ç”¨`Reflect.ownKeys`æ–¹æ³•å¯ä»¥è¿”å›æ‰€æœ‰ç±»å‹çš„é”®åï¼ŒåŒ…æ‹¬å¸¸è§„é”®åå’Œ Symbol é”®åã€‚\n```javascript\nlet user = {\n    [Symbol('leo')]: 1,\n    age : 2, \n    address : 3,\n}\nReflect.ownKeys(user); // ['age', 'address',Symbol('leo')]\n```\n\nç”±äºSymbolå€¼ä½œä¸ºåç§°çš„å±æ€§ä¸è¢«å¸¸è§„æ–¹æ³•éå†è·å–ï¼Œå› æ­¤å¸¸ç”¨äºå®šä¹‰å¯¹è±¡çš„ä¸€äº›éç§æœ‰ï¼Œä¸”å†…éƒ¨ä½¿ç”¨çš„æ–¹æ³•ã€‚\n\n## 6. Symbol.for()ã€Symbol.keyFor()\n\n### 6.1 Symbol.for()\n**ç”¨äºé‡å¤ä½¿ç”¨ä¸€ä¸ªSymbolå€¼**ï¼Œæ¥æ”¶ä¸€ä¸ª**å­—ç¬¦ä¸²**ä½œä¸ºå‚æ•°ï¼Œè‹¥å­˜åœ¨ç”¨æ­¤å‚æ•°ä½œä¸ºåç§°çš„Symbolå€¼ï¼Œè¿”å›è¿™ä¸ªSymbolï¼Œå¦åˆ™æ–°å»ºå¹¶è¿”å›ä»¥è¿™ä¸ªå‚æ•°ä¸ºåç§°çš„Symbolå€¼ã€‚\n```javascript\nlet leo = Symbol.for('leo');\nlet pingan = Symbol.for('leo');\nleo === pingan;  // true\n```\n\n`Symbol()` å’Œ `Symbol.for()`åŒºåˆ«ï¼š\n```javascript\nSymbol.for('leo') === Symbol.for('leo'); // true\nSymbol('leo') === Symbol('leo');         // false\n```\n\n### 6.2 Symbol.keyFor()\n**ç”¨äºè¿”å›ä¸€ä¸ªå·²ä½¿ç”¨çš„Symbolç±»å‹çš„key**:\n```javascript\nlet leo = Symbol.for('leo');\nSymbol.keyFor(leo);   //  'leo'\n\nlet leo = Symbol('leo');\nSymbol.keyFor(leo);   //  undefined\n```\n\n## 7. å†…ç½®çš„Symbolå€¼\nES6æä¾›11ä¸ªå†…ç½®çš„Symbolå€¼ï¼ŒæŒ‡å‘è¯­è¨€å†…éƒ¨ä½¿ç”¨çš„æ–¹æ³•ï¼š\n\n### 7.1 Symbol.hasInstance\nå½“å…¶ä»–å¯¹è±¡ä½¿ç”¨`instanceof`è¿ç®—ç¬¦ï¼Œåˆ¤æ–­æ˜¯å¦ä¸ºè¯¥å¯¹è±¡çš„å®ä¾‹æ—¶ï¼Œä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚æ¯”å¦‚ï¼Œ`foo instanceof Foo`åœ¨è¯­è¨€å†…éƒ¨ï¼Œå®é™…è°ƒç”¨çš„æ˜¯`Foo[Symbol.hasInstance](foo)`ã€‚\n```javascript\nclass P {\n    [Symbol.hasInstance](a){\n        return a instanceof Array;\n    }\n}\n[1, 2, 3] instanceof new P(); // true\n```\nPæ˜¯ä¸€ä¸ªç±»ï¼Œnew P()ä¼šè¿”å›ä¸€ä¸ªå®ä¾‹ï¼Œè¯¥å®ä¾‹çš„`Symbol.hasInstance`æ–¹æ³•ï¼Œä¼šåœ¨è¿›è¡Œ`instanceof`è¿ç®—æ—¶è‡ªåŠ¨è°ƒç”¨ï¼Œåˆ¤æ–­å·¦ä¾§çš„è¿ç®—å­æ˜¯å¦ä¸º`Array`çš„å®ä¾‹ã€‚\n\n### 7.2 Symbol.isConcatSpreadable\nå€¼ä¸ºå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¯¥å¯¹è±¡ç”¨äº`Array.prototype.concat()`æ—¶ï¼Œæ˜¯å¦å¯ä»¥å±•å¼€ã€‚\n```javascript\nlet a = ['aa','bb'];\n['cc','dd'].concat(a, 'ee'); \n// ['cc', 'dd', 'aa', 'bb', 'ee']\na[Symbol.isConcatSpreadable]; // undefined\nlet b = ['aa','bb']; \nb[Symbol.isConcatSpreadable] = false; \n['cc','dd'].concat(b, 'ee'); \n// ['cc', 'dd',[ 'aa', 'bb'], 'ee']\n```\n\n### 7.3 Symbol.species\næŒ‡å‘ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œåœ¨åˆ›å»ºè¡ç”Ÿå¯¹è±¡æ—¶ä¼šä½¿ç”¨ï¼Œä½¿ç”¨æ—¶éœ€è¦ç”¨`get`å–å€¼å™¨ã€‚\n```javascript\nclass P extends Array {\n    static get [Symbol.species](){\n        return this;\n    }\n}\n```\nè§£å†³ä¸‹é¢é—®é¢˜ï¼š\n```javascript\n// é—®é¢˜ï¼š  båº”è¯¥æ˜¯ Array çš„å®ä¾‹ï¼Œå®é™…ä¸Šæ˜¯ P çš„å®ä¾‹\nclass P extends Array{}\nlet a = new P(1,2,3);\nlet b = a.map(x => x);\nb instanceof Array; // true\nb instanceof P; // true\n// è§£å†³ï¼š  é€šè¿‡ä½¿ç”¨ Symbol.species\nclass P extends Array {\n  static get [Symbol.species]() { return Array; }\n}\nlet a = new P();\nlet b = a.map(x => x);\nb instanceof P;     // false\nb instanceof Array; // true\n```\n\n### 7.4 Symbol.match\nå½“æ‰§è¡Œ`str.match(myObject)`ï¼Œä¼ å…¥çš„å±æ€§å­˜åœ¨æ—¶ä¼šè°ƒç”¨ï¼Œå¹¶è¿”å›è¯¥æ–¹æ³•çš„è¿”å›å€¼ã€‚\n```javascript\nclass P {\n    [Symbol.match](string){\n        return 'hello world'.indexOf(string);\n    }\n}\n'h'.match(new P());   // 0\n```\n\n### 7.5 Symbol.replace\nå½“è¯¥å¯¹è±¡è¢«`String.prototype.replace`æ–¹æ³•è°ƒç”¨æ—¶ï¼Œä¼šè¿”å›è¯¥æ–¹æ³•çš„è¿”å›å€¼ã€‚\n```javascript\nlet a = {};\na[Symbol.replace] = (...s) => console.log(s);\n'Hello'.replace(a , 'World') // [\"Hello\", \"World\"]\n```\n\n### 7.6 Symbol.hasInstance\nå½“è¯¥å¯¹è±¡è¢«`String.prototype.search`æ–¹æ³•è°ƒç”¨æ—¶ï¼Œä¼šè¿”å›è¯¥æ–¹æ³•çš„è¿”å›å€¼ã€‚\n```javascript\nclass P {\n    constructor(val) {\n        this.val = val;\n    }\n    [Symbol.search](s){\n        return s.indexOf(this.val);\n    }\n}\n'hileo'.search(new P('leo')); // 2\n```\n\n### 7.7 Symbol.split\nå½“è¯¥å¯¹è±¡è¢«`String.prototype.split`æ–¹æ³•è°ƒç”¨æ—¶ï¼Œä¼šè¿”å›è¯¥æ–¹æ³•çš„è¿”å›å€¼ã€‚\n```javascript\n// é‡æ–°å®šä¹‰äº†å­—ç¬¦ä¸²å¯¹è±¡çš„splitæ–¹æ³•çš„è¡Œä¸º\nclass P {\n    constructor(val) {\n        this.val = val;\n    }\n    [Symbol.split](s) {\n        let i = s.indexOf(this.val);\n        if(i == -1) return s;\n        return [\n            s.substr(0, i),\n            s.substr(i + this.val.length)\n        ]\n    }\n}\n'helloworld'.split(new P('hello')); // [\"hello\", \"\"]\n'helloworld'.split(new P('world')); // [\"\", \"world\"] \n'helloworld'.split(new P('leo'));   // \"helloworld\"\n```\n\n### 7.8 Symbol.iterator\nå¯¹è±¡è¿›è¡Œ`for...of`å¾ªç¯æ—¶ï¼Œä¼šè°ƒç”¨`Symbol.iterator`æ–¹æ³•ï¼Œè¿”å›è¯¥å¯¹è±¡çš„é»˜è®¤éå†å™¨ã€‚\n```javascript\nclass P {\n    *[Symbol.interator]() {\n        let i = 0;\n        while(this[i] !== undefined ) {\n            yield this[i];\n            ++i;\n        }\n    }\n}\nlet a = new P();\na[0] = 1;\na[1] = 2;\nfor (let k of a){\n    console.log(k);\n}\n```\n\n### 7.9.Symbol.toPrimitive\nè¯¥å¯¹è±¡è¢«è½¬ä¸ºåŸå§‹ç±»å‹çš„å€¼æ—¶ï¼Œä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œè¿”å›è¯¥å¯¹è±¡å¯¹åº”çš„åŸå§‹ç±»å‹å€¼ã€‚è°ƒç”¨æ—¶ï¼Œéœ€è¦æ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°ï¼Œè¡¨ç¤ºå½“å‰è¿ç®—æ¨¡å¼ï¼Œè¿ç®—æ¨¡å¼æœ‰ï¼š\n\n   - Number : æ­¤æ—¶éœ€è¦è½¬æ¢æˆæ•°å€¼\n   - String : æ­¤æ—¶éœ€è¦è½¬æ¢æˆå­—ç¬¦ä¸²\n   - Default : æ­¤æ—¶å¯ä»¥è½¬æ¢æˆæ•°å€¼æˆ–å­—ç¬¦ä¸²\n```javascript\nlet obj = {\n  [Symbol.toPrimitive](hint) {\n    switch (hint) {\n      case 'number':\n        return 123;\n      case 'string':\n        return 'str';\n      case 'default':\n        return 'default';\n      default:\n        throw new Error();\n     }\n   }\n};\n2 * obj // 246\n3 + obj // '3default'\nobj == 'default' // true\nString(obj) // 'str'\n```\n\n### 7.10 Symbol.toStringTag\nåœ¨è¯¥å¯¹è±¡ä¸Šé¢è°ƒç”¨`Object.prototype.toString`æ–¹æ³•æ—¶ï¼Œå¦‚æœè¿™ä¸ªå±æ€§å­˜åœ¨ï¼Œå®ƒçš„è¿”å›å€¼ä¼šå‡ºç°åœ¨`toString`æ–¹æ³•è¿”å›çš„å­—ç¬¦ä¸²ä¹‹ä¸­ï¼Œè¡¨ç¤ºå¯¹è±¡çš„ç±»å‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªå±æ€§å¯ä»¥ç”¨æ¥å®šåˆ¶`[object Object`]æˆ–`[object Array]`ä¸­`object`åé¢çš„é‚£ä¸ªå­—ç¬¦ä¸²ã€‚\n```javascript\n// ä¾‹ä¸€\n({[Symbol.toStringTag]: 'Foo'}.toString())\n// \"[object Foo]\"\n// ä¾‹äºŒ\nclass Collection {\n  get [Symbol.toStringTag]() {\n    return 'xxx';\n  }\n}\nlet x = new Collection();\nObject.prototype.toString.call(x) // \"[object xxx]\"\n```\n\n### 7.11 Symbol.unscopables\nè¯¥å¯¹è±¡æŒ‡å®šäº†ä½¿ç”¨withå…³é”®å­—æ—¶ï¼Œå“ªäº›å±æ€§ä¼šè¢«withç¯å¢ƒæ’é™¤ã€‚\n```javascript\n// æ²¡æœ‰ unscopables æ—¶\nclass MyClass {\n  foo() { return 1; }\n}\nvar foo = function () { return 2; };\nwith (MyClass.prototype) {\n  foo(); // 1\n}\n// æœ‰ unscopables æ—¶\nclass MyClass {\n  foo() { return 1; }\n  get [Symbol.unscopables]() {\n    return { foo: true };\n  }\n}\nvar foo = function () { return 2; };\nwith (MyClass.prototype) {\n  foo(); // 2\n}\n```\nä¸Šé¢ä»£ç é€šè¿‡æŒ‡å®š`Symbol.unscopables`å±æ€§ï¼Œä½¿å¾—`with`è¯­æ³•å—ä¸ä¼šåœ¨å½“å‰ä½œç”¨åŸŸå¯»æ‰¾`foo`å±æ€§ï¼Œå³`foo`å°†æŒ‡å‘å¤–å±‚ä½œç”¨åŸŸçš„å˜é‡ã€‚\n\n# å…«ã€åŸå§‹å€¼è½¬æ¢\nå‰é¢å¤ä¹ åˆ°å­—ç¬¦ä¸²ã€æ•°å€¼ã€å¸ƒå°”å€¼ç­‰çš„è½¬æ¢ï¼Œä½†æ˜¯æ²¡æœ‰è®²åˆ°å¯¹è±¡çš„è½¬æ¢è§„åˆ™ï¼Œè¿™éƒ¨åˆ†å°±ä¸€èµ·çœ‹çœ‹ï¼šã€‚\néœ€è¦è®°ä½å‡ ä¸ªè§„åˆ™ï¼š\n\n1. æ‰€æœ‰å¯¹è±¡åœ¨å¸ƒå°”ä¸Šä¸‹æ–‡ä¸­éƒ½ä¸º `true` ï¼Œå¹¶ä¸”ä¸å­˜åœ¨è½¬æ¢ä¸ºå¸ƒå°”å€¼çš„æ“ä½œï¼Œåªæœ‰å­—ç¬¦ä¸²å’Œæ•°å€¼è½¬æ¢æœ‰ã€‚\n1. æ•°å€¼è½¬æ¢å‘ç”Ÿåœ¨å¯¹è±¡ç›¸å‡æˆ–åº”ç”¨æ•°å­¦å‡½æ•°æ—¶ã€‚å¦‚ `Date` å¯¹è±¡å¯ä»¥ç›¸å‡ï¼Œå¦‚ `date1 - date2` ç»“æœä¸ºä¸¤ä¸ªæ—¶é—´çš„å·®å€¼ã€‚\n1. åœ¨å­—ç¬¦ä¸²è½¬æ¢ï¼Œé€šå¸¸å‡ºç°åœ¨å¦‚ `alert(obj)` è¿™ç§å½¢å¼ã€‚\n\nå½“ç„¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç‰¹æ®Šçš„å¯¹è±¡æ–¹æ³•ï¼Œå¯¹å­—ç¬¦ä¸²å’Œæ•°å€¼è½¬æ¢è¿›è¡Œå¾®è°ƒã€‚ä¸‹é¢ä»‹ç»ä¸‰ä¸ªç±»å‹ï¼ˆhintï¼‰è½¬æ¢æƒ…å†µï¼š\n\n## 1. object to string\nå¯¹è±¡åˆ°å­—ç¬¦ä¸²çš„è½¬æ¢ï¼Œå½“æˆ‘ä»¬å¯¹æœŸæœ›ä¸€ä¸ªå­—ç¬¦ä¸²çš„å¯¹è±¡æ‰§è¡Œæ“ä½œæ—¶ï¼Œå¦‚ â€œalertâ€ï¼š\n```javascript\n// è¾“å‡º\nalert(obj);\n// å°†å¯¹è±¡ä½œä¸ºå±æ€§é”®\nanotherObj[obj] = 123;\n```\n\n## 2. object to number\nå¯¹è±¡åˆ°æ•°å­—çš„è½¬æ¢ï¼Œä¾‹å¦‚å½“æˆ‘ä»¬è¿›è¡Œæ•°å­¦è¿ç®—æ—¶ï¼š\n```javascript\n// æ˜¾å¼è½¬æ¢\nlet num = Number(obj);\n// æ•°å­¦è¿ç®—ï¼ˆé™¤äº†äºŒè¿›åˆ¶åŠ æ³•ï¼‰\nlet n = +obj; // ä¸€å…ƒåŠ æ³•\nlet delta = date1 - date2;\n// å°äº/å¤§äºçš„æ¯”è¾ƒ\nlet greater = user1 > user2;\n```\n\n## 3. object to default\nå°‘æ•°æƒ…å†µä¸‹ï¼Œ**å½“è¿ç®—ç¬¦â€œä¸ç¡®å®šâ€æœŸæœ›å€¼ç±»å‹æ—¶**ã€‚\nä¾‹å¦‚ï¼ŒäºŒè¿›åˆ¶åŠ æ³• `+` å¯ç”¨äºå­—ç¬¦ä¸²ï¼ˆè¿æ¥ï¼‰ï¼Œä¹Ÿå¯ä»¥ç”¨äºæ•°å­—ï¼ˆç›¸åŠ ï¼‰ï¼Œæ‰€ä»¥å­—ç¬¦ä¸²å’Œæ•°å­—è¿™ä¸¤ç§ç±»å‹éƒ½å¯ä»¥ã€‚å› æ­¤ï¼Œå½“äºŒå…ƒåŠ æ³•å¾—åˆ°å¯¹è±¡ç±»å‹çš„å‚æ•°æ—¶ï¼Œå®ƒå°†ä¾æ® `\"default\"` æ¥å¯¹å…¶è¿›è¡Œè½¬æ¢ã€‚\næ­¤å¤–ï¼Œå¦‚æœå¯¹è±¡è¢«ç”¨äºä¸å­—ç¬¦ä¸²ã€æ•°å­—æˆ– symbol è¿›è¡Œ `==` æ¯”è¾ƒï¼Œè¿™æ—¶åˆ°åº•åº”è¯¥è¿›è¡Œå“ªç§è½¬æ¢ä¹Ÿä¸æ˜¯å¾ˆæ˜ç¡®ï¼Œå› æ­¤ä½¿ç”¨ `\"default\"` ã€‚\n```javascript\n// äºŒå…ƒåŠ æ³•ä½¿ç”¨é»˜è®¤ hint\nlet total = obj1 + obj2;\n// obj == number ä½¿ç”¨é»˜è®¤ hint\nif (user == 1) { ... };\n```\n\n## 4. ç±»å‹è½¬æ¢ç®—æ³•\n**ä¸ºäº†è¿›è¡Œè½¬æ¢ï¼ŒJavaScript å°è¯•æŸ¥æ‰¾å¹¶è°ƒç”¨ä¸‰ä¸ªå¯¹è±¡æ–¹æ³•ï¼š**\n\n1. è°ƒç”¨ `obj[Symbol.toPrimitive](hint)` â€”â€” å¸¦æœ‰ symbol é”® `Symbol.toPrimitive`ï¼ˆç³»ç»Ÿ symbolï¼‰çš„æ–¹æ³•ï¼Œå¦‚æœè¿™ä¸ªæ–¹æ³•å­˜åœ¨çš„è¯ï¼Œ\n1. å¦åˆ™ï¼Œå¦‚æœ hint æ˜¯ `\"string\"` â€”â€” å°è¯• `obj.toString()` å’Œ `obj.valueOf()`ï¼Œæ— è®ºå“ªä¸ªå­˜åœ¨ã€‚\n1. å¦åˆ™ï¼Œå¦‚æœ hint æ˜¯ `\"number\"` æˆ– `\"default\"` â€”â€” å°è¯• `obj.valueOf()` å’Œ `obj.toString()`ï¼Œæ— è®ºå“ªä¸ªå­˜åœ¨ã€‚\n\n## 5. Symbol.toPrimitive\nè¯¦ç»†ä»‹ç»å¯é˜…è¯»[ã€ŠMDN | Symbol.toPrimitiveã€‹](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol/toPrimitive) ã€‚\n`Symbol.toPrimitive` æ˜¯ä¸€ä¸ªå†…ç½®çš„ Symbol å€¼ï¼Œå®ƒæ˜¯ä½œä¸ºå¯¹è±¡çš„å‡½æ•°å€¼å±æ€§å­˜åœ¨çš„ï¼Œå½“ä¸€ä¸ªå¯¹è±¡è½¬æ¢ä¸ºå¯¹åº”çš„åŸå§‹å€¼æ—¶ï¼Œä¼šè°ƒç”¨æ­¤å‡½æ•°ã€‚\nç®€å•ç¤ºä¾‹ä»‹ç»ï¼š\n```javascript\nlet user = {\n  name: \"Leo\",\n  money: 9999,\n\n  [Symbol.toPrimitive](hint) {\n    console.log(`hint: ${hint}`);\n    return hint == \"string\" ? `{name: \"${this.name}\"}` : this.money;\n  }\n};\n\nalert(user);     // æ§åˆ¶å°ï¼šhint: string å¼¹æ¡†ï¼š{name: \"John\"}\nalert(+user);    // æ§åˆ¶å°ï¼šhint: number å¼¹æ¡†ï¼š9999\nalert(user + 1); // æ§åˆ¶å°ï¼šhint: default å¼¹æ¡†ï¼š10000\n```\n\n## 6. toString/valueOf\n[`toString`](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/toString) / `valueOf` æ˜¯ä¸¤ä¸ªæ¯”è¾ƒæ—©æœŸçš„å®ç°è½¬æ¢çš„æ–¹æ³•ã€‚å½“æ²¡æœ‰ `Symbol.toPrimitive` ï¼Œé‚£ä¹ˆ JavaScript å°†å°è¯•æ‰¾åˆ°å®ƒä»¬ï¼Œå¹¶ä¸”æŒ‰ç…§ä¸‹é¢çš„é¡ºåºè¿›è¡Œå°è¯•ï¼š\n\n- å¯¹äº â€œstringâ€ hintï¼Œ`toString -> valueOf`ã€‚\n- å…¶ä»–æƒ…å†µï¼Œ`valueOf -> toString`ã€‚\n\nè¿™ä¸¤ä¸ªæ–¹æ³•å¿…é¡»è¿”å›ä¸€ä¸ªåŸå§‹å€¼ã€‚å¦‚æœ `toString` æˆ– `valueOf` è¿”å›äº†ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆè¿”å›å€¼ä¼šè¢«å¿½ç•¥ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ™®é€šå¯¹è±¡å…·æœ‰ `toString` å’Œ `valueOf` æ–¹æ³•ï¼š\n\n- `toString` æ–¹æ³•è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸² `\"[object Object]\"`ã€‚\n- `valueOf` æ–¹æ³•è¿”å›å¯¹è±¡è‡ªèº«ã€‚\n\nç®€å•ç¤ºä¾‹ä»‹ç»ï¼š\n```javascript\nconst user = {name: \"Leo\"};\n\nalert(user); // [object Object]\nalert(user.valueOf() === user); // true\n```\n\næˆ‘ä»¬ä¹Ÿå¯ä»¥ç»“åˆ `toString` / `valueOf` Â å®ç°å‰é¢ç¬¬ 5 ç‚¹ä»‹ç»çš„ `user` å¯¹è±¡ï¼š\n```javascript\nlet user = {\n  name: \"Leo\",\n  money: 9999,\n\n  // å¯¹äº hint=\"string\"\n  toString() {\n    return `{name: \"${this.name}\"}`;\n  },\n\n  // å¯¹äº hint=\"number\" æˆ– \"default\"\n  valueOf() {\n    return this.money;\n  }\n\n};\n\nalert(user);     // æ§åˆ¶å°ï¼šhint: string å¼¹æ¡†ï¼š{name: \"John\"}\nalert(+user);    // æ§åˆ¶å°ï¼šhint: number å¼¹æ¡†ï¼š9999\nalert(user + 1); // æ§åˆ¶å°ï¼šhint: default å¼¹æ¡†ï¼š10000\n```\n\n# æ€»ç»“\næœ¬æ–‡ä½œä¸ºã€Šåˆä¸­çº§å‰ç«¯ JavaScript è‡ªæµ‹æ¸…å•ã€‹ç¬¬äºŒéƒ¨åˆ†ï¼Œä»‹ç»çš„å†…å®¹ä»¥ JavaScript å¯¹è±¡ä¸ºä¸»ï¼Œå…¶ä¸­æœ‰è®©æˆ‘çœ¼å‰ä¸€äº®çš„çŸ¥è¯†ç‚¹ï¼Œå¦‚ `Symbol.toPrimitive`Â æ–¹æ³•ã€‚æˆ‘ä¹Ÿå¸Œæœ›è¿™ä¸ªæ¸…å•èƒ½å¸®åŠ©å¤§å®¶è‡ªæµ‹è‡ªå·±çš„ JavaScript æ°´å¹³å¹¶æŸ¥ç¼ºè¡¥æ¼ï¼Œæ¸©æ•…çŸ¥æ–°ã€‚\n", "user_name": "pingan8787", "description": "Leo , love coding , love life ~ğŸ“£ã€Œå‰ç«¯è‡ªä¹ è¯¾ã€å…¬ä¼—å·", "got_view_count": 222862, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "JavaScript", "concern_user_count": 343215, "user_id": "2858385961407853", "title": "åœ¨Vueä¸­ä½¿ç”¨è£…é¥°å™¨ï¼Œæˆ‘æ˜¯è®¤çœŸçš„", "mark_content": "> äº§å“ä¸Šçº¿äº‹ç¹å¤šï¼Œæµ‹è¯•äº§å“å‚¬ä¸ç¦»ã€‚\n> ä¼‘é—®Bugå‰©å¤šå°‘ï¼Œçœ¼åœˆå¦‚æ¼†èº«å¦‚æ³¥ã€‚\n\nä½œä¸ºä¸€ä¸ªæ›¾ç»çš„`Java coder`, å½“æˆ‘ç¬¬ä¸€æ¬¡çœ‹åˆ°`js`é‡Œé¢çš„è£…é¥°å™¨(`Decorator`)çš„æ—¶å€™ï¼Œå°±é©¬ä¸Šæƒ³åˆ°äº†`Java`ä¸­çš„æ³¨è§£ï¼Œå½“ç„¶åœ¨å®é™…åŸç†å’ŒåŠŸèƒ½ä¸Šé¢ï¼Œ`Java`çš„æ³¨è§£å’Œ`js`çš„è£…é¥°å™¨è¿˜æ˜¯æœ‰å¾ˆå¤§å·®åˆ«çš„ã€‚æœ¬æ–‡é¢˜ç›®æ˜¯`Vueä¸­ä½¿ç”¨è£…é¥°å™¨ï¼Œæˆ‘æ˜¯è®¤çœŸçš„`ï¼Œä½†æœ¬æ–‡å°†ä»è£…é¥°å™¨çš„æ¦‚å¿µå¼€å‘èŠèµ·ï¼Œä¸€èµ·æ¥çœ‹çœ‹å§ã€‚\n\né€šè¿‡æœ¬æ–‡å†…å®¹ï¼Œä½ å°†å­¦åˆ°ä»¥ä¸‹å†…å®¹:\n\n1. äº†è§£ä»€ä¹ˆæ˜¯è£…é¥°å™¨\n2. åœ¨æ–¹æ³•ä½¿ç”¨è£…é¥°å™¨\n3. åœ¨`class`ä¸­ä½¿ç”¨è£…é¥°å™¨\n4. åœ¨`Vue`ä¸­ä½¿ç”¨è£…é¥°å™¨\n\n> æœ¬æ–‡é¦–å‘äºå…¬ä¼—å·ã€å‰ç«¯æœ‰çš„ç©ã€‘ï¼Œä¸æƒ³å½“å’¸é±¼ï¼Œæƒ³è¦æ¢å·¥ä½œï¼Œå…³æ³¨å…¬ä¼—å·ï¼Œå¸¦ä½ æ¯æ—¥ä¸€èµ·åˆ·å¤§å‚é¢è¯•é¢˜ï¼Œå…³æ³¨ `=== `å¤§å‚`offer`ã€‚\n\n## ä»€ä¹ˆæ˜¯è£…é¥°å™¨\n\nè£…é¥°å™¨æ˜¯`ES2016`æå‡ºæ¥çš„ä¸€ä¸ªææ¡ˆï¼Œå½“å‰å¤„äº`Stage 2`é˜¶æ®µï¼Œå…³äºè£…é¥°å™¨çš„ä½“éªŒï¼Œå¯ä»¥ç‚¹å‡» [https://github.com/tc39/proposal-decorators](https://github.com/tc39/proposal-decorators)æŸ¥çœ‹è¯¦æƒ…ã€‚è£…é¥°å™¨æ˜¯ä¸€ç§ä¸ç±»ç›¸å…³çš„è¯­æ³•ç³–ï¼Œç”¨æ¥åŒ…è£…æˆ–è€…ä¿®æ”¹ç±»æˆ–è€…ç±»çš„æ–¹æ³•çš„è¡Œä¸ºï¼Œå…¶å®è£…é¥°å™¨å°±æ˜¯è®¾è®¡æ¨¡å¼ä¸­è£…é¥°è€…æ¨¡å¼çš„ä¸€ç§å®ç°æ–¹å¼ã€‚ä¸è¿‡å‰é¢è¯´çš„è¿™äº›æ¦‚å¿µå¤ªå¹²äº†ï¼Œæˆ‘ä»¬ç”¨äººè¯æ¥ç¿»è¯‘ä¸€ä¸‹ï¼Œä¸¾ä¸€ä¸ªä¾‹å­ã€‚\n\nåœ¨æ—¥å¸¸å¼€å‘å†™`bug`è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šç”¨åˆ°é˜²æŠ–å’ŒèŠ‚æµï¼Œæ¯”å¦‚åƒä¸‹é¢è¿™æ ·\n\n```javascript\nclass MyClass {\n  follow = debounce(function() {\n    console.log('æˆ‘æ˜¯å­å›ï¼Œå…³æ³¨æˆ‘å“¦')\n  }, 100)\n}\n\nconst myClass = new MyClass()\n// å¤šæ¬¡è°ƒç”¨åªä¼šè¾“å‡ºä¸€æ¬¡\nmyClass.follow()\nmyClass.follow()\n```\n\nä¸Šé¢æ˜¯ä¸€ä¸ªé˜²æŠ–çš„ä¾‹å­ï¼Œæˆ‘ä»¬é€šè¿‡`debounce`å‡½æ•°å°†å¦ä¸€ä¸ªå‡½æ•°åŒ…èµ·æ¥ï¼Œå®ç°äº†é˜²æŠ–çš„åŠŸèƒ½ï¼Œè¿™æ—¶å€™å†æœ‰å¦ä¸€ä¸ªéœ€æ±‚ï¼Œæ¯”å¦‚å¸Œæœ›åœ¨è°ƒç”¨`follow`å‡½æ•°å‰åå„æ‰“å°ä¸€æ®µæ—¥å¿—ï¼Œè¿™æ—¶å€™æˆ‘ä»¬è¿˜å¯ä»¥å†å¼€å‘ä¸€ä¸ª`log`å‡½æ•°ï¼Œç„¶åç»§ç»­å°†`follow`åŒ…è£…èµ·æ¥\n\n```javascript\n/**\n * æœ€å¤–å±‚æ˜¯é˜²æŠ–ï¼Œå¦åˆ™logä¼šè¢«è°ƒç”¨å¤šæ¬¡\n */\nclass MyClass {\n  follow = debounce(\n    log(function() {\n      console.log('æˆ‘æ˜¯å­å›ï¼Œå…³æ³¨æˆ‘å“¦')\n    }),\n    100\n  )\n}\n```\n\nä¸Šé¢ä»£ç ä¸­çš„`debounce`å’Œ`log`ä¸¤ä¸ªå‡½æ•°ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸¤ä¸ªåŒ…è£…å‡½æ•°ï¼Œé€šè¿‡è¿™ä¸¤ä¸ªå‡½æ•°å¯¹åŸå‡½æ•°çš„åŒ…è£…ï¼Œä½¿åŸå‡½æ•°çš„è¡Œä¸ºå‘ç”Ÿäº†å˜åŒ–ï¼Œè€Œ`js`ä¸­çš„è£…é¥°å™¨çš„åŸç†å°±æ˜¯è¿™æ ·çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨è£…é¥°å™¨å¯¹ä¸Šé¢çš„ä»£ç è¿›è¡Œæ”¹é€ \n\n```javascript\nclass MyClass {\n  @debounce(100)\n  @log\n  follow() {\n    console.log('æˆ‘æ˜¯å­å›ï¼Œå…³æ³¨æˆ‘å“¦')\n  }\n}\n```\n\nè£…é¥°å™¨çš„å½¢å¼å°±æ˜¯ `@ + å‡½æ•°å`ï¼Œå¦‚æœæœ‰å‚æ•°çš„è¯ï¼Œåé¢çš„æ‹¬å·é‡Œé¢å¯ä»¥ä¼ å‚\n\n## åœ¨æ–¹æ³•ä¸Šä½¿ç”¨è£…é¥°å™¨\n\nè£…é¥°å™¨å¯ä»¥åº”ç”¨åˆ°`class`ä¸Šæˆ–è€…`class`é‡Œé¢çš„å±æ€§ä¸Šé¢ï¼Œä½†ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåº”ç”¨åˆ°`class`å±æ€§ä¸Šé¢çš„åœºæ™¯ä¼šæ¯”è¾ƒå¤šä¸€äº›ï¼Œæ¯”å¦‚åƒä¸Šé¢æˆ‘ä»¬è¯´çš„`log`,`debounce`ç­‰ç­‰ï¼Œéƒ½ä¸€èˆ¬ä¼šåº”ç”¨åˆ°ç±»å±æ€§ä¸Šé¢ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä¸€èµ·æ¥å…·ä½“çœ‹ä¸€ä¸‹å¦‚ä½•å®ç°ä¸€ä¸ªè£…é¥°å™¨ï¼Œå¹¶åº”ç”¨åˆ°ç±»ä¸Šé¢ã€‚åœ¨å®ç°è£…é¥°å™¨ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆäº†è§£ä¸€ä¸‹å±æ€§æè¿°ç¬¦\n\n### äº†è§£ä¸€ä¸‹å±æ€§æè¿°ç¬¦\n\nåœ¨æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå¯¹è±¡é‡Œé¢çš„å±æ€§çš„æ—¶å€™ï¼Œå…¶å®è¿™ä¸ªå±æ€§ä¸Šé¢æ˜¯æœ‰è®¸å¤šå±æ€§æè¿°ç¬¦çš„ï¼Œè¿™äº›æè¿°ç¬¦æ ‡æ˜äº†è¿™ä¸ªå±æ€§èƒ½ä¸èƒ½ä¿®æ”¹ï¼Œèƒ½ä¸èƒ½æšä¸¾ï¼Œèƒ½ä¸èƒ½åˆ é™¤ç­‰ç­‰ï¼ŒåŒæ—¶`ECMAScript`å°†è¿™äº›å±æ€§æè¿°ç¬¦åˆ†ä¸ºä¸¤ç±»ï¼Œåˆ†åˆ«æ˜¯æ•°æ®å±æ€§å’Œè®¿é—®å™¨å±æ€§ï¼Œå¹¶ä¸”æ•°æ®å±æ€§ä¸è®¿é—®å™¨å±æ€§æ˜¯ä¸èƒ½å…±å­˜çš„ã€‚\n\n#### æ•°æ®å±æ€§\n\næ•°æ®å±æ€§åŒ…å«ä¸€ä¸ªæ•°æ®å€¼çš„ä½ç½®ï¼Œåœ¨è¿™ä¸ªä½ç½®å¯ä»¥è¯»å–å’Œå†™å…¥å€¼ã€‚æ•°æ®å±æ€§åŒ…å«äº†å››ä¸ªæè¿°ç¬¦ï¼Œåˆ†åˆ«æ˜¯\n\n1. `configurable`\n\n   è¡¨ç¤ºèƒ½ä¸èƒ½é€šè¿‡`delete`åˆ é™¤å±æ€§ï¼Œèƒ½å¦ä¿®æ”¹å±æ€§çš„å…¶ä»–æè¿°ç¬¦ç‰¹æ€§ï¼Œæˆ–è€…èƒ½å¦å°†æ•°æ®å±æ€§ä¿®æ”¹ä¸ºè®¿é—®å™¨å±æ€§ã€‚å½“æˆ‘ä»¬é€šè¿‡`let obj = {name: ''}`å£°æ˜ä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œè¿™ä¸ªå¯¹è±¡é‡Œé¢æ‰€æœ‰çš„å±æ€§çš„`configurable`æè¿°ç¬¦çš„å€¼éƒ½æ˜¯`true`\n\n2. `enumerable`\n\n   è¡¨ç¤ºèƒ½ä¸èƒ½é€šè¿‡`for in`æˆ–è€…`Object.keys`ç­‰æ–¹å¼è·å–åˆ°å±æ€§ï¼Œæˆ‘ä»¬ä¸€èˆ¬å£°æ˜çš„å¯¹è±¡é‡Œé¢è¿™ä¸ªæè¿°ç¬¦çš„å€¼æ˜¯`true`,ä½†æ˜¯å¯¹äº`class`ç±»é‡Œé¢çš„å±æ€§æ¥è¯´ï¼Œè¿™ä¸ªå€¼æ˜¯`false`\n\n3. `writable`\n\n   è¡¨ç¤ºèƒ½å¦ä¿®æ”¹å±æ€§çš„æ•°æ®å€¼ï¼Œé€šè¿‡å°†è¿™ä¸ªä¿®æ”¹ä¸º`false`,å¯ä»¥å®ç°å±æ€§åªè¯»çš„æ•ˆæœã€‚\n\n4. `value`\n\n   è¡¨ç¤ºå½“å‰å±æ€§çš„æ•°æ®å€¼ï¼Œè¯»å–å±æ€§å€¼çš„æ—¶å€™ï¼Œä»è¿™é‡Œè¯»å–ï¼›å†™å…¥å±æ€§å€¼çš„æ—¶å€™ï¼Œä¼šå†™åˆ°è¿™ä¸ªä½ç½®ã€‚\n\n#### è®¿é—®å™¨å±æ€§\n\nè®¿é—®å™¨å±æ€§ä¸åŒ…å«æ•°æ®å€¼ï¼Œä»–ä»¬åŒ…å«äº†`getter`ä¸`setter`ä¸¤ä¸ªå‡½æ•°ï¼ŒåŒæ—¶`configurable`ä¸`enumerable`æ˜¯æ•°æ®å±æ€§ä¸è®¿é—®å™¨å±æ€§å…±æœ‰çš„ä¸¤ä¸ªæè¿°ç¬¦ã€‚\n\n1. `getter`\n\n   åœ¨è¯»å–å±æ€§çš„æ—¶å€™è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œé»˜è®¤è¿™ä¸ªå‡½æ•°ä¸º`undefined`\n\n2. `setter`\n\n   åœ¨å†™å…¥å±æ€§å€¼çš„æ—¶å€™è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œé»˜è®¤è¿™ä¸ªå‡½æ•°ä¸º`undefined`\n\näº†è§£äº†è¿™å…­ä¸ªæè¿°ç¬¦ä¹‹åï¼Œä½ å¯èƒ½ä¼šæœ‰å‡ ä¸ªç–‘é—®ï¼š æˆ‘å¦‚ä½•å»å®šä¹‰ä¿®æ”¹è¿™äº›å±æ€§æè¿°ç¬¦ï¼Ÿè¿™äº›å±æ€§æè¿°ç¬¦ä¸ä»Šå¤©çš„æ–‡ç« ä¸»é¢˜æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿæ¥ä¸‹æ¥æ˜¯æ­æ™“ç­”æ¡ˆçš„æ—¶å€™äº†ã€‚\n\n### ä½¿ç”¨`Object.defineProperty`\n\näº†è§£è¿‡`vue2.0`åŒå‘ç»‘å®šåŸç†çš„åŒå­¦ä¸€å®šçŸ¥é“ï¼Œ`Vue`çš„åŒå‘ç»‘å®šå°±æ˜¯é€šè¿‡ä½¿ç”¨`Object.defineProperty`å»å®šä¹‰æ•°æ®å±æ€§çš„`getter`ä¸`setter`æ–¹æ³•æ¥å®ç°çš„ï¼Œæ¯”å¦‚ä¸‹é¢æœ‰ä¸€ä¸ªå¯¹è±¡\n\n```javascript\nlet obj = {\n  name: 'å­å›',\n  officialAccounts: 'å‰ç«¯æœ‰çš„ç©'\n}\n```\n\næˆ‘å¸Œæœ›è¿™ä¸ªå¯¹è±¡é‡Œé¢çš„ç”¨æˆ·åæ˜¯ä¸èƒ½è¢«ä¿®æ”¹çš„ï¼Œç”¨`Object.defineProperty`è¯¥å¦‚ä½•å®šä¹‰å‘¢?\n\n```javascript\nObject.defineProperty(obj,'name', {\n  // è®¾ç½®writable æ˜¯ false, è¿™ä¸ªå±æ€§å°†ä¸èƒ½è¢«ä¿®æ”¹\n  writable: false\n})\n// ä¿®æ”¹obj.name\nobj.name = \"å›å­\"\n// æ‰“å°ä¾ç„¶æ˜¯å­å›\nconsole.log(obj.name)\n```\n\né€šè¿‡`Object.defineProperty`å¯ä»¥å»å®šä¹‰æˆ–è€…ä¿®æ”¹å¯¹è±¡å±æ€§çš„å±æ€§æè¿°ç¬¦ï¼Œä½†æ˜¯å› ä¸ºæ•°æ®å±æ€§ä¸è®¿é—®å™¨å±æ€§æ˜¯äº’æ–¥çš„ï¼Œæ‰€ä»¥ä¸€æ¬¡åªèƒ½ä¿®æ”¹å…¶ä¸­çš„ä¸€ç±»ï¼Œè¿™ä¸€ç‚¹éœ€è¦æ³¨æ„ã€‚\n\n### å®šä¹‰ä¸€ä¸ªé˜²æŠ–è£…é¥°å™¨\n\nè£…é¥°å™¨æœ¬è´¨ä¸Šä¾ç„¶æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¸è¿‡è¿™ä¸ªå‡½æ•°çš„å‚æ•°æ˜¯å›ºå®šçš„ï¼Œå¦‚ä¸‹æ˜¯é˜²æŠ–è£…é¥°å™¨çš„ä»£ç \n\n```javascript\n/**\n*@param wait å»¶è¿Ÿæ—¶é•¿\n*/\nfunction debounce(wait) {\n  return function(target, name, descriptor) {\n    descriptor.value = debounce(descriptor.value, wait)\n  }\n}\n// ä½¿ç”¨æ–¹å¼\nclass MyClass {\n  @debounce(100)\n  follow() {\n    console.log('æˆ‘æ˜¯å­å›ï¼Œæˆ‘çš„å…¬ä¼—å·æ˜¯ ã€å‰ç«¯æœ‰çš„ç©ã€‘ï¼Œå…³æ³¨æœ‰æƒŠå–œå“¦')\n  }\n}\n```\n\næˆ‘ä»¬é€è¡Œå»åˆ†æä¸€ä¸‹ä»£ç \n\n1. é¦–å…ˆæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª `debounce`å‡½æ•°ï¼ŒåŒæ—¶æœ‰ä¸€ä¸ªå‚æ•°`wait`ï¼Œè¿™ä¸ªå‡½æ•°å¯¹åº”çš„å°±æ˜¯åœ¨ä¸‹é¢è°ƒç”¨è£…é¥°å™¨æ—¶ä½¿ç”¨çš„`@debounce(100)`\n2. `debounce`å‡½æ•°è¿”å›äº†ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å³è£…é¥°å™¨çš„æ ¸å¿ƒï¼Œè¿™ä¸ªå‡½æ•°æœ‰ä¸‰ä¸ªå‚æ•°ï¼Œä¸‹é¢é€ä¸€åˆ†æ\n   1. `target`: è¿™ä¸ªç±»å±æ€§å‡½æ•°æ˜¯åœ¨è°ä¸Šé¢æŒ‚è½½çš„ï¼Œå¦‚ä¸Šä¾‹å¯¹åº”çš„æ˜¯`MyClass`ç±»\n   2. `name`: è¿™ä¸ªç±»å±æ€§å‡½æ•°çš„åç§°ï¼Œå¯¹åº”ä¸Šé¢çš„`follow`\n   3. `descriptor`: è¿™ä¸ªå°±æ˜¯æˆ‘ä»¬å‰é¢è¯´çš„å±æ€§æè¿°ç¬¦ï¼Œé€šè¿‡ç›´æ¥`descriptor`ä¸Šé¢çš„å±æ€§ï¼Œå³å¯å®ç°å±æ€§åªè¯»ï¼Œæ•°æ®é‡å†™ç­‰åŠŸèƒ½\n3. ç„¶åç¬¬ä¸‰è¡Œ `descriptor.value = debounce(descriptor.value, wait)`, å‰é¢æˆ‘ä»¬å·²ç»äº†è§£åˆ°,å±æ€§æè¿°ç¬¦ä¸Šé¢çš„`value`å¯¹åº”çš„æ˜¯è¿™ä¸ªå±æ€§çš„å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬é€šè¿‡é‡å†™è¿™ä¸ªå±æ€§ï¼Œå°†å…¶ç”¨`debounce`å‡½æ•°åŒ…è£…èµ·æ¥ï¼Œè¿™æ ·åœ¨å‡½æ•°è°ƒç”¨`follow`æ—¶å®é™…è°ƒç”¨çš„æ˜¯åŒ…è£…åçš„å‡½æ•°\n\né€šè¿‡ä¸Šé¢çš„ä¸‰æ­¥ï¼Œæˆ‘ä»¬å°±å®ç°äº†ç±»å±æ€§ä¸Šé¢å¯ä½¿ç”¨çš„è£…é¥°å™¨ï¼ŒåŒæ—¶å°†å…¶åº”ç”¨åˆ°äº†ç±»å±æ€§ä¸Šé¢\n\n## åœ¨`class`ä¸Šä½¿ç”¨è£…é¥°å™¨\n\nè£…é¥°å™¨ä¸ä»…å¯ä»¥åº”ç”¨åˆ°ç±»å±æ€§ä¸Šé¢ï¼Œè¿˜å¯ä»¥ç›´æ¥åº”ç”¨åˆ°ç±»ä¸Šé¢ï¼Œæ¯”å¦‚æˆ‘å¸Œæœ›å¯ä»¥å®ç°ä¸€ä¸ªç±»ä¼¼`Vue`æ··å…¥é‚£æ ·çš„åŠŸèƒ½ï¼Œç»™ä¸€ä¸ªç±»æ··å…¥ä¸€äº›æ–¹æ³•å±æ€§ï¼Œåº”è¯¥å¦‚ä½•å»åšå‘¢?\n\n```javascript\n// è¿™ä¸ªæ˜¯è¦æ··å…¥çš„å¯¹è±¡\nconst methods = {\n  logger() {\n    console.log('è®°å½•æ—¥å¿—')\n  }\n}\n\n// è¿™ä¸ªæ˜¯ä¸€ä¸ªç™»é™†ç™»å‡ºç±»\nclass Login{\n  login() {}\n  logout() {}\n}\n```\n\nå¦‚ä½•å°†ä¸Šé¢çš„`methods`æ··å…¥åˆ°`Login`ä¸­ï¼Œé¦–å…ˆæˆ‘ä»¬å…ˆå®ç°ä¸€ä¸ªç±»è£…é¥°å™¨\n\n```javascript\nfunction mixins(obj) {\n  return function (target) {\n    Object.assign(target.prototype, obj)  \n  }\n}\n\n// ç„¶åé€šè¿‡è£…é¥°å™¨æ··å…¥\n@mixins(methods)\nclass Login{\n  login() {}\n  logout() {}\n}\n\n```\n\nè¿™æ ·å°±å®ç°äº†ç±»è£…é¥°å™¨ã€‚å¯¹äºç±»è£…é¥°å™¨ï¼Œåªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå³`target`,å¯¹åº”çš„å°±æ˜¯è¿™ä¸ªç±»æœ¬èº«ã€‚\n\näº†è§£å®Œè£…é¥°å™¨ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥çœ‹ä¸€ä¸‹å¦‚ä½•åœ¨`Vue`ä¸­ä½¿ç”¨è£…é¥°å™¨ã€‚\n\n## åœ¨`Vue`ä¸­ä½¿ç”¨è£…é¥°å™¨\n\nä½¿ç”¨`ts`å¼€å‘`Vue`çš„åŒå­¦ä¸€å®šå¯¹`vue-property-decorator`ä¸ä¼šæ„Ÿåˆ°é™Œç”Ÿï¼Œè¿™ä¸ªæ’ä»¶æä¾›äº†è®¸å¤šè£…é¥°å™¨ï¼Œæ–¹ä¾¿å¤§å®¶å¼€å‘çš„æ—¶å€™ä½¿ç”¨ï¼Œå½“ç„¶æœ¬æ–‡çš„ä¸­ç‚¹ä¸æ˜¯è¿™ä¸ªæ’ä»¶ã€‚å…¶å®å¦‚æœæˆ‘ä»¬çš„é¡¹ç›®æ²¡æœ‰ä½¿ç”¨`ts`ï¼Œä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨è£…é¥°å™¨çš„ï¼Œæ€ä¹ˆç”¨å‘¢ï¼Ÿ\n\n### é…ç½®åŸºç¡€ç¯å¢ƒ\n\né™¤äº†ä¸€äº›è€çš„é¡¹ç›®ï¼Œæˆ‘ä»¬ç°åœ¨ä¸€èˆ¬æ–°å»º`Vue`é¡¹ç›®çš„æ—¶å€™ï¼Œéƒ½ä¼šé€‰æ‹©ä½¿ç”¨è„šæ‰‹æ¶`vue-cli3/4`æ¥æ–°å»ºï¼Œè¿™æ—¶å€™æ–°å»ºçš„é¡¹ç›®å·²ç»é»˜è®¤æ”¯æŒäº†è£…é¥°å™¨ï¼Œä¸éœ€è¦å†é…ç½®å¤ªå¤šé¢å¤–çš„ä¸œè¥¿ï¼Œå¦‚æœä½ çš„é¡¹ç›®ä½¿ç”¨äº†`eslint`,é‚£ä¹ˆéœ€è¦ç»™`eslint`é…ç½®ä»¥ä¸‹å†…å®¹ã€‚\n\n```javascript\n  parserOptions: {\n    ecmaFeatures:{\n      // æ”¯æŒè£…é¥°å™¨\n      legacyDecorators: true\n    }\n  }\n```\n\n### ä½¿ç”¨è£…é¥°å™¨\n\nè™½ç„¶`Vue`çš„ç»„ä»¶ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¹¦å†™çš„æ—¶å€™`export`å‡ºå»çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯è¿™ä¸ªå¹¶ä¸å½±å“æˆ‘ä»¬ç›´æ¥åœ¨ç»„ä»¶ä¸­ä½¿ç”¨è£…é¥°å™¨ï¼Œæ¯”å¦‚å°±æ‹¿ä¸Šä¾‹ä¸­çš„`log`ä¸¾ä¾‹ã€‚\n\n```javascript\nfunction log() {\n  /**\n   * @param target å¯¹åº” methods è¿™ä¸ªå¯¹è±¡\n   * @param name å¯¹åº”å±æ€§æ–¹æ³•çš„åç§°\n   * @param descriptor å¯¹åº”å±æ€§æ–¹æ³•çš„ä¿®é¥°ç¬¦\n   */\n  return function(target, name, descriptor) {\n    console.log(target, name, descriptor)\n    const fn = descriptor.value\n    descriptor.value = function(...rest) {\n      console.log(`è¿™æ˜¯è°ƒç”¨æ–¹æ³•ã€${name}ã€‘å‰æ‰“å°çš„æ—¥å¿—`)\n      fn.call(this, ...rest)\n      console.log(`è¿™æ˜¯è°ƒç”¨æ–¹æ³•ã€${name}ã€‘åæ‰“å°çš„æ—¥å¿—`)\n    }\n  }\n}\n\nexport default {\n  created() {\n    this.getData()\n  },\n  methods: {\n    @log()\n    getData() {\n      console.log('è·å–æ•°æ®')\n    }\n  }\n}\n```\n\nçœ‹äº†ä¸Šé¢çš„ä»£ç ï¼Œæ˜¯ä¸æ˜¯å‘ç°åœ¨`Vue`ä¸­ä½¿ç”¨è£…é¥°å™¨è¿˜æ˜¯å¾ˆç®€å•çš„ï¼Œå’Œåœ¨`class`çš„å±æ€§ä¸Šé¢ä½¿ç”¨çš„æ–¹å¼ä¸€æ¨¡ä¸€æ ·ï¼Œä½†æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œåœ¨`methods`é‡Œé¢çš„æ–¹æ³•ä¸Šé¢ä½¿ç”¨è£…é¥°å™¨ï¼Œè¿™æ—¶å€™è£…é¥°å™¨çš„`target`å¯¹åº”çš„æ˜¯`methods`ã€‚\n\né™¤äº†åœ¨`methods`ä¸Šé¢å¯ä»¥ä½¿ç”¨è£…é¥°å™¨ä¹‹å¤–ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ä¸Šé¢ä½¿ç”¨è£…é¥°å™¨ï¼Œè¿™æ—¶å€™`target`å¯¹åº”çš„æ˜¯æ•´ä¸ªç»„ä»¶å¯¹è±¡ã€‚\n\n### ä¸€äº›å¸¸ç”¨çš„è£…é¥°å™¨\n\nä¸‹é¢å°ç¼–ç½—åˆ—äº†å‡ ä¸ªå°ç¼–åœ¨é¡¹ç›®ä¸­å¸¸ç”¨çš„å‡ ä¸ªè£…é¥°å™¨ï¼Œæ–¹ä¾¿å¤§å®¶ä½¿ç”¨\n\n#### 1. å‡½æ•°èŠ‚æµä¸é˜²æŠ–\n\nå‡½æ•°èŠ‚æµä¸é˜²æŠ–åº”ç”¨åœºæ™¯æ˜¯æ¯”è¾ƒå¹¿çš„ï¼Œä¸€èˆ¬ä½¿ç”¨æ—¶å€™ä¼šé€šè¿‡`throttle`æˆ–`debounce`æ–¹æ³•å¯¹è¦è°ƒç”¨çš„å‡½æ•°è¿›è¡ŒåŒ…è£…ï¼Œç°åœ¨å°±å¯ä»¥ä½¿ç”¨ä¸Šæ–‡è¯´çš„å†…å®¹å°†è¿™ä¸¤ä¸ªå‡½æ•°å°è£…æˆè£…é¥°å™¨ï¼Œ é˜²æŠ–èŠ‚æµä½¿ç”¨çš„æ˜¯`lodash`æä¾›çš„æ–¹æ³•ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥è‡ªè¡Œå®ç°èŠ‚æµé˜²æŠ–å‡½æ•°å“¦\n\n```javascript\nimport { throttle, debounce } from 'lodash'\n/**\n * å‡½æ•°èŠ‚æµè£…é¥°å™¨\n * @param {number} wait èŠ‚æµçš„æ¯«ç§’\n * @param {Object} options èŠ‚æµé€‰é¡¹å¯¹è±¡\n * [options.leading=true] (boolean): æŒ‡å®šè°ƒç”¨åœ¨èŠ‚æµå¼€å§‹å‰ã€‚\n * [options.trailing=true] (boolean): æŒ‡å®šè°ƒç”¨åœ¨èŠ‚æµç»“æŸåã€‚\n */\nexport const throttle =  function(wait, options = {}) {\n  return function(target, name, descriptor) {\n    descriptor.value = throttle(descriptor.value, wait, options)\n  }\n}\n\n/**\n * å‡½æ•°é˜²æŠ–è£…é¥°å™¨\n * @param {number} wait éœ€è¦å»¶è¿Ÿçš„æ¯«ç§’æ•°ã€‚\n * @param {Object} options é€‰é¡¹å¯¹è±¡\n * [options.leading=false] (boolean): æŒ‡å®šåœ¨å»¶è¿Ÿå¼€å§‹å‰è°ƒç”¨ã€‚\n * [options.maxWait] (number): è®¾ç½® func å…è®¸è¢«å»¶è¿Ÿçš„æœ€å¤§å€¼ã€‚\n * [options.trailing=true] (boolean): æŒ‡å®šåœ¨å»¶è¿Ÿç»“æŸåè°ƒç”¨ã€‚\n */\nexport const debounce = function(wait, options = {}) {\n  return function(target, name, descriptor) {\n    descriptor.value = debounce(descriptor.value, wait, options)\n  }\n}\n```\n\nå°è£…å®Œä¹‹åï¼Œåœ¨ç»„ä»¶ä¸­ä½¿ç”¨\n\n```javascript\nimport {debounce} from '@/decorator'\n\nexport default {\n  methods:{\n    @debounce(100)\n    resize(){}\n  }\n}\n```\n\n\n\n#### 2. loading\n\nåœ¨åŠ è½½æ•°æ®çš„æ—¶å€™ï¼Œä¸ºäº†ä¸ªç”¨æˆ·ä¸€ä¸ªå‹å¥½çš„æç¤ºï¼ŒåŒæ—¶é˜²æ­¢ç”¨æˆ·ç»§ç»­æ“ä½œï¼Œä¸€èˆ¬ä¼šåœ¨è¯·æ±‚å‰æ˜¾ç¤ºä¸€ä¸ªloading,ç„¶ååœ¨è¯·æ±‚ç»“æŸä¹‹åå…³æ‰loadingï¼Œä¸€èˆ¬å†™æ³•å¦‚ä¸‹\n\n```javascript\nexport default {\n  methods:{\n    async getData() {\n      const loading = Toast.loading()\n      try{\n        const data = await loadData()\n        // å…¶ä»–æ“ä½œ\n      }catch(error){\n        // å¼‚å¸¸å¤„ç†\n        Toast.fail('åŠ è½½å¤±è´¥');\n      }finally{\n        loading.clear()\n      }  \n    }\n  }\n}\n```\n\næˆ‘ä»¬å¯ä»¥æŠŠä¸Šé¢çš„`loading`çš„é€»è¾‘ä½¿ç”¨è£…é¥°å™¨é‡æ–°å°è£…ï¼Œå¦‚ä¸‹ä»£ç \n\n```javascript\nimport { Toast } from 'vant'\n\n/**\n * loading è£…é¥°å™¨\n * @param {*} message æç¤ºä¿¡æ¯\n * @param {function} errorFn å¼‚å¸¸å¤„ç†é€»è¾‘\n */\nexport const loading =  function(message = 'åŠ è½½ä¸­...', errorFn = function() {}) {\n  return function(target, name, descriptor) {\n    const fn = descriptor.value\n    descriptor.value = async function(...rest) {\n      const loading = Toast.loading({\n        message: message,\n        forbidClick: true\n      })\n      try {\n        return await fn.call(this, ...rest)\n      } catch (error) {\n        // åœ¨è°ƒç”¨å¤±è´¥ï¼Œä¸”ç”¨æˆ·è‡ªå®šä¹‰å¤±è´¥çš„å›è°ƒå‡½æ•°æ—¶ï¼Œåˆ™æ‰§è¡Œ\n        errorFn && errorFn.call(this, error, ...rest)\n        console.error(error)\n      } finally {\n        loading.clear()\n      }\n    }\n  }\n}\n\n```\n\nç„¶åæ”¹é€ ä¸Šé¢çš„ç»„ä»¶ä»£ç \n\n```javascript\nexport default {\n  methods:{\n    @loading('åŠ è½½ä¸­')\n    async getData() {\n      try{\n        const data = await loadData()\n        // å…¶ä»–æ“ä½œ\n      }catch(error){\n        // å¼‚å¸¸å¤„ç†\n        Toast.fail('åŠ è½½å¤±è´¥');\n      }  \n    }\n  }\n}\n```\n\n#### 3. ç¡®è®¤æ¡†\n\nå½“ä½ ç‚¹å‡»åˆ é™¤æŒ‰é’®çš„æ—¶å€™ï¼Œä¸€èˆ¬éƒ½éœ€è¦å¼¹å‡ºä¸€ä¸ªæç¤ºæ¡†è®©ç”¨æˆ·ç¡®è®¤æ˜¯å¦åˆ é™¤ï¼Œè¿™æ—¶å€™å¸¸è§„å†™æ³•å¯èƒ½æ˜¯è¿™æ ·çš„\n\n```javascript\nimport { Dialog } from 'vant'\n\nexport default {\n  methods: {\n    deleteData() {\n      Dialog.confirm({\n        title: 'æç¤º',\n        message: 'ç¡®å®šè¦åˆ é™¤æ•°æ®ï¼Œæ­¤æ“ä½œä¸å¯å›é€€ã€‚'\n      }).then(() => {\n        console.log('åœ¨è¿™é‡Œåšåˆ é™¤æ“ä½œ')\n      })\n    }\n  }\n}\n```\n\næˆ‘ä»¬å¯ä»¥æŠŠä¸Šé¢ç¡®è®¤çš„è¿‡ç¨‹æå‡ºæ¥åšæˆè£…é¥°å™¨ï¼Œå¦‚ä¸‹ä»£ç \n\n```javascript\nimport { Dialog } from 'vant'\n\n/**\n * ç¡®è®¤æç¤ºæ¡†è£…é¥°å™¨\n * @param {*} message æç¤ºä¿¡æ¯\n * @param {*} title æ ‡é¢˜\n * @param {*} cancelFn å–æ¶ˆå›è°ƒå‡½æ•°\n */\nexport function confirm(\n  message = 'ç¡®å®šè¦åˆ é™¤æ•°æ®ï¼Œæ­¤æ“ä½œä¸å¯å›é€€ã€‚',\n  title = 'æç¤º',\n  cancelFn = function() {}\n) {\n  return function(target, name, descriptor) {\n    const originFn = descriptor.value\n    descriptor.value = async function(...rest) {\n      try {\n        await Dialog.confirm({\n          message,\n          title: title\n        })\n        originFn.apply(this, rest)\n      } catch (error) {\n        cancelFn && cancelFn(error)\n      }\n    }\n  }\n}\n```\n\nç„¶åå†ä½¿ç”¨ç¡®è®¤æ¡†çš„æ—¶å€™ï¼Œå°±å¯ä»¥è¿™æ ·ä½¿ç”¨äº†\n\n```javascript\nexport default {\n  methods: {\n    // å¯ä»¥ä¸ä¼ å‚ï¼Œä½¿ç”¨é»˜è®¤å‚æ•°\n    @confirm()\n    deleteData() {\n      console.log('åœ¨è¿™é‡Œåšåˆ é™¤æ“ä½œ')\n    }\n  }\n}\n```\n\næ˜¯ä¸æ˜¯ç¬é—´ç®€å•å¤šäº†,å½“ç„¶è¿˜å¯ä»¥ç»§ç»­å°è£…å¾ˆå¤šå¾ˆå¤šçš„è£…é¥°å™¨ï¼Œå› ä¸ºæ–‡ç« å†…å®¹æœ‰é™ï¼Œæš‚æ—¶æä¾›è¿™ä¸‰ä¸ªã€‚\n\n### è£…é¥°å™¨ç»„åˆä½¿ç”¨\n\nåœ¨ä¸Šé¢æˆ‘ä»¬å°†ç±»å±æ€§ä¸Šé¢ä½¿ç”¨è£…é¥°å™¨çš„æ—¶å€™ï¼Œè¯´é“è£…é¥°å™¨å¯ä»¥ç»„åˆä½¿ç”¨ï¼Œåœ¨`Vue`ç»„ä»¶ä¸Šé¢ä½¿ç”¨ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œæ¯”å¦‚æˆ‘ä»¬å¸Œæœ›åœ¨ç¡®è®¤åˆ é™¤ä¹‹åï¼Œè°ƒç”¨æ¥å£æ—¶å€™å‡ºç°`loading`ï¼Œå°±å¯ä»¥è¿™æ ·å†™(ä¸€å®šè¦æ³¨æ„é¡ºåº)\n\n```javascript\nexport default {\n  methods: {\n    @confirm()\n    @loading()\n    async deleteData() {\n      await delete()\n    }\n  }\n}\n```\n\n> æœ¬èŠ‚å®šä¹‰çš„è£…é¥°å™¨ï¼Œå‡å·²åº”ç”¨åˆ°è¿™ä¸ªé¡¹ç›®ä¸­ [https://github.com/snowzijun/vue-vant-base](https://github.com/snowzijun/vue-vant-base), è¿™æ˜¯ä¸€ä¸ªåŸºäº`Vant`å¼€å‘çš„å¼€ç®±å³ç”¨ç§»åŠ¨ç«¯æ¡†æ¶ï¼Œä½ åªéœ€è¦`fork`ä¸‹æ¥ï¼Œæ— éœ€åšä»»ä½•é…ç½®å°±å¯ä»¥ç›´æ¥è¿›è¡Œä¸šåŠ¡å¼€å‘ï¼Œæ¬¢è¿ä½¿ç”¨ï¼Œå–œæ¬¢éº»çƒ¦ç»™ä¸€ä¸ª`star`ã€‚\n\næˆ‘æ˜¯å­å›ï¼Œä»Šå¤©å°±å†™è¿™ä¹ˆå¤šï¼Œæœ¬æ–‡é¦–å‘äºå…¬ä¼—å·ã€å‰ç«¯æœ‰çš„ç©ã€‘ï¼Œæ¬¢è¿å…³æ³¨ã€‚\n\n## ç»“è¯­\n\n> ä¸è¦å¹ç­ä½ çš„çµæ„Ÿå’Œä½ çš„æƒ³è±¡åŠ›; ä¸è¦æˆä¸ºä½ çš„æ¨¡å‹çš„å¥´éš¶ã€‚ â€”â€”æ–‡æ£®ç‰¹ãƒ»æ¢µé«˜", "user_name": "å‰ç«¯è¿›å‡»è€…", "description": "æŠ€æœ¯æ—¥æ–°æœˆå¼‚ï¼Œæˆ‘æ„¿ç´§éšä¸èˆã€‚ä¸ªäººå…¬ä¼—å·ã€å‰ç«¯æœ‰çš„ç©ã€‘", "got_view_count": 313497, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "ç¨‹åºå‘˜", "concern_user_count": 238890, "user_id": "2101921964109880", "title": "ä½ å¯ä»¥ CRUDï¼Œä½†ä½ ä¸æ˜¯ CRUD ç¨‹åºå‘˜ï¼", "mark_content": "## ä»€ä¹ˆæ˜¯åŠ¡å®\n\nåŠ¡å®ç¨‹åºå‘˜ä»–ä»¬æ€»æ˜¯åœ¨é¢ä¸´é—®é¢˜æ—¶ï¼Œé€è¿‡é—®é¢˜çœ‹åˆ°æœ¬è´¨ï¼Œä»å…·ä½“çš„åœºæ™¯å‡ºå‘ï¼Œä»å¤§å±€ç€æƒ³ï¼Œäº†è§£æ•´ä¸ªé—®é¢˜çš„æ¥é¾™å»è„‰ï¼Œä»–ä»¬ä¼šå¯¹è‡ªå·±çš„è¡Œä¸ºè´Ÿè´£ï¼Œåœ¨é¡¹ç›®é¢ä¸´é—®é¢˜æ—¶ï¼Œä»–ä»¬ä¸ä¼šæ’’æ‰‹ä¸ç®¡æˆ–è€…ä»»ç”±é£é™©ä¸€æ­¥æ­¥æ‰©å¤§ç›´è‡³æ— æ³•ç»´æŠ¤ã€‚\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/35782b1733154656b679e13b83ac17ee~tplv-k3u1fbpfcp-zoom-1.image)\n\nå¤§å¤šæ•°äººéƒ½ä¸æ˜¯åŠ¡å®çš„ç¨‹åºå‘˜ï¼Œå› ä¸ºæˆä¸ºåŠ¡å®çš„ç¨‹åºå‘˜å¹¶ä¸æ»¡è¶³ `çŸ­æœŸçš„åˆ©ç›Š`ï¼Œéœ€è¦é•¿æœŸçš„æ‰“ç£¨å’ŒæŒç»­ä¸æ–­çš„å­¦ä¹ ã€æ€è€ƒåæ€ã€‚å¤§å¤šæ•°äººä¸æ˜¯åŠ¡å®çš„ç¨‹åºå‘˜çš„åŸå› åªæœ‰ä¸€ä¸ªï¼š`æƒ°æ€§ä½¿ç„¶`ã€‚\n\nç¨‹åºå‘˜æ˜¯æœ‰`æˆ¾æ°”`çš„ï¼Œè®¸å¤šäººå‘æˆ‘æŠ±æ€¨\n\n* å·¥ä½œå¾ˆä¹…äº†ï¼Œå¹´é¾„ä¹Ÿæ¯”è¾ƒå¤§äº†ï¼Œæ„Ÿè§‰å·¥ä½œè¿™äº›å¹´ä»¥æ¥åœ¨æŠ€æœ¯æ–¹å‘ä¸Šæ²¡ä»€ä¹ˆæå‡\n\nå¯¹è¿™äº›äººæˆ‘æœ‰è¯è¯´ï¼šæ²¡æœ‰åŠæ—¶åæ€ï¼Œå¯èƒ½ä¹Ÿæ˜¯ç”±äºå·¥ä½œä¸€ç›´å¾ˆå¿™ï¼Œæ²¡æœ‰åœä¸‹æ¥é™å¿ƒæ€è€ƒã€‚å› ä¸ºæˆ‘ç›¸ä¿¡ä»»ä½•æœ‰æ—¶é—´æ€è€ƒçš„ç¨‹åºå‘˜ï¼Œéƒ½ä¸ä¼šæœ‰è¿™ç§æƒ³æ³•ã€‚å–„äºåæ€è‡ªå·±ä½ ä¼šåŠæ—¶è°ƒæ•´æœ€è¿‘çš„çŠ¶æ€ï¼Œç³»ç»ŸåŒ–çš„å­¦ä¹ ï¼Œæé«˜è‡ªå·±çš„æ ¸å¿ƒç«äº‰åŠ›ï¼Œè®©è‡ªå·±æˆä¸ºå…¬å¸ä¸å¯è½»æ˜“æ›¿ä»£çš„äººæ‰ã€‚\n\n* æ•´å¤© CRUDï¼Œé¡¹ç›®æŠ€æœ¯æ ˆç”¨çš„æ¯”è¾ƒè€æ—§ï¼Œæƒ³è¦æ¥è§¦æ–°é¡¹ç›®ï¼Œæƒ³è¦å»äº’è”ç½‘\n\nå¯¹è¿™äº›äººæˆ‘æœ‰è¯è¯´ï¼šæ•´å¤© CRUD ä¸æ˜¯ä½ æ‰¾ç†ç”±çš„æ ¹æœ¬ï¼CRUD çš„ä¸šä½™æ—¶é—´å®Œå…¨æœ‰æ—¶é—´æå‡è‡ªå·±ï¼æˆ‘ä¹Ÿæ˜¯ CRUDï¼Œä½†æˆ‘ä¸æ˜¯ä¸€ä¸ª CRUD ç¨‹åºå‘˜ï¼åƒä¸‡ä¸è¦ç»™è‡ªå·±æ‰£å„ç§ CRUD çš„å¸½å­ã€‚é¡¹ç›®æŠ€æœ¯æ ˆç”¨çš„æ¯”è¾ƒè€æ—§ï¼Œæˆ‘æƒ³è¯´ï¼Œè®¡ç®—æœºä¸–ç•Œå‘å±•äº† 60 å¤šå¹´åˆ°ç°åœ¨ï¼Œä»ç„¶åªèƒ½è¯†åˆ« 0 å’Œ 1 ï¼Œè¦ä¸“æ³¨äºä¸å˜çš„æ ¹æœ¬ã€‚å¦‚æœä½ å­¦å®Œæ“ä½œç³»ç»Ÿï¼Œä½ å°±çŸ¥é“è½¯ä»¶æœ€ç»ˆç¦»ä¸å¼€æ“ä½œç³»ç»Ÿï¼Œä½ å°±çŸ¥é“ç®¡ç¨‹æ˜¯æ€ä¹ˆå›äº‹ï¼Œæ“ä½œç³»ç»Ÿå®ç°ä¸åŒè°ƒåº¦ç®—æ³•çš„æŠ‰æ‹©æ—¶ä»€ä¹ˆã€‚æˆ‘æ›¾ç»è¯´æˆ‘å–œæ¬¢æŠ€æœ¯ï¼Œæƒ³è¦æ¥è§¦æ–°çš„æŠ€æœ¯æ ˆï¼Œå½“æˆ‘è¢«é—®åŠä½ çŸ¥é“å“ªäº› `hibernate` æ€æƒ³åˆ°ç°åœ¨ä»ç„¶æµè¡Œï¼Œ`mybatis` å“ªäº›æ€æƒ³ä»ç„¶å¾ˆè€æ—§çš„æ—¶å€™ï¼Œä½ å°±ä¼šå‘ç°ï¼ŒæŠ€æœ¯çš„æ–°æ½®åªæ˜¯ä¸€æ—¶çš„ï¼Œæ²¡æœ‰æ°¸è¿œä¸è¿‡æ—¶çš„æŠ€æœ¯ï¼æˆ‘å¬å¾ˆå¤šå‰è¾ˆè®²èµ·ï¼Œåœ¨é›¶å‡ å¹´çš„æ—¶å€™è°è¯´è‡ªå·±è¿›äº†äº’è”ç½‘é‚£å®Œå…¨æ˜¯ç­‰ç€è¢«äººå˜²ç¬‘çš„ï¼ä¸ºä»€ä¹ˆäº’è”ç½‘ç°åœ¨æµè¡Œï¼Ÿå› ä¸ºå®ƒç¬¦åˆæˆ‘ä»¬å¤§ä¼—çš„è¯‰æ±‚ï¼æ— ç°é‡‘æ”¯ä»˜ï¼Œå·¥ä½œä¹‹ä½™çš„æ”¾æ¾ï¼Œé¥¿äº†å°±ä¸æƒ³è‡ªå·±å»ä¹°é¥­ï¼Œå®ä½“è´­ç‰©åˆéº»çƒ¦è€Œä¸”è¿˜è¦åŒ–è§£å’Œå„ç§åº—å‘˜çš„å°´å°¬ï¼ï¼ï¼ä½†æ˜¯äº’è”ç½‘æ˜¯æ— æ³•è½åœ°çš„ï¼Œåœ¨å‘å±•åˆ°ä¸€å®šè§„æ¨¡å’Œå¹³å°åï¼Œäº’è”ç½‘ä¹Ÿæ˜¯æœ€é‡è¦è¢«æ·˜æ±°çš„ï¼è€Œç¡¬ä»¶ã€èŠ¯ç‰‡ã€é€šä¿¡è¿™äº›æ‰æ˜¯æ°¸è¿œæ–°æ½®çš„æŠ€æœ¯ï¼Œåªä¸è¿‡æ— æ³•è·å–çœ¼å‰çš„ feedbackï¼Œå¾ˆå¤šé«˜ç´ è´¨äººæ‰ä¹Ÿä¸æƒ³ä»äº‹ç½¢äº†ï¼\n\n* æˆ‘åº”è¯¥å­¦å“ªäº›æŠ€æœ¯\n\nå¯¹è¿™äº›äººæˆ‘æœ‰è¯è¯´ï¼šè¿™ä¸ªé—®é¢˜æœ¬èº«å°±æ²¡æœ‰æ„ä¹‰ï¼æ²¡æœ‰äººèƒ½å¤ŸæŒ‡å¯¼ä½ å­¦å“ªäº›æŠ€æœ¯ï¼é—®è¿™å¥è¯çš„ç›®çš„å°±æ˜¯æƒ³èµ°æ·å¾„ï¼Œä½†æ˜¯å­¦ä¹ æ˜¯æ²¡æœ‰æ·å¾„çš„ï¼å­¦ä½ æƒ³å­¦çš„ï¼Œå­¦å’Œä½ å·¥ä½œç›¸å…³çš„ï¼Œå­¦èƒ½å¤Ÿè®©ä½ æå‡æ ¸å¿ƒç«äº‰åŠ›çš„ï¼å¦‚æœéè¦è®©æˆ‘è¯´å‡ºè¦å­¦ä»€ä¹ˆè¯ï¼Œæˆ‘å»ºè®®å­¦åŸºç¡€ï¼Œå­¦åŸºç¡€ï¼Œå­¦åŸºç¡€ï¼ŒåŸºç¡€å°±æ˜¯è®¡ç®—æœºç»„æˆåŸç†ã€æ“ä½œç³»ç»Ÿã€ç½‘ç»œã€ç¼–è¯‘åŸç†\n\n>é’ˆå¯¹ä¸Šé¢è¿™äº›äººï¼Œæˆ‘è®¤ä¸ºä»–ä»¬åªæ˜¯éš¾ä»¥æ¥å—æ”¹å˜ï¼Œæˆ‘è®¤ä¸ºè¿™ç±»äººæ˜¯ `ç…®ç†Ÿçš„é’è›™`ã€‚è¿™ä¸ªæ•…äº‹ä½ ä¸€å®šå¬è¯´è¿‡ï¼Œå®ƒè¯´çš„å°±æ˜¯æŠŠé’è›™æ”¾åœ¨æ…¢æ…¢åŠ çƒ­çš„é”…ç‚‰é‡Œé¢ï¼Œåˆšå¼€å§‹é’è›™æ„Ÿè§‰æ¸©åº¦å¾ˆèˆ’é€‚ï¼Œéšç€æ…¢æ…¢åŠ çƒ­ï¼Œé’è›™å·²ç»æ— åŠ›è·³å‡ºé”…ç‚‰äº†ï¼\n>\n>è€Œå¦å¤–ä¸€ç§äººæ˜¯ `æŠŠé’è›™ä»åœ¨æ»šçƒ«çš„é”…ç‚‰é‡Œ` çš„äººï¼Œå®ƒè‚¯å®šæƒ³å°½åŠæ³•è·³å‡ºæ¥ï¼Œè¿™ç±»äººä¼šæƒ³å°½ä¸€åˆ‡åŠæ³•å…‹æœå›°éš¾ã€‚\n\n## ä¸è¦ç»™è‡ªå·±çš„äººç”Ÿè®¾é™\n\næå°é¾™æ›¾ç»è¯´è¿‡ï¼š**æˆ‘æ´»ç€ä¸æ˜¯ä¸ºäº†æ»¡è¶³ä½ çš„æœŸæœ›ï¼Œæ­£å¦‚ä½ ä¹Ÿä¸æ˜¯å› ä¸ºæˆ‘çš„æœŸæœ›**ã€‚\n\nè¯´çš„ä¸§ä¸€ç‚¹å°±æ˜¯ **è¯¸å›çœ‹æˆ‘å¤šè£…é€¼ï¼Œæˆ‘æ–™è¯¸å›åº”å¦‚æ˜¯**\n\nè½¯ä»¶å¼€å‘è¡Œä¸šç»å¯¹æ˜¯æœ€åƒé¦™çš„è¡Œä¸šï¼Œå› ä¸ºæˆ‘ä»¬æ”¶å…¥é¢‡ä¸°ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥é€‰æ‹©æˆ‘ä»¬æƒ³è¦çš„å·¥ä½œï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©åŠå…¬åœ°ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°è´¢åŠ¡è‡ªç”±ï¼Œä½†è¿™äº›å‰ææ˜¯ä½ è¦æœ‰èƒ½åŠ›ã€‚\n\nä¸ºä»€ä¹ˆæœ‰äººå–œæ¬¢æŠ±æ€¨å‘¢ï¼Ÿå› ä¸ºä»–ä»¬ä¸æ›¾æƒ³ç€æ”¹å˜ï¼Œ`Martin Fowler` è¯´è¿‡ **ä½ å¯ä»¥å»æ”¹å˜ç»„ç»‡ï¼Œæˆ–è€…è®©è‡ªå·±æ¢ä¸€ä¸ªç»„ç»‡**ï¼Œæ€»çš„æ¥è¯´ï¼Œä½ æ˜¯è‡ªç”±çš„ï¼Œä½ å¯ä»¥åšä½ æƒ³åšçš„ã€‚\n\nä¸çŸ¥é“ä½ å¬è¿‡ `å¢¨è²å®šå¾‹` æ²¡æœ‰ï¼Ÿæœ€ç®€å•çš„è¡¨è¾¾å½¢å¼æ˜¯è¶Šæ€•å‡ºäº‹ï¼Œè¶Šä¼šå‡ºäº‹ï¼Œæ‹¿æˆ‘ä»¬è€ç¥–å®—çš„è¯å°±æ˜¯ **æ€•ä»€ä¹ˆï¼Œæ¥ä»€ä¹ˆ**ï¼Œä½†æ˜¯åœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œå‡ºç°é—®é¢˜æ˜¯å†æ­£å¸¸ä¸è¿‡çš„äº‹æƒ…äº†ï¼Œå°±ç®—ä½ æœ‰å®Œå–„çš„éœ€æ±‚ã€è®¾è®¡æ–‡æ¡£ï¼Œå®Œå¤‡çš„è‡ªåŠ¨åŒ–æµ‹è¯•æµç¨‹ï¼Œå¤šè½®æµ‹è¯•è¿­ä»£ï¼Œè¿˜æ˜¯ä¼šå‡ºç°é—®é¢˜ï¼Œæ¨è¿Ÿäº¤ä»˜ï¼Œæœªæ›¾é¢„æ–™çš„é—®é¢˜çš„å‡ºç°ã€‚\n\næ‰€ä»¥ï¼Œä¸è¦æƒ§æ€•é—®é¢˜ï¼Œå› ä¸ºé—®é¢˜ä»»ä½•æ—¶åˆ»éƒ½ä¼šå‡ºç°ï¼Œå½“é—®é¢˜å‡ºç°æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥ä¾é æˆ‘ä»¬çš„ä¸“ä¸šæ€§å»è§£å†³é—®é¢˜ï¼Œæˆ‘ä»¬çŠ¯äº†é”™è¯¯è¦å‹‡äºæ‰¿è®¤ï¼Œæˆ‘ä»¬å¿…é¡»å¦è¯šã€‚\n\nå‹‡äºæ‰¿æ‹…è´£ä»»ï¼Œä¸è¦æŠŠé—®é¢˜å½’å’äºåˆ«äººæˆ–è€…å…¶ä»–äº‹æƒ…ä¸Šï¼Œä¹Ÿä¸è¦å¯»æ‰¾è—‰å£ï¼Œä¸è¦æŠŠé—®é¢˜å½’åŠŸäºç¯å¢ƒã€ç¼–ç¨‹è¯­è¨€ã€æ—¶é—´æˆ–è€…åŒäº‹ï¼Œè¿™äº›å› ç´ å¯èƒ½å½±å“ä½ ï¼Œä½†ä¸æ˜¯è®©ä½ æ‰¾çš„å€Ÿå£\n\nè®¾æƒ³ä¸€ä¸‹ï¼Œæ¯”å¦‚é“¶è¡ŒèŒå‘˜ã€è¶…å¸‚å”®è´§å‘˜ã€æ±½è½¦ä¿®ç†å·¥æªå¡æˆ–è€…æ•·è¡ä½ çš„æ—¶å€™ï¼Œä½ æ˜¯ä»€ä¹ˆååº”ï¼Ÿæ˜¯ä¸æ˜¯æ¨ä¸å¾—æƒ³ä»–äº†ä»–ä»¬çš„é—¨åº—ï¼Ÿä½ ä¼šå¦‚ä½•çœ‹å¾…ä»–ä»¬çš„å…¬å¸ï¼Ÿé‚£å¦‚æœæ˜¯ä½ å‘¢ï¼Ÿä½ çš„ä¸Šå¸æˆ–è€…ç”²æ–¹ä¼šæ€ä¹ˆçœ‹ä½ ï¼Ÿ\n\n### ç ´çª—æ•ˆåº”\n\n`ç ´çª—æ•ˆåº”`è¯´çš„æ˜¯ï¼Œå¦‚ä½•æŠŠä¸€åº§å¯Œä¸½å ‚çš‡çš„åˆ«å¢…å˜æˆä¸€ç‰‡åºŸå¢Ÿï¼Ÿä¹Ÿè®¸ä½ åªéœ€è¦ä¸€æ‰‡ç ´çª—ï¼Œè¿™å°±æ˜¯ç ´çª—æ•ˆåº”çš„å¨åŠ›ã€‚\n\né‚£ä¹ˆä¸ºä»€ä¹ˆç ´çª—æ•ˆåº”çš„å¨åŠ›è¿™ä¹ˆå¼ºå¤§å‘¢ï¼Ÿä¸€æ‰‡ç ´çª—ï¼Œå¦‚æœä¸€æ®µæ—¶é—´ä¸å»ä¿®ç†å’Œä¿®å¤ï¼Œåˆ«å¢…ä¸­çš„ä¸»äººå°±ä¼šæ½œç§»é»˜åŒ–äº§ç”Ÿä¸€ç§è¿™åº§åˆ«å¢…å¾ˆè€æ—§çš„æƒ³æ³•ï¼Œä¹…è€Œä¹…ä¹‹æ›´å¤šçš„çª—æˆ·ä¹Ÿæ…¢æ…¢ç§¯æ»¡ç°å°˜ï¼Œä¸å»æ‰“ç†ï¼Œç›´åˆ°æ•´ä¸ªåˆ«å¢…æˆä¸ºåºŸå¢Ÿã€‚\n\næ‹¿åˆ°è½¯ä»¶å¼€å‘ä¸­å°±æ˜¯ï¼Œå¦‚æœä¸€æ‰‡ç ´çª—ï¼ˆç³Ÿç³•çš„è®¾è®¡ã€é”™è¯¯çš„å†³å®šã€æ²¡æœ‰æ³¨é‡Šçš„ä»£ç ï¼Œæ··ä¹±çš„é€»è¾‘ï¼‰ä¸å»ä¿®ç†ï¼Œæ…¢æ…¢çš„å°±ä¼šæœ‰æ›´å¤šäººä½œå‡ºç ´çª—å†³å®šï¼Œå¯¼è‡´æ•´ä¸ªé¡¹ç›®æ··ä¹±ä¸å ªï¼Œæ— æ³•ç»´æŠ¤ã€‚ä¿—ç§°ä¸€å—è‡­è‚‰åäº†æ»¡é”…çš„æ±¤ã€‚\n\n### ç¼–åˆ¶åˆç†çš„è°è¨€\n\næœ‰ä¸‰ä¸ªåœ¨æˆ˜åœºä¸­çš„æˆ˜å£«å·²ç»å¾ˆä¹…æ²¡æœ‰åƒé¥­äº†ï¼Œä»–ä»¬çœ‹å®Œå‰é¢æœ‰ä¸ªæ‘åº„ï¼Œä½†æ˜¯æ‘åº„é‡Œé¢æ²¡æœ‰äººï¼Œä½†æ˜¯å£«å…µæ²¡æœ‰æ°”é¦ï¼Œä»–ä»¬çƒ§äº†ä¸€é”…æ°´ï¼Œå°å¿ƒç¿¼ç¿¼åœ°åœ¨é”…é‡Œæ”¾äº†ä¸‰å—çŸ³å¤´ï¼Œè¯¡å¼‚çš„æ‘æ°‘ä»¬éƒ½å‡ºæ¥å›´è§‚ï¼Œç„¶åæˆ˜å£«å°±è¯´ï¼šè¿™å«çŸ³å¤´æ±¤ï¼Œä½ ä»¬å°±åœ¨æ±¤é‡Œæ”¾è¿™ä¸ªï¼Ÿå—¯ï¼Œæ˜¯çš„ï¼Œå£«å…µå›ç­”é“ï¼Œä½†æ˜¯æœ‰ç‚¹èƒ¡èåœå‘³é“ä¼šæ›´å¥½ï¼Œä¸€ä¸ªæ‘æ°‘å°±è·‘å›å®¶æŠŠè‡ªå·±å®¶é‡Œçš„èƒ¡èåœæ‹¿æ¥äº†ï¼Œéšåå£«å…µåˆè¯´ï¼Œå¦‚æœæœ‰ç‰›è‚‰é‚£å°±æ›´å¥½äº†ï¼Œåˆä¸€ä¸ªæ‘æ°‘è·‘å›å®¶æŠŠç‰›è‚‰æ‹¿è¿‡æ¥äº†ï¼Œæœ€åï¼Œä»–ä»¬ç…®äº†ä¸€å¤§é”…æ±¤ï¼Œå£«å…µæŠŠçŸ³å¤´æ‰”æ‰ï¼Œæœ€åå’Œæ‘æ°‘ä»¬ä¸€èµ·åƒäº†ä¸€é¡¿ç¾é¤ã€‚\n\nè¿™åœ¨è½¯ä»¶å¼€å‘ä¸­åŒæ ·é€‚ç”¨ã€‚ä½ å¯ä»¥é€šè¿‡ä¸€ä¸ªå°æ”¹åŠ¨å…¥æ‰‹ï¼Œæ¸æ¸çš„æ‹“å±•å…¨å±€ï¼Œä½†æ˜¯ä¸€å®šè¦æ³¨æ„æ–¹å¼å’Œæ–¹æ³•ï¼Œä¸€å®šè¦å‡è£…`ä½ ä¸åœ¨æ„`ï¼Œè¿™æ—¶å€™åº”è¯¥åä¸‹æ¥ï¼Œç­‰ä»–ä»¬å¼€å§‹å‘ä½ é—®ä½ è¦ä¸è¦åŠ äº›ä½ åŸæœ¬æƒ³è¦çš„åŠŸèƒ½ã€‚åŠ å…¥ä¸€ä¸ªæ¨è¿›ä¸­çš„æˆåŠŸé¡¹ç›®æ›´å®¹æ˜“ä¸€äº›ã€‚\n\n### è®©ç”¨æˆ·å‚ä¸è¯„å®¡å’Œè®¾è®¡\n\nä½ æ˜¯å¦ç»å†è¿‡è¿™ç§ï¼Œä½ åšçš„ä¸œè¥¿æ‹¿ç»™ç”¨æˆ·çœ‹åå‘ç°è¿™å¹¶ä¸æ˜¯ä»–ä¹ˆæƒ³è¦çš„ï¼Œæ¯æ¬¡éƒ½éœ€è¦æ‰“å›é‡åšã€‚ä½†æ˜¯æ²¡åŠæ³•ï¼Œé‚£æ˜¯ä½ çš„ç”¨æˆ·ï¼Œä½ ä»¬çš„å…±åŒèŒè´£å°±æ˜¯åšå‡ºä¸€ä¸ªåŒæ–¹éƒ½æ»¡æ„çš„è½¯ä»¶ã€‚ä¸ºäº†è¾¾åˆ°è¿™ç§ç›®çš„ï¼Œæ²Ÿé€šå°±æ‰®æ¼”äº†è‡³å…³é‡è¦çš„ä½œç”¨ã€‚æˆ–è€…è¯´ï¼Œä½ è¿˜ä¸å¤Ÿäº†è§£ä½ çš„ç”¨æˆ·ï¼Œè¦å¤šå’Œä»–èŠèŠï¼Œè¿™æˆ–è®¸æ˜¯ç¨‹åºå‘˜çš„çŸ­æ¿ã€‚å¤šè®©ä½ çš„ç”¨æˆ·å‚ä¸è¯„å®¡ï¼Œå¤šé—®ä»–ä»¬è¿™æ ·æ€ä¹ˆæ€ä¹ˆæ ·ã€‚\n\n## å¦‚ä½•å­¦ä¹ çŸ¥è¯†\n\n### çŸ¥è¯†ç†è´¢\n\næœ¬æ°æ˜å¯Œå…°å…‹æ—è¯´è¿‡ï¼š**æŠ•èµ„çŸ¥è¯†ï¼Œæ”¶ç›Šæœ€é«˜** ã€‚çŸ¥è¯†å’Œç»éªŒç¡®å®æ˜¯ä½ æœ€éœ€è¦çš„èµ„äº§ã€‚æŠ•èµ„çŸ¥è¯†åœ¨æŸç§ç¨‹åº¦ä¸Šå’Œ `ç†è´¢` æ˜¯ä¸€æ ·çš„ã€‚ä»€ä¹ˆï¼Ÿè¿™ä¸¤ç§æ¯«ä¸ç›¸å…³çš„æ¦‚å¿µæ€ä¹ˆä¼šæ‰¯åˆ°ä¸€èµ·å»çš„ï¼Ÿåˆ«ç€æ€¥ï¼Œä¸”å¬æˆ‘æ…¢æ…¢ç»™ä½ åˆ†æã€‚\n\n* é¦–å…ˆï¼Œç†æ€§æŠ•èµ„è€…å…·æœ‰å‘¨æœŸæ€§æŠ•èµ„çš„ä¹ æƒ¯ï¼Œå‘¨æœŸæ€§æŠ•èµ„å°±æ˜¯å®šæŠ•\n* ç†æ€§æŠ•èµ„è€…ä¼šè¡¡é‡æˆ–è€…è¯´å¹³è¡¡é«˜é£é™©é«˜æ”¶ç›Šå’Œç¨³å®šæ”¶ç›Šçš„ç»„åˆ\n* é‡‡å–å¤šæ ·åŒ–æ˜¯æ‰“æŒä¹…æˆ˜æˆåŠŸçš„å…³é”®å› ç´ \n* æŠ•èµ„è€…æœ€æ ¸å¿ƒçš„å‡†åˆ™å°±æ˜¯ä½ä¹°é«˜å–è·å¾—æœ€å¤§çš„å›æŠ¥\n* å®šæœŸå®¡æŸ¥ã€åæ€è‡ªå·±çš„ç†è´¢ç»„åˆ\n\nä¸ºä»€ä¹ˆè¯´å­¦ä¹ çŸ¥è¯†å’Œç†è´¢ä¸€æ ·å‘¢ï¼Ÿ\n\n**å®šæœŸæŠ•èµ„**\n\nå°±åƒé‡‘èå®šæŠ•ä¸€æ ·ï¼Œä½ å¿…é¡»å®šæœŸä¸ºä½ çš„æŠ€æœ¯æ ˆæ‰¾åˆ°åˆé€‚çš„å­¦ä¹ ç»„åˆï¼Œå³ä½¿æ•°é‡æœ‰é™ã€‚\n\n**é£é™©ç®¡ç†**\n\nä¸è¦æŠŠæ‰€æœ‰çš„é¸¡è›‹éƒ½æ”¾åœ¨ä¸€ä¸ªç¯®å­é‡Œï¼Œä½ è¦å­¦æ–°æ½®çš„æ¡†æ¶åŒæ—¶ä¹Ÿè¦ä¸“æ³¨äºæ°¸æ’ä¸å˜çš„åŸºç¡€çŸ¥è¯†ã€‚è¿™æ ·ä¼šè®©ä½ ä¸æ­¢äºæ€è€ƒæ¡†æ¶ï¼ŒåŒæ—¶ä¹Ÿä¼šè®©ä½ è·Ÿè¿›æ—¶ä»£çš„è¿›æ­¥é€‚åº”è¿™ä¸ªç¤¾ä¼šã€‚\n\n**å¤šæ ·åŒ–**\n\nä½ çŸ¥é“çš„è¶Šå¤šï¼Œä½ çš„ä½œç”¨ã€ä½ çš„ä»·å€¼ä¹Ÿå°±è¶Šå¤§ã€‚å¦‚æœä½ æ˜¯ä¸€ä¸ªåªä¸“æ³¨äºæŸä¸ªä¸šåŠ¡çš„ç¨‹åºå‘˜ï¼Œä¸€å®šè¦ä»æ•´ä½“æŠŠæ¡ï¼Œä¸è¦å±€é™åœ¨è‡ªå·±çš„ä¸€äº©ä¸‰åˆ†åœ°ä¸­ã€‚å¦‚æœä½ ä¸å–œæ¬¢ä¸šåŠ¡ï¼Œé‚£ä½ å°±è¦ä»æ•´ä½“è€ƒè™‘ç”¨åˆ°ä»€ä¹ˆæŠ€æœ¯ï¼Œè®¡ç®—æœºæŠ€æœ¯å˜åŒ–è¿…çŒ›ï¼Œä»Šå¤©çš„çƒ­ç‚¹æŠ€æœ¯å¯èƒ½æ˜å¤©å°±ä¼šè¢«åºŸå¼ƒã€‚ä½ è¦å¤šç†Ÿæ‚‰æŠ€æœ¯ï¼Œæˆä¸º T å‹äººæ‰ã€‚T è¿™ä¸ªå­—çš„å†™æ³•ä¸€å®šæ˜¯å…ˆæ¨ªç€å†™å†ç«–ç€å†™çš„ï¼ŒçŸ¥é“å¹¿åº¦åï¼Œæ‰æœ‰å¯èƒ½é€‰æ‹©ä¸€ä¸ªåˆ‡å…¥ç‚¹æ·±å…¥è¿›å»ã€‚\n\n**ä½ä¹°é«˜å–**\n\nä½ åœ¨ Java æµè¡Œä¹‹å‰ç»å¯¹ä¸ä¼šæƒ³ç€å»å­¦ä¹  Javaï¼Œä½†æ˜¯å½“ Java æµè¡Œä¹‹åï¼Œé‚£äº›æ—©èµ·çš„ç”¨æˆ·å·²ç»ç§¯ç´¯äº†ç›¸å½“ä¸°åšçš„å›æŠ¥ã€‚\n\n**é‡æ–°è¯„ä¼°**\n\né‡æ–°è¯„ä¼°ä½ çš„æŠ€æœ¯æ ˆï¼Œæ¨é™ˆå‡ºæ–°ï¼ŒæŸ¥æ¼è¡¥ç¼ºã€‚\n\n### çŸ¥è¯†ç»„åˆ\n\nè¿™é‡Œæœ‰ä¸€äº›å¯¹ä½ å­¦ä¹ çŸ¥è¯†çš„å‡ ç§ç»„åˆæ–¹å¼ï¼Œä¹Ÿæ˜¯ä¸€äº›å»ºè®®ï¼š\n\n* æ¯å¹´å­¦ä¹ ä¸€é—¨æ–°çš„ç¼–ç¨‹è¯­è¨€ï¼šåŸ¹å…»è‡ªå·±ä»ä¸åŒçš„è§’åº¦æ€è€ƒè¯­è¨€è¿™å›äº‹ï¼Œæƒè¡¡è¯­è¨€çš„åˆ©å¼Šï¼Œè§£å†³äº†ä»€ä¹ˆæ ·çš„é—®é¢˜\n* æ¯æœˆè¯»ä¸€æœ¬æŠ€æœ¯ä¹¦ï¼šè¿™ä¸ªå¯èƒ½æœ‰äº›è´¹åŠ²ï¼Œå› ä¸ºä¸€æœ¬é»‘çš®ä¹¦ä½ ä¸å¯èƒ½ä¸€ä¸ªæœˆå°±è¯»å®Œäº†ï¼Œé™¤éä½ ä»€ä¹ˆéƒ½ä¸åšï¼Œå¤©å¤©åªçœ‹ä¹¦ï¼Œä½†æ˜¯æœ‰çš„å®æˆ˜ç±»çš„ä¹¦è¿˜æ˜¯å¯ä»¥çœ‹å®Œçš„ã€‚è¿™é‡Œåªæ˜¯å‘Šè¯‰ä½ ä¸€ä¸ªå¤§è‡´çš„è¯»ä¹¦å‘¨æœŸ\n* è¯»æŠ€æœ¯ä¹¦ï¼šä½ çš„äººç”Ÿä¸ä»…ä»…åªæœ‰è®¡ç®—æœºï¼Œè¿˜æœ‰ç”Ÿæ´»ï¼Œè®¡ç®—æœºä¹Ÿæ˜¯é€šè¿‡äººç±»åˆ¶é€ å‡ºæ¥çš„ï¼Œä½ è¦ç«™åœ¨äººçš„è§’åº¦æ€è€ƒé—®é¢˜ã€‚\n* ä¸Šè¯¾ï¼šå»æœ¬åœ°å¤§å­¦ä¸Šè¯¾æ˜¯ä¸€ä»¶å¾ˆä¸é”™çš„äº‹æƒ…\n* å‚åŠ åŸå¸‚æŠ€æœ¯åœˆå­äº¤æµï¼šä¸è¦åªå½“å¬ä¼—ï¼Œè¦å‚ä¸è¿›å»ï¼Œäº†è§£å…¶ä»–äººéƒ½åœ¨åšä»€ä¹ˆ\n* ä¸æ—¶ä¿±è¿›ï¼šè¿˜æ˜¯é‚£å¥è¯ï¼Œå…³å¿ƒä¸€ä¸‹ä½ çš„æŠ€æœ¯æ ˆï¼Œé˜…è¯»ç›¸å…³çš„æ–°é—»å’ŒæŠ€æœ¯å¸–å­ï¼Œè¿™æ˜¯ä¸€ç§å¾ˆå¥½çš„æ–¹å¼ã€‚\n\næŒç»­æŠ•èµ„éå¸¸é‡è¦ï¼Œè®¡ç®—æœºä¸æ˜¯ä¸€ä»¶`é€Ÿæˆ`çš„äº‹å„¿ã€‚\n\n### ç¢ç‰‡å­¦ä¹ çš„æœºä¼š\n\nä½ è¦å¦‚é¥¥ä¼¼æ¸´çš„å­¦ä¹ ï¼Œå¦‚æœä½ æ— æ³•æ‰¾åˆ°é—®é¢˜çš„ç­”æ¡ˆï¼Œå»å¯»è§…æœ‰èƒ½åŠ›æ‰¾åˆ°ç­”æ¡ˆçš„äººï¼Œè€Œä¸æ˜¯è¦è®©é—®é¢˜ `æ²‰å¯‚ä¸‹å»`ã€‚å’Œå…¶ä»–äººäº¤è°ˆæœ‰åŠ©äºæ„å»ºä½ çš„äººé™…ç½‘ç»œï¼Œè€Œä¸”ä½ ä¼šå¾ˆæƒŠè®¶çš„å‘ç°ï¼Œåœ¨ä½ å¯»æ‰¾ç­”æ¡ˆçš„è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä½ ä¼šä¸æ–­æ‰©å¤§ä½ çš„çŸ¥è¯†é¢ã€‚\n\næ‰€æœ‰çš„é˜…è¯»å’Œç ”ç©¶éƒ½éœ€è¦æ—¶é—´ï¼Œè€Œæ—¶é—´æ˜¯æ°¸è¿œä¸å¤Ÿçš„ã€‚æ‰€ä»¥ä½ éœ€è¦æ—¶åˆ»å‡†å¤‡å¥½ï¼Œç¡®ä¿åœ¨æ— èŠçš„æ—¶å€™æœ‰ä¸œè¥¿å¯ä»¥è¯»ã€‚åœ¨åŒ»é™¢æ’é˜Ÿä¹Ÿä¸è¦å¿˜äº†æ”¾å¼ƒé˜…è¯»çš„å¥½æœºä¼š --- ä¸€å®šè¦å¸¦ä¸Šè‡ªå·±çš„ `kindle` æˆ–è€…ç”µå­é˜…è¯»å™¨\n\n### æ‰¹åˆ¤æ€§æ€ç»´\n\næœ€åä¸€ä¸ªè¦ç‚¹æ˜¯è¦å…·æœ‰æ‰¹åˆ¤æ€§æ€ç»´ï¼Œæ‰¹åˆ¤æ€§åœ°æ€è€ƒè¯»åˆ°å’Œå¬åˆ°çš„ä¸œè¥¿ã€‚\n\nç½‘ç»œä¸æ˜¯é‚£ä¹ˆå¹²å‡€çš„ã€‚æ°¸è¿œä¸è¦ä½ä¼°å•†ä¸šçš„åŠ›é‡ã€‚ä»–ä¼šæŠŠé»‘çš„è¯´æˆç™½çš„ã€‚\n\nç½‘ç»œæœç´¢å¼•æ“ä¼šæŠŠçƒ­é—¨çš„ä¸œè¥¿æ”¾åœ¨å‰åˆ—ï¼Œè€Œä¸ä»…ä»…æ˜¯æ­£ç¡®çš„ä¸œè¥¿ï¼Œä¹Ÿå¹¶ä¸æ˜¯å¯¹ä½ æœ‰ç”¨çš„ä¸œè¥¿ã€‚ä¹¦åº—ä¼šæŠŠä¸€æœ¬ä¹¦æ”¾åœ¨æ˜¾çœ¼çš„ä½ç½®ï¼Œä½†å¹¶ä¸èƒ½è¯´æ˜è¿™æ˜¯ä¸€æœ¬å¥½ä¹¦ï¼Œæœ‰å¯èƒ½åŒ…è£…å¥½ï¼Œæœ‰å¯èƒ½å°é¢å¥½ï¼Œæœ‰å¯èƒ½åªæ˜¯æ ‡é¢˜å¸å¼•äººï¼Œæœ‰å¯èƒ½è¿™æœ¬ä¹¦å¾ˆæµè¡Œæˆ–è€…å¾ˆç•…é”€ã€‚\n\næ‰¹åˆ¤æ€§æ€ç»´æœ‰äº”ä¸ªä½ éœ€è¦æ€è€ƒçš„æ–¹å‘\n\n* é‡å¤æ€§çš„é—® `ä¸ºä»€ä¹ˆ`\n* è°èƒ½ä»ä¸­å—ç›Šï¼Œäº†è§£èµ„é‡‘æµçš„è½¬å‘\n* ä»€ä¹ˆèƒŒæ™¯ä¸‹å‘ç”Ÿçš„è¿™ä»¶äº‹æƒ…\n* å¼€å§‹åä¼šå‘ç”Ÿä»€ä¹ˆï¼Œç»“æŸåä¼šå‘ç”Ÿä»€ä¹ˆ\n* ä¸ºä»€ä¹ˆè¿™æ˜¯ä¸ªé—®é¢˜\n\nä½ å¥½ï¼Œæˆ‘æ˜¯ cxuanï¼Œæˆ‘è‡ªå·±æ‰‹å†™äº†å››æœ¬ PDFï¼Œåˆ†åˆ«æ˜¯ JavaåŸºç¡€æ€»ç»“ã€HTTP æ ¸å¿ƒæ€»ç»“ã€è®¡ç®—æœºåŸºç¡€çŸ¥è¯†ï¼Œæ“ä½œç³»ç»Ÿæ ¸å¿ƒæ€»ç»“ï¼Œæˆ‘å·²ç»æ•´ç†æˆä¸º PDFï¼Œå¯ä»¥å…³æ³¨å…¬ä¼—å· Javaå»ºè®¾è€… å›å¤ PDF é¢†å–ä¼˜è´¨èµ„æ–™ã€‚\n\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8de118aa89994647ad076f51bde1600c~tplv-k3u1fbpfcp-zoom-1.image)\n\n\n", "user_name": "ç¨‹åºå‘˜cxuan", "description": "å…¬ä¼—å· Java å»ºè®¾è€… å·ä¸»", "got_view_count": 314495, "category_name": "ä»£ç äººç”Ÿ", "ctime": 1553759544}
{"tag_name": "é¢è¯•", "concern_user_count": 285351, "user_id": "747323638163768", "title": "ã€Šå¤§å‰ç«¯è¿›é˜¶ å®‰å…¨ã€‹ç³»åˆ— RSA ç®—æ³•åŠ Python å®ç°", "mark_content": "<div class=\"output_wrapper\" id=\"output_wrapper_id\" style=\"font-size: 15px; color: rgb(62, 62, 62); line-height: 1.8; word-spacing: 2px; letter-spacing: 2px; font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif; background-image: linear-gradient(90deg, rgba(50, 0, 0, 0.05) 3%, rgba(0, 0, 0, 0) 3%), linear-gradient(360deg, rgba(50, 0, 0, 0.05) 3%, rgba(0, 0, 0, 0) 3%); background-size: 20px 20px; background-position: center center;\"><figure style=\"font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px;\"><img src=\"http://jieshuiguai.oss-cn-hangzhou.aliyuncs.com/2020-03-21-023030.jpg\" alt=\"\" title=\"\" style=\"font-size: inherit; color: inherit; line-height: inherit; padding: 0px; display: block; margin: 0px auto; max-width: 100%;\"><figcaption style=\"line-height: inherit; margin: 0px; padding: 0px; margin-top: 10px; text-align: center; color: rgb(153, 153, 153); font-size: 0.7em;\"></figcaption></figure>\n<h3 id=\"h\" style=\"color: inherit; line-height: inherit; padding: 0px; margin: 1.6em 0px; font-weight: bold; border-bottom: 2px solid rgb(239, 112, 96); font-size: 1.3em;\"><span style=\"font-size: inherit; line-height: inherit; margin: 0px; display: inline-block; font-weight: normal; background: rgb(239, 112, 96); color: rgb(255, 255, 255); padding: 3px 10px 1px; border-top-right-radius: 3px; border-top-left-radius: 3px; margin-right: 3px;\">å‰è¨€</span><span style=\"display: inline-block; vertical-align: bottom; border-bottom: 36px solid rgb(239, 235, 233); border-right: 20px solid transparent;\"> </span></h3>\n<blockquote style=\"line-height: inherit; display: block; padding: 15px 15px 15px 1rem; font-size: 0.9em; margin: 1em 0px; color: rgb(0, 0, 0); border-left: 5px solid rgb(239, 112, 96); background: rgb(239, 235, 233); overflow: auto; overflow-wrap: normal; word-break: normal;\">\n  <p style=\"font-size: inherit; color: inherit; line-height: inherit; padding: 0px; margin: 0px;\">æœ¬æ–‡å·²æ”¶å½• <a href=\"https://github.com/ponkans/F2E\" style=\"font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; text-decoration: none; color: rgb(30, 107, 184); overflow-wrap: break-word;\">GitHub https://github.com/ponkans/F2E</a>ï¼ˆæœ‰æ€ªæ€ªæ•´ç†çš„å¤§å‰ç«¯çŸ¥è¯†æŠ€èƒ½æ ‘ï¼‰ï¼Œæ¬¢è¿ Starï¼ŒæŒç»­æ›´æ–°ğŸ’§</p>\n</blockquote>\n<p style=\"font-size: inherit; color: inherit; line-height: inherit; padding: 0px; margin: 1.7em 0px;\">æœ€è¿‘åšå‡ ä¸ª ctf çš„ crypto é¢˜ï¼Œå¥½å‡ é“ RSA éƒ½æ²¡æ³•ç”¨ä»¥å‰æ— è„‘å·¥å…·ç ´æå®šäº†ï¼Œæ‰€ä»¥æ·±å…¥ç ”ç©¶äº†ä¸€ä¸‹åŸç†å’Œä¸€äº›å° trickï¼ŒæŠŠè‡ªå·±çš„ä¸€ç‚¹ä½“ä¼šåˆ†äº«å‡ºæ¥ï¼Œå…±åŒå­¦ä¹ ã€‚</p>\n<h3 id=\"h-1\" style=\"color: inherit; line-height: inherit; padding: 0px; margin: 1.6em 0px; font-weight: bold; border-bottom: 2px solid rgb(239, 112, 96); font-size: 1.3em;\"><span style=\"font-size: inherit; line-height: inherit; margin: 0px; display: inline-block; font-weight: normal; background: rgb(239, 112, 96); color: rgb(255, 255, 255); padding: 3px 10px 1px; border-top-right-radius: 3px; border-top-left-radius: 3px; margin-right: 3px;\">ç®—æ³•åŸºæœ¬æ€è·¯</span><span style=\"display: inline-block; vertical-align: bottom; border-bottom: 36px solid rgb(239, 235, 233); border-right: 20px solid transparent;\"> </span></h3>\n<p style=\"font-size: inherit; color: inherit; line-height: inherit; padding: 0px; margin: 1.7em 0px;\">RSA ç®—æ³•æ˜¯ä¸€ç§éå¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œæ˜¯ç°åœ¨å¹¿æ³›ä½¿ç”¨çš„å…¬é’¥åŠ å¯†ç®—æ³•ï¼Œä¸»è¦åº”ç”¨æ˜¯åŠ å¯†ä¿¡æ¯å’Œæ•°å­—ç­¾åã€‚è¯¦æƒ…è¯·çœ‹<a href=\"https://zh.wikipedia.org/wiki/RSAåŠ å¯†æ¼”ç®—æ³•\" style=\"font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; text-decoration: none; color: rgb(30, 107, 184); overflow-wrap: break-word;\">ç»´åŸº</a></p>\n<h3 id=\"h-2\" style=\"color: inherit; line-height: inherit; padding: 0px; margin: 1.6em 0px; font-weight: bold; border-bottom: 2px solid rgb(239, 112, 96); font-size: 1.3em;\"><span style=\"font-size: inherit; line-height: inherit; margin: 0px; display: inline-block; font-weight: normal; background: rgb(239, 112, 96); color: rgb(255, 255, 255); padding: 3px 10px 1px; border-top-right-radius: 3px; border-top-left-radius: 3px; margin-right: 3px;\">å…¬é’¥ä¸ç§é’¥çš„ç”Ÿæˆ</span><span style=\"display: inline-block; vertical-align: bottom; border-bottom: 36px solid rgb(239, 235, 233); border-right: 20px solid transparent;\"> </span></h3>\n<ol style=\"font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; padding-left: 32px; list-style-type: decimal;\">\n<li style=\"font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; margin-bottom: 0.5em;\">éšæœºæŒ‘é€‰ä¸¤ä¸ªå¤§è´¨æ•° p å’Œ qï¼Œæ„é€  <code style=\"font-size: inherit; line-height: inherit; overflow-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0px 2px; color: rgb(248, 35, 117); background: rgb(248, 248, 248);\">N = p*q</code>ï¼›</li>\n<li style=\"font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; margin-bottom: 0.5em;\">è®¡ç®—æ¬§æ‹‰å‡½æ•° <code style=\"font-size: inherit; line-height: inherit; overflow-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0px 2px; color: rgb(248, 35, 117); background: rgb(248, 248, 248);\">Ï†(N) = (p-1) * (q-1)</code>ï¼›</li>\n<li style=\"font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; margin-bottom: 0.5em;\">éšæœºæŒ‘é€‰ eï¼Œä½¿å¾— <code style=\"font-size: inherit; line-height: inherit; overflow-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0px 2px; color: rgb(248, 35, 117); background: rgb(248, 248, 248);\">gcd(e, Ï†(N)) = 1</code>ï¼Œå³ e ä¸ Ï†(N) äº’ç´ ï¼›</li>\n<li style=\"font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; margin-bottom: 0.5em;\">è®¡ç®— dï¼Œä½¿å¾— <code style=\"font-size: inherit; line-height: inherit; overflow-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0px 2px; color: rgb(248, 35, 117); background: rgb(248, 248, 248);\">e*d â‰¡ 1 (mod Ï†(N))</code>ï¼Œå³ d æ˜¯ e çš„ä¹˜æ³•é€†å…ƒã€‚</li>\n</ol>\n<p style=\"font-size: inherit; color: inherit; line-height: inherit; padding: 0px; margin: 1.7em 0px;\">æ­¤æ—¶ï¼Œå…¬é’¥ä¸ºï¼ˆe, Nï¼‰ï¼Œç§é’¥ä¸ºï¼ˆd, Nï¼‰ï¼Œå…¬é’¥å…¬å¼€ï¼Œç§é’¥è‡ªå·±ä¿ç®¡ã€‚</p>\n<h3 id=\"h-3\" style=\"color: inherit; line-height: inherit; padding: 0px; margin: 1.6em 0px; font-weight: bold; border-bottom: 2px solid rgb(239, 112, 96); font-size: 1.3em;\"><span style=\"font-size: inherit; line-height: inherit; margin: 0px; display: inline-block; font-weight: normal; background: rgb(239, 112, 96); color: rgb(255, 255, 255); padding: 3px 10px 1px; border-top-right-radius: 3px; border-top-left-radius: 3px; margin-right: 3px;\">åŠ å¯†ä¿¡æ¯</span><span style=\"display: inline-block; vertical-align: bottom; border-bottom: 36px solid rgb(239, 235, 233); border-right: 20px solid transparent;\"> </span></h3>\n<ol style=\"font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; padding-left: 32px; list-style-type: decimal;\">\n<li style=\"font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; margin-bottom: 0.5em;\"><span style=\"font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px;\">å¾…åŠ å¯†ä¿¡æ¯ï¼ˆæ˜æ–‡ï¼‰ä¸º Mï¼ŒM &lt; Nï¼›ï¼ˆå› ä¸ºè¦åšæ¨¡è¿ç®—ï¼Œè‹¥ M å¤§äº Nï¼Œåˆ™åé¢çš„è¿ç®—ä¸ä¼šæˆç«‹ï¼Œå› æ­¤å½“ä¿¡æ¯æ¯” N è¦å¤§æ—¶ï¼Œåº”è¯¥åˆ†å—åŠ å¯†ï¼‰</span></li>\n<li style=\"font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; margin-bottom: 0.5em;\">å¯†æ–‡ <code style=\"font-size: inherit; line-height: inherit; overflow-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0px 2px; color: rgb(248, 35, 117); background: rgb(248, 248, 248);\">C = Me mod N</code></li>\n<li style=\"font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; margin-bottom: 0.5em;\">è§£å¯† <code style=\"font-size: inherit; line-height: inherit; overflow-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0px 2px; color: rgb(248, 35, 117); background: rgb(248, 248, 248);\">Cd mod N = (Me)d mod N = Md*e mod N</code> ï¼›</li>\n</ol>\n<p style=\"font-size: inherit; color: inherit; line-height: inherit; padding: 0px; margin: 1.7em 0px;\">è¦ç†è§£ä¸ºä»€ä¹ˆèƒ½è§£å¯†ï¼Ÿè¦ç”¨åˆ°æ¬§æ‹‰å®šç†ï¼ˆå…¶å®æ˜¯è´¹é©¬å°å®šç†çš„æ¨å¹¿ï¼‰</p>\n<pre style=\"font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px;\"><code class=\"hljs lua\" style=\"overflow-wrap: break-word; margin: 0px 2px; line-height: 18px; font-size: 14px; font-weight: normal; word-spacing: 0px; letter-spacing: 0px; font-family: Consolas, Inconsolata, Courier, monospace; border-radius: 0px; overflow-x: auto; padding: 0.5em; background: rgb(63, 63, 63); color: rgb(220, 220, 220); display: block !important; white-space: pre !important; word-wrap: normal !important; word-break: normal !important; overflow: auto !important;\">aÏ†(n)&nbsp;â‰¡&nbsp;<span class=\"hljs-number\" style=\"font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: rgb(140, 208, 211); word-wrap: inherit !important; word-break: inherit !important;\">1</span>&nbsp;(<span class=\"hljs-built_in\" style=\"font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: rgb(204, 147, 147); word-wrap: inherit !important; word-break: inherit !important;\">mod</span>&nbsp;n)<br></code></pre>\n<p style=\"font-size: inherit; color: inherit; line-height: inherit; padding: 0px; margin: 1.7em 0px;\">å†æ¨å¹¿ï¼š</p>\n<pre style=\"font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px;\"><code class=\"hljs lua\" style=\"overflow-wrap: break-word; margin: 0px 2px; line-height: 18px; font-size: 14px; font-weight: normal; word-spacing: 0px; letter-spacing: 0px; font-family: Consolas, Inconsolata, Courier, monospace; border-radius: 0px; overflow-x: auto; padding: 0.5em; background: rgb(63, 63, 63); color: rgb(220, 220, 220); display: block !important; white-space: pre !important; word-wrap: normal !important; word-break: normal !important; overflow: auto !important;\">aÏ†(n)*k&nbsp;â‰¡&nbsp;<span class=\"hljs-number\" style=\"font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: rgb(140, 208, 211); word-wrap: inherit !important; word-break: inherit !important;\">1</span>&nbsp;(<span class=\"hljs-built_in\" style=\"font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: rgb(204, 147, 147); word-wrap: inherit !important; word-break: inherit !important;\">mod</span>&nbsp;n)<br></code></pre>\n<p style=\"font-size: inherit; color: inherit; line-height: inherit; padding: 0px; margin: 1.7em 0px;\">å¾—ï¼š</p>\n<pre style=\"font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px;\"><code class=\"hljs lua\" style=\"overflow-wrap: break-word; margin: 0px 2px; line-height: 18px; font-size: 14px; font-weight: normal; word-spacing: 0px; letter-spacing: 0px; font-family: Consolas, Inconsolata, Courier, monospace; border-radius: 0px; overflow-x: auto; padding: 0.5em; background: rgb(63, 63, 63); color: rgb(220, 220, 220); display: block !important; white-space: pre !important; word-wrap: normal !important; word-break: normal !important; overflow: auto !important;\">aÏ†(n)*k+<span class=\"hljs-number\" style=\"font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: rgb(140, 208, 211); word-wrap: inherit !important; word-break: inherit !important;\">1</span>&nbsp;â‰¡&nbsp;a&nbsp;(<span class=\"hljs-built_in\" style=\"font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; color: rgb(204, 147, 147); word-wrap: inherit !important; word-break: inherit !important;\">mod</span>&nbsp;n)<br></code></pre>\n<p style=\"font-size: inherit; color: inherit; line-height: inherit; padding: 0px; margin: 1.7em 0px;\">æ³¨æ„åˆ° <code style=\"font-size: inherit; line-height: inherit; overflow-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0px 2px; color: rgb(248, 35, 117); background: rgb(248, 248, 248);\">e*d â‰¡ 1 mod Ï†(N)</code>ï¼Œå³ï¼š<code style=\"font-size: inherit; line-height: inherit; overflow-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0px 2px; color: rgb(248, 35, 117); background: rgb(248, 248, 248);\">e*d = 1 + k*Ï†(N)</code>ã€‚<br>å› æ­¤ï¼Œ<code style=\"font-size: inherit; line-height: inherit; overflow-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0px 2px; color: rgb(248, 35, 117); background: rgb(248, 248, 248);\">Md*e mod N = M1 + k*Ï†(N) mod N = M</code><br>ç®€å•æ¥è¯´ï¼Œåˆ«äººç”¨æˆ‘çš„å…¬é’¥åŠ å¯†ä¿¡æ¯å‘ç»™æˆ‘ï¼Œç„¶åæˆ‘ç”¨ç§é’¥è§£å¯†ã€‚</p>\n<h3 id=\"h-4\" style=\"color: inherit; line-height: inherit; padding: 0px; margin: 1.6em 0px; font-weight: bold; border-bottom: 2px solid rgb(239, 112, 96); font-size: 1.3em;\"><span style=\"font-size: inherit; line-height: inherit; margin: 0px; display: inline-block; font-weight: normal; background: rgb(239, 112, 96); color: rgb(255, 255, 255); padding: 3px 10px 1px; border-top-right-radius: 3px; border-top-left-radius: 3px; margin-right: 3px;\">æ•°å­—ç­¾å</span><span style=\"display: inline-block; vertical-align: bottom; border-bottom: 36px solid rgb(239, 235, 233); border-right: 20px solid transparent;\"> </span></h3>\n<ol style=\"font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; padding-left: 32px; list-style-type: decimal;\">\n<li style=\"font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; margin-bottom: 0.5em;\">å¯†æ–‡ <code style=\"font-size: inherit; line-height: inherit; overflow-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0px 2px; color: rgb(248, 35, 117); background: rgb(248, 248, 248);\">C = Md mod N</code></li>\n<li style=\"font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px; margin-bottom: 0.5em;\">è§£å¯† <code style=\"font-size: inherit; line-height: inherit; overflow-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0px 2px; color: rgb(248, 35, 117); background: rgb(248, 248, 248);\">M = Ce mod N = (Md)e mod N = Md*e mod N = M</code>ï¼›ï¼ˆåŸç†åŒä¸Šï¼‰</li>\n</ol>\n<p style=\"font-size: inherit; color: inherit; line-height: inherit; padding: 0px; margin: 1.7em 0px;\">ç®€å•æ¥è¯´ï¼Œæˆ‘ç”¨è‡ªå·±çš„å¯†é’¥åŠ å¯†ç­¾åï¼Œåˆ«äººç”¨æˆ‘çš„å…¬é’¥è§£å¯†å¯ä»¥çœ‹åˆ°è¿™æ˜¯æˆ‘çš„ç­¾åã€‚æ³¨æ„ï¼Œè¿™ä¸ªä¸å…·æœ‰éšç§æ€§ï¼Œå³ä»»ä½•äººéƒ½å¯ä»¥è§£å¯†æ­¤ç­¾åã€‚</p>\n<p style=\"font-size: inherit; color: inherit; line-height: inherit; padding: 0px; margin: 1.7em 0px;\">ç®—æ³•çš„å®‰å…¨æ€§ï¼šåŸºäºå¤§æ•´æ•° N éš¾ä»¥åˆ†è§£å‡º p å’Œ qï¼Œæ„é€  Ï†(N)ï¼›æˆ–ç”± N ç›´æ¥æ„é€  Ï†(N) åŒæ ·éš¾ã€‚</p>\n<h3 id=\"hpython\" style=\"color: inherit; line-height: inherit; padding: 0px; margin: 1.6em 0px; font-weight: bold; border-bottom: 2px solid rgb(239, 112, 96); font-size: 1.3em;\"><span style=\"font-size: inherit; line-height: inherit; margin: 0px; display: inline-block; font-weight: normal; background: rgb(239, 112, 96); color: rgb(255, 255, 255); padding: 3px 10px 1px; border-top-right-radius: 3px; border-top-left-radius: 3px; margin-right: 3px;\">Python å®ç°åŸºæœ¬åŸç†</span><span style=\"display: inline-block; vertical-align: bottom; border-bottom: 36px solid rgb(239, 235, 233); border-right: 20px solid transparent;\"> </span></h3>\n<figure style=\"font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px;\"><img src=\"http://jieshuiguai.oss-cn-hangzhou.aliyuncs.com/2020-08-09-183248.png\" alt=\"\" title=\"\" style=\"font-size: inherit; color: inherit; line-height: inherit; padding: 0px; display: block; margin: 0px auto; max-width: 100%;\"><figcaption style=\"line-height: inherit; margin: 0px; padding: 0px; margin-top: 10px; text-align: center; color: rgb(153, 153, 153); font-size: 0.7em;\"></figcaption></figure>\n<h3 id=\"hveryeasyrsa\" style=\"color: inherit; line-height: inherit; padding: 0px; margin: 1.6em 0px; font-weight: bold; border-bottom: 2px solid rgb(239, 112, 96); font-size: 1.3em;\"><span style=\"font-size: inherit; line-height: inherit; margin: 0px; display: inline-block; font-weight: normal; background: rgb(239, 112, 96); color: rgb(255, 255, 255); padding: 3px 10px 1px; border-top-right-radius: 3px; border-top-left-radius: 3px; margin-right: 3px;\">veryeasyRSA</span><span style=\"display: inline-block; vertical-align: bottom; border-bottom: 36px solid rgb(239, 235, 233); border-right: 20px solid transparent;\"> </span></h3>\n<blockquote style=\"line-height: inherit; display: block; padding: 15px 15px 15px 1rem; font-size: 0.9em; margin: 1em 0px; color: rgb(0, 0, 0); border-left: 5px solid rgb(239, 112, 96); background: rgb(239, 235, 233); overflow: auto; overflow-wrap: normal; word-break: normal;\">\n  <p style=\"font-size: inherit; color: inherit; line-height: inherit; padding: 0px; margin: 0px;\">å·²çŸ¥ RSA å…¬é’¥ç”Ÿæˆå‚æ•°ï¼š<br>p = 3487583947589437589237958723892346254777<br>q = 8767867843568934765983476584376578389<br>e = 65537<br>æ±‚ d =<br>è¯·æäº¤ PCTF {d}</p>\n</blockquote>\n<p style=\"font-size: inherit; color: inherit; line-height: inherit; padding: 0px; margin: 1.7em 0px;\">å¯¹ä¸Šè¿°ä»£ç ç¨ä½œä¿®æ”¹ï¼Œå–æœ‰ç”¨çš„æ‰©å±•æ¬§æ‹‰å’Œè®¡ç®— d çš„ä¸¤ä¸ªå‡½æ•°ï¼Œæ„é€ å¦‚ä¸‹ä»£ç ï¼Œå³å¯è§£å‡ºç­”æ¡ˆã€‚</p>\n<figure style=\"font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px;\"><img src=\"http://jieshuiguai.oss-cn-hangzhou.aliyuncs.com/2020-08-09-183306.png\" alt=\"\" title=\"\" style=\"font-size: inherit; color: inherit; line-height: inherit; padding: 0px; display: block; margin: 0px auto; max-width: 100%;\"><figcaption style=\"line-height: inherit; margin: 0px; padding: 0px; margin-top: 10px; text-align: center; color: rgb(153, 153, 153); font-size: 0.7em;\"></figcaption></figure>\n<h3 id=\"heasyrsa\" style=\"color: inherit; line-height: inherit; padding: 0px; margin: 1.6em 0px; font-weight: bold; border-bottom: 2px solid rgb(239, 112, 96); font-size: 1.3em;\"><span style=\"font-size: inherit; line-height: inherit; margin: 0px; display: inline-block; font-weight: normal; background: rgb(239, 112, 96); color: rgb(255, 255, 255); padding: 3px 10px 1px; border-top-right-radius: 3px; border-top-left-radius: 3px; margin-right: 3px;\">easyRSA</span><span style=\"display: inline-block; vertical-align: bottom; border-bottom: 36px solid rgb(239, 235, 233); border-right: 20px solid transparent;\"> </span></h3>\n<blockquote style=\"line-height: inherit; display: block; padding: 15px 15px 15px 1rem; font-size: 0.9em; margin: 1em 0px; color: rgb(0, 0, 0); border-left: 5px solid rgb(239, 112, 96); background: rgb(239, 235, 233); overflow: auto; overflow-wrap: normal; word-break: normal;\">\n  <p style=\"font-size: inherit; color: inherit; line-height: inherit; padding: 0px; margin: 0px;\">è¿˜è®°å¾— veryeasy RSA å—ï¼Ÿæ˜¯ä¸æ˜¯ä¸éš¾ï¼Ÿé‚£ç»§ç»­æ¥çœ‹çœ‹è¿™é¢˜å§ï¼Œè¿™é¢˜ä¹Ÿä¸éš¾ã€‚<br>å·²çŸ¥ä¸€æ®µ RSA åŠ å¯†çš„ä¿¡æ¯ä¸ºï¼š0xdc2eeeb2782c ä¸”å·²çŸ¥åŠ å¯†æ‰€ç”¨çš„å…¬é’¥ï¼š<br>(N=322831561921859 e = 23)<br>è¯·è§£å¯†å‡ºæ˜æ–‡ï¼Œæäº¤æ—¶è¯·å°†æ•°å­—è½¬åŒ–ä¸º ascii ç æäº¤<br>æ¯”å¦‚ä½ è§£å‡ºçš„æ˜æ–‡æ˜¯ 0x6162ï¼Œé‚£ä¹ˆè¯·æäº¤å­—ç¬¦ä¸² ab<br>æäº¤æ ¼å¼ï¼šPCTF {æ˜æ–‡å­—ç¬¦ä¸²}</p>\n</blockquote>\n<p style=\"font-size: inherit; color: inherit; line-height: inherit; padding: 0px; margin: 1.7em 0px;\">ä¾ç„¶æ˜¯ä¸€æ ·çš„æ€è·¯ï¼Œå–æœ‰ç”¨çš„å‡½æ•°ï¼Œç¨ä½œä¿®æ”¹ã€‚</p>\n<figure style=\"font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px;\"><img src=\"http://jieshuiguai.oss-cn-hangzhou.aliyuncs.com/2020-08-09-183506.png\" alt=\"\" title=\"\" style=\"font-size: inherit; color: inherit; line-height: inherit; padding: 0px; display: block; margin: 0px auto; max-width: 100%;\"><figcaption style=\"line-height: inherit; margin: 0px; padding: 0px; margin-top: 10px; text-align: center; color: rgb(153, 153, 153); font-size: 0.7em;\"></figcaption></figure>\n<h3 id=\"h-5\" style=\"color: inherit; line-height: inherit; padding: 0px; margin: 1.6em 0px; font-weight: bold; border-bottom: 2px solid rgb(239, 112, 96); font-size: 1.3em;\"><span style=\"font-size: inherit; line-height: inherit; margin: 0px; display: inline-block; font-weight: normal; background: rgb(239, 112, 96); color: rgb(255, 255, 255); padding: 3px 10px 1px; border-top-right-radius: 3px; border-top-left-radius: 3px; margin-right: 3px;\">æ€»ç»“</span><span style=\"display: inline-block; vertical-align: bottom; border-bottom: 36px solid rgb(239, 235, 233); border-right: 20px solid transparent;\"> </span></h3>\n<p style=\"font-size: inherit; color: inherit; line-height: inherit; padding: 0px; margin: 1.7em 0px;\">ç®€å•ä»‹ç»äº† RSA ç®—æ³•ä»¥åŠ Python çš„å®ç°æ–¹å¼ï¼Œå¶å°”é¢è¯•ä¹Ÿä¼šé—®åˆ°å“¦ã€‚</p>\n<p style=\"font-size: inherit; color: inherit; line-height: inherit; padding: 0px; margin: 1.7em 0px;\">å–œæ¬¢çš„å°ä¼™ä¼´åŠ ä¸ªå…³æ³¨ï¼Œç‚¹ä¸ªèµå“¦ï¼Œæ„Ÿæ©ğŸ’•ğŸ˜Š</p>\n<h3 id=\"h-6\" style=\"color: inherit; line-height: inherit; padding: 0px; margin: 1.6em 0px; font-weight: bold; border-bottom: 2px solid rgb(239, 112, 96); font-size: 1.3em;\"><span style=\"font-size: inherit; line-height: inherit; margin: 0px; display: inline-block; font-weight: normal; background: rgb(239, 112, 96); color: rgb(255, 255, 255); padding: 3px 10px 1px; border-top-right-radius: 3px; border-top-left-radius: 3px; margin-right: 3px;\">è”ç³»æˆ‘ / å…¬ä¼—å·</span><span style=\"display: inline-block; vertical-align: bottom; border-bottom: 36px solid rgb(239, 235, 233); border-right: 20px solid transparent;\"> </span></h3>\n<p style=\"font-size: inherit; color: inherit; line-height: inherit; padding: 0px; margin: 1.7em 0px;\">å¾®ä¿¡æœç´¢ã€<strong style=\"font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; font-weight: bold; color: rgb(233, 105, 0);\">æ¥æ°´æ€ª</strong>ã€‘æˆ–æ‰«æä¸‹é¢äºŒç»´ç å›å¤â€åŠ ç¾¤â€œï¼Œæˆ‘ä¼šæ‹‰ä½ è¿›æŠ€æœ¯äº¤æµç¾¤ã€‚è®²çœŸçš„ï¼Œåœ¨è¿™ä¸ªç¾¤ï¼Œå“ªæ€•æ‚¨ä¸è¯´è¯ï¼Œå…‰çœ‹èŠå¤©è®°å½•ä¹Ÿæ˜¯ä¸€ç§æˆé•¿ã€‚ï¼ˆ<strong style=\"font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; font-weight: bold; color: rgb(233, 105, 0);\"><em style=\"font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; font-weight: bold; color: rgb(197, 17, 98);\">é˜¿é‡ŒæŠ€æœ¯ä¸“å®¶ã€æ•–ä¸™ä½œè€…ã€Java3yã€è˜‘è‡è¡—èµ„æ·±å‰ç«¯ã€èš‚èšé‡‘æœå®‰å…¨ä¸“å®¶</em></strong>ã€å„è·¯å¤§ç‰›éƒ½åœ¨ï¼‰ã€‚</p>\n<p style=\"font-size: inherit; color: inherit; line-height: inherit; padding: 0px; margin: 1.7em 0px;\">æ¥æ°´æ€ªä¹Ÿä¼šå®šæœŸåŸåˆ›ï¼Œå®šæœŸè·Ÿå°ä¼™ä¼´è¿›è¡Œç»éªŒäº¤æµæˆ–å¸®å¿™çœ‹ç®€å†ã€‚åŠ å…³æ³¨ï¼Œä¸è¿·è·¯ï¼Œæœ‰æœºä¼šä¸€èµ·è·‘ä¸ªæ­¥ğŸƒ <strong style=\"font-size: inherit; line-height: inherit; margin: 0px; padding: 0px; font-weight: bold; color: rgb(233, 105, 0);\">â†“â†“â†“</strong></p>\n<figure style=\"font-size: inherit; color: inherit; line-height: inherit; margin: 0px; padding: 0px;\"><img src=\"http://jieshuiguai.oss-cn-hangzhou.aliyuncs.com/2020-03-17-064351.jpg\" alt=\"\" title=\"\" style=\"font-size: inherit; color: inherit; line-height: inherit; padding: 0px; display: block; margin: 0px auto; max-width: 100%;\"><figcaption style=\"line-height: inherit; margin: 0px; padding: 0px; margin-top: 10px; text-align: center; color: rgb(153, 153, 153); font-size: 0.7em;\"></figcaption></figure></div>", "user_name": "æ¥æ°´æ€ª", "description": "å…¬ä¼—å· @ æ¥æ°´æ€ª", "got_view_count": 128830, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "RESTful", "concern_user_count": 2398, "user_id": "2805609406139950", "title": "Rest-frameworkä¸“æ è®²è§£(åä¸€)ï¼šSerializers (1)", "mark_content": "![MedusaSorcererçš„åšå®¢](https://user-gold-cdn.xitu.io/2019/10/26/16e073e7ae704f8b?w=1390&h=400&f=gif&s=2378622)\n\n---\n\n#### [ç‚¹å‡»è·³è½¬åˆ° Rest-Framework ä¸“æ ç›®å½•](https://juejin.im/post/6844904185163415566)\n\nåºåˆ—åŒ–å¯¹è±¡æ˜¯å¯¹æ£€ç´¢æ•°æ®æˆ–è€…è¯·æ±‚æ•°æ®åˆ¤æ–­çš„æœ€å¥½æ–¹å¼,\nçœç•¥äº†ç¹ççš„è¯·æ±‚æ•°æ®çš„åˆ¤æ–­ä»¥åŠè¿”å›å“åº”æ•°æ®çš„éå†ã€‚\n\n### Serializer\n```python\n#!/usr/bin/env python\n# _*_ Coding: UTF-8 _*_\nfrom datetime import datetime\n\nfrom rest_framework import serializers, settings\n\n\nclass UserSerializer(serializers.Serializer):\n    username = serializers.CharField()\n    blog = serializers.URLField(max_length=200)\n    created = serializers.DateTimeField()\n\n\nclass User:\n    def __init__(self, username, blog, created=None):\n        self.username = username\n        self.blog = blog\n        self.created = created or datetime.now()\n\n\nif __name__ == '__main__':\n    settings.settings.configure()\n\n    user = User(username='MedusaSorcerer', blog='https://juejin.im/user/2805609406139950')\n    serializer = UserSerializer(user)\n    print(serializer.data)\n```\nåœ¨ä¸Šé¢çš„ä»£ç å—ä¸­å®šä¹‰äº†ä¸€ä¸ªç”¨æˆ·åºåˆ—åŒ–ç±»,\næ­¤æ—¶åˆå®šä¹‰äº†ä¸€ä¸ªä»¿é€  `ORM` çš„ç”¨æˆ·ç±»,\nå¹¶å°† `User` çš„å®ä¾‹å¯¹è±¡ `user` ä¼ é€’ç»™åºåˆ—åŒ–çš„ `data` å‚æ•°,\nå°†å¯ä»¥ç”Ÿæˆä¸€ä¸ªåºåˆ—åŒ–å¯¹è±¡,\næ‰“å°åºåˆ—åŒ–å¯¹è±¡çš„ `.data` å±æ€§å¯ä»¥è·å¾—ä»¥ä¸‹æ•°æ®ï¼š\n```python\n{'username': 'MedusaSorcerer', 'blog': 'https://juejin.im/user/2805609406139950', 'created': '2020-08-10T09:58:35.754067'}\n```\nä½ å¯ä»¥ç»§ç»­å°†æ•°æ®æ¸²æŸ“æˆ `JSON` å¯¹è±¡ï¼š\n```python\n#!/usr/bin/env python\n# _*_ Coding: UTF-8 _*_\nfrom datetime import datetime\n\nfrom rest_framework import serializers, settings\n\n\nclass UserSerializer(serializers.Serializer):\n    username = serializers.CharField()\n    blog = serializers.URLField(max_length=200)\n    created = serializers.DateTimeField()\n\n\nclass User:\n    def __init__(self, username, blog, created=None):\n        self.username = username\n        self.blog = blog\n        self.created = created or datetime.now()\n\n\nif __name__ == '__main__':\n    settings.settings.configure()\n    from rest_framework.renderers import JSONRenderer\n\n    user = User(username='MedusaSorcerer', blog='https://juejin.im/user/2805609406139950')\n    serializer = UserSerializer(user)\n    print(JSONRenderer().render(serializer.data))\n```\n> æ³¨æ„åœ¨ä½¿ç”¨è„šæœ¬æ‰§è¡Œçš„æ—¶å€™è°ƒç”¨ `settings.settings.configure()` è·å–é…ç½®ä¿¡æ¯çš„ä½ç½®\n\nè¿è¡Œå®Œæˆä½ å¯ä»¥è·å¾—å­—ç¬¦ï¼š\n```python\nb'{\"username\":\"MedusaSorcerer\",\"blog\":\"https://juejin.im/user/2805609406139950\",\"created\":\"2020-08-10T10:03:36.741946\"}'\n```\n\n### ååºåˆ—åŒ–\n```\n#!/usr/bin/env python\n# _*_ Coding: UTF-8 _*_\nfrom datetime import datetime\nimport io\n\nfrom rest_framework import serializers, settings\n\n\nclass UserSerializer(serializers.Serializer):\n    username = serializers.CharField()\n    blog = serializers.URLField(max_length=200)\n    created = serializers.DateTimeField()\n\n\nclass User:\n    def __init__(self, username, blog, created=None):\n        self.username = username\n        self.blog = blog\n        self.created = created or datetime.now()\n\n\nif __name__ == '__main__':\n    settings.settings.configure()\n    from rest_framework.parsers import JSONParser\n\n    json = b'{\"username\":\"MedusaSorcerer\",\"blog\":\"https://juejin.im/user/2805609406139950\",\"created\":\"2020-08-10T10:03:36.741946\"}'\n    stream = io.BytesIO(json)\n    data = JSONParser().parse(stream)\n    serializer = UserSerializer(data=data)\n    if serializer.is_valid():\n        print(serializer.validated_data)\n    else:\n        print(serializer.errors)\n```\nå°†ä¿å­˜çš„åºåˆ—åŒ–æ•°æ®ååºåˆ—åŒ–ä¸€æ ·å¯ä»¥å®ç°,\næ³¨æ„çš„æ˜¯åœ¨ä½ ååºåˆ—çš„æ—¶å€™éœ€è¦æ‰§è¡Œ `.is_valid()` æ¥åˆ¤æ–­æ•°æ®æ˜¯å¦ç¬¦åˆåºåˆ—åŒ–ç±»å£°æ˜çš„å¯¹è±¡çº¦æŸ,\nå¦‚æœè¿”å›çš„æ˜¯ `False` çš„è¯è¯´æ˜åºåˆ—åŒ–å¯¹è±¡ä¸æ˜¯ç¬¦åˆå£°æ˜å¯¹è±¡çš„é‚£æ ·,\nåœ¨è¿”å› `True` çš„æ—¶å€™å°±å¯ä»¥ç”¨ `serializer.validated_data` è·å–åºåˆ—åŒ–çš„æ•°æ®ï¼š\n```python\nrderedDict([('username', 'MedusaSorcerer'), ('blog', 'https://juejin.im/user/2805609406139950'), ('created', datetime.datetime(2020, 8, 10, 10, 3, 36, 741946))])\n```\né‚£ä¸ç¬¦åˆçº¦æŸçš„æƒ…å†µå°±å¯ä»¥ç”¨ `serializer.errors` è·å–é”™è¯¯ä¿¡æ¯ï¼š\n```error\ndjango.core.exceptions.AppRegistryNotReady: The translation infrastructure cannot be initialized before the apps registry is ready. Check that you don't make non-lazy gettext calls at import time.\n```\näº‹å®ä¸Šåœ¨å¼€å‘ä¸­è¿”å›çš„é”™è¯¯ä¿¡æ¯æ˜¯ä¸€ä¸ªå­—å…¸å¯¹è±¡,\nkey æ˜¯å‡ºç°é”™è¯¯çš„å­—æ®µå­—ç¬¦ä¸²,\nvalue æ˜¯å‡ºç°ä¸ç¬¦åˆçº¦æŸçš„æè¿°åˆ—è¡¨,\nç”±äºæ²¡æœ‰åœ¨ Django é¡¹ç›®ä¸­è¿è¡Œ,\næ‰€ä»¥å‡ºç°äº†ä¸€ä¸ªæŠ¥é”™ä¿¡æ¯(å¿½ç•¥)ã€‚\n\n### ä¿å­˜å®ä¾‹\n```python\n#!/usr/bin/env python\n# _*_ Coding: UTF-8 _*_\nfrom datetime import datetime\n\nfrom rest_framework import serializers\n\n\nclass UserSerializer(serializers.Serializer):\n    username = serializers.CharField()\n    blog = serializers.URLField(max_length=200)\n    created = serializers.DateTimeField()\n\n    def create(self, validated_data):\n        return User(**validated_data)\n\n    def update(self, instance, validated_data):\n        instance.username = validated_data.get('username', instance.username)\n        instance.blog = validated_data.get('blog', instance.blog)\n        instance.created = validated_data.get('created', instance.created)\n        return instance\n\n\nclass User:\n    def __init__(self, username, blog, created=None):\n        self.username = username\n        self.blog = blog\n        self.created = created or datetime.now()\n```\nå¦‚æœä½ æƒ³ä½¿ç”¨éªŒè¯åçš„æ•°æ®è¿”å›ä¸€ä¸ªæ–°çš„å®ä¾‹å¯¹è±¡,\nä½ éœ€è¦å®ç° `create` æˆ–è€… `update` æˆ–è€…ä¸¤ä¸ªæ–¹æ³•éƒ½å®ç°ã€‚\n\nåœ¨ Django-ORM ä¸­ä½ å¯èƒ½éœ€è¦åšä¸€ä¸ªä¿å­˜æ•°æ®çš„æ“ä½œ(ps: å®é™…å¼€å‘ä¸­, å¹¶ä¸ä¼šè¿™æ ·æ“ä½œ, å¾ˆå¤šæ“ä½œéƒ½å¯ä»¥çœç•¥)ï¼š\n```\n#!/usr/bin/env python\n# _*_ Coding: UTF-8 _*_\nfrom datetime import datetime\n\nfrom rest_framework import serializers\n\n\nclass UserSerializer(serializers.Serializer):\n    username = serializers.CharField()\n    blog = serializers.URLField(max_length=200)\n    created = serializers.DateTimeField()\n\n    def create(self, validated_data):\n        return User.objects.create(**validated_data)\n\n    def update(self, instance, validated_data):\n        instance.username = validated_data.get('username', instance.username)\n        instance.blog = validated_data.get('blog', instance.blog)\n        instance.created = validated_data.get('created', instance.created)\n        instance.save()\n        return instance\n```\nä¿å­˜å®ä¾‹æˆ–è€…æ›´æ–°å®ä¾‹çš„ `save()` æ–¹æ³•,\nä¸»è¦æ˜¯çœ‹ä½ æ˜¯å¦åœ¨åˆ›å»ºå®ä¾‹åºåˆ—åŒ–å¯¹è±¡æ˜¯å¦ä¼ é€’äº†å¯¹è±¡ï¼š\n```python\n# æ²¡æœ‰ä¼ é€’å®ä¾‹å¯¹è±¡, æ‰€ä»¥è¿™æ˜¯æ–°å¢\nserializer = UserSerializer(data=data)\n\n# ä¼ é€’äº†ä¸€ä¸ª user å¯¹è±¡, æ‰€ä»¥è¿™æ˜¯æ›´æ–°äº† user å¯¹è±¡çš„æ•°æ®\nserializer = UserSerializer(user, data=data)\n```\n\n### éªŒè¯æ•°æ®\nååºåˆ—åŒ–çš„æ—¶å€™ä½ å¯ä»¥ç›´æ¥è°ƒç”¨åºåˆ—åŒ–å®ä¾‹å¯¹è±¡çš„ `.is_valid()` æ–¹æ³•è¿›è¡Œåˆ¤æ–­çº¦æŸæ•°æ®,\nåœ¨å¼€å‘ä¸­ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ `.is_valid(raise_exception=True)` å°†é”™è¯¯ä¿¡æ¯è¿”å›ç»™ API è°ƒç”¨è€…ã€‚\n\nå¦‚æœå¯¹ä¸€ä¸ªå­—æ®µéœ€è¦ç‰¹æ®Šçš„åˆ¤æ–­,\nä½ å¯ä»¥ä½¿ç”¨ `validate_<field_name>` æ¥è¿›è¡Œé€»è¾‘åˆ¤æ–­,\n`<field_name>` æ˜¯ä½ åœ¨åºåˆ—åŒ–ç±»ä¸­å£°æ˜çš„å­—æ®µåç§°ã€‚\n\n\npsï¼šä½ å¯ä»¥å°†åºåˆ—åŒ–ç±»å’Œ ORM ç±»è”æƒ³,\nä½†æ˜¯æ¦‚å¿µå®Œå…¨ä¸ä¸€æ ·,\né€»è¾‘ä¸Šå¾ˆç›¸ä¼¼ã€‚\n```python\n#!/usr/bin/env python\n# _*_ Coding: UTF-8 _*_\nfrom rest_framework import serializers\n\nclass BlogPostSerializer(serializers.Serializer):\n    title = serializers.CharField(max_length=100)\n    content = serializers.CharField()\n\n    def validate_title(self, value):\n        \"\"\"\n        å¯¹ title å­—æ®µè¿›è¡Œåˆ¤æ–­\n        \"\"\"\n        if 'medusa' not in value.lower():\n            raise serializers.ValidationError(\"Blog post is not about Medusa\")\n        return value\n```\nåŒæ—¶å¯¹å¤šä¸ªå­—æ®µè¿›è¡Œé€»è¾‘åˆ¤æ–­ï¼š\n```python\n#!/usr/bin/env python\n# _*_ Coding: UTF-8 _*_\nfrom rest_framework import serializers\n\n\nclass BlogPostSerializer(serializers.Serializer):\n    title = serializers.CharField(max_length=100)\n    content = serializers.CharField()\n    start = serializers.IntegerField()\n    finish = serializers.IntegerField()\n\n    def validate(self, data):\n        \"\"\"\n        åˆ¤æ–­ä¼ é€’çš„ start å’Œ finish å‚æ•°æ˜¯å¦ç¬¦åˆå¤§å°é€»è¾‘\n        \"\"\"\n        if data['start'] > data['finish']:\n            raise serializers.ValidationError(\"finish must occur after start\")\n        return data\n```\nä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å­—æ®µçº¦æŸä¸Šç›´æ¥å£°æ˜ä½ çš„åˆ¤æ–­ï¼š\n```python\n#!/usr/bin/env python\n# _*_ Coding: UTF-8 _*_\nfrom rest_framework import serializers\n\n\ndef multiple_of_ten(value):\n    if value % 10 != 0:\n        raise serializers.ValidationError('Not a multiple of ten')\n\n\nclass GameRecord(serializers.Serializer):\n    score = serializers.IntegerField(validators=[multiple_of_ten])\n    ...\n```\nåŒæ—¶ä½ å¯ä»¥å£°æ˜å®Œæ•´å­—æ®µéªŒè¯å™¨ï¼š\n```python\n#!/usr/bin/env python\n# _*_ Coding: UTF-8 _*_\nfrom rest_framework import serializers\nfrom rest_framework.validators import UniqueTogetherValidator\n\n\nclass EventSerializer(serializers.Serializer):\n    name = serializers.CharField()\n    room_number = serializers.IntegerField(choices=[101, 102, 103, 201])\n    date = serializers.DateField()\n\n    class Meta:\n        validators = [\n            # å”¯ä¸€æ€§éªŒè¯å™¨\n            UniqueTogetherValidator(\n                queryset=User.objects.all(),\n                fields=['username', 'other']\n            )\n        ]\n```\n\n### è®¿é—®å®ä¾‹å’Œåˆå§‹æ•°æ®\nå½“ä½ å°†åˆå§‹å¯¹è±¡æˆ–æŸ¥è¯¢é›†ä¼ é€’ç»™åºåˆ—åŒ–å®ä¾‹æ—¶,\nè¯¥å¯¹è±¡å°†å˜ä¸ºå¯ä½¿ç”¨ `.instance` å±æ€§è·å–å¯¹è±¡,\nå¦‚æœæ²¡æœ‰ä¼ é€’åˆå§‹å¯¹è±¡,\nåˆ™ `.instance` å±æ€§å€¼ä¸º `None`ã€‚\n\nå°†æ•°æ®ä¼ é€’ç»™åºåˆ—åŒ–ç¨‹åºå®ä¾‹æ—¶,\næœªä¿®æ”¹çš„æ•°æ®å°†ä»¥ `.initial_data` å½¢å¼æä¾›,\nå¦‚æœæœªä¼ é€’ `data` å…³é”®å­—å‚æ•°,\nåˆ™è¯¥ `.initial_data` å±æ€§å°†ä¸å­˜åœ¨ã€‚\n\n### éƒ¨åˆ†æ›´æ–°\né»˜è®¤æƒ…å†µä¸‹,\nå¿…é¡»ä¸ºæ‰€æœ‰å£°æ˜çš„åºåˆ—åŒ–å­—æ®µä¼ é€’å¯¹åº”çš„å€¼,\nå¦åˆ™åºåˆ—åŒ–å™¨ä¼šå¼•å‘éªŒè¯é”™è¯¯,\næ­¤æ—¶ä½ å¯ä»¥ä½¿ç”¨ `partial` å‚æ•°æ¥å…è®¸éƒ¨åˆ†æ›´æ–°ã€‚\n```python\n#!/usr/bin/env python\n# _*_ Coding: UTF-8 _*_\nfrom rest_framework import serializers\n\n\nclass UpdateSerializer(serializers.Serializer):\n    name = serializers.CharField()\n    room_number = serializers.IntegerField(choices=[101, 102, 103, 201])\n    date = serializers.DateField()\n\n\nUpdateSerializer(user, data={'room_number': 101}, partial=True)\n```\n\n### åºåˆ—åŒ–åµŒå¥—\nå¦‚æœä¸€ä¸ªåºåˆ—åŒ–å¯¹è±¡çš„å±æ€§æ˜¯å¦ä¸€ä¸ªåºåˆ—åŒ–å¯¹è±¡,\nåˆè¦æ€ä¹ˆå¤„ç†ï¼Ÿ\n```python\n#!/usr/bin/env python\n# _*_ Coding: UTF-8 _*_\nfrom rest_framework import serializers\n\n\nclass UserSerializer(serializers.Serializer):\n    email = serializers.EmailField()\n    username = serializers.CharField(max_length=100)\n\n\nclass CommentSerializer(serializers.Serializer):\n    user = UserSerializer()\n    content = serializers.CharField(max_length=200)\n    created = serializers.DateTimeField()\n```\nå¦‚æœåµŒå¥—å¯ä»¥é€‰æ‹©æ¥å—è¯¥ `None` å€¼ï¼Œåˆ™åº”å°† `required=False` ä¼ é€’ç»™åµŒå¥—åºåˆ—åŒ–å™¨ï¼š\n```python\nclass CommentSerializer(serializers.Serializer):\n    user = UserSerializer(required=False)\n    content = serializers.CharField(max_length=200)\n    created = serializers.DateTimeField()\n```\nå¦‚æœåµŒå¥—åºåˆ—å¯¹è±¡æ˜¯å¤šæ¡æ•°æ®æ„æˆ,\nåˆ™åº”å°† `many=True` ä¼ é€’ç»™åµŒå¥—åºåˆ—åŒ–ï¼š\n```python\nclass CommentSerializer(serializers.Serializer):\n    user = UserSerializer(required=False)\n    edits = EditItemSerializer(many=True)\n    content = serializers.CharField(max_length=200)\n    created = serializers.DateTimeField()\n```\nå¦‚æœååºåˆ—åŒ–çš„æ•°æ®æ— æ³•é€šè¿‡çº¦æŸ,\né‚£ä¹ˆä¼šé”™è¯¯ä¿¡æ¯è¿”å›è‡³æ„é€ å­—æ®µä¸­ï¼š\n```python\nserializer = CommentSerializer(data={'user': {'email': 'foobar', 'username': 'doe'}, 'content': 'baz'})\nserializer.is_valid()  # False, email å’Œ content æ— æ³•é€šè¿‡éªŒè¯\n\n# è¾“å‡ºé”™è¯¯æ•°æ®\nserializer.errors\n# {'user': {'email': ['Enter a valid e-mail address.']}, 'created': ['This field is required.']}\n```\n\n### åµŒå¥—å¯¹è±¡å¤„ç†ç¤ºä¾‹\n```python\n#!/usr/bin/env python\n# _*_ Coding: UTF-8 _*_\nfrom rest_framework import serializers\n\n\nclass UserSerializer(serializers.ModelSerializer):\n    profile = ProfileSerializer()\n\n    class Meta:\n        model = User\n        fields = ['username', 'email', 'profile']\n\n    def create(self, validated_data):\n        profile_data = validated_data.pop('profile')\n        user = User.objects.create(**validated_data)\n        Profile.objects.create(user=user, **profile_data)\n        return user\n```\n\n### åºåˆ—åŒ–å¤šä¸ªå¯¹è±¡\n```python\nqueryset = Book.objects.all()\nserializer = BookSerializer(queryset, many=True)\nserializer.data\n```\nåºåˆ—åŒ– `serializer.data` çš„å€¼ï¼š\n```python\n[\n    {'id': 0, 'title': 'The electric kool-aid acid test', 'author': 'Tom Wolfe'},\n    {'id': 1, 'title': 'If this is a man', 'author': 'Primo Levi'},\n    {'id': 2, 'title': 'The wind-up bird chronicle', 'author': 'Haruki Murakami'}\n]\n```\n\n### é¢å¤–ä¸Šä¸‹æ–‡é“¾æ¥\nåœ¨æŸäº›æƒ…å†µä¸‹,\né™¤äº†è¦åºåˆ—åŒ–çš„å¯¹è±¡å¤–,\nè¿˜éœ€è¦ä¸ºåºåˆ—åŒ–å™¨æä¾›é¢å¤–çš„ä¸Šä¸‹æ–‡ã€‚\n\nä¸€ç§å¸¸è§çš„æƒ…å†µæ˜¯å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯åŒ…å«è¶…é“¾æ¥å…³ç³»çš„åºåˆ—åŒ–ç¨‹åº,\nåˆ™è¦æ±‚åºåˆ—åŒ–ç¨‹åºæœ‰æƒè®¿é—®å½“å‰è¯·æ±‚,\nä»¥ä¾¿å®ƒå¯ä»¥æ­£ç¡®ç”Ÿæˆå®Œå…¨åˆæ ¼çš„ URLã€‚\n\næ‚¨å¯ä»¥åœ¨å®ä¾‹åŒ–åºåˆ—åŒ–ç¨‹åºæ—¶é€šè¿‡ä¼ é€’ `context` å‚æ•°æ¥æä¾›ä»»æ„å…¶ä»–ä¸Šä¸‹æ–‡ï¼š\n```python\nserializer = AccountSerializer(account, context={'request': request})\nserializer.data\n\n{\n\t'id': 6, \n    'owner': 'denvercoder9', \n    'created': datetime.datetime(2013, 2, 12, 09, 44, 56, 678870), \n    'details': 'http://example.com/accounts/6/details'\n}\n```", "user_name": "MedusaSorcerer", "description": "å­¦æ— æ­¢å¢ƒï¼Œ å­¦æ— æ­¢å°½ã€‚", "got_view_count": 365567, "category_name": "ä»£ç äººç”Ÿ", "ctime": 1553759544}
{"tag_name": "Android", "concern_user_count": 240175, "user_id": "149189281194766", "title": "ã€-Flutterç»„ä»¶ç¯‡- ã€‘1.20æ–°å¢ç»„ä»¶InteractiveViewer ", "mark_content": "#### 0ã€å‰è¨€\n\n> Flutteræ›´æ–°åˆ°1.20ï¼Œå‡ºäº†ä¸€ä¸ªæ–°ç»„ä»¶`InteractiveViewer`,ä¸»è¦å¯¹ç§»åŠ¨ã€ç¼©æ”¾çš„æ‰‹åŠ¿äº¤äº’è¿›è¡Œå°è£…ï¼Œç®€åŒ–ä½¿ç”¨ã€‚\n\n\nç§»åŠ¨ | ç¼©æ”¾\n---|---\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bf75b89426fa4c1e8e991bee9318e1b1~tplv-k3u1fbpfcp-zoom-1.image) | ![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2cd7593aed4c4865bbdb553e26c7ddbb~tplv-k3u1fbpfcp-zoom-1.image)\n\n\n```\nå®¶æ—: StatefulWidget\næºç è¡Œæ•°: 1207\nä¾èµ–çš„æ ¸å¿ƒç»„ä»¶: GestureDetectorã€Transformã€ClipRectã€OverflowBox\n```\n\n- æ­¤ç»„ä»¶å·²åŠ å…¥[FlutterUnit](https://github.com/toly1994328/FlutterUnit/tree/master/lib/views/widgets/StatefulWidget/InteractiveViewer),æ¬¢è¿star~\n\n1 | 2 | 3\n---|---|---\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5c14e295a9d347db891e5ff6a55671c0~tplv-k3u1fbpfcp-zoom-1.image)| ![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0d4343ad41d048b097fab4ac5ecf97c6~tplv-k3u1fbpfcp-zoom-1.image) |![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6c4f8551bafa4c6cb7cecb4ef03dcf7d~tplv-k3u1fbpfcp-zoom-1.image)\n\n---\n\n#### 1ã€å­ç»„ä»¶çš„ç§»åŠ¨\n\nå±æ€§å | ç±»å‹| é»˜è®¤å€¼ | ç®€ä»‹ \n---|---|---|---\nalignPanAxis | bool | false| æ²¿è½´æ‹–åŠ¨\nboundaryMargin |  EdgeInsets | EdgeInsets.zero |è¾¹ç•Œè¾¹çŸ©\npanEnabled | bool |true |æ˜¯å¦å¯å¹³ç§»\nchild | Widget | @required |å­ç»„ä»¶\n\n---\n\n\nç§»åŠ¨ | ç¼©æ”¾\n---|---\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bf75b89426fa4c1e8e991bee9318e1b1~tplv-k3u1fbpfcp-zoom-1.image) | ![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/74cc57a2062f4855b03b91cdd45524a4~tplv-k3u1fbpfcp-zoom-1.image)\n\n- å¦‚å·¦å›¾ï¼Œç°è‰²åŒºåŸŸæ˜¯InteractiveViewerçš„ä¸Šçº§åŒºåŸŸã€‚\n- `boundaryMargin`æ˜¯å¯ç§»åŠ¨çš„é™å®šè¾¹è·ã€‚é»˜è®¤æ˜¯EdgeInsets.zeroï¼Œå³è¢«å®šæ­»ï¼Œä¸èƒ½ç§»åŠ¨\n- `panEnabled`å¯æŒ‡å®šæ˜¯å¦æ”¯æŒç§»åŠ¨,é»˜è®¤ä¸ºtrue\n- `alignPanAxis` æŒ‡å®šæ˜¯å¦æ²¿è½´æ‹–åŠ¨ï¼Œé»˜è®¤ä¸ºfalse(å·¦å›¾)ã€‚å½“ä¸ºtrueæ—¶,æŒ‰ä¸‹ååªèƒ½æ²¿æŸä¸ªè½´å‘è¿›è¡Œæ‹–åŠ¨(å¦‚å³å›¾)\n\n---\n\n- `ç¤ºä¾‹ä»£ç `\n\n```dart\nclass InteractiveViewerDemo extends StatelessWidget {\n\n  @override\n  Widget build(BuildContext context) {\n    return Container(\n      height: 150,\n      color: Colors.grey.withAlpha(33),\n      child: InteractiveViewer(\n//        alignPanAxis: true,\n        panEnabled: true,\n        boundaryMargin: EdgeInsets.all(40.0),\n        child: Container(\n          child: Image.asset('assets/images/caver.jpeg'),\n        ),\n      ),\n    );\n  }\n}\n\n```\n\n---\n\n#### 2ã€å­ç»„ä»¶ç¼©æ”¾\n\n\nå±æ€§å | ç±»å‹| é»˜è®¤å€¼ | ç®€ä»‹ \n---|---|---|---\nmaxScale | double | 2.5 | æœ€å¤§æ”¾å¤§å€æ•°\nminScale | double | 0.8 | æœ€å°ç¼©å°å€æ•°\nscaleEnabled | bool |true |æ˜¯å¦å¯ç¼©æ”¾\n\n\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2cd7593aed4c4865bbdb553e26c7ddbb~tplv-k3u1fbpfcp-zoom-1.image)\n\n- `scaleEnabled`ä¸ºæ˜¯å¦å¼€å¯ç¼©æ”¾ï¼ŒmaxScaleå’ŒminScaleåˆ†åˆ«ç¡®å®šæ”¾å¤§ç¼©å°çš„å€æ•°é™å€¼ã€‚\n\n\n> `ä¼°è®¡ç™¾åˆ†ä¹‹ä¹åçš„äººéƒ½å¾ˆéš¾è§¦å‘ç¼©æ”¾æ•ˆæœ,æ˜¨å¤©åœ¨ç¾¤é‡Œè®¨è®ºåã€‚Alexç»™å‡ºäº†æ‰‹åŠ¿è§¦å‘æƒ…å†µ: å…ˆæŠŠä¸€åªæ‰‹æŒ‡æ”¾ä¸Šå»ï¼Œè¾¹ç§»åŠ¨è¾¹æ”¾ç¬¬äºŒåªã€‚` åŒæ—¶æå‡ºäº†ä¸€ä¸ªissues: [ [InteractiveViewer] Hard to scale when two fingers tap down at the same ](timehttps://github.com/flutter/flutter/issues/63320)\n\n---\n\n- `ç¤ºä¾‹ä»£ç `\n\n\n\n```dart\nclass InteractiveViewerDemo extends StatelessWidget {\n\n  @override\n  Widget build(BuildContext context) {\n    return Container(\n      height: 150,\n      color: Colors.grey.withAlpha(33),\n      child: InteractiveViewer(\n//        alignPanAxis: true,\n        boundaryMargin: EdgeInsets.all(40.0),\n        maxScale: 2.5,\n        minScale: 0.3,\n        panEnabled: true,\n        scaleEnabled: true,\n        child: Container(\n          child: Image.asset('assets/images/caver.jpeg'),\n        ),\n      ),\n    );\n  }\n}\n```\n\n\n---\n\n\n#### 3ã€constrainedå±æ€§\n\nå±æ€§å | ç±»å‹| é»˜è®¤å€¼ | ç®€ä»‹ \n---|---|---|---\nconstrained | bool |true |å—çº¦æŸçš„\n\n\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/21cc1e5df9f84d3da5537bd9509aff73~tplv-k3u1fbpfcp-zoom-1.image)\n\n---\n\n> å…³äºconstrainedå±æ€§ï¼Œæºç ä¸­ç»™äº†ä¸€ä¸ªå°demoã€‚è¿™é‡Œçš„è¡¨æ ¼å¯ä»¥`ä¸Šä¸‹æ»šåŠ¨ï¼Œå·¦å³æ»‘åŠ¨`ã€‚constrainedé»˜è®¤ä¸ºtrue,å½“å­ç»„ä»¶æ¯”InteractiveVieweråŒºåŸŸå¤§æ—¶ï¼Œå°†constrainedè®¾ä¸ºfalse, å­ç»„ä»¶å°†è¢«èµ‹äºˆæ— é™çš„çº¦æŸã€‚\n\n\n```dart\nclass InteractiveViewerDemo2 extends StatelessWidget {\n\n  Widget build(BuildContext context) {\n    const int _rowCount = 20;\n    const int _columnCount = 4;\n\n    return Container(\n      width: 300,\n      height: 200,\n      child: InteractiveViewer(\n        constrained: false,\n        scaleEnabled: false,\n        child: Table(\n          columnWidths: <int, TableColumnWidth>{\n            for (int column = 0; column < _columnCount; column += 1)\n              column: const FixedColumnWidth(150.0),\n          },\n          children: buildRows(_rowCount, _columnCount),\n        ),\n      ),\n    );\n  }\n\n  List<TableRow> buildRows(int rowCount, int columnCount) {\n    return <TableRow>[\n          for (int row = 0; row < rowCount; row += 1)\n            TableRow(\n              children: <Widget>[\n                for (int column = 0; column < columnCount; column += 1)\n                  Container(\n                    margin: EdgeInsets.all(2),\n                    height: 50,\n                    alignment: Alignment.center,\n                    color: _colorful(row,column),\n                    child: Text('($row,$column)',style: TextStyle(fontSize: 20,color: Colors.white),),\n                  ),\n              ],\n            ),\n        ];\n  }\n\n  final colors = [Colors.red,Colors.yellow,Colors.blue,Colors.green];\n  final colors2 = [Colors.yellow,Colors.blue,Colors.green,Colors.red];\n\n  _colorful(int row, int column ) => row % 2==0?colors[column]:colors2[column];\n}\n```\n\n---\n\n#### 4ã€å›è°ƒäº‹ä»¶\n\nå±æ€§å | ç±»å‹| é»˜è®¤å€¼ | ç®€ä»‹ \n---|---|---|---\nonInteractionEnd | GestureScaleEndCallback | null | äº¤äº’ç»“æŸå›è°ƒ\nonInteractionStart | GestureScaleStartCallback | null | äº¤äº’å¼€å§‹å›è°ƒ\nonInteractionUpdate | GestureScaleUpdateCallback | null | äº¤äº’æ›´æ–°å›è°ƒ\n\n---\n\n- `onInteractionStart`\n> å½“è§¦ç¢°æ—¶ï¼ŒonInteractionStart ä¼šå›è°ƒ`ScaleStartDetails`å¯¹è±¡  \n`focalPoint` æ˜¯ç›¸å¯¹äºå±å¹•å·¦ä¸Šè§’çš„åç§»é‡ã€‚  \n`localFocalPoint`æ˜¯ç›¸å¯¹äºçˆ¶å®¹å™¨åŒºåŸŸå·¦ä¸Šè§’çš„åç§»é‡ã€‚\n\n\n```\nScaleStartDetails(\n    focalPoint: Offset(306.0, 168.7), \n    localFocalPoint: Offset(50.4, 63.7)\n)\n```\n\n---\n\n\n- `onInteractionUpdate`\n> å½“æ‰‹æŒ‡æ»‘åŠ¨æ—¶ï¼ŒonInteractionUpdate ä¼šå›è°ƒ`ScaleUpdateDetails`å¯¹è±¡  \n`focalPoint` æ˜¯ç›¸å¯¹äºå±å¹•å·¦ä¸Šè§’çš„åç§»é‡ã€‚    \n`localFocalPoint`æ˜¯ç›¸å¯¹äºçˆ¶å®¹å™¨åŒºåŸŸå·¦ä¸Šè§’çš„åç§»é‡ã€‚  \n`scale`ç¼©æ”¾é‡ã€‚  \n`horizontalScale`æ°´å¹³ç¼©æ”¾é‡ã€‚  \n`verticalScale`ç«–ç›´ç¼©æ”¾é‡ã€‚  \n`rotation`æ—‹è½¬é‡ã€‚------ `è¿™é‡Œè¯´æ˜èƒ½ç›‘å¬åˆ°æ—‹è½¬é‡`\n\n```\nonInteractionUpdate----\nScaleUpdateDetails(\n    focalPoint: Offset(6.4, 13.7), \n    localFocalPoint: Offset(6.4, 13.7),\n    scale: 1.0,\n    horizontalScale: 1.0, \n    verticalScale: 1.0, \n    rotation: 0.0\n)\n```\n\n\n---\n\n\n- `onInteractionEnd`\n> å½“æ‰‹æŒ‡æ»‘åŠ¨æ—¶ï¼ŒonInteractionEnd ä¼šå›è°ƒ`ScaleEndDetails`å¯¹è±¡  \n`velocity` æ°´å¹³å’Œç«–ç›´æ–¹å‘çš„é€Ÿåº¦é‡ã€‚    \n\n```\nonInteractionEnd----\nScaleEndDetails(velocity: Velocity(0.0, 0.0))\n```\n\n---\n\n- `ç¤ºä¾‹ä»£ç `\n\n```\nclass InteractiveViewerDemo extends StatelessWidget {\n\n  @override\n  Widget build(BuildContext context) {\n    return Container(\n      height: 150,\n      color: Colors.grey.withAlpha(33),\n      child: InteractiveViewer(\n        boundaryMargin: EdgeInsets.all(40.0),\n        maxScale: 2.5,\n        minScale: 0.3,\n        panEnabled: true,\n        scaleEnabled: true,\n        child: Container(\n          child: Image.asset('assets/images/caver.jpeg'),\n        ),\n        onInteractionStart: _onInteractionStart,\n        onInteractionUpdate: _onInteractionUpdate,\n        onInteractionEnd: _onInteractionEnd,\n      ),\n    );\n  }\n\n  void _onInteractionStart(ScaleStartDetails details) {\n    print('onInteractionStart----' + details.toString());\n  }\n\n  void _onInteractionUpdate(ScaleUpdateDetails details) {\n    print('onInteractionUpdate----' + details.toString());\n  }\n\n  void _onInteractionEnd(ScaleEndDetails details) {\n    print('onInteractionEnd----' + details.toString());\n  }\n}\n```\n\n---\n\n#### 5.å˜æ¢æ§åˆ¶å™¨ `transformationController`\n\n\nå±æ€§å | ç±»å‹| é»˜è®¤å€¼ | ç®€ä»‹ \n---|---|---|---\ntransformationController | TransformationController |null |å˜åŒ–æ§åˆ¶å™¨\n\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0f2657f96ee64efb9770a18864587ded~tplv-k3u1fbpfcp-zoom-1.image)\n\n---\n\n> å¯ä»¥é€šè¿‡`transformationController`è¿›è¡Œå˜æ¢æ§åˆ¶,å¦‚ä¸Šé¢é€šè¿‡æŒ‰é’®è¿›è¡Œå¤ä½ã€ç§»åŠ¨  \n`TransformationController`æ˜¯ä¸€ä¸ª`Matrix4`æ³›å‹çš„ValueNotifier æ‰€ä»¥å¯ä»¥é€šè¿‡æ”¹å˜TransformationController.valueæ¥å¯¹å­ç»„ä»¶è¿›è¡Œé«˜çº§çš„å˜æ¢æ“ä½œï¼Œ`Matrix4`çš„å¼ºå¤§ï¼Œä½ æ‡‚å¾—...\n\n\n```\nclass TransformationController extends ValueNotifier<Matrix4> {\n```\n\n---\n\n- `ç¤ºä¾‹ä»£ç `\n\n\n```\nclass InteractiveViewerDemo3 extends StatefulWidget {\n  @override\n  _InteractiveViewerDemo3State createState() => _InteractiveViewerDemo3State();\n}\n\nclass _InteractiveViewerDemo3State extends State<InteractiveViewerDemo3>\n    with SingleTickerProviderStateMixin {\n  final TransformationController _transformationController =\n      TransformationController();\n  Animation<Matrix4> _animationReset;\n  AnimationController _controllerReset;\n\n  void _onAnimateReset() {\n    _transformationController.value = _animationReset.value;\n    if (!_controllerReset.isAnimating) {\n      _animationReset?.removeListener(_onAnimateReset);\n      _animationReset = null;\n      _controllerReset.reset();\n    }\n  }\n\n  void _animateResetInitialize() {\n    _controllerReset.reset();\n    _animationReset = Matrix4Tween(\n      begin: _transformationController.value,\n      end: Matrix4.identity(),\n    ).animate(_controllerReset);\n    _animationReset.addListener(_onAnimateReset);\n    _controllerReset.forward();\n  }\n\n  void _animateResetStop() {\n    _controllerReset.stop();\n    _animationReset?.removeListener(_onAnimateReset);\n    _animationReset = null;\n    _controllerReset.reset();\n  }\n\n  void _onInteractionStart(ScaleStartDetails details) {\n    if (_controllerReset.status == AnimationStatus.forward) {\n      _animateResetStop();\n    }\n  }\n\n  @override\n  void initState() {\n    super.initState();\n    _controllerReset = AnimationController(\n      vsync: this,\n      duration: const Duration(milliseconds: 400),\n    );\n  }\n\n  @override\n  void dispose() {\n    _controllerReset.dispose();\n    super.dispose();\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return Wrap(\n      direction: Axis.vertical,\n      spacing: 10,\n      crossAxisAlignment: WrapCrossAlignment.center,\n      alignment: WrapAlignment.center,\n      children: [\n        Container(\n          height: 150,\n          color: Colors.grey.withAlpha(33),\n          child: InteractiveViewer(\n            boundaryMargin: EdgeInsets.all(40),\n            transformationController: _transformationController,\n            minScale: 0.1,\n            maxScale: 1.8,\n            onInteractionStart: _onInteractionStart,\n            child: Container(\n              child: Image.asset('assets/images/caver.jpeg'),\n            ),\n          ),\n        ),\n        Row(\n          mainAxisAlignment: MainAxisAlignment.spaceEvenly,\n          children: [\n            _buildButton(),\n            _buildButton2(),\n            _buildButton3(),\n          ],\n        )\n      ],\n    );\n  }\n\n  Widget _buildButton() {\n    return MaterialButton(\n        child: Icon(\n          Icons.refresh,\n          color: Colors.white,\n        ),\n        color: Colors.green,\n        shape: CircleBorder(\n          side: BorderSide(width: 2.0, color: Color(0xFFFFDFDFDF)),\n        ),\n        onPressed: _animateResetInitialize);\n  }\n\n  var _x = 0.0;\n\n  Widget _buildButton2() {\n    return MaterialButton(\n        child: Icon(\n          Icons.navigate_before,\n          color: Colors.white,\n        ),\n        color: Colors.green,\n        shape: CircleBorder(\n          side: BorderSide(width: 2.0, color: Color(0xFFFFDFDFDF)),\n        ),\n        onPressed: () {\n          var temp = _transformationController.value.clone();\n          temp.translate(_x - 4);\n          _transformationController.value = temp;\n        });\n  }\n\n  Widget _buildButton3() {\n    return MaterialButton(\n        child: Icon(\n          Icons.navigate_next,\n          color: Colors.white,\n        ),\n        color: Colors.green,\n        shape: CircleBorder(\n          side: BorderSide(width: 2.0, color: Color(0xFFFFDFDFDF)),\n        ),\n        onPressed: () {\n          var temp = _transformationController.value.clone();\n          temp.translate(_x + 4);\n          _transformationController.value = temp;\n        });\n  }\n}\n```\n\n---\n\n#### 6.InteractiveViewerçš„æ ¸å¿ƒæºç \n\n> `Listenerç»„ä»¶ + GestureDetectorç»„ä»¶` å®ç°æ‰‹åŠ¿äº¤äº’ç›¸å…³åŠŸèƒ½åŠå›è°ƒ  \n> `Transformç»„ä»¶`é€šè¿‡transformationControllerçš„`Matrix4`è¿›è¡Œå˜æ¢  \n> å¦‚æœ `constrained=false` å¤–ä¼šé™„åŠ ä¸€å±‚`ClipRect+OverflowBox`ã€‚\n\n```\n  @override\n  Widget build(BuildContext context) {\n    Widget child = Transform(\n      transform: _transformationController.value,\n      child: KeyedSubtree(\n        key: _childKey,\n        child: widget.child,\n      ),\n    );\n\n    if (!widget.constrained) {\n      child = ClipRect(\n        child: OverflowBox(\n          alignment: Alignment.topLeft,\n          minWidth: 0.0,\n          minHeight: 0.0,\n          maxWidth: double.infinity,\n          maxHeight: double.infinity,\n          child: child,\n        ),\n      );\n    }\n\n    // A GestureDetector allows the detection of panning and zooming gestures on\n    // the child.\n    return Listener(\n      key: _parentKey,\n      onPointerSignal: _receivedPointerSignal,\n      child: GestureDetector(\n        behavior: HitTestBehavior.opaque, // Necessary when panning off screen.\n        onScaleEnd: _onScaleEnd,\n        onScaleStart: _onScaleStart,\n        onScaleUpdate: _onScaleUpdate,\n        child: child,\n      ),\n    );\n  }\n}\n\n```\n", "user_name": "å¼ é£æ·ç‰¹çƒˆ", "description": "æµ·çš„å½¼å²¸æœ‰æˆ‘æœªæ›¾è§è¯çš„é£é‡‡", "got_view_count": 456400, "category_name": "Android", "ctime": 1461266353}
{"tag_name": "Java", "concern_user_count": 252043, "user_id": "3122268755225869", "title": "Javaå¹¶å‘ç¼–ç¨‹ç¬”è®°ï¼ˆä¸€ï¼‰åŸºç¡€ï¼ˆ1ï¼‰", "mark_content": "## ä¸€ã€å¯è§æ€§ã€åŸå­æ€§å’Œæœ‰åºæ€§\nCPUã€å†…å­˜ã€I/O è®¾å¤‡æ ¸å¿ƒçŸ›ç›¾å°±æ˜¯è¿™ä¸‰è€…çš„é€Ÿåº¦å·®å¼‚ã€‚è§£å†³æ–¹æ³•\n1. CPU å¢åŠ äº†ç¼“å­˜ï¼Œä»¥å‡è¡¡ä¸å†…å­˜çš„é€Ÿåº¦å·®å¼‚ï¼›\n1. æ“ä½œç³»ç»Ÿå¢åŠ äº†è¿›ç¨‹ã€çº¿ç¨‹ï¼Œä»¥åˆ†æ—¶å¤ç”¨ CPUï¼Œè¿›è€Œå‡è¡¡ CPU ä¸ I/O è®¾å¤‡çš„é€Ÿåº¦å·®å¼‚ï¼›\n1. ç¼–è¯‘ç¨‹åºä¼˜åŒ–æŒ‡ä»¤æ‰§è¡Œæ¬¡åºï¼Œä½¿å¾—ç¼“å­˜èƒ½å¤Ÿå¾—åˆ°æ›´åŠ åˆç†åœ°åˆ©ç”¨ã€‚\n\n### ç¼“å­˜å¯¼è‡´çš„å¯è§æ€§é—®é¢˜\nä¸€ä¸ªçº¿ç¨‹å¯¹å…±äº«å˜é‡çš„ä¿®æ”¹ï¼Œå¦å¤–ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿç«‹åˆ»çœ‹åˆ°ï¼Œæˆ‘ä»¬ç§°ä¸º**å¯è§æ€§**ã€‚\n\nå•æ ¸ï¼š\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9f70c28f935e4c38bc50d88ebe628dc3~tplv-k3u1fbpfcp-zoom-1.image)\nå¤šæ ¸ï¼š\n![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/761d95f79ed04361abe584b49df3d837~tplv-k3u1fbpfcp-zoom-1.image)\n\n### çº¿ç¨‹åˆ‡æ¢å¸¦æ¥çš„åŸå­æ€§é—®é¢˜\næ“ä½œç³»ç»Ÿå…è®¸æŸä¸ªè¿›ç¨‹æ‰§è¡Œä¸€å°æ®µæ—¶é—´ï¼Œä¾‹å¦‚ 50 æ¯«ç§’ï¼Œè¿‡äº† 50 æ¯«ç§’æ“ä½œç³»ç»Ÿå°±ä¼šé‡æ–°é€‰æ‹©ä¸€ä¸ªè¿›ç¨‹æ¥æ‰§è¡Œï¼ˆæˆ‘ä»¬ç§°ä¸ºâ€œä»»åŠ¡åˆ‡æ¢â€ï¼‰ï¼Œè¿™ä¸ª 50 æ¯«ç§’ç§°ä¸º **â€œæ—¶é—´ç‰‡â€**ã€‚\n![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ed5f98caf7024b21bd6634ebfe3a8b46~tplv-k3u1fbpfcp-zoom-1.image)\né«˜çº§è¯­è¨€é‡Œä¸€æ¡è¯­å¥å¾€å¾€éœ€è¦å¤šæ¡ CPU æŒ‡ä»¤å®Œæˆï¼Œä¾‹å¦‚count += 1ï¼Œè‡³å°‘éœ€è¦ä¸‰æ¡ CPU æŒ‡ä»¤ã€‚\n+ æŒ‡ä»¤ 1ï¼šé¦–å…ˆï¼Œéœ€è¦æŠŠå˜é‡ count ä»å†…å­˜åŠ è½½åˆ° CPU çš„å¯„å­˜å™¨ï¼›\n+ æŒ‡ä»¤ 2ï¼šä¹‹åï¼Œåœ¨å¯„å­˜å™¨ä¸­æ‰§è¡Œ +1 æ“ä½œï¼›\n+ æŒ‡ä»¤ 3ï¼šæœ€åï¼Œå°†ç»“æœå†™å…¥å†…å­˜ï¼ˆç¼“å­˜æœºåˆ¶å¯¼è‡´å¯èƒ½å†™å…¥çš„æ˜¯ CPU ç¼“å­˜è€Œä¸æ˜¯å†…å­˜ï¼‰ã€‚\n![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/99074af9429f4273a2bfe2f30ca9ad90~tplv-k3u1fbpfcp-zoom-1.image)\næˆ‘ä»¬æŠŠä¸€ä¸ªæˆ–è€…å¤šä¸ªæ“ä½œåœ¨ CPU æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ä¸è¢«ä¸­æ–­çš„ç‰¹æ€§ç§°ä¸º**åŸå­æ€§**ã€‚\n\n### ç¼–è¯‘ä¼˜åŒ–å¸¦æ¥çš„æœ‰åºæ€§é—®é¢˜\nåŒé‡æ£€æŸ¥åˆ›å»ºå•ä¾‹å¯¹è±¡ã€‚\n```\npublic class Singleton {\n  static Singleton instance;\n  static Singleton getInstance(){\n    if (instance == null) {\n      synchronized(Singleton.class) {\n        if (instance == null)\n          instance = new Singleton();\n        }\n    }\n    return instance;\n  }\n}\n```\nå‡è®¾æœ‰ä¸¤ä¸ªçº¿ç¨‹ Aã€B åŒæ—¶è°ƒç”¨ getInstance() æ–¹æ³•ï¼Œä»–ä»¬ä¼šåŒæ—¶å‘ç° instance == null ï¼Œäºæ˜¯åŒæ—¶å¯¹ Singleton.class åŠ é”ï¼Œæ­¤æ—¶ JVM ä¿è¯åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤ŸåŠ é”æˆåŠŸï¼ˆå‡è®¾æ˜¯çº¿ç¨‹ Aï¼‰ï¼Œå¦å¤–ä¸€ä¸ªçº¿ç¨‹åˆ™ä¼šå¤„äºç­‰å¾…çŠ¶æ€ï¼ˆå‡è®¾æ˜¯çº¿ç¨‹ Bï¼‰ï¼›çº¿ç¨‹ A ä¼šåˆ›å»ºä¸€ä¸ª Singleton å®ä¾‹ï¼Œä¹‹åé‡Šæ”¾é”ï¼Œé”é‡Šæ”¾åï¼Œçº¿ç¨‹ B è¢«å”¤é†’ï¼Œçº¿ç¨‹ B å†æ¬¡å°è¯•åŠ é”ï¼Œæ­¤æ—¶æ˜¯å¯ä»¥åŠ é”æˆåŠŸçš„ï¼ŒåŠ é”æˆåŠŸåï¼Œçº¿ç¨‹ B æ£€æŸ¥ instance == null æ—¶ä¼šå‘ç°ï¼Œå·²ç»åˆ›å»ºè¿‡ Singleton å®ä¾‹äº†ï¼Œæ‰€ä»¥çº¿ç¨‹ B ä¸ä¼šå†åˆ›å»ºä¸€ä¸ª Singleton å®ä¾‹ã€‚\n\nè¿™çœ‹ä¸Šå»ä¸€åˆ‡éƒ½å¾ˆå®Œç¾ï¼Œæ— æ‡ˆå¯å‡»ï¼Œä½†å®é™…ä¸Šè¿™ä¸ª getInstance() æ–¹æ³•å¹¶ä¸å®Œç¾ã€‚é—®é¢˜å‡ºåœ¨å“ªé‡Œå‘¢ï¼Ÿå‡ºåœ¨ new æ“ä½œä¸Šï¼Œæˆ‘ä»¬ä»¥ä¸ºçš„ new æ“ä½œåº”è¯¥æ˜¯ï¼š\n1. åˆ†é…ä¸€å—å†…å­˜ Mï¼›\n1. åœ¨å†…å­˜ M ä¸Šåˆå§‹åŒ– Singleton å¯¹è±¡ï¼›\n1. ç„¶å M çš„åœ°å€èµ‹å€¼ç»™ instance å˜é‡ã€‚\n\nä½†æ˜¯å®é™…ä¸Šä¼˜åŒ–åçš„æ‰§è¡Œè·¯å¾„å´æ˜¯è¿™æ ·çš„ï¼š\n1. åˆ†é…ä¸€å—å†…å­˜ Mï¼›\n1. å°† M çš„åœ°å€èµ‹å€¼ç»™ instance å˜é‡ï¼›\n1. æœ€ååœ¨å†…å­˜ M ä¸Šåˆå§‹åŒ– Singleton å¯¹è±¡ã€‚\nä¼˜åŒ–åä¼šå¯¼è‡´ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿæˆ‘ä»¬å‡è®¾çº¿ç¨‹ A å…ˆæ‰§è¡Œ getInstance() æ–¹æ³•ï¼Œå½“æ‰§è¡Œå®ŒæŒ‡ä»¤ 2 æ—¶æ°å¥½å‘ç”Ÿäº†çº¿ç¨‹åˆ‡æ¢ï¼Œåˆ‡æ¢åˆ°äº†çº¿ç¨‹ B ä¸Šï¼›å¦‚æœæ­¤æ—¶çº¿ç¨‹ B ä¹Ÿæ‰§è¡Œ getInstance() æ–¹æ³•ï¼Œé‚£ä¹ˆçº¿ç¨‹ B åœ¨æ‰§è¡Œç¬¬ä¸€ä¸ªåˆ¤æ–­æ—¶ä¼šå‘ç° instance != null ï¼Œæ‰€ä»¥ç›´æ¥è¿”å› instanceï¼Œè€Œæ­¤æ—¶çš„ instance æ˜¯æ²¡æœ‰åˆå§‹åŒ–è¿‡çš„ï¼Œå¦‚æœæˆ‘ä»¬è¿™ä¸ªæ—¶å€™è®¿é—® instance çš„æˆå‘˜å˜é‡å°±å¯èƒ½è§¦å‘ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7b345930e632478aae44495fbcee3ac1~tplv-k3u1fbpfcp-zoom-1.image)\n\n\n\n\n\n\n\n\n\n\n## äºŒã€Javaå†…å­˜æ¨¡å‹\n### ä»€ä¹ˆæ˜¯ Java å†…å­˜æ¨¡å‹ï¼Ÿ\nJava å†…å­˜æ¨¡å‹è§„èŒƒäº† **JVM å¦‚ä½•æä¾›æŒ‰éœ€ç¦ç”¨ç¼“å­˜å’Œç¼–è¯‘ä¼˜åŒ–çš„æ–¹æ³•**ã€‚å…·ä½“æ¥è¯´ï¼Œè¿™äº›æ–¹æ³•åŒ…æ‹¬ volatileã€synchronized å’Œ final ä¸‰ä¸ªå…³é”®å­—ï¼Œä»¥åŠå…­é¡¹ Happens-Before è§„åˆ™ã€‚\n\n### ä½¿ç”¨ volatile çš„å›°æƒ‘\nä¾‹å¦‚ï¼Œæˆ‘ä»¬å£°æ˜ä¸€ä¸ª volatile å˜é‡ volatile int x = 0ï¼Œå®ƒè¡¨è¾¾çš„æ˜¯ï¼šå‘Šè¯‰ç¼–è¯‘å™¨ï¼Œå¯¹è¿™ä¸ªå˜é‡çš„è¯»å†™ï¼Œä¸èƒ½ä½¿ç”¨ CPU ç¼“å­˜ï¼Œå¿…é¡»ä»å†…å­˜ä¸­è¯»å–æˆ–è€…å†™å…¥ã€‚\n\nä¾‹å¦‚ä¸‹é¢çš„ç¤ºä¾‹ä»£ç ï¼Œå‡è®¾çº¿ç¨‹ A æ‰§è¡Œ writer() æ–¹æ³•ï¼ŒæŒ‰ç…§ volatile è¯­ä¹‰ï¼Œä¼šæŠŠå˜é‡ â€œv=trueâ€ å†™å…¥å†…å­˜ï¼›å‡è®¾çº¿ç¨‹ B æ‰§è¡Œ reader() æ–¹æ³•ï¼ŒåŒæ ·æŒ‰ç…§ volatile è¯­ä¹‰ï¼Œçº¿ç¨‹ B ä¼šä»å†…å­˜ä¸­è¯»å–å˜é‡ vï¼Œå¦‚æœçº¿ç¨‹ B çœ‹åˆ° â€œv == trueâ€ æ—¶ï¼Œé‚£ä¹ˆçº¿ç¨‹ B çœ‹åˆ°çš„å˜é‡ x æ˜¯å¤šå°‘å‘¢ï¼Ÿ\n\nç›´è§‰ä¸Šçœ‹ï¼Œåº”è¯¥æ˜¯ 42ï¼Œé‚£å®é™…åº”è¯¥æ˜¯å¤šå°‘å‘¢ï¼Ÿè¿™ä¸ªè¦çœ‹ Java çš„ç‰ˆæœ¬ï¼Œå¦‚æœåœ¨ä½äº 1.5 ç‰ˆæœ¬ä¸Šè¿è¡Œï¼Œx å¯èƒ½æ˜¯ 42ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯ 0ï¼›å¦‚æœåœ¨ 1.5 ä»¥ä¸Šçš„ç‰ˆæœ¬ä¸Šè¿è¡Œï¼Œx å°±æ˜¯ç­‰äº 42ã€‚\n```\nclass VolatileExample {\n  int x = 0;\n  volatile boolean v = false;\n  public void writer() {\n    x = 42;\n    v = true;\n  }\n  public void reader() {\n    if (v == true) {\n      // è¿™é‡Œ x ä¼šæ˜¯å¤šå°‘å‘¢ï¼Ÿ\n    }\n  }\n}\n```\nåˆ†æä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆ 1.5 ä»¥å‰çš„ç‰ˆæœ¬ä¼šå‡ºç° x = 0 çš„æƒ…å†µå‘¢ï¼Ÿæˆ‘ç›¸ä¿¡ä½ ä¸€å®šæƒ³åˆ°äº†ï¼Œå˜é‡ x å¯èƒ½è¢« CPU ç¼“å­˜è€Œå¯¼è‡´å¯è§æ€§é—®é¢˜ã€‚è¿™ä¸ªé—®é¢˜åœ¨ 1.5 ç‰ˆæœ¬å·²ç»è¢«åœ†æ»¡è§£å†³äº†ã€‚Java å†…å­˜æ¨¡å‹åœ¨ 1.5 ç‰ˆæœ¬å¯¹ volatile è¯­ä¹‰è¿›è¡Œäº†å¢å¼ºã€‚æ€ä¹ˆå¢å¼ºçš„å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ä¸€é¡¹ Happens-Before è§„åˆ™ã€‚\n\n### Happens-Before è§„åˆ™\n**å‰é¢ä¸€ä¸ªæ“ä½œçš„ç»“æœå¯¹åç»­æ“ä½œæ˜¯å¯è§çš„ã€‚** Happens-Before çº¦æŸäº†ç¼–è¯‘å™¨çš„ä¼˜åŒ–è¡Œä¸ºï¼Œè™½å…è®¸ç¼–è¯‘å™¨ä¼˜åŒ–ï¼Œä½†æ˜¯è¦æ±‚ç¼–è¯‘å™¨ä¼˜åŒ–åä¸€å®šéµå®ˆ Happens-Before è§„åˆ™ã€‚\n#### 1. ç¨‹åºçš„é¡ºåºæ€§è§„åˆ™\næŒ‡åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­ï¼ŒæŒ‰ç…§ç¨‹åºé¡ºåºï¼Œå‰é¢çš„æ“ä½œ Happens-Before äºåç»­çš„ä»»æ„æ“ä½œã€‚æ¯”å¦‚åˆšæ‰é‚£æ®µç¤ºä¾‹ä»£ç ï¼ŒæŒ‰ç…§ç¨‹åºçš„é¡ºåºï¼Œç¬¬ 6 è¡Œä»£ç  â€œx = 42;â€ Happens-Before äºç¬¬ 7 è¡Œä»£ç  â€œv = true;â€ã€‚\n\n#### 2. volatile å˜é‡è§„åˆ™ \næŒ‡å¯¹ä¸€ä¸ª volatile å˜é‡çš„å†™æ“ä½œï¼Œ Happens-Before äºåç»­å¯¹è¿™ä¸ª volatile å˜é‡çš„è¯»æ“ä½œã€‚\n\nè¿™ä¸ªå°±æœ‰ç‚¹è´¹è§£äº†ï¼Œå¯¹ä¸€ä¸ª volatile å˜é‡çš„å†™æ“ä½œç›¸å¯¹äºåç»­å¯¹è¿™ä¸ª volatile å˜é‡çš„è¯»æ“ä½œå¯è§ï¼Œè¿™æ€ä¹ˆçœ‹éƒ½æ˜¯ç¦ç”¨ç¼“å­˜çš„æ„æ€å•Šï¼Œè²Œä¼¼å’Œ 1.5 ç‰ˆæœ¬ä»¥å‰çš„è¯­ä¹‰æ²¡æœ‰å˜åŒ–å•Šï¼Ÿå¦‚æœå•çœ‹è¿™ä¸ªè§„åˆ™ï¼Œçš„ç¡®æ˜¯è¿™æ ·ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬å…³è”ä¸€ä¸‹è§„åˆ™ 3ï¼Œå°±æœ‰ç‚¹ä¸ä¸€æ ·çš„æ„Ÿè§‰äº†ã€‚\n\n#### 3. ä¼ é€’æ€§\nè¿™æ¡è§„åˆ™æ˜¯æŒ‡å¦‚æœ A Happens-Before Bï¼Œä¸” B Happens-Before Cï¼Œé‚£ä¹ˆ A Happens-Before Cã€‚\nä»å›¾ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/97778d2877f04f0786ed3416701312b4~tplv-k3u1fbpfcp-zoom-1.image)\n1. â€œx=42â€ Happens-Before å†™å˜é‡ â€œv=trueâ€ ï¼Œè¿™æ˜¯è§„åˆ™ 1 çš„å†…å®¹ï¼›\n1. å†™å˜é‡â€œv=trueâ€ Happens-Before è¯»å˜é‡ â€œv=trueâ€ï¼Œè¿™æ˜¯è§„åˆ™ 2 çš„å†…å®¹ ã€‚\n\nå†æ ¹æ®è¿™ä¸ªä¼ é€’æ€§è§„åˆ™ï¼Œæˆ‘ä»¬å¾—åˆ°ç»“æœï¼šâ€œx=42â€ Happens-Before è¯»å˜é‡â€œv=trueâ€ã€‚è¿™æ„å‘³ç€ä»€ä¹ˆå‘¢ï¼Ÿ\n\nå¦‚æœçº¿ç¨‹ B è¯»åˆ°äº†â€œv=trueâ€ï¼Œé‚£ä¹ˆçº¿ç¨‹ A è®¾ç½®çš„â€œx=42â€å¯¹çº¿ç¨‹ B æ˜¯å¯è§çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œçº¿ç¨‹ B èƒ½çœ‹åˆ° â€œx == 42â€ ï¼Œæœ‰æ²¡æœ‰ä¸€ç§æç„¶å¤§æ‚Ÿçš„æ„Ÿè§‰ï¼Ÿè¿™å°±æ˜¯ 1.5 ç‰ˆæœ¬å¯¹ volatile è¯­ä¹‰çš„å¢å¼ºï¼Œè¿™ä¸ªå¢å¼ºæ„ä¹‰é‡å¤§ï¼Œ1.5 ç‰ˆæœ¬çš„å¹¶å‘å·¥å…·åŒ…ï¼ˆjava.util.concurrentï¼‰å°±æ˜¯é  volatile è¯­ä¹‰æ¥æå®šå¯è§æ€§çš„ï¼Œè¿™ä¸ªåœ¨åé¢çš„å†…å®¹ä¸­ä¼šè¯¦ç»†ä»‹ç»ã€‚\n\n#### 4. ç®¡ç¨‹ä¸­é”çš„è§„åˆ™\næ˜¯æŒ‡å¯¹ä¸€ä¸ªé”çš„è§£é” Happens-Before äºåç»­å¯¹è¿™ä¸ªé”çš„åŠ é”ã€‚\n\nè¦ç†è§£è¿™ä¸ªè§„åˆ™ï¼Œå°±é¦–å…ˆè¦äº†è§£â€œç®¡ç¨‹æŒ‡çš„æ˜¯ä»€ä¹ˆâ€ã€‚ç®¡ç¨‹æ˜¯ä¸€ç§é€šç”¨çš„åŒæ­¥åŸè¯­ï¼Œåœ¨ Java ä¸­æŒ‡çš„å°±æ˜¯ synchronizedï¼Œsynchronized æ˜¯ Java é‡Œå¯¹ç®¡ç¨‹çš„å®ç°ã€‚\n\nç®¡ç¨‹ä¸­çš„é”åœ¨ Java é‡Œæ˜¯éšå¼å®ç°çš„ï¼Œä¾‹å¦‚ä¸‹é¢çš„ä»£ç ï¼Œåœ¨è¿›å…¥åŒæ­¥å—ä¹‹å‰ï¼Œä¼šè‡ªåŠ¨åŠ é”ï¼Œè€Œåœ¨ä»£ç å—æ‰§è¡Œå®Œä¼šè‡ªåŠ¨é‡Šæ”¾é”ï¼ŒåŠ é”ä»¥åŠé‡Šæ”¾é”éƒ½æ˜¯ç¼–è¯‘å™¨å¸®æˆ‘ä»¬å®ç°çš„ã€‚\n```\nsynchronized (this) { // æ­¤å¤„è‡ªåŠ¨åŠ é”\n  // x æ˜¯å…±äº«å˜é‡, åˆå§‹å€¼ =10\n  if (this.x < 12) {\n    this.x = 12; \n  }  \n} // æ­¤å¤„è‡ªåŠ¨è§£é”\n```\næ‰€ä»¥ç»“åˆè§„åˆ™ 4â€”â€”ç®¡ç¨‹ä¸­é”çš„è§„åˆ™ï¼Œå¯ä»¥è¿™æ ·ç†è§£ï¼šå‡è®¾ x çš„åˆå§‹å€¼æ˜¯ 10ï¼Œçº¿ç¨‹ A æ‰§è¡Œå®Œä»£ç å—å x çš„å€¼ä¼šå˜æˆ 12ï¼ˆæ‰§è¡Œå®Œè‡ªåŠ¨é‡Šæ”¾é”ï¼‰ï¼Œçº¿ç¨‹ B è¿›å…¥ä»£ç å—æ—¶ï¼Œèƒ½å¤Ÿçœ‹åˆ°çº¿ç¨‹ A å¯¹ x çš„å†™æ“ä½œï¼Œä¹Ÿå°±æ˜¯çº¿ç¨‹ B èƒ½å¤Ÿçœ‹åˆ° x==12ã€‚è¿™ä¸ªä¹Ÿæ˜¯ç¬¦åˆæˆ‘ä»¬ç›´è§‰çš„ï¼Œåº”è¯¥ä¸éš¾ç†è§£ã€‚\n\n#### 5. çº¿ç¨‹ start() è§„åˆ™\nè¿™æ¡æ˜¯å…³äºçº¿ç¨‹å¯åŠ¨çš„ã€‚å®ƒæ˜¯æŒ‡ä¸»çº¿ç¨‹ A å¯åŠ¨å­çº¿ç¨‹ B åï¼Œå­çº¿ç¨‹ B èƒ½å¤Ÿçœ‹åˆ°ä¸»çº¿ç¨‹åœ¨å¯åŠ¨å­çº¿ç¨‹ B å‰çš„æ“ä½œã€‚\n\næ¢å¥è¯è¯´å°±æ˜¯ï¼Œå¦‚æœçº¿ç¨‹ A è°ƒç”¨çº¿ç¨‹ B çš„ start() æ–¹æ³•ï¼ˆå³åœ¨çº¿ç¨‹ A ä¸­å¯åŠ¨çº¿ç¨‹ Bï¼‰ï¼Œé‚£ä¹ˆè¯¥ start() æ“ä½œ Happens-Before äºçº¿ç¨‹ B ä¸­çš„ä»»æ„æ“ä½œã€‚\n```\nThread B = new Thread(()->{\n  // ä¸»çº¿ç¨‹è°ƒç”¨ B.start() ä¹‹å‰\n  // æ‰€æœ‰å¯¹å…±äº«å˜é‡çš„ä¿®æ”¹ï¼Œæ­¤å¤„çš†å¯è§\n  // æ­¤ä¾‹ä¸­ï¼Œvar==77\n});\n// æ­¤å¤„å¯¹å…±äº«å˜é‡ var ä¿®æ”¹\nvar = 77;\n// ä¸»çº¿ç¨‹å¯åŠ¨å­çº¿ç¨‹\nB.start();\n```\n\n#### 6. çº¿ç¨‹ join() è§„åˆ™\nè¿™æ¡æ˜¯å…³äºçº¿ç¨‹ç­‰å¾…çš„ã€‚å®ƒæ˜¯æŒ‡ä¸»çº¿ç¨‹ A ç­‰å¾…å­çº¿ç¨‹ B å®Œæˆï¼ˆä¸»çº¿ç¨‹ A é€šè¿‡è°ƒç”¨å­çº¿ç¨‹ B çš„ join() æ–¹æ³•å®ç°ï¼‰ï¼Œå½“å­çº¿ç¨‹ B å®Œæˆåï¼ˆä¸»çº¿ç¨‹ A ä¸­ join() æ–¹æ³•è¿”å›ï¼‰ï¼Œä¸»çº¿ç¨‹èƒ½å¤Ÿçœ‹åˆ°å­çº¿ç¨‹çš„æ“ä½œã€‚å½“ç„¶æ‰€è°“çš„â€œçœ‹åˆ°â€ï¼ŒæŒ‡çš„æ˜¯å¯¹å…±äº«å˜é‡çš„æ“ä½œã€‚\n\næ¢å¥è¯è¯´å°±æ˜¯ï¼Œå¦‚æœåœ¨çº¿ç¨‹ A ä¸­ï¼Œè°ƒç”¨çº¿ç¨‹ B çš„ join() å¹¶æˆåŠŸè¿”å›ï¼Œé‚£ä¹ˆçº¿ç¨‹ B ä¸­çš„ä»»æ„æ“ä½œ Happens-Before äºè¯¥ join() æ“ä½œçš„è¿”å›ã€‚\n```\nThread B = new Thread(()->{\n  // æ­¤å¤„å¯¹å…±äº«å˜é‡ var ä¿®æ”¹\n  var = 66;\n});\n// ä¾‹å¦‚æ­¤å¤„å¯¹å…±äº«å˜é‡ä¿®æ”¹ï¼Œ\n// åˆ™è¿™ä¸ªä¿®æ”¹ç»“æœå¯¹çº¿ç¨‹ B å¯è§\n// ä¸»çº¿ç¨‹å¯åŠ¨å­çº¿ç¨‹\nB.start();\nB.join()\n// å­çº¿ç¨‹æ‰€æœ‰å¯¹å…±äº«å˜é‡çš„ä¿®æ”¹\n// åœ¨ä¸»çº¿ç¨‹è°ƒç”¨ B.join() ä¹‹åçš†å¯è§\n// æ­¤ä¾‹ä¸­ï¼Œvar==66\n```\n\n### final\nå‰é¢æˆ‘ä»¬è®² volatile ä¸ºçš„æ˜¯ç¦ç”¨ç¼“å­˜ä»¥åŠç¼–è¯‘ä¼˜åŒ–ï¼Œæˆ‘ä»¬å†ä»å¦å¤–ä¸€ä¸ªæ–¹é¢æ¥çœ‹ï¼Œæœ‰æ²¡æœ‰åŠæ³•å‘Šè¯‰ç¼–è¯‘å™¨ä¼˜åŒ–å¾—æ›´å¥½ä¸€ç‚¹å‘¢ï¼Ÿè¿™ä¸ªå¯ä»¥æœ‰ï¼Œå°±æ˜¯final å…³é”®å­—ã€‚\n\nfinal ä¿®é¥°å˜é‡æ—¶ï¼Œåˆè¡·æ˜¯å‘Šè¯‰ç¼–è¯‘å™¨ï¼šè¿™ä¸ªå˜é‡ç”Ÿè€Œä¸å˜ï¼Œå¯ä»¥å¯åŠ²å„¿ä¼˜åŒ–ã€‚Java ç¼–è¯‘å™¨åœ¨ 1.5 ä»¥å‰çš„ç‰ˆæœ¬çš„ç¡®ä¼˜åŒ–å¾—å¾ˆåŠªåŠ›ï¼Œä»¥è‡³äºéƒ½ä¼˜åŒ–é”™äº†ã€‚\n\nå½“ç„¶äº†ï¼Œåœ¨ 1.5 ä»¥å Java å†…å­˜æ¨¡å‹å¯¹ final ç±»å‹å˜é‡çš„é‡æ’è¿›è¡Œäº†çº¦æŸã€‚ç°åœ¨åªè¦æˆ‘ä»¬æä¾›æ­£ç¡®æ„é€ å‡½æ•°æ²¡æœ‰â€œé€¸å‡ºâ€ï¼Œå°±ä¸ä¼šå‡ºé—®é¢˜äº†ã€‚\n\nâ€œé€¸å‡ºâ€æœ‰ç‚¹æŠ½è±¡ï¼Œæˆ‘ä»¬è¿˜æ˜¯ä¸¾ä¸ªä¾‹å­å§ï¼Œåœ¨ä¸‹é¢ä¾‹å­ä¸­ï¼Œåœ¨æ„é€ å‡½æ•°é‡Œé¢å°† this èµ‹å€¼ç»™äº†å…¨å±€å˜é‡ global.objï¼Œè¿™å°±æ˜¯â€œé€¸å‡ºâ€ï¼Œçº¿ç¨‹é€šè¿‡ global.obj è¯»å– x æ˜¯æœ‰å¯èƒ½è¯»åˆ° 0 çš„ã€‚å› æ­¤æˆ‘ä»¬ä¸€å®šè¦é¿å…â€œé€¸å‡ºâ€ã€‚\n```\nfinal int x;\n// é”™è¯¯çš„æ„é€ å‡½æ•°\npublic FinalFieldExample() { \n  x = 3;\n  y = 4;\n  // æ­¤å¤„å°±æ˜¯è®² this é€¸å‡ºï¼Œ\n  global.obj = this;\n}\n```\n\n<br><br>\nHappens-Before è§„åˆ™æœ€åˆæ˜¯åœ¨ä¸€ç¯‡å«åšTime, Clocks, and the Ordering of Events in a Distributed Systemçš„è®ºæ–‡ä¸­æå‡ºæ¥çš„ï¼Œåœ¨è¿™ç¯‡è®ºæ–‡ä¸­ï¼ŒHappens-Before çš„è¯­ä¹‰æ˜¯ä¸€ç§å› æœå…³ç³»ã€‚åœ¨ç°å®ä¸–ç•Œé‡Œï¼Œå¦‚æœ A äº‹ä»¶æ˜¯å¯¼è‡´ B äº‹ä»¶çš„èµ·å› ï¼Œé‚£ä¹ˆ A äº‹ä»¶ä¸€å®šæ˜¯å…ˆäºï¼ˆHappens-Beforeï¼‰B äº‹ä»¶å‘ç”Ÿçš„ï¼Œè¿™ä¸ªå°±æ˜¯ Happens-Before è¯­ä¹‰çš„ç°å®ç†è§£ã€‚\n\nåœ¨ Java è¯­è¨€é‡Œé¢ï¼ŒHappens-Before çš„è¯­ä¹‰æœ¬è´¨ä¸Šæ˜¯ä¸€ç§å¯è§æ€§ï¼ŒA Happens-Before B æ„å‘³ç€ A äº‹ä»¶å¯¹ B äº‹ä»¶æ¥è¯´æ˜¯å¯è§çš„ï¼Œæ— è®º A äº‹ä»¶å’Œ B äº‹ä»¶æ˜¯å¦å‘ç”Ÿåœ¨åŒä¸€ä¸ªçº¿ç¨‹é‡Œã€‚ä¾‹å¦‚ A äº‹ä»¶å‘ç”Ÿåœ¨çº¿ç¨‹ 1 ä¸Šï¼ŒB äº‹ä»¶å‘ç”Ÿåœ¨çº¿ç¨‹ 2 ä¸Šï¼ŒHappens-Before è§„åˆ™ä¿è¯çº¿ç¨‹ 2 ä¸Šä¹Ÿèƒ½çœ‹åˆ° A äº‹ä»¶çš„å‘ç”Ÿã€‚\n\n\n\n\n\n\n\n\n\n\n\n## ä¸‰ã€äº’æ–¥é”\n### åŸå­æ€§é—®é¢˜è¯¥å¦‚ä½•è§£å†³ï¼Ÿ\nåŸå­æ€§é—®é¢˜çš„æºå¤´æ˜¯çº¿ç¨‹åˆ‡æ¢ï¼Œå¦‚æœèƒ½å¤Ÿç¦ç”¨çº¿ç¨‹åˆ‡æ¢é‚£ä¸å°±èƒ½è§£å†³è¿™ä¸ªé—®é¢˜äº†å—ï¼Ÿè€Œæ“ä½œç³»ç»Ÿåšçº¿ç¨‹åˆ‡æ¢æ˜¯ä¾èµ– CPU ä¸­æ–­çš„ï¼Œæ‰€ä»¥ç¦æ­¢ CPU å‘ç”Ÿä¸­æ–­å°±èƒ½å¤Ÿç¦æ­¢çº¿ç¨‹åˆ‡æ¢ã€‚\n\nåœ¨æ—©æœŸå•æ ¸ CPU æ—¶ä»£ï¼Œè¿™ä¸ªæ–¹æ¡ˆçš„ç¡®æ˜¯å¯è¡Œçš„ï¼Œè€Œä¸”ä¹Ÿæœ‰å¾ˆå¤šåº”ç”¨æ¡ˆä¾‹ï¼Œä½†æ˜¯å¹¶ä¸é€‚åˆå¤šæ ¸åœºæ™¯ã€‚è¿™é‡Œæˆ‘ä»¬ä»¥ 32 ä½ CPU ä¸Šæ‰§è¡Œ long å‹å˜é‡çš„å†™æ“ä½œä¸ºä¾‹æ¥è¯´æ˜è¿™ä¸ªé—®é¢˜ï¼Œlong å‹å˜é‡æ˜¯ 64 ä½ï¼Œåœ¨ 32 ä½ CPU ä¸Šæ‰§è¡Œå†™æ“ä½œä¼šè¢«æ‹†åˆ†æˆä¸¤æ¬¡å†™æ“ä½œï¼ˆå†™é«˜ 32 ä½å’Œå†™ä½ 32 ä½ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼‰ã€‚\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2ae28a57f908415a8fd299c3fb554ceb~tplv-k3u1fbpfcp-zoom-1.image)\nåœ¨å•æ ¸ CPU åœºæ™¯ä¸‹ï¼ŒåŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œï¼Œç¦æ­¢ CPU ä¸­æ–­ï¼Œæ„å‘³ç€æ“ä½œç³»ç»Ÿä¸ä¼šé‡æ–°è°ƒåº¦çº¿ç¨‹ï¼Œä¹Ÿå°±æ˜¯ç¦æ­¢äº†çº¿ç¨‹åˆ‡æ¢ï¼Œè·å¾— CPU ä½¿ç”¨æƒçš„çº¿ç¨‹å°±å¯ä»¥ä¸é—´æ–­åœ°æ‰§è¡Œï¼Œæ‰€ä»¥ä¸¤æ¬¡å†™æ“ä½œä¸€å®šæ˜¯ï¼šè¦ä¹ˆéƒ½è¢«æ‰§è¡Œï¼Œè¦ä¹ˆéƒ½æ²¡æœ‰è¢«æ‰§è¡Œï¼Œå…·æœ‰åŸå­æ€§ã€‚\n\nä½†æ˜¯åœ¨å¤šæ ¸åœºæ™¯ä¸‹ï¼ŒåŒä¸€æ—¶åˆ»ï¼Œæœ‰å¯èƒ½æœ‰ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶åœ¨æ‰§è¡Œï¼Œä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œåœ¨ CPU-1 ä¸Šï¼Œä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œåœ¨ CPU-2 ä¸Šï¼Œæ­¤æ—¶ç¦æ­¢ CPU ä¸­æ–­ï¼Œåªèƒ½ä¿è¯ CPU ä¸Šçš„çº¿ç¨‹è¿ç»­æ‰§è¡Œï¼Œå¹¶ä¸èƒ½ä¿è¯åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œï¼Œå¦‚æœè¿™ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶å†™ long å‹å˜é‡é«˜ 32 ä½çš„è¯ï¼Œé‚£å°±æœ‰å¯èƒ½å‡ºç°æˆ‘ä»¬å¼€å¤´æåŠçš„è¯¡å¼‚ Bug äº†ã€‚\n\n**â€œåŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œâ€è¿™ä¸ªæ¡ä»¶éå¸¸é‡è¦ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºäº’æ–¥**ã€‚å¦‚æœæˆ‘ä»¬èƒ½å¤Ÿä¿è¯å¯¹å…±äº«å˜é‡çš„ä¿®æ”¹æ˜¯äº’æ–¥çš„ï¼Œé‚£ä¹ˆï¼Œæ— è®ºæ˜¯å•æ ¸ CPU è¿˜æ˜¯å¤šæ ¸ CPUï¼Œå°±éƒ½èƒ½ä¿è¯åŸå­æ€§äº†ã€‚\n\n### ç®€æ˜“é”æ¨¡å‹\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f4bbd5ca8d814a4bbcf141d503262eed~tplv-k3u1fbpfcp-zoom-1.image)\næˆ‘ä»¬æŠŠä¸€æ®µéœ€è¦äº’æ–¥æ‰§è¡Œçš„ä»£ç ç§°ä¸º**ä¸´ç•ŒåŒº**ã€‚\n\n### æ”¹è¿›åçš„é”æ¨¡å‹\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a56cf01cec5548a7b2d4def261321773~tplv-k3u1fbpfcp-zoom-1.image)\nåœ¨ç°å®ä¸–ç•Œé‡Œï¼Œé”å’Œé”è¦ä¿æŠ¤çš„èµ„æºæ˜¯æœ‰å¯¹åº”å…³ç³»çš„ï¼Œæ¯”å¦‚ä½ ç”¨ä½ å®¶çš„é”ä¿æŠ¤ä½ å®¶çš„ä¸œè¥¿ï¼Œæˆ‘ç”¨æˆ‘å®¶çš„é”ä¿æŠ¤æˆ‘å®¶çš„ä¸œè¥¿ã€‚åœ¨å¹¶å‘ç¼–ç¨‹ä¸–ç•Œé‡Œï¼Œé”å’Œèµ„æºä¹Ÿåº”è¯¥æœ‰è¿™ä¸ªå…³ç³»ã€‚\n\né¦–å…ˆï¼Œæˆ‘ä»¬è¦æŠŠä¸´ç•ŒåŒºè¦ä¿æŠ¤çš„èµ„æºæ ‡æ³¨å‡ºæ¥ï¼Œå¦‚å›¾ä¸­ä¸´ç•ŒåŒºé‡Œå¢åŠ äº†ä¸€ä¸ªå…ƒç´ ï¼šå—ä¿æŠ¤çš„èµ„æº Rï¼›å…¶æ¬¡ï¼Œæˆ‘ä»¬è¦ä¿æŠ¤èµ„æº R å°±å¾—ä¸ºå®ƒåˆ›å»ºä¸€æŠŠé” LRï¼›æœ€åï¼Œé’ˆå¯¹è¿™æŠŠé” LRï¼Œæˆ‘ä»¬è¿˜éœ€åœ¨è¿›å‡ºä¸´ç•ŒåŒºæ—¶æ·»ä¸ŠåŠ é”æ“ä½œå’Œè§£é”æ“ä½œã€‚å¦å¤–ï¼Œåœ¨é” LR å’Œå—ä¿æŠ¤èµ„æºä¹‹é—´ï¼Œæˆ‘ç‰¹åœ°ç”¨ä¸€æ¡çº¿åšäº†å…³è”ï¼Œè¿™ä¸ªå…³è”å…³ç³»éå¸¸é‡è¦ã€‚å¾ˆå¤šå¹¶å‘ Bug çš„å‡ºç°éƒ½æ˜¯å› ä¸ºæŠŠå®ƒå¿½ç•¥äº†ï¼Œç„¶åå°±å‡ºç°äº†ç±»ä¼¼é”è‡ªå®¶é—¨æ¥ä¿æŠ¤ä»–å®¶èµ„äº§çš„äº‹æƒ…ï¼Œè¿™æ ·çš„ Bug éå¸¸ä¸å¥½è¯Šæ–­ï¼Œå› ä¸ºæ½œæ„è¯†é‡Œæˆ‘ä»¬è®¤ä¸ºå·²ç»æ­£ç¡®åŠ é”äº†ã€‚\n\n### Java è¯­è¨€æä¾›çš„é”æŠ€æœ¯ï¼šsynchronized\n```\nclass X {\n  // ä¿®é¥°éé™æ€æ–¹æ³•\n  synchronized void foo() {\n    // ä¸´ç•ŒåŒº\n  }\n  // ä¿®é¥°é™æ€æ–¹æ³•\n  synchronized static void bar() {\n    // ä¸´ç•ŒåŒº\n  }\n  // ä¿®é¥°ä»£ç å—\n  Object obj = new Object()ï¼›\n  void baz() {\n    synchronized(obj) {\n      // ä¸´ç•ŒåŒº\n    }\n  }\n}  \n```\nå½“ä¿®é¥°é™æ€æ–¹æ³•çš„æ—¶å€™ï¼Œé”å®šçš„æ˜¯å½“å‰ç±»çš„ Class å¯¹è±¡ï¼Œåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­å°±æ˜¯ Class Xï¼›<br>\nå½“ä¿®é¥°éé™æ€æ–¹æ³•çš„æ—¶å€™ï¼Œé”å®šçš„æ˜¯å½“å‰å®ä¾‹å¯¹è±¡ thisã€‚\n\nå¯¹äºä¸Šé¢çš„ä¾‹å­ï¼Œsynchronized ä¿®é¥°é™æ€æ–¹æ³•ç›¸å½“äº:\n```\nclass X {\n  // ä¿®é¥°é™æ€æ–¹æ³•\n  synchronized(X.class) static void bar() {\n    // ä¸´ç•ŒåŒº\n  }\n}\n```\nä¿®é¥°éé™æ€æ–¹æ³•ï¼Œç›¸å½“äºï¼š\n```\nclass X {\n  // ä¿®é¥°éé™æ€æ–¹æ³•\n  synchronized(this) void foo() {\n    // ä¸´ç•ŒåŒº\n  }\n}\n```\n\n### é”å’Œå—ä¿æŠ¤èµ„æºçš„å…³ç³»\nå—ä¿æŠ¤èµ„æºå’Œé”ä¹‹é—´çš„å…³è”å…³ç³»éå¸¸é‡è¦ï¼Œä»–ä»¬çš„å…³ç³»æ˜¯æ€æ ·çš„å‘¢ï¼Ÿä¸€ä¸ªåˆç†çš„å…³ç³»æ˜¯ï¼š**å—ä¿æŠ¤èµ„æºå’Œé”ä¹‹é—´çš„å…³è”å…³ç³»æ˜¯ N:1 çš„å…³ç³»**ã€‚è¿˜æ‹¿å‰é¢çƒèµ›é—¨ç¥¨çš„ç®¡ç†æ¥ç±»æ¯”ï¼Œå°±æ˜¯ä¸€ä¸ªåº§ä½ï¼Œæˆ‘ä»¬åªèƒ½ç”¨ä¸€å¼ ç¥¨æ¥ä¿æŠ¤ï¼Œå¦‚æœå¤šå‘äº†é‡å¤çš„ç¥¨ï¼Œé‚£å°±è¦æ‰“æ¶äº†ã€‚ç°å®ä¸–ç•Œé‡Œï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å¤šæŠŠé”æ¥ä¿æŠ¤åŒä¸€ä¸ªèµ„æºï¼Œä½†åœ¨å¹¶å‘é¢†åŸŸæ˜¯ä¸è¡Œçš„ï¼Œå¹¶å‘é¢†åŸŸçš„é”å’Œç°å®ä¸–ç•Œçš„é”ä¸æ˜¯å®Œå…¨åŒ¹é…çš„ã€‚ä¸è¿‡å€’æ˜¯å¯ä»¥ç”¨åŒä¸€æŠŠé”æ¥ä¿æŠ¤å¤šä¸ªèµ„æºï¼Œè¿™ä¸ªå¯¹åº”åˆ°ç°å®ä¸–ç•Œå°±æ˜¯æˆ‘ä»¬æ‰€è°“çš„â€œåŒ…åœºâ€äº†ã€‚\n\nä¸Šé¢é‚£ä¸ªä¾‹å­æˆ‘ç¨ä½œæ”¹åŠ¨ï¼ŒæŠŠ value æ”¹æˆé™æ€å˜é‡ï¼ŒæŠŠ addOne() æ–¹æ³•æ”¹æˆé™æ€æ–¹æ³•ï¼Œæ­¤æ—¶ get() æ–¹æ³•å’Œ addOne() æ–¹æ³•æ˜¯å¦å­˜åœ¨å¹¶å‘é—®é¢˜å‘¢ï¼Ÿ\n```\nclass SafeCalc {\n  static long value = 0L;\n  synchronized long get() {\n    return value;\n  }\n  synchronized static void addOne() {\n    value += 1;\n  }\n}\n```\nå¦‚æœä½ ä»”ç»†è§‚å¯Ÿï¼Œå°±ä¼šå‘ç°æ”¹åŠ¨åçš„ä»£ç æ˜¯ç”¨ä¸¤ä¸ªé”ä¿æŠ¤ä¸€ä¸ªèµ„æºã€‚è¿™ä¸ªå—ä¿æŠ¤çš„èµ„æºå°±æ˜¯é™æ€å˜é‡ valueï¼Œä¸¤ä¸ªé”åˆ†åˆ«æ˜¯ this å’Œ SafeCalc.classã€‚æˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢è¿™å¹…å›¾æ¥å½¢è±¡æè¿°è¿™ä¸ªå…³ç³»ã€‚ç”±äºä¸´ç•ŒåŒº get() å’Œ addOne() æ˜¯ç”¨ä¸¤ä¸ªé”ä¿æŠ¤çš„ï¼Œå› æ­¤è¿™ä¸¤ä¸ªä¸´ç•ŒåŒºæ²¡æœ‰äº’æ–¥å…³ç³»ï¼Œä¸´ç•ŒåŒº addOne() å¯¹ value çš„ä¿®æ”¹å¯¹ä¸´ç•ŒåŒº get() ä¹Ÿæ²¡æœ‰å¯è§æ€§ä¿è¯ï¼Œè¿™å°±å¯¼è‡´å¹¶å‘é—®é¢˜äº†ã€‚\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bc56380a0ce74c779b5f49beced0c8a8~tplv-k3u1fbpfcp-zoom-1.image)\n\n### ä¿æŠ¤æ²¡æœ‰å…³è”å…³ç³»çš„å¤šä¸ªèµ„æº\nä¾‹å¦‚ï¼Œé“¶è¡Œä¸šåŠ¡ä¸­æœ‰é’ˆå¯¹è´¦æˆ·ä½™é¢ï¼ˆä½™é¢æ˜¯ä¸€ç§èµ„æºï¼‰çš„å–æ¬¾æ“ä½œï¼Œä¹Ÿæœ‰é’ˆå¯¹è´¦æˆ·å¯†ç ï¼ˆå¯†ç ä¹Ÿæ˜¯ä¸€ç§èµ„æºï¼‰çš„æ›´æ”¹æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºè´¦æˆ·ä½™é¢å’Œè´¦æˆ·å¯†ç åˆ†é…ä¸åŒçš„é”æ¥è§£å†³å¹¶å‘é—®é¢˜ã€‚\nç›¸å…³çš„ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼Œè´¦æˆ·ç±» Account æœ‰ä¸¤ä¸ªæˆå‘˜å˜é‡ï¼Œåˆ†åˆ«æ˜¯è´¦æˆ·ä½™é¢ balance å’Œè´¦æˆ·å¯†ç  passwordã€‚å–æ¬¾ withdraw() å’ŒæŸ¥çœ‹ä½™é¢ getBalance() æ“ä½œä¼šè®¿é—®è´¦æˆ·ä½™é¢ balanceï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª final å¯¹è±¡ balLock ä½œä¸ºé”ï¼ˆç±»æ¯”çƒèµ›é—¨ç¥¨ï¼‰ï¼›è€Œæ›´æ”¹å¯†ç  updatePassword() å’ŒæŸ¥çœ‹å¯†ç  getPassword() æ“ä½œä¼šä¿®æ”¹è´¦æˆ·å¯†ç  passwordï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª final å¯¹è±¡ pwLock ä½œä¸ºé”ï¼ˆç±»æ¯”ç”µå½±ç¥¨ï¼‰ã€‚ä¸åŒçš„èµ„æºç”¨ä¸åŒçš„é”ä¿æŠ¤ï¼Œå„è‡ªç®¡å„è‡ªçš„ï¼Œå¾ˆç®€å•ã€‚\n```\nclass Account {\n  // é”ï¼šä¿æŠ¤è´¦æˆ·ä½™é¢\n  private final Object balLock\n    = new Object();\n  // è´¦æˆ·ä½™é¢  \n  private Integer balance;\n  // é”ï¼šä¿æŠ¤è´¦æˆ·å¯†ç \n  private final Object pwLock\n    = new Object();\n  // è´¦æˆ·å¯†ç \n  private String password;\n \n  // å–æ¬¾\n  void withdraw(Integer amt) {\n    synchronized(balLock) {\n      if (this.balance > amt){\n        this.balance -= amt;\n      }\n    }\n  } \n  // æŸ¥çœ‹ä½™é¢\n  Integer getBalance() {\n    synchronized(balLock) {\n      return balance;\n    }\n  }\n \n  // æ›´æ”¹å¯†ç \n  void updatePassword(String pw){\n    synchronized(pwLock) {\n      this.password = pw;\n    }\n  } \n  // æŸ¥çœ‹å¯†ç \n  String getPassword() {\n    synchronized(pwLock) {\n      return password;\n    }\n  }\n}\n```\nå½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨ä¸€æŠŠäº’æ–¥é”æ¥ä¿æŠ¤å¤šä¸ªèµ„æºï¼Œä¾‹å¦‚æˆ‘ä»¬å¯ä»¥ç”¨ this è¿™ä¸€æŠŠé”æ¥ç®¡ç†è´¦æˆ·ç±»é‡Œæ‰€æœ‰çš„èµ„æºï¼šè´¦æˆ·ä½™é¢å’Œç”¨æˆ·å¯†ç ã€‚å…·ä½“å®ç°å¾ˆç®€å•ï¼Œç¤ºä¾‹ç¨‹åºä¸­æ‰€æœ‰çš„æ–¹æ³•éƒ½å¢åŠ åŒæ­¥å…³é”®å­— synchronized å°±å¯ä»¥äº†ã€‚\n\nä½†æ˜¯ç”¨ä¸€æŠŠé”æœ‰ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æ€§èƒ½å¤ªå·®ï¼Œä¼šå¯¼è‡´å–æ¬¾ã€æŸ¥çœ‹ä½™é¢ã€ä¿®æ”¹å¯†ç ã€æŸ¥çœ‹å¯†ç è¿™å››ä¸ªæ“ä½œéƒ½æ˜¯ä¸²è¡Œçš„ã€‚è€Œæˆ‘ä»¬ç”¨ä¸¤æŠŠé”ï¼Œå–æ¬¾å’Œä¿®æ”¹å¯†ç æ˜¯å¯ä»¥å¹¶è¡Œçš„ã€‚ç”¨ä¸åŒçš„é”å¯¹å—ä¿æŠ¤èµ„æºè¿›è¡Œç²¾ç»†åŒ–ç®¡ç†ï¼Œèƒ½å¤Ÿæå‡æ€§èƒ½ã€‚è¿™ç§é”è¿˜æœ‰ä¸ªåå­—ï¼Œå«ç»†ç²’åº¦é”ã€‚\n\n### ä¿æŠ¤æœ‰å…³è”å…³ç³»çš„å¤šä¸ªèµ„æº\nå¦‚æœå¤šä¸ªèµ„æºæ˜¯æœ‰å…³è”å…³ç³»çš„ï¼Œé‚£è¿™ä¸ªé—®é¢˜å°±æœ‰ç‚¹å¤æ‚äº†ã€‚ä¾‹å¦‚é“¶è¡Œä¸šåŠ¡é‡Œé¢çš„è½¬è´¦æ“ä½œï¼Œè´¦æˆ· A å‡å°‘ 100 å…ƒï¼Œè´¦æˆ· B å¢åŠ  100 å…ƒã€‚è¿™ä¸¤ä¸ªè´¦æˆ·å°±æ˜¯æœ‰å…³è”å…³ç³»çš„ã€‚é‚£å¯¹äºåƒè½¬è´¦è¿™ç§æœ‰å…³è”å…³ç³»çš„æ“ä½œï¼Œæˆ‘ä»¬åº”è¯¥æ€ä¹ˆå»è§£å†³å‘¢ï¼Ÿå…ˆæŠŠè¿™ä¸ªé—®é¢˜ä»£ç åŒ–ã€‚æˆ‘ä»¬å£°æ˜äº†ä¸ªè´¦æˆ·ç±»ï¼šAccountï¼Œè¯¥ç±»æœ‰ä¸€ä¸ªæˆå‘˜å˜é‡ä½™é¢ï¼šbalanceï¼Œè¿˜æœ‰ä¸€ä¸ªç”¨äºè½¬è´¦çš„æ–¹æ³•ï¼štransfer()ï¼Œç„¶åæ€ä¹ˆä¿è¯è½¬è´¦æ“ä½œ transfer() æ²¡æœ‰å¹¶å‘é—®é¢˜å‘¢ï¼Ÿ\n```\nclass Account {\n  private int balance;\n  // è½¬è´¦\n  void transfer(\n      Account target, int amt){\n    if (this.balance > amt) {\n      this.balance -= amt;\n      target.balance += amt;\n    }\n  } \n}\n```\nç›¸ä¿¡ä½ çš„ç›´è§‰ä¼šå‘Šè¯‰ä½ è¿™æ ·çš„è§£å†³æ–¹æ¡ˆï¼šç”¨æˆ· synchronized å…³é”®å­—ä¿®é¥°ä¸€ä¸‹ transfer() æ–¹æ³•å°±å¯ä»¥äº†ï¼Œäºæ˜¯ä½ å¾ˆå¿«å°±å®Œæˆäº†ç›¸å…³çš„ä»£ç ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚\n```\nclass Account {\n  private int balance;\n  // è½¬è´¦\n  synchronized void transfer(\n      Account target, int amt){\n    if (this.balance > amt) {\n      this.balance -= amt;\n      target.balance += amt;\n    }\n  } \n}\n```\nåœ¨è¿™æ®µä»£ç ä¸­ï¼Œä¸´ç•ŒåŒºå†…æœ‰ä¸¤ä¸ªèµ„æºï¼Œåˆ†åˆ«æ˜¯è½¬å‡ºè´¦æˆ·çš„ä½™é¢ this.balance å’Œè½¬å…¥è´¦æˆ·çš„ä½™é¢ target.balanceï¼Œå¹¶ä¸”ç”¨çš„æ˜¯ä¸€æŠŠé” thisï¼Œç¬¦åˆæˆ‘ä»¬å‰é¢æåˆ°çš„ï¼Œå¤šä¸ªèµ„æºå¯ä»¥ç”¨ä¸€æŠŠé”æ¥ä¿æŠ¤ï¼Œè¿™çœ‹ä¸Šå»å®Œå…¨æ­£ç¡®å‘€ã€‚çœŸçš„æ˜¯è¿™æ ·å—ï¼Ÿå¯æƒœï¼Œè¿™ä¸ªæ–¹æ¡ˆä»…ä»…æ˜¯çœ‹ä¼¼æ­£ç¡®ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ\n\né—®é¢˜å°±å‡ºåœ¨ this è¿™æŠŠé”ä¸Šï¼Œthis è¿™æŠŠé”å¯ä»¥ä¿æŠ¤è‡ªå·±çš„ä½™é¢ this.balanceï¼Œå´ä¿æŠ¤ä¸äº†åˆ«äººçš„ä½™é¢ target.balanceï¼Œå°±åƒä½ ä¸èƒ½ç”¨è‡ªå®¶çš„é”æ¥ä¿æŠ¤åˆ«äººå®¶çš„èµ„äº§ï¼Œä¹Ÿä¸èƒ½ç”¨è‡ªå·±çš„ç¥¨æ¥ä¿æŠ¤åˆ«äººçš„åº§ä½ä¸€æ ·ã€‚\n![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/65fb2026c702434a9751379bd4b87613~tplv-k3u1fbpfcp-zoom-1.image)\n\nä¸‹é¢æˆ‘ä»¬å…·ä½“åˆ†æä¸€ä¸‹ï¼Œå‡è®¾æœ‰ Aã€Bã€C ä¸‰ä¸ªè´¦æˆ·ï¼Œä½™é¢éƒ½æ˜¯ 200 å…ƒï¼Œæˆ‘ä»¬ç”¨ä¸¤ä¸ªçº¿ç¨‹åˆ†åˆ«æ‰§è¡Œä¸¤ä¸ªè½¬è´¦æ“ä½œï¼šè´¦æˆ· A è½¬ç»™è´¦æˆ· B 100 å…ƒï¼Œè´¦æˆ· B è½¬ç»™è´¦æˆ· C 100 å…ƒï¼Œæœ€åæˆ‘ä»¬æœŸæœ›çš„ç»“æœåº”è¯¥æ˜¯è´¦æˆ· A çš„ä½™é¢æ˜¯ 100 å…ƒï¼Œè´¦æˆ· B çš„ä½™é¢æ˜¯ 200 å…ƒï¼Œ è´¦æˆ· C çš„ä½™é¢æ˜¯ 300 å…ƒã€‚\n\næˆ‘ä»¬å‡è®¾çº¿ç¨‹ 1 æ‰§è¡Œè´¦æˆ· A è½¬è´¦æˆ· B çš„æ“ä½œï¼Œçº¿ç¨‹ 2 æ‰§è¡Œè´¦æˆ· B è½¬è´¦æˆ· C çš„æ“ä½œã€‚è¿™ä¸¤ä¸ªçº¿ç¨‹åˆ†åˆ«åœ¨ä¸¤é¢— CPU ä¸ŠåŒæ—¶æ‰§è¡Œï¼Œé‚£å®ƒä»¬æ˜¯äº’æ–¥çš„å—ï¼Ÿæˆ‘ä»¬æœŸæœ›æ˜¯ï¼Œä½†å®é™…ä¸Šå¹¶ä¸æ˜¯ã€‚å› ä¸ºçº¿ç¨‹ 1 é”å®šçš„æ˜¯è´¦æˆ· A çš„å®ä¾‹ï¼ˆA.thisï¼‰ï¼Œè€Œçº¿ç¨‹ 2 é”å®šçš„æ˜¯è´¦æˆ· B çš„å®ä¾‹ï¼ˆB.thisï¼‰ï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶è¿›å…¥ä¸´ç•ŒåŒº transfer()ã€‚åŒæ—¶è¿›å…¥ä¸´ç•ŒåŒºçš„ç»“æœæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿçº¿ç¨‹ 1 å’Œçº¿ç¨‹ 2 éƒ½ä¼šè¯»åˆ°è´¦æˆ· B çš„ä½™é¢ä¸º 200ï¼Œå¯¼è‡´æœ€ç»ˆè´¦æˆ· B çš„ä½™é¢å¯èƒ½æ˜¯ 300ï¼ˆçº¿ç¨‹ 1 åäºçº¿ç¨‹ 2 å†™ B.balanceï¼Œçº¿ç¨‹ 2 å†™çš„ B.balance å€¼è¢«çº¿ç¨‹ 1 è¦†ç›–ï¼‰ï¼Œå¯èƒ½æ˜¯ 100ï¼ˆçº¿ç¨‹ 1 å…ˆäºçº¿ç¨‹ 2 å†™ B.balanceï¼Œçº¿ç¨‹ 1 å†™çš„ B.balance å€¼è¢«çº¿ç¨‹ 2 è¦†ç›–ï¼‰ï¼Œå°±æ˜¯ä¸å¯èƒ½æ˜¯ 200ã€‚\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/35d46aec2bdd4c659748351fb73e48f0~tplv-k3u1fbpfcp-zoom-1.image)\n\n### ä½¿ç”¨é”çš„æ­£ç¡®å§¿åŠ¿\n**é”èƒ½è¦†ç›–æ‰€æœ‰å—ä¿æŠ¤èµ„æºã€‚**\n\nåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œthis æ˜¯å¯¹è±¡çº§åˆ«çš„é”ï¼Œæ‰€ä»¥ A å¯¹è±¡å’Œ B å¯¹è±¡éƒ½æœ‰è‡ªå·±çš„é”ï¼Œå¦‚ä½•è®© A å¯¹è±¡å’Œ B å¯¹è±¡å…±äº«ä¸€æŠŠé”å‘¢ï¼Ÿ\n\nç¨å¾®å¼€åŠ¨è„‘ç­‹ï¼Œä½ ä¼šå‘ç°å…¶å®æ–¹æ¡ˆè¿˜æŒºå¤šçš„ï¼Œæ¯”å¦‚å¯ä»¥è®©æ‰€æœ‰å¯¹è±¡éƒ½æŒæœ‰ä¸€ä¸ªå”¯ä¸€æ€§çš„å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡åœ¨åˆ›å»º Account æ—¶ä¼ å…¥ã€‚æ–¹æ¡ˆæœ‰äº†ï¼Œå®Œæˆä»£ç å°±ç®€å•äº†ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼Œæˆ‘ä»¬æŠŠ Account é»˜è®¤æ„é€ å‡½æ•°å˜ä¸º privateï¼ŒåŒæ—¶å¢åŠ ä¸€ä¸ªå¸¦ Object lock å‚æ•°çš„æ„é€ å‡½æ•°ï¼Œåˆ›å»º Account å¯¹è±¡æ—¶ï¼Œä¼ å…¥ç›¸åŒçš„ lockï¼Œè¿™æ ·æ‰€æœ‰çš„ Account å¯¹è±¡éƒ½ä¼šå…±äº«è¿™ä¸ª lock äº†ã€‚\n```\nclass Account {\n  private Object lockï¼›\n  private int balance;\n  private Account();\n  // åˆ›å»º Account æ—¶ä¼ å…¥åŒä¸€ä¸ª lock å¯¹è±¡\n  public Account(Object lock) {\n    this.lock = lock;\n  } \n  // è½¬è´¦\n  void transfer(Account target, int amt){\n    // æ­¤å¤„æ£€æŸ¥æ‰€æœ‰å¯¹è±¡å…±äº«çš„é”\n    synchronized(lock) {\n      if (this.balance > amt) {\n        this.balance -= amt;\n        target.balance += amt;\n      }\n    }\n  }\n}\n```\nè¿™ä¸ªåŠæ³•ç¡®å®èƒ½è§£å†³é—®é¢˜ï¼Œä½†æ˜¯æœ‰ç‚¹å°ç‘•ç–µï¼Œå®ƒè¦æ±‚åœ¨åˆ›å»º Account å¯¹è±¡çš„æ—¶å€™å¿…é¡»ä¼ å…¥åŒä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœåˆ›å»º Account å¯¹è±¡æ—¶ï¼Œä¼ å…¥çš„ lock ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œé‚£å¯å°±æƒ¨äº†ï¼Œä¼šå‡ºç°é”è‡ªå®¶é—¨æ¥ä¿æŠ¤ä»–å®¶èµ„äº§çš„è’å”äº‹ã€‚åœ¨çœŸå®çš„é¡¹ç›®åœºæ™¯ä¸­ï¼Œåˆ›å»º Account å¯¹è±¡çš„ä»£ç å¾ˆå¯èƒ½åˆ†æ•£åœ¨å¤šä¸ªå·¥ç¨‹ä¸­ï¼Œä¼ å…¥å…±äº«çš„ lock çœŸçš„å¾ˆéš¾ã€‚\n\næ‰€ä»¥ï¼Œä¸Šé¢çš„æ–¹æ¡ˆç¼ºä¹å®è·µçš„å¯è¡Œæ€§ï¼Œæˆ‘ä»¬éœ€è¦æ›´å¥½çš„æ–¹æ¡ˆã€‚è¿˜çœŸæœ‰ï¼Œå°±æ˜¯ç”¨ Account.class ä½œä¸ºå…±äº«çš„é”ã€‚Account.class æ˜¯æ‰€æœ‰ Account å¯¹è±¡å…±äº«çš„ï¼Œè€Œä¸”è¿™ä¸ªå¯¹è±¡æ˜¯ Java è™šæ‹Ÿæœºåœ¨åŠ è½½ Account ç±»çš„æ—¶å€™åˆ›å»ºçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸ç”¨æ‹…å¿ƒå®ƒçš„å”¯ä¸€æ€§ã€‚ä½¿ç”¨ Account.class ä½œä¸ºå…±äº«çš„é”ï¼Œæˆ‘ä»¬å°±æ— éœ€åœ¨åˆ›å»º Account å¯¹è±¡æ—¶ä¼ å…¥äº†ï¼Œä»£ç æ›´ç®€å•ã€‚\n```\nclass Account {\n  private int balance;\n  // è½¬è´¦\n  void transfer(Account target, int amt){\n    synchronized(Account.class) {\n      if (this.balance > amt) {\n        this.balance -= amt;\n        target.balance += amt;\n      }\n    }\n  } \n}\n```\nä¸‹é¢è¿™å¹…å›¾å¾ˆç›´è§‚åœ°å±•ç¤ºäº†æˆ‘ä»¬æ˜¯å¦‚ä½•ä½¿ç”¨å…±äº«çš„é” Account.class æ¥ä¿æŠ¤ä¸åŒå¯¹è±¡çš„ä¸´ç•ŒåŒºçš„ã€‚\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d2a8fddb53054ce799ae68252d850088~tplv-k3u1fbpfcp-zoom-1.image)\n\nâ€œåŸå­æ€§â€çš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿå…¶å®ä¸æ˜¯ä¸å¯åˆ†å‰²ï¼Œä¸å¯åˆ†å‰²åªæ˜¯å¤–åœ¨è¡¨ç°ï¼Œå…¶æœ¬è´¨æ˜¯å¤šä¸ªèµ„æºé—´æœ‰ä¸€è‡´æ€§çš„è¦æ±‚ï¼Œ**æ“ä½œçš„ä¸­é—´çŠ¶æ€å¯¹å¤–ä¸å¯è§**ã€‚ä¾‹å¦‚ï¼Œåœ¨ 32 ä½çš„æœºå™¨ä¸Šå†™ long å‹å˜é‡æœ‰ä¸­é—´çŠ¶æ€ï¼ˆåªå†™äº† 64 ä½ä¸­çš„ 32 ä½ï¼‰ï¼Œåœ¨é“¶è¡Œè½¬è´¦çš„æ“ä½œä¸­ä¹Ÿæœ‰ä¸­é—´çŠ¶æ€ï¼ˆè´¦æˆ· A å‡å°‘äº† 100ï¼Œè´¦æˆ· B è¿˜æ²¡æ¥å¾—åŠå‘ç”Ÿå˜åŒ–ï¼‰ã€‚æ‰€ä»¥**è§£å†³åŸå­æ€§é—®é¢˜ï¼Œæ˜¯è¦ä¿è¯ä¸­é—´çŠ¶æ€å¯¹å¤–ä¸å¯è§**ã€‚", "user_name": "å¥¥å…°æ²»çš„å¨å»‰", "description": "", "got_view_count": 1312, "category_name": "é˜…è¯»", "ctime": 1457483895}
{"tag_name": "Android", "concern_user_count": 240175, "user_id": "272334612346296", "title": "ä»¿MultiTypeæ‰“é€ ListViewå¤šç±»å‹åˆ—è¡¨", "mark_content": "*åœ°å€ï¼šhttps://github.com/stevenwsg/MultiTypeListViewAdapter*\n\n\n# 1ã€ä»‹ç»\nç¬¬ä¸€æ¬¡è§åˆ°MultiTypeæ—¶ï¼ŒçœŸçš„è¢«æƒŠè‰³åˆ°äº†ï¼Œæ²¡æƒ³åˆ°å¤šç±»å‹åˆ—è¡¨å¯ä»¥å†™çš„è¿™ä¹ˆç®€æ´ï¼Œè§£è€¦ã€‚ä¹‹å‰æœ‰å¹¸æ›¾ç»´æŠ¤è¿‡ä¸€ä¸ªæœ‰15ç§ç±»å‹æ„æˆçš„ListView, å®åœ¨éš¾ä»¥æ­ç»´ï¼Œå•ä¸ªAdapterè¶…è¿‡ä¸‰åƒå¤šè¡Œï¼Œå„ç±»å‹ViewHolder æ’å…¥å…¶ä¸­ã€‚è™½ç„¶ListViewå¤šç±»å‹Adapter å¾ˆå¥½ç†è§£ï¼Œé‡ç‚¹å°±getTypeCount()ï¼ŒgetViewType,getView()è¿™ä¸‰ä¸ªæ–¹æ³•, ä½†æ˜¯è¿™æ ·å†™æ€»æ„Ÿè§‰æ€ªæ€ªçš„ï¼Œ å¦‚æœé¡¹ç›®ç»„æ¥ä¸ªå¹´è½»äººæ²¡ç”¨è¿‡ListView ï¼Œæ–°å¢ä¸€ç§ç±»å‹è€Œå¿˜äº†ç»™ getTypeCount()æ–¹æ³•åŠ 1ï¼Œå°±è¦å‡ºçº¿ä¸Šäº‹æ•…ï¼Œå¢åŠ ç»´æŠ¤æˆæœ¬ã€‚\n\n![image](https://i.loli.net/2020/08/09/YqEFw96ZJAbSKpD.png)\n\næœ€è¿‘æ„Ÿæ‚Ÿåˆ°ï¼Œåœ¨æ—¥å¸¸çš„ä¸šåŠ¡å¼€å‘ä¸­ï¼Œè§‰å¾—ä¸çˆ½ï¼Œä¸åˆç†çš„åœ°æ–¹æƒ³æƒ³æœ‰æ²¡æœ‰æ›´å¥½çš„è§£å†³æ–¹å¼ï¼Œå¤šæ€è€ƒï¼Œ è€Œä¸æ˜¯ä¸€ç›´åœ¨æ¬ç –å †ä¸šåŠ¡ã€‚ å°±MultiTypeè€Œè¨€ï¼ŒåŸç†å¤§å®¶åŸºæœ¬ä¸Šçœ‹ä¸€ä¸‹åº¦èƒ½å¤Ÿç†è§£ï¼Œå¹¶ä¸æ˜¯å¾ˆæ·±å¥¥çš„ä¸œè¥¿ã€‚ ä½†æ˜¯æå‡ºè¿™ä¸ªæƒ³æ³•çš„äººå´æ¯”è¾ƒå°‘ï¼Œå¹¶ä¸”åœ¨RecyclerVeiw å‡ºç°ä¹‹åæå‡ºï¼Œ ä»Android 1.0æ—¶ä»£ï¼Œåˆ—è¡¨éƒ½æ˜¯ç”¨ListViewå®ç°çš„ï¼Œ å¤§å®¶å®ç°å¤šç±»å‹åˆ—è¡¨éƒ½æ˜¯é‚£ä¸‰ä¸ªæ–¹æ³•ï¼Œ ä¸ºä»€ä¹ˆæ²¡æœ‰æ›´ç®€æ´çš„æ–¹æ¡ˆæå‡ºæ¥é‚£ï¼ˆå¯èƒ½æœ‰äº›å…¬å¸æœ‰å¤§ä½¬æå‡ºæ¥æ²¡æœ‰å¼€æºï¼‰ï¼Œå€¼å¾—æ€è€ƒã€‚\n\n\n\nä»å»å¹´å¼€å§‹ä¸€ç›´æƒ³å†™å…³äºListViewå®ç°å¤šç±»å‹åˆ—è¡¨çš„å®ç°æ–¹å¼ï¼Œä¸€ç›´æ‹–åˆ°ç°åœ¨ï¼Œä¸€ä¸ªåŸå› æ˜¯èœï¼Œä¸€ä¸ªåŸå› æ˜¯æ‡’ã€‚ä¹‹å‰å·¥ä½œå¤ªå¿™äº†ã€‚ è¶ç€å‰æ®µæ—¶é—´ä¸å¤ªå¿™ï¼ŒæŠŠè¿™ä¸ªæƒ³æ³•å®Œå–„äº†ä¸€ä¸‹ã€‚ \n\n\näº†è§£MultiTypeåŸç†çš„åŒå­¦ï¼Œç†è§£æ¥ä¸‹æ¥è¦è¯´çš„å…¶å®é—®é¢˜ä¸å¤§ï¼Œ ä¸äº†è§£çš„åŒå­¦å…¶å®å¯ä»¥çœ‹çœ‹æˆ‘è¿™ç¯‡ï¼Œ [RecyclerViewå¤šç±»å‹åˆ—è¡¨å®ç°â€”â€” MultiTypeåˆ†æ](https://juejin.im/post/6844904152108122126)ï¼Œ ç®€å•çš„æ¥è¯´å°±æ˜¯ç»´æŠ¤ä¸€ä¸ªæ˜ å°„è¡¨ï¼Œå®ç°ViewTypeç±»å‹ï¼ŒBeanæ•°æ®ï¼ŒViewHolderçš„æ˜ å°„ã€‚\n\nå›å¿†ä¸€ä¸‹MultiTypeçš„å®ç°ï¼š\n![image](https://user-gold-cdn.xitu.io/2020/5/9/171f93bfcfab7a41?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)\n\nå¯¹åº”çš„æ˜ å°„è¡¨ï¼š  \n\n\nViewType | Java Bean Class | Linker | ItemViewBinder\n---|---|---|---\n0 | C1 | L1|binder_1\n1 | C2 | L2|binder_2_1\n2 | C2 | L2|binder_2_2\n3 | C2 | L2|binder_2_3\n4 | C2 | L3|binder_3_1\n\næ­¤æ¬¡MultiTypeListViewAdapterçš„å®ç°ï¼š\n\n![image](https://i.loli.net/2020/08/09/aOTm583lYrVivt6.png)\nå¯¹åº”çš„æ˜ å°„è¡¨ï¼š  \n\n\nViewType | Java Bean Class | ViewHolder\n---|---|---|---\n0 | C0 | viewHolder0\n1 | C1 | viewHolder1\n2 | C2 | viewHolder2\n3 | C3 | viewHolder3\n4 | C4 | viewHolder4\n\nå¯ä»¥çœ‹å‡ºæ­¤æ¬¡å®ç°çš„MultiTypeListViewAdapterç›¸æ¯”MultiTypeåªå®ç°äº†ä¸€å¯¹ä¸€æ˜ å°„ï¼Œ è€Œæ²¡æœ‰å®ç°ä¸€å¯¹å¤šæ˜ å°„ï¼Œå¦‚æœæœ‰ç›¸å…³éœ€æ±‚çš„è¯ï¼Œå¯ä»¥è€ƒè™‘åœ¨æ•°æ®å±‚è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå³å¤šä¸ªJavaBeanç»‘å®šåŒä¸€ä¸ªViewHolderã€‚\n\n\n\nå¦‚æœä½ æƒ³å¯¹è€é¡¹ç›®ä¸­çš„å¤šç±»å‹ListViewè¿›è¡Œæ•´ç†æˆ–è€…å°èŒƒå›´é‡æ„çš„è¯ï¼Œå¯ä»¥è¯•è¯•è¿™ä¸ªæ–¹æ¡ˆï¼Œ å¯¹ä»£ç æ”¹åŠ¨é‡å’Œè¿ç§»é‡æ˜¯æ¯”è¾ƒå°çš„ã€‚å¤§èŒƒå›´é‡æ„å¯èƒ½å°±è€ƒè™‘RecyclerViewäº†ã€‚\n\n# 2ã€ ä½¿ç”¨\n\nç”¨æ³•æ¯”è¾ƒç®€æ´ï¼Œ å’ŒMultiTypeçš„ç”¨æ³•å…¶å®æ˜¯ä¸€æ ·çš„\n\n### 1ã€åˆ›å»ºæ•°æ®å®ä½“\n\n```\ndata class TextItem(val text : String)\n```\n### 2ã€åˆ›å»ºViewHolder\n\n```\nclass TextViewHolder : BaseViewHolder<TextItem>() {\n\n    private var text: TextView? = null\n\n    override fun getLayoutId(): Int {\n        return R.layout.item_text //è¿”å›VHçš„å¸ƒå±€æ–‡ä»¶\n    }\n\n    override fun onBindViewHolder(rootView: View) {\n        text = rootView.findViewById(R.id.text) //ç»‘å®šView\n    }\n\n    override fun render(item: TextItem, position: Int) {\n        text?.text = item.text //æ¸²æŸ“æ•°æ®å’Œè®¾ç½®ç‚¹å‡»äº‹ä»¶ç­‰\n    }\n}\n```\n\n### 3ã€Adapterç»‘å®šViewHolder,æ³¨å…¥æ•°æ®\n\n\n```\nclass MainActivity : AppCompatActivity() {\n\n    private var mList: MutableList<Any>? = null\n    private var mListView: ListView? = null\n    private var adapter: MultiTypeListViewAdapter? = null\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        initData();\n        initAdapter();\n\n        mListView = findViewById(R.id.listview)\n        mListView?.adapter = adapter\n    }\n\n    private fun initData() {\n        mList = ArrayList()\n        for (i in 1..100) { //æ·»åŠ å„ç§ç±»å‹çš„æ•°æ®\n            mList?.add(ImageItem(R.mipmap.ic_launcher))\n            mList?.add(RichItem(\"å°è‰¾å¤§äººèµ›é«˜\", R.drawable.ic_launcher_foreground))\n            mList?.add(TextItem(\"æ²¡æœ‰ä»€ä¹ˆèƒ½å¤Ÿé˜»æŒ¡ï¼Œä½ å¯¹è‡ªç”±çš„å‘å¾€~\"))\n        }\n    }\n\n    //æ³¨å†ŒViewHolder\n    private fun initAdapter() { //ç»‘å®šå„ä¸ªç±»å‹çš„VHå’Œæ•°æ®ï¼Œå¡«å……æ˜ å°„è¡¨\n        adapter = MultiTypeListViewAdapter(this, mList)\n        adapter?.register(RichItem::class.java, RichTextViewHolder())\n        adapter?.register(ImageItem::class.java, ImageViewHolder())\n        adapter?.register(TextItem::class.java, TextViewHolder())\n    }\n}\n```\n  å®ç°æ•ˆæœ  \n  \n![image](https://i.loli.net/2020/08/09/BfMw3CAV4U2Sbl1.png)\n\n# 3ã€åŸç†\n\nåŸç†å…¶å®å°±æ˜¯å°†getTypeCount()ï¼ŒgetViewType,getView()è¿™ä¸‰ä¸ªæ–¹æ³•å°è£…èµ·æ¥ï¼Œå¸®åŠ©å¼€å‘è€…é¿å…è¿™ä¸‰ä¸ªæ–¹æ³•ï¼Œ å…·ä½“çš„å®ç°æ–¹å¼å°±æ˜¯ç»´æŠ¤è¿™ä¸ªæ˜ å°„è¡¨ã€‚\n\nViewType | Java Bean Class | ViewHolder\n---|---|---|---\n0 | C0 | viewHolder0\n1 | C1 | viewHolder1\n2 | C2 | viewHolder2\n3 | C3 | viewHolder3\n4 | C4 | viewHolder4\n\næ€ä¹ˆæ˜ å°„é‚£ï¼Œä¸‹é¢å°±å¼€å§‹ä¸Šä»£ç ï¼š  \nè¿™ä¸ªæ˜¯é¡¹ç›®ç»“æ„ï¼Œä»£ç é‡å¾ˆå°‘ï¼Œ å¤§å®¶å¦‚æœæ„Ÿå…´è¶£çš„è¯ï¼Œ å¯ä»¥ä¸‹è½½ä¸‹æ¥çœ‹çœ‹ï¼Œä¸å¤§åªæœ‰å››ä¸ªç±»  \n\n\n![image](https://i.loli.net/2020/08/09/izbagGRA9h5JrZm.png)\n\n\n### 1ã€TypePool\n\n```\ninterface TypePool {\n    fun <T> register(clazz: Class<out T>, holder: BaseViewHolder<T>)\n    fun unregister(clazz: Class<*>)\n    fun size(): Int //ç±»å‹æ•°ç›®\n    fun indexOf(clazz: Class<*>): Int //Classå¯¹åº”çš„positon\n    fun getBaseViewHolder(index: Int): BaseViewHolder<*>\n}\n```\n\n2ã€MultiTypePool\n\n\n```\npublic class MultiTypePool : TypePool {\n    private val classes: MutableList<Class<*>>\n    private val holders: MutableList<BaseViewHolder<*>>\n\n    constructor() { //ç»´æŠ¤ä¸Šé¢æ‰€è¯´çš„æ˜ å°„è¡¨\n        classes = ArrayList()\n        holders = ArrayList()\n    }\n\n    constructor(initialCapacity: Int) {\n        classes = ArrayList(initialCapacity)\n        holders = ArrayList(initialCapacity)\n    }\n\n    //æ³¨å†Œå’Œè§£ç»‘å…¶å®éƒ½æ˜¯å¯¹ä¸Šè¿°æ˜ å°„è¡¨çš„æ“ä½œ\n    override fun <T> register(\n        clazz: Class<out T>,\n        holder: BaseViewHolder<T>\n    ) {\n        classes.add(clazz)\n        holders.add(holder)\n    }\n\n    override fun unregister(clazz: Class<*>) {\n        val postion = indexOf(clazz)\n        classes.remove(clazz)\n        holders.removeAt(postion)\n    }\n\n    override fun size(): Int { // ä¸€å…±å¤šå°‘ä¸ªç±»å‹çš„VH\n        return classes.size\n    }\n\n    override fun indexOf(clazz: Class<*>): Int { //å¯¹åº”çš„postion\n        return classes.indexOf(clazz)\n    }\n\n    override fun getBaseViewHolder(index: Int): BaseViewHolder<*> {\n        return holders[index]\n    }\n}\n```\n### 3ã€BaseViewHolder\n\nå°±æ˜¯æ™®é€šçš„ViewHolder, çº¦å®šä¿—æˆçš„å®ç°ä»¥ä¸‹æ–¹æ³•ï¼Œ å¯ä»¥çœ‹å‡ºå¹¶æ²¡æœ‰åƒMultiTypeåœ¨åšä¸€å±‚ä»£ç†ï¼Œå‡å°‘ç†è§£æˆæœ¬ï¼Œ å’Œå¹³æ—¶çš„ä½¿ç”¨å…¶å®æ˜¯ä¸€æ ·çš„\n\n```\npublic abstract class BaseViewHolder<T> {\n\n    protected var adapter: MultiTypeListViewAdapter? = null\n\n    // è·å–å¸ƒå±€id\n    abstract fun getLayoutId(): Int\n    abstract fun onBindViewHolder(rootView: View) // ç»‘å®šView\n    abstract fun render(item: T, position: Int) // æ¸²æŸ“æ•°æ®\n}\n```\n#### 4ã€MultiTypeListViewAdapter\n\n```\npublic class MultiTypeListViewAdapter extends BaseAdapter {\n\n    private static final String TAG = \"MultiTypeListViewAdapter\";\n    private List<?> items;\n    private TypePool typePool;\n    private LayoutInflater inflater;\n\n    // ä¸‹é¢è¿™äº›æ–¹æ³•ï¼Œå’ŒListViewæ™®é€šAdapterå†™æ³•ä¸€æ ·\n    public MultiTypeListViewAdapter(Context context) {\n        this(context, Collections.emptyList());\n    }\n\n    public MultiTypeListViewAdapter(Context context, List<?> items) {\n        this(context, items, new MultiTypePool());\n    }\n\n    public MultiTypeListViewAdapter(Context context, List<?> items, int initialCapacity) {\n        this(context, items, new MultiTypePool(initialCapacity));\n    }\n\n    public MultiTypeListViewAdapter(Context context, List<?> items, TypePool pool) {\n        this.items = items;\n        this.typePool = pool;\n        inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);\n    }\n\n    public void setItems(List<?> items) {\n        this.items = items;\n    }\n\n    public List<?> getItems() {\n        return items;\n    }\n\n    public <T> void register(Class<? extends T> clazz, BaseViewHolder<T> holder) {\n        typePool.register(clazz, holder);\n        holder.setAdapter(this); // å°†Adapteræ³¨å…¥VHä¸­ï¼Œ æ–¹ä¾¿åé¢VHè°ƒç”¨Adapteræˆ–è€…Activityçš„æ–¹æ³•ï¼Œ åŒæ—¶éœ€è¦æ³¨æ„å›æ”¶\n    }\n\n\n    @Override\n    public int getCount() {\n        return items.size();\n    }\n\n    @Override\n    public Object getItem(int position) {\n        return items.get(position);\n    }\n\n    @Override\n    public long getItemId(int position) {\n        return position;\n    }\n\n    @Override\n    public View getView(int position, View convertView, ViewGroup parent) {\n        BaseViewHolder viewHolder;\n        int viewType = getItemViewType(position);\n//        if (convertView == null) {\n//        viewHolder = typePool.getBaseViewHolder(viewType);\n//       convertView = inflater.inflate(viewHolder.getLayoutId(), parent, false);\n//        viewHolder.onBindViewHolder(convertView);\n//\n//            convertView.setTag(viewHolder);\n//        } else {\n//            viewHolder = typePool.getBaseViewHolder(viewType);\n//        }\n\n// è¿™å—çš„VH å¤ç”¨è¿˜æ˜¯æœ‰ç‚¹é—®é¢˜ï¼Œ å†™å‡ºæ¥è¿˜æ˜¯æƒ³æ‰¾å¤§å®¶çœ‹çœ‹æœ‰æ²¡æœ‰å¥½çš„æ–¹å¼è§£å†³è¿™ä¸ª\n\n        // ä¸‹é¢è¿™å—æ˜¯VHä¸å¤ç”¨çš„æ–¹å¼\n        viewHolder = typePool.getBaseViewHolder(viewType); //æ‹¿åˆ°ç›¸åº”çš„ViewHolder\n        convertView = inflater.inflate(viewHolder.getLayoutId(), parent, false); //åˆå§‹åŒ–å¸ƒå±€\n        viewHolder.onBindViewHolder(convertView); //ViewHolderç»‘å®šå¸ƒå±€\n    \n        viewHolder.render(getItem(position), position); //ViewHolderæ¸²æŸ“æ•°æ®\n        return convertView;\n    }\n\n    @Override\n    public int getViewTypeCount() { // å°±æ˜¯è¿”å›æ˜ å°„è¡¨çš„è¡Œæ•°é‡\n        return typePool.size();\n    }\n\n    @Override\n    public int getItemViewType(int position) { // è¿”å›è¯¥ç”¨ç¬¬å‡ è¡Œçš„ç±»å‹\n        return typePool.indexOf(items.get(position).getClass());\n    }\n}\n```\nç›®å‰è¿™ä¸ªgetView()æ–¹æ³•ä¸­çš„VHæ˜¯æ²¡æœ‰å¤ç”¨çš„ï¼Œ ä¸æ¨èè¿™ä¹ˆåšï¼Œä½†æ˜¯å¤ç”¨ç‰ˆå†™çš„ä»£ç å¤ç”¨çš„æœ‰ç‚¹é—®é¢˜ï¼Œæƒ³è®©å¤§å®¶çœ‹çœ‹æ”¹æ€ä¹ˆä¿®æ”¹ï¼Œè¿™ä¹Ÿæ˜¯å¼€æºå˜›ï¼Œ é€ƒï¼ˆä¸ºè‡ªå·±çš„èœæ‰¾åŸå› ï¼‰ã€‚\n\n#### 4ã€æ€»ç»“\nå¤§å®¶æ—¥å¸¸å†™åˆ—è¡¨å¯èƒ½å·²ç»ä¸è€ƒè™‘ListViewäº†ï¼Œéƒ½ä½¿ç”¨RecyclerViewäº†ã€‚è™½ç„¶è¿™ç¯‡æ–‡ç« è®²çš„æ˜¯ListViewå®ç°çš„å¤šç±»å‹åˆ—è¡¨ï¼Œä¹Ÿæ˜¯è¿‘æœŸæ¥çš„ä¸€äº›æ€è€ƒï¼Œåˆ†äº«å‡ºæ¥ã€‚æ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥ä¸‹è½½æºç çœ‹çœ‹ã€‚\n\nGitHubåœ°å€ï¼šhttps://github.com/stevenwsg/MultiTypeListViewAdapter\n", "user_name": "æ²‰é»˜ç‹è´°", "description": "äººç¼ºçš„æ˜¯é€‰æ‹©çš„å‹‡æ°”ï¼Œå¯¹äºé€‰æ‹©çš„åæœæ— æ³•æ‰¿æ‹…çš„ææƒ§", "got_view_count": 2824, "category_name": "Android", "ctime": 1461266353}
{"tag_name": "Java", "concern_user_count": 252044, "user_id": "2814346130098919", "title": "è¿™ç¯‡å…³äºSpringä¹‹SSMæ¡†æ¶çš„ç¬”è®°ä½ çœŸå¾—çœ‹çœ‹ï¼Œå†™çš„éå¸¸è¯¦ç»†äº†", "mark_content": "## ä»€ä¹ˆæ˜¯AOP\n\nAOPæ˜¯Aspect Oriented Programmingçš„ç¼©å†™ï¼Œæ„æ€ä¸ºé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œæ˜¯é€šè¿‡é¢„ç¼–è¯‘çš„æ–¹æ³•å’Œè¿è¡ŒæœŸåŠ¨æ€ä»£ç†å®ç°ç¨‹åºçš„ç»Ÿä¸€ç»´æŠ¤çš„ä¸€ç§æŠ€æœ¯\n\nAOPæ˜¯OOPï¼ˆé¢å‘å¯¹è±¡ï¼‰çš„å»¶ç»­ï¼Œæ˜¯è½¯ä»¶å¼€å‘ä¸­çš„ä¸€ä¸ªçƒ­ç‚¹ï¼Œä¹Ÿæ˜¯Springæ¡†æ¶ä¸­çš„ä¸€ä¸ªé‡è¦å†…å®¹ï¼Œæ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€ç§è¡ç”ŸèŒƒå‹ã€‚åˆ©ç”¨AOPå¯ä»¥å¯¹ä¸šåŠ¡é€»è¾‘çš„å„ä¸ªéƒ¨åˆ†è¿›è¡Œéš”ç¦»ï¼Œä»è€Œä½¿å¾—ä¸šåŠ¡é€»è¾‘å„éƒ¨åˆ†ä¹‹é—´çš„è€¦åˆåº¦é™ä½ï¼Œæé«˜ç¨‹åºçš„å¯é‡ç”¨æ€§ï¼ŒåŒæ—¶æé«˜äº†å¼€å‘çš„æ•ˆç‡ã€‚\n\n## AOPçš„ä½œç”¨åŠå…¶ä¼˜åŠ¿\n\n## ä½œç”¨\n\nåœ¨ç¨‹åºè¿è¡ŒæœŸé—´ï¼Œåœ¨ä¸ä¿®æ”¹æºç çš„æƒ…å†µä¸‹å¯¹æ–¹æ³•è¿›è¡ŒåŠŸèƒ½å¢å¼º\n\n## ä¼˜åŠ¿\n\nå‡å°‘é‡å¤ä»£ç ï¼Œæé«˜å¼€å‘æ•ˆç‡ï¼Œå¹¶ä¸”ä¾¿äºç»´æŠ¤\n\n## AOPçš„åº•å±‚å®ç°\n\nå®é™…ä¸Šï¼Œåœ¨AOPçš„åº•å±‚æ˜¯é€šè¿‡Springæä¾›çš„åŠ¨æ€ä»£ç†æŠ€æœ¯å®ç°çš„ã€‚åœ¨è¿è¡ŒæœŸé—´ï¼ŒSpringé€šè¿‡åŠ¨æ€ä»£ç†æŠ€æœ¯åŠ¨æ€ç”Ÿæˆä»£ç†å¯¹è±¡ï¼Œä»£ç†å¯¹è±¡æ–¹æ³•æ‰§è¡Œæ—¶è¿›è¡Œå¢å¼ºåŠŸèƒ½çš„ä»‹å…¥ï¼Œåœ¨å»è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•ï¼Œä»è€Œå®ŒæˆåŠŸèƒ½çš„å¢å¼ºã€‚\n\n## AOPçš„åŠ¨æ€ä»£ç†æŠ€æœ¯\n\n## å¸¸ç”¨çš„åŠ¨æ€ä»£ç†æŠ€æœ¯ï¼š\n\n*   JDKä»£ç†ï¼šåŸºäºæ¥å£çš„åŠ¨æ€ä»£ç†æŠ€æœ¯\n*   cglib:åŸºäºçˆ¶ç±»çš„åŠ¨æ€ä»£ç†æŠ€æœ¯\n\n## AOPç›¸å…³æ¦‚å¿µ\n\nSpringçš„AOPå®ç°åº•å±‚å°±æ˜¯å¯¹åŠ¨æ€ä»£ç†çš„ä»£ç è¿›è¡Œäº†å°è£…ï¼Œå°è£…åæˆ‘ä»¬åªéœ€è¦å¯¹å…³æ³¨çš„éƒ¨åˆ†è¿›è¡Œä»£ç ç¼–å†™ï¼Œå¹¶é€šè¿‡é…ç½®çš„æ–¹å¼å®ŒæˆæŒ‡å®šç›®æ ‡çš„æ–¹æ³•å¢å¼ºã€‚\n\n## ç›¸å…³æœ¯è¯­\n\n*   Targetï¼ˆç›®æ ‡å¯¹è±¡ï¼‰ï¼šä»£ç†çš„ç›®æ ‡å¯¹è±¡\n*   Proxyï¼ˆä»£ç†ï¼‰ï¼šä¸€ä¸ªè¢«AOPç»‡å…¥å¢å¼ºåï¼Œå°±äº§ç”Ÿä¸€ä¸ªç»“æœä»£ç†ç±»\n*   Joinpointï¼ˆè¿æ¥ç‚¹ï¼‰ï¼šæ‰€è°“è¿æ¥ç‚¹æ˜¯æŒ‡é‚£äº›è¢«æ‹¦æˆªåˆ°çš„ç‚¹ã€‚åœ¨springä¸­ï¼Œè¿™äº›ç‚¹æŒ‡çš„æ˜¯æ–¹æ³•ï¼Œå› ä¸ºspringåªæ”¯æŒæ–¹æ³•ç±»å‹çš„è¿æ¥ç‚¹\n*   Pointcutï¼ˆåˆ‡å…¥ç‚¹ï¼‰ï¼šæ‰€è°“åˆ‡å…¥ç‚¹æ˜¯æŒ‡æˆ‘ä»¬è¦å¯¹å“ªäº›Joinpointè¿›è¡Œæ‹¦æˆªå®šä¹‰\n*   Adviceï¼ˆé€šçŸ¥/å¢å¼ºï¼‰ï¼šæ‰€è°“é€šçŸ¥æ˜¯æŒ‡æ‹¦æˆªåˆ°Joinpointä¹‹åæ‰€è¦åšçš„äº‹æƒ…å°±æ˜¯é€šçŸ¥\n*   Aspectï¼ˆåˆ‡é¢ï¼‰ï¼šæ˜¯åˆ‡å…¥ç‚¹å’Œé€šçŸ¥ï¼ˆå¼•ä»‹ï¼‰çš„ç»“åˆ\n*   Weavingï¼ˆç»‡å…¥ï¼‰ï¼šæ˜¯æŒ‡æŠŠå¢å¼ºåº”ç”¨åˆ°ç›®æ ‡å¯¹è±¡æ¥åˆ›å»ºæ–°çš„ä»£ç†å¯¹è±¡çš„è¿‡ç¨‹ã€‚Springé‡‡ç”¨åŠ¨æ€ä»£ç†ç»‡å…¥ï¼Œè€ŒAspectJé‡‡ç”¨ç¼–è¯‘æœŸç»‡å…¥å’Œç±»è£…è½½æœŸç»‡å…¥\n\n## AOPå¼€å‘çš„æ˜ç¡®äº‹é¡¹\n\n## éœ€è¦ç¼–å†™çš„å†…å®¹\n\n*   ç¼–å†™æ ¸å¿ƒä¸šåŠ¡ä»£ç ï¼ˆç›®æ ‡ç±»çš„ç›®æ ‡æ–¹æ³•ï¼‰\n*   ç¼–å†™åˆ‡é¢ç±»ï¼Œåˆ‡é¢ä¸­æœ‰é€šçŸ¥ï¼ˆå¢å¼ºåŠŸèƒ½çš„æ–¹æ³•ï¼‰\n*   åœ¨é…ç½®æ–‡ä»¶ä¸­ç»‡å…¥å…³ç³»ï¼Œå³å°†å“ªäº›é€šçŸ¥ä¸å“ªäº›è¿æ¥ç‚¹è¿›è¡Œç»“åˆ\n\n## AOPæŠ€æœ¯å®ç°çš„å†…å®¹\n\nSpringæ¡†æ¶ç›‘æ§åˆ‡å…¥ç‚¹æ–¹æ³•çš„æ‰§è¡Œã€‚ä¸€æ—¦åˆ‡å…¥ç‚¹æ–¹æ³•è¢«è¿è¡Œï¼Œä½¿ç”¨ä»£ç†æœºåˆ¶ï¼ŒåŠ¨æ€åˆ›å»ºç›®æ ‡å¯¹è±¡çš„ä»£ç†å¯¹è±¡ï¼Œæ ¹æ®é€šçŸ¥ç±»åˆ«ï¼Œåœ¨ä»£ç†å¯¹è±¡çš„å¯¹åº”ä½ç½®ï¼Œå°†é€šçŸ¥å¯¹åº”çš„åŠŸèƒ½ç»‡å…¥ï¼Œå®Œæˆå®Œæ•´çš„ä»£ç é€»è¾‘è¿è¡Œã€‚\n\n## AOPåº•å±‚ä½¿ç”¨å“ªç§ä»£ç†æ–¹å¼\n\nåœ¨springä¸­ï¼Œæ¡†æ¶ä¼šæ ¹æ®ç›®æ ‡ç±»æ˜¯å¦å®ç°äº†æ¥å£æ¥å†³å®šé‡‡ç”¨å“ªç§åŠ¨æ€ä»£ç†çš„æ–¹å¼\n\n## åŸºäºXMLçš„AOPå¼€å‘\n\n## å¿«é€Ÿå…¥é—¨\n\n1.  å¯¼å…¥AOPç›¸å…³çš„åæ ‡\n\n```\n <dependency>\n                   <groupId>org.springframework</groupId>\n                   <artifactId>spring-context</artifactId>\n                   <version>5.2.5.RELEASE</version>\n               </dependency>\n       <dependency>\n                   <groupId>org.aspectj</groupId>\n                   <artifactId>aspectjweaver</artifactId>\n                   <version>1.8.4</version>\n               </dependency>\n               <dependency>\n                   <groupId>junit</groupId>\n                   <artifactId>junit</artifactId>\n                   <version>4.12</version>\n               </dependency>\n\n```\n\n2.  åˆ›å»ºç›®æ ‡æ¥å£å’Œç›®æ ‡ç±»ï¼ˆå†…éƒ¨æœ‰åˆ‡ç‚¹ï¼‰\n\n```\n public interface TargetInterface {\n           void save();\n}\n\n```\n\n```\n public class Target implements TargetInterface {\n           @Override\n           public void save() {\n               System.out.println(\"æ„å¤§åˆ©ç‚®å‡†å¤‡å°±ç»ªï¼\");\n           }\n}\n\n```\n\n3.  åˆ›å»ºåˆ‡é¢ç±»ï¼ˆå†…éƒ¨æœ‰å¢å¼ºæ–¹æ³•ï¼‰\n\n```\n public class MyAspect {\n\n           public void before(){\n               System.out.println(\"æˆ‘æ˜¯å‰ç½®æ–¹æ³•ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚\");\n           }\n}\n\n```\n\n4.  å°†ç›®æ ‡ç±»å’Œåˆ‡é¢ç±»çš„å¯¹è±¡åˆ›å»ºæƒäº¤ç»™spring\n\n```\n \t\t\t<!--ç›®æ ‡å¯¹è±¡-->\n           <bean id=\"target\" class=\"zyh.com.aop.Target\"></bean>\n\n           <!--åˆ‡é¢å¯¹è±¡-->\n           <bean id=\"myAspect\" class=\"zyh.com.aop.MyAspect\"></bean>\n\n```\n\n5.  åœ¨applicationContext.xmlä¸­é…ç½®ç»‡å…¥å…³ç³»\n\n```\n  \t\t<!--é…ç½®ç»‡å…¥ï¼šå‘Šè¯‰springæ¡†æ¶ å“ªäº›æ–¹æ³•ï¼ˆåˆ‡ç‚¹ï¼‰éœ€è¦è¿›è¡Œå“ªäº›å¢å¼ºï¼ˆå‰ç½®ï¼Œåç½®...)-->\n           <aop:config>\n               <!--å£°æ˜åˆ‡é¢-->\n               <aop:aspect ref=\"myAspect\">\n                   <!--åˆ‡é¢ï¼šåˆ‡ç‚¹+é€šçŸ¥ å½“è®¿é—®saveæ–¹æ³•æ—¶ï¼Œä¼šé€šè¿‡myAspectä¸­çš„beforeæ–¹æ³•è¿›è¡Œå‰ç½®å¢å¼º-->\n                   <aop:before method=\"before\" pointcut=\"execution(public void zyh.com.aop.Target.save())\"/>\n               </aop:aspect>\n           </aop:config>\n\n```\n\n6.  æµ‹è¯•ä»£ç \n\n```\n\t   @RunWith(SpringJUnit4ClassRunner.class)\n       @ContextConfiguration(\"classpath:applicationContext.xml\")\n       public class AopTest {\n           @Autowired\n           @Qualifier(\"target\")\n           private TargetInterface target;\n\n           @Test\n           public void  t1(){\n               target.save();\n           }\n       }\n\n```\n\n## åˆ‡ç‚¹è¡¨è¾¾å¼çš„å†™æ³•\n\nè¡¨è¾¾å¼è¯­æ³•ï¼šexcution([ä¿®é¥°ç¬¦] è¿”å›å€¼ç±»å‹ åŒ…å.ç±»å.æ–¹æ³•å(å‚æ•°))\n\n*   è®¿é—®ä¿®é¥°ç¬¦å¯ä»¥çœç•¥\n*   è¿”å›å€¼ç±»å‹ã€åŒ…åã€ç±»åã€æ–¹æ³•åå¯ä»¥ä½¿ç”¨*ä»£è¡¨ä»»æ„\n*   åŒ…åä¸ç±»åä¹‹é—´ä¸€ä¸ªç‚¹ï¼Œä»£è¡¨å½“å‰åŒ…ä¸‹çš„ç±»ï¼Œä¸¤ä¸ªç‚¹â€¦è¡¨ç¤ºå½“å‰åŒ…åŠå…¶å­åŒ…ä¸‹çš„ç±»\n*   å‚æ•°åˆ—è¡¨å¯ä»¥ä½¿ç”¨ä¸¤ä¸ªâ€¦è¡¨ç¤ºä»»æ„ä¸ªæ•°ï¼Œä»»æ„ç±»å‹çš„å‚æ•°åˆ—è¡¨\n\n## é€šçŸ¥ç±»å‹\n\n*   å‰ç½®é€šçŸ¥ï¼š aop:before åˆ‡å…¥ç‚¹æ–¹æ³•ä¹‹å‰æ‰§è¡Œ\n\n*   åç½®é€šçŸ¥:aop:after-returning åˆ‡å…¥ç‚¹æ–¹æ³•ä¹‹åæ‰§è¡Œ\n\n*   ç¯ç»•é€šçŸ¥ï¼šaop:around åˆ‡å…¥ç‚¹æ–¹æ³•ä¹‹å‰å’Œä¹‹åéƒ½æ‰§è¡Œ\n    //ProceedingJoinPoint:æ­£åœ¨æ‰§è¡Œçš„è¿æ¥ç‚¹====åˆ‡ç‚¹\n    public Object around(ProceedingJoinPoint pjp)throws Throwble{\n    System.out.println(â€œç¯ç»•å‰å¢å¼ºâ€);\n    Object proceed = pjp.proceed();//åˆ‡ç‚¹æ–¹æ³•\n    System.out.println(â€œç¯ç»•åå¢å¼ºâ€);\n    return proceed;\n    }\n\n*   å¼‚å¸¸æŠ›å‡ºé€šçŸ¥ï¼šaop:throwing æŒ‡å®šå¢å¼ºæ–¹æ³•å‡ºç°å¼‚å¸¸æ—¶æ‰§è¡Œ\n\n*   æœ€ç»ˆé€šçŸ¥ï¼šaop:after æ— è®ºå¢å¼ºæ–¹æ³•æ˜¯å¦æœ‰å¼‚å¸¸éƒ½æ‰§è¡Œ\n\n## åŸºäºæ³¨è§£çš„AOPå¼€å‘\n\n## å¿«é€Ÿå…¥é—¨\n\n1.  åˆ›å»ºç›®æ ‡æ¥å£å’Œç›®æ ‡ç±»ï¼ˆå†…éƒ¨æœ‰åˆ‡ç‚¹ï¼‰\n2.  åˆ›å»ºåˆ‡é¢ç±»ï¼ˆå†…éƒ¨æœ‰å¢å¼ºæ–¹æ³•ï¼‰\n3.  å°†ç›®æ ‡ç±»å’Œåˆ‡é¢ç±»çš„åˆ›å»ºæƒäº¤ç»™spring\n\n```\n\t   @Component(\"target\")\n       public class Target implements TargetInterface {\n           @Override\n           public void save() {\n               System.out.println(\"æ„å¤§åˆ©ç‚®å‡†å¤‡å°±ç»ªï¼\");\n           }\n       }\n\n```\n\n```\n\t   @Component(\"myAspect\")\n       public class MyAspect {\n\n           public void before(){\n               System.out.println(\"æˆ‘æ˜¯å‰ç½®æ–¹æ³•ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚\");\n           }\n       }\n\n```\n\n4.  åœ¨åˆ‡é¢ç±»ä¸­ä½¿ç”¨æ³¨è§£é…ç½®ç»‡å…¥å…³ç³»\n\n```\n\t   @Component(\"myAspect\")\n       @Aspect//æ ‡æ³¨å½“å‰MyAspectæ˜¯ä¸€ä¸ªåˆ‡é¢ç±»\n       public class MyAspect {\n\n           @Before(value = \"execution(* zyh.com.anno.*.*(..))\")\n           public void before(){\n               System.out.println(\"æˆ‘æ˜¯å‰ç½®æ–¹æ³•ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚\");\n           }\n       }\n\n```\n\n5.  åœ¨é…ç½®æ–‡ä»¶ä¸­å¼€å¯ç»„ä»¶æ‰«æå’ŒAOPçš„è‡ªåŠ¨ä»£ç†\n\n```\n   <?xml version=\"1.0\" encoding=\"UTF-8\"?>\n       <beans xmlns=\"http://www.springframework.org/schema/beans\"\n              xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n              xmlns:aop=\"http://www.springframework.org/schema/aop\"\n              xmlns:context=\"http://www.springframework.org/schema/context\"\n              xsi:schemaLocation=\"\n              http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n              http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd\n              http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd\n       \">\n           <!--ç»„ä»¶æ‰«æ-->\n           <context:component-scan base-package=\"zyh.com.anno\"/>\n           <!--aopè‡ªåŠ¨ä»£ç†-->\n           <aop:aspectj-autoproxy/>\n\n       </beans>\n\n```\n\n6.  æµ‹è¯•\n\n```\n @RunWith(SpringJUnit4ClassRunner.class)\n       @ContextConfiguration(\"classpath:applicationContext-anno.xml\")\n       public class AnnoTest {\n           @Autowired\n           @Qualifier(\"target\")\n           private TargetInterface target;\n\n           @Test\n           public void  t1(){\n               target.save();\n           }\n       }\n```\n## æœ€å\næ„Ÿè°¢ä½ çœ‹åˆ°è¿™é‡Œï¼Œçœ‹å®Œæœ‰ä»€ä¹ˆçš„ä¸æ‡‚çš„å¯ä»¥åœ¨è¯„è®ºåŒºé—®æˆ‘ï¼Œè§‰å¾—æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©çš„è¯è®°å¾—ç»™æˆ‘ç‚¹ä¸ªèµï¼Œæ¯å¤©éƒ½ä¼šåˆ†äº«javaç›¸å…³æŠ€æœ¯æ–‡ç« æˆ–è¡Œä¸šèµ„è®¯ï¼Œæ¬¢è¿å¤§å®¶å…³æ³¨å’Œè½¬å‘æ–‡ç« ï¼\n", "user_name": "ç¨‹åºå‘˜åŒ¡èƒ¤", "description": "å¤šå¹´ä¸€çº¿æ¶æ„å¸ˆç»éªŒï¼Œå’Œä½ åˆ†äº«å·¥ä½œä¸­çš„éš¾é¢˜è¶£äº‹", "got_view_count": 1553, "category_name": "åç«¯", "ctime": 1457483880}
{"tag_name": "åç«¯", "concern_user_count": 364361, "user_id": "641770521628487", "title": "å†·é¥­æ–°ç‚’ï¼šç†è§£Snowflakeç®—æ³•çš„å®ç°åŸç†", "mark_content": "## å‰æ\n\n`Snowflake`ï¼ˆé›ªèŠ±ï¼‰æ˜¯`Twitter`å¼€æºçš„é«˜æ€§èƒ½`ID`ç”Ÿæˆç®—æ³•ï¼ˆæœåŠ¡ï¼‰ã€‚\n\n![](https://throwable-blog-1256189093.cos.ap-guangzhou.myqcloud.com/202008/s-f-a-g-1.png)\n\nä¸Šå›¾æ˜¯`Snowflake`çš„`Github`ä»“åº“ï¼Œ`master`åˆ†æ”¯ä¸­çš„`REAEMDE`æ–‡ä»¶ä¸­æç¤ºï¼šåˆå§‹ç‰ˆæœ¬äº`2010`å¹´å‘å¸ƒï¼ŒåŸºäº`Apache Thrift`ï¼Œæ—©äº`Finagle`ï¼ˆè¿™é‡Œçš„`Finagle`æ˜¯`Twitter`ä¸Šç”¨äº`RPC`æœåŠ¡çš„æ„å»ºæ¨¡å—ï¼‰å‘å¸ƒï¼Œè€Œ`Twitter`å†…éƒ¨ä½¿ç”¨çš„`Snowflake`æ˜¯ä¸€ä¸ªå®Œå…¨é‡å†™çš„ç¨‹åºï¼Œåœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šä¾é `Twitter`ä¸Šçš„ç°æœ‰åŸºç¡€æ¶æ„æ¥è¿è¡Œã€‚\n\nè€Œ`2010`å¹´å‘å¸ƒçš„åˆç‰ˆ`Snowflake`æºç æ˜¯ä½¿ç”¨`Scala`è¯­è¨€ç¼–å†™çš„ï¼Œå½’æ¡£äº`scala_28`åˆ†æ”¯ã€‚æ¢è¨€ä¹‹ï¼Œ**å¤§å®¶ç›®å‰ä½¿ç”¨çš„`Snowflake`ç®—æ³•åŸç‰ˆæˆ–è€…æ”¹è‰¯ç‰ˆå·²ç»æ˜¯åå¹´å‰ï¼ˆå½“å‰æ˜¯`2020`å¹´ï¼‰çš„äº§ç‰©ï¼Œä¸å¾—ä¸è¯´è¿™ä¸ªç®—æ³•ç¡®å®æ¯”è¾ƒå‰å®³**ã€‚`scala_28`åˆ†æ”¯ä¸­æœ‰ä»‹ç»è¯¥ç®—æ³•çš„åŠ¨æœºå’Œè¦æ±‚ï¼Œè¿™é‡Œç®€å•æ‘˜å½•ä¸€ä¸‹ï¼š\n\n**åŠ¨æœºï¼š**\n\n- `Cassandra`ä¸­æ²¡æœ‰ç”Ÿæˆé¡ºåº`ID`çš„å·¥å…·ï¼Œ`Twitter`ç”±ä½¿ç”¨`MySQL`è½¬å‘ä½¿ç”¨`Cassandra`çš„æ—¶å€™éœ€è¦ä¸€ç§æ–°çš„æ–¹å¼æ¥ç”Ÿæˆ`ID`ï¼ˆå°è¯äº†æ¶æ„ä¸æ˜¯è®¾è®¡å‡ºæ¥ï¼Œè€Œæ˜¯åŸºäºä¸šåŠ¡åœºæ™¯è¿­ä»£å‡ºæ¥ï¼‰ã€‚\n\n**è¦æ±‚ï¼š**\n\n- é«˜æ€§èƒ½ï¼šæ¯ç§’æ¯ä¸ªè¿›ç¨‹è‡³å°‘äº§ç”Ÿ`10K`ä¸ª`ID`ï¼ŒåŠ ä¸Šç½‘ç»œå»¶è¿Ÿå“åº”é€Ÿåº¦è¦åœ¨`2ms`å†…ã€‚\n- é¡ºåºæ€§ï¼šå…·å¤‡æŒ‰ç…§æ—¶é—´çš„è‡ªå¢è¶‹åŠ¿ï¼Œå¯ä»¥ç›´æ¥æ’åºã€‚\n- ç´§å‡‘æ€§ï¼šä¿æŒç”Ÿæˆçš„`ID`çš„é•¿åº¦åœ¨`64 bit`æˆ–æ›´çŸ­ã€‚\n- é«˜å¯ç”¨ï¼š`ID`ç”Ÿæˆæ–¹æ¡ˆéœ€è¦å’Œå­˜å‚¨æœåŠ¡ä¸€æ ·é«˜å¯ç”¨ã€‚\n\nä¸‹é¢å°±`Snowflake`çš„æºç åˆ†æä¸€ä¸‹ä»–çš„å®ç°åŸç†ã€‚\n\n<!-- more -->\n\n## Snowflakeæ–¹æ¡ˆç®€è¿°\n\n`Snowflake`åœ¨åˆç‰ˆè®¾è®¡æ–¹æ¡ˆæ˜¯ï¼š\n\n- æ—¶é—´ï¼š`41 bit`é•¿åº¦ï¼Œä½¿ç”¨æ¯«ç§’çº§åˆ«ç²¾åº¦ï¼Œå¸¦æœ‰ä¸€ä¸ªè‡ªå®šä¹‰`epoch`ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨å¤§æ¦‚`69`å¹´ã€‚\n- å¯é…ç½®çš„æœºå™¨`ID`ï¼š`10 bit`é•¿åº¦ï¼Œå¯ä»¥æ»¡è¶³`1024`ä¸ªæœºå™¨ä½¿ç”¨ã€‚\n- åºåˆ—å·ï¼š`12 bit`é•¿åº¦ï¼Œå¯ä»¥åœ¨`4096`ä¸ªæ•°å­—ä¸­éšæœºå–å€¼ï¼Œä»è€Œé¿å…å•ä¸ªæœºå™¨åœ¨`1 ms`å†…ç”Ÿæˆé‡å¤çš„åºåˆ—å·ã€‚\n\n![](https://throwable-blog-1256189093.cos.ap-guangzhou.myqcloud.com/202008/s-f-a-g-2.png)\n\nä½†æ˜¯åœ¨å®é™…æºç å®ç°ä¸­ï¼Œ`Snowflake`æŠŠ`10 bit`çš„å¯é…ç½®çš„æœºå™¨`ID`æ‹†åˆ†ä¸º`5 bit`çš„`Worker ID`ï¼ˆè¿™ä¸ªå¯ä»¥ç†è§£ä¸ºåŸæ¥çš„æœºå™¨`ID`ï¼‰å’Œ`5 bit`çš„`Data Center ID`ï¼ˆæ•°æ®ä¸­å¿ƒ`ID`ï¼‰ï¼Œè¯¦æƒ…è§`IdWorker.scala`ï¼š\n\n![](https://throwable-blog-1256189093.cos.ap-guangzhou.myqcloud.com/202008/s-f-a-g-3.png)\n\nä¹Ÿå°±æ˜¯è¯´ï¼Œæ”¯æŒé…ç½®æœ€å¤š`32`ä¸ªæœºå™¨`ID`å’Œæœ€å¤š`32`ä¸ªæ•°æ®ä¸­å¿ƒ`ID`ï¼š\n\n![](https://throwable-blog-1256189093.cos.ap-guangzhou.myqcloud.com/202008/s-f-a-g-4.png)\n\nç”±äºç®—æ³•æ˜¯`Scala`è¯­è¨€ç¼–å†™ï¼Œæ˜¯ä¾èµ–äº`JVM`çš„è¯­è¨€ï¼Œè¿”å›çš„`ID`å€¼ä¸º`Long`ç±»å‹ï¼Œä¹Ÿå°±æ˜¯`64 bit`çš„æ•´æ•°ï¼ŒåŸæ¥çš„ç®—æ³•ç”Ÿæˆåºåˆ—ä¸­åªä½¿ç”¨äº†`63 bit`çš„é•¿åº¦ï¼Œè¦è¿”å›çš„æ˜¯æ— ç¬¦å·æ•°ï¼Œæ‰€ä»¥åœ¨é«˜ä½è¡¥ä¸€ä¸ª`0`ï¼ˆå ç”¨`1 bit`ï¼‰ï¼Œé‚£ä¹ˆåŠ èµ·æ¥æ•´ä¸ª`ID`çš„é•¿åº¦å°±æ˜¯`64 bit`ï¼š\n\n![](https://throwable-blog-1256189093.cos.ap-guangzhou.myqcloud.com/202008/s-f-a-g-5.png)\n\nå…¶ä¸­ï¼š\n\n- `41 bit`æ¯«ç§’çº§åˆ«æ—¶é—´æˆ³çš„å–å€¼èŒƒå›´æ˜¯ï¼š`[0, 2^41 - 1]` => `0 ~ 2199023255551`ï¼Œä¸€å…±`2199023255552`ä¸ªæ•°å­—ã€‚\n- `5 bit`æœºå™¨`ID`çš„å–å€¼èŒƒå›´æ˜¯ï¼š`[0, 2^5 - 1]` => `0 ~ 31`ï¼Œä¸€å…±`32`ä¸ªæ•°å­—ã€‚\n- `5 bit`æ•°æ®ä¸­å¿ƒ`ID`çš„å–å€¼èŒƒå›´æ˜¯ï¼š`[0, 2^5 - 1]` => `0 ~ 31`ï¼Œä¸€å…±`32`ä¸ªæ•°å­—ã€‚\n- `12 bit`åºåˆ—å·çš„å–å€¼èŒƒå›´æ˜¯ï¼š`[0, 2^12 - 1]` => `0 ~ 4095`ï¼Œä¸€å…±`4096`ä¸ªæ•°å­—ã€‚\n\né‚£ä¹ˆç†è®ºä¸Šå¯ä»¥ç”Ÿæˆ`2199023255552 * 32 * 32 * 4096`ä¸ªå®Œå…¨ä¸åŒçš„`ID`å€¼ã€‚\n\n`Snowflake`ç®—æ³•è¿˜æœ‰ä¸€ä¸ªæ˜æ˜¾çš„ç‰¹å¾ï¼š**ä¾èµ–äºç³»ç»Ÿæ—¶é’Ÿ**ã€‚`41 bit`é•¿åº¦æ¯«ç§’çº§åˆ«çš„æ—¶é—´æ¥æºäºç³»ç»Ÿæ—¶é—´æˆ³ï¼Œæ‰€ä»¥å¿…é¡»ä¿è¯ç³»ç»Ÿæ—¶é—´æ˜¯å‘å‰é€’è¿›ï¼Œä¸èƒ½å‘ç”Ÿ**æ—¶é’Ÿå›æ‹¨**ï¼ˆé€šè¯´æ¥è¯´å°±æ˜¯ä¸èƒ½åœ¨åŒä¸€ä¸ªæ—¶åˆ»äº§ç”Ÿå¤šä¸ªç›¸åŒçš„æ—¶é—´æˆ³æˆ–è€…äº§ç”Ÿäº†è¿‡å»çš„æ—¶é—´æˆ³ï¼‰ã€‚ä¸€æ—¦å‘ç”Ÿæ—¶é’Ÿå›æ‹¨ï¼Œ`Snowflake`ä¼šæ‹’ç»ç”Ÿæˆä¸‹ä¸€ä¸ª`ID`ã€‚\n\n## ä½è¿ç®—çŸ¥è¯†è¡¥å……\n\n`Snowflake`ç®—æ³•ä¸­ä½¿ç”¨äº†å¤§é‡çš„ä½è¿ç®—ã€‚ç”±äºæ•´æ•°çš„è¡¥ç æ‰æ˜¯åœ¨è®¡ç®—æœºä¸­çš„å­˜å‚¨å½¢å¼ï¼Œ`Java`æˆ–è€…`Scala`ä¸­çš„æ•´å‹éƒ½ä½¿ç”¨è¡¥ç è¡¨ç¤ºï¼Œè¿™é‡Œç¨å¾®æä¸€ä¸‹åŸç å’Œè¡¥ç çš„çŸ¥è¯†ã€‚\n\n- åŸç ç”¨äºé˜…è¯»ï¼Œè¡¥ç ç”¨äºè®¡ç®—ã€‚\n- æ­£æ•°çš„è¡¥ç ä¸å…¶åŸç ç›¸åŒã€‚\n- è´Ÿæ•°çš„è¡¥ç æ˜¯é™¤æœ€é«˜ä½å…¶ä»–æ‰€æœ‰ä½å–åï¼Œç„¶ååŠ `1`ï¼ˆåç åŠ `1`ï¼‰ï¼Œè€Œè´Ÿæ•°çš„è¡¥ç è¿˜åŸä¸ºåŸç ä¹Ÿæ˜¯ä½¿ç”¨è¿™ä¸ªæ–¹å¼ã€‚\n- `+0`çš„åŸç æ˜¯`0000 0000`ï¼Œè€Œ`-0`çš„åŸç æ˜¯`1000 0000`ï¼Œè¡¥ç åªæœ‰ä¸€ä¸ª`0`å€¼ï¼Œç”¨`0000 0000`è¡¨ç¤ºï¼Œè¿™ä¸€ç‚¹å¾ˆé‡è¦ï¼Œè¡¥ç çš„`0`æ²¡æœ‰äºŒä¹‰æ€§ã€‚\n\nç®€å•æ¥çœ‹å°±æ˜¯è¿™æ ·ï¼š\n\n```shell\n* [+ 11] åŸç  = [0000 1011] è¡¥ç  = [0000 1011]\n* [- 11] åŸç  = [1000 1011] è¡¥ç  = [1111 0101]\n\n* [- 11]çš„è¡¥ç è®¡ç®—è¿‡ç¨‹ï¼š \n        åŸç                   1000 1011\n        é™¤äº†æœ€é«˜ä½å…¶ä»–ä½å–å   1111 0100\n        åŠ 1                   1111 0101  ï¼ˆè¡¥ç ï¼‰ \n```\n\nä½¿ç”¨åŸç ã€åç åœ¨è®¡ç®—çš„æ—¶å€™å¾—åˆ°çš„ä¸ä¸€å®šæ˜¯å‡†ç¡®çš„å€¼ï¼Œè€Œä½¿ç”¨è¡¥ç çš„æ—¶å€™è®¡ç®—ç»“æœæ‰æ˜¯æ­£ç¡®çš„ï¼Œè®°ä½è¿™ä¸ªç»“è®ºå³å¯ï¼Œè¿™é‡Œä¸åœ¨ä¸¾ä¾‹ã€‚ç”±äº`Snowflake`çš„`ID`ç”Ÿæˆæ–¹æ¡ˆä¸­ï¼Œé™¤äº†æœ€é«˜ä½ï¼Œå…¶ä»–å››ä¸ªéƒ¨åˆ†éƒ½æ˜¯æ— ç¬¦å·æ•´æ•°ï¼Œæ‰€ä»¥å››ä¸ªéƒ¨åˆ†çš„æ•´æ•°**ä½¿ç”¨è¡¥ç è¿›è¡Œä½è¿ç®—çš„æ•ˆç‡ä¼šæ¯”è¾ƒé«˜ï¼Œä¹Ÿåªæœ‰è¿™æ ·æ‰èƒ½æ»¡è¶³Snowflakeé«˜æ€§èƒ½è®¾è®¡çš„åˆè¡·**ã€‚`Snowflake`ç®—æ³•ä¸­ä½¿ç”¨äº†å‡ ç§ä½è¿ç®—ï¼šå¼‚æˆ–ï¼ˆ`^`ï¼‰ã€æŒ‰ä½ä¸ï¼ˆ`&`ï¼‰ã€æŒ‰ä½æˆ–ï¼ˆ`|`ï¼‰å’Œå¸¦ç¬¦å·å·¦ç§»ï¼ˆ`<<`ï¼‰ã€‚\n\n### å¼‚æˆ–\n\nå¼‚æˆ–çš„è¿ç®—è§„åˆ™æ˜¯ï¼š`0^0=0` `0^1=1` `1^0=1` `1^1=0`ï¼Œä¹Ÿå°±æ˜¯ä½ä¸åŒåˆ™ç»“æœä¸º1ï¼Œä½ç›¸åŒåˆ™ç»“æœä¸º0ã€‚ä¸»è¦ä½œç”¨æ˜¯ï¼š\n\n- ç‰¹å®šä½ç¿»è½¬ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªæ•°å’Œ`N`ä¸ªä½éƒ½ä¸º`1`çš„æ•°è¿›è¡Œå¼‚æˆ–æ“ä½œï¼Œè¿™å¯¹åº”çš„`N`ä¸ªä½éƒ½ä¼šç¿»è½¬ï¼Œä¾‹å¦‚`0100 & 1111`ï¼Œç»“æœå°±æ˜¯`1011`ã€‚\n- ä¸`0`é¡¹å¼‚æˆ–ï¼Œåˆ™ç»“æœå’ŒåŸæ¥çš„å€¼ä¸€è‡´ã€‚\n- ä¸¤æ•°çš„å€¼äº¤äº’ï¼š`a=a^b` `b=b^a` `a=a^b`ï¼Œè¿™ä¸‰ä¸ªæ“ä½œå®Œæˆä¹‹åï¼Œ`a`å’Œ`b`çš„å€¼å®Œæˆäº¤æ¢ã€‚ \n\nè¿™é‡Œæ¨æ¼”ä¸€ä¸‹æœ€åä¸€æ¡ï¼š\n\n```shell\n* [+ 11] åŸç  = [0000 1011] è¡¥ç  = [0000 1011] a\n* [- 11] åŸç  = [1000 1011] è¡¥ç  = [1111 0101] b\n\na=a^b          0000 1011\n               1111 0101\n               ---------^\n               1111 1110\nb=b^a          1111 0101\n               ---------^\n               0000 1011  ï¼ˆåè¿›åˆ¶æ•°ï¼š11ï¼‰ b\na=a^b          1111 1110\n               ---------^\n               1111 0101  ï¼ˆåè¿›åˆ¶æ•°ï¼š-11ï¼‰ a \n```\n\n### æŒ‰ä½ä¸\n\næŒ‰ä½ä¸çš„è¿ç®—è§„åˆ™æ˜¯ï¼š`0&0=0` `0&1=0` `1&0=0` `1&1=1`ï¼Œåªæœ‰å¯¹åº”çš„ä½éƒ½ä¸º1çš„æ—¶å€™è®¡ç®—ç»“æœæ‰æ˜¯1ï¼Œå…¶ä»–æƒ…å†µçš„è®¡ç®—ç»“æœéƒ½æ˜¯0ã€‚ä¸»è¦ä½œç”¨æ˜¯ï¼š\n\n- æ¸…é›¶ï¼Œå¦‚æœæƒ³æŠŠä¸€ä¸ªæ•°æ¸…é›¶ï¼Œé‚£ä¹ˆå’Œæ‰€æœ‰ä½ä¸º`0`çš„æ•°è¿›è¡ŒæŒ‰ä½ä¸å³å¯ã€‚\n- å–ä¸€ä¸ªæ•°ä¸­çš„æŒ‡å®šä½ï¼Œä¾‹å¦‚è¦å–`X`ä¸­çš„ä½`4`ä½ï¼Œåªéœ€è¦å’Œ`zzzz...1111`è¿›è¡ŒæŒ‰ä½ä¸å³å¯ï¼Œä¾‹å¦‚å–`1111 0110`çš„ä½`4`ä½ï¼Œåˆ™`11110110 & 00001111`å³å¯å¾—åˆ°`00000110`ã€‚\n\n### æŒ‰ä½æˆ–\n\næŒ‰ä½ä¸çš„è¿ç®—è§„åˆ™æ˜¯ï¼š`0|0=0` `0|1=1` `1|0=1` `1|1=1`ï¼Œåªè¦æœ‰å…¶ä¸­ä¸€ä¸ªä½å­˜åœ¨1åˆ™è®¡ç®—ç»“æœæ˜¯1ï¼Œåªæœ‰ä¸¤ä¸ªä½åŒæ—¶ä¸º0çš„æƒ…å†µä¸‹è®¡ç®—ç»“æœæ‰æ˜¯0ã€‚ä¸»è¦ä½œç”¨æ˜¯ï¼š\n\n- å¯¹ä¸€ä¸ªæ•°çš„éƒ¨åˆ†ä½èµ‹å€¼ä¸º`1`ï¼Œåªéœ€è¦å’Œå¯¹åº”ä½å…¨ä¸º`0`çš„æ•°åšæŒ‰ä½æˆ–æ“ä½œå°±è¡Œï¼Œä¾‹å¦‚`1011 0000`å¦‚æœä½`4`ä½æƒ³å…¨éƒ¨èµ‹å€¼ä¸º`1`ï¼Œé‚£ä¹ˆ`10110000 | 00001111`å³å¯å¾—åˆ°`1011 1111`ã€‚\n\n### å¸¦ç¬¦å·å·¦ç§»\n\nå¸¦ç¬¦å·å·¦ç§»çš„è¿ç®—ç¬¦æ˜¯`<<`ï¼Œä¸€èˆ¬æ ¼å¼æ˜¯ï¼š`M << n`ã€‚ä½œç”¨å¦‚ä¸‹ï¼š\n\n- `M`çš„äºŒè¿›åˆ¶æ•°ï¼ˆè¡¥ç ï¼‰å‘å·¦ç§»åŠ¨`n`ä½ã€‚\n- å·¦è¾¹ï¼ˆé«˜ä½ï¼‰ç§»å‡ºéƒ¨åˆ†ç›´æ¥èˆå¼ƒï¼Œå³è¾¹ï¼ˆä½ä½ï¼‰ç§»å…¥éƒ¨åˆ†å…¨éƒ¨è¡¥`0`ã€‚\n- ç§»ä½ç»“æœï¼šç›¸å½“äº`M`çš„å€¼ä¹˜ä»¥`2`çš„`n`æ¬¡æ–¹ï¼Œå¹¶ä¸”0ã€æ­£ã€è´Ÿæ•°é€šç”¨ã€‚\n- ç§»åŠ¨çš„ä½æ•°è¶…è¿‡äº†è¯¥ç±»å‹çš„æœ€å¤§ä½æ•°ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨ä¼šå¯¹ç§»åŠ¨çš„ä½æ•°å–æ¨¡ï¼Œä¾‹å¦‚`int`ç§»ä½`33`ä½ï¼Œå®é™…ä¸Šåªç§»åŠ¨äº†`33 % 2 = 1`ä½ã€‚\n\næ¨æ¼”è¿‡ç¨‹å¦‚ä¸‹ï¼ˆå‡è®¾`n = 2`ï¼‰ï¼š\n\n```shell\n* [+ 11] åŸç  = [0000 1011] è¡¥ç  = [0000 1011]\n* [- 11] åŸç  = [1000 1011] è¡¥ç  = [1111 0101]\n\n* [+ 11 << 2]çš„è®¡ç®—è¿‡ç¨‹\n      è¡¥ç           0000 1011\n      å·¦ç§»2ä½       0000 1011  \n      èˆé«˜è¡¥ä½      0010 1100\n      åè¿›åˆ¶æ•°    2^2 + 2^3 + 2^5 = 44\n\n* [- 11 << 2]çš„è®¡ç®—è¿‡ç¨‹\n      è¡¥ç           1111 0101\n      å·¦ç§»2ä½       1111 0101  \n      èˆé«˜è¡¥ä½      1101 0100 \n      åŸç           1010 1100 ï¼ˆè¡¥ç é™¤æœ€é«˜ä½å…¶ä»–æ‰€æœ‰ä½å–åå†åŠ 1ï¼‰\n      åè¿›åˆ¶æ•°    - (2^2 + 2^3 + 2^5) = -44\n```\n\nå¯ä»¥å†™ä¸ª`main`æ–¹æ³•éªŒè¯ä¸€ä¸‹ï¼š\n\n```java\npublic static void main(String[] args) {\n      System.out.println(-11 << 2); // -44\n      System.out.println(11 << 2);  // 44\n}\n```\n\n### ç»„åˆæŠ€å·§\n\nåˆ©ç”¨ä¸Šé¢æåˆ°çš„ä¸‰ä¸ªä½è¿ç®—ç¬¦ï¼Œç›¸äº’ç»„åˆå¯ä»¥å®ç°ä¸€äº›é«˜æ•ˆçš„è®¡ç®—æ–¹æ¡ˆã€‚\n\n**è®¡ç®—nä¸ªbitèƒ½è¡¨ç¤ºçš„æœ€å¤§æ•°å€¼ï¼š**\n\n`Snowflake`ç®—æ³•ä¸­æœ‰è¿™æ ·çš„ä»£ç ï¼š\n\n```java\n// æœºå™¨IDçš„ä½é•¿åº¦\nprivate val workerIdBits = 5L;\n// æœ€å¤§æœºå™¨ID -> 31\nprivate val maxWorkerId = -1L ^ (-1L << workerIdBits);\n```\n\nè¿™é‡Œçš„ç®—å­æ˜¯`-1L ^ (-1L << 5L)`ï¼Œæ•´ç†è¿ç®—ç¬¦çš„é¡ºåºï¼Œå†ä½¿ç”¨`64 bit`çš„äºŒè¿›åˆ¶æ•°æ¨æ¼”è®¡ç®—è¿‡ç¨‹å¦‚ä¸‹ï¼š\n\n```shell\n* [-1] çš„è¡¥ç          11111111 11111111 11111111 11111111 11111111 11111111 11111111 11111111\n  å·¦ç§»5ä½             11111111 11111111 11111111 11111111 11111111 11111111 11111111 11100000\n  [-1] çš„è¡¥ç          11111111 11111111 11111111 11111111 11111111 11111111 11111111 11111111\n  å¼‚æˆ–                ----------------------------------------------------------------------- ^ \n  ç»“æœçš„è¡¥ç           00000000 00000000 00000000 00000000 00000000 00000000 00000000 00011111  ï¼ˆåè¿›åˆ¶æ•° 2^0 + 2^1 + 2^2 + 2^3 + 2^4 = 31ï¼‰\n```\n\nè¿™æ ·å°±èƒ½è®¡ç®—å‡º`5 bit`èƒ½è¡¨ç¤ºçš„æœ€å¤§æ•°å€¼`n`ï¼Œ`n`ä¸ºæ•´æ•°å¹¶ä¸”`0 <= n <= 31`ï¼Œå³`0ã€1ã€2ã€3...31`ã€‚`Worker ID`å’Œ`Data Center ID`éƒ¨åˆ†çš„æœ€å¤§å€¼å°±æ˜¯ä½¿ç”¨è¿™ç§ç»„åˆè¿ç®—å¾—å‡ºçš„ã€‚\n\n**ç”¨å›ºå®šä½çš„æœ€å¤§å€¼ä½œä¸ºMaské¿å…æº¢å‡ºï¼š**\n\n`Snowflake`ç®—æ³•ä¸­æœ‰è¿™æ ·çš„ä»£ç ï¼š\n\n```java\nvar sequence = 0L\n......\nprivate val sequenceBits = 12L\n// è¿™é‡Œå¾—åˆ°çš„æ˜¯sequenceçš„æœ€å¤§å€¼4095\nprivate val sequenceMask = -1L ^ (-1L << sequenceBits)\n......\nsequence = (sequence + 1) & sequenceMask\n```\n\næœ€åè¿™ä¸ªç®—å­å…¶å®å°±æ˜¯`sequence = (sequence + 1) & 4095`ï¼Œå‡è®¾`sequence`å½“å‰å€¼ä¸º`4095`ï¼Œæ¨æ¼”ä¸€ä¸‹è®¡ç®—è¿‡ç¨‹ï¼š\n\n```shell\n* [4095] çš„è¡¥ç                  00000000 00000000 00000000 00000000 00000000 00000000 00000111 11111111\n  [sequence + 1] çš„è¡¥ç          00000000 00000000 00000000 00000000 00000000 00000000 00001000 00000000\n  æŒ‰ä½ä¸                        ----------------------------------------------------------------------- &\n  è®¡ç®—ç»“æœ                      00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000  ï¼ˆåè¿›åˆ¶æ•°ï¼š0ï¼‰\n```\n\nå¯ä»¥ç¼–å†™ä¸€ä¸ª`main`æ–¹æ³•éªŒè¯ä¸€ä¸‹ï¼š\n\n```java\npublic static void main(String[] args) {\n    int mask = 4095;\n    System.out.println(0 & mask); // 0\n    System.out.println(1 & mask); // 1\n    System.out.println(2 & mask); // 2\n    System.out.println(4095 & mask); // 4095\n    System.out.println(4096 & mask); // 0\n    System.out.println(4097 & mask); // 1\n}\n```\n\nä¹Ÿå°±æ˜¯`x = (x + 1) & (-1L ^ (-1L << N))`èƒ½ä¿è¯æœ€ç»ˆå¾—åˆ°çš„`x`å€¼ä¸ä¼šè¶…è¿‡`N`ï¼Œè¿™æ˜¯åˆ©ç”¨äº†æŒ‰ä½ä¸ä¸­çš„\"å–æŒ‡å®šä½\"çš„ç‰¹æ€§ã€‚\n\n## Snowflakeç®—æ³•å®ç°æºç åˆ†æ\n\n`Snowflake`è™½ç„¶ç”¨`Scala`è¯­è¨€ç¼–å†™ï¼Œè¯­æ³•å…¶å®å’Œ`Java`å·®ä¸å¤šï¼Œå½“æˆ`Java`ä»£ç è¿™æ ·é˜…è¯»å°±è¡Œï¼Œä¸‹é¢é˜…è¯»ä»£ç çš„æ—¶å€™ä¼šè·³è¿‡ä¸€äº›æ—¥å¿—è®°å½•å’Œåº¦é‡ç»Ÿè®¡çš„é€»è¾‘ã€‚å…ˆçœ‹`IdWorker.scala`çš„å±æ€§å€¼ï¼š\n\n```java\n// å®šä¹‰åŸºå‡†çºªå…ƒå€¼ï¼Œè¿™ä¸ªå€¼æ˜¯åŒ—äº¬æ—¶é—´2010-11-04 09:42:54ï¼Œä¼°è®¡å°±æ˜¯2010å¹´åˆç‰ˆæäº¤ä»£ç æ—¶å€™å®šä¹‰çš„ä¸€ä¸ªæ—¶é—´æˆ³\nval twepoch = 1288834974657L\n\n// åˆå§‹åŒ–åºåˆ—å·ä¸º0\nvar sequence = 0L //TODO after 2.8 make this a constructor param with a default of 0\n\n// æœºå™¨IDçš„æœ€å¤§ä½é•¿åº¦ä¸º5\nprivate val workerIdBits = 5L\n\n// æ•°æ®ä¸­å¿ƒIDçš„æœ€å¤§ä½é•¿åº¦ä¸º5\nprivate val datacenterIdBits = 5L\n\n// æœ€å¤§çš„æœºå™¨IDå€¼ï¼Œåè¿›åˆ¶æ•°ä¸ºä¸º31\nprivate val maxWorkerId = -1L ^ (-1L << workerIdBits)\n\n// æœ€å¤§çš„æ•°æ®ä¸­å¿ƒIDå€¼ï¼Œåè¿›åˆ¶æ•°ä¸ºä¸º31\nprivate val maxDatacenterId = -1L ^ (-1L << datacenterIdBits)\n\n// åºåˆ—å·çš„æœ€å¤§ä½é•¿åº¦ä¸º12\nprivate val sequenceBits = 12L\n\n// æœºå™¨IDéœ€è¦å·¦ç§»çš„ä½æ•°12\nprivate val workerIdShift = sequenceBits\n\n// æ•°æ®ä¸­å¿ƒIDéœ€è¦å·¦ç§»çš„ä½æ•° = 12 + 5\nprivate val datacenterIdShift = sequenceBits + workerIdBits\n\n// æ—¶é—´æˆ³éœ€è¦å·¦ç§»çš„ä½æ•° = 12 + 5 + 5\nprivate val timestampLeftShift = sequenceBits + workerIdBits + datacenterIdBits\n\n// åºåˆ—å·çš„æ©ç ï¼Œåè¿›åˆ¶æ•°ä¸º4095\nprivate val sequenceMask = -1L ^ (-1L << sequenceBits)\n\n// åˆå§‹åŒ–ä¸Šä¸€ä¸ªæ—¶é—´æˆ³å¿«ç…§å€¼ä¸º-1\nprivate var lastTimestamp = -1L\n\n// ä¸‹é¢çš„ä»£ç å—ä¸ºå‚æ•°æ ¡éªŒå’Œåˆå§‹åŒ–æ—¥å¿—æ‰“å°ï¼Œè¿™é‡Œä¸åšåˆ†æ\nif (workerId > maxWorkerId || workerId < 0) {\nexceptionCounter.incr(1)\nthrow new IllegalArgumentException(\"worker Id can't be greater than %d or less than 0\".format(maxWorkerId))\n}\n\nif (datacenterId > maxDatacenterId || datacenterId < 0) {\nexceptionCounter.incr(1)\nthrow new IllegalArgumentException(\"datacenter Id can't be greater than %d or less than 0\".format(maxDatacenterId))\n}\n\nlog.info(\"worker starting. timestamp left shift %d, datacenter id bits %d, worker id bits %d, sequence bits %d, workerid %d\",\ntimestampLeftShift, datacenterIdBits, workerIdBits, sequenceBits, workerId)\n```\n\n![](https://throwable-blog-1256189093.cos.ap-guangzhou.myqcloud.com/202008/s-f-a-g-8.png)\n\næ¥ç€çœ‹ç®—æ³•çš„æ ¸å¿ƒä»£ç é€»è¾‘ï¼š\n\n```java\n// åŒæ­¥æ–¹æ³•ï¼Œå…¶å®å°±æ˜¯protected synchronized long nextId(){ ...... }\nprotected[snowflake] def nextId(): Long = synchronized {\n    // è·å–ç³»ç»Ÿæ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰\n    var timestamp = timeGen()\n    // é«˜å¹¶å‘åœºæ™¯ï¼ŒåŒä¸€æ¯«ç§’å†…ç”Ÿæˆå¤šä¸ªID\n    if (lastTimestamp == timestamp) {\n        // ç¡®ä¿sequence + 1ä¹‹åä¸ä¼šæº¢å‡ºï¼Œæœ€å¤§å€¼ä¸º4095ï¼Œå…¶å®ä¹Ÿå°±æ˜¯ä¿è¯1æ¯«ç§’å†…æœ€å¤šç”Ÿæˆ4096ä¸ªIDå€¼\n        sequence = (sequence + 1) & sequenceMask\n        // å¦‚æœsequenceæº¢å‡ºåˆ™å˜ä¸º0ï¼Œè¯´æ˜1æ¯«ç§’å†…å¹¶å‘ç”Ÿæˆçš„IDæ•°é‡è¶…è¿‡äº†4096ä¸ªï¼Œè¿™ä¸ªæ—¶å€™åŒ1æ¯«ç§’çš„ç¬¬4097ä¸ªç”Ÿæˆçš„IDå¿…é¡»ç­‰å¾…ä¸‹ä¸€æ¯«ç§’\n        if (sequence == 0) {\n            // æ­»å¾ªç¯ç­‰å¾…ä¸‹ä¸€ä¸ªæ¯«ç§’å€¼ï¼Œç›´åˆ°æ¯”lastTimestampå¤§\n            timestamp = tilNextMillis(lastTimestamp)\n        }\n    } else {\n        // ä½å¹¶å‘åœºæ™¯ï¼Œä¸åŒæ¯«ç§’ä¸­ç”ŸæˆID\n        // ä¸åŒæ¯«ç§’çš„æƒ…å†µä¸‹ï¼Œç”±äºå¤–å±‚æ–¹æ³•ä¿è¯äº†timestampå¤§äºæˆ–è€…å°äºlastTimestampï¼Œè€Œå°äºçš„æƒ…å†µæ˜¯å‘ç”Ÿäº†æ—¶é’Ÿå›æ‹¨ï¼Œä¸‹é¢ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œæ‰€ä»¥ä¸ç”¨è€ƒè™‘\n        // ä¹Ÿå°±æ˜¯åªéœ€è¦è€ƒè™‘ä¸€ç§æƒ…å†µï¼štimestamp > lastTimestampï¼Œä¹Ÿå°±æ˜¯å½“å‰ç”Ÿæˆçš„IDæ‰€åœ¨çš„æ¯«ç§’æ•°æ¯”ä¸Šä¸€ä¸ªIDå¤§\n        // æ‰€ä»¥å¦‚æœæ—¶é—´æˆ³éƒ¨åˆ†å¢å¤§ï¼Œå¯ä»¥ç¡®å®šæ•´æ•°å€¼ä¸€å®šå˜å¤§ï¼Œæ‰€ä»¥åºåˆ—å·å…¶å®å¯ä»¥ä¸ç”¨è®¡ç®—ï¼Œè¿™é‡Œç›´æ¥èµ‹å€¼ä¸º0\n        sequence = 0\n    }\n    // è·å–åˆ°çš„æ—¶é—´æˆ³æ¯”ä¸Šä¸€ä¸ªä¿å­˜çš„æ—¶é—´æˆ³å°ï¼Œè¯´æ˜æ—¶é’Ÿå›æ‹¨ï¼Œè¿™ç§æƒ…å†µä¸‹ç›´æ¥æŠ›å‡ºå¼‚å¸¸ï¼Œæ‹’ç»ç”ŸæˆID\n    // ä¸ªäººè®¤ä¸ºï¼Œè¿™ä¸ªæ–¹æ³•åº”è¯¥å¯ä»¥æå‰åˆ°var timestamp = timeGen()è¿™æ®µä»£ç ä¹‹å\n    if (timestamp < lastTimestamp) {\n      exceptionCounter.incr(1)\n      log.error(\"clock is moving backwards.  Rejecting requests until %d.\", lastTimestamp);\n      throw new InvalidSystemClock(\"Clock moved backwards.  Refusing to generate id for %d milliseconds\".format(lastTimestamp - timestamp));\n    }\n    // lastTimestampä¿å­˜å½“å‰æ—¶é—´æˆ³ï¼Œä½œä¸ºæ–¹æ³•ä¸‹æ¬¡è¢«è°ƒç”¨çš„ä¸Šä¸€ä¸ªæ—¶é—´æˆ³çš„å¿«ç…§\n    lastTimestamp = timestamp\n    // åº¦é‡ç»Ÿè®¡ï¼Œç”Ÿæˆçš„IDè®¡æ•°å™¨åŠ 1\n    genCounter.incr()\n    // X = (ç³»ç»Ÿæ—¶é—´æˆ³ - è‡ªå®šä¹‰çš„çºªå…ƒå€¼) ç„¶åå·¦ç§»22ä½\n    // Y = (æ•°æ®ä¸­å¿ƒIDå·¦ç§»17ä½)\n    // Z = (æœºå™¨IDå·¦ç§»12ä½)\n    // æœ€åID = X | Y | Z | è®¡ç®—å‡ºæ¥çš„åºåˆ—å·sequence\n    ((timestamp - twepoch) << timestampLeftShift) |\n      (datacenterId << datacenterIdShift) |\n      (workerId << workerIdShift) | \n      sequence\n}\n\n// è¾…åŠ©æ–¹æ³•ï¼šè·å–ç³»ç»Ÿå½“å‰çš„æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰\nprotected def timeGen(): Long = System.currentTimeMillis()\n\n// è¾…åŠ©æ–¹æ³•ï¼šè·å–ç³»ç»Ÿå½“å‰çš„æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰ï¼Œç”¨æ­»å¾ªç¯ä¿è¯æ¯”ä¼ å…¥çš„lastTimestampå¤§ï¼Œä¹Ÿå°±æ˜¯è·å–ä¸‹ä¸€ä¸ªæ¯”lastTimestampå¤§çš„æ¯«ç§’æ•°\nprotected def tilNextMillis(lastTimestamp: Long): Long = {\n    var timestamp = timeGen()\n    while (timestamp <= lastTimestamp) {\n      timestamp = timeGen()\n    }\n    timestamp\n}\n```\n\næœ€åä¸€æ®µé€»è¾‘çš„ä½æ“ä½œæ¯”è¾ƒå¤šï¼Œä½†æ˜¯å¦‚æœç†Ÿç»ƒä½¿ç”¨ä½è¿ç®—æ“ä½œç¬¦ï¼Œå…¶å®é€»è¾‘å¹¶ä¸å¤æ‚ï¼Œè¿™é‡Œå¯ä»¥ç”»ä¸ªå›¾æ¨æ¼”ä¸€ä¸‹ï¼š\n\n![](https://throwable-blog-1256189093.cos.ap-guangzhou.myqcloud.com/202008/s-f-a-g-9.png)\n\nå››ä¸ªéƒ¨åˆ†çš„æ•´æ•°å®Œæˆå·¦ç§»ä¹‹åï¼Œç”±äºç©ºç¼ºçš„ä½ä½éƒ½ä¼šè¡¥å……äº†`0`ï¼ŒåŸºäºæŒ‰ä½æˆ–çš„ç‰¹æ€§ï¼Œæ‰€æœ‰ä½ä½åªè¦å­˜åœ¨`1`ï¼Œé‚£ä¹ˆå¯¹åº”çš„ä½å°±ä¼šå¡«å……ä¸º`1`ï¼Œç”±äºå››ä¸ªéƒ¨åˆ†çš„ä½ä¸ä¼šè¶Šç•Œåˆ†é…ï¼Œæ‰€ä»¥è¿™é‡Œçš„æœ¬è´¨å°±æ˜¯ï¼š**å››ä¸ªéƒ¨åˆ†å·¦ç§»å®Œæ¯•åæœ€ç»ˆçš„æ•°å­—è¿›è¡ŒåŠ æ³•è®¡ç®—**ã€‚\n\n## Snowflakeç®—æ³•æ”¹è‰¯\n\n`Snowflake`ç®—æ³•æœ‰å‡ ä¸ªæ¯”è¾ƒå¤§çš„é—®é¢˜ï¼š\n\n- ä½å¹¶å‘åœºæ™¯ä¼šäº§ç”Ÿè¿ç»­å¶æ•°ï¼ŒåŸå› æ˜¯ä½å¹¶å‘åœºæ™¯ç³»ç»Ÿæ—¶é’Ÿæ€»æ˜¯èµ°åˆ°ä¸‹ä¸€ä¸ªæ¯«ç§’å€¼ï¼Œå¯¼è‡´åºåˆ—å·é‡ç½®ä¸º`0`ã€‚\n- ä¾èµ–ç³»ç»Ÿæ—¶é’Ÿï¼Œæ—¶é’Ÿå›æ‹¨ä¼šæ‹’ç»ç”Ÿæˆæ–°çš„`ID`ï¼ˆç›´æ¥æŠ›å‡ºå¼‚å¸¸ï¼‰ã€‚\n- `Woker ID`å’Œ`Data Center ID`çš„ç®¡ç†æ¯”è¾ƒéº»çƒ¦ï¼Œç‰¹åˆ«æ˜¯åŒä¸€ä¸ªæœåŠ¡çš„ä¸åŒé›†ç¾¤èŠ‚ç‚¹éœ€è¦ä¿è¯æ¯ä¸ªèŠ‚ç‚¹çš„`Woker ID`å’Œ`Data Center ID`ç»„åˆå”¯ä¸€ã€‚\n\nè¿™ä¸‰ä¸ªé—®é¢˜ç¾å›¢å¼€æºçš„`Leaf`æä¾›äº†è§£å†³æ€è·¯ï¼Œä¸‹å›¾æˆªå–è‡ª`com.sankuai.inf.leaf.snowflake.SnowflakeIDGenImpl`ï¼š\n\n![](https://throwable-blog-1256189093.cos.ap-guangzhou.myqcloud.com/202008/s-f-a-g-7.png)\n\nå¯¹åº”çš„è§£å†³æ€è·¯æ˜¯ï¼ˆä¸è¿›è¡Œæ·±å…¥çš„æºç åˆ†æï¼Œæœ‰å…´è¶£å¯ä»¥é˜…è¯»ä»¥ä¸‹`Leaf`çš„æºç ï¼‰ï¼š\n\n- åºåˆ—å·ç”Ÿæˆæ·»åŠ éšæœºæºï¼Œä¼šç¨å¾®å‡å°‘åŒä¸€ä¸ªæ¯«ç§’å†…èƒ½äº§ç”Ÿçš„æœ€å¤§`ID`æ•°é‡ã€‚\n- æ—¶é’Ÿå›æ‹¨åˆ™è¿›è¡Œä¸€å®šæœŸé™çš„ç­‰å¾…ã€‚\n- ä½¿ç”¨`Zookeeper`ç¼“å­˜å’Œç®¡ç†`Woker ID`å’Œ`Data Center ID`ã€‚\n\n`Woker ID`å’Œ`Data Center ID`çš„é…ç½®æ˜¯æå…¶é‡è¦çš„ï¼Œå¯¹äºåŒä¸€ä¸ªæœåŠ¡ï¼ˆä¾‹å¦‚æ”¯ä»˜æœåŠ¡ï¼‰é›†ç¾¤çš„å¤šä¸ªèŠ‚ç‚¹ï¼Œå¿…é¡»é…ç½®ä¸åŒçš„æœºå™¨`ID`å’Œæ•°æ®ä¸­å¿ƒ`ID`æˆ–è€…åŒæ ·çš„æ•°æ®ä¸­å¿ƒ`ID`å’Œä¸åŒçš„æœºå™¨`ID`ï¼ˆ**ç®€å•è¯´å°±æ˜¯ç¡®ä¿`Woker ID`å’Œ`Data Center ID`çš„ç»„åˆå…¨å±€å”¯ä¸€**ï¼‰ï¼Œå¦åˆ™åœ¨é«˜å¹¶å‘çš„åœºæ™¯ä¸‹ï¼Œåœ¨ç³»ç»Ÿæ—¶é’Ÿä¸€è‡´çš„æƒ…å†µä¸‹ï¼Œå¾ˆå®¹æ˜“åœ¨å¤šä¸ªèŠ‚ç‚¹äº§ç”Ÿç›¸åŒçš„`ID`å€¼ï¼Œæ‰€ä»¥ä¸€èˆ¬çš„éƒ¨ç½²æ¶æ„å¦‚ä¸‹ï¼š\n\n![](https://throwable-blog-1256189093.cos.ap-guangzhou.myqcloud.com/202008/s-f-a-g-6.png)\n\nç®¡ç†è¿™ä¸¤ä¸ª`ID`çš„æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œæˆ–è€…åƒ`Leaf`è¿™æ ·çš„å¼€æºæ¡†æ¶å¼•å…¥åˆ†å¸ƒå¼ç¼“å­˜è¿›è¡Œç®¡ç†ï¼Œå†å¦‚ç¬”è€…æ‰€åœ¨çš„åˆ›ä¸šå°å›¢é˜Ÿç”Ÿäº§æœåŠ¡æ¯”è¾ƒå°‘ï¼Œç›´æ¥æŠŠ`Woker ID`å’Œ`Data Center ID`ç¡¬ç¼–ç åœ¨æœåŠ¡å¯åŠ¨è„šæœ¬ä¸­ï¼Œç„¶åæŠŠæ‰€æœ‰æœåŠ¡ä½¿ç”¨çš„`Woker ID`å’Œ`Data Center ID`ç»Ÿä¸€ç™»è®°åœ¨å›¢é˜Ÿå†…éƒ¨çŸ¥è¯†åº“ä¸­ã€‚\n\n## è‡ªå®ç°ç®€åŒ–ç‰ˆSnowflake\n\nå¦‚æœå®Œå…¨ä¸è€ƒè™‘æ€§èƒ½çš„è¯ï¼Œä¹Ÿä¸è€ƒè™‘æ—¶é’Ÿå›æ‹¨ã€åºåˆ—å·ç”Ÿæˆç­‰ç­‰é—®é¢˜ï¼Œå…¶å®å¯ä»¥æŠŠ`Snowflake`çš„ä½è¿ç®—å’Œå¼‚å¸¸å¤„ç†éƒ¨åˆ†å…¨éƒ¨å»æ‰ï¼Œä½¿ç”¨`Long.toBinaryString()`æ–¹æ³•ç»“åˆå­—ç¬¦ä¸²æŒ‰ç…§`Snowflake`ç®—æ³•æ€è·¯æ‹¼æ¥å‡º`64 bit`çš„äºŒè¿›åˆ¶æ•°ï¼Œå†é€šè¿‡`Long.parseLong()`æ–¹æ³•è½¬åŒ–ä¸º`Long`ç±»å‹ã€‚ç¼–å†™ä¸€ä¸ª`main`æ–¹æ³•å¦‚ä¸‹ï¼š\n\n```java\npublic class Main {\n\n    private static final String HIGH = \"0\";\n\n    /**\n     * 2020-08-01 00:00:00\n     */\n    private static final long EPOCH = 1596211200000L;\n\n    public static void main(String[] args) {\n        long workerId = 1L;\n        long dataCenterId = 1L;\n        long seq = 4095;\n        String timestampString = leftPadding(Long.toBinaryString(System.currentTimeMillis() - EPOCH), 41);\n        String workerIdString = leftPadding(Long.toBinaryString(workerId), 5);\n        String dataCenterIdString = leftPadding(Long.toBinaryString(dataCenterId), 5);\n        String seqString = leftPadding(Long.toBinaryString(seq), 12);\n        String value = HIGH + timestampString + workerIdString + dataCenterIdString + seqString;\n        long num = Long.parseLong(value, 2);\n        System.out.println(num);   // æŸä¸ªæ—¶åˆ»è¾“å‡ºä¸º3125927076831231\n    }\n\n    private static String leftPadding(String value, int maxLength) {\n        int diff = maxLength - value.length();\n        StringBuilder builder = new StringBuilder();\n        for (int i = 0; i < diff; i++) {\n            builder.append(\"0\");\n        }\n        builder.append(value);\n        return builder.toString();\n    }\n}\n```\n\nç„¶åæŠŠä»£ç è§„èŒƒä¸€ä¸‹ï¼Œç¼–å†™å‡ºä¸€ä¸ªç®€ç‰ˆ`Snowflake`ç®—æ³•å®ç°çš„å·¥ç¨‹åŒ–ä»£ç ï¼š\n\n```java\n// ä¸»é”®ç”Ÿæˆå™¨æ¥å£\npublic interface PrimaryKeyGenerator {\n\n    long generate();\n}\n\n// ç®€æ˜“Snowflakeå®ç°\npublic class SimpleSnowflake implements PrimaryKeyGenerator {\n\n    private static final String HIGH = \"0\";\n    private static final long MAX_WORKER_ID = 31;\n    private static final long MIN_WORKER_ID = 0;\n\n    private static final long MAX_DC_ID = 31;\n    private static final long MIN_DC_ID = 0;\n\n    private static final long MAX_SEQUENCE = 4095;\n\n    /**\n     * æœºå™¨ID\n     */\n    private final long workerId;\n\n    /**\n     * æ•°æ®ä¸­å¿ƒID\n     */\n    private final long dataCenterId;\n\n    /**\n     * åŸºå‡†çºªå…ƒå€¼\n     */\n    private final long epoch;\n\n    private long sequence = 0L;\n    private long lastTimestamp = -1L;\n\n    public SimpleSnowflake(long workerId, long dataCenterId, long epoch) {\n        this.workerId = workerId;\n        this.dataCenterId = dataCenterId;\n        this.epoch = epoch;\n        checkArgs();\n    }\n\n    private void checkArgs() {\n        if (!(MIN_WORKER_ID <= workerId && workerId <= MAX_WORKER_ID)) {\n            throw new IllegalArgumentException(\"Worker id must be in [0,31]\");\n        }\n        if (!(MIN_DC_ID <= dataCenterId && dataCenterId <= MAX_DC_ID)) {\n            throw new IllegalArgumentException(\"Data center id must be in [0,31]\");\n        }\n    }\n\n    @Override\n    public synchronized long generate() {\n        long timestamp = System.currentTimeMillis();\n        // æ—¶é’Ÿå›æ‹¨\n        if (timestamp < lastTimestamp) {\n            throw new IllegalStateException(\"Clock moved backwards\");\n        }\n        // åŒä¸€æ¯«ç§’å†…å¹¶å‘\n        if (lastTimestamp == timestamp) {\n            sequence = sequence + 1;\n            if (sequence == MAX_SEQUENCE) {\n                timestamp = untilNextMillis(lastTimestamp);\n                sequence = 0L;\n            }\n        } else {\n            // ä¸‹ä¸€æ¯«ç§’é‡ç½®sequenceä¸º0\n            sequence = 0L;\n        }\n        lastTimestamp = timestamp;\n        // 41ä½æ—¶é—´æˆ³å­—ç¬¦ä¸²ï¼Œä¸å¤Ÿä½æ•°å·¦è¾¹è¡¥\"0\"\n        String timestampString = leftPadding(Long.toBinaryString(timestamp - epoch), 41);\n        // 5ä½æœºå™¨IDå­—ç¬¦ä¸²ï¼Œä¸å¤Ÿä½æ•°å·¦è¾¹è¡¥\"0\"\n        String workerIdString = leftPadding(Long.toBinaryString(workerId), 5);\n        // 5ä½æ•°æ®ä¸­å¿ƒIDå­—ç¬¦ä¸²ï¼Œä¸å¤Ÿä½æ•°å·¦è¾¹è¡¥\"0\"\n        String dataCenterIdString = leftPadding(Long.toBinaryString(dataCenterId), 5);\n        // 12ä½åºåˆ—å·å­—ç¬¦ä¸²ï¼Œä¸å¤Ÿä½æ•°å·¦è¾¹è¡¥\"0\"\n        String seqString = leftPadding(Long.toBinaryString(sequence), 12);\n        String value = HIGH + timestampString + workerIdString + dataCenterIdString + seqString;\n        return Long.parseLong(value, 2);\n    }\n\n    private long untilNextMillis(long lastTimestamp) {\n        long timestamp;\n        do {\n            timestamp = System.currentTimeMillis();\n        } while (timestamp <= lastTimestamp);\n        return timestamp;\n    }\n\n    private static String leftPadding(String value, int maxLength) {\n        int diff = maxLength - value.length();\n        StringBuilder builder = new StringBuilder();\n        for (int i = 0; i < diff; i++) {\n            builder.append(\"0\");\n        }\n        builder.append(value);\n        return builder.toString();\n    }\n\n    public static void main(String[] args) {\n        long epoch = LocalDateTime.of(1970, 1, 1, 0, 0, 0, 0)\n                .toInstant(ZoneOffset.of(\"+8\")).toEpochMilli();\n        PrimaryKeyGenerator generator = new SimpleSnowflake(1L, 1L, epoch);\n        for (int i = 0; i < 5; i++) {\n            System.out.println(String.format(\"ç¬¬%sä¸ªç”Ÿæˆçš„ID: %d\", i + 1, generator.generate()));\n        }\n    }\n}\n\n// æŸä¸ªæ—¶åˆ»è¾“å‡ºå¦‚ä¸‹\nç¬¬1ä¸ªç”Ÿæˆçš„ID: 6698247966366502912\nç¬¬2ä¸ªç”Ÿæˆçš„ID: 6698248027448152064\nç¬¬3ä¸ªç”Ÿæˆçš„ID: 6698248032162549760\nç¬¬4ä¸ªç”Ÿæˆçš„ID: 6698248033076908032\nç¬¬5ä¸ªç”Ÿæˆçš„ID: 6698248033827688448\n```\n\né€šè¿‡å­—ç¬¦ä¸²æ‹¼æ¥çš„å†™æ³•è™½ç„¶è¿è¡Œæ•ˆç‡ä½ï¼Œä½†æ˜¯å¯è¯»æ€§ä¼šæ¯”è¾ƒé«˜ï¼Œå·¥ç¨‹åŒ–å¤„ç†åçš„ä»£ç å¯ä»¥åœ¨å®ä¾‹åŒ–æ—¶å€™ç›´æ¥æŒ‡å®š`Worker ID`å’Œ`Data Center ID`ç­‰å€¼ï¼Œå¹¶ä¸”è¿™ä¸ªç®€æ˜“çš„`Snowflake`å®ç°æ²¡æœ‰ç¬¬ä¸‰æ–¹åº“ä¾èµ–ï¼Œæ‹·è´ä¸‹æ¥å¯ä»¥ç›´æ¥è¿è¡Œã€‚ä¸Šé¢çš„æ–¹æ³•ä½¿ç”¨å­—ç¬¦ä¸²æ‹¼æ¥çœ‹èµ·æ¥æ¯”è¾ƒä½ç«¯ï¼Œå…¶å®æœ€åé‚£éƒ¨åˆ†çš„æŒ‰ä½æˆ–ï¼Œ**å¯ä»¥å®Œå…¨è½¬åŒ–ä¸ºåŠ æ³•**ï¼š\n\n```java\npublic class Main {\n    \n    /**\n     * 2020-08-01 00:00:00\n     */\n    private static final long EPOCH = 1596211200000L;\n\n    public static void main(String[] args) {\n        long workerId = 1L;\n        long dataCenterId = 1L;\n        long seq = 4095;\n        long timestampDiff = System.currentTimeMillis() - EPOCH;\n        long num = (long) (timestampDiff * Math.pow(2, 22)) + (long) (dataCenterId * Math.pow(2, 17)) + (long) (workerId * Math.pow(2, 12)) + seq;\n        System.out.println(num);   // æŸä¸ªæ—¶åˆ»è¾“å‡ºä¸º3248473482862591\n    }\n}\n```\n\nè¿™æ ·çœ‹èµ·æ¥æ•´ä¸ªç®—æ³•éƒ½å˜å¾—ç®€å•ï¼Œä¸è¿‡è¿™é‡Œæ¶‰åŠåˆ°æŒ‡æ•°è¿ç®—å’ŒåŠ æ³•è¿ç®—ï¼Œæ•ˆç‡ä¼šæ¯”è¾ƒä½ã€‚\n\n## å°ç»“\n\n`Snowflake`ç®—æ³•æ˜¯ä»¥é«˜æ€§èƒ½ä¸ºæ ¸å¿ƒç›®æ ‡çš„ç®—æ³•ï¼ŒåŸºäºè¿™ä¸€ç‚¹ç›®çš„å·§å¦™åœ°å¤§é‡ä½¿ç”¨ä½è¿ç®—ï¼Œè¿™ç¯‡æ–‡ç« å·²ç»æŠŠ`Snowflake`ä¸­åº”ç”¨åˆ°çš„ä½è¿ç®—å’Œå…·ä½“æºç å®ç°å½»åº•åˆ†ææ¸…æ¥šã€‚æœ€åï¼ŒåŸºäº`Twitter`å®˜æ–¹çš„`Snowflake`ç®—æ³•æºç ï¼Œä¿®è®¢å‡ºäº†ä¸€ç‰ˆ`Java`å®ç°ç‰ˆæœ¬ï¼Œå¹¶ä¸”åº”ç”¨å‰é¢æåˆ°çš„æ”¹è‰¯æ–¹å¼ï¼Œä¿®å¤äº†ä½å¹¶å‘åœºæ™¯ä¸‹åªäº§ç”Ÿå¶æ•°çš„é—®é¢˜ï¼Œ**å¹¶ä¸”å·²ç»åº”ç”¨äºç”Ÿäº§ç¯å¢ƒä¸€æ®µæ—¶é—´**ï¼Œä»£ç ä»“åº“å¦‚ä¸‹ï¼ˆä»£ç æ²¡æœ‰ä»»ä½•ç¬¬ä¸‰æ–¹åº“ä¾èµ–ï¼Œæ‹·è´å‡ºæ¥å°±ç›´æ¥å¯ç”¨ï¼‰ï¼š\n\n- `Github`ï¼š`https://github.com/zjcscut/framework-mesh/tree/master/java-snowflake`\n\nå‚è€ƒèµ„æ–™ï¼š\n\n- [ç¾å›¢Leafæºç ](https://github.com/Meituan-Dianping/Leaf)\n- [Twitter Snowflake](https://github.com/twitter-archive/snowflake/blob/scala_28/src/main/scala/com/twitter/service/snowflake/IdWorker.scala)\n\nï¼ˆæœ¬æ–‡å®Œ c-3-d e-a-20200809 å°é¢å›¾æ¥æºäºå›½æ¼«ã€Šçµç¬¼ã€‹ï¼‰", "user_name": "Throwable", "description": "åˆ›ä¸šå°å›¢é˜Ÿæ¶æ„å¸ˆã€‚å…¬ä¼—å·ï¼šThrowableï¼ˆidï¼šthrowable-dogeï¼‰ï¼Œå®æˆ˜æ´¾ï¼Œåªåˆ†äº«åŸåˆ›ï¼Œä¸å–è¯¾", "got_view_count": 61292, "category_name": "åç«¯", "ctime": 1457483880}
{"tag_name": "flexbox", "concern_user_count": 18287, "user_id": "1521379825693816", "title": "ã€CSSåŸºç¡€ã€‘Flexå¸ƒå±€ï¼ˆåŒ…å«flex-growå’Œflex-shrinkçš„è¯¦ç»†è®¡ç®—æ–¹å¼ï¼‰", "mark_content": "## å‚è€ƒ\n\n- [Flex å¸ƒå±€æ•™ç¨‹ï¼šè¯­æ³•ç¯‡](http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html)\n- [Flex å¸ƒå±€æ•™ç¨‹ï¼šå®ä¾‹ç¯‡](http://www.ruanyifeng.com/blog/2015/07/flex-examples.html)\n- [è¯¦è§£ flex-grow ä¸ flex-shrink](https://zhuanlan.zhihu.com/p/24372279/)\n- [Flex å¸ƒå±€è°ƒè¯•å·¥å…·](http://works.kexiaolong.top/flexible-box-display/)\n\n## ä»‹ç»\n\nä¼ ç»Ÿçš„å¸ƒå±€æ–¹æ¡ˆï¼ŒåŸºäºç›’æ¨¡å‹ï¼Œä¾èµ–`display`å±æ€§ã€`position`å±æ€§å’Œ`float`å±æ€§ã€‚å…¶å¯¹äºæŸäº›ç‰¹æ®Šçš„å¸ƒå±€ï¼ˆå¦‚å‚ç›´å±…ä¸­ï¼‰ï¼Œå®ç°èµ·æ¥æ¯”è¾ƒéº»çƒ¦ã€‚\n\nåœ¨ 2009 å¹´ï¼ŒW3C æå‡ºäº†ä¸€ç§æ–°çš„å¸ƒå±€æ–¹æ¡ˆâ€”â€”**Flex å¸ƒå±€**ï¼ˆFlexible Box å¸ƒå±€ï¼Œå¼¹æ€§ç›’å­å¸ƒå±€ï¼‰ï¼Œå…¶ç›¸æ¯”äºä¼ ç»Ÿçš„å¸ƒå±€æ–¹æ¡ˆï¼Œæ›´ä¸ºçµæ´»å’Œç®€ä¾¿ã€‚ç›®å‰ï¼ŒFlex å¸ƒå±€å·²ç»å¾—åˆ°äº†æ‰€æœ‰æµè§ˆå™¨çš„æ”¯æŒã€‚\n\nå°†å…ƒç´ çš„`display`å±æ€§è®¾ç½®ä¸º`flex`æˆ–`inline-flex`åï¼Œå³å¯å¼€å¯ Flex å¸ƒå±€ï¼š\n\n```less\n// å—çº§å…ƒç´ \n.block-box {\n  display: flex;\n}\n\n// è¡Œå†…å…ƒç´ \n.inline-box {\n  display: inline-flex;\n}\n```\n\nåŒæ—¶ï¼Œè¯¥å…ƒç´ ä¼šè‡ªåŠ¨æˆä¸º Flex å®¹å™¨ï¼Œç®€ç§°**å®¹å™¨**ã€‚ä¸”å®¹å™¨çš„æ‰€æœ‰å­å…ƒç´ ä¼šè‡ªåŠ¨æˆä¸º Flex å®¹å™¨æˆå‘˜ï¼Œç®€ç§°**é¡¹ç›®**ã€‚é¡¹ç›®çš„`float`ã€`clear`ã€`vertical-align`å±æ€§å°†å¤±æ•ˆã€‚\n\nå®¹å™¨ä¸­é»˜è®¤å­˜åœ¨ä¸¤æ ¹è½´ï¼š**ä¸»è½´**å’Œ**ä¾§è½´**ã€‚ä¸»è½´å’Œä¾§è½´äº’ç›¸å‚ç›´ï¼Œç±»ä¼¼äºå¹³é¢åæ ‡ç³»ä¸­çš„ x è½´å’Œ y è½´ã€‚é¡¹ç›®å°†è‡ªåŠ¨æ²¿ç€ä¸»è½´æ–¹å‘æ’åˆ—ï¼Œæ’æ»¡æ—¶å°†æ²¿ä¾§è½´æ–¹å‘å †ç Œï¼Œå³åœ¨ä¾§è½´æ–¹å‘ä¸Šæ¢è¡Œï¼ˆå‰ææ˜¯å®¹å™¨`flex-wrap`å±æ€§ä¸ä¸º`nowrap`ï¼‰ã€‚\n\n## è°ƒè¯•\n\nå¯ä½¿ç”¨[Flex å¸ƒå±€åœ¨çº¿è°ƒè¯•å·¥å…·](http://works.kexiaolong.top/flexible-box-display/)æ¥å¿«é€Ÿé…ç½® Flex å¸ƒå±€å’ŒæŸ¥çœ‹ Flex å¸ƒå±€æ•ˆæœï¼š\n\nå¯¹äºè¯¥å·¥å…·çš„ä»‹ç»è¯·è§[æ­¤æ–‡](https://juejin.im/post/6857741687347740679/)ã€‚\n\n## å®¹å™¨çš„å±æ€§\n\n### flex-direction\n\n`flex-direction`å±æ€§å†³å®šä¸»è½´çš„æ–¹å‘ï¼Œè¿›è€Œå†³å®šé¡¹ç›®çš„æ’åˆ—æ–¹å‘ï¼Œå…¶å€¼å¯èƒ½ä¸ºï¼š\n\n```less\n.container {\n  // ä¸»è½´æ–¹å‘ä»å·¦å‘å³â†’ï¼ˆé»˜è®¤å€¼ï¼‰\n  flex-direction: row;\n\n  // ä¸»è½´æ–¹å‘ä»å³å‘å·¦â†\n  flex-direction: row-reverse;\n\n  // ä¸»è½´æ–¹å‘ä»ä¸Šå‘ä¸‹â†“\n  flex-direction: column;\n\n  // ä¸»è½´æ–¹å‘ä»ä¸‹å‘ä¸Šâ†‘\n  flex-direction: column-reverse;\n}\n```\n\n### flex-wrap\n\n`flex-wrap`å±æ€§å†³å®šä¾§è½´çš„æ–¹å‘ï¼Œè¿›è€Œå†³å®šé¡¹ç›®çš„æ¢è¡Œæ–¹å‘ï¼Œå…¶å€¼å¯èƒ½ä¸ºï¼š\n\n```less\n.container {\n  // ä¾§è½´æ— æ–¹å‘ï¼ˆé»˜è®¤å€¼ï¼‰\n  // ç›¸å½“äºä¸æ¢è¡Œ\n  flex-wrap: nowrap;\n\n  // ä¸»è½´æ–¹å‘æ°´å¹³æ—¶ï¼Œä¾§è½´æ–¹å‘ä»ä¸Šå‘ä¸‹â†“\n  // ä¸»è½´æ–¹å‘ç«–ç›´æ—¶ï¼Œä¾§è½´æ–¹å‘ä»å·¦å‘å³â†’\n  // ç›¸å½“äºé¡ºåºæ¢è¡Œ\n  flex-wrap: wrap;\n\n  // ä¸»è½´æ–¹å‘æ°´å¹³æ—¶ï¼Œä¾§è½´æ–¹å‘ä»ä¸‹å‘ä¸Šâ†‘\n  // ä¸»è½´æ–¹å‘ç«–ç›´æ—¶ï¼Œä¾§è½´æ–¹å‘ä»å³å‘å·¦â†\n  // ç›¸å½“äºé€†åºæ¢è¡Œ\n  flex-wrap: wrap-reverse;\n}\n```\n\n### flex-flow\n\n`flex-flow`å±æ€§æ˜¯`flex-direction`å±æ€§å’Œ`flex-wrap`å±æ€§çš„ç®€å†™å½¢å¼ï¼Œå…¶å€¼å¯èƒ½ä¸ºï¼š\n\n```less\n.container {\n  // ä¸»è½´æ–¹å‘ä»å·¦å‘å³ï¼Œä¾§è½´æ— æ–¹å‘ï¼ˆé»˜è®¤å€¼ï¼‰\n  // å³é¡¹ç›®æ’åˆ—æ–¹å‘â†’ï¼Œä¸æ¢è¡Œ\n  flex-flow: row nowrap;\n\n  // ä¸»è½´æ–¹å‘ä»å·¦å‘å³ï¼Œä¾§è½´æ–¹å‘ä»ä¸Šå‘ä¸‹\n  // å³é¡¹ç›®æ’åˆ—æ–¹å‘â†’ï¼Œæ¢è¡Œæ–¹å‘â†“ï¼Œä¸ç°ä»£ä¹¦å†™æ–¹å‘ç›¸åŒ\n  flex-flow: row wrap;\n\n  // ä¸»è½´æ–¹å‘ä»å·¦å‘å³ï¼Œä¾§è½´æ–¹å‘ä»ä¸‹å‘ä¸Š\n  // å³é¡¹ç›®æ’åˆ—æ–¹å‘â†’ï¼Œæ¢è¡Œæ–¹å‘â†‘\n  flex-flow: row wrap-reverse;\n\n  // ä¸»è½´æ–¹å‘ä»å³å‘å·¦ï¼Œä¾§è½´æ— æ–¹å‘\n  // å³é¡¹ç›®æ’åˆ—æ–¹å‘â†ï¼Œä¸æ¢è¡Œ\n  flex-flow: row-reverse nowrap;\n\n  // ä¸»è½´æ–¹å‘ä»å³å‘å·¦ï¼Œä¾§è½´æ–¹å‘ä»ä¸Šå‘ä¸‹\n  // å³é¡¹ç›®æ’åˆ—æ–¹å‘â†ï¼Œæ¢è¡Œæ–¹å‘â†“\n  flex-flow: row-reverse wrap;\n\n  // ä¸»è½´æ–¹å‘ä»å³å‘å·¦ï¼Œä¾§è½´æ–¹å‘ä»ä¸‹å‘ä¸Š\n  // å³é¡¹ç›®æ’åˆ—æ–¹å‘â†ï¼Œæ¢è¡Œæ–¹å‘â†‘\n  flex-flow: row-reverse wrap-reverse;\n\n  // ä¸»è½´æ–¹å‘ä»ä¸Šå‘ä¸‹ï¼Œä¾§è½´æ— æ–¹å‘\n  // å³é¡¹ç›®æ’åˆ—æ–¹å‘â†“ï¼Œä¸æ¢è¡Œ\n  flex-flow: column nowrap;\n\n  // ä¸»è½´æ–¹å‘ä»ä¸Šå‘ä¸‹ï¼Œä¾§è½´æ–¹å‘ä»å·¦å‘å³\n  // å³é¡¹ç›®æ’åˆ—æ–¹å‘â†“ï¼Œæ¢è¡Œæ–¹å‘â†’\n  flex-flow: column wrap;\n\n  // ä¸»è½´æ–¹å‘ä»ä¸Šå‘ä¸‹ï¼Œä¾§è½´æ–¹å‘ä»å³å‘å·¦\n  // å³é¡¹ç›®æ’åˆ—æ–¹å‘â†“ï¼Œæ¢è¡Œæ–¹å‘â†ï¼Œä¸ä¸­å›½å¤ä»£ä¹¦å†™æ–¹å‘ç›¸åŒ\n  flex-flow: column wrap-reverse;\n\n  // ä¸»è½´æ–¹å‘ä»ä¸‹å‘ä¸Šï¼Œä¾§è½´æ— æ–¹å‘\n  // å³é¡¹ç›®æ’åˆ—æ–¹å‘â†‘ï¼Œä¸æ¢è¡Œ\n  flex-flow: column-reverse nowrap;\n\n  // ä¸»è½´æ–¹å‘ä»ä¸‹å‘ä¸Šï¼Œä¾§è½´æ–¹å‘ä»å·¦å‘å³\n  // å³é¡¹ç›®æ’åˆ—æ–¹å‘â†‘ï¼Œæ¢è¡Œæ–¹å‘â†’\n  flex-flow: column-reverse wrap;\n\n  // ä¸»è½´æ–¹å‘ä»ä¸‹å‘ä¸Šï¼Œä¾§è½´æ–¹å‘ä»å³å‘å·¦\n  // å³é¡¹ç›®æ’åˆ—æ–¹å‘â†‘ï¼Œæ¢è¡Œæ–¹å‘â†\n  flex-flow: column-reverse wrap-reverse;\n}\n```\n\nå¯åŸºäºä»¥ä¸‹é…ç½®å¯¹`flex-flow`çš„å€¼è¿›è¡Œä¿®æ”¹ï¼ŒæŸ¥çœ‹å…¶ä¸åŒå€¼çš„å¯¹åº”æ•ˆæœï¼Œä»¥éªŒè¯ä¸Šè¿°è§„å¾‹ï¼š\n\n```less\n.container {\n  width: 200px;\n  height: 200px;\n  flex-flow: <flex-direction> | <flex-wrap>;\n  .item-1,\n  .item-2,\n  .item-3 {\n    width: 100px;\n    height: 100px;\n  }\n}\n```\n\n### justify-content\n\n`justify-content`å±æ€§å†³å®šäº†é¡¹ç›®æ²¿ä¸»è½´æ–¹å‘çš„å¯¹é½æ–¹å¼ï¼Œå…¶å€¼å¯èƒ½ä¸ºï¼š\n\n```less\n.container {\n  // ä¸»è½´æ–¹å‘ä¸Šï¼Œèµ·ç‚¹å¯¹é½ï¼ˆé»˜è®¤å€¼ï¼‰\n  justify-content: flex-start;\n\n  // ä¸»è½´æ–¹å‘ä¸Šï¼Œç»ˆç‚¹å¯¹é½\n  justify-content: flex-end;\n\n  // ä¸»è½´æ–¹å‘ä¸Šï¼Œå±…ä¸­å¯¹é½\n  justify-content: center;\n\n  // ä¸»è½´æ–¹å‘ä¸Šï¼Œé¡¹ç›®ä¹‹é—´ç©ºéš™ç›¸ç­‰\n  justify-content: space-between;\n\n  // ä¸»è½´æ–¹å‘ä¸Šï¼Œé¡¹ç›®ä¸¤ä¾§ç©ºéš™ç›¸ç­‰\n  justify-content: space-around;\n}\n```\n\n### align-content\n\n`align-content`å±æ€§å†³å®šäº†é¡¹ç›®æ²¿ä¾§è½´æ–¹å‘çš„å¯¹é½æ–¹å¼ï¼ˆå¦‚æœé¡¹ç›®åªæœ‰ä¸€è¡Œï¼Œåˆ™è¯¥å±æ€§æ— æ•ˆï¼‰ï¼Œå…¶å€¼å¯èƒ½ä¸ºï¼š\n\n```less\n.container {\n  // å¦‚æœé¡¹ç›®heightæœªè®¾ç½®æˆ–ä¸ºauto\n  // é¡¹ç›®æ‹‰ä¼¸è‡³å æ»¡ä¾§è½´ï¼ˆé»˜è®¤å€¼ï¼‰\n  align-content: stretch;\n\n  // ä¾§è½´æ–¹å‘ä¸Šï¼Œèµ·ç‚¹å¯¹é½\n  align-content: flex-start;\n\n  // ä¾§è½´æ–¹å‘ä¸Šï¼Œç»ˆç‚¹å¯¹é½\n  align-content: flex-end;\n\n  // ä¾§è½´æ–¹å‘ä¸Šï¼Œå±…ä¸­å¯¹é½\n  align-content: center;\n\n  // ä¾§è½´æ–¹å‘ä¸Šï¼Œé¡¹ç›®ä¹‹é—´ç©ºéš™ç›¸ç­‰\n  align-content: space-between;\n\n  // ä¾§è½´æ–¹å‘ä¸Šï¼Œé¡¹ç›®ä¸¤ä¾§ç©ºéš™ç›¸ç­‰\n  align-content: space-around;\n}\n```\n\n### place-content\n\n`place-content`å±æ€§æ˜¯`align-content`å±æ€§å’Œ`justify-content`å±æ€§çš„ç®€å†™å½¢å¼ï¼Œå…¶å¯èƒ½å€¼è§[æ­¤æ–‡](https://developer.mozilla.org/zh-CN/docs/Web/CSS/place-content/)ã€‚\n\n```less\n.container {\n  place-content: <align-content> | <justify-content>;\n}\n```\n\n### align-items\n\n`align-items`å±æ€§å†³å®šäº†åŒä¸€è¡Œé¡¹ç›®æ²¿ä¾§è½´æ–¹å‘çš„å¯¹é½æ–¹å¼ï¼Œå³é¡¹ç›®åœ¨ä¸»è½´æ–¹å‘ä¸Šçš„å‚ç›´å¯¹é½æ–¹å¼ï¼Œå…¶å€¼å¯èƒ½ä¸ºï¼š\n\n```less\n.container {\n  // å¦‚æœé¡¹ç›®heightæœªè®¾ç½®æˆ–ä¸ºauto\n  // åˆ™æ‹‰ä¼¸è‡³å æ»¡è¯¥è¡Œï¼ˆé»˜è®¤å€¼ï¼‰\n  align-items: stretch;\n\n  // ä¾§è½´ä¸Šï¼Œèµ·ç‚¹å¯¹é½\n  align-items: flex-start;\n\n  // ä¾§è½´ä¸Šï¼Œç»ˆç‚¹å¯¹é½\n  align-items: flex-end;\n\n  // ä¾§è½´ä¸Šï¼Œå±…ä¸­å¯¹é½\n  align-items: center;\n\n  // ä¾§è½´ä¸Šï¼ŒåŸºçº¿å¯¹é½\n  align-items: baseline;\n}\n```\n\n## é¡¹ç›®çš„å±æ€§\n\n### order\n\n`order`å±æ€§å†³å®šäº†é¡¹ç›®æ²¿ä¸»è½´æ–¹å‘çš„æ’åˆ—é¡ºåºï¼Œå…¶å€¼å¯èƒ½ä¸ºï¼š\n\n```less\n.item {\n  // æ•°å€¼è¶Šå°ï¼Œé¡¹ç›®æ’åˆ—è¶Šé å‰ï¼ˆé»˜è®¤å€¼ä¸º1ï¼‰\n  order: <integer>;\n}\n```\n\n### align-self\n\n`align-self`å±æ€§ä¼šè¦†ç›–å®¹å™¨çš„`align-items`å±æ€§ï¼Œå…¶å€¼å¯èƒ½ä¸ºï¼š\n\n```less\n.item {\n  // ç»§æ‰¿å®¹å™¨çš„align-itemså±æ€§ï¼ˆé»˜è®¤å€¼ï¼‰\n  align-self: auto;\n\n  align-items: stretch;\n\n  align-items: flex-start;\n\n  align-items: flex-end;\n\n  align-items: center;\n\n  align-items: baseline;\n}\n```\n\n### flex-basis\n\n`flex-basis`å±æ€§ä¼šè¦†ç›–é¡¹ç›®çš„`width`å±æ€§ï¼ˆå¦‚æœä¸»è½´æ–¹å‘ä¸ºæ°´å¹³ï¼‰æˆ–`height`å±æ€§ï¼ˆå¦‚æœä¸»è½´æ–¹å‘ä¸ºå‚ç›´ï¼‰ï¼Œä¸‹æ–‡ä¸­çš„`flex-grow`å’Œ`flex-shrink`éƒ½åŸºäº`flex-basis`è¿›è¡Œè®¡ç®—ï¼Œå…¶å€¼å¯èƒ½ä¸ºï¼š\n\n```less\n.item {\n  // è®¾ç½®ä¸ºä¸widthæˆ–heightç›¸åŒçš„å€¼ï¼ˆé»˜è®¤å€¼ï¼‰\n  flex-basis: auto;\n\n  flex-basis: <length>;\n}\n```\n\n### flex-grow\n\n`flex-grow`å±æ€§å†³å®šäº†é¡¹ç›®æ²¿ä¸»è½´æ–¹å‘çš„ä¼¸é•¿ç³»æ•°ï¼Œåªåœ¨å®¹å™¨æœ‰å‰©ä½™ç©ºé—´æ—¶æœ‰æ•ˆï¼Œå…¶å€¼å¯èƒ½ä¸ºï¼š\n\n```less\n.item {\n  // ï¼ˆé»˜è®¤å€¼ä¸º0ï¼‰\n  flex-grow: <number>;\n}\n```\n\nå…³äº`flex-grow`å±æ€§çš„è®¡ç®—è¿‡ç¨‹ä¸ºï¼š\n\n1. `flex-grow`å±æ€§å°äºç­‰äº`0`çš„é¡¹ç›®ä¸å—å½±å“ï¼Œä¸ä¼šä¼¸é•¿ã€‚\n2. å¯¹å‰©ä½™é¡¹ç›®çš„`flex-grow`å±æ€§è¿›è¡Œæ±‚å’Œï¼Œå°†ç»“æœè®°ä¸º`sum`ã€‚\n3. åˆ†ä»¥ä¸‹æƒ…å†µè¿›è¡Œè®¨è®ºã€‚\n\n#### sum â‰¥ 1 æ—¶\n\n```less\n.container {\n  display: flex;\n  width: 800px;\n  .item1 {\n    flex-basis: 50px;\n  }\n  .item2 {\n    flex-basis: 100px;\n    flex-grow: 1;\n  }\n  .item3 {\n    flex-basis: 150px;\n    flex-grow: 3;\n  }\n  .item4 {\n    flex-basis: 200px;\n    flex-grow: 6;\n  }\n}\n```\n\nè®¡ç®—è¿‡ç¨‹ï¼š\n\n1. è®¡ç®—å‰©ä½™å®½åº¦ï¼š`å‰©ä½™å®½åº¦ = å®¹å™¨å®½åº¦ - é¡¹ç›®æ€»å®½åº¦`ï¼Œæ‰€ä»¥ï¼š\n   - `å‰©ä½™å®½åº¦ = 800px - 500px = 300px`ã€‚\n2. è®¡ç®—å„é¡¹ç›®æƒé‡å æ¯”ï¼š`æƒé‡ = <flex-grow>`ï¼Œæ‰€ä»¥ï¼š\n   - `æ€»æƒé‡ = sum = 1 + 3 + 6 = 10`ã€‚\n   - `é¡¹ç›®2æƒé‡ = 1`ï¼Œ`é¡¹ç›®2æƒé‡å æ¯” = 1 / 10 = 0.1`ã€‚\n   - `é¡¹ç›®3æƒé‡ = 3`ï¼Œ`é¡¹ç›®3æƒé‡å æ¯” = 3 / 10 = 0.3`ã€‚\n   - `é¡¹ç›®4æƒé‡ = 6`ï¼Œ`é¡¹ç›®4æƒé‡å æ¯” = 6 / 10 = 0.6`ã€‚\n3. è®¡ç®—å„é¡¹ç›®ä¼¸é•¿å®½åº¦ï¼š`ä¼¸é•¿å®½åº¦ = æƒé‡å æ¯” * å‰©ä½™å®½åº¦`ï¼Œæ‰€ä»¥ï¼š\n   - `é¡¹ç›®2ä¼¸é•¿å®½åº¦ = 0.1 * 300px = 30px`ã€‚\n   - `é¡¹ç›®3ä¼¸é•¿å®½åº¦ = 0.3 * 300px = 90px`ã€‚\n   - `é¡¹ç›®4ä¼¸é•¿å®½åº¦ = 0.6 * 300px = 180px`ã€‚\n4. è®¡ç®—å„é¡¹ç›®ä¼¸é•¿åå®½åº¦ï¼š`ä¼¸é•¿åå®½åº¦ = <flex-basis> + ä¼¸é•¿å®½åº¦`ï¼Œæ‰€ä»¥ï¼š\n   - `é¡¹ç›®2ä¼¸é•¿åå®½åº¦ = 100px + 30px = 130px`ã€‚\n   - `é¡¹ç›®3ä¼¸é•¿åå®½åº¦ = 150px + 90px = 240px`ã€‚\n   - `é¡¹ç›®4ä¼¸é•¿åå®½åº¦ = 200px + 180px = 380px`ã€‚\n\n#### sum < 1 æ—¶\n\nè®¡ç®—è¿‡ç¨‹åŸºæœ¬ä¸`sum > 1`æ—¶çš„æƒ…å†µç›¸åŒï¼Œä½†åœ¨ç¬¬ 3 æ­¥ä¸­ï¼Œå„é¡¹ç›®çš„ä¼¸é•¿å®½åº¦ä¸º`sum * æƒé‡å æ¯” * å‰©ä½™å®½åº¦`ã€‚\n\n### flex-shrink\n\n`flex-shrink`å±æ€§å†³å®šäº†é¡¹ç›®æ²¿ä¸»è½´æ–¹å‘çš„ç¼©çŸ­ç³»æ•°ï¼Œåªåœ¨å®¹å™¨ç©ºé—´å‘ç”Ÿæº¢å‡ºæ—¶æœ‰æ•ˆï¼Œå…¶å€¼å¯èƒ½ä¸ºï¼š\n\n```less\n.item {\n  // ï¼ˆé»˜è®¤å€¼ä¸º1ï¼‰\n  flex-shrink: <number>;\n}\n```\n\nå…³äº`flex-shrink`å±æ€§çš„è®¡ç®—è¿‡ç¨‹ä¸ºï¼š\n\n1. `flex-shrink`å±æ€§å°äºç­‰äº`0`çš„é¡¹ç›®ä¸å—å½±å“ï¼Œä¸ä¼šç¼©çŸ­ã€‚\n2. å¯¹å‰©ä½™é¡¹ç›®çš„`flex-shrink`å±æ€§è¿›è¡Œæ±‚å’Œï¼Œå°†ç»“æœè®°ä¸º`sum`ã€‚\n3. åˆ†ä»¥ä¸‹æƒ…å†µè¿›è¡Œè®¨è®ºã€‚\n\n#### sum â‰¥ 1 æ—¶\n\n```less\n.container {\n  display: flex;\n  width: 800px;\n  .item1 {\n    flex-basis: 100px;\n  }\n  .item2 {\n    flex-basis: 200px;\n    flex-shrink: 6;\n  }\n  .item3 {\n    flex-basis: 300px;\n    flex-shrink: 3;\n  }\n  .item4 {\n    flex-basis: 400px;\n    flex-shrink: 1;\n  }\n}\n```\n\nè®¡ç®—è¿‡ç¨‹ï¼š\n\n1. è®¡ç®—æº¢å‡ºå®½åº¦ï¼š`æº¢å‡ºå®½åº¦ = é¡¹ç›®æ€»å®½åº¦ - å®¹å™¨å®½åº¦`ï¼Œæ‰€ä»¥ï¼š\n   - `æº¢å‡ºå®½åº¦ = 800px - 1000px = 200px`ã€‚\n2. è®¡ç®—å„é¡¹ç›®æƒé‡å æ¯”ï¼š`æƒé‡ = <flex-shrink> * <flex-basis>`ï¼Œæ‰€ä»¥ï¼š\n   - `æ€»æƒé‡ = 1200 + 900 + 400 = 2500`ã€‚\n   - `é¡¹ç›®2æƒé‡ = 1200`ï¼Œ`é¡¹ç›®2æƒé‡å æ¯” = 1200 / 2500 = 0.48`ã€‚\n   - `é¡¹ç›®3æƒé‡ = 900`ï¼Œ`é¡¹ç›®3æƒé‡å æ¯” = 900 / 2500 = 0.36`ã€‚\n   - `é¡¹ç›®4æƒé‡ = 400`ï¼Œ`é¡¹ç›®4æƒé‡å æ¯” = 400 / 2500 = 0.16`ã€‚\n3. è®¡ç®—å„é¡¹ç›®ç¼©çŸ­å®½åº¦ï¼š`ç¼©çŸ­å®½åº¦ = æƒé‡å æ¯” * æº¢å‡ºå®½åº¦`ï¼Œæ‰€ä»¥ï¼š\n   - `é¡¹ç›®2ä¼¸é•¿å®½åº¦ = 0.48 * 200px = 96px`ã€‚\n   - `é¡¹ç›®3ä¼¸é•¿å®½åº¦ = 0.36 * 200px = 72px`ã€‚\n   - `é¡¹ç›®4ä¼¸é•¿å®½åº¦ = 0.16 * 200px = 32px`ã€‚\n4. è®¡ç®—å„é¡¹ç›®ç¼©çŸ­åå®½åº¦ï¼š`ç¼©çŸ­åå®½åº¦ = åŸå§‹å®½åº¦ - ç¼©çŸ­å®½åº¦`ï¼Œæ‰€ä»¥ï¼š\n   - `é¡¹ç›®2ç¼©çŸ­åå®½åº¦ = 200px - 96px = 104px`ã€‚\n   - `é¡¹ç›®3ç¼©çŸ­åå®½åº¦ = 300px - 72px = 228px`ã€‚\n   - `é¡¹ç›®4ç¼©çŸ­åå®½åº¦ = 400px - 32px = 368px`ã€‚\n\n#### sum < 1 æ—¶\n\nè®¡ç®—è¿‡ç¨‹åŸºæœ¬ä¸`sum > 1`æ—¶çš„æƒ…å†µç›¸åŒï¼Œä½†åœ¨ç¬¬ 3 æ­¥ä¸­ï¼Œå„é¡¹ç›®çš„ç¼©çŸ­å®½åº¦ä¸º`sum * æƒé‡å æ¯” * æº¢å‡ºå®½åº¦`ã€‚\n\n### flex\n\n`flex`å±æ€§æ˜¯`flex-grow`å±æ€§ã€`flex-shrink`å’Œ`flex-basis`å±æ€§çš„ç®€å†™å½¢å¼ï¼Œå…¶å€¼å¯èƒ½ä¸ºï¼š\n\n```less\n.item {\n  // ç›¸å½“äºflex:0 0 auto;\n  flex: none;\n\n  // ç›¸å½“äºflex:1 1 auto;\n  flex: auto;\n\n  flex: <flex-grow> <flex-shrink> <flex-basis>;\n}\n```\n", "user_name": "æŸ¯æŸ¯likeke", "description": "å—äº¬ï¼Œç ”äºŒï¼ŒWebGIS", "got_view_count": 562, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "Ant Design", "concern_user_count": 5546, "user_id": "2717648473042333", "title": "æ¸è¿›å¼çš„formItemï¼ˆåŸºäºantdçš„Formï¼‰", "mark_content": "åœ¨æ—¥å¸¸ç”¨`antd`å†™è¡¨å•é¡¹æ—¶ï¼Œå¤§å¤šæ•°äººæ˜¯è¿™æ ·å†™çš„ï¼š\n\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8e5878c1705c473399990bf737bfd78b~tplv-k3u1fbpfcp-zoom-1.image)\n\nè€å®è¯´ï¼Œ`antd4`çš„`Form`è¦æ¯”`antd3`çš„å¥½ç”¨å¾ˆå¤šï¼Œä½†åœ¨å®é™…çš„ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œè¿˜æ˜¯ä¼šå› ä¸ºå……æ–¥ç€å¤§é‡çš„`Form.Item`ã€‚\n\næ‹¿ä¸Šé¢çš„å›¾æ¥è¯´ï¼Œ`placeholder`å’Œ`require`éƒ½å·®ä¸å¤šï¼Œæ‰€ä»¥æˆ‘ä»¬æ˜¯ä¸æ˜¯èƒ½å†æŠ½è±¡ä¸€å±‚ã€‚\n\nç­”æ¡ˆè‚¯å®šæ˜¯èƒ½çš„ã€‚é‚£ä¹ˆæ–¹æ¡ˆæœ‰å“ªä¸€äº›å‘¢ï¼š\n\n1. å€ŸåŠ©äºä¸šç•Œçš„ä¸€äº›æ–¹æ¡ˆï¼Œå¦‚[formily](https://zhuanlan.zhihu.com/uform/)ã€[form-render](https://zhuanlan.zhihu.com/p/91292415)ã€‚å®ƒä»¬æ˜¯å…ˆè‡ªå·±å®ç°äº†ä¸€å¥—ï¼Œç„¶åå»é€‚é…ä¸åŒçš„UIï¼Œå¦‚`antd`ã€`fusion`ï¼ˆé£å†°çš„é‚£ä¸€å¥—ï¼‰ï¼Œä½ ä¹Ÿå¯ä»¥åŸºäºå®ƒæä¾›çš„æ ¸å¿ƒåº“å»æ‰©å±•è‡ªå·±çš„UIã€‚\n2. åŸºäº`antd`æœ¬èº«å†å»åšå°è£…ä¸€ä¸ªå¤§è€Œå…¨çš„Formæ–¹æ¡ˆ\n3. æ¸è¿›å¼çš„ç”¨ä¸€ä¸ªç»„ä»¶æ¥ä»£æ›¿`Form.Item`ã€‚\n\nä¸ªäººä¸å¤ªå–œæ¬¢2çš„æ–¹æ¡ˆï¼Œå› ä¸ºè¿™æ ·ä¸€æ¥ï¼Œå°†æ¥å¦‚æœè¦é€‚é…`fusion`ï¼Œæˆ–è€…å…¶ä»–UIæ—¶ï¼Œé‚£ä¹ˆåŸºæœ¬ä¸Šä¹‹å‰çš„ä»£ç æ˜¯åºŸäº†ï¼Œä½•å¿…å‘¢ï¼Ÿ\n\næ‰€ä»¥æˆ‘ä¸ªäººçš„é€‰æ‹©æ˜¯3ï¼Œå®ƒçš„æ„æ€æ˜¯ï¼Œæˆ‘å†™ä¸€ä¸ª`Field`ç»„ä»¶ï¼Œèƒ½å’Œ`Form.Item`å…±å­˜ï¼Œè¿™æ ·ä¸€æ¥ï¼Œè€ä»£ç å¯ä»¥æ¸è¿›å¼çš„ä¿®æ”¹ï¼Œæ–°ä»£ç å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚\n\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/af3e2029d4f04419a28093ad311aae95~tplv-k3u1fbpfcp-zoom-1.image)\n\né‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œ`Field`ç»„ä»¶è¦å¦‚ä½•å°è£…ï¼Ÿå…¶å®è¿™ä¸ªå®Œå…¨å¯ä»¥å‚è€ƒformilyçš„APIã€‚\n\n```js\nexport interface FieldProps extends Omit<FormItemProps, 'children'> {\n  name: string; // åç«¯çš„å­—æ®µkey\n  label: ReactText;  // label\n  required?: boolean; // æ˜¯å¦å¿…é¡»ï¼Œæ²¡æœ‰è€ƒè™‘åŠ¨æ€\n  disabled?: boolean; // ç¦ç”¨ï¼ŒåŒæ ·è¿™é‡Œä¹Ÿæ²¡æœ‰è€ƒè™‘åŠ¨æ€çš„\n  placeholder?: boolean;  // å¦‚æœæ˜¯æ–‡æœ¬åˆ™æ˜¾ç¤º'è¯·è¾“å…¥xx'ï¼Œxxä¸ºä¸Šé¢çš„labelå€¼ï¼Œä¸ç„¶å°±æ˜¯è¯·é€‰æ‹©\n  hidden?: boolean;  // é’ˆå¯¹é‚£ç§<input type=\"hidden\" />\n  description?: ReactElement; // æè¿°è¯´æ˜\n  component?: 'input' | 'textarea' | 'select' | 'radio' | 'custom'; // å½“ç„¶åœ¨å®é™…ä¸šåŠ¡ä¸­è‚¯å®šä¼šæ›´å¤šï¼Œå› ä¸ºæ˜¯æ¸è¿›å¼çš„ï¼Œæ‰€ä»¥å¯ä»¥è€ƒè™‘ä¸€æ­¥æ­¥åœ°å°è£…\n  enum?: Array<{ label: React.ReactNode; value: string | number | boolean }>; // é’ˆå¯¹componentç±»å‹ä¸º`select`å’Œ`radio`\n  node?: ReactElement; // é’ˆå¯¹componentç±»å‹ä¸º`custom`\n  componentProps?: { // ç»„ä»¶å±æ€§\n    placeholder?: string;\n    disabled?: boolean;\n    [key: string]: any;\n  };\n}\n```\n\nå…¶å®è¿™ä¸ª`Field`ç»„ä»¶ä¸éš¾å®ç°ï¼Œå®ƒçš„éš¾ç‚¹åœ¨äº`context`è¿™ä¸€å—çš„å€¼å¾—ç‰¹æ®Šå¤„ç†ä¸€ä¸‹ï¼Œä¸ç„¶ä½ `render`çš„`Form.Item`æ˜¯æ‹¿ä¸åˆ°`labelAlign`ã€`labelCol`ã€`wrapperCol`è¿™äº›å€¼çš„ã€‚\n\n```js\nimport { FormContextProps, FormContext } from 'antd/lib/form/context';\n\n<FormContext.Consumer key=\"label\">\n  {(contextProps: FormContextProps) => {\n    // return ...\n  }}\n</FormContext.Consumer>\n```\n\nå¦å¤–è¿˜æœ‰å°±æ˜¯åœ¨å®ç°descriptionåŠŸèƒ½çš„æ—¶å€™ï¼Œä¹Ÿç€å®éš¾å—ï¼Œè¦`Form.Item`åµŒå¥—`Form.Item`ï¼Œå¸ƒå±€é‚£ä¸€å—æœ‰ç‚¹æ— åŠ›åå˜ˆã€‚\n\næœ‰äº†`Field`ç»„ä»¶ï¼Œ`Submit`å’Œ`Reset`ç»„ä»¶è‡ªç„¶å‘¼ä¹‹è€Œå‡ºäº†ã€‚é‚£ä¹ˆä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬è¦è€ƒè™‘ï¼Œé…ç½®å¼çš„`FormRender`ç»„ä»¶ã€‚\n\næ‰€è°“çš„é…ç½®ï¼Œæ— éå°±æ˜¯ä¸ª`json`ã€‚ä½†è¿™é‡Œè¦è€ƒè™‘çš„ä¸œè¥¿æœ‰ç‚¹å¤šäº†ï¼š\n\n1. ç®€å•åœ°åŠ¨æ€åŒ–è¦æ€ä¹ˆå®ç°ï¼Ÿ\n2. å¦‚æœå°†æ¥æƒ³åšå¯è§†åŒ–ï¼Œé‚£ä¹ˆæ–¹æ¡ˆæ˜¯æ€æ ·çš„ï¼Ÿ\n\nåœ¨ä¸Šé¢è®¾è®¡çš„`Field`ç»„ä»¶é‡Œé¢ï¼Œæˆ‘è€ƒè™‘äº†å¯è§†åŒ–çš„æ–¹æ¡ˆï¼Œä½†æ˜¯å®ƒåªèƒ½æ»¡è¶³ç®€å•çš„åœºæ™¯ï¼Œä¸€æ—¦å¤æ‚äº†ï¼Œå°±ggäº†ã€‚é‚£ä¹ˆæœ‰æ²¡æœ‰åŠæ³•åœ¨å®ƒä¸Šé¢æ‰©å±•å‘¢ï¼Œå…¶å®æ˜¯å¯ä»¥çš„ã€‚åŠ ä¸Šä¸¤ä¸ªå­—æ®µï¼ˆè¿™ä¸ªå‚è€ƒäº†ä¹‹å‰åŒäº‹å†™çš„ä»£ç ï¼‰ï¼š\n\n- shouldUpdate: Form.Itemé‡Œé¢çš„shouldUpdate\n- render: æ¸²æŸ“å‡½æ•°ï¼Œæ¥æ”¶formå±æ€§ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ ¹æ®ä¸åŒçš„æƒ…å†µï¼Œæ¸²æŸ“ä¸åŒçš„ç»„ä»¶äº†ã€‚\n\nåŸºæœ¬ä¸Šæ˜¯æ²¡å•¥é—®é¢˜äº†ï¼Œä½†äº‹å®ä¸Šï¼Œæ¯”å¦‚è¯´å®ç°Itemç»„ä»¶æ˜¾ä¸æ˜¾ç¤ºï¼Œå›ºç„¶ç”¨renderå¯ä»¥åšï¼Œä½†æ›´ä¼˜é›…çš„æ˜¯é€šè¿‡ä¸€ä¸ªè¡¨è¾¾å¼æ¥åšï¼Œè­¬å¦‚è¿™æ ·çš„ï¼š\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3a1110bc54994958a28e38b1b9332eb3~tplv-k3u1fbpfcp-zoom-1.image)\n\nå‚è€ƒæ¥æºæ˜¯ï¼š`form-render`ã€‚å®ƒçš„æ˜¯`ui-hidden`åŠŸèƒ½ã€‚æ ¸å¿ƒä»£ç æ˜¯è¿™ä¸€æ®µï¼š\n\n```jsx\n// è®¡ç®—å•ä¸ªè¡¨è¾¾å¼çš„hiddenå€¼\nconst calcHidden = (hiddenString, rootValue, formData) => {\n  if (!rootValue || typeof rootValue !== 'object') {\n    return false;\n  }\n  // æ”¯æŒå››ç§åŸºæœ¬è¿ç®—ç¬¦\n  const operators = ['==', '!=', '>', '<'];\n  try {\n    const op = operators.find(op => hiddenString.indexOf(op) > -1);\n    const [key, value] = hiddenString.split(op).map(item => item.trim());\n    let left = rootValue[key];\n    // feature: å…è®¸ä» formData å–å€¼\n    if (key.substring(0, 9) === 'formData.' && formData) {\n      const subKey = key.substring(9);\n      left = getExpressionValue(formData, subKey);\n    }\n    const right = parseString(value);\n    return parseString(`\"${String(left)}\"${op}\"${String(right)}\"`);\n  } catch (e) {\n    console.error(e);\n  }\n  return false;\n};\n\n// Remove all window valid api\n// For safety jest-* variable will throw error\nexport function safeEval(code) {\n  let safeContextStr = '';\n  if (typeof window !== 'undefined') {\n    const windowContextAttr = Object.getOwnPropertyNames(window).filter(\n      isValidVariableName\n    );\n    for (let i = 0, len = windowContextAttr.length; i < len; i++) {\n      safeContextStr += `var ${windowContextAttr[i]} = undefined;`;\n    }\n  }\n  return Function(`${safeContextStr} \"use strict\";  ${code}`)();\n}\n// ä»£æ›¿evalçš„å‡½æ•°\nexport const parseString = string => safeEval(`return (${string})`);  \n```\n\n`parse`é‚£ä¸€å—çš„é€»è¾‘æ„Ÿè§‰æœ‰ç‚¹ç²—ç³™ï¼Œä½†å¯ä»¥ç”¨ï¼Œäºæ˜¯ä¹ç»™æŠ„äº†è¿‡æ¥ã€‚\n\nç®€å•åšä¸€ä¸‹æ€»ç»“ï¼Œå°±æ˜¯æˆ‘ä»¬åœ¨å¹³å¸¸å†™ä»£ç çš„æ—¶å€™ï¼Œè¿˜æ˜¯è¦å¤šæ€è€ƒï¼Œçœ‹çœ‹èƒ½å¦è®©ä»£ç å˜å¾—æ›´ç®€æ´ï¼Œé€šè¿‡æ¸è¿›å¼çš„æ–¹æ¡ˆæ¥æ”¹é©ä»£ç ï¼Œè€Œéä¸€è¹´è€Œå°±ã€‚", "user_name": "henryzp", "description": "", "got_view_count": 6720, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "Java", "concern_user_count": 252044, "user_id": "2796746683483751", "title": "Java8ä¸­ä½ å¯èƒ½ä¸çŸ¥é“çš„ä¸€äº›åœ°æ–¹ä¹‹Streamå®æˆ˜äºŒ", "mark_content": "<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #40B8FA;\"><span class=\"prefix\" style=\"display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://my-wechat.mdnice.com/fullstack-1.png); margin-bottom: -22px;\"></span><span class=\"content\" style=\"display: flex; color: #40B8FA; font-size: 20px; margin-left: 25px;\">æµçš„ç»ˆæ­¢æ“ä½œ</span><span class=\"suffix\" style=\"display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(64, 184, 250, .5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;\"></span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ç»ˆæ­¢æ“ä½œä¼šä»æµçš„æµæ°´çº¿ç”Ÿæˆç»“æœã€‚å…¶ç»“æœæ˜¯ä»»ä½•ä¸æ˜¯æµçš„å€¼ï¼Œæ¯”å¦‚å¸¸è§çš„Listã€ Integerï¼Œç”š è‡³voidç­‰ç»“æœã€‚å¯¹äºæµçš„ç»ˆæ­¢æ“ä½œï¼Œåˆ†ä¸ºä»¥ä¸‹ä¸‰ç±»:</p>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://cushier.coding.net/p/picture/d/picture/git/raw/master/20200810161612.png\" alt style=\"max-width: 100%; border-radius: 6px; display: block; margin: 20px auto; object-fit: contain; box-shadow: 2px 4px 7px #999;\"></figure>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #40B8FA;\"><span class=\"prefix\" style=\"display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://my-wechat.mdnice.com/fullstack-1.png); margin-bottom: -22px;\"></span><span class=\"content\" style=\"display: flex; color: #40B8FA; font-size: 20px; margin-left: 25px;\">æŸ¥æ‰¾ä¸åŒ¹é…</span><span class=\"suffix\" style=\"display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(64, 184, 250, .5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;\"></span></h2>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">ç­›é€‰æœ‰æ•ˆè®¢å• åŒ¹é…æ˜¯å¦å…¨éƒ¨ä¸ºå·²æ”¯ä»˜è®¢å•</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; background: #282c34; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\">&nbsp;<span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;ç­›é€‰æœ‰æ•ˆè®¢å•&nbsp;åŒ¹é…æ˜¯å¦å…¨éƒ¨ä¸ºå·²æ”¯ä»˜è®¢å•</span><br>System.out.println(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"allMatchåŒ¹é…ç»“æœ:\"</span>&nbsp;+&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ordersList.stream()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.filter((order)&nbsp;-&gt;&nbsp;order.getIsValid()&nbsp;==&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.allMatch((o)&nbsp;-&gt;&nbsp;o.getStatus()&nbsp;!=&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">0</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<br></code></pre>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">ç­›é€‰æœ‰æ•ˆè®¢å• åŒ¹é…æ˜¯å¦å­˜åœ¨æœªæ”¯ä»˜è®¢å•</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; background: #282c34; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\"><span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;ç­›é€‰æœ‰æ•ˆè®¢å•&nbsp;åŒ¹é…æ˜¯å¦å­˜åœ¨æœªæ”¯ä»˜è®¢å•</span><br>System.out.println(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"anyMatchåŒ¹é…ç»“æœ:\"</span>&nbsp;+&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ordersList.stream()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.filter((order)&nbsp;-&gt;&nbsp;order.getIsValid()&nbsp;==&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.anyMatch((o)&nbsp;-&gt;&nbsp;o.getStatus()&nbsp;==&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">0</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<br></code></pre>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">ç­›é€‰æœ‰æ•ˆè®¢å• å…¨éƒ¨æœªå®Œæˆè®¢å•</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; background: #282c34; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\"><span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;ç­›é€‰æœ‰æ•ˆè®¢å•&nbsp;å…¨éƒ¨æœªå®Œæˆè®¢å•</span><br>System.out.println(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"noneMatchåŒ¹é…ç»“æœ:\"</span>&nbsp;+&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ordersList.stream()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.filter((order)&nbsp;-&gt;&nbsp;order.getIsValid()&nbsp;==&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.noneMatch((o)&nbsp;-&gt;&nbsp;o.getStatus()&nbsp;==&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">5</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<br></code></pre>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">ç­›é€‰æœ‰æ•ˆè®¢å• è¿”å›ç¬¬ä¸€æ¡è®¢å•</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; background: #282c34; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\">&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;ç­›é€‰æœ‰æ•ˆè®¢å•&nbsp;è¿”å›ç¬¬ä¸€æ¡è®¢å•</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"findAnyåŒ¹é…ç»“æœ:\"</span>+<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ordersList.stream()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.filter((order)&nbsp;-&gt;&nbsp;order.getIsValid()&nbsp;==&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.findAny()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.get()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<br></code></pre>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">ç­›é€‰æ‰€æœ‰æœ‰æ•ˆè®¢å• è¿”å›è®¢å•æ€»æ•°</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; background: #282c34; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\"><span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;&nbsp;ç­›é€‰æ‰€æœ‰æœ‰æ•ˆè®¢å•&nbsp;è¿”å›è®¢å•æ€»æ•°</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"countç»“æœ:\"</span>&nbsp;+&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ordersList.stream()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.filter((order)&nbsp;-&gt;&nbsp;order.getIsValid()&nbsp;==&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.count()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<br></code></pre>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">ç­›é€‰æœ‰æ•ˆè®¢å• è¿”å›é‡‘é¢æœ€å¤§è®¢å•é‡‘é¢</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; background: #282c34; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\"><span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;ç­›é€‰æœ‰æ•ˆè®¢å•&nbsp;è¿”å›é‡‘é¢æœ€å¤§è®¢å•é‡‘é¢</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"è®¢å•é‡‘é¢æœ€å¤§å€¼:\"</span>&nbsp;+&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ordersList.stream()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.filter((order)&nbsp;-&gt;&nbsp;order.getIsValid()&nbsp;==&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.map(Order::getTotal)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.max(Double::compare)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.get()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<br></code></pre>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">ç­›é€‰æœ‰æ•ˆè®¢å• è¿”å›é‡‘é¢æœ€å°è®¢å•é‡‘é¢</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; background: #282c34; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\"><span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;ç­›é€‰æœ‰æ•ˆè®¢å•&nbsp;è¿”å›é‡‘é¢æœ€å°è®¢å•é‡‘é¢</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"è®¢å•é‡‘é¢æœ€å°å€¼:\"</span>&nbsp;+&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ordersList.stream()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.filter((order)&nbsp;-&gt;&nbsp;order.getIsValid()&nbsp;==&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.map(Order::getTotal)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.min(Double::compare)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.get()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<br></code></pre>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #40B8FA;\"><span class=\"prefix\" style=\"display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://my-wechat.mdnice.com/fullstack-1.png); margin-bottom: -22px;\"></span><span class=\"content\" style=\"display: flex; color: #40B8FA; font-size: 20px; margin-left: 25px;\">å½’çº¦&amp;æ”¶é›†</span><span class=\"suffix\" style=\"display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(64, 184, 250, .5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;\"></span></h2>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding: 0px; color: black; font-size: 17px; font-weight: bold; text-align: center; position: relative; margin-top: 20px; margin-bottom: 20px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid RGBA(79, 177, 249, .65); color: #2b2b2b; padding-bottom: 2px;\"><span style=\"width: 30px; height: 30px; display: block; background-image: url(https://my-wechat.mdnice.com/fullstack-2.png); background-position: center; background-size: 30px; margin: auto; opacity: 1; background-repeat: no-repeat; margin-bottom: -8px;\"></span>1 å½’çº¦</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å°†æµä¸­å…ƒç´ åå¤ç»“åˆèµ·æ¥ï¼Œå¾—åˆ°ä¸€ä¸ªå€¼çš„æ“ä½œ</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">è®¡ç®—æœ‰æ•ˆè®¢å•æ€»é‡‘é¢</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; background: #282c34; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\"><span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;è®¡ç®—æœ‰æ•ˆè®¢å•æ€»é‡‘é¢</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"æœ‰æ•ˆè®¢å•æ€»é‡‘é¢:\"</span>&nbsp;+&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ordersList.stream()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.filter((order)&nbsp;-&gt;&nbsp;order.getIsValid()&nbsp;==&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.map(Order::getTotal)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.reduce(Double::sum)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.get()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<br></code></pre>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding: 0px; color: black; font-size: 17px; font-weight: bold; text-align: center; position: relative; margin-top: 20px; margin-bottom: 20px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid RGBA(79, 177, 249, .65); color: #2b2b2b; padding-bottom: 2px;\"><span style=\"width: 30px; height: 30px; display: block; background-image: url(https://my-wechat.mdnice.com/fullstack-2.png); background-position: center; background-size: 30px; margin: auto; opacity: 1; background-repeat: no-repeat; margin-bottom: -8px;\"></span>2 Collectoræ•°æ®æ”¶é›†</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å°†æµè½¬æ¢ä¸ºå…¶ä»–å½¢å¼ï¼Œcoollect æ–¹æ³•ä½œä¸ºç»ˆç«¯æ“ä½œï¼Œ æ¥æ”¶ä¸€ä¸ªCollectoræ¥å£çš„å®ç°ï¼Œç”¨äºç»™Streamä¸­å…ƒç´ åšæ±‡æ€»çš„æ–¹æ³•ã€‚æœ€å¸¸ç”¨çš„æ–¹æ³•ï¼ŒæŠŠæµä¸­æ‰€æœ‰å…ƒç´ æ”¶é›†åˆ°ä¸€ä¸ª List, Set æˆ– Collectionä¸­ã€‚</p>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding: 0px; color: black; font-size: 17px; font-weight: bold; text-align: center; position: relative; margin-top: 20px; margin-bottom: 20px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid RGBA(79, 177, 249, .65); color: #2b2b2b; padding-bottom: 2px;\"><span style=\"width: 30px; height: 30px; display: block; background-image: url(https://my-wechat.mdnice.com/fullstack-2.png); background-position: center; background-size: 30px; margin: auto; opacity: 1; background-repeat: no-repeat; margin-bottom: -8px;\"></span>3 é›†åˆæ”¶é›†</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å¸¸ç”¨é›†åˆæ”¶é›†æ–¹æ³• toListã€toSetã€toCollectionã€toMapç­‰</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">ç­›é€‰æ‰€æœ‰æœ‰æ•ˆè®¢å• å¹¶æ”¶é›†è®¢å•åˆ—è¡¨</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; background: #282c34; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\"><span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;ç­›é€‰æ‰€æœ‰æœ‰æ•ˆè®¢å•å¹¶æ”¶é›†è®¢å•åˆ—è¡¨</span><br>ordersList.stream()<br>&nbsp;&nbsp;&nbsp;&nbsp;.filter((order)&nbsp;-&gt;&nbsp;order.getIsValid()&nbsp;==&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;.collect(Collectors.toList())<br>&nbsp;&nbsp;&nbsp;&nbsp;.forEach(System.out::println);<br></code></pre>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">ç­›é€‰æ‰€æœ‰æœ‰æ•ˆè®¢å•å¹¶æ”¶é›†è®¢å•å·ä¸è®¢å•é‡‘é¢</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; background: #282c34; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\"><span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;ç­›é€‰æ‰€æœ‰æœ‰æ•ˆè®¢å•&nbsp;å¹¶æ”¶é›†è®¢å•å·&nbsp;ä¸&nbsp;è®¢å•é‡‘é¢</span><br>Map&lt;String,Double&gt;&nbsp;map=ordersList.stream().filter((order)&nbsp;-&gt;&nbsp;order.getIsValid()&nbsp;==&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>).<br>&nbsp;&nbsp;&nbsp;&nbsp;collect(Collectors.toMap(Order::getOrderNo,&nbsp;Order::getTotal));<br><span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;java8&nbsp;ä¸‹å¯¹mapè¿›è¡Œéå†æ“ä½œ&nbsp;å¦‚æœ&nbsp;Mapçš„Keyé‡å¤,ä¼šæŠ¥é”™</span><br>map.forEach((k,v)-&gt;{<br>&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"k:\"</span>+k+<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\":v:\"</span>+v);<br>});<br></code></pre>\n", "user_name": "åŒä¸€ç‰‡è“å¤©ä¸‹", "description": "ä¸€ä¸ªå‘†èŒã®å°å°ç¨‹åºå‘˜", "got_view_count": 2080, "category_name": "åç«¯", "ctime": 1457483880}
{"tag_name": "Go", "concern_user_count": 75376, "user_id": "3087084382347271", "title": "ä½¿ç”¨Goå®ç°GoFçš„23ç§è®¾è®¡æ¨¡å¼ï¼ˆä¸€ï¼‰", "mark_content": "## å‰è¨€\n\nä»1995å¹´GoFæå‡º23ç§**è®¾è®¡æ¨¡å¼**åˆ°ç°åœ¨ï¼Œ25å¹´è¿‡å»äº†ï¼Œè®¾è®¡æ¨¡å¼ä¾æ—§æ˜¯è½¯ä»¶é¢†åŸŸçš„çƒ­é—¨è¯é¢˜ã€‚åœ¨å½“ä¸‹ï¼Œå¦‚æœä½ ä¸ä¼šä¸€ç‚¹è®¾è®¡æ¨¡å¼ï¼Œéƒ½ä¸å¥½æ„æ€è¯´è‡ªå·±æ˜¯ä¸€ä¸ªåˆæ ¼çš„ç¨‹åºå‘˜ã€‚è®¾è®¡æ¨¡å¼é€šå¸¸è¢«å®šä¹‰ä¸ºï¼š\n\n> è®¾è®¡æ¨¡å¼ï¼ˆDesign Patternï¼‰æ˜¯ä¸€å¥—è¢«åå¤ä½¿ç”¨ã€å¤šæ•°äººçŸ¥æ™“çš„ã€ç»è¿‡åˆ†ç±»ç¼–ç›®çš„ã€ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“ï¼Œä½¿ç”¨è®¾è®¡æ¨¡å¼æ˜¯ä¸ºäº†å¯é‡ç”¨ä»£ç ã€è®©ä»£ç æ›´å®¹æ˜“è¢«ä»–äººç†è§£å¹¶ä¸”ä¿è¯ä»£ç å¯é æ€§ã€‚\n\nä»å®šä¹‰ä¸Šçœ‹ï¼Œ**è®¾è®¡æ¨¡å¼å…¶å®æ˜¯ä¸€ç§ç»éªŒçš„æ€»ç»“ï¼Œæ˜¯é’ˆå¯¹ç‰¹å®šé—®é¢˜çš„ç®€æ´è€Œä¼˜é›…çš„è§£å†³æ–¹æ¡ˆ**ã€‚æ—¢ç„¶æ˜¯ç»éªŒæ€»ç»“ï¼Œé‚£ä¹ˆå­¦ä¹ è®¾è®¡æ¨¡å¼æœ€ç›´æ¥çš„å¥½å¤„å°±åœ¨äºå¯ä»¥ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šè§£å†³è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­çš„ä¸€äº›ç‰¹å®šé—®é¢˜ã€‚ç„¶è€Œï¼Œå­¦ä¹ è®¾è®¡æ¨¡å¼çš„æœ€é«˜å¢ƒç•Œæ˜¯ä¹ å¾—å…¶ä¸­è§£å†³é—®é¢˜æ‰€ç”¨åˆ°çš„æ€æƒ³ï¼Œå½“ä½ æŠŠå®ƒä»¬çš„æœ¬è´¨æ€æƒ³åƒé€äº†ï¼Œä¹Ÿå°±èƒ½åšåˆ°**å³ä½¿å·²ç»å¿˜æ‰æŸä¸ªè®¾è®¡æ¨¡å¼çš„åç§°å’Œç»“æ„ï¼Œä¹Ÿèƒ½åœ¨è§£å†³ç‰¹å®šé—®é¢˜æ—¶ä¿¡æ‰‹æ‹ˆæ¥**ã€‚\n\nå¥½çš„ä¸œè¥¿æœ‰äººå¹æ§ï¼Œå½“ç„¶ä¹Ÿä¼šæ‹›é»‘ã€‚è®¾è®¡æ¨¡å¼è¢«æŠ¨å‡»ä¸»è¦å› ä¸ºä»¥ä¸‹ä¸¤ç‚¹ï¼š\n\n1ã€*è®¾è®¡æ¨¡å¼ä¼šå¢åŠ ä»£ç é‡ï¼ŒæŠŠç¨‹åºé€»è¾‘å˜å¾—å¤æ‚*ã€‚è¿™ä¸€ç‚¹æ˜¯ä¸å¯é¿å…çš„ï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶ä¸èƒ½ä»…ä»…åªè€ƒè™‘å¼€å‘é˜¶æ®µçš„æˆæœ¬ã€‚æœ€ç®€å•çš„ç¨‹åºå½“ç„¶æ˜¯ä¸€ä¸ªå‡½æ•°ä»å¤´å†™åˆ°å°¾ï¼Œä½†æ˜¯è¿™æ ·åæœŸçš„ç»´æŠ¤æˆæœ¬ä¼šå˜å¾—éå¸¸å¤§ï¼›è€Œè®¾è®¡æ¨¡å¼è™½ç„¶å¢åŠ äº†ä¸€ç‚¹å¼€å‘æˆæœ¬ï¼Œä½†æ˜¯èƒ½è®©äººä»¬å†™å‡ºå¯å¤ç”¨ã€å¯ç»´æŠ¤æ€§é«˜çš„ç¨‹åºã€‚å¼•ç”¨ã€Šè½¯ä»¶è®¾è®¡çš„å“²å­¦ã€‹é‡Œçš„æ¦‚å¿µï¼Œå‰è€…å°±æ˜¯**æˆ˜æœ¯ç¼–ç¨‹**ï¼Œåè€…å°±æ˜¯**æˆ˜ç•¥ç¼–ç¨‹**ï¼Œæˆ‘ä»¬åº”è¯¥**å¯¹æˆ˜æœ¯ç¼–ç¨‹Say No**ï¼ï¼ˆè¯·ç§»æ­¥[ã€Šä¸€æ­¥æ­¥é™ä½è½¯ä»¶å¤æ‚æ€§ã€‹](https://www.yrunz.com/archives/ä¸€æ­¥æ­¥é™ä½è½¯ä»¶å¤æ‚æ€§)ï¼‰\n\n2ã€*æ»¥ç”¨è®¾è®¡æ¨¡å¼*ã€‚è¿™æ˜¯åˆå­¦è€…æœ€å®¹æ˜“çŠ¯çš„é”™è¯¯ï¼Œå½“å­¦åˆ°ä¸€ä¸ªæ¨¡å¼æ—¶ï¼Œæ¨ä¸å¾—åœ¨æ‰€æœ‰çš„ä»£ç éƒ½ç”¨ä¸Šï¼Œä»è€Œåœ¨ä¸è¯¥ä½¿ç”¨æ¨¡å¼çš„åœ°æ–¹åˆ»æ„åœ°ä½¿ç”¨äº†æ¨¡å¼ï¼Œå¯¼è‡´äº†ç¨‹åºå˜å¾—å¼‚å¸¸å¤æ‚ã€‚å…¶å®æ¯ä¸ªè®¾è®¡æ¨¡å¼éƒ½æœ‰å‡ ä¸ªå…³é”®è¦ç´ ï¼š**é€‚ç”¨åœºæ™¯**ã€**è§£å†³æ–¹æ³•**ã€**ä¼˜ç¼ºç‚¹**ã€‚æ¨¡å¼å¹¶ä¸æ˜¯ä¸‡èƒ½è¯ï¼Œå®ƒåªæœ‰åœ¨ç‰¹å®šçš„é—®é¢˜ä¸Šæ‰èƒ½æ˜¾ç°å‡ºæ•ˆæœã€‚æ‰€ä»¥ï¼Œåœ¨ä½¿ç”¨ä¸€ä¸ªæ¨¡å¼å‰ï¼Œå…ˆé—®é—®è‡ªå·±ï¼Œå½“å‰çš„è¿™ä¸ªåœºæ™¯é€‚ç”¨è¿™ä¸ªæ¨¡å¼å—ï¼Ÿ\n\nã€Šè®¾è®¡æ¨¡å¼ã€‹ä¸€ä¹¦çš„å‰¯æ ‡é¢˜æ˜¯â€œå¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶çš„åŸºç¡€â€ï¼Œä½†å¹¶ä¸æ„å‘³ç€åªæœ‰é¢å‘å¯¹è±¡è¯­è¨€æ‰èƒ½ä½¿ç”¨è®¾è®¡æ¨¡å¼ã€‚æ¨¡å¼åªæ˜¯ä¸€ç§è§£å†³ç‰¹å®šé—®é¢˜çš„æ€æƒ³ï¼Œè·Ÿè¯­è¨€æ— å…³ã€‚å°±åƒGoè¯­è¨€ä¸€æ ·ï¼Œå®ƒå¹¶éæ˜¯åƒC++å’ŒJavaä¸€æ ·çš„é¢å‘å¯¹è±¡è¯­è¨€ï¼Œä½†æ˜¯è®¾è®¡æ¨¡å¼åŒæ ·é€‚ç”¨ã€‚æœ¬ç³»åˆ—æ–‡ç« å°†ä½¿ç”¨Goè¯­è¨€æ¥å®ç°GoFæå‡ºçš„23ç§è®¾è®¡æ¨¡å¼ï¼ŒæŒ‰ç…§**åˆ›å»ºå‹æ¨¡å¼**ï¼ˆCreational Patternï¼‰ã€**ç»“æ„å‹æ¨¡å¼**ï¼ˆStructural Patternï¼‰å’Œ**è¡Œä¸ºå‹æ¨¡å¼**ï¼ˆBehavioral Patternï¼‰ä¸‰ç§ç±»åˆ«è¿›è¡Œç»„ç»‡ï¼Œæ–‡æœ¬ä¸»è¦ä»‹ç»å…¶ä¸­çš„åˆ›å»ºå‹æ¨¡å¼ã€‚\n\n## å•ä¾‹æ¨¡å¼ï¼ˆSingleton Patternï¼‰\n\n![å•ä¾‹æ¨¡å¼ç»“æ„](https://tva1.sinaimg.cn/large/007S8ZIlgy1ghky3yanabj318q0iwnpd.jpg)\n\n### ç®€è¿°\n\nå•ä¾‹æ¨¡å¼ç®—æ˜¯23ä¸­è®¾è®¡æ¨¡å¼é‡Œæœ€ç®€å•çš„ä¸€ä¸ªäº†ï¼Œå®ƒä¸»è¦ç”¨äº**ä¿è¯ä¸€ä¸ªç±»ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„å…¨å±€è®¿é—®ç‚¹**ã€‚\n\nåœ¨ç¨‹åºè®¾è®¡ä¸­ï¼Œæœ‰ä¸€äº›å¯¹è±¡é€šå¸¸æˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªå…±äº«çš„å®ä¾‹ï¼Œæ¯”å¦‚çº¿ç¨‹æ± ã€å…¨å±€ç¼“å­˜ã€å¯¹è±¡æ± ç­‰ï¼Œè¿™ç§åœºæ™¯ä¸‹å°±é€‚åˆä½¿ç”¨å•ä¾‹æ¨¡å¼ã€‚\n\nä½†æ˜¯ï¼Œå¹¶éæ‰€æœ‰å…¨å±€å”¯ä¸€çš„åœºæ™¯éƒ½é€‚åˆä½¿ç”¨å•ä¾‹æ¨¡å¼ã€‚æ¯”å¦‚ï¼Œè€ƒè™‘éœ€è¦ç»Ÿè®¡ä¸€ä¸ªAPIè°ƒç”¨çš„æƒ…å†µï¼Œæœ‰ä¸¤ä¸ªæŒ‡æ ‡ï¼ŒæˆåŠŸè°ƒç”¨æ¬¡æ•°å’Œå¤±è´¥è°ƒç”¨æ¬¡æ•°ã€‚è¿™ä¸¤ä¸ªæŒ‡æ ‡éƒ½æ˜¯å…¨å±€å”¯ä¸€çš„ï¼Œæ‰€ä»¥æœ‰äººå¯èƒ½ä¼šå°†å…¶å»ºæ¨¡æˆä¸¤ä¸ªå•ä¾‹`SuccessApiMetric`å’Œ`FailApiMetric`ã€‚æŒ‰ç…§è¿™ä¸ªæ€è·¯ï¼Œéšç€æŒ‡æ ‡æ•°é‡çš„å¢å¤šï¼Œä½ ä¼šå‘ç°ä»£ç é‡Œç±»çš„å®šä¹‰ä¼šè¶Šæ¥è¶Šå¤šï¼Œä¹Ÿè¶Šæ¥è¶Šè‡ƒè‚¿ã€‚è¿™ä¹Ÿæ˜¯å•ä¾‹æ¨¡å¼æœ€å¸¸è§çš„è¯¯ç”¨åœºæ™¯ï¼Œæ›´å¥½çš„æ–¹æ³•æ˜¯å°†ä¸¤ä¸ªæŒ‡æ ‡è®¾è®¡æˆä¸€ä¸ªå¯¹è±¡`ApiMetric`ä¸‹çš„ä¸¤ä¸ªå®ä¾‹`ApiMetic success`å’Œ`ApiMetic fail`ã€‚\n\n*å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦åº”è¯¥è¢«å»ºæ¨¡æˆå•ä¾‹ï¼Ÿ*\n\né€šå¸¸ï¼Œè¢«å»ºæ¨¡æˆå•ä¾‹çš„å¯¹è±¡éƒ½æœ‰â€œ**ä¸­å¿ƒç‚¹**â€çš„å«ä¹‰ï¼Œæ¯”å¦‚çº¿ç¨‹æ± å°±æ˜¯ç®¡ç†æ‰€æœ‰çº¿ç¨‹çš„ä¸­å¿ƒã€‚æ‰€ä»¥ï¼Œåœ¨åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦é€‚åˆå•ä¾‹æ¨¡å¼æ—¶ï¼Œå…ˆæ€è€ƒä¸‹ï¼Œè¿™ä¸ªå¯¹è±¡æ˜¯ä¸€ä¸ªä¸­å¿ƒç‚¹å—ï¼Ÿ\n\n### Goå®ç°\n\nåœ¨å¯¹æŸä¸ªå¯¹è±¡å®ç°å•ä¾‹æ¨¡å¼æ—¶ï¼Œæœ‰ä¸¤ä¸ªç‚¹å¿…é¡»è¦æ³¨æ„ï¼šï¼ˆ1ï¼‰**é™åˆ¶è°ƒç”¨è€…ç›´æ¥å®ä¾‹åŒ–è¯¥å¯¹è±¡**ï¼›ï¼ˆ2ï¼‰**ä¸ºè¯¥å¯¹è±¡çš„å•ä¾‹æä¾›ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„è®¿é—®æ–¹æ³•**ã€‚\n\nå¯¹äºC++/Javaè€Œè¨€ï¼Œåªéœ€æŠŠç±»çš„æ„é€ å‡½æ•°è®¾è®¡æˆç§æœ‰çš„ï¼Œå¹¶æä¾›ä¸€ä¸ª`static`æ–¹æ³•å»è®¿é—®è¯¥ç±»ç‚¹å”¯ä¸€å®ä¾‹å³å¯ã€‚ä½†å¯¹äºGoè¯­è¨€æ¥è¯´ï¼Œå³æ²¡æœ‰æ„é€ å‡½æ•°çš„æ¦‚å¿µï¼Œä¹Ÿæ²¡æœ‰`static`æ–¹æ³•ï¼Œæ‰€ä»¥éœ€è¦å¦å¯»å‡ºè·¯ã€‚\n\næˆ‘ä»¬å¯ä»¥åˆ©ç”¨Goè¯­è¨€`package`çš„è®¿é—®è§„åˆ™æ¥å®ç°ï¼Œå°†å•ä¾‹ç»“æ„ä½“è®¾è®¡æˆé¦–å­—æ¯å°å†™ï¼Œå°±èƒ½é™å®šå…¶è®¿é—®èŒƒå›´åªåœ¨å½“å‰packageä¸‹ï¼Œæ¨¡æ‹Ÿäº†C++/Javaä¸­çš„ç§æœ‰æ„é€ å‡½æ•°ï¼›å†åœ¨å½“å‰`package`ä¸‹å®ç°ä¸€ä¸ªé¦–å­—æ¯å¤§å†™çš„è®¿é—®å‡½æ•°ï¼Œå°±ç›¸å½“äº`static`æ–¹æ³•çš„ä½œç”¨äº†ã€‚\n\nåœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°éœ€è¦é¢‘ç¹åˆ›å»ºå’Œé”€æ¯çš„å¯¹è±¡ã€‚é¢‘ç¹çš„åˆ›å»ºå’Œé”€æ¯ä¸€åˆ™æ¶ˆè€—CPUï¼ŒäºŒåˆ™å†…å­˜çš„åˆ©ç”¨ç‡ä¹Ÿä¸é«˜ï¼Œé€šå¸¸æˆ‘ä»¬éƒ½ä¼šä½¿ç”¨å¯¹è±¡æ± æŠ€æœ¯æ¥è¿›è¡Œä¼˜åŒ–ã€‚è€ƒè™‘æˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªæ¶ˆæ¯å¯¹è±¡æ± ï¼Œå› ä¸ºæ˜¯å…¨å±€çš„ä¸­å¿ƒç‚¹ï¼Œç®¡ç†æ‰€æœ‰çš„Messageå®ä¾‹ï¼Œæ‰€ä»¥å°†å…¶å®ç°æˆå•ä¾‹ï¼Œå®ç°ä»£ç å¦‚ä¸‹ï¼š\n\n```go\npackage msgpool\n...\n// æ¶ˆæ¯æ± \ntype messagePool struct {\n\tpool *sync.Pool\n}\n// æ¶ˆæ¯æ± å•ä¾‹\nvar msgPool = &messagePool{\n\t// å¦‚æœæ¶ˆæ¯æ± é‡Œæ²¡æœ‰æ¶ˆæ¯ï¼Œåˆ™æ–°å»ºä¸€ä¸ªCountå€¼ä¸º0çš„Messageå®ä¾‹\n\tpool: &sync.Pool{New: func() interface{} { return &Message{Count: 0} }},\n}\n// è®¿é—®æ¶ˆæ¯æ± å•ä¾‹çš„å”¯ä¸€æ–¹æ³•\nfunc Instance() *messagePool {\n\treturn msgPool\n}\n// å¾€æ¶ˆæ¯æ± é‡Œæ·»åŠ æ¶ˆæ¯\nfunc (m *messagePool) AddMsg(msg *Message) {\n\tm.pool.Put(msg)\n}\n// ä»æ¶ˆæ¯æ± é‡Œè·å–æ¶ˆæ¯\nfunc (m *messagePool) GetMsg() *Message {\n\treturn m.pool.Get().(*Message)\n}\n...\n```\n\næµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š\n\n```go\npackage test\n...\nfunc TestMessagePool(t *testing.T) {\n\tmsg0 := msgpool.Instance().GetMsg()\n\tif msg0.Count != 0 {\n\t\tt.Errorf(\"expect msg count %d, but actual %d.\", 0, msg0.Count)\n\t}\n\tmsg0.Count = 1\n\tmsgpool.Instance().AddMsg(msg0)\n\tmsg1 := msgpool.Instance().GetMsg()\n\tif msg1.Count != 1 {\n\t\tt.Errorf(\"expect msg count %d, but actual %d.\", 1, msg1.Count)\n\t}\n}\n// è¿è¡Œç»“æœ\n=== RUN   TestMessagePool\n--- PASS: TestMessagePool (0.00s)\nPASS\n```\n\nä»¥ä¸Šçš„å•ä¾‹æ¨¡å¼å°±æ˜¯å…¸å‹çš„â€œ**é¥¿æ±‰æ¨¡å¼**â€ï¼Œå®ä¾‹åœ¨ç³»ç»ŸåŠ è½½çš„æ—¶å€™å°±å·²ç»å®Œæˆäº†åˆå§‹åŒ–ã€‚å¯¹åº”åœ°ï¼Œè¿˜æœ‰ä¸€ç§â€œ**æ‡’æ±‰æ¨¡å¼**â€ï¼Œåªæœ‰ç­‰åˆ°å¯¹è±¡è¢«ä½¿ç”¨çš„æ—¶å€™ï¼Œæ‰ä¼šå»åˆå§‹åŒ–å®ƒï¼Œä»è€Œä¸€å®šç¨‹åº¦ä¸ŠèŠ‚çœäº†å†…å­˜ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼Œâ€œæ‡’æ±‰æ¨¡å¼â€ä¼šå¸¦æ¥çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡**æ™®é€šåŠ é”**ï¼Œæˆ–è€…æ›´é«˜æ•ˆçš„**åŒé‡æ£€éªŒé”**æ¥ä¼˜åŒ–ã€‚å¯¹äºâ€œæ‡’æ±‰æ¨¡å¼â€ï¼ŒGoè¯­è¨€æœ‰ä¸€ä¸ªæ›´ä¼˜é›…çš„å®ç°æ–¹å¼ï¼Œé‚£å°±æ˜¯åˆ©ç”¨`sync.Once`ï¼Œå®ƒæœ‰ä¸€ä¸ª`Do`æ–¹æ³•ï¼Œå…¶å…¥å‚æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼ŒGoè¯­è¨€ä¼šä¿è¯ä»…ä»…åªè°ƒç”¨ä¸€æ¬¡è¯¥æ–¹æ³•ã€‚\n\n```go\n// å•ä¾‹æ¨¡å¼çš„â€œæ‡’æ±‰æ¨¡å¼â€å®ç°\npackage msgpool\n...\nvar once = &sync.Once{}\n// æ¶ˆæ¯æ± å•ä¾‹ï¼Œåœ¨é¦–æ¬¡è°ƒç”¨æ—¶åˆå§‹åŒ–\nvar msgPool *messagePool\n// å…¨å±€å”¯ä¸€è·å–æ¶ˆæ¯æ± poolåˆ°æ–¹æ³•\nfunc Instance() *messagePool {\n\t// åœ¨åŒ¿åå‡½æ•°ä¸­å®ç°åˆå§‹åŒ–é€»è¾‘ï¼ŒGoè¯­è¨€ä¿è¯åªä¼šè°ƒç”¨ä¸€æ¬¡\n\tonce.Do(func() {\n\t\tmsgPool = &messagePool{\n\t\t\t// å¦‚æœæ¶ˆæ¯æ± é‡Œæ²¡æœ‰æ¶ˆæ¯ï¼Œåˆ™æ–°å»ºä¸€ä¸ªCountå€¼ä¸º0çš„Messageå®ä¾‹\n\t\t\tpool: &sync.Pool{New: func() interface{} { return &Message{Count: 0} }},\n\t\t}\n\t})\n\treturn msgPool\n}\n...\n```\n\n## å»ºé€ è€…æ¨¡å¼ï¼ˆBuilder Patternï¼‰\n\n![å»ºé€ è€…æ¨¡å¼ç»“æ„](https://tva1.sinaimg.cn/large/007S8ZIlgy1ghky4kprezj319e0kuu0x.jpg)\n\n### ç®€è¿°\n\nåœ¨ç¨‹åºè®¾è®¡ä¸­ï¼Œæˆ‘ä»¬ä¼šç»å¸¸é‡åˆ°ä¸€äº›å¤æ‚çš„å¯¹è±¡ï¼Œå…¶ä¸­æœ‰å¾ˆå¤šæˆå‘˜å±æ€§ï¼Œç”šè‡³åµŒå¥—ç€å¤šä¸ªå¤æ‚çš„å¯¹è±¡ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œåˆ›å»ºè¿™ä¸ªå¤æ‚å¯¹è±¡å°±ä¼šå˜å¾—å¾ˆç¹çã€‚å¯¹äºC++/Javaè€Œè¨€ï¼Œæœ€å¸¸è§çš„è¡¨ç°å°±æ˜¯æ„é€ å‡½æ•°æœ‰ç€é•¿é•¿çš„å‚æ•°åˆ—è¡¨ï¼š\n\n```java\nMyObject obj = new MyObject(param1, param2, param3, param4, param5, param6, ...)\n```\n\nè€Œå¯¹äºGoè¯­è¨€æ¥è¯´ï¼Œæœ€å¸¸è§çš„è¡¨ç°å°±æ˜¯å¤šå±‚çš„åµŒå¥—å®ä¾‹åŒ–ï¼š\n\n```go\nobj := &MyObject{\n  Field1: &Field1 {\n    Param1: &Param1 {\n      Val: 0,\n    },\n    Param2: &Param2 {\n      Val: 1,\n    },\n    ...\n  },\n  Field2: &Field2 {\n    Param3: &Param3 {\n      Val: 2,\n    },\n    ...\n  },\n  ...\n}\n```\n\nä¸Šè¿°çš„å¯¹è±¡åˆ›å»ºæ–¹æ³•æœ‰ä¸¤ä¸ªæ˜æ˜¾çš„ç¼ºç‚¹ï¼šï¼ˆ1ï¼‰**å¯¹å¯¹è±¡ä½¿ç”¨è€…ä¸å‹å¥½**ï¼Œä½¿ç”¨è€…åœ¨åˆ›å»ºå¯¹è±¡æ—¶éœ€è¦çŸ¥é“çš„ç»†èŠ‚å¤ªå¤šï¼›ï¼ˆ2ï¼‰**ä»£ç å¯è¯»æ€§å¾ˆå·®**ã€‚\n\n*é’ˆå¯¹è¿™ç§å¯¹è±¡æˆå‘˜è¾ƒå¤šï¼Œåˆ›å»ºå¯¹è±¡é€»è¾‘è¾ƒä¸ºç¹ççš„åœºæ™¯ï¼Œå°±é€‚åˆä½¿ç”¨å»ºé€ è€…æ¨¡å¼æ¥è¿›è¡Œä¼˜åŒ–ã€‚*\n\nå»ºé€ è€…æ¨¡å¼çš„ä½œç”¨æœ‰å¦‚ä¸‹å‡ ä¸ªï¼š\n\n1ã€å°è£…å¤æ‚å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ï¼Œä½¿å¯¹è±¡ä½¿ç”¨è€…ä¸æ„ŸçŸ¥å¤æ‚çš„åˆ›å»ºé€»è¾‘ã€‚\n\n2ã€å¯ä»¥ä¸€æ­¥æ­¥æŒ‰ç…§é¡ºåºå¯¹æˆå‘˜è¿›è¡Œèµ‹å€¼ï¼Œæˆ–è€…åˆ›å»ºåµŒå¥—å¯¹è±¡ï¼Œå¹¶æœ€ç»ˆå®Œæˆç›®æ ‡å¯¹è±¡çš„åˆ›å»ºã€‚\n\n3ã€å¯¹å¤šä¸ªå¯¹è±¡å¤ç”¨åŒæ ·çš„å¯¹è±¡åˆ›å»ºé€»è¾‘ã€‚\n\nå…¶ä¸­ï¼Œç¬¬1å’Œç¬¬2ç‚¹æ¯”è¾ƒå¸¸ç”¨ï¼Œä¸‹é¢å¯¹å»ºé€ è€…æ¨¡å¼çš„å®ç°ä¹Ÿä¸»è¦æ˜¯é’ˆå¯¹è¿™ä¸¤ç‚¹è¿›è¡Œç¤ºä¾‹ã€‚\n\n### Goå®ç°\n\nè€ƒè™‘å¦‚ä¸‹çš„ä¸€ä¸ª`Message`ç»“æ„ä½“ï¼Œå…¶ä¸»è¦æœ‰`Header`å’Œ`Body`ç»„æˆï¼š\n\n```go\npackage msg\n...\ntype Message struct {\n\tHeader *Header\n\tBody   *Body\n}\ntype Header struct {\n\tSrcAddr  string\n\tSrcPort  uint64\n\tDestAddr string\n\tDestPort uint64\n\tItems    map[string]string\n}\ntype Body struct {\n\tItems []string\n}\n...\n```\n\nå¦‚æœæŒ‰ç…§ç›´æ¥çš„å¯¹è±¡åˆ›å»ºæ–¹å¼ï¼Œåˆ›å»ºé€»è¾‘åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š\n\n```go\n// å¤šå±‚çš„åµŒå¥—å®ä¾‹åŒ–\nmessage := msg.Message{\n\tHeader: &msg.Header{\n\t\tSrcAddr:  \"192.168.0.1\",\n\t\tSrcPort:  1234,\n\t\tDestAddr: \"192.168.0.2\",\n\t\tDestPort: 8080,\n\t\tItems:    make(map[string]string),\n\t},\n\tBody:   &msg.Body{\n\t\tItems: make([]string, 0),\n\t},\n}\n// éœ€è¦çŸ¥é“å¯¹è±¡çš„å®ç°ç»†èŠ‚\nmessage.Header.Items[\"contents\"] = \"application/json\"\nmessage.Body.Items = append(message.Body.Items, \"record1\")\nmessage.Body.Items = append(message.Body.Items, \"record2\")\n```\n\nè™½ç„¶`Message`ç»“æ„ä½“åµŒå¥—çš„å±‚æ¬¡ä¸å¤šï¼Œä½†æ˜¯ä»å…¶åˆ›å»ºçš„ä»£ç æ¥çœ‹ï¼Œç¡®å®å­˜åœ¨**å¯¹å¯¹è±¡ä½¿ç”¨è€…ä¸å‹å¥½**å’Œ**ä»£ç å¯è¯»æ€§å·®**çš„ç¼ºç‚¹ã€‚ä¸‹é¢æˆ‘ä»¬å¼•å…¥å»ºé€ è€…æ¨¡å¼å¯¹ä»£ç è¿›è¡Œé‡æ„ï¼š\n\n```go\npackage msg\n...\n// Messageå¯¹è±¡çš„Builderå¯¹è±¡\ntype builder struct {\n\tonce *sync.Once\n\tmsg *Message\n}\n// è¿”å›Builderå¯¹è±¡\nfunc Builder() *builder {\n\treturn &builder{\n\t\tonce: &sync.Once{},\n\t\tmsg: &Message{Header: &Header{}, Body: &Body{}},\n\t}\n}\n// ä»¥ä¸‹æ˜¯å¯¹Messageæˆå‘˜å¯¹æ„å»ºæ–¹æ³•\nfunc (b *builder) WithSrcAddr(srcAddr string) *builder {\n\tb.msg.Header.SrcAddr = srcAddr\n\treturn b\n}\nfunc (b *builder) WithSrcPort(srcPort uint64) *builder {\n\tb.msg.Header.SrcPort = srcPort\n\treturn b\n}\nfunc (b *builder) WithDestAddr(destAddr string) *builder {\n\tb.msg.Header.DestAddr = destAddr\n\treturn b\n}\nfunc (b *builder) WithDestPort(destPort uint64) *builder {\n\tb.msg.Header.DestPort = destPort\n\treturn b\n}\nfunc (b *builder) WithHeaderItem(key, value string) *builder {\n  // ä¿è¯mapåªåˆå§‹åŒ–ä¸€æ¬¡\n\tb.once.Do(func() {\n\t\tb.msg.Header.Items = make(map[string]string)\n\t})\n\tb.msg.Header.Items[key] = value\n\treturn b\n}\nfunc (b *builder) WithBodyItem(record string) *builder {\n\tb.msg.Body.Items = append(b.msg.Body.Items, record)\n\treturn b\n}\n// åˆ›å»ºMessageå¯¹è±¡ï¼Œåœ¨æœ€åä¸€æ­¥è°ƒç”¨\nfunc (b *builder) Build() *Message {\n\treturn b.msg\n}\n```\n\næµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š\n\n```go\npackage test\n...\nfunc TestMessageBuilder(t *testing.T) {\n  // ä½¿ç”¨æ¶ˆæ¯å»ºé€ è€…è¿›è¡Œå¯¹è±¡åˆ›å»º\n\tmessage := msg.Builder().\n\t\tWithSrcAddr(\"192.168.0.1\").\n\t\tWithSrcPort(1234).\n\t\tWithDestAddr(\"192.168.0.2\").\n\t\tWithDestPort(8080).\n\t\tWithHeaderItem(\"contents\", \"application/json\").\n\t\tWithBodyItem(\"record1\").\n\t\tWithBodyItem(\"record2\").\n\t\tBuild()\n\tif message.Header.SrcAddr != \"192.168.0.1\" {\n\t\tt.Errorf(\"expect src address 192.168.0.1, but actual %s.\", message.Header.SrcAddr)\n\t}\n\tif message.Body.Items[0] != \"record1\" {\n\t\tt.Errorf(\"expect body item0 record1, but actual %s.\", message.Body.Items[0])\n\t}\n}\n// è¿è¡Œç»“æœ\n=== RUN   TestMessageBuilder\n--- PASS: TestMessageBuilder (0.00s)\nPASS\n```\n\nä»æµ‹è¯•ä»£ç å¯çŸ¥ï¼Œä½¿ç”¨å»ºé€ è€…æ¨¡å¼æ¥è¿›è¡Œå¯¹è±¡åˆ›å»ºï¼Œä½¿ç”¨è€…ä¸å†éœ€è¦çŸ¥é“å¯¹è±¡å…·ä½“çš„å®ç°ç»†èŠ‚ï¼Œä»£ç å¯è¯»æ€§ä¹Ÿæ›´å¥½ã€‚\n\n## å·¥å‚æ–¹æ³•æ¨¡å¼ï¼ˆFactory Method Patternï¼‰\n\n![å·¥å‚æ–¹æ³•æ¨¡å¼ç»“æ„](https://tva1.sinaimg.cn/large/007S8ZIlgy1ghkpq8hayrj31cm0sskjm.jpg)\n\n### ç®€è¿°\n\n å·¥å‚æ–¹æ³•æ¨¡å¼è·Ÿä¸Šä¸€èŠ‚è®¨è®ºçš„å»ºé€ è€…æ¨¡å¼ç±»ä¼¼ï¼Œéƒ½æ˜¯**å°†å¯¹è±¡åˆ›å»ºçš„é€»è¾‘å°è£…èµ·æ¥ï¼Œä¸ºä½¿ç”¨è€…æä¾›ä¸€ä¸ªç®€å•æ˜“ç”¨çš„å¯¹è±¡åˆ›å»ºæ¥å£**ã€‚ä¸¤è€…åœ¨åº”ç”¨åœºæ™¯ä¸Šç¨æœ‰åŒºåˆ«ï¼Œå»ºé€ è€…æ¨¡å¼æ›´å¸¸ç”¨äºéœ€è¦ä¼ é€’å¤šä¸ªå‚æ•°æ¥è¿›è¡Œå®ä¾‹åŒ–çš„åœºæ™¯ã€‚\n\nä½¿ç”¨å·¥å‚æ–¹æ³•æ¥åˆ›å»ºå¯¹è±¡ä¸»è¦æœ‰ä¸¤ä¸ªå¥½å¤„ï¼š\n\n1ã€**ä»£ç å¯è¯»æ€§æ›´å¥½**ã€‚ç›¸æ¯”äºä½¿ç”¨C++/Javaä¸­çš„æ„é€ å‡½æ•°ï¼Œæˆ–è€…Goä¸­çš„`{}`æ¥åˆ›å»ºå¯¹è±¡ï¼Œå·¥å‚æ–¹æ³•å› ä¸ºå¯ä»¥é€šè¿‡å‡½æ•°åæ¥è¡¨è¾¾ä»£ç å«ä¹‰ï¼Œä»è€Œå…·å¤‡æ›´å¥½çš„å¯è¯»æ€§ã€‚æ¯”å¦‚ï¼Œä½¿ç”¨å·¥å‚æ–¹æ³•`productA := CreateProductA()`åˆ›å»ºä¸€ä¸ª`ProductA`å¯¹è±¡ï¼Œæ¯”ç›´æ¥ä½¿ç”¨`productA := ProductA{}`çš„å¯è¯»æ€§è¦å¥½ã€‚\n\n2ã€**ä¸ä½¿ç”¨è€…ä»£ç è§£è€¦**ã€‚å¾ˆå¤šæƒ…å†µä¸‹ï¼Œå¯¹è±¡çš„åˆ›å»ºå¾€å¾€æ˜¯ä¸€ä¸ªå®¹æ˜“å˜åŒ–çš„ç‚¹ï¼Œé€šè¿‡å·¥å‚æ–¹æ³•æ¥å°è£…å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ï¼Œå¯ä»¥åœ¨åˆ›å»ºé€»è¾‘å˜æ›´æ—¶ï¼Œé¿å…**éœ°å¼¹å¼ä¿®æ”¹**ã€‚\n\nå·¥å‚æ–¹æ³•æ¨¡å¼ä¹Ÿæœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼šï¼ˆ1ï¼‰æä¾›ä¸€ä¸ªå·¥å‚å¯¹è±¡ï¼Œé€šè¿‡è°ƒç”¨å·¥å‚å¯¹è±¡çš„å·¥å‚æ–¹æ³•æ¥åˆ›å»ºäº§å“å¯¹è±¡ï¼›ï¼ˆ2ï¼‰å°†å·¥å‚æ–¹æ³•é›†æˆåˆ°äº§å“å¯¹è±¡ä¸­ï¼ˆC++/Javaä¸­å¯¹è±¡çš„`static`æ–¹æ³•ï¼ŒGoä¸­åŒä¸€`package`ä¸‹çš„å‡½æ•°ï¼‰\n\n### Goå®ç°\n\nè€ƒè™‘æœ‰ä¸€ä¸ªäº‹ä»¶å¯¹è±¡`Event`ï¼Œåˆ†åˆ«æœ‰ä¸¤ç§æœ‰æ•ˆçš„æ—¶é—´ç±»å‹`Start`å’Œ`End`ï¼š\n\n```go\npackage event\n...\ntype Type uint8\n// äº‹ä»¶ç±»å‹å®šä¹‰\nconst (\n\tStart Type = iota\n\tEnd\n)\n// äº‹ä»¶æŠ½è±¡æ¥å£\ntype Event interface {\n\tEventType() Type\n\tContent() string\n}\n// å¼€å§‹äº‹ä»¶ï¼Œå®ç°äº†Eventæ¥å£\ntype StartEvent struct{\n\tcontent string\n}\n...\n// ç»“æŸäº‹ä»¶ï¼Œå®ç°äº†Eventæ¥å£\ntype EndEvent struct{\n\tcontent string\n}\n...\n```\n\n1ã€æŒ‰ç…§ç¬¬ä¸€ç§å®ç°æ–¹å¼ï¼Œä¸º`Event`æä¾›ä¸€ä¸ªå·¥å‚å¯¹è±¡ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š\n\n```go\npackage event\n...\n// äº‹ä»¶å·¥å‚å¯¹è±¡\ntype Factory struct{}\n// æ›´å…·äº‹ä»¶ç±»å‹åˆ›å»ºå…·ä½“äº‹ä»¶\nfunc (e *Factory) Create(etype Type) Event {\n\tswitch etype {\n\tcase Start:\n\t\treturn &StartEvent{\n\t\t\tcontent: \"this is start event\",\n\t\t}\n\tcase End:\n\t\treturn &EndEvent{\n\t\t\tcontent: \"this is end event\",\n\t\t}\n\tdefault:\n\t\treturn nil\n\t}\n}\n```\n\næµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š\n\n```go\npackage test\n...\nfunc TestEventFactory(t *testing.T) {\n\tfactory := event.Factory{}\n\te := factory.Create(event.Start)\n\tif e.EventType() != event.Start {\n\t\tt.Errorf(\"expect event.Start, but actual %v.\", e.EventType())\n\t}\n\te = factory.Create(event.End)\n\tif e.EventType() != event.End {\n\t\tt.Errorf(\"expect event.End, but actual %v.\", e.EventType())\n\t}\n}\n// è¿è¡Œç»“æœ\n=== RUN   TestEventFactory\n--- PASS: TestEventFactory (0.00s)\nPASS\n```\n\n2ã€æŒ‰ç…§ç¬¬äºŒç§å®ç°æ–¹å¼ï¼Œåˆ†åˆ«ç»™`Start`å’Œ`End`ç±»å‹çš„`Event`å•ç‹¬æä¾›ä¸€ä¸ªå·¥å‚æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š\n\n```go\npackage event\n...\n// Startç±»å‹Eventçš„å·¥å‚æ–¹æ³•\nfunc OfStart() Event {\n\treturn &StartEvent{\n\t\tcontent: \"this is start event\",\n\t}\n}\n// Endç±»å‹Eventçš„å·¥å‚æ–¹æ³•\nfunc OfEnd() Event {\n\treturn &EndEvent{\n\t\tcontent: \"this is end event\",\n\t}\n}\n```\n\næµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š\n\n```go\npackage event\n...\nfunc TestEvent(t *testing.T) {\n\te := event.OfStart()\n\tif e.EventType() != event.Start {\n\t\tt.Errorf(\"expect event.Start, but actual %v.\", e.EventType())\n\t}\n\te = event.OfEnd()\n\tif e.EventType() != event.End {\n\t\tt.Errorf(\"expect event.End, but actual %v.\", e.EventType())\n\t}\n}\n// è¿è¡Œç»“æœ\n=== RUN   TestEvent\n--- PASS: TestEvent (0.00s)\nPASS\n```\n\n## æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆAbstract Factory Patternï¼‰\n\n![æŠ½è±¡å·¥å‚æ¨¡å¼ç»“æ„](https://tva1.sinaimg.cn/large/007S8ZIlgy1ghkxo5tf5ij31ak0om4qq.jpg)\n\n### ç®€è¿°\n\nåœ¨å·¥å‚æ–¹æ³•æ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå·¥å‚å¯¹è±¡æ¥åˆ›å»ºä¸€ä¸ªäº§å“æ—ï¼Œå…·ä½“åˆ›å»ºå“ªä¸ªäº§å“ï¼Œåˆ™é€šè¿‡`swtich-case`çš„æ–¹å¼å»åˆ¤æ–­ã€‚è¿™ä¹Ÿæ„å‘³ç€è¯¥äº§å“ç»„ä¸Šï¼Œæ¯æ–°å¢ä¸€ç±»äº§å“å¯¹è±¡ï¼Œéƒ½å¿…é¡»ä¿®æ”¹åŸæ¥å·¥å‚å¯¹è±¡çš„ä»£ç ï¼›è€Œä¸”éšç€äº§å“çš„ä¸æ–­å¢å¤šï¼Œå·¥å‚å¯¹è±¡çš„èŒè´£ä¹Ÿè¶Šæ¥è¶Šé‡ï¼Œè¿åäº†**å•ä¸€èŒè´£åŸåˆ™**ã€‚\n\næŠ½è±¡å·¥å‚æ¨¡å¼é€šè¿‡ç»™å·¥å‚ç±»æ–°å¢ä¸€ä¸ªæŠ½è±¡å±‚è§£å†³äº†è¯¥é—®é¢˜ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œ`FactoryA`å’Œ`FactoryB`éƒ½å®ç°Â·æŠ½è±¡å·¥å‚æ¥å£ï¼Œåˆ†åˆ«ç”¨äºåˆ›å»º`ProductA`å’Œ`ProductB`ã€‚å¦‚æœåç»­æ–°å¢äº†`ProductC`ï¼Œåªéœ€æ–°å¢ä¸€ä¸ª`FactoryC`å³å¯ï¼Œæ— éœ€ä¿®æ”¹åŸæœ‰çš„ä»£ç ï¼›å› ä¸ºæ¯ä¸ªå·¥å‚åªè´Ÿè´£åˆ›å»ºä¸€ä¸ªäº§å“ï¼Œå› æ­¤ä¹Ÿéµå¾ªäº†**å•ä¸€èŒè´£åŸåˆ™**ã€‚\n\n### Goå®ç°\n\nè€ƒè™‘éœ€è¦å¦‚ä¸‹ä¸€ä¸ªæ’ä»¶æ¶æ„é£æ ¼çš„æ¶ˆæ¯å¤„ç†ç³»ç»Ÿï¼Œ`pipeline`æ˜¯æ¶ˆæ¯å¤„ç†çš„ç®¡é“ï¼Œå…¶ä¸­åŒ…å«äº†`input`ã€`filter`å’Œ`output`ä¸‰ä¸ªæ’ä»¶ã€‚æˆ‘ä»¬éœ€è¦å®ç°æ ¹æ®é…ç½®æ¥åˆ›å»º`pipeline` ï¼ŒåŠ è½½æ’ä»¶è¿‡ç¨‹çš„å®ç°éå¸¸é€‚åˆä½¿ç”¨å·¥å‚æ¨¡å¼ï¼Œå…¶ä¸­`input`ã€`filter`å’Œ`output`ä¸‰ç±»æ’ä»¶çš„åˆ›å»ºä½¿ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼ï¼Œè€Œ`pipeline`çš„åˆ›å»ºåˆ™ä½¿ç”¨å·¥å‚æ–¹æ³•æ¨¡å¼ã€‚\n\n![æŠ½è±¡å·¥å‚æ¨¡å¼ç¤ºä¾‹](https://tva1.sinaimg.cn/large/007S8ZIlgy1ghkw23e4r3j31bs0nge82.jpg)\n\nå„ç±»æ’ä»¶å’Œ`pipeline`çš„æ¥å£å®šä¹‰å¦‚ä¸‹ï¼š\n\n```go\npackage plugin\n...\n// æ’ä»¶æŠ½è±¡æ¥å£å®šä¹‰\ntype Plugin interface {}\n// è¾“å…¥æ’ä»¶ï¼Œç”¨äºæ¥æ”¶æ¶ˆæ¯\ntype Input interface {\n\tPlugin\n\tReceive() string\n}\n// è¿‡æ»¤æ’ä»¶ï¼Œç”¨äºå¤„ç†æ¶ˆæ¯\ntype Filter interface {\n\tPlugin\n\tProcess(msg string) string\n}\n// è¾“å‡ºæ’ä»¶ï¼Œç”¨äºå‘é€æ¶ˆæ¯\ntype Output interface {\n\tPlugin\n\tSend(msg string)\n}\n```\n\n```go\npackage pipeline\n...\n// æ¶ˆæ¯ç®¡é“çš„å®šä¹‰\ntype Pipeline struct {\n\tinput  plugin.Input\n\tfilter plugin.Filter\n\toutput plugin.Output\n}\n// ä¸€ä¸ªæ¶ˆæ¯çš„å¤„ç†æµç¨‹ä¸º input -> filter -> output\nfunc (p *Pipeline) Exec() {\n\tmsg := p.input.Receive()\n\tmsg = p.filter.Process(msg)\n\tp.output.Send(msg)\n}\n```\n\næ¥ç€ï¼Œæˆ‘ä»¬å®šä¹‰`input`ã€`filter`ã€`output`ä¸‰ç±»æ’ä»¶æ¥å£çš„å…·ä½“å®ç°ï¼š\n\n```go\npackage plugin\n...\n// inputæ’ä»¶åç§°ä¸ç±»å‹çš„æ˜ å°„å…³ç³»ï¼Œä¸»è¦ç”¨äºé€šè¿‡åå°„åˆ›å»ºinputå¯¹è±¡\nvar inputNames = make(map[string]reflect.Type)\n// Hello inputæ’ä»¶ï¼Œæ¥æ”¶â€œHello Worldâ€æ¶ˆæ¯\ntype HelloInput struct {}\n\nfunc (h *HelloInput) Receive() string {\n\treturn \"Hello World\"\n}\n// åˆå§‹åŒ–inputæ’ä»¶æ˜ å°„å…³ç³»è¡¨\nfunc init() {\n\tinputNames[\"hello\"] = reflect.TypeOf(HelloInput{})\n}\n```\n\n```go\npackage plugin\n...\n// filteræ’ä»¶åç§°ä¸ç±»å‹çš„æ˜ å°„å…³ç³»ï¼Œä¸»è¦ç”¨äºé€šè¿‡åå°„åˆ›å»ºfilterå¯¹è±¡\nvar filterNames = make(map[string]reflect.Type)\n// Upper filteræ’ä»¶ï¼Œå°†æ¶ˆæ¯å…¨éƒ¨å­—æ¯è½¬æˆå¤§å†™\ntype UpperFilter struct {}\n\nfunc (u *UpperFilter) Process(msg string) string {\n\treturn strings.ToUpper(msg)\n}\n// åˆå§‹åŒ–filteræ’ä»¶æ˜ å°„å…³ç³»è¡¨\nfunc init() {\n\tfilterNames[\"upper\"] = reflect.TypeOf(UpperFilter{})\n}\n```\n\n```go\npackage plugin\n...\n// outputæ’ä»¶åç§°ä¸ç±»å‹çš„æ˜ å°„å…³ç³»ï¼Œä¸»è¦ç”¨äºé€šè¿‡åå°„åˆ›å»ºoutputå¯¹è±¡\nvar outputNames = make(map[string]reflect.Type)\n// Console outputæ’ä»¶ï¼Œå°†æ¶ˆæ¯è¾“å‡ºåˆ°æ§åˆ¶å°ä¸Š\ntype ConsoleOutput struct {}\n\nfunc (c *ConsoleOutput) Send(msg string) {\n\tfmt.Println(msg)\n}\n// åˆå§‹åŒ–outputæ’ä»¶æ˜ å°„å…³ç³»è¡¨\nfunc init() {\n\toutputNames[\"console\"] = reflect.TypeOf(ConsoleOutput{})\n}\n```\n\nç„¶åï¼Œæˆ‘ä»¬å®šä¹‰æ’ä»¶æŠ½è±¡å·¥å‚æ¥å£ï¼Œä»¥åŠå¯¹åº”æ’ä»¶çš„å·¥å‚å®ç°ï¼š\n\n```go\npackage plugin\n...\n// æ’ä»¶æŠ½è±¡å·¥å‚æ¥å£\ntype Factory interface {\n\tCreate(conf Config) Plugin\n}\n// inputæ’ä»¶å·¥å‚å¯¹è±¡ï¼Œå®ç°Factoryæ¥å£\ntype InputFactory struct{}\n// è¯»å–é…ç½®ï¼Œé€šè¿‡åå°„æœºåˆ¶è¿›è¡Œå¯¹è±¡å®ä¾‹åŒ–\nfunc (i *InputFactory) Create(conf Config) Plugin {\n\tt, _ := inputNames[conf.Name]\n\treturn reflect.New(t).Interface().(Plugin)\n}\n// filterå’Œoutputæ’ä»¶å·¥å‚å®ç°ç±»ä¼¼\ntype FilterFactory struct{}\nfunc (f *FilterFactory) Create(conf Config) Plugin {\n\tt, _ := filterNames[conf.Name]\n\treturn reflect.New(t).Interface().(Plugin)\n}\ntype OutputFactory struct{}\nfunc (o *OutputFactory) Create(conf Config) Plugin {\n\tt, _ := outputNames[conf.Name]\n\treturn reflect.New(t).Interface().(Plugin)\n}\n```\n\næœ€åå®šä¹‰`pipeline`çš„å·¥å‚æ–¹æ³•ï¼Œè°ƒç”¨`plugin.Factory`æŠ½è±¡å·¥å‚å®Œæˆpipelienå¯¹è±¡çš„å®ä¾‹åŒ–ï¼š\n\n```go\npackage pipeline\n...\n// ä¿å­˜ç”¨äºåˆ›å»ºPluginçš„å·¥å‚å®ä¾‹ï¼Œå…¶ä¸­mapçš„keyä¸ºæ’ä»¶ç±»å‹ï¼Œvalueä¸ºæŠ½è±¡å·¥å‚æ¥å£\nvar pluginFactories = make(map[plugin.Type]plugin.Factory)\n// æ ¹æ®plugin.Typeè¿”å›å¯¹åº”Pluginç±»å‹çš„å·¥å‚å®ä¾‹\nfunc factoryOf(t plugin.Type) plugin.Factory {\n\tfactory, _ := pluginFactories[t]\n\treturn factory\n}\n// pipelineå·¥å‚æ–¹æ³•ï¼Œæ ¹æ®é…ç½®åˆ›å»ºä¸€ä¸ªPipelineå®ä¾‹\nfunc Of(conf Config) *Pipeline {\n\tp := &Pipeline{}\n\tp.input = factoryOf(plugin.InputType).Create(conf.Input).(plugin.Input)\n\tp.filter = factoryOf(plugin.FilterType).Create(conf.Filter).(plugin.Filter)\n\tp.output = factoryOf(plugin.OutputType).Create(conf.Output).(plugin.Output)\n\treturn p\n}\n// åˆå§‹åŒ–æ’ä»¶å·¥å‚å¯¹è±¡\nfunc init() {\n\tpluginFactories[plugin.InputType] = &plugin.InputFactory{}\n\tpluginFactories[plugin.FilterType] = &plugin.FilterFactory{}\n\tpluginFactories[plugin.OutputType] = &plugin.OutputFactory{}\n}\n```\n\næµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š\n\n```go\npackage test\n...\nfunc TestPipeline(t *testing.T) {\n  // å…¶ä¸­pipeline.DefaultConfig()çš„é…ç½®å†…å®¹è§ã€æŠ½è±¡å·¥å‚æ¨¡å¼ç¤ºä¾‹å›¾ã€‘\n  // æ¶ˆæ¯å¤„ç†æµç¨‹ä¸º HelloInput -> UpperFilter -> ConsoleOutput\n\tp := pipeline.Of(pipeline.DefaultConfig())\n\tp.Exec()\n}\n// è¿è¡Œç»“æœ\n=== RUN   TestPipeline\nHELLO WORLD\n--- PASS: TestPipeline (0.00s)\nPASS\n```\n\n## åŸå‹æ¨¡å¼ï¼ˆPrototype Patternï¼‰\n\n![åŸå‹æ¨¡å¼ç»“æ„](https://tva1.sinaimg.cn/large/007S8ZIlgy1ghky39ichjj319u0gqhdt.jpg)\n\n### ç®€è¿°\n\nåŸå‹æ¨¡å¼ä¸»è¦è§£å†³å¯¹è±¡å¤åˆ¶çš„é—®é¢˜ï¼Œå®ƒçš„æ ¸å¿ƒå°±æ˜¯`clone()`æ–¹æ³•ï¼Œè¿”å›`Prototype`å¯¹è±¡çš„å¤åˆ¶å“ã€‚åœ¨ç¨‹åºè®¾è®¡è¿‡ç¨‹ä¸­ï¼Œå¾€å¾€ä¼šé‡åˆ°æœ‰ä¸€äº›åœºæ™¯éœ€è¦å¤§é‡ç›¸åŒçš„å¯¹è±¡ï¼Œå¦‚æœä¸ä½¿ç”¨åŸå‹æ¨¡å¼ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯èƒ½ä¼šè¿™æ ·è¿›è¡Œå¯¹è±¡çš„åˆ›å»ºï¼š*æ–°åˆ›å»ºä¸€ä¸ªç›¸åŒå¯¹è±¡çš„å®ä¾‹ï¼Œç„¶åéå†åŸå§‹å¯¹è±¡çš„æ‰€æœ‰æˆå‘˜å˜é‡ï¼Œ å¹¶å°†æˆå‘˜å˜é‡å€¼å¤åˆ¶åˆ°æ–°å¯¹è±¡ä¸­*ã€‚è¿™ç§æ–¹æ³•çš„ç¼ºç‚¹å¾ˆæ˜æ˜¾ï¼Œé‚£å°±æ˜¯ä½¿ç”¨è€…å¿…é¡»çŸ¥é“å¯¹è±¡çš„å®ç°ç»†èŠ‚ï¼Œå¯¼è‡´ä»£ç ä¹‹é—´çš„è€¦åˆã€‚å¦å¤–ï¼Œå¯¹è±¡å¾ˆæœ‰å¯èƒ½å­˜åœ¨é™¤äº†å¯¹è±¡æœ¬èº«ä»¥å¤–ä¸å¯è§çš„å˜é‡ï¼Œè¿™ç§æƒ…å†µä¸‹è¯¥æ–¹æ³•å°±è¡Œä¸é€šäº†ã€‚\n\nå¯¹äºè¿™ç§æƒ…å†µï¼Œæ›´å¥½çš„æ–¹æ³•å°±æ˜¯ä½¿ç”¨åŸå‹æ¨¡å¼ï¼Œå°†å¤åˆ¶é€»è¾‘å§”æ‰˜ç»™å¯¹è±¡æœ¬èº«ï¼Œè¿™æ ·ï¼Œä¸Šè¿°ä¸¤ä¸ªé—®é¢˜ä¹Ÿéƒ½è¿åˆƒè€Œè§£äº†ã€‚\n\n### Goå®ç°\n\nè¿˜æ˜¯ä»¥å»ºé€ è€…æ¨¡å¼ä¸€èŠ‚ä¸­çš„`Message`ä½œä¸ºä¾‹å­ï¼Œç°åœ¨è®¾è®¡ä¸€ä¸ª`Prototype`æŠ½è±¡æ¥å£ï¼š\n\n```go\npackage prototype\n...\n// åŸå‹å¤åˆ¶æŠ½è±¡æ¥å£\ntype Prototype interface {\n\tclone() Prototype\n}\n\ntype Message struct {\n\tHeader *Header\n\tBody   *Body\n}\n\nfunc (m *Message) clone() Prototype {\n\tmsg := *m\n\treturn &msg\n}\n```\n\næµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š\n\n```go\npackage test\n...\nfunc TestPrototype(t *testing.T) {\n\tmessage := msg.Builder().\n\t\tWithSrcAddr(\"192.168.0.1\").\n\t\tWithSrcPort(1234).\n\t\tWithDestAddr(\"192.168.0.2\").\n\t\tWithDestPort(8080).\n\t\tWithHeaderItem(\"contents\", \"application/json\").\n\t\tWithBodyItem(\"record1\").\n\t\tWithBodyItem(\"record2\").\n\t\tBuild()\n  // å¤åˆ¶ä¸€ä»½æ¶ˆæ¯\n\tnewMessage := message.Clone().(*msg.Message)\n\tif newMessage.Header.SrcAddr != message.Header.SrcAddr {\n\t\tt.Errorf(\"Clone Message failed.\")\n\t}\n\tif newMessage.Body.Items[0] != message.Body.Items[0] {\n\t\tt.Errorf(\"Clone Message failed.\")\n\t}\n}\n// è¿è¡Œç»“æœ\n=== RUN   TestPrototype\n--- PASS: TestPrototype (0.00s)\nPASS\n```\n\n## æ€»ç»“\n\næœ¬æ–‡ä¸»è¦ä»‹ç»äº†GoFçš„23ç§è®¾è®¡æ¨¡å¼ä¸­çš„5ç§åˆ›å»ºå‹æ¨¡å¼ï¼Œåˆ›å»ºå‹æ¨¡å¼çš„ç›®çš„éƒ½æ˜¯**æä¾›ä¸€ä¸ªç®€å•çš„æ¥å£ï¼Œè®©å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ä¸ä½¿ç”¨è€…è§£è€¦**ã€‚å…¶ä¸­ï¼Œ**å•ä¾‹æ¨¡å¼**ä¸»è¦ç”¨äºä¿è¯ä¸€ä¸ªç±»ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„å…¨å±€è®¿é—®ç‚¹ï¼›**å»ºé€ è€…æ¨¡å¼**ä¸»è¦è§£å†³éœ€è¦åˆ›å»ºå¯¹è±¡æ—¶éœ€è¦ä¼ å…¥å¤šä¸ªå‚æ•°ï¼Œæˆ–è€…å¯¹åˆå§‹åŒ–é¡ºåºæœ‰è¦æ±‚çš„åœºæ™¯ï¼›**å·¥å‚æ–¹æ³•æ¨¡å¼**é€šè¿‡æä¾›ä¸€ä¸ªå·¥å‚å¯¹è±¡æˆ–è€…å·¥å‚æ–¹æ³•ï¼Œä¸ºä½¿ç”¨è€…éšè—äº†å¯¹è±¡åˆ›å»ºçš„ç»†èŠ‚ï¼›**æŠ½è±¡å·¥å‚æ¨¡å¼**æ˜¯å¯¹å·¥å‚æ–¹æ³•æ¨¡å¼çš„ä¼˜åŒ–ï¼Œé€šè¿‡ä¸ºå·¥å‚å¯¹è±¡æ–°å¢ä¸€ä¸ªæŠ½è±¡å±‚ï¼Œè®©å·¥å‚å¯¹è±¡éµå¾ªå•ä¸€èŒè´£åŸåˆ™ï¼Œä¹Ÿé¿å…äº†éœ°å¼¹å¼ä¿®æ”¹ï¼›**åŸå‹æ¨¡å¼**åˆ™è®©å¯¹è±¡å¤åˆ¶æ›´åŠ ç®€å•ã€‚\n\nä¸‹ä¸€ç¯‡æ–‡ç« ï¼Œå°†ä»‹ç»23ç§è®¾è®¡æ¨¡å¼ä¸­çš„7ç§**ç»“æ„å‹æ¨¡å¼**ï¼ˆStructural Patternï¼‰ï¼ŒåŠå…¶Goè¯­è¨€çš„å®ç°ã€‚\n\n![](https://tva1.sinaimg.cn/large/006tNbRwly1g9l3eygwe4j30im0lk763.jpg)\n\n", "user_name": "å…ƒé—°å­", "description": "Javaã€OOPã€DDDã€é‡æ„| ä¸ªäººåšå®¢ www.yrunz.com | å¾®ä¿¡å…¬ä¼—å· yuanrunzi", "got_view_count": 4183, "category_name": "åç«¯", "ctime": 1457483880}
{"tag_name": "å‰ç«¯", "concern_user_count": 455667, "user_id": "289926798645575", "title": "JavaScriptä¸­çš„map()å’ŒforEach()æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ", "mark_content": "> æ¥æºï¼š[https://medium.com/better-programming](https://medium.com/better-programming/what-is-the-difference-between-map-and-foreach-in-javascript-9bc49afa2703)  \n> ä½œè€…ï¼šMoon  \n> ç¿»è¯‘ï¼šå…¬ä¼—å·ã€Šå‰ç«¯å…¨æ ˆå¼€å‘è€…ã€‹\n\nJavaScriptä¸­ä¸€äº›æœ€å—æ¬¢è¿çš„åŠŸèƒ½å¯èƒ½æ˜¯mapå’ŒforEachã€‚ä»ECMAScript 5ï¼ˆç®€ç§°es5ï¼‰å¼€å§‹ï¼Œå®ƒä»¬å°±å¼€å§‹å­˜åœ¨äº†ã€‚\n\nåœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†è®¨è®ºå®ƒä»¬ä¹‹é—´çš„ä¸»è¦åŒºåˆ«ï¼Œå¹¶å‘ä½ å±•ç¤ºå…¶ç”¨æ³•çš„ä¸€äº›ç¤ºä¾‹ã€‚\n\n## é˜…è¯»ä¹‹å‰\n\nåŸºæœ¬ä¸Šï¼Œåœ¨JavaScriptä¸­éå†å¯¹è±¡å–å†³äºå¯¹è±¡æ˜¯å¦å¯è¿­ä»£ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ•°ç»„æ˜¯å¯è¿­ä»£çš„ã€‚`map` å’Œ `forEach` åŒ…å«åœ¨`Array.prototype` ä¸­ï¼Œå› æ­¤æˆ‘ä»¬æ— éœ€è€ƒè™‘å¯è¿­ä»£æ€§ã€‚å¦‚æœä½ æƒ³è¿›ä¸€æ­¥å­¦ä¹ ï¼Œæˆ‘æ¨èä½ çœ‹çœ‹ä»€ä¹ˆæ˜¯JavaScriptä¸­çš„å¯è¿­ä»£å¯¹è±¡ï¼\n\n## ä»€ä¹ˆæ˜¯map()å’ŒforEach()ï¼Ÿ\n\n`map` å’Œ `forEach` æ˜¯æ•°ç»„ä¸­çš„å¸®åŠ©å™¨æ–¹æ³•ï¼Œå¯ä»¥è½»æ¾åœ°åœ¨æ•°ç»„ä¸Šå¾ªç¯ã€‚æˆ‘ä»¬æ›¾ç»åƒä¸‹é¢è¿™æ ·å¾ªç¯éå†ä¸€ä¸ªæ•°ç»„ï¼Œæ²¡æœ‰ä»»ä½•è¾…åŠ©å‡½æ•°ã€‚\n\n```javascript\nvar array = ['1', '2', '3'];\nfor (var i = 0; i < array.length; i += 1) {\n  console.log(Number(array[i]));\n}\n// 1\n// 2\n// 3\n```\n\nè‡ªJavaScriptæ—¶ä»£å¼€å§‹ä»¥æ¥ï¼Œå°±ä¸€ç›´å­˜åœ¨ `for` å¾ªç¯ã€‚å®ƒåŒ…å«3ä¸ªè¡¨è¾¾å¼ï¼šåˆå§‹å€¼ï¼Œæ¡ä»¶å’Œæœ€ç»ˆè¡¨è¾¾å¼ã€‚\n\nè¿™æ˜¯å¾ªç¯æ•°ç»„çš„ç»å…¸æ–¹æ³•ã€‚ä»ECMAScript 5å¼€å§‹ï¼Œæ–°åŠŸèƒ½ä¼¼ä¹ä½¿æˆ‘ä»¬æ›´åŠ å¿«ä¹ã€‚\n\n### map\n\n`map` çš„ä½œç”¨ä¸ `for` å¾ªç¯å®Œå…¨ç›¸åŒï¼Œåªæ˜¯ `map` ä¼šåˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ï¼Œå…¶ç»“æœæ˜¯åœ¨è°ƒç”¨æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ä¸Šè°ƒç”¨æä¾›çš„å‡½æ•°ã€‚\n\nå®ƒéœ€è¦ä¸¤ä¸ªå‚æ•°ï¼šä¸€ä¸ªæ˜¯ç¨ååœ¨è°ƒç”¨ `map` æˆ– `forEach` æ—¶è°ƒç”¨çš„å›è°ƒå‡½æ•°ï¼Œå¦ä¸€ä¸ªæ˜¯å›è°ƒå‡½æ•°è¢«è°ƒç”¨æ—¶ä½¿ç”¨çš„åä¸º `thisArg` çš„ä¸Šä¸‹æ–‡å˜é‡ã€‚\n\n```javascript\nconst arr = ['1', '2', '3'];\n// å›è°ƒå‡½æ•°æ¥å—3ä¸ªå‚æ•°\n// æ•°ç»„çš„å½“å‰å€¼ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°\n// å½“å‰å€¼åœ¨æ•°ç»„ä¸­çš„ä½ç½®ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°\n// åŸå§‹æºæ•°ç»„ä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°\nconst cb = (str, i, origin) => {\n  console.log(`${i}: ${Number(str)} / ${origin}`);\n};\narr.map(cb);\n// 0: 1 / 1,2,3\n// 1: 2 / 1,2,3\n// 2: 3 / 1,2,3\n```\n\nå›è°ƒå‡½æ•°å¯ä»¥å¦‚ä¸‹ä½¿ç”¨ã€‚\n\n```javascript\narr.map((str) => { console.log(Number(str)); })\n```\n\n`map` çš„ç»“æœä¸ç­‰äºåŸå§‹æ•°ç»„ã€‚\n\n```javascript\nconst arr = [1];\nconst new_arr = arr.map(d => d);\n\narr === new_arr; // false\n```\n\nä½ è¿˜å¯ä»¥å°†å¯¹è±¡ä½œä¸º `thisArg` ä¼ é€’åˆ°mapã€‚\n\n```javascript\nconst obj = { name: 'Jane' };\n\n[1].map(function() {\n  // { name: 'Jane' }\n  console.dir(this);\n}, obj);\n\n[1].map(() => {\n  // window\n  console.dir(this);\n}, obj);\n```\n\nå¯¹è±¡ `obj` æˆä¸º `map` çš„ `thisArg`ã€‚ä½†æ˜¯ç®­å¤´å›è°ƒå‡½æ•°æ— æ³•å°† `obj` ä½œä¸ºå…¶ `thisArg`ã€‚\n\nè¿™æ˜¯å› ä¸ºç®­å¤´å‡½æ•°ä¸æ­£å¸¸å‡½æ•°ä¸åŒã€‚\n\n### forEach\n\n`forEach` æ˜¯æ•°ç»„çš„å¦ä¸€ä¸ªå¾ªç¯å‡½æ•°ï¼Œä½† `map` å’Œ `forEach` åœ¨ä½¿ç”¨ä¸­æœ‰æ‰€ä¸åŒã€‚`map` å’Œ `forEach` å¯ä»¥ä½¿ç”¨ä¸¤ä¸ªå‚æ•°â€”â€”å›è°ƒå‡½æ•°å’Œ `thisArg`ï¼Œå®ƒä»¬ç”¨ä½œå…¶ `this`ã€‚\n\n```javascript\nconst arr = ['1', '2', '3'];\n// å›è°ƒå‡½æ•°æ¥å—3ä¸ªå‚æ•°\n// æ•°ç»„çš„å½“å‰å€¼ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°\n// å½“å‰å€¼åœ¨æ•°ç»„ä¸­çš„ä½ç½®ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°\n// åŸå§‹æºæ•°ç»„ä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°\nconst cb = (str, i, origin) => {\n  console.log(`${i}: ${Number(str)} / ${origin}`);\n};\narr.forEach(cb);\n// 0: 1 / 1,2,3\n// 1: 2 / 1,2,3\n// 2: 3 / 1,2,3\n```\n\né‚£æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ\n\n`map` è¿”å›å…¶åŸå§‹æ•°ç»„çš„æ–°æ•°ç»„ï¼Œä½†æ˜¯ `forEach` å´æ²¡æœ‰ã€‚ä½†æ˜¯å®ƒä»¬éƒ½ç¡®ä¿äº†åŸå§‹å¯¹è±¡çš„ä¸å˜æ€§ã€‚\n\n```javascript\n[1,2,3].map(d => d + 1); // [2, 3, 4];\n[1,2,3].forEach(d => d + 1); // undefined;\n```\n\nå¦‚æœæ›´æ”¹æ•°ç»„å†…çš„å€¼ï¼Œ`forEach` ä¸èƒ½ç¡®ä¿æ•°ç»„çš„ä¸å˜æ€§ã€‚è¿™ä¸ªæ–¹æ³•åªæœ‰åœ¨ä½ ä¸æ¥è§¦é‡Œé¢çš„ä»»ä½•å€¼æ—¶ï¼Œæ‰èƒ½ä¿è¯ä¸å˜æ€§ã€‚\n\n```javascript\n[{a: 1, b: 2}, {a: 10, b: 20}].forEach((obj) => obj.a += 1);\n// [{a: 2, b: 2}, {a: 11, b: 21}]\n// æ•°ç»„å·²æ›´æ”¹ï¼\n```\n\n## ä½•æ—¶ä½¿ç”¨map()å’ŒforEach()ï¼Ÿ\n\nç”±äºå®ƒä»¬ä¹‹é—´çš„ä¸»è¦åŒºåˆ«åœ¨äºæ˜¯å¦æœ‰è¿”å›å€¼ï¼Œæ‰€ä»¥ä½ ä¼šå¸Œæœ›ä½¿ç”¨ `map` æ¥åˆ¶ä½œä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œè€Œä½¿ç”¨ `forEach` åªæ˜¯ä¸ºäº†æ˜ å°„åˆ°æ•°ç»„ä¸Šã€‚\n\nè¿™æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ã€‚\n\n```javascript\nconst people = [\n  { name: 'Josh', whatCanDo: 'painting' },\n  { name: 'Lay', whatCanDo: 'security' },\n  { name: 'Ralph', whatCanDo: 'cleaning' }\n];\n\nfunction makeWorkers(people) {\n  return people.map((person) => {\n    const { name, whatCanDo } = person;\n    return <li key={name}>My name is {name}, I can do {whatCanDo}</li>\n  });\n}\n\n<ul>makeWorkers(people)</ul>\n```\n\næ¯”å¦‚åœ¨Reactä¸­ï¼Œ`map` æ˜¯éå¸¸å¸¸ç”¨çš„åˆ¶ä½œå…ƒç´ çš„æ–¹æ³•ï¼Œå› ä¸º `map` åœ¨å¯¹åŸæ•°ç»„çš„æ•°æ®è¿›è¡Œæ“ä½œåï¼Œä¼šåˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„ã€‚\n\n```javascript\nconst mySubjectId = ['154', '773', '245'];\n\nfunction countSubjects(subjects) {\n  let cnt = 0;\n  \n  subjects.forEach(subject => {\n    if (mySubjectId.includes(subject.id)) {\n      cnt += 1;\n    }\n  });\n  \n  return cnt;\n}\n\ncountSubjects([\n  { id: '223', teacher: 'Mark' },\n  { id: '154', teacher: 'Linda' }\n]);\n// 1\n```\n\nå¦ä¸€æ–¹é¢ï¼Œå½“ä½ æƒ³å¯¹æ•°æ®è¿›è¡ŒæŸäº›æ“ä½œè€Œä¸åˆ›å»ºæ–°æ•°ç»„æ—¶ï¼Œ`forEach` å¾ˆæœ‰ç”¨ã€‚é¡ºä¾¿è¯´ä¸€å¥ï¼Œå¯ä»¥ä½¿ç”¨ `filter` é‡æ„ç¤ºä¾‹ã€‚\n\n```javascript\nsubjects.filter(subject => mySubjectId.includes(subject.id)).length;\n```\n\n**ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘å»ºè®®ä½ åœ¨åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„æ—¶ä½¿ç”¨mapï¼Œå½“ä½ ä¸éœ€è¦åˆ¶ä½œä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œè€Œæ˜¯è¦å¯¹æ•°æ®åšä¸€äº›äº‹æƒ…æ—¶ï¼Œå°±ä½¿ç”¨forEachã€‚**\n\n## é€Ÿåº¦æ¯”è¾ƒ\n\næœ‰äº›å¸–å­æåˆ° `map` æ¯” `forEach` å¿«ã€‚æ‰€ä»¥ï¼Œæˆ‘å¾ˆå¥½å¥‡è¿™æ˜¯ä¸æ˜¯çœŸçš„ã€‚æˆ‘æ‰¾åˆ°äº†è¿™ä¸ªå¯¹æ¯”ç»“æœã€‚\n\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d603d8032807415f898db78b88dc8dd3~tplv-k3u1fbpfcp-zoom-1.image)\n\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/79644926bbce4bae840cd39245a54010~tplv-k3u1fbpfcp-zoom-1.image)\n\nè¯¥ä»£ç çœ‹èµ·æ¥éå¸¸ç›¸ä¼¼ï¼Œä½†ç»“æœå´ç›¸åã€‚æœ‰äº›æµ‹è¯•è¯´ `forEach` æ›´å¿«ï¼Œæœ‰äº›è¯´ `map` æ›´å¿«ã€‚ä¹Ÿè®¸ä½ åœ¨å‘Šè¯‰è‡ªå·± `map/forEach` æ¯”å…¶ä»–çš„å¿«ï¼Œä½ å¯èƒ½æ˜¯å¯¹çš„ã€‚è€å®è¯´ï¼Œæˆ‘ä¸ç¡®å®šã€‚æˆ‘è®¤ä¸ºåœ¨ç°ä»£Webå¼€å‘ä¸­ï¼Œå¯è¯»æ€§æ¯” `map` å’Œ `forEach` ä¹‹é—´çš„é€Ÿåº¦é‡è¦å¾—å¤šã€‚\n\nä½†å¯ä»¥è‚¯å®šçš„æ˜¯â€”â€”ä¸¤è€…éƒ½æ¯”JavaScriptå†…ç½®çš„ `for` å¾ªç¯æ…¢ã€‚\n\n\n\n\n", "user_name": "æœå°¼åœ", "description": "Webå…¨æ ˆå¼€å‘ã€æŒç»­å­¦ä¹ è€…ï¼Œå…³æ³¨å…¬ä¼—å·ç¬¬ä¸€æ—¶é—´æ¥æ”¶æœ€æ–°æ–‡ç« ", "got_view_count": 281906, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "JavaScript", "concern_user_count": 343215, "user_id": "3597257776829127", "title": "é¢è¯•ä¸€å®šä¼šè€ƒçš„csså¸ƒå±€å•ä½ ğŸŒ² ğŸ â„ï¸", "mark_content": "# CSSé•¿åº¦å•ä½çŸ¥å¤šå°‘ \n\nå¤§éƒ¨åˆ†å‰ç«¯å¼€å‘è€…éƒ½æœ‰é  `px` å’Œ `%` é—¯å¤©ä¸‹çš„ç»å†ï¼Œåæ¥å‘ç° `vw` `vh` `calc` ä¹Ÿæ˜¯çœŸé¦™ï¼Œå°¤å…¶é‡åˆ°PCç«¯çš„å¸ƒå±€é€‚é…åœºæ™¯å ªç§°ç¥å™¨ï¼Œæ‰€ä»¥æŠŠCSSçš„å°ºå¯¸å•ä½éƒ½æ‹‰å‡ºæ¥çœ‹ä¸€çœ‹ï¼Œåœ¨è¿™ä¹‹å‰è¦å…ˆææ˜ç™½å‡ ä¸ªæ¦‚å¿µï¼Œæ¯”å¦‚pxåˆ°åº•æ˜¯ç»å¯¹å•ä½è¿˜æ˜¯ç›¸å¯¹å•ä½ï¼Ÿ\n\n## å…ˆäº†è§£å‡ ä¸ªæ¦‚å¿µ\n\n### åˆ†è¾¨ç‡\næˆ‘ä»¬æŠŠä¸€å¼ å›¾ç‰‡æ— é™æ”¾å¤§ä¼šçœ‹åˆ°å¾ˆå¤šå°æ ¼å­ï¼Œé€šå¸¸æŠŠä»–ä»¬å«åšåƒç´ æ ¼ï¼Œå¦‚æœæœ‰ä¸€å¼ å›¾ç‰‡åˆ†è¾¨ç‡æ˜¯`500*500`é‚£è¯´æ˜è¿™å¼ å›¾ç‰‡æ¨ªå‘å’Œçºµå‘éƒ½æ˜¯500ä¸ªåƒç´ æ ¼ã€‚å¯¹åº”åˆ°è®¾å¤‡å±å¹•ä¸Šï¼Œå±å¹•ä¸Šçš„æ ¼å­æˆ‘ä»¬å«å®ƒåƒç´ ç‚¹ï¼Œæ¯”å¦‚iPhone6çš„åˆ†è¾¨ç‡æ˜¯`1334*750`ï¼Œè¯´æ˜iPhone6çš„å±å¹•ä¸Šæœ‰`1334*750`ä¸ªåƒç´ ç‚¹ã€‚æˆ‘ä»¬é€šå¸¸è¯´çš„åˆ†è¾¨ç‡æŒ‡çš„æ˜¯ç”¨æˆ·è®¾å®šçš„æ¡Œé¢åˆ†è¾¨ç‡ï¼Œè¿™å’Œç‰©ç†åˆ†è¾¨ç‡æ˜¯æœ‰å·®åˆ«çš„ï¼Œé€šå¸¸æ¡Œé¢åˆ†è¾¨ç‡ç­‰äºç‰©ç†åˆ†è¾¨ç‡çš„æ—¶å€™æ˜¾ç¤ºæ•ˆæœæ˜¯æœ€ä½³çš„ï¼Œå¦‚æœä½ æ„¿æ„å½“ç„¶å¯ä»¥æŠŠä¸€å—`1280*768`çš„å±å¹•åˆ†è¾¨ç‡è°ƒæˆ`640*384`ã€‚\n\n### å±å¹•å°ºå¯¸\nå±å¹•å°ºå¯¸ä¸€èˆ¬ç”¨è‹±å¯¸è¡¨ç¤ºï¼Œè‹±å¯¸æ˜¯é•¿åº¦å•ä½ä¸æ˜¯é¢ç§¯å•ä½ï¼Œæˆ‘ä»¬å¸¸è¯´çš„æŸè®¾å¤‡å±å¹•æ˜¯5è‹±å¯¸æŒ‡çš„æ˜¯å¯¹è§’çº¿é•¿åº¦æ˜¯5è‹±å¯¸ï¼Œ1è‹±å¯¸ç­‰äº2.54cmã€‚åœ¨å±å¹•å°ºå¯¸ç¡®å®šçš„æƒ…å†µä¸‹åˆ†è¾¨ç‡è¶Šé«˜å±å¹•è¶Šæ¸…æ™°ã€‚\n\n### è®¾å¤‡åƒç´ ï¼ˆç‰©ç†åƒç´ ï¼‰\nè®¾å¤‡åƒç´ ä¹Ÿå«ç‰©ç†åƒç´ ï¼Œå…·ä½“æŒ‡è®¾å¤‡å±å¹•ä¸Šçš„ç‰©ç†åƒç´ ç‚¹ï¼Œå±å¹•æ§åˆ¶æ˜¾ç¤ºçš„æœ€å°å•ä½ï¼Œç”±è®¾å¤‡å±å¹•å†³å®šï¼Œå•ä½ptï¼Œè®¾å¤‡å‡ºå‚çš„æ—¶å€™è®¾å¤‡åƒç´ å°±å·²ç»ç¡®å®šäº†ï¼Œä¸”æ°¸è¿œä¸ä¼šæ”¹å˜ã€‚\n\n### è®¾å¤‡ç‹¬ç«‹åƒç´ ï¼ˆDIPï¼‰\nè®¾å¤‡ç‹¬ç«‹åƒç´ æ˜¯ä¸€ç§è¢«ç¨‹åºæ‰€æ§åˆ¶çš„è™šæ‹Ÿåƒç´ ï¼Œåœ¨Webå¼€å‘ä¸­å¯¹åº”CSSåƒç´ ï¼Œæˆ‘ä»¬æŠŠç‰©ç†åƒç´ é‡æ–°æ’åˆ—ï¼Œä»¥å›ºå®šæ•°é‡çš„ç‰©ç†åƒç´ ç‚¹æ¥è¡¨ç¤ºä¸€ä¸ªè®¾å¤‡ç‹¬ç«‹åƒç´ ï¼Œä¸€ä¸ªè®¾å¤‡ç‹¬ç«‹åƒç´ å¯¹åº”CSSä¸­çš„1pxã€‚\n\n> ä¸€ä¸ªå•ä½çš„è®¾å¤‡ç‹¬ç«‹åƒç´ ï¼ˆä¹Ÿå°±æ˜¯1pxï¼‰è¡¨ç¤ºNä¸ªç‰©ç†åƒç´ ï¼Œå¦‚æœå›ºå®šç”¨ä¸€ä¸ªè®¾å¤‡ç‹¬ç«‹åƒç´ è¡¨ç¤ºä¸€ä¸ªç‰©ç†åƒç´ ä¼šå¸¦æ¥ä»€ä¹ˆé—®é¢˜å‘¢ï¼Œå‡è®¾æœ‰ä¸¤å—5è‹±å¯¸çš„å±å¹•ï¼Œä¸€å—çš„åˆ†åˆ«ç‡æ˜¯`500*500`ï¼Œå¦ä¸€å—çš„åˆ†åˆ«ç‡æ˜¯`1000*1000`ï¼Œå› ä¸ºè®¾å¤‡ç‹¬ç«‹åƒç´ å’Œç‰©ç†åƒç´ æ˜¯ä¸€æ¯”ä¸€çš„å…³ç³»å½“æŠŠ250pxçš„ç›’å­æ¸²æŸ“åˆ°å±å¹•ä¸Šæ—¶ï¼Œåœ¨`500*500`çš„å±å¹•ç›’å­å å®½åº¦çš„äºŒåˆ†ä¹‹ä¸€ï¼Œåˆ°äº†`1000*1000`çš„å±å¹•å°±åªå åˆ°å››åˆ†ä¹‹ä¸€ï¼Œè¿™æ˜¯å®Œå…¨ä¸åŒçš„ç”¨æˆ·ä½“éªŒã€‚å› æ­¤æˆ‘ä»¬åœ¨ç‰©ç†åƒç´ ä¸ŠæŠ½è±¡ä¸€ä¸ªé€»è¾‘å±‚ï¼Œä»¥å›ºå®šæ•°é‡çš„ç‰©ç†åƒç´ æ¥è¡¨ç¤ºä¸€ä¸ªè®¾å¤‡ç‹¬ç«‹åƒç´ ï¼Œé‡æ–°æ„æˆé¡µé¢æ¸²æŸ“çš„åƒç´ ç‚¹ã€‚è‡³äºå¤šå°‘ä¸ªç‰©ç†åƒç´ å¯¹åº”ä¸€ä¸ªè®¾å¤‡ç‹¬ç«‹åƒç´ å°±éœ€è¦å¼•å…¥å¦å¤–ä¸€ä¸ªæ¦‚å¿µè®¾å¤‡åƒç´ æ¯”(DPR)åé¢ä¼šè®²åˆ°ã€‚\n\n### è®¾å¤‡åƒç´ æ¯”ï¼ˆDPRï¼‰\nè®¾å¤‡åƒç´ æ¯” = ç‰©ç†åƒç´  / è®¾å¤‡ç‹¬ç«‹åƒç´  ï¼ˆå¯ä»¥é€šè¿‡JSæ¥è·å–è®¾å¤‡åƒç´ æ¯” window.devicePixelRatioï¼‰\n\nè®¾å¤‡åƒç´ æ¯”ä¸»è¦ç”¨æ¥å‘Šè¯‰å±å¹•1è®¾å¤‡ç‹¬ç«‹åƒç´ ï¼ˆä¹Ÿå°±æ˜¯CSSé‡Œçš„1pxï¼‰å¯¹åº”åœ¨æ˜¾ç¤ºå™¨ä¸Šæ¸²æŸ“å‡ ä¸ªç‰©ç†åƒç´ ï¼Œå½“å‰è®¾å¤‡çš„è®¾å¤‡åƒç´ æ¯”å¯ä»¥ç”¨`window.devicePixelRatio`å‘½ä»¤æŸ¥çœ‹å¾—åˆ°ï¼Œå¦‚æœDPRä¸º2ï¼Œå³1è®¾å¤‡ç‹¬ç«‹åƒç´ åŒ…å«2ä¸ªç‰©ç†åƒç´ ã€‚è¿™æ ·æˆ‘ä»¬ç”¨CSSè®¾ç½®çš„1pxï¼Œä¸è®ºåœ¨ä»€ä¹ˆè®¾å¤‡ä¸Šæ˜¾ç¤ºçš„éƒ½æ˜¯1pxï¼Œä½†æ˜¯è¿™ä¸ª1pxå¯¹åº”çš„ç‰©ç†åƒç´ æ˜¯ä¸ç¡®å®šçš„ã€‚\n\nDPRå¹¶ä¸æ˜¯å¼€å‘è€…æ§åˆ¶çš„ï¼Œæ˜¯å‚å•†å†³å®šçš„ï¼Œè¿™é‡Œè¦å¼•å…¥å¦å¤–ä¸€ä¸ªæ¦‚å¿µå±å¹•åƒç´ å¯†åº¦(PPI)åé¢ä¼šè®²åˆ°ï¼Œæ¯ä¸ªå›ºå®šèŒƒå›´å†…çš„PPIä¼šå¯¹åº”ä¸€ä¸ªå›ºå®šçš„DPRå€¼ï¼ˆå¦‚ä¸‹è¡¨ï¼‰ï¼Œè¿™ä¹Ÿå¯¼è‡´äº†CSSè®¾ç½®çš„100pxåœ¨ä¸åŒå±å¹•ä¸Šæ˜¾ç¤ºçš„ç‰©ç†é•¿åº¦ä¼šæœ‰ç»†å¾®å·®è·ã€‚**æ€»çš„æ¥è¯´å±å¹•åƒç´ å¯†åº¦(PPI)è¶Šå¤§ï¼Œè®¾å¤‡ç‹¬ç«‹åƒç´ å¯¹åº”çš„ç‰©ç†åƒç´ è¶Šå¤šï¼Œå±å¹•è¶Šæ¸…æ™°ã€‚**\n\nä»¥iPhone6ä¸ºä¾‹ï¼Œå‚å•†ç»™å‡ºçš„åˆ†è¾¨ç‡(ä¹Ÿå°±æ˜¯ç‰©ç†åƒç´ )æ˜¯`1334*750`ï¼ŒDPRæ˜¯2ï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®—å¾—åˆ°å®ƒçš„è®¾å¤‡ç‹¬ç«‹åƒç´ æ˜¯`667*375`ï¼Œä¹Ÿå°±æ˜¯Chromeæ‰‹æœºæ¨¡æ‹Ÿå™¨æ˜¾ç¤ºçš„`667*375`ã€‚iPhoneXåˆ†è¾¨ç‡æ˜¯`2436*1125`ï¼ŒDPRæ˜¯3ï¼Œè®¾å¤‡ç‹¬ç«‹åƒç´ æ˜¯`812*375`ã€‚\n\n> æˆ‘ä»¬åœ¨PCæµè§ˆå™¨ä¸ŠæŒ‰ `Ctrl + åŠ å·` é”®ï¼Œæ”¹å˜çš„å°±æ˜¯è®¾å¤‡åƒç´ æ¯”ï¼ˆDPRï¼‰ï¼Œå¯ä»¥`console.log(window.devicePixelRatio)`çœ‹ä¸€ä¸‹ï¼ŒDPRå˜å¤§äº†ï¼Œä¸€ä¸ªè®¾å¤‡ç‹¬ç«‹åƒç´ (CSSçš„px)å¯¹åº”çš„ç‰©ç†åƒç´ å˜å¤šäº†ï¼Œæ‰€ä»¥è§†è§‰ä¸Šé¡µé¢å˜å¤§äº†ã€‚\n\n### å±å¹•åƒç´ å¯†åº¦ï¼ˆPPIï¼‰\nå±å¹•åƒç´ å¯†åº¦ = ç‰©ç†åƒç´  / å±å¹•å°ºå¯¸\n\nå±å¹•åƒç´ å¯†åº¦ï¼ˆPPIï¼‰æŒ‡çš„æ˜¯æ¯è‹±å¯¸å±å¹•æ‰€æ‹¥æœ‰çš„ç‰©ç†åƒç´ æ•°é‡ï¼Œå±å¹•åƒç´ å¯†åº¦å¼ºè°ƒçš„æ˜¯æ¯è‹±å¯¸æœ‰å¤šå°‘åƒç´ ç‚¹ã€‚æ˜¯è¡¡é‡è®¾å¤‡æ¸…æ™°åº¦çš„å…³èŠ‚æŒ‡æ ‡ï¼Œä¹”å¸ƒæ–¯å®šä¹‰PPI300ä»¥ä¸Šç§°ä¸ºè§†ç½‘è†œçº§åˆ«ï¼ŒRetinaè§†ç½‘è†œè®¾å¤‡çš„DPRæ˜¯2æˆ–è€…3ï¼Œåœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­å°±ç”¨åˆ°äº†2å€å›¾æˆ–è€…3å€å›¾ã€‚ä¸‹é¢è¡¨æ ¼åˆ—å‡ºäº†PPIå’ŒDPRä¹‹é—´çš„å¤§è‡´å…³ç³»ã€‚ \n\n|        |       |      |      |      |\n| -------| ----- | ---- | ---- | ---- |\n| PPI åŒºé—´ | 120-160 | 160-240 | 240-320 | 320+ |\n| DPR å€¼ | 0.75 | 1 | 1.5 | 2 |\n\n### æ‰“å°æœºï¼ˆDPIï¼‰\næ‰“å°æœºçš„å¢¨ç‚¹ï¼Œä¸å¤šåšä»‹ç»ã€‚\n\n\n## CSSé•¿åº¦å•ä½\nCSSä¸­é•¿åº¦å•ä½åˆ†ä¸ºä¸¤ç±» **ç»å¯¹å•ä½**ã€**ç›¸å¯¹å•ä½**ï¼Œçœ‹ä¸‹W3Cå¯¹ç»å¯¹å•ä½å’Œç›¸å¯¹å•ä½çš„å®šä¹‰ã€‚\n> **ç»å¯¹å•ä½ï¼š**ç»å¯¹é•¿åº¦å•ä½æ˜¯ä¸€ä¸ªå›ºå®šçš„å€¼ï¼Œå®ƒååº”ä¸€ä¸ªçœŸå®çš„ç‰©ç†å°ºå¯¸ã€‚   \n**ç›¸å¯¹å•ä½ï¼š**ç›¸å¯¹é•¿åº¦å•ä½ä¸­çš„ç›¸å¯¹äºŒå­—ï¼Œè¡¨æ˜äº†å…¶é•¿åº¦å•ä½ä¼šéšç€å®ƒçš„å‚è€ƒå€¼çš„å˜åŒ–è€Œå˜åŒ–ï¼Œä¸æ˜¯å›ºå®šçš„ã€‚\n\n### ç»å¯¹å•ä½\n\n  - inï¼ˆè‹±å¯¸ï¼‰\n  - cmï¼ˆå˜ç±³ï¼‰\n  - mmï¼ˆæ¯«ç±³ï¼‰\n  - ptï¼ˆpointsï¼‰\n  - pcï¼ˆPicasï¼‰\n\n1in = 2.54cm = 25.4 mm = 72pt = 6pc\n\nç»å¯¹å•ä½æ˜¯å›ºå®šä¸å˜çš„ï¼Œæœ‰ä¸€ä¸ªå›ºå®šçš„ç‰©ç†é•¿åº¦ï¼Œç›¸äº’ä¹‹é—´æœ‰æ¸…æ™°çš„æ¢ç®—å…³ç³»ï¼Œæœ€ç»ˆåœ¨é¡µé¢æ¸²æŸ“æ—¶ä¼šè½¬æ¢æˆpxï¼Œç»å¯¹å•ä½å¸¸ç”¨åœ¨å°åˆ·æ‰“å°æ–¹å‘ã€‚\n\nå¯¹å‰ç«¯å¼€å‘è€…æ¥è¯´ç»å¯¹å•ä½ç”¨çš„æœ€å¤šçš„ä¹Ÿå°±æ˜¯mmå’Œcmäº†ï¼Œåšæ‰“å°è¡¨å•ä¸šåŠ¡çš„æ—¶å€™æŠŠé¡µé¢å®½åº¦è®¾ç½®æˆ210mmï¼Œè¿™æ ·ç”¨æˆ·çš„é¢„è§ˆä½“éªŒå’ŒçœŸå®æ‰“å°æ•ˆæœæœ€æ¥è¿‘ã€‚\n\n\n### ç›¸å¯¹å•ä½\n\n  - px åƒç´ \n  - vw è§†çª—å®½åº¦\n  - vh è§†çª—é«˜åº¦\n  - vmin å–è§†çª—å®½é«˜è¾ƒå°å€¼\n  - vmax å–è§†çª—å®½é«˜è¾ƒå¤§å€¼\n  - ex å…ƒç´ å†…å­—ç¬¦xçš„é«˜åº¦\n  - ch å…ƒç´ å†…æ•°å­—0çš„å®½åº¦\n  - em å…ƒç´ å­—ä½“é«˜åº¦\n  - rem æ ¹å…ƒç´ fontSize\n  - % ç™¾åˆ†æ¯”\n\n<span style=\"background: pink; padding: 5px\">px</span>   \npxæ˜¯ç›¸å¯¹å•ä½ï¼Œå› ä¸º1pxåœ¨ä¸åŒè®¾å¤‡ä¸Šæ¸²æŸ“çš„ç‰©ç†åƒç´ æ•°é‡ä¸ä¸€è‡´ï¼Œä¸åŒè®¾å¤‡ä¸Šä¸€ä¸ªç‰©ç†åƒç´ çš„å¤§å°ä¹Ÿä¸ä¸€è‡´ã€‚ä¸ºä¿è¯é˜…è¯»ä½“éªŒä¸€è‡´ï¼ŒCSSçš„px ç›¸å¯¹ ç‰©ç†åƒç´  æ˜¯åŠ¨æ€çš„ï¼Œpxå’Œç‰©ç†åƒç´ ä¹‹é—´çš„å…³ç³»æ ¹æ®è®¾å¤‡åƒç´ æ¯”ï¼ˆDPRï¼‰ç¡®å®šã€‚\n\næœ‰äº†å¯¹ä¸Šæ–‡æ¦‚å¿µçš„è®¤è¯†ï¼Œå†æ¥ç†è§£CSSçš„pxå°±å®¹æ˜“è®¸å¤šäº†ï¼Œæˆ‘ä»¬ä»¥ iPhone3gsï¼ˆ480x320ï¼‰å’Œ 4sï¼ˆ960x640ï¼‰æ¥ä¸¾ä¾‹ï¼Œä»–ä¿©å±å¹•å°ºå¯¸éƒ½æ˜¯3.5è‹±å¯¸ï¼Œåˆ†è¾¨ç‡å·®äº†ä¸€å€ï¼Œå¦‚æœDPRä¸º1åœ¨4sä¸Šé¢æ¸²æŸ“å‡ºæ¥å…ƒç´ ä¼šåå°ï¼Œå°±åƒä¸‹é¢è¿™å¼ å›¾æ‰€ç¤ºã€‚ä½†åœ¨å®é™…æ¸²æŸ“ä¸­4sçš„DPRä¸º2ï¼Œä¹Ÿå°±æ„å‘³ç€1pxä¼šæ¸²æŸ“ä¸¤ä¸ªç‰©ç†åƒç´ ï¼Œå…ƒç´ æ”¾å¤§äº†ä¸”é¡µé¢çœ‹èµ·æ¥ä¼šæ›´åŠ æ¸…æ™°ã€‚åŒæ—¶åœ¨å¤´åƒåŒºåŸŸå°±éœ€è¦æä¾›2å€å›¾ï¼ŒæŠŠèµ„æºå‘½åæˆå¸¦@2xæ ¼å¼ï¼Œä½¿ç”¨çš„æ—¶å€™iOSä¼šè‡ªå·±è¯†åˆ«ï¼Œå¦‚æœä¸æä¾›2å€å›¾ä½¿ç”¨1å€å›¾å°±ä¼šæ”¾å¤§ä¸€å€æ˜¾ç¤ºï¼Œå¿…ç„¶å¤±çœŸã€‚\n\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c05118edf6d344d1a37a21bd41c7d9df~tplv-k3u1fbpfcp-zoom-1.image)\n\n\n<span style=\"background: pink; padding: 5px\">vw</span>   \nè§†çª—å®½åº¦ï¼Œ1vwè¡¨ç¤ºè§†çª—å®½åº¦çš„1%ï¼Œå“åº”å•ä½ï¼Œç‰©ç†é•¿åº¦ä¼šéšè§†çª—å®½åº¦å˜åŒ–è€Œå˜åŒ–ã€‚\n\n<span style=\"background: pink; padding: 5px\">vh</span>   \nè§†çª—é«˜åº¦ï¼Œ1vhè¡¨ç¤ºè§†çª—é«˜åº¦çš„1%ï¼Œå“åº”å•ä½ï¼Œç‰©ç†é•¿åº¦ä¼šéšè§†çª—é«˜åº¦å˜åŒ–è€Œå˜åŒ–ã€‚\n\n<span style=\"background: pink; padding: 5px\">vmin</span>   \nvminå–è§†çª—å®½åº¦é«˜åº¦ä¸¤è€…æ›´å°è€…ï¼Œ1vminè¡¨ç¤ºè§†çª—å®½åº¦é«˜åº¦ä¸¤è€…æ›´å°è€…çš„1%ã€‚\n\n<span style=\"background: pink; padding: 5px\">vmax</span>   \nvmaxå–è§†çª—å®½åº¦é«˜åº¦ä¸¤è€…æ›´å¤§è€…ï¼Œ1vmaxè¡¨ç¤ºè§†çª—å®½åº¦é«˜åº¦ä¸¤è€…æ›´å¤§è€…çš„1%ã€‚\n\nvwã€vhã€vminã€vmax è¿™å‡ ä¸ªå•ä½è¿˜æ˜¯æ¯”è¾ƒå®ç”¨çš„ï¼Œå½“åšä¸€äº›PCçš„å“åº”å¼å¸ƒå±€æ—¶ç»å¸¸ä¼šç”¨åˆ°%ï¼Œä½†%æ˜¯åŸºäºçˆ¶å…ƒç´ çš„ï¼Œæç«¯æƒ…å†µä¸‹çˆ¶å…ƒç´ å¯èƒ½æ²¡æœ‰æ’‘å¼€ï¼Œè¿™æ—¶å€™å°±å¾—ä¸€å±‚ä¸€å±‚çš„å»æ£€æŸ¥ï¼Œæ’‘å¼€ç›¸åº”çš„çˆ¶çº§ï¼Œæˆ–è€…åšå®½é«˜éƒ½æ˜¯100%å±å¹•çš„å¤§å±å±•ç¤ºç³»ç»Ÿè¿™ç§æƒ…å†µç”¨vwã€vhéƒ½æ˜¯å¾ˆåˆé€‚çš„ã€‚\n\n<span style=\"background: pink; padding: 5px\">ex</span>   \nexè¡¨ç¤ºå…ƒç´ å†…å­—ç¬¦xçš„é«˜åº¦ï¼Œä¸€ä¸ªå°å†™å­—æ¯ï¼Œæ¯”å¦‚â€œdâ€ï¼Œå®ƒä¼šæœ‰ä¸€éƒ¨åˆ†é«˜å‡ºæ¥ï¼Œexä¸åŒ…æ‹¬é«˜å‡ºæ¥çš„è¿™ä¸€éƒ¨åˆ†çš„ã€‚\n\n<span style=\"background: pink; padding: 5px\">ch</span>   \nchè¡¨ç¤ºå…ƒç´ å†…æ•°å­—0çš„å®½åº¦\n\n<span style=\"background: pink; padding: 5px\">em</span>   \nemè¡¨ç¤ºå½“å‰å…ƒç´ font-sizeçš„å¤§å°ï¼Œç°ä»£æ‰€æœ‰çš„æµè§ˆå™¨ä¸­ï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ªé»˜è®¤å€¼ï¼Œå³1em = 16pxã€‚\n\nå€¼å¾—æ³¨æ„çš„ä¸€ç‚¹æ˜¯å½±å“emå˜åŒ–çš„å› ç´ åªæœ‰font-sizeï¼Œè€Œå½±å“ exã€ch å˜åŒ–çš„å› ç´ é™¤font-sizeå¤–è¿˜æœ‰font-familyï¼Œå› ä¸ºfont-familyçš„æ”¹å˜ä¹Ÿä¼šä½¿å¾—xæˆ–è€…0å­—ç¬¦çš„å¤§å°å‘ç”Ÿå˜åŒ–ã€‚\n\nemæœ‰ç»§æ‰¿çš„ç‰¹æ€§ä¹Ÿå°±æ˜¯çº§è”æ•ˆæœï¼Œå¦‚æœå½“å‰å…ƒç´ æœªè®¾ç½®font-sizeå®ƒä¼šç»§æ‰¿çˆ¶å…ƒç´ çš„font-sizeï¼Œçœ‹ä¸‹é¢çš„æ•ˆæœï¼š\n```\n<div style=\"font-size: 12px\">\n  font-sizeï¼š12px\n  <div style=\"font-size: 1.2em\">\n    font-sizeï¼š12 * 1.2 = 14.4px\n    <div style=\"font-size: 1.2em\">\n      font-sizeï¼š12 * 1.2 * 1.2 = 17.28px\n    </div>\n  </div>\n</div>\n```\n\nä¸¾ä¸€ä¸ªå®é™…é¡¹ç›®ä¸­çš„ä¾‹å­ï¼Œä¹‹å‰æå¯Œæ–‡æœ¬ç¼–è¾‘å™¨éœ€è¦æ§åˆ¶å­—ä½“å¤§å°ï¼Œæˆ‘å®šä¹‰äº†å››ç§è§„æ ¼åˆ†åˆ«æ˜¯ Smallã€Normalã€Largeã€Hugeï¼Œçˆ¶çº§å®¹å™¨font-sizeé»˜è®¤æ˜¯Normalè§„æ ¼è®¾ç½®ä¸º16pxï¼Œå‰©ä¸‹çš„åˆ†åˆ«æ˜¯Small0.8emã€Large1.2emã€Huge1.8emï¼Œè¿™æ ·æˆ‘ä»¬è°ƒæ•´äº†çˆ¶å®¹å™¨çš„font-sizeå€¼ä¹‹åå…¶ä»–è§„æ ¼çš„å­—ä½“éƒ½ä¼šè·Ÿç€å‘ç”Ÿå˜åŒ–ã€‚\n\n<span style=\"background: pink; padding: 5px\">rem</span>   \nremï¼ˆroot emï¼‰ï¼Œç›¸å¯¹æ ¹å…ƒç´ çš„font-sizeæ˜¯åŠ¨æ€çš„ï¼Œå’Œå½“å‰å…ƒç´ æ— å…³ï¼Œå½“æµè§ˆå™¨è§£æHTMLå…ƒç´ æ—¶ï¼Œä¼šå°†é¡µé¢æ¸²æŸ“æˆä¸€ä¸ªæ ‘å½¢ç»“æ„ï¼Œ`<html>`èŠ‚ç‚¹æ˜¯æœ€å¤–å±‚çš„çˆ¶å…ƒç´ ï¼ˆæ ¹èŠ‚ç‚¹ï¼‰ï¼Œremè¡¨ç¤ºhtmlèŠ‚ç‚¹çš„font-sizeå¤§å°ï¼Œå½“æ ¹å…ƒç´ æœªè®¾ç½®font-sizeå€¼æ—¶ï¼Œé»˜è®¤å–16pxã€‚\n\n> æœ‰ä¸€ä¸ªç‰¹åˆ«çš„ä¼ªç±» :root å¯ä»¥ç›´æ¥é€‰ä¸­æ ¹èŠ‚ç‚¹htmlï¼Œå’Œé€šè¿‡htmlé€‰æ‹©å™¨é€‰ä¸­htmlèŠ‚ç‚¹æ²¡æœ‰ä»»ä½•åŒºåˆ«\n\n\n## remå¦‚ä½•ä½¿ç”¨\nremåªæ˜¯å¼€å‘è€…å·¥å…·ç®±ä¸­çš„ä¸€ä¸ªå·¥å…·å¹¶ä¸æ˜¯ä¸‡èƒ½çš„ï¼Œä¸€èˆ¬ä½¿ç”¨åœ¨ç§»åŠ¨ç«¯çš„å“åº”å¼å¸ƒå±€ä¸Šï¼Œå¸¸ç”¨æ¥è®¾ç½®å­—ä½“å¤§å°ä»¥åŠéƒ¨åˆ†å®¹å™¨çš„å®½é«˜ï¼Œè¾¹æ¡†åˆ™ç”¨pxï¼Œå®¹å™¨çš„å¸ƒå±€æœ‰æ—¶ç”¨ç™¾åˆ†æ¯”ä¹Ÿèƒ½å¾ˆå¥½è§£å†³ï¼Œremå¹¶ä¸æ˜¯ä¸‡èƒ½çš„ã€‚\n\nç§»åŠ¨ç«¯åœ¨å¼€å§‹å¸ƒå±€ä¹‹å‰éœ€è¦å…ˆè®¾ç½®metaæ ‡ç­¾ï¼Œæ¥æŒ‡å®šé»˜è®¤çš„ç¼©æ”¾æ¯”ï¼Œä»¥åŠæ˜¯å¦å…è®¸ç”¨æˆ·ç¼©æ”¾ã€‚\n```\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1.0, user-scalable=no, viewport-fit=cover\">\n```\n  - **content=\"width=device-width**  å†…å®¹çš„å®½åº¦è®¾ç½®ä¸ºè®¾å¤‡å®½åº¦\n  - **user-scalable=no\"**  æ˜¯å¦å…è®¸ç”¨æˆ·è¿›è¡Œç¼©æ”¾\n  - **initial-scale=1**  è®¾ç½®é¡µé¢çš„åˆå§‹ç¼©æ”¾å€¼\n  - **minimum-scale=1**  å…è®¸ç”¨æˆ·çš„æœ€å°ç¼©æ”¾å€¼\n  - **maximum-scale=1**  å…è®¸ç”¨æˆ·çš„æœ€å¤§ç¼©æ”¾å€¼\n\n\n### è®¾ç½®åŸºå‡†å€¼æ³•\nè®¾è®¡å¸ˆä¸€èˆ¬ä»¥iPhone6çš„äºŒå€å›¾å‡ºè®¾è®¡ç¨¿ï¼Œé‚£ä¹ˆè®¾è®¡ç¨¿çš„å®½åº¦å°±æ˜¯750pxï¼Œæˆ‘ä»¬è®¾ç½®æ ¹çš„font-sizeå€¼ä¸º (clientWidth Ã· 7.5)px æ­¤æ—¶å¯ä»¥å¾—åˆ°ä¸‹é¢ä¸¤ä¸ªå¼å­ï¼š\n> (clientWidth Ã· 7.5)px = 1rem   \n750px Ã· 7.5 = 100px   \n\n- clientWidthæ˜¯è®¾å¤‡å®½åº¦ï¼Œæ˜¯ä¸€ä¸ªåŠ¨æ€çš„å€¼ï¼Œä¸ç®¡ `clientWidth Ã· 7.5` çš„å…·ä½“å€¼æ˜¯å¤šå°‘ï¼Œå› ä¸ºè®¾ç½®ç»™äº†æ ¹çš„font-sizeï¼Œæ‰€ä»¥éƒ½æ˜¯1remçš„å€¼ï¼›\n- å› ä¸ºå¸ƒå±€æ˜¯å“åº”å¼çš„ï¼Œå®¹å™¨çš„å®½åº¦å æ¯”åº”è¯¥ä¿æŒä¸€è‡´ï¼Œè®¾è®¡ç¨¿çš„å®½åº¦æ˜¯750pxï¼Œ100pxå è®¾è®¡ç¨¿çš„7.5åˆ†ä¹‹ä¸€ï¼Œåœ¨çœŸæœºä¸Šä¹Ÿåº”è¯¥å 7.5åˆ†ä¹‹ä¸€ï¼Œä¹Ÿå°±æ˜¯1remï¼›\n\næ ¹æ®ä¸Šé¢ä¸¤æ¡è§„åˆ™å¯ä»¥å¾—å‡ºç»“è®ºè®¾è®¡ç¨¿çš„100pxç­‰äºæ•´æœºçš„1remï¼Œåœ¨åšå¼€å‘çš„æ—¶å€™é‡å‡ºè®¾è®¡ç¨¿ä¸­å…ƒç´ çš„å°ºå¯¸å†é™¤ä»¥100ï¼Œå°±æ˜¯cssä¸­åº”è¯¥è®¾ç½®çš„remå€¼ã€‚\n\næ ¹font-sizeçš„è®¾ç½®å¯ä»¥ç”¨åˆ°vw `font-size: calc(100vw/7.5)`ï¼Œä¸æ”¯æŒvwçš„è®¾å¤‡å¯ä»¥é…åˆ `document.documentElement.style.fontSize = document.documentElement.clientWidth / 7.5 + 'px'`ã€‚\n\n### æ‰‹æ·˜flexibleæ³•\nflexibleæ˜¯æ‰‹æœºæ·˜å®å›¢é˜Ÿçš„å¼€æºè§£å†³æ–¹æ¡ˆï¼ŒåŸç†å¤§è‡´å°±æ˜¯ä»¥è®¾è®¡ç¨¿ä¸ºåŸºå‡†ï¼Œå°†è®¾è®¡ç¨¿çš„å®½åº¦å¹³åˆ†ä¸º10ä»½ï¼ŒæŠŠä¸€ä»½çš„å®½åº¦è®¾ç½®ä¸ºæ ¹font-sizeçš„å¤§å°ï¼Œè¿™æ ·1remåœ¨çœŸæœºä¸Šçš„å®½åº¦å’Œè®¾è®¡ç¨¿ååˆ†ä¹‹ä¸€çš„å®½åº¦å æ¯”ä¸€è‡´ï¼Œæ„Ÿè§‰ä¸Šå¾ˆåƒvwï¼ŒåŒæ—¶flexibleè¿˜æ”¯æŒåŠ¨æ€ç”Ÿæˆmetaæ ‡ç­¾ã€‚\n\n\n\n[flexibleå…·ä½“çš„è§£å†³æ–¹æ¡ˆçœ‹è¿™ç¯‡](https://github.com/beipiaoyu2011/flexible)\n\n\n\n\n\n\n", "user_name": "èˆ¹é•¿_", "description": "æµ‘ç„¶ä¸çŸ¥", "got_view_count": 38236, "category_name": "é˜…è¯»", "ctime": 1457483895}
{"tag_name": "CSS", "concern_user_count": 258450, "user_id": "1257497033714477", "title": "CSSæ°´å¹³å‚ç›´å±…ä¸­å›é¡¾æ€»ç»“", "mark_content": "<section id=\"nice\" data-tool=\"mdniceç¼–è¾‘å™¨\" data-website=\"https://www.mdnice.com\" style=\"font-size: 16px; padding: 0 10px; word-spacing: 0px; word-break: break-word; word-wrap: break-word; text-align: left; line-height: 1.25; color: #2b2b2b; font-family: Optima-Regular, Optima, PingFangTC-Light, PingFangSC-light, PingFangTC-light; letter-spacing: 2px; background-image: linear-gradient(90deg, rgba(50, 0, 0, 0.04) 3%, rgba(0, 0, 0, 0) 3%), linear-gradient(360deg, rgba(50, 0, 0, 0.04) 3%, rgba(0, 0, 0, 0) 3%); background-size: 20px 20px; background-position: center center;\"><h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #40B8FA;\"><span class=\"prefix\" style=\"display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://my-wechat.mdnice.com/fullstack-1.png); margin-bottom: -22px;\"></span><span class=\"content\" style=\"display: flex; color: #40B8FA; font-size: 20px; margin-left: 25px;\">å‰è¨€</span><span class=\"suffix\" style=\"display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(64, 184, 250, .5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;\"></span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ç”¨äº†ä¸€æ®µæ—¶é—´çš„ material-uiï¼Œéƒ½å¾ˆå°‘è‡ªå·±åŠ¨æ‰‹å†™åŸç”Ÿçš„æ ·å¼äº†ã€‚ä½†html, css, js å§‹ç»ˆæ˜¯å‰ç«¯çš„ä¸‰å¤§åŸºç¡€ï¼Œè¿™å‘¨çªç„¶æƒ³åˆ° CSSæ°´å¹³å±…ä¸­æ–¹æ¡ˆï¼Œå› ä¸ºç”¨å¤šäº† <code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">flex</code> å’Œ <code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">margin: auto</code>ç­‰è¿™ç±»æ–¹æ¡ˆè§£å†³ï¼Œåœ¨å›é¡¾è¿˜æœ‰è¿˜æœ‰å‡ ç§æ–¹æ¡ˆå¯ä»¥è§£å†³ï¼Œäºæ˜¯æ‰“ç®—æ¸©æ•…çŸ¥æ–°ï¼Œé‡æ–°æ‰“ä¸‹ä»£ç ï¼Œå†™ä¸‹è¯¥æ–‡ä½œä¸ºç¬”è®°ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">html ä»£ç </p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #383a42; background: #fafafa; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\"><span class=\"hljs-tag\" style=\"line-height: 26px;\">&lt;<span class=\"hljs-name\" style=\"color: #e45649; line-height: 26px;\">div</span>&nbsp;<span class=\"hljs-attr\" style=\"color: #986801; line-height: 26px;\">class</span>=<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">\"parent\"</span>&gt;</span><br>&nbsp;&nbsp;<span class=\"hljs-tag\" style=\"line-height: 26px;\">&lt;<span class=\"hljs-name\" style=\"color: #e45649; line-height: 26px;\">div</span>&nbsp;<span class=\"hljs-attr\" style=\"color: #986801; line-height: 26px;\">class</span>=<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">\"child\"</span>&gt;</span><span class=\"hljs-tag\" style=\"line-height: 26px;\">&lt;/<span class=\"hljs-name\" style=\"color: #e45649; line-height: 26px;\">div</span>&gt;</span><br><span class=\"hljs-tag\" style=\"line-height: 26px;\">&lt;/<span class=\"hljs-name\" style=\"color: #e45649; line-height: 26px;\">div</span>&gt;</span><br></code></pre>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">css ä»£ç </p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #383a42; background: #fafafa; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\"><span class=\"hljs-selector-class\" style=\"color: #986801; line-height: 26px;\">.parent</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">width</span>:&nbsp;<span class=\"hljs-number\" style=\"color: #986801; line-height: 26px;\">300px</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">height</span>:&nbsp;<span class=\"hljs-number\" style=\"color: #986801; line-height: 26px;\">300px</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">background-color</span>:&nbsp;blue;<br>}<br><span class=\"hljs-selector-class\" style=\"color: #986801; line-height: 26px;\">.child</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">width</span>:&nbsp;<span class=\"hljs-number\" style=\"color: #986801; line-height: 26px;\">100px</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">height</span>:&nbsp;<span class=\"hljs-number\" style=\"color: #986801; line-height: 26px;\">100px</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">background-color</span>:&nbsp;red;<br>}<br></code></pre>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ä¸‹é¢ä»£ç åŸºäºä¸Šè¿°ä»£ç å¢åŠ ï¼Œä¸ä¼šå†é‡å¤å†™ã€‚è¦å®ç°çš„æ•ˆæœæ˜¯è®©å­å…ƒç´ åœ¨çˆ¶å…ƒç´ ä¸­æ°´å¹³å‚ç›´å±…ä¸­\n<img src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1d9ccfcd90a64bd58de3cf3e972c5981~tplv-k3u1fbpfcp-zoom-1.image\" alt style=\"max-width: 100%; border-radius: 6px; display: block; margin: 20px auto; object-fit: contain; box-shadow: 2px 4px 7px #999;\"></p>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #40B8FA;\"><span class=\"prefix\" style=\"display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://my-wechat.mdnice.com/fullstack-1.png); margin-bottom: -22px;\"></span><span class=\"content\" style=\"display: flex; color: #40B8FA; font-size: 20px; margin-left: 25px;\">ä¸€ã€flex å¸ƒå±€</span><span class=\"suffix\" style=\"display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(64, 184, 250, .5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;\"></span></h2>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #383a42; background: #fafafa; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\"><span class=\"hljs-selector-class\" style=\"color: #986801; line-height: 26px;\">.parent</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">display</span>:&nbsp;flex;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">justify-content</span>:&nbsp;center;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">align-items</span>:&nbsp;center;<br>}<br></code></pre>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">è¿™æ˜¯æœ€ç»å…¸çš„ç”¨æ³•äº†ï¼Œä¸è¿‡ï¼Œä¹Ÿå¯ä»¥æœ‰å¦ä¸€ç§å†™æ³•å®ç°ï¼š</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #383a42; background: #fafafa; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\">.parent&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;display:&nbsp;flex;<br>}<br>.child&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;align-self:&nbsp;center;<br>&nbsp;&nbsp;&nbsp;&nbsp;margin:&nbsp;auto;<br>}<br></code></pre>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #40B8FA;\"><span class=\"prefix\" style=\"display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://my-wechat.mdnice.com/fullstack-1.png); margin-bottom: -22px;\"></span><span class=\"content\" style=\"display: flex; color: #40B8FA; font-size: 20px; margin-left: 25px;\">äºŒã€absolute + è´Ÿ margin</span><span class=\"suffix\" style=\"display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(64, 184, 250, .5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;\"></span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">è¯¥æ–¹æ³•é€‚ç”¨äºçŸ¥é“å›ºå®šå®½é«˜çš„æƒ…å†µã€‚</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #383a42; background: #fafafa; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\"><span class=\"hljs-selector-class\" style=\"color: #986801; line-height: 26px;\">.parent</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">position</span>:&nbsp;relative;<br>}<br><span class=\"hljs-selector-class\" style=\"color: #986801; line-height: 26px;\">.child</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">position</span>:&nbsp;absolute;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">top</span>:&nbsp;<span class=\"hljs-number\" style=\"color: #986801; line-height: 26px;\">50%</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">left</span>:&nbsp;<span class=\"hljs-number\" style=\"color: #986801; line-height: 26px;\">50%</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">margin-top</span>:&nbsp;-<span class=\"hljs-number\" style=\"color: #986801; line-height: 26px;\">50px</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">margin-left</span>:&nbsp;-<span class=\"hljs-number\" style=\"color: #986801; line-height: 26px;\">50px</span>;<br>}<br></code></pre>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #40B8FA;\"><span class=\"prefix\" style=\"display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://my-wechat.mdnice.com/fullstack-1.png); margin-bottom: -22px;\"></span><span class=\"content\" style=\"display: flex; color: #40B8FA; font-size: 20px; margin-left: 25px;\">ä¸‰ã€absolute + transform</span><span class=\"suffix\" style=\"display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(64, 184, 250, .5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;\"></span></h2>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #383a42; background: #fafafa; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\"><span class=\"hljs-selector-class\" style=\"color: #986801; line-height: 26px;\">.parent</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">position</span>:&nbsp;relative;<br>}<br><span class=\"hljs-selector-class\" style=\"color: #986801; line-height: 26px;\">.child</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">position</span>:&nbsp;absolute;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">top</span>:&nbsp;<span class=\"hljs-number\" style=\"color: #986801; line-height: 26px;\">50%</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">left</span>:&nbsp;<span class=\"hljs-number\" style=\"color: #986801; line-height: 26px;\">50%</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">transform</span>:&nbsp;<span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">translate</span>(-50%,&nbsp;-50%);<br>}<br></code></pre>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #40B8FA;\"><span class=\"prefix\" style=\"display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://my-wechat.mdnice.com/fullstack-1.png); margin-bottom: -22px;\"></span><span class=\"content\" style=\"display: flex; color: #40B8FA; font-size: 20px; margin-left: 25px;\">å››ã€absolute + margin auto</span><span class=\"suffix\" style=\"display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(64, 184, 250, .5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;\"></span></h2>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #383a42; background: #fafafa; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\"><span class=\"hljs-selector-class\" style=\"color: #986801; line-height: 26px;\">.parent</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">position</span>:&nbsp;relative;<br>}<br><span class=\"hljs-selector-class\" style=\"color: #986801; line-height: 26px;\">.child</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">position</span>:&nbsp;absolute;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">top</span>:&nbsp;<span class=\"hljs-number\" style=\"color: #986801; line-height: 26px;\">0</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">left</span>:&nbsp;<span class=\"hljs-number\" style=\"color: #986801; line-height: 26px;\">0</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">right</span>:&nbsp;<span class=\"hljs-number\" style=\"color: #986801; line-height: 26px;\">0</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">bottom</span>:&nbsp;<span class=\"hljs-number\" style=\"color: #986801; line-height: 26px;\">0</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">margin</span>:&nbsp;auto;<br>}<br></code></pre>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #40B8FA;\"><span class=\"prefix\" style=\"display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://my-wechat.mdnice.com/fullstack-1.png); margin-bottom: -22px;\"></span><span class=\"content\" style=\"display: flex; color: #40B8FA; font-size: 20px; margin-left: 25px;\">äº”ã€absolute + calc</span><span class=\"suffix\" style=\"display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(64, 184, 250, .5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;\"></span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">è¯¥æ–¹æ³•é€‚ç”¨äºçŸ¥é“å›ºå®šå®½é«˜çš„æƒ…å†µã€‚</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #383a42; background: #fafafa; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\"><span class=\"hljs-selector-class\" style=\"color: #986801; line-height: 26px;\">.parent</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">position</span>:&nbsp;relative;<br>}<br><span class=\"hljs-selector-class\" style=\"color: #986801; line-height: 26px;\">.child</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">position</span>:&nbsp;absolute;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">top</span>:&nbsp;<span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">calc</span>(50%&nbsp;-&nbsp;50px);<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">left</span>:&nbsp;<span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">calc</span>(50%&nbsp;-&nbsp;50px);<br>}<br></code></pre>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #40B8FA;\"><span class=\"prefix\" style=\"display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://my-wechat.mdnice.com/fullstack-1.png); margin-bottom: -22px;\"></span><span class=\"content\" style=\"display: flex; color: #40B8FA; font-size: 20px; margin-left: 25px;\">å…­ã€text-align + vertical-align</span><span class=\"suffix\" style=\"display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(64, 184, 250, .5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;\"></span></h2>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #383a42; background: #fafafa; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\"><span class=\"hljs-selector-class\" style=\"color: #986801; line-height: 26px;\">.parent</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">text-align</span>:&nbsp;center;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">line-height</span>:&nbsp;<span class=\"hljs-number\" style=\"color: #986801; line-height: 26px;\">300px</span>;&nbsp;<span class=\"hljs-comment\" style=\"color: #a0a1a7; font-style: italic; line-height: 26px;\">/*&nbsp;ç­‰äº&nbsp;parent&nbsp;çš„&nbsp;height&nbsp;*/</span><br>}<br><span class=\"hljs-selector-class\" style=\"color: #986801; line-height: 26px;\">.child</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">display</span>:&nbsp;inline-block;<br>&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">vertical-align</span>:&nbsp;middle;<br>&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">line-height</span>:&nbsp;initial;&nbsp;<span class=\"hljs-comment\" style=\"color: #a0a1a7; font-style: italic; line-height: 26px;\">/*&nbsp;è¿™æ ·&nbsp;child&nbsp;å†…çš„æ–‡å­—å°±ä¸ä¼šè¶…å‡ºè·‘åˆ°ä¸‹é¢&nbsp;*/</span><br>}<br></code></pre>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #40B8FA;\"><span class=\"prefix\" style=\"display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://my-wechat.mdnice.com/fullstack-1.png); margin-bottom: -22px;\"></span><span class=\"content\" style=\"display: flex; color: #40B8FA; font-size: 20px; margin-left: 25px;\">ä¸ƒã€table-cell</span><span class=\"suffix\" style=\"display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(64, 184, 250, .5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;\"></span></h2>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #383a42; background: #fafafa; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\"><span class=\"hljs-selector-class\" style=\"color: #986801; line-height: 26px;\">.parent</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">display</span>:&nbsp;table-cell;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">text-align</span>:&nbsp;center;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">vertical-align</span>:&nbsp;middle;<br>}<br><span class=\"hljs-selector-class\" style=\"color: #986801; line-height: 26px;\">.child</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">display</span>:&nbsp;inline-block;<br>}<br></code></pre>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #40B8FA;\"><span class=\"prefix\" style=\"display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://my-wechat.mdnice.com/fullstack-1.png); margin-bottom: -22px;\"></span><span class=\"content\" style=\"display: flex; color: #40B8FA; font-size: 20px; margin-left: 25px;\">å…«ã€Grid</span><span class=\"suffix\" style=\"display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(64, 184, 250, .5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;\"></span></h2>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #383a42; background: #fafafa; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\"><span class=\"hljs-selector-class\" style=\"color: #986801; line-height: 26px;\">.parent</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">display</span>:&nbsp;grid;<br>}<br><span class=\"hljs-selector-class\" style=\"color: #986801; line-height: 26px;\">.child</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">align-self</span>:&nbsp;center;<br>&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">justify-self</span>:&nbsp;center;<br>}<br></code></pre>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #40B8FA;\"><span class=\"prefix\" style=\"display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://my-wechat.mdnice.com/fullstack-1.png); margin-bottom: -22px;\"></span><span class=\"content\" style=\"display: flex; color: #40B8FA; font-size: 20px; margin-left: 25px;\">ä¹ã€writing-mode</span><span class=\"suffix\" style=\"display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(64, 184, 250, .5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;\"></span></h2>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #383a42; background: #fafafa; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\"><span class=\"hljs-selector-class\" style=\"color: #986801; line-height: 26px;\">.parent</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">writing-mode</span>:&nbsp;vertical-lr;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">text-align</span>:&nbsp;center;<br>}<br><span class=\"hljs-selector-class\" style=\"color: #986801; line-height: 26px;\">.child</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">writing-mode</span>:&nbsp;horizontal-tb;<br>&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">display</span>:&nbsp;inline-block;<br>&nbsp;&nbsp;&nbsp;<span class=\"hljs-attribute\" style=\"color: #50a14f; line-height: 26px;\">margin</span>:&nbsp;<span class=\"hljs-number\" style=\"color: #986801; line-height: 26px;\">0</span>&nbsp;<span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">calc</span>(50%&nbsp;-&nbsp;50px);<br>}<br></code></pre>\n<br data-tool=\"mdniceç¼–è¾‘å™¨\">\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">psï¼š <a href=\"https://github.com/Jacky-Summer/personal-blog\" style=\"text-decoration: none; word-wrap: break-word; color: #40B8FA; font-weight: normal; border-bottom: 1px solid #3BAAFA;\">ä¸ªäººæŠ€æœ¯åšæ–‡Githubä»“åº“</a>ï¼Œè§‰å¾—ä¸é”™çš„è¯æ¬¢è¿starï¼Œç»™æˆ‘ä¸€ç‚¹é¼“åŠ±å§~</section></li></ul>\n</section>", "user_name": "JackySummer", "description": "å‰ç«¯è·¯ä¸Šï¼Œä¸åœåŠªåŠ›", "got_view_count": 25603, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "Vue.js", "concern_user_count": 263220, "user_id": "3298190611191576", "title": "æŠ¥å‘Šè€æ¿ï¼Œæˆ‘ä»¬çš„H5é¡µé¢åœ¨iOS11ç³»ç»Ÿä¸Šç™½å±äº†ï¼", "mark_content": "<section id=\"nice\" data-tool=\"mdniceç¼–è¾‘å™¨\" data-website=\"https://www.mdnice.com\" style=\"font-size: 16px; color: black; padding: 0 10px; line-height: 1.6; word-spacing: 0px; letter-spacing: 0px; word-break: break-word; word-wrap: break-word; text-align: left; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, 'PingFang SC', Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;\"><p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">æ—¶é—´å›åˆ°ä¸€å‘¨å‰ï¼Œå½“æ—¶åˆšå¼€å‘å®Œå…¬å¸Aé¡¹ç›®çš„ä¸€ä¸ªæ–°çš„ç‰ˆæœ¬ï¼Œç­‰å¾…ç€æµ‹è¯•å®Œæˆå°±è¿›è¡Œå‘å¸ƒã€‚æ­¤æ—¶çš„æˆ‘ä¹Ÿå‡†å¤‡ä»è¿ç»­å¤šæ—¥çš„ç´§å¼ å¼€å‘çŠ¶æ€ä¸­èµ°å‡ºæ¥ï¼Œä»¥ä¸ºå¯ä»¥ç¨ç¨æ”¾æ¾ä¸€ä¸‹ã€‚è€Œé‚£æ—¶çš„æˆ‘è¿˜ä¸çŸ¥é“ï¼Œ<strong style=\"font-weight: bold; color: black;\">æˆ‘å³å°†é¢ä¸´ä¸€ä¸ªå¼ºå¤§çš„Bugé€‰æ‰‹ï¼Œæ›´ä¸çŸ¥é“æˆ‘è¦è·Ÿè¿™ä¸ªBugæ¥æ¥å›å›è¿›è¡Œå¤šæ¬¡çš„ææ–—</strong>ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬èƒ½çœ‹åˆ°è¿™ç¯‡æ–‡ç« ä¹Ÿå°±è¯´æ˜äº†æˆ‘æœ€ç»ˆè§£å†³äº†è¿™ä¸ªBugï¼Œè€Œä¸”è¿™ä¸ªè¿‡ç¨‹ä¹Ÿæ˜¯ç›¸å½“çš„ç²¾å½©çš„ã€‚ä»€ä¹ˆï¼Ÿä½ ä¸ç›¸ä¿¡ï¼Œé‚£å°±è®©æˆ‘æ¥å¸¦ä½ è¿›å…¥è¿™ä¸ªâ€œè·Œå®•èµ·ä¼â€çš„ç»å†ä¸­å§ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\"><strong style=\"font-weight: bold; color: black;\">å‹æƒ…æç¤º</strong>ï¼šæ¥ä¸‹æ¥çš„æ–‡ç« ä¹Ÿè®¸æœ‰ä¸€ç‚¹é•¿ï¼Œä½†æ˜¯å¸Œæœ›ä½ èƒ½å¤ŸåšæŒè¯»ä¸‹å»ã€‚æˆ‘ç›¸ä¿¡æˆ‘åœ¨è§£å†³è¿™ä¸ªBugçš„è¿‡ç¨‹ä¸­çš„ä¸€äº›æ€è·¯ä¼šç»™ä½ å¸¦æ¥ä¸€äº›æ€è€ƒã€‚<strong style=\"font-weight: bold; color: black;\">å½“ç„¶ä¹Ÿå¸Œæœ›ä½ åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­èƒ½å¤Ÿåƒæˆ‘ä¸€æ ·å­¦ä¹ åˆ°ä¸€äº›æ–°çš„çŸ¥è¯†ï¼Œä¸ºä»¥åæ’æŸ¥ç±»ä¼¼çš„Bugç§¯ç´¯ä¸€äº›ç»éªŒ</strong>ã€‚å¥½å•¦ï¼Œè¯ä¸å¤šè¯´ï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ã€‚</p>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; border-bottom: 2px solid rgb(239, 112, 96); font-size: 1.3em;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"display: inline-block; font-weight: bold; background: rgb(239, 112, 96); color: #ffffff; padding: 3px 10px 1px; border-top-right-radius: 3px; border-top-left-radius: 3px; margin-right: 3px;\">é¡¹ç›®ä»‹ç»</span><span class=\"suffix\"></span><span style=\"display: inline-block; vertical-align: bottom; border-bottom: 36px solid #efebe9; border-right: 20px solid transparent;\"> </span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">å…ˆæ¥ç®€å•ä»‹ç»ä¸€ä¸‹Aé¡¹ç›®ï¼Œè¿™æ˜¯ä¸€ä¸ªåŸºäº<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Vue</code>æ¡†æ¶çš„é¡¹ç›®ï¼Œé¡¹ç›®ä½¿ç”¨çš„ä¹Ÿæ˜¯<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Vue CLI</code>è¿™ä¸ªå¼€å‘å·¥å…·ã€‚è¿™ä¸ªé¡¹ç›®æ˜¯éœ€è¦é›†æˆåœ¨åˆ«çš„APPä¸­çš„ï¼Œä¹Ÿå°±æ˜¯é¡µé¢éœ€è¦åœ¨APPä¸­è¿›æµè§ˆå’Œæ“ä½œã€‚è¿™ä¸ªé¡¹ç›®åœ¨æˆ‘æ¥æ‰‹ä¹‹å‰å·²ç»å¼€å‘è¿‡ä¸€æ®µæ—¶é—´äº†ã€‚<strong style=\"font-weight: bold; color: black;\">æ‰€ä»¥é¡¹ç›®ä¸­çš„ä¸€äº›ä¾èµ–åº“å’Œå·¥å…·åº“ç‰ˆæœ¬ç›¸å¯¹æ¯”è¾ƒä½ï¼Œè¿™ä¹Ÿç»™æˆ‘åç»­çš„è°ƒè¯•ä»¥åŠè§£å†³Bugçš„è¿‡ç¨‹å¢åŠ äº†ä¸€äº›å›°éš¾ã€‚</strong></p>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; border-bottom: 2px solid rgb(239, 112, 96); font-size: 1.3em;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"display: inline-block; font-weight: bold; background: rgb(239, 112, 96); color: #ffffff; padding: 3px 10px 1px; border-top-right-radius: 3px; border-top-left-radius: 3px; margin-right: 3px;\">BUGåˆç°</span><span class=\"suffix\"></span><span style=\"display: inline-block; vertical-align: bottom; border-bottom: 36px solid #efebe9; border-right: 20px solid transparent;\"> </span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">å½“æ—¶å¼€å‘å®Œæˆä¹‹åï¼Œå°±äº¤ç»™æˆ‘ä»¬è¿™è¾¹çš„æµ‹è¯•å’Œå¦ä¸€ä¸ªåŸå¸‚çš„ç›¸å…³åŒå­¦å»éªŒæ”¶è¿™æ¬¡å¼€å‘çš„åŠŸèƒ½ã€‚åœ¨æˆ‘ä»¬è¿™è¾¹ä¸€åˆ‡éƒ½å¾ˆæ­£å¸¸ï¼Œæµ‹è¯•è¿™è¾¹ä¹Ÿæ²¡æœ‰åé¦ˆæœ‰ä»€ä¹ˆé—®é¢˜ã€‚ä½†æ˜¯åœ¨å¦ä¸€ä¸ªåŸå¸‚çš„åŒå­¦å°Cçš„iPhoneæ‰‹æœºä¸Šå´å‘ç°äº†<strong style=\"font-weight: bold; color: black;\">ç™½å±</strong>ï¼Œæ‰“å¼€é¡µé¢ä¹‹åä»€ä¹ˆå†…å®¹ä¹Ÿæ²¡æœ‰ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">å‘ç°äº†è¿™ä¸ªé—®é¢˜ä¹‹åï¼Œæˆ‘å†æ¬¡è·Ÿæˆ‘ä»¬è¿™è¾¹çš„æµ‹è¯•åŒå­¦ç¡®è®¤äº†ä¸€ä¸‹ï¼Œçœ‹çœ‹æˆ‘ä»¬è¿™è¾¹æµ‹è¯•çš„iOSç³»ç»Ÿçš„iPhoneæ‰‹æœºæœ‰æ²¡æœ‰è¿™ä¸ªé—®é¢˜ã€‚ç»è¿‡æµ‹è¯•çš„æµ‹è¯•ï¼Œå‘ç°æˆ‘ä»¬è¿™è¾¹çš„å‡ å°iPhoneæ‰‹æœºéƒ½æ²¡æœ‰é—®é¢˜ã€‚ç„¶åå°±é—®äº†å°Cä»–ä½¿ç”¨çš„æµ‹è¯•æ‰‹æœºçš„ç³»ç»Ÿç‰ˆæœ¬æ˜¯å¤šå°‘ï¼Œå½“æ—¶æ„Ÿè§‰åº”è¯¥è·Ÿ<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">iOS</code>çš„ç³»ç»Ÿç‰ˆæœ¬æœ‰å…³ç³»ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">å°Cåé¦ˆè¯´ä»–çš„iPhoneæ˜¯<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">6S Plus</code>ï¼Œç„¶åç³»ç»Ÿçš„ç‰ˆæœ¬æ˜¯<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">11.1.2</code>ã€‚æˆ‘é—®äº†æˆ‘ä»¬è¿™è¾¹æµ‹è¯•ä½¿ç”¨çš„iPhoneç‰ˆæœ¬éƒ½æ˜¯å¤šå°‘ï¼Œæµ‹è¯•åé¦ˆè¯´ç³»ç»Ÿçš„ç‰ˆæœ¬éƒ½æ˜¯<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">12</code>ä»¥ä¸Šçš„ã€‚æ‰€ä»¥åˆ°è¿™é‡Œï¼Œ<strong style=\"font-weight: bold; color: black;\">æˆ‘ç¡®å®šäº†è¿™ä¸ªç™½å±Bugçš„å‡ºç°è‚¯å®šè·ŸiPhoneæ‰‹æœºçš„ç³»ç»Ÿæœ‰å…³ç³»</strong>ã€‚</p>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; border-bottom: 2px solid rgb(239, 112, 96); font-size: 1.3em;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"display: inline-block; font-weight: bold; background: rgb(239, 112, 96); color: #ffffff; padding: 3px 10px 1px; border-top-right-radius: 3px; border-top-left-radius: 3px; margin-right: 3px;\">é‡ç°BUGä¹‹è·¯</span><span class=\"suffix\"></span><span style=\"display: inline-block; vertical-align: bottom; border-bottom: 36px solid #efebe9; border-right: 20px solid transparent;\"> </span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">è™½ç„¶ç¡®å®šäº†é—®é¢˜å‡ºç°çš„ç¯å¢ƒï¼Œä½†æ˜¯å› ä¸ºæˆ‘èº«è¾¹æ²¡æœ‰ç³»ç»Ÿæ˜¯<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">11</code>çš„iPhoneæ‰‹æœºï¼Œæ‰€ä»¥æƒ³è®©è¿™ä¸ªé—®é¢˜é‡ç°å°±å˜æˆäº†ä¸€ä¸ªéš¾é¢˜ã€‚è¯¢é—®äº†èº«è¾¹çš„åŒäº‹ï¼Œå¤§å®¶çš„ç³»ç»Ÿç‰ˆæœ¬ä¹Ÿéƒ½æ™®éé«˜äº<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">12</code>ï¼Œæ‰€ä»¥å€Ÿç”¨åˆ«äººçš„æ‰‹æœºè¿›è¡Œè°ƒè¯•è¿™ä¸ªæ–¹æ³•æš‚æ—¶ä¹Ÿä¸å¯è¡Œã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">åœ¨å¹³æ—¶çš„å¼€å‘ä¸­ï¼Œå¦‚æœç½‘é¡µåœ¨<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">iOS</code>ç³»ç»Ÿçš„APPä¸­æœ‰ä¸€äº›é—®é¢˜çš„è¯ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½ä¼šé€šè¿‡<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Safari</code>æµè§ˆå™¨è¿›è¡Œè°ƒè¯•ã€‚ä½†æ˜¯å› ä¸ºè¿™æ¬¡å‡ºç°é—®é¢˜çš„iPhoneæ‰‹æœºä¸åœ¨æˆ‘è¿™é‡Œï¼Œå¹¶ä¸”æˆ‘è¿™è¾¹ä¹Ÿæ²¡æœ‰ç›¸åŒç³»ç»Ÿçš„æ‰‹æœºã€‚æ‰€ä»¥æƒ³é€šè¿‡çœŸæœºè¿›è¡Œè°ƒè¯•å°±ä¸å¤ªå¯èƒ½äº†ã€‚é‚£æ€ä¹ˆåŠå‘¢ï¼Ÿè¿™ä¸ªé—®é¢˜è‚¯å®šæ˜¯è¦è§£å†³çš„ï¼Œ<strong style=\"font-weight: bold; color: black;\">æˆ‘ä¹Ÿç›¸ä¿¡åŠæ³•æ€»æ¯”å›°éš¾å¤š</strong>ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">æƒ³è¦è¿›è¡Œè°ƒè¯•ï¼Œæœ€ç®€å•çš„åŠæ³•å°±æ˜¯è®©æˆ‘æœ‰ä¸€ä¸ªç³»ç»Ÿæ˜¯<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">11</code>çš„iPhoneæ‰‹æœºã€‚æ‰€ä»¥æˆ‘å°±æœç´¢çœ‹çœ‹æœ‰æ²¡æœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥ç»™iPhoneæ‰‹æœºå®‰è£…<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">11</code>çš„ç³»ç»Ÿã€‚ä¸€æœç´¢è¿˜çœŸçš„æœ‰ï¼Œè¿‡ç¨‹ä¹Ÿä¸ç®—æ˜¯å¾ˆå¤æ‚ã€‚ä½†æ˜¯å…¶ä¸­æœ‰ä¸€ä¸ªæ­¥éª¤æ˜¯éœ€è¦åˆ°ä¸€äº›è®ºå›æˆ–è€…ç¬¬ä¸‰æ–¹çš„åŠ©æ‰‹ç½‘ç«™ä¸‹è½½è·Ÿè‡ªå·±æ‰‹æœºå‹å·ç›¸åŒ¹é…çš„<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">iOS</code>ç³»ç»Ÿï¼Œè¿™ä¸ªæ­¥éª¤è®©æˆ‘æœ‰ç‚¹æ„Ÿè§‰ä¸å®‰å…¨ã€‚<strong style=\"font-weight: bold; color: black;\">æ¯•ç«Ÿä¸æ˜¯å®˜æ–¹çš„ï¼Œä¸èƒ½å¤Ÿä¿è¯å®‰å…¨æ€§ã€‚è€Œä¸”ä¹Ÿæœªå¿…æœ‰ç‰ˆæœ¬æ˜¯<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">11</code>çš„ç³»ç»Ÿã€‚æ‰€ä»¥è¿™ä¸ªæ–¹æ¡ˆå°±æš‚æ—¶ä½œç½¢</strong>ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">åœ¨æˆ‘æœç´¢çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘ç°æœ‰ç½‘å‹è¯´å¯ä»¥ä½¿ç”¨<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Xcode</code>å®‰è£…ç›¸åº”ç³»ç»Ÿç‰ˆæœ¬çš„iPhone<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">æ¨¡æ‹Ÿå™¨</code>æ¥è¿›è¡Œè°ƒè¯•ã€‚å“ï¼Œä½ è¯´æˆ‘æ€ä¹ˆæ²¡æœ‰æƒ³åˆ°è¿™ä¸ªåŠæ³•å‘¢ï¼Ÿè¿™ç¡®å®æ˜¯ä¸€ä¸ªä¸é”™çš„åŠæ³•ã€‚å› ä¸ºä¹‹å‰è·Ÿå…¬å¸çš„åŒäº‹å­¦ä¹ è¿‡<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Swift</code>ï¼Œä¹Ÿäº†è§£è¿‡<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Xcode</code>çš„ä¸€äº›æ“ä½œã€‚<strong style=\"font-weight: bold; color: black;\">çªç„¶æ„Ÿæ…¨ï¼ŒçœŸæ˜¯æŠ€å¤šä¸å‹èº«ï¼Œä½ ä¸çŸ¥é“ä½ ä»€ä¹ˆæ—¶å€™å°±ä¼šç”¨ä¸Šä½ å­¦è¿‡çš„çŸ¥è¯†ã€‚æ‰€ä»¥æœ‰æ¡ä»¶çš„è¯ï¼Œè¿˜æ˜¯å¤šå­¦ä¹ ä¸€äº›çŸ¥è¯†</strong>ã€‚é¢ï¼Œæœ‰ç‚¹è·‘é¢˜äº†ã€‚</p>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; border-bottom: 2px solid rgb(239, 112, 96); font-size: 1.3em;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"display: inline-block; font-weight: bold; background: rgb(239, 112, 96); color: #ffffff; padding: 3px 10px 1px; border-top-right-radius: 3px; border-top-left-radius: 3px; margin-right: 3px;\">å®‰è£…Xcode</span><span class=\"suffix\"></span><span style=\"display: inline-block; vertical-align: bottom; border-bottom: 36px solid #efebe9; border-right: 20px solid transparent;\"> </span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">æˆ‘æ‰“å¼€å…¬å¸çš„ç”µè„‘ï¼Œå¼€å§‹å®‰è£…<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Xcode</code>ï¼Œä½†æ˜¯å‘ç°å…¬å¸çš„ç”µè„‘ç³»ç»Ÿç‰ˆæœ¬å¤ªä½ï¼Œå®‰è£…<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Xcode</code>éœ€è¦å‡çº§ç³»ç»Ÿï¼Œæ‰€ä»¥æ²¡åŠæ³•ï¼Œå…ˆå‡çº§ç³»ç»Ÿå§ã€‚å› ä¸ºå‡çº§çš„æ—¶é—´æ¯”è¾ƒé•¿ï¼Œæˆ‘æƒ³åˆ°è‡ªå·±å®¶ä¸­çš„Macç”µè„‘ä¸Šæ˜¯æœ‰å®‰è£…è¿‡<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Xcode</code>ï¼Œæ‰€ä»¥å†³å®šå…ˆå›å®¶ã€‚ç•™ä¸‹å…¬å¸çš„ç”µè„‘æ…¢æ…¢å‡çº§ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">å›åˆ°å®¶ï¼ŒäºŒè¯ä¸è¯´å°±å¼€å§‹å‡†å¤‡è°ƒè¯•ï¼Œä½†æ˜¯å‘ç°æˆ‘çš„<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Xcode</code>ä¸Šé¢çš„iPhoneæ¨¡æ‹Ÿå™¨çš„ç³»ç»Ÿç‰ˆæœ¬ä¹Ÿéƒ½æ˜¯<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">12</code>ä»¥ä¸Šçš„ï¼ŒæŸ¥äº†ä¸€ä¸‹èµ„æ–™ï¼Œ<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Xcode</code>æ˜¯å¯ä»¥å®‰è£…ä¸åŒç³»ç»Ÿç‰ˆæœ¬çš„æ¨¡æ‹Ÿå™¨çš„ï¼Œäºæ˜¯æˆ‘å°±å®‰è£…äº†ç³»ç»Ÿç‰ˆæœ¬æ˜¯<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">11</code>çš„æ¨¡æ‹Ÿå™¨ã€‚è¿™ä¸ªè¿‡ç¨‹éœ€è¦æˆ‘ä»¬æ‰“å¼€<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Xcode</code>çš„åå¥½è®¾ç½®ï¼Œç„¶ååœ¨<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Components</code>é€‰é¡¹ä¸­ï¼Œé€‰æ‹©ä¸‹è½½ä½ è¦å®‰è£…çš„å¯¹åº”ç³»ç»Ÿç‰ˆæœ¬çš„æ¨¡æ‹Ÿå™¨ã€‚</p>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c03cf83e3a4245e3bb47c1c2bc5e86e6~tplv-k3u1fbpfcp-zoom-1.image\" alt=\"å®‰è£…iOS11çš„æ¨¡æ‹Ÿå™¨\" style=\"display: block; margin: 0 auto; max-width: 100%;\"><figcaption style=\"margin-top: 5px; text-align: center; color: #888; font-size: 14px;\">å®‰è£…iOS11çš„æ¨¡æ‹Ÿå™¨</figcaption></figure>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">å®‰è£…æˆåŠŸä¹‹åï¼Œè¿è¡Œ<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">iPhone 6S Plus</code>æ¨¡æ‹Ÿå™¨ï¼Œä½¿ç”¨æ¨¡æ‹Ÿå™¨çš„<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Safari</code>æ‰“å¼€h5çš„é¡µé¢åœ°å€ï¼Œæœç„¶æ˜¯ç™½å±ã€‚</p>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/50eebf0410254238a682489453e77b07~tplv-k3u1fbpfcp-zoom-1.image\" alt=\"iPhone 6S Plusæ¨¡æ‹Ÿå™¨å‡ºç°ç™½å±\" style=\"display: block; margin: 0 auto; max-width: 100%;\"><figcaption style=\"margin-top: 5px; text-align: center; color: #888; font-size: 14px;\">iPhone 6S Plusæ¨¡æ‹Ÿå™¨å‡ºç°ç™½å±</figcaption></figure>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">å°æ ·ï¼Œç»ˆäºæŠŠè¿™ä¸ªé—®é¢˜ç»™å¤ç°äº†ï¼Œè¿™æ ·å°±è·ç¦»è§£å†³è¿™ä¸ªBugä¸è¿œäº†ã€‚æˆ‘æ‰“å¼€<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Mac</code>çš„<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Safari</code>æµè§ˆå™¨ï¼Œè¿›å…¥å¼€å‘è€…æ¨¡å¼ï¼Œå‘ç°äº†å¦‚ä¸‹æ‰€ç¤ºçš„æŠ¥é”™</p>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0ce6212e095e422296ad921d9ae0531b~tplv-k3u1fbpfcp-zoom-1.image\" alt=\"Safariæµè§ˆå™¨æ§åˆ¶å°çš„æŠ¥é”™\" style=\"display: block; margin: 0 auto; max-width: 100%;\"><figcaption style=\"margin-top: 5px; text-align: center; color: #888; font-size: 14px;\">Safariæµè§ˆå™¨æ§åˆ¶å°çš„æŠ¥é”™</figcaption></figure>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">æˆ‘æœç´¢äº†ä¸€ä¸‹è¿™ä¸ªé”™è¯¯ï¼Œå‘ç°æ˜¯å› ä¸ºé¡¹ç›®ä¸­ä½¿ç”¨äº†<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">...</code>ES6æ‰©å±•è¿ç®—ç¬¦ï¼Œç„¶å<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">iOS 11</code>ç³»ç»Ÿä¸æ”¯æŒè¿™ä¸ªè¿™ä¸ªè¿ç®—ç¬¦ã€‚è¿™ä¹ˆå®¹æ˜“å°±æ‰¾åˆ°é—®é¢˜äº†ï¼Œå¼€å¿ƒã€‚æƒ³åˆ°è¿™ä¸ªé—®é¢˜è¿˜æ˜¯æ¯”è¾ƒå¥½è§£å†³çš„ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Babel</code>çš„ä¸€äº›æ’ä»¶ï¼Œå¾ˆå®¹æ˜“å°±å¯ä»¥å°†è¿™ä¸ªé—®é¢˜è§£å†³æ‰ã€‚ç„¶åæˆ‘å°±å¼€å¿ƒçš„ç¡è§‰å»äº†ï¼Œå¿ƒæƒ³è¿™ä¸ªé—®é¢˜ä¹Ÿä¸æ˜¯ä»€ä¹ˆå¤§é—®é¢˜ï¼Œæ˜å¤©å¤„ç†ä¸€ä¸‹å°±å¥½äº†ã€‚</p>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; border-bottom: 2px solid rgb(239, 112, 96); font-size: 1.3em;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"display: inline-block; font-weight: bold; background: rgb(239, 112, 96); color: #ffffff; padding: 3px 10px 1px; border-top-right-radius: 3px; border-top-left-radius: 3px; margin-right: 3px;\">å®‰è£…Safari Technology Preview</span><span class=\"suffix\"></span><span style=\"display: inline-block; vertical-align: bottom; border-bottom: 36px solid #efebe9; border-right: 20px solid transparent;\"> </span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">ç¬¬äºŒå¤©åˆ°å…¬å¸ï¼Œæˆ‘å°±åœ¨é¡¹ç›®ä¸­çš„<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">babel</code>çš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ äº†ç›¸åº”çš„æ’ä»¶</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #333; background: #f8f8f8; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch;\">{<br>&nbsp;&nbsp;...&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">//&nbsp;çœç•¥åŸæ¥çš„é…ç½®å†…å®¹</span><br>&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"plugins\"</span>:&nbsp;[<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"@babel/plugin-proposal-object-rest-spread\"</span>]<br>}<br></code></pre>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">ç„¶åå‘å¸ƒåˆ°æµ‹è¯•ç¯å¢ƒä¸­ã€‚å‘Šè¯‰äº†å°CåŒå­¦å†æ¬¡æµ‹è¯•ä¸€ä¸‹ï¼Œæˆ‘ä¹Ÿåœ¨ç­‰ç€è§£å†³è¿™ä¸ªBugçš„å¥½æ¶ˆæ¯ã€‚ä½†æ˜¯ï¼Œ<strong style=\"font-weight: bold; color: black;\">å‡ºç°çš„å´ä¸æ˜¯å¥½æ¶ˆæ¯</strong>ï¼Œå°Cç»™æˆ‘å›å¤è¯´è¿˜æ˜¯ä¸å¯ä»¥ã€‚ä»€ä¹ˆï¼Œä¸å¯èƒ½å‘€ï¼Œæˆ‘å°±é©¬ä¸Šç”¨å…¬å¸çš„ç”µè„‘å†æ¬¡è¿›è¡Œæµ‹è¯•ã€‚å½“æˆ‘ç”¨å…¬å¸ç”µè„‘çš„<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Safari</code>è°ƒè¯•ç³»ç»Ÿæ˜¯<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">iOS 11</code>çš„<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">iPhone 6S PLus</code>æ¨¡æ‹Ÿå™¨çš„æ—¶å€™ï¼Œå´å‘ç°å‡ºç°äº†ä¸‹é¢è¿™ä¸ªæƒ…å†µï¼š<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">å®¡æ ¸è­¦å‘Šï¼šâ€œdata-customâ€å¤ªæ–°ï¼Œæ— æ³•åœ¨æ­¤æ£€æŸ¥çš„é¡µé¢ä¸Šè¿è¡Œ</code></p>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f647bd72d4b045119438f7a77fb3f020~tplv-k3u1fbpfcp-zoom-1.image\" alt=\"å®¡æ ¸è­¦å‘Šï¼šâ€œdata-customâ€å¤ªæ–°ï¼Œæ— æ³•åœ¨æ­¤æ£€æŸ¥çš„é¡µé¢ä¸Šè¿è¡Œ\" style=\"display: block; margin: 0 auto; max-width: 100%;\"><figcaption style=\"margin-top: 5px; text-align: center; color: #888; font-size: 14px;\">å®¡æ ¸è­¦å‘Šï¼šâ€œdata-customâ€å¤ªæ–°ï¼Œæ— æ³•åœ¨æ­¤æ£€æŸ¥çš„é¡µé¢ä¸Šè¿è¡Œ</figcaption></figure>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">æˆ‘å°±åˆæœç´¢äº†ä¸€ä¸‹ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ï¼Œç»ˆäºè®©æˆ‘æ‰¾åˆ°äº†<a href=\"https://stackoverflow.com/questions/60963057/safari-web-inspector-is-only-showing-sources-console-and-audit\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: rgb(239, 112, 96); border-bottom: 1px solid rgb(239, 112, 96);\">ç­”æ¡ˆ</a>ï¼Œ<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Safari</code>æµè§ˆå™¨çš„<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Web Inspector</code>å·¥ç¨‹å¸ˆä¹Ÿè¯´è¿™æ˜¯ä¸€ä¸ªBugï¼Œä¸è¿‡ä»–ä»¬å·²ç»ä¿®å¤äº†ï¼Œåœ¨ä¸‹ä¸ªå‘å¸ƒçš„ç‰ˆæœ¬ä¸­å°±å¯ä»¥æ­£å¸¸ä½¿ç”¨æ–°çš„<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Safari</code>æµè§ˆå™¨å»è°ƒè¯•æ¯”è¾ƒè€çš„<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">iOS</code>ç³»ç»Ÿçš„æ¨¡æ‹Ÿå™¨äº†ã€‚çŸ¥é“ç°åœ¨è¿™ä¸ªç‰ˆæœ¬çš„<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Safari</code>è°ƒè¯•ä¸äº†æ¨¡æ‹Ÿçš„<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">iOS 11</code>ç³»ç»Ÿçš„é¡µé¢ã€‚æˆ‘æœ‰ç‚¹æ²®ä¸§ï¼Œæ€»ä¸èƒ½æˆ‘ç°åœ¨å›å®¶æŠŠæˆ‘çš„ç”µè„‘æ‹¿è¿‡æ¥å§ğŸ˜‚ï¼Ÿå½“æˆ‘æƒ³ç€è¯¥å¦‚ä½•è§£å†³çš„æ—¶å€™ï¼Œæˆ‘å‘ç°äº†ä¸Šé¢é‚£ä¸ªå›ç­”ä¸­æåˆ°äº†<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Safari Technology Preview</code>ï¼Œ<strong style=\"font-weight: bold; color: black;\"><code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Safari</code>æŠ€æœ¯é¢„è§ˆ</strong>ã€‚</p>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/796b2863243144fbb8c052e42bf11ccc~tplv-k3u1fbpfcp-zoom-1.image\" alt=\"stackoverflowä¸Šé¢Safariæµè§ˆå™¨çš„Webæ£€æŸ¥å™¨çš„å¼€å‘è€…çš„å›å¤\" style=\"display: block; margin: 0 auto; max-width: 100%;\"><figcaption style=\"margin-top: 5px; text-align: center; color: #888; font-size: 14px;\">stackoverflowä¸Šé¢Safariæµè§ˆå™¨çš„Webæ£€æŸ¥å™¨çš„å¼€å‘è€…çš„å›å¤</figcaption></figure>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">æˆ‘çœ‹è¿™ä¸ªåå­—æ„Ÿè§‰æœ‰ç‚¹å¸Œæœ›ï¼Œç„¶åå°±æœç´¢äº†ä¸€ä¸‹<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Safari Technology Preview</code>æ˜¯ä»€ä¹ˆã€‚ç„¶åå°±å‘ç°å®ƒç›¸å¯¹äº<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Safari</code>å°±è·Ÿ<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Chromium</code>ç›¸å¯¹äº<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Chrome</code>æ˜¯ä¸€æ ·ï¼Œéƒ½ç›¸å½“äºæ˜¯å¼€å‘ç‰ˆæœ¬çš„æµè§ˆå™¨ã€‚</p>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6d995cb398e24c3ba5c791fd095e014d~tplv-k3u1fbpfcp-zoom-1.image\" alt=\"Safari Technology Preview\" style=\"display: block; margin: 0 auto; max-width: 100%;\"><figcaption style=\"margin-top: 5px; text-align: center; color: #888; font-size: 14px;\">Safari Technology Preview</figcaption></figure>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">è¿™æ—¶ï¼Œæˆ‘è§‰å¾—å¯ä»¥ä½¿ç”¨<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Safari Technology Preview</code>è¿›è¡Œè°ƒè¯•ã€‚æ‰€ä»¥å°±ä¸‹è½½äº†<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Safari Technology Preview</code>ï¼Œå½“æˆ‘æ‰“å¼€<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Safari Technology Preview</code>ç„¶åè¿›å…¥å¼€å‘è€…æ¨¡å¼åï¼Œå‘ç°ç¡®å®å¯ä»¥è°ƒè¯•<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">iOS 11</code>ç³»ç»Ÿçš„é¡µé¢ã€‚ç„¶åæˆ‘å°±çœ‹äº†ä¸€ä¸‹ä¸ºä»€ä¹ˆè¿˜æ˜¯ç™½å±çš„é—®é¢˜ã€‚å‘ç°å‡ºç°çš„é”™è¯¯è¿˜æ˜¯ä¸Šæ¬¡çš„é—®é¢˜ï¼š</p>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2e9e410c697d416792cede8e0d0fbde4~tplv-k3u1fbpfcp-zoom-1.image\" alt=\"SyntaxError: Unexpected token '...'. Expected a property name.\" style=\"display: block; margin: 0 auto; max-width: 100%;\"><figcaption style=\"margin-top: 5px; text-align: center; color: #888; font-size: 14px;\">SyntaxError: Unexpected token '...'. Expected a property name.</figcaption></figure>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">ä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªé—®é¢˜è¿˜æ²¡æœ‰è§£å†³æ‰ï¼Œå› ä¸ºæ‰“åŒ…åçš„ä»£ç æ˜¯æ²¡æœ‰<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">SourceMap</code>çš„ï¼Œæ‰€ä»¥è¦æƒ³çœ‹æ›´è¯¦ç»†çš„æŠ¥é”™ä¿¡æ¯ï¼Œéœ€è¦åœ¨æœ¬åœ°è¿›è¡Œè°ƒè¯•ã€‚æœ¬åœ°çš„ç¯å¢ƒä¸­æ˜¯æœ‰<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">SourceMap</code>çš„ï¼Œå¯ä»¥å®šä½åˆ°æ›´è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯ï¼Œæˆ‘åœ¨æœ¬åœ°è¿è¡Œäº†é¡¹ç›®ï¼Œç„¶åæˆ‘æ‰“å¼€äº†æ§åˆ¶å°çš„é”™è¯¯è¯¦æƒ…ï¼Œå‘ç°æ˜¯ä½¿ç”¨çš„ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„åº“å‡ºç°äº†é—®é¢˜ã€‚</p>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2e4bb62c4f434aa08811027c4ef571d5~tplv-k3u1fbpfcp-zoom-1.image\" alt=\"æ‰¾åˆ°äº†å‡ºç°é—®é¢˜çš„ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹åº“\" style=\"display: block; margin: 0 auto; max-width: 100%;\"><figcaption style=\"margin-top: 5px; text-align: center; color: #888; font-size: 14px;\">æ‰¾åˆ°äº†å‡ºç°é—®é¢˜çš„ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹åº“</figcaption></figure>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">é‚£ä¹ˆåˆ°è¿™é‡Œä¸ºæ­¢ï¼Œå¯ä»¥è¯´æ˜ä¸Šé¢æˆ‘ä»¬ä½¿ç”¨çš„<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Babel</code>æ’ä»¶æ²¡æœ‰å¤„ç†è¿™ä¸ªç¬¬ä¸‰æ–¹çš„åº“ï¼Œæ‰€ä»¥ç°åœ¨æˆ‘ä»¬çš„é—®é¢˜å°±å˜æˆäº†ï¼š<strong style=\"font-weight: bold; color: black;\">å¦‚ä½•è§£å†³ç¬¬ä¸‰æ–¹åº“ä¸­å‡ºç°çš„<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">...</code>æ‰©å±•è¿ç®—ç¬¦æ²¡æœ‰è¢«ç¼–è¯‘ä¸ºES5è¯­æ³•çš„é—®é¢˜</strong>ã€‚</p>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; border-bottom: 2px solid rgb(239, 112, 96); font-size: 1.3em;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"display: inline-block; font-weight: bold; background: rgb(239, 112, 96); color: #ffffff; padding: 3px 10px 1px; border-top-right-radius: 3px; border-top-left-radius: 3px; margin-right: 3px;\">å°†ç¬¬ä¸‰æ–¹åº“ä¸­çš„ES6è¯­æ³•è¿›è¡Œç¼–è¯‘</span><span class=\"suffix\"></span><span style=\"display: inline-block; vertical-align: bottom; border-bottom: 36px solid #efebe9; border-right: 20px solid transparent;\"> </span></h2>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 20px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">æŸ¥çœ‹Vue CLIä¸­ç›¸å…³çš„é…ç½®æ–¹æ³•</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">è¿™æ—¶æˆ‘åˆä»”ç»†çš„çœ‹äº†ä¸€ä¸‹<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Vue CLI</code>çš„ç›¸å…³æ–‡æ¡£ï¼Œå‘ç°ç¡®å®åœ¨<strong style=\"font-weight: bold; color: black;\">æµè§ˆå™¨çš„å…¼å®¹æ€§</strong>è¿™ä¸ªç« èŠ‚ä¸­ï¼Œæåˆ°äº†ä¸€äº›å¤„ç†çš„æ–¹æ³•ã€‚åŸæ¥æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­å†™çš„ä»£ç é»˜è®¤ä¼šå¸®æˆ‘ä»¬è½¬æ¢ä¸ºES5çš„è¯­æ³•çš„ï¼Œä½†æ˜¯å¦‚æœé¡¹ç›®ä¸­ä¾èµ–çš„ç¬¬ä¸‰æ–¹åº“éœ€è¦<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">polyfill</code>çš„è¯ï¼Œé‚£éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨è¿›è¡Œé…ç½®ã€‚<strong style=\"font-weight: bold; color: black;\">ä¸€çœ‹åˆ°è¿™é‡Œï¼Œæˆ‘æ„Ÿè§‰é»æ˜å°±è¦æ¥äº†</strong>ã€‚</p>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f75c115e1ded4d398212975e434c8a4d~tplv-k3u1fbpfcp-zoom-1.image\" alt=\"Vue CLIæµè§ˆå™¨å…¼å®¹æ€§\" style=\"display: block; margin: 0 auto; max-width: 100%;\"><figcaption style=\"margin-top: 5px; text-align: center; color: #888; font-size: 14px;\">Vue CLIæµè§ˆå™¨å…¼å®¹æ€§</figcaption></figure>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">æˆ‘å°±å¼€å§‹å°è¯•è¿™ä¸‰ç§æ–¹æ³•ã€‚æˆ‘å‘ç°ç¬¬ä¸€ç§æ–¹æ³•æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œä¹Ÿå¾ˆå¥½é…ç½®ã€‚äºæ˜¯æˆ‘å°±å°è¯•äº†ç¬¬ä¸€ç§æ–¹æ³•ã€‚åœ¨é¡¹ç›®çš„<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">vue.config.js</code>ä¸­æ·»åŠ å¦‚ä¸‹çš„é…ç½®ï¼š</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #333; background: #f8f8f8; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch;\">...&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">//&nbsp;çœç•¥çš„é…ç½®</span><br>transpileDependencies:&nbsp;[<br>&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'module-name/library-name'</span>&nbsp;<span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">//&nbsp;å‡ºç°é—®é¢˜çš„é‚£ä¸ªåº“</span><br>],<br>...&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">//&nbsp;çœç•¥çš„é…ç½®</span><br></code></pre>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">é‡æ–°è¿è¡Œé¡¹ç›®ï¼Œå½“æˆ‘å°†è¦ä¸ºå³å°†åˆ°æ¥çš„æˆåŠŸæ¬¢å‘¼é¼“æŒæ—¶ï¼Œæ§åˆ¶å°çªç„¶æŠ¥å‘Šäº†å¦‚ä¸‹çš„é”™è¯¯ï¼š\n<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Uncaught TypeError: Cannot assign to read only property 'exports' of object '#&lt;Object&gt;'</code></p>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b7f9a5fd297b49bdbb7bff03686ea703~tplv-k3u1fbpfcp-zoom-1.image\" alt=\"Uncaught TypeError: Cannot assign to read only property ...\" style=\"display: block; margin: 0 auto; max-width: 100%;\"><figcaption style=\"margin-top: 5px; text-align: center; color: #888; font-size: 14px;\">Uncaught TypeError: Cannot assign to read only property ...</figcaption></figure>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">è¿™ä¸ªæŠ¥é”™æ˜¯åœ¨<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Chrome</code>æµè§ˆå™¨çš„æ§åˆ¶å°å‡ºç°çš„ï¼Œå› ä¸ºé¡¹ç›®åœ¨æœ¬åœ°é‡æ–°è¿è¡Œä¹‹åä¼šé¦–å…ˆæ‰“å¼€<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Chrome</code>æµè§ˆå™¨ã€‚çœŸæ˜¯çš„ï¼Œä¸€ä¸ªé—®é¢˜è¿˜æ²¡æœ‰è§£å†³ï¼Œåˆå‡ºæ¥äº†ä¸€ä¸ªæ–°çš„é—®é¢˜ã€‚ç„¶åå†æ¬¡æŸ¥è¯¢èµ„æ–™åå‘ç°ï¼ŒåŸæ¥æ˜¯å› ä¸ºè¿™ä¸ªç¬¬ä¸‰æ–¹çš„åº“æ˜¯ä¸€ä¸ª<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">CommonJS</code>ç±»å‹çš„åº“ï¼Œè€Œ<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Babel</code>é»˜è®¤å¤„ç†çš„æ˜¯<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">ES6</code>çš„<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">module</code>ç±»å‹çš„åº“ï¼Œæ‰€ä»¥è¿™é‡Œå°±åˆå‡ºç°äº†æ–°çš„é—®é¢˜ã€‚</p>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a1b1176fc2cc40429ec04a7780a24b5d~tplv-k3u1fbpfcp-zoom-1.image\" alt=\"https://github.com/webpack/webpack/issues/4039 sokraçš„å›å¤\" style=\"display: block; margin: 0 auto; max-width: 100%;\"><figcaption style=\"margin-top: 5px; text-align: center; color: #888; font-size: 14px;\">https://github.com/webpack/webpack/issues/4039 sokraçš„å›å¤</figcaption></figure>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">ç¬¬ä¸€ç§æ–¹æ³•é‡åˆ°äº†é˜»ç¢ï¼Œå…ˆæš‚åœä¸€ä¸‹ã€‚æˆ‘å‡†å¤‡ç»§ç»­å°è¯•ä¸‹é¢ä¸¤ç§æ–¹æ³•ã€‚<strong style=\"font-weight: bold; color: black;\">ä½†æ˜¯å› ä¸ºåé¢ä¸¤ç§æ–¹æ³•å¯¹åŸæ¥çš„é¡¹ç›®æ”¹åŠ¨æœ‰ç‚¹å¤§ï¼Œæ‰€ä»¥æˆ‘ç›´æ¥é€šè¿‡<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Vue CLI</code>åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„é¡¹ç›®ï¼Œåœ¨<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">package.json</code>ä¸­åŠ å…¥é¡¹ç›®ä¸­ä½¿ç”¨çš„é‚£ä¸ªç¬¬ä¸‰æ–¹åŒ…çš„ä¾èµ–ï¼Œä½¿ç”¨å…¬å¸çš„åŒ…ç®¡ç†å·¥å…·å®‰è£…äº†ä¾èµ–</strong>ã€‚ç„¶åè¿è¡Œé¡¹ç›®ï¼Œæ‰“å¼€æ§åˆ¶å°ç¡®å®å‘ç°äº†ç›¸åŒçš„é”™è¯¯ã€‚ä½†æ˜¯æ‰“å¼€è¯¦æƒ…ä»¥åï¼Œå‘ç°å‡ºé”™çš„è·¯å¾„è·Ÿæˆ‘åŸæ¥é¡¹ç›®ä¸ä¸€è‡´ã€‚ç„¶åæˆ‘è¿™æ¬¡æŠ±ç€è¯•ä¸€è¯•çš„å¿ƒæ€ï¼Œç»§ç»­ä½¿ç”¨äº†ç¬¬ä¸€ç§æ–¹æ³•å°è¯•çœ‹çœ‹å¯ä¸å¯ä»¥ã€‚ç„¶åå¤åˆ¶äº†å‡ºé”™è·¯å¾„çš„åŒ…åç§°ï¼Œåœ¨<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">vue.config.js</code>æ–‡ä»¶ä¸­çš„å¯¹åº”ä½ç½®æ·»åŠ äº†å¦‚ä¸‹çš„é…ç½®ä»£ç ï¼š</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #333; background: #f8f8f8; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch;\">...&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">//&nbsp;çœç•¥çš„é…ç½®</span><br>transpileDependencies:&nbsp;[<br>&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'module-name-new/library-name-new'</span>&nbsp;<span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">//&nbsp;å‡ºç°é—®é¢˜çš„é‚£ä¸ªåº“</span><br>],<br>...&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">//&nbsp;çœç•¥çš„é…ç½®</span><br></code></pre>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">ç„¶åé‡æ–°è¿è¡Œé¡¹ç›®ï¼Œå‘ç°å±…ç„¶å¯ä»¥äº†ã€‚<strong style=\"font-weight: bold; color: black;\">å•Šï¼Œå±…ç„¶å¯ä»¥äº†</strong>ã€‚ä¸ºä»€ä¹ˆæˆ‘åœ¨åŸæ¥çš„é¡¹ç›®ä¸­è¿™æ ·å´ä¸å¯ä»¥å‘¢ï¼Ÿ<strong style=\"font-weight: bold; color: black;\">æˆ‘çœ‹äº†ä¸€ä¸‹åŸæ¥é¡¹ç›®çš„ä¾èµ–ä»¥åŠç°åœ¨æ–°çš„æµ‹è¯•é¡¹ç›®çš„ä¾èµ–ï¼Œå‘ç°å®ƒä»¬çš„<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">vue</code>, <code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">babel</code>ç‰ˆæœ¬å·®äº†å¥½å¤š</strong>ã€‚æˆ‘çŒœæµ‹å¯èƒ½æ˜¯å› ä¸ºè¿™ä¸ªåŸå› ã€‚ä½†æ˜¯ç°åœ¨è‚¯å®šä¸å¯ä»¥è´¸ç„¶å‡çº§è¿™äº›ä¾èµ–çš„ç‰ˆæœ¬ï¼Œå› ä¸ºä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜å†æ¬¡å¸¦æ¥æ–°çš„é—®é¢˜å°±å¾—ä¸å¿å¤±äº†ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\"><strong style=\"font-weight: bold; color: black;\">è¿˜æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯ä¸ºä»€ä¹ˆåŒæ ·çš„ç¬¬ä¸‰æ–¹åº“ï¼Œåœ¨åŸæ¥çš„é¡¹ç›®ä¸­å’Œç°åœ¨çš„é¡¹ç›®ä¸­æŠ¥é”™çš„è·¯å¾„ä¸ä¸€æ ·ã€‚è€Œä¸”çœ‹ç€åƒæ˜¯ä½¿ç”¨äº†ä¸¤ä¸ªä¸ä¸€æ ·çš„ç¬¬ä¸‰æ–¹åº“</strong>ã€‚è¿™é‡Œå…ˆç•™ä¸ªæ‚¬å¿µï¼Œæˆ‘ä¼šåœ¨åé¢çš„æ–‡ç« ä¸­è¿›è¡Œè§£é‡Šã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">æ¥ä¸‹æ¥ï¼Œæˆ‘å¼€å§‹åœ¨æµ‹è¯•é¡¹ç›®ä¸­ç»§ç»­å°è¯•å‰©ä¸‹çš„ä¸¤ç§æ–¹æ³•ï¼Œå¯¹äºç¬¬äºŒç§æ–¹æ³•ï¼Œå› ä¸ºè€é¡¹ç›®ä¸­ä½¿ç”¨çš„<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">presets</code>æ˜¯æ²¡æœ‰<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">polyfills</code>è¿™ä¸ªé…ç½®é€‰é¡¹çš„ï¼Œåˆ°ç°åœ¨ä¸ºæ­¢å‡ºé—®é¢˜çš„è¿™ä¸ªç¬¬ä¸‰æ–¹åº“æˆ‘ä¸çŸ¥é“é™¤äº†è¿™ä¸ª<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">...</code>å¯¹è±¡æ‰©å±•æ“ä½œç¬¦ä¹‹å¤–è¿˜æœ‰æ²¡æœ‰åˆ«çš„ä¾èµ–ã€‚æ‰€ä»¥è¿™ä¸ªæ–¹æ³•æˆ‘æš‚æ—¶ä¹Ÿæ”¾å¼ƒäº†ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">å¯¹äºç¬¬ä¸‰ä¸ªæ–¹æ³•ï¼Œæˆ‘è§‰å¾—å¯ä»¥å°è¯•ï¼Œé¦–å…ˆæˆ‘å°†æµ‹è¯•é¡¹ç›®ä¸­çš„ä¸€äº›å…³é”®ä¾èµ–è¿›è¡Œäº†æ‰‹åŠ¨é™çº§ï¼Œç„¶åæŒ‰ç…§ä¸Šé¢çš„ç¬¬ä¸‰ä¸ªæ–¹æ³•çš„æ­¥éª¤åœ¨æµ‹è¯•é¡¹ç›®ä¸­ä½¿ç”¨ã€‚ä½†æ˜¯å‘ç°æµ‹è¯•é¡¹ç›®è¿è¡Œä¹‹åï¼Œæç¤ºéœ€è¦å®‰è£…<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">core-js</code>ï¼Œå®‰è£…<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">core-js</code>ä¹‹åè¿˜æŠ¥é”™ï¼Œå†æ¬¡æç¤ºéœ€è¦å®‰è£…<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">es.module.regex.match</code>ç­‰ç­‰å¾ˆå¤šä¾èµ–ï¼Œç»§ç»­æŸ¥èµ„æ–™ï¼Œå‘ç°éœ€è¦æŠŠé…ç½®ä¸­çš„ <code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">useBuiltIns</code>ä¿®æ”¹ï¼Œä½†æ˜¯å› ä¸ºæˆ‘æ¥æ‰‹çš„è¿™ä¸ªé¡¹ç›®æ˜¯è€é¡¹ç›®ï¼Œä¾èµ–æ¯”è¾ƒå¤šï¼Œä¸ç¡®å®šä¿®æ”¹<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">useBuiltIns</code>è¿™ä¸ªé…ç½®é€‰é¡¹åä¼šä¸ä¼šå‡ºç°æ–°çš„é—®é¢˜ã€‚æ‰€ä»¥ä¹Ÿä¸æ•¢è´¸ç„¶ä¿®æ”¹è¿™ä¸ªé…ç½®é€‰é¡¹ï¼Œæ‰€ä»¥ä¹Ÿæš‚æ—¶æ”¾å¼ƒäº†è¿™ä¸ªæ–¹æ³•ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">æˆ‘åæ¥æƒ³äº†ä¸€ä¸‹ï¼Œå¯¹äº<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">...</code>æ‰©å±•è¿ç®—ç¬¦æ¥è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªæ–°çš„è¯­æ³•ã€‚æ˜¯ä¸èƒ½å¤Ÿé€šè¿‡ä¸€äº›<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">polyfills</code>å»è§£å†³çš„ã€‚éœ€è¦<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Babel</code>å¯¹è¿™ä¸ªè¯­æ³•è¿›è¡Œç¼–è¯‘ï¼Œç„¶åæ‰å¯ä»¥åœ¨ä½ç‰ˆæœ¬çš„ç³»ç»Ÿä¸­ä½¿ç”¨ï¼Œæ‰€ä»¥è§£å†³çš„åŠæ³•è¿˜æ˜¯è¦è®©<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Babel</code>å¯¹è¿™ä¸ªåº“å†æ¬¡è¿›è¡Œç¼–è¯‘ã€‚</p>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; border-bottom: 2px solid rgb(239, 112, 96); font-size: 1.3em;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"display: inline-block; font-weight: bold; background: rgb(239, 112, 96); color: #ffffff; padding: 3px 10px 1px; border-top-right-radius: 3px; border-top-left-radius: 3px; margin-right: 3px;\">å¯»æ‰¾æ–°çš„çªç ´å£</span><span class=\"suffix\"></span><span style=\"display: inline-block; vertical-align: bottom; border-bottom: 36px solid #efebe9; border-right: 20px solid transparent;\"> </span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">å½“è¿›è¡Œåˆ°äº†è¿™é‡Œçš„æ—¶å€™ï¼Œä¼¼ä¹æ²¡æœ‰äº†å‡ºè·¯ã€‚ä¸€æ—¶é—´æˆ‘æ„Ÿè§‰æˆ‘è¦è¢«è¿™ä¸ªBugæ‰“è´¥äº†ï¼Œæˆ‘ä¼¼ä¹å¬åˆ°äº†å®ƒæ— æƒ…çš„å˜²ç¬‘ï¼Œâ€œ<strong style=\"font-weight: bold; color: black;\">å°ä¼™å­ï¼Œæ˜¯ä¸æ˜¯è¢«æˆ‘æŠ˜ç£¨çš„æ²¡æœ‰è„¾æ°”å•¦ï¼›æ”¾å¼ƒå§ï¼Œä½ æ˜¯æ²¡åŠæ³•æ‰“å€’æˆ‘çš„ã€‚å“ˆå“ˆå“ˆã€‚ã€‚ã€‚</strong>â€</p>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c13cf426415d40dbbcdcd2f5f646c9e2~tplv-k3u1fbpfcp-zoom-1.image\" alt=\"Photo by sebastiaan stam on Unsplash\" style=\"display: block; margin: 0 auto; max-width: 100%;\"><figcaption style=\"margin-top: 5px; text-align: center; color: #888; font-size: 14px;\">Photo by sebastiaan stam on Unsplash</figcaption></figure>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">ä½†æ˜¯ï¼Œå®ƒçœ‹é”™æˆ‘äº†ï¼ŒBugè¶Šæ˜¯éš¾è§£å†³ï¼Œæˆ‘å¯¹å®ƒå°±è¶Šæœ‰å…´è¶£ã€‚æ‰€ä»¥æˆ‘å†³å®šå¥½å¥½ç†ä¸€ä¸‹æ€è·¯ï¼Œå‡†å¤‡å†æ¬¡æ‰¬å¸†èµ·èˆªã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">æˆ‘å‘ç°ç¬¬ä¸€ç§åŠæ³•å…¶å®æ˜¯èµ·ä½œç”¨çš„ï¼Œåªä¸è¿‡æ˜¯å› ä¸ºä¸€ä¸ªæ˜¯<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">CommonJS</code>ç±»å‹çš„ï¼Œä¸€ä¸ªéœ€è¦æ˜¯<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">ES6 module</code>ç±»å‹çš„ã€‚æ‰€ä»¥æˆ‘å†³å®šä»è¿™ä¸ªåœ°æ–¹å…¥æ‰‹ï¼Œäºæ˜¯æˆ‘å†³å®šæŸ¥æŸ¥ç›¸å…³çš„èµ„æ–™ï¼Œçœ‹çœ‹<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Babel</code>æœ‰æ²¡æœ‰åŠæ³•å¯ä»¥å³èƒ½å¤Ÿå¤„ç†<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">CommonJS</code>æ¨¡å—ï¼Œåˆèƒ½å¤Ÿå¤„ç†<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">ES6 module</code>æ¨¡å—å‘¢ï¼Ÿ<strong style=\"font-weight: bold; color: black;\">ç»ˆäºï¼ŒåŠŸå¤«ä¸è´Ÿæœ‰å¿ƒäººï¼Œæˆ‘å‘ç°äº†<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Babel</code>é‡Œé¢æœ‰è¿™ä¹ˆä¸€ä¸ªé…ç½®<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">sourceType</code>ï¼Œå¦‚æœæŠŠ<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">sourceType</code>è®¾ç½®ä¸º<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">unambiguous</code>å°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜</strong>ã€‚</p>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0f87ca1a2c444c49aaad528895929bf3~tplv-k3u1fbpfcp-zoom-1.image\" alt=\"https://babeljs.io/docs/en/options#sourcetype\" style=\"display: block; margin: 0 auto; max-width: 100%;\"><figcaption style=\"margin-top: 5px; text-align: center; color: #888; font-size: 14px;\">https://babeljs.io/docs/en/options#sourcetype</figcaption></figure>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">è¿™æ ·<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Babel</code>å°±ä¼šæ ¹æ®æ¨¡å—æ–‡ä»¶ä¸­æœ‰æ²¡æœ‰<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">import/export</code>æ¥å†³å®šä½¿ç”¨å“ªç§è§£ææ¨¡å—çš„æ–¹å¼ã€‚äºæ˜¯æˆ‘å†æ¬¡ä½¿ç”¨äº†ç¬¬ä¸€ç§æ–¹æ³•ï¼Œåœ¨<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">vue.config.js</code>ä¸­æ·»åŠ äº†<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">transpileDependencies</code>é€‰é¡¹çš„é…ç½®ï¼Œç„¶ååœ¨é¡¹ç›®ä¸­çš„<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Babel</code>é…ç½®æ–‡ä»¶ä¸­æ·»åŠ äº†å¦‚ä¸‹çš„é…ç½®ï¼š</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #333; background: #f8f8f8; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch;\"><span class=\"hljs-built_in\" style=\"color: #0086b3; line-height: 26px;\">module</span>.exports&nbsp;=&nbsp;{<br>&nbsp;&nbsp;...&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">//&nbsp;çœç•¥çš„é…ç½®</span><br>&nbsp;&nbsp;sourceType:&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'unambiguous'</span>,<br>&nbsp;&nbsp;...&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">//&nbsp;çœç•¥çš„é…ç½®</span><br>};<br></code></pre>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">å‘ç°çš„ç¡®å¯ä»¥ï¼Œ<strong style=\"font-weight: bold; color: black;\">è¿™ä¸€åˆ»æˆåŠŸçš„å–œæ‚¦å†æ¬¡é™ä¸´</strong>ã€‚ç„¶åæˆ‘å†æ¬¡æ‰“åŒ…ï¼Œå†æ¬¡æŠŠä»£ç éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒï¼Œèµ¶å¿™è®©å°CåŒå­¦å†æ¬¡æµ‹è¯•ä¸€ä¸‹ï¼Œå‘ç°çš„ç¡®å¯ä»¥ã€‚æ¬§è€¶ï¼Œç»ˆäºè§£å†³è¿™ä¸ªé—®é¢˜äº†ã€‚æˆ‘ç»ˆäºå¯ä»¥æ¾ä¸€å£æ°”äº†ï¼Œå“ˆå“ˆå“ˆã€‚ã€‚ã€‚å°æ ·ï¼Œè¿™æ€ä¹ˆä¼šéš¾å¾—åˆ°æˆ‘å‘¢ï¼Ÿ</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">ä½†æ˜¯ï¼Œå½“æˆ‘ä»”ç»†é˜…è¯»å°†è¿™ä¸ªé€‰é¡¹è®¾ç½®ä¸º<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">unambiguous</code>æ—¶ï¼Œæˆ‘å‘ç°äº†ä¸€äº›é—®é¢˜ã€‚å› ä¸ºè¿™æ ·çš„è¯ä¼šæœ‰ä¸€äº›é£é™©ï¼Œå› ä¸ºå°±ç®—ä¸ä½¿ç”¨<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">import/export</code>è¯­å¥çš„è¿™äº›æ¨¡å—ä¹Ÿå¯èƒ½æ˜¯å®Œå…¨æœ‰æ•ˆçš„<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">ES6 module</code>ï¼Œæ‰€ä»¥è¿™æ ·çš„è¯å°±æœ‰å¯èƒ½ä¼šå‡ºç°ä¸€äº›æ„å¤–çš„æƒ…å†µã€‚<strong style=\"font-weight: bold; color: black;\">æ€ä¹ˆåŠï¼Œæˆ‘ä¼¼ä¹åœ¨ä¸€ä¸ç•™ç¥çš„æ—¶å€™åˆè¢«Bugå¡ä½äº†è„–å­</strong>ã€‚</p>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c191633378c54e1292043e096e4464f7~tplv-k3u1fbpfcp-zoom-1.image\" alt=\"https://babeljs.io/docs/en/options#sourcetype\" style=\"display: block; margin: 0 auto; max-width: 100%;\"><figcaption style=\"margin-top: 5px; text-align: center; color: #888; font-size: 14px;\">https://babeljs.io/docs/en/options#sourcetype</figcaption></figure>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">æˆ‘è§‰å¾—è€å¤©æ€»æ˜¯ç»™æˆ‘å¼€ç©ç¬‘ï¼Œå½“æˆ‘ä»ä¸€ä¸ªå‘é‡Œè·³å‡ºæ¥ï¼Œä»¥ä¸ºæ²¡æœ‰å±é™©çš„æ—¶å€™ã€‚å‰é¢çªç„¶åˆå¤šå‡ºæ¥ä¸€ä¸ªå‘ï¼Œæˆ‘ä¸€ä¸ç•™å¿ƒå°±åˆæ‰äº†è¿›å»ã€‚æˆ‘æ„Ÿè§‰æ—¢ç„¶éƒ½èµ°åˆ°äº†è¿™é‡Œï¼Œè‚¯å®šè¦ç»§ç»­èµ°ä¸‹å»ï¼Œä¸€å®šæœ‰åŠæ³•å¯ä»¥ä¼˜åŒ–æˆ‘ç°åœ¨é‡åˆ°çš„é—®é¢˜ã€‚æˆ‘å°±å¾ˆä»”ç»†çš„å†æ¬¡çœ‹äº†ä¸€ä¸‹<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Babel</code>çš„é…ç½®è¯´æ˜æ–‡æ¡£ï¼Œè¿™ä¸ªæ—¶å€™å°±å¿ƒæƒ³å¦‚æœæˆ‘å¯¹<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Babel</code>å†ç†Ÿæ‚‰ä¸€äº›å°±å¥½äº†ã€‚<strong style=\"font-weight: bold; color: black;\">æ²¡å…³ç³»ï¼Œç»§ç»­åŠªåŠ›</strong>ã€‚ç»ˆäºï¼Œæˆ‘ä¼¼ä¹çœ‹åˆ°äº†ä»€ä¹ˆäº†ä¸å¾—çš„é…ç½®é€‰é¡¹ã€‚</p>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/61bb29fd27234b15af0947596a70ab90~tplv-k3u1fbpfcp-zoom-1.image\" alt=\"https://babeljs.io/docs/en/options#overrides\" style=\"display: block; margin: 0 auto; max-width: 100%;\"><figcaption style=\"margin-top: 5px; text-align: center; color: #888; font-size: 14px;\">https://babeljs.io/docs/en/options#overrides</figcaption></figure>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">æˆ‘åœ¨<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Config Merging options</code>é‡Œå‘ç°äº†<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">overrides</code>é€‰é¡¹ï¼Œè¿™ä¸ªé…ç½®é€‰é¡¹ä¸æ­£æ˜¯æˆ‘éœ€è¦çš„å—ï¼Ÿæˆ‘å¯ä»¥åˆ©ç”¨è¿™ä¸ªé…ç½®é€‰é¡¹å°†æˆ‘éœ€è¦çš„ç¬¬ä¸‰æ–¹åŒ…ä½¿ç”¨<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">unambiguous</code>çš„å¤„ç†æ–¹å¼ï¼Œç„¶åå…¶ä»–çš„ç¬¬ä¸‰æ–¹åº“éƒ½æŒ‰ç…§ä¹‹å‰çš„æ–¹å¼å¤„ç†ä¸å°±å¯ä»¥äº†ã€‚å“ˆå“ˆå“ˆï¼Œæˆ‘çœŸæ˜¯ä¸ªå¤©æ‰ï¼Œæˆ‘å¿ƒé‡Œè¿™æ ·å¯¹è‡ªå·±è¯´ğŸ˜‚ã€‚</p>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b6c4691b0e9b418a811e3f97b7d32899~tplv-k3u1fbpfcp-zoom-1.image\" alt=\"Photo by bruce mars on Unsplash\" style=\"display: block; margin: 0 auto; max-width: 100%;\"><figcaption style=\"margin-top: 5px; text-align: center; color: #888; font-size: 14px;\">Photo by bruce mars on Unsplash</figcaption></figure>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">æ‰€ä»¥åªéœ€è¦åœ¨é¡¹ç›®çš„<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">babel.config.js</code>ä¸­å†™ä¸‹å¦‚ä¸‹çš„é…ç½®å°±å¯ä»¥äº†ï¼š</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #333; background: #f8f8f8; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch;\"><span class=\"hljs-built_in\" style=\"color: #0086b3; line-height: 26px;\">module</span>.exports&nbsp;=&nbsp;{<br>&nbsp;&nbsp;...&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">//&nbsp;çœç•¥çš„é…ç½®</span><br>&nbsp;&nbsp;overrides:&nbsp;[<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attr\" style=\"line-height: 26px;\">include</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'./node_modules/module-name/library-name/name.common.js'</span>,&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">//&nbsp;ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹åº“</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sourceType:&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'unambiguous'</span><br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;],<br>&nbsp;&nbsp;...&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">//&nbsp;çœç•¥çš„é…ç½®</span><br>};<br></code></pre>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">å¯¹äº†ï¼Œè¿˜æœ‰ä¸€ä»¶äº‹æƒ…è¿˜æ²¡æœ‰è¯´ï¼Œé‚£å°±æ˜¯ä¸Šæ–‡æåˆ°çš„å…³äºä¸ºä»€ä¹ˆä½¿ç”¨å…¬å¸è‡ªå·±çš„åŒ…ç®¡ç†å·¥å…·ä¸‹è½½ä¸‹æ¥çš„<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">node_modules</code>åŒ…çš„åç§°è·Ÿä½¿ç”¨å®˜æ–¹çš„<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">npm</code>åŒ…ç®¡ç†å·¥å…·ä¸‹è½½çš„åŒ…çš„åç§°ä¸ä¸€è‡´çš„é—®é¢˜ã€‚åŸå› æ˜¯å…¬å¸ä½¿ç”¨çš„åŒ…ç®¡ç†å·¥å…·æ˜¯<a href=\"https://github.com/cnpm/cnpm\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: rgb(239, 112, 96); border-bottom: 1px solid rgb(239, 112, 96);\"><code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">cnpm</code></a>çš„ä¸€ä¸ªä¿®æ”¹ç‰ˆæœ¬ã€‚åˆå› ä¸º<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">cnpm</code>ä¸ºäº†æé«˜ä¸‹è½½çš„é€Ÿåº¦ï¼Œä½¿ç”¨äº†<a href=\"https://github.com/cnpm/npminstall\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: rgb(239, 112, 96); border-bottom: 1px solid rgb(239, 112, 96);\"><code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">cnpm/npminstall</code></a>ï¼Œæ‰€ä»¥æ‰ä¼šå‡ºç°ä¸‹è½½çš„åŒ…åæ¯”è¾ƒæ··ä¹±çš„æƒ…å†µï¼Œè¯¦æƒ…å¯ä»¥çœ‹<a href=\"https://www.zhihu.com/question/53341824/answer/134683829\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: rgb(239, 112, 96); border-bottom: 1px solid rgb(239, 112, 96);\">è¿™é‡Œ</a>ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">åˆ°æ­¤å®Œç»“æ’’èŠ±ï¼Œæ€»ç»“ä¸€ä¸‹ï¼š<strong style=\"font-weight: bold; color: black;\">å‡ºç°ç™½å±çš„åŸå› æ˜¯å› ä¸ºä½¿ç”¨çš„ç¬¬ä¸‰æ–¹åº“çš„åŒ…ä¸­ä½¿ç”¨äº†<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">...</code>æ‰©å±•è¿ç®—ç¬¦ï¼Œç„¶åå› ä¸ºç¬¬ä¸‰æ–¹çš„åŒ…é»˜è®¤æ˜¯æ²¡æœ‰è¢«<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Babel</code>å¤„ç†è¿‡çš„ï¼Œæ‰€ä»¥åœ¨ä¸æ”¯æŒ<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">...</code>çš„<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">iOS 11</code>ç³»ç»Ÿä¸Šå°±å‡ºç°äº†ç™½å±ã€‚è§£å†³çš„æ–¹å¼å°±æ˜¯é€šè¿‡ç»™<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">vue.config.js</code>çš„é…ç½®æ–‡ä»¶ä¸­<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">transpileDependencies</code>é…ç½®é€‰é¡¹ä¸­æ·»åŠ ä¸Šå‡ºé—®é¢˜çš„åŒ…çš„åç§°å°±å¯ä»¥äº†</strong>ã€‚å½“ç„¶å¦‚æœé¡¹ç›®æ¯”è¾ƒè€ï¼Œå¯èƒ½è¿˜éœ€è¦åƒæ–‡ç« ä¸Šé¢å†™çš„é‚£æ ·çš„å¤„ç†æ–¹å¼ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">è§£å†³è¿™ä¸ªBugè¿‡ç¨‹å°±åƒæ˜¯å‡çº§æ‰“æ€ªä¸€æ ·ï¼Œ<strong style=\"font-weight: bold; color: black;\">ä¸æ–­å¤±è´¥ï¼Œä¸æ–­å°è¯•ï¼Œåªè¦ä¸æ”¾å¼ƒï¼Œç»ˆæœ‰æˆåŠŸçš„é‚£ä¸€å¤©</strong>ã€‚å¦‚æœä½ åšæŒçœ‹åˆ°äº†è¿™é‡Œï¼Œé‚£è¯´æ˜ä½ ä¹Ÿå¾ˆæ£’å‘€ã€‚åœ¨å½“ä»Šè¿™ä¸ªä¿¡æ¯çˆ†ç‚¸çš„æ—¶ä»£é‡Œï¼Œèƒ½å¤ŸåšæŒçœ‹å®Œä¸€ç¯‡å¾ˆé•¿çš„æ–‡ç« å·²ç»å¾ˆä¸é”™äº†ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\"><strong style=\"font-weight: bold; color: black;\">ä¸€ç‚¹åæ€ä¸æ€è€ƒ</strong>ï¼šè¿™ä¸ªè¿‡ç¨‹ä¸­æˆ‘ä¹Ÿå‘ç°äº†è‡ªå·±å¯¹<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Babel</code>å’Œ<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(239, 112, 96);\">Vue CLI</code>å…¶å®æ²¡æœ‰é‚£ä¹ˆç†Ÿç»ƒï¼Œå¦‚æœæˆ‘å¯¹å®ƒä»¬æ¯”è¾ƒç†Ÿç»ƒçš„è¯ï¼Œé‚£æˆ‘è§£å†³è¿™ä¸ªBugåº”è¯¥ä¼šèŠ±è´¹æ›´å°‘çš„æ—¶é—´ã€‚å½“ç„¶ï¼Œç°åœ¨æŠŠå®ƒä»¬å­¦ä¹ å¥½ä¹Ÿä¸ç®—æ™šã€‚<strong style=\"font-weight: bold; color: black;\">è¦æŠ±ç€å­¦ä¹ çš„æ€åº¦ï¼Œè¿™æ¬¡è§£å†³è¿™ä¸ªBugçš„è¿‡ç¨‹ï¼Œå°±æ˜¯æˆ‘ä»¥åè§£å†³å…¶å®ƒç±»ä¼¼Bugçš„ç»éªŒã€‚è¿˜æœ‰åœ¨è§£å†³Bugçš„è¿™ä¸ªè¿‡ç¨‹ä¸­è¦æœ‰è€å¿ƒï¼Œå½“ç„¶åœ¨å°è¯•ä¹‹åä¹Ÿè¦å­¦ä¼šæ”¾å¼ƒé”™è¯¯çš„æ–¹å‘</strong>ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">å†™è¿™ç¯‡æ–‡ç« ä¹ŸèŠ±è´¹äº†æˆ‘ä¸å°‘çš„æ—¶é—´ï¼Œå¦‚æœä½ æœ‰æ‰€æ”¶è·æˆ–è€…æ„Ÿæ‚Ÿï¼Œä¸å¦¨<strong style=\"font-weight: bold; color: black;\">ç‚¹èµï¼Œè½¬å‘ï¼Œæ”¶è—</strong>èµ°ä¸€æ³¢ï¼Œè¿™ä¸ªè¦æ±‚åº”è¯¥ä¸ç®—è¿‡åˆ†å§ğŸ˜‚ï¼Ÿ</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;\">å¦‚æœä½ å¯¹æœ¬ç¯‡æ–‡ç« æœ‰ä»€ä¹ˆæ„è§å’Œå»ºè®®ï¼Œéƒ½å¯ä»¥ç›´æ¥åœ¨æ–‡ç« ä¸‹é¢ç•™è¨€ï¼Œä¹Ÿå¯ä»¥åœ¨<a href=\"https://github.com/dreamapplehappy/blog/issues/11\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: rgb(239, 112, 96); border-bottom: 1px solid rgb(239, 112, 96);\">è¿™é‡Œ</a>æå‡ºæ¥ã€‚ä¹Ÿæ¬¢è¿å¤§å®¶å…³æ³¨æˆ‘çš„å…¬ä¼—å·<strong style=\"font-weight: bold; color: black;\">å…³å±±ä¸éš¾è¶Š</strong>ï¼Œå­¦ä¹ æ›´å¤šå®ç”¨çš„å‰ç«¯çŸ¥è¯†ï¼Œè®©æˆ‘ä»¬ä¸€èµ·åŠªåŠ›è¿›æ­¥å§ã€‚</p>\n</section>", "user_name": "dreamappleapple", "description": "å¿ƒä¹‹æ‰€å‘ æ‰€å‘æŠ«é¡ï¼Œå¾®ä¿¡å…¬ä¼—å·ã€Œå…³å±±ä¸éš¾è¶Šã€", "got_view_count": 53883, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "ç¨‹åºå‘˜", "concern_user_count": 238890, "user_id": "413072061127479", "title": "â¤ï¸ Say Goodbye and Welcome æœˆå½± â¤ï¸", "mark_content": "> æŠ±æ­‰å¾ˆä¹…æ²¡æœ‰å’Œå¤§å®¶èŠå¤©äº†ï¼Œä»Šå¤©åŒ—äº¬å¤©æ°”å¾ˆå¥½ï¼Œæˆ‘ååœ¨åŠå…¬å®¤å®šç¥å„¿çœ‹äº†ä¼šå„¿çª—å¤–ï¼Œæƒ³èµ·äº†é‚£æ—¶è¿˜å¹´è½»çš„æˆ‘å’Œå‡ ä¸ªæœ‹å‹æ­ä¼™å„¿å¼€å§‹ææ˜é‡‘çš„æ—¶å€™çš„æ ·å­ï¼Œè§‰å¾—ä»Šå¤©æœ‰å¿…è¦å’Œå¤§å®¶å¾ˆæ­£å¼åœ°è¯´ä¸¤å¥\n\n## Goodbye æ˜å‹ä»¬\n\næˆ‘è®°å¾—æœ‰å¾ˆå¤šäººé—®æˆ‘æ€ä¹ˆåšå¥½ç¤¾åŒºï¼Œå…¶å®å¾ˆç®€å•ï¼Œå’Œè¿™ä¸ªç¤¾åŒºé‡Œçš„æ¯ä¸€ä¸ªç”¨æˆ·äº¤æœ‹å‹ï¼Œè®©ä»–ä»¬è§‰å¾—ä½ åœ¨ä»–ä»¬èº«è¾¹ã€ç†è§£ä»–ä»¬ã€æ”¯æŒä»–ä»¬ï¼Œå°±å¯ä»¥äº†ã€‚æˆ‘ä»¬å½“ä¸‹èº«å¤„çš„ä¸–ç•Œæ˜¯è¢«æ•°æ®ã€ç®—æ³•ã€èˆ†è®ºã€æ„è¯†å½¢æ€æŒ¤å‹çš„ä¸–ç•Œï¼Œå› æ­¤ä¸€ä¸ªç¤¾åŒºå¾€å¾€æœ€é‡è¦çš„å®šä½æ˜¯å¤§å®¶å¯ä»¥å¸ä¸‹èº«ä¸Šçš„åŒ…è¢±ï¼Œæ¥è¿™é‡Œå’Œæ‡‚è‡ªå·±çš„äººè¯´è¯´è¯ã€‚\n\nä»è¿™ä¸€ç‚¹ä¸Šï¼Œæˆ‘è®¤ä¸ºæ˜é‡‘åšåˆ°äº†ï¼Œè°¢è°¢æ¯ä¸€ä½æ˜å‹ï¼Œè¿™æ˜¯ä½ ä»¬èµäºˆè¿™ä¸ªäº§å“çš„ç¤¼ç‰©ã€‚\n\n## Goodbye ä¼™ä¼´ä»¬\n\nå…¶å®æˆ‘ä¸€ç›´æ²¡æœ‰å®Œå…¨æ”¾ä¸‹ï¼Œå°±æ˜¯æ˜é‡‘çš„å¾ˆå¤šäº‹æƒ…æ²¡æœ‰åšå¥½ï¼Œèµ·ç æ²¡æœ‰åšåˆ°è®©æˆ‘è®¤ä¸ºçš„å¥½ã€‚å¾ˆå¹¸è¿ï¼Œä¹Ÿéå¸¸éå¸¸æ„Ÿæ©ï¼Œåœ¨ä¸€æ®µæ—¶é—´çš„æ²‰å¯‚åï¼Œæ˜é‡‘è¿æ¥äº†ä¸¤ä¸ªé‡è¦çš„å˜åŒ–ï¼š\n\n1. **æ˜é‡‘è¿›è¡Œäº†ä¸€æ¬¡æŠ€æœ¯ä¸Šå½»åº•çš„é‡æ„ï¼Œæ„Ÿè°¢å‚ä¸å…¶ä¸­çš„æ‰€æœ‰äºº**ã€‚å½“ç„¶è¿™ä¸ªé‡æ„åªæ˜¯æŠ€æœ¯å±‚é¢çš„ï¼Œæ‰€ä»¥å¾ˆå¤šåŠŸèƒ½ä¸å®Œå–„ï¼Œè¿™é‡Œè¯·æ˜å‹ç»™å›¢é˜Ÿä¼™ä¼´ä»¬ä¸€ç‚¹è€å¿ƒï¼Œå¤§å®¶ä¼šå…¨åŠ›æ”¯æŒã€‚\n2. **ä¸€ä½éå¸¸åˆé€‚ä¸”éå¸¸ä¼˜ç§€çš„æ–°çš„ç«™é•¿ [@åå¹´è¸ªè¿¹](https://juejin.im/user/712139263189303)ï¼ˆæœˆå½±ï¼‰**ã€‚å½“ç„¶ï¼Œå¯èƒ½è¿™ä½æ–°æœ‹å‹ä¸ä¼šå†ç§°å‘¼è‡ªå·±æ˜¯â€œç«™é•¿â€ï¼Œæ²¡å…³ç³»ï¼Œæ¥ä¸‹é‡Œçš„æ˜é‡‘å°±äº¤ç»™ä½ äº†ï¼Œè™½ç„¶è¿™é‡Œè¿˜å¾ˆå°è¿˜ä¸å¤Ÿå¥½ï¼Œä½†æ˜¯è¿™é‡Œç”¨æˆ·éƒ½å¾ˆæ£’ã€‚\n\nè¿˜æœ‰å°±æ˜¯é‚£äº›é™ªä¼´æ˜é‡‘åˆ°ä»Šå¤©çš„å›¢é˜Ÿä¼™ä¼´ä»¬ï¼Œæˆ‘ä»¬ä¸€èµ·ç»å†äº†è®¸å¤šæ— æ³•å¤åˆ¶çš„äº‹æƒ…ï¼Œæ— è®ºæœªæ¥æ€æ ·ï¼Œæ„Ÿè°¢ä½ ä»¬çš„ä»˜å‡ºï¼Œè¿™æ˜¯ä½ ä»¬èµäºˆè¿™ä¸ªäº§å“çš„ç¤¼ç‰©ã€‚\n\n## Never say Goodbye to å¼€å‘è€…\n\næ— è®ºæˆ‘åœ¨å“ªé‡Œï¼Œæˆ‘éƒ½ä¼šæŒç»­åœ°ã€æ°¸è¿œåœ°ã€åšå®šåœ°å…³æ³¨è½¯ä»¶å’Œå¼€å‘è€…ï¼Œè¿™æ˜¯ 21 ä¸–çºªç•™ç»™äººç±»çš„æœ€é‡è¦çš„æ–‡åŒ–äº§ç‰©ã€‚å¼€å‘è€…åœ¨æˆ‘å¿ƒä¸­ä»æ²¡æœ‰æ”¹å˜è¿‡å®ƒçš„èº«ä»½ï¼Œè¿™ä¸ªæ—¶ä»£çš„è‰ºæœ¯å®¶ã€‚å¦‚æœè¿™ä¸ªä¸–çºªè¦è¿æ¥ä¸€åœºæ–‡è‰ºå¤å…´ï¼Œæˆ‘å¸Œæœ›å®ƒå±äºæ‰€æœ‰çš„å¼€å‘è€…ï¼\n\n\n```\næˆ‘ä¼šç»å¸¸å›æ¥çš„ â¤ï¸\nMing, 2020-08-04\n```", "user_name": "é˜´æ˜", "description": "å­éçŒ¿ï¼Œå®‰çŸ¥æ˜é‡‘ä¹‹ä¹ä¹Ÿ", "got_view_count": 1638530, "category_name": "ä»£ç äººç”Ÿ", "ctime": 1553759544}
{"tag_name": "Java", "concern_user_count": 252044, "user_id": "8451822195837", "title": "æŠ€æœ¯äººçš„æˆé•¿", "mark_content": "# æ‘˜è¦\næœ€è¿‘å’Œæœ‹å‹ï¼ŒåŒäº‹äº¤æµäº†ä¸€äº›å…³äºæŠ€æœ¯äººå¦‚ä½•æˆé•¿çš„è¯é¢˜ã€‚ä¸ºä»€ä¹ˆèŠåˆ°è¿™ä¸ªè¯é¢˜ï¼Œå› ä¸ºç¨‹åºå‘˜è¿™ä¸ªèŒä¸šå‘å±•çœŸçš„å¾ˆå¿«ï¼Œ2ã€3å¹´çš„æ—¶é—´ï¼Œç›¸åŒèµ·ç‚¹çš„äººå¯èƒ½å°±ä¼šè¢«æ‹‰å¼€å¾ˆå¤§å·®è·ï¼Œæ‰€ä»¥æŠ€æœ¯äººä¸€å®šè¦æŒç»­å­¦ä¹ ï¼Œä¿è¯ä¸€å®šçš„æˆé•¿é€Ÿåº¦ï¼Œæ‰èƒ½è·Ÿä¸ŠæŠ€æœ¯çš„æ›´æ–°å’Œä¸æ–­æ‹æ¥çš„åæµªã€‚\n\n# æˆé•¿ä½“ç³»\n## å–œæ¬¢ä¸æ“…é•¿\nèŒä¸šæˆé•¿ä½“ç³»æ€»æ˜¯ä¼šæåˆ°2ä¸ªç»´åº¦ï¼Œå–œæ¬¢çš„ã€æ“…é•¿çš„ã€‚åšä½ æ“…é•¿çš„å¯ä»¥ä¿è¯ä½ çš„èŒä¸šåº•çº¿ï¼Œåšä½ å–œæ¬¢çš„å¯ä»¥è§¦ç¢°åˆ°ä½ äººç”Ÿä¸Šé™ã€‚\n\nå¤§éƒ¨åˆ†äººéƒ½æ˜¯å¹³åº¸çš„ï¼Œæ‰€ä»¥ä¸è¦æ•´å¤©çº ç»“åšå–œæ¬¢çš„è¿˜æ˜¯æ“…é•¿çš„ï¼Œå› ä¸ºå…¶å®å¤§å¤šæ•°äººæ—¢æ²¡æœ‰çƒ­çˆ±çš„ï¼Œä¹Ÿæ²¡æœ‰ç‰¹é•¿ï¼Œä¸€è¾ˆå­å¾—å·¥ä½œå‡ åå¹´ï¼Œä½ èƒ½æŠŠä»äº‹çš„èŒä¸šæŒç»­åšå¥½ï¼Œåšåˆ°æ“…é•¿ï¼Œå°±ä¼šæ…¢æ…¢å–œæ¬¢ä¸Šä»–ã€‚\n\nç¨‹åºå‘˜æ˜¯ä»½ä¸èµ–çš„å·¥ä½œï¼Œæ”¶å…¥å°šå¯ï¼Œäººé™…å…³ç³»ç®€å•ï¼Œä¸Šé™è¿˜æŒºé«˜ã€‚è™½ç„¶ä»ä¸šäººæ•°æ…¢æ…¢è¶‹äºé¥±å’Œï¼Œå¯¼è‡´ç«äº‰åŠ å‰§ï¼Œä½†æ˜¯äººç”Ÿä¸æ˜¯åªæœ‰å·¥ä½œï¼Œç¤¾ä¼šäººæ€»æ˜¯ä¼šè¢«å„ç§å„æ ·çš„æƒ³æ³•æ‰€å·¦å³ï¼Œæ‰€ä»¥åªè¦ä½ èƒ½åšæŒå­¦ä¹ ï¼ŒæŒç»­è¿›æ­¥ï¼Œä½ å°±èƒ½ç”©å¼€æ™®é€šäººï¼Œåœ¨ç«äº‰ä¸­è„±é¢–è€Œå‡ºã€‚\n\n## é˜¶æ®µæˆé•¿\nç¨‹åºå‘˜çš„å‘å±•è·¯çº¿ï¼Œ1å¹´å…¥é—¨ï¼Œ3å¹´é«˜å·¥ï¼Œ5å¹´èµ„æ·±ï¼Œ7å¹´æ¶æ„ï¼Œ10å¹´å¤–å–![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200809152209850.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0ZTMTM2MDQ3MjE3NA==,size_16,color_FFFFFF,t_70)\næè¿°çš„æ˜¯ä¸€ä¸ªå¿«é€Ÿæˆé•¿çš„èŒä¸šã€‚å½“ç„¶10å¹´å¤–å–æ˜¯ä¸ªç©ç¬‘è¯ï¼Œä»–èƒŒåçš„å«ä¹‰å…¶å®æ˜¯10å¹´åçš„æŠ€æœ¯å²—ä½æ¯”è¾ƒå°‘äº†ï¼Œæ‰€ä»¥æŠ€æœ¯äººä¸æ–­è¶…å‡ºäº†æŠ€æœ¯çš„èŒƒç•´ï¼Œæœ‰äº›åšäº†ç®¡ç†ï¼Œæœ‰äº›è½¬è¡Œåˆ°äº§å“ï¼Œå”®å‰ï¼Œå’¨è¯¢ã€‚æˆ–è€…å·²ç»ä¸åœ¨äº’è”ç½‘è¡Œä¸šï¼Œè¿™å¾ˆæ­£å¸¸ï¼Œä¸–ç•Œæœ¬æ¥å°±æ˜¯ä¸°å¯Œå¤šå½©ã€‚\n\nèŒä¸šç”Ÿæ¶¯çš„æ—©æœŸï¼Œæˆ‘ä»¬èƒ½åšçš„æ˜¯è¿½éšï¼Œè·Ÿä¸Šæ­¥ä¼ã€‚èŒä¸šä¸­æœŸï¼Œå¼€å§‹æœ‰äº†è§„åˆ’å»ºè®¾èƒ½åŠ›ï¼Œæœ‰ç€å¼ºå¤§çš„å†…å¿ƒï¼Œèƒ½å¤Ÿè‡ªä¿¡çš„èµ°å‡ºä¸ä¸€æ ·çš„é“è·¯ï¼Œè€Œä¸å¿…åœ¨ä¹å…¶ä»–äººçš„çœ‹æ³•ã€‚\n\n## å·¥ä½œä¸ç”Ÿæ´»\næˆ‘å·®ä¸å¤šæ˜¯å·¥ä½œ5å¹´çš„æ—¶å€™é¢†æ‚Ÿåˆ°å·¥ä½œå’Œç”Ÿæ´»æ˜¯åˆ†ä¸å¼€çš„ã€‚å·¥ä½œå³ç”Ÿæ´»ï¼Œç”Ÿæ´»å³å·¥ä½œã€‚åœ¨é‚£ä¹‹å‰ï¼Œæˆ‘ä¸€ç›´æƒ³æ ‘ç«‹ä¸€é“å¢™ï¼Œèƒ½å¤ŸæŠŠå·¥ä½œå’Œç”Ÿæ´»æ’•æ‰¯å¼€ã€‚åæ¥æˆ‘å‘ç°ï¼Œåœ¨ç°åœ¨è¿™æ ·çš„ä¸€ä¸ªæ’¸èµ·è¢–å­åŠ æ²¹å¹²çš„æ—¶ä»£ï¼Œå·¥ä½œä¼šä¸æ–­ä¾µèš€ä½ çš„ç”Ÿæ´»ï¼Œå°†ä½ çš„å¤§éƒ¨åˆ†æ—¶é—´éƒ½å æ®ï¼Œå¦‚æœä½ è¿˜ä¸€ç›´æƒ³ç€ï¼Œ\n- ç­‰æˆ‘æ‰¾ä¸ªä¸‹ç­æ—©çš„å·¥ä½œï¼Œå°±æœ‰æ—¶é—´å¥½å¥½å­¦ä¹ ï¼Œæå‡æŠ€æœ¯äº†\n- ç­‰æˆ‘æ‰¾ä¸ªè½»æ¾çš„å·¥ä½œï¼Œå°±æœ‰æ—¶é—´è°ˆæ‹çˆ±\n- ç­‰æˆ‘ä¸å¿™äº†ï¼Œå°±è¦å‡ºå»æ—…æ¸¸ï¼Œæ¢ç´¢ä¸–ç•Œäº†\n\nä½ ä¼šå‘ç°1å¹´è¿‡å»äº†ï¼Œä½ è¿˜æ˜¯æ²¡èƒ½å®ç°ã€‚å› ä¸ºä½ å·²ç»æ²¡æœ‰äº†ç”Ÿæ´»çš„èƒ½åŠ›ï¼Œè¢«å·¥ä½œæ•™è‚²æˆäº†ä¸€ä¸ªåªä¼šè¢«åŠ¨æ¥å—ä»»åŠ¡çš„äººï¼Œè€Œä¸ä¼šå»ä¸»åŠ¨è§„åˆ’è‡ªå·±çš„äººç”Ÿäº†ã€‚\n\næ‰€ä»¥ä¸å¦¨è€ƒè™‘ä¸€ä¸‹ï¼Œå¦‚ä½•åƒè®¤çœŸå·¥ä½œä¸€æ ·è®¤çœŸç”Ÿæ´»ï¼Œå¦‚ä½•åƒå¿«ä¹ç”Ÿæ´»ä¸€æ ·å¿«ä¹å·¥ä½œã€‚\n# å¦‚ä½•å»å­¦\næˆ‘ä»¬æœ‰äº†è‡ªå·±çš„é˜¶æ®µæˆé•¿ç›®æ ‡ï¼Œé‚£ä¹ˆå¦‚ä½•å»å­¦å‘¢\n\n## å›¢é˜Ÿå­¦ä¹ ï¼Œæ•™ä¼šä»–äºº\nå­¦ä¹ çš„ä¸‰æ­¥æ›²å°±æ˜¯**å¤ç›˜-æ€»ç»“-å½’çº³**ã€‚\né€šè¿‡å¤ç›˜æ‰¾åˆ°ä¸ä¼šçš„ï¼Œæ€»ç»“å…¶ä¸­çš„çŸ¥è¯†ç‚¹ï¼Œç„¶åå½’çº³èµ·æ¥ï¼Œä¸æ–­çš„é‡å¤åŠ å¼ºã€‚ä¸€ä¸ªäººçš„å­¦ä¹ æ€»æ˜¯å­¤å•ä¸å¯æŒç»­çš„ï¼Œé€šè¿‡å’ŒåŒäº‹ç»„é˜Ÿï¼Œç½‘ä¸Šç¤¾ç¾¤ä¸€èµ·æ‰“å¡å­¦ä¹ ï¼Œæ‰èƒ½è¿›æ­¥æ›´å¿«ã€‚\n\næ•™ä¼šä»–äººæ‰æ˜¯çœŸæ­£æŒæ¡äº†æŸä¸ªçŸ¥è¯†ç‚¹ï¼ŒæŠ€æœ¯äººçš„çŸ¥è¯†ç‚¹éƒ½æ˜¯å®¢è§‚çš„ï¼Œä¸å­˜åœ¨åªå¯æ„ä¼šï¼Œæ— æ³•è¨€ä¼ çš„è¯´æ³•ã€‚å½“ä½ çœ‹æ‡‚ä¸€ä¸ªçŸ¥è¯†ç‚¹æ—¶ï¼Œä½ å¯èƒ½åªç†è§£äº†2åˆ†ï¼Œåœ¨å®è·µä¸­ç”¨äº†åˆ°äº†4åˆ†ï¼Œæ€»ç»“å½’çº³å6åˆ†ï¼Œèƒ½æŠŠåˆ«äººæ•™ä¼šï¼Œä½ ç†è§£çš„æ‰èƒ½è¾¾åˆ°8åˆ†ã€‚\n\n##  çŸ¥è¯†å›¾è°±\næŠ€æœ¯äººä¸€å®šè¦æ„å»ºè‡ªå·±çš„çŸ¥è¯†å›¾è°±ï¼Œå°†ç‚¹è¿æˆçº¿ï¼Œçº¿è¿æˆé¢ã€‚\næ¯”å¦‚è¿™æ˜¯æˆ‘webåç«¯çš„ä¸€ä¸ªå¤§çš„çŸ¥è¯†å›¾è°±ï¼Œæ¯ä¸ªé‡Œé¢æœ‰è¿™ä¸ªçŸ¥è¯†ç‚¹çš„å›¾è°±\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/202008091557406.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0ZTMTM2MDQ3MjE3NA==,size_16,color_FFFFFF,t_70)\n\nå› ä¸ºè¿™æ ·ä½ çš„çŸ¥è¯†ä½“ç³»æ‰æ˜¯ç»“æ„åŒ–çš„ï¼Œç»“æ„åŒ–çš„çŸ¥è¯†æ‰èƒ½å¿«é€Ÿæœç´¢ï¼Œè¿™å°±å¥½æ¯”æ–‡æœ¬æœç´¢ï¼Œä¸å»ºç«‹ç»“æ„åŒ–çš„æ•°æ®ï¼Œä½ æ˜¯æ— æ³•å¿«é€Ÿæœç´¢çš„ã€‚\n\né‚£ä¹ˆå¦‚ä½•æ„å»ºè‡ªå·±çš„çŸ¥è¯†å›¾è°±çš„ï¼Ÿ\nä»å°å¤„ç€æ‰‹ï¼Œä»æ—¥å¸¸ç§¯ç´¯å¼€å§‹ã€‚\n\n**bugéƒ½æ˜¯æœ‰ä»·å€¼çš„**\n æ¯ä¸€ä¸ªèŠ±è´¹ä½ è¾ƒé•¿æ—¶é—´è§£å†³çš„bug,éƒ½è¯´æ˜ä½ æŸå—çŸ¥è¯†ç‚¹ç¼ºå°‘ã€‚ä½ å¯ä»¥é€šè¿‡è¯·æ•™ä»–äººæˆ–è€…stackoverflowè§£å†³æ‰è¿™ä¸ªbug,ä½†æ˜¯è¯·ä¸€å®šèŠ±æ—¶é—´å¼„æ¸…æ¥šå®ƒäº§ç”Ÿçš„åŸå› ï¼Œææ¸…æ¥šæ¥é¾™å»è„‰ï¼Œå°†è¿™ä¸ªçŸ¥è¯†ç‚¹æ„å»ºåˆ°ä½ çš„çŸ¥è¯†å›¾è°±ä¸­\n\n**ä»æ‰©å±•åšèµ·**\nä½ åˆ†é…åˆ°ä¸€ä¸ªéœ€æ±‚ï¼Œåšä¸€ä¸ªä»»åŠ¡è°ƒåº¦ã€‚ä½ å¯ä»¥ä½¿ç”¨å…¬å¸å°è£…å¥½çš„ä»»åŠ¡æ¡†æ¶å¿«é€Ÿå®ç°éœ€æ±‚ï¼Œäº¤ä»˜ä¸Šçº¿ã€‚ä½†æ˜¯è¿™å¹¶ä¸æ˜¯ç»“æŸï¼Œä½ éœ€è¦è€ƒè™‘\n- ä¸€ä¸ªä»»åŠ¡è°ƒåº¦éœ€è¦è§£å†³å“ªäº›é—®é¢˜\n- ä¸åŒä¸šåŠ¡åœºæ™¯ä¸‹æœ‰å“ªäº›è§£å†³æ–¹æ¡ˆ\n- ä»»åŠ¡æ¡†æ¶æ˜¯å¦‚ä½•è§£å†³è¿™äº›é—®é¢˜\n- ä¸šç•Œè¿˜æœ‰å“ªäº›æ¡†æ¶/æŠ€æœ¯æ–¹æ¡ˆæ¥è§£å†³ä»»åŠ¡è°ƒåº¦\n\nå­¦ä¼šæ‰©å±•å­¦ä¹ ï¼Œå¯ä»¥æ‹“å®½ä½ çš„è§†é‡ã€‚\n\n**å­¦ä¹ ä¸šç•ŒçŸ¥è¯†ä½“ç³»ï¼Œå®Œå–„ä½ çš„å›¾è°±**\nä¸Šé¢æåˆ°çš„éƒ½æ˜¯åœ¨å·¥ä½œä¸­å­¦ä¹ ï¼Œä½†æ˜¯å·¥ä½œä¸­é¢å¯¹çš„åœºæ™¯æ¯•ç«Ÿæœ‰é™ã€‚æ‰€ä»¥å‘ä»–äººå­¦ä¹ ï¼Œå‘ä¸šç•Œå­¦ä¹ ã€‚æ¯”å¦‚åˆ†å¸ƒå¼å¦‚ä½•åšçš„ï¼Œéœ€è¦è§£å†³å“ªäº›é—®é¢˜ï¼Œè¿™æ ·èƒ½å¤Ÿå¸®åŠ©ä½ å®Œå–„ä½ çš„å›¾è°±ã€‚\n\n**å…³æ³¨å…¬ä¼—å·ã€æ–¹ä¸ˆçš„å¯ºé™¢ã€‘ï¼Œç¬¬ä¸€æ—¶é—´æ”¶åˆ°æ–‡ç« çš„æ›´æ–°ï¼Œä¸æ–¹ä¸ˆä¸€èµ·å¼€å§‹æŠ€æœ¯ä¿®è¡Œä¹‹è·¯**\n\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOS85LzMwLzE2ZDgyNjdiNmExZTBlYzA?x-oss-process=image/format,png)\n\n\n", "user_name": "æ–¹ä¸ˆçš„å¯ºé™¢", "description": "æŠ€æœ¯ä¹‹è·¯å¾ˆé•¿ï¼Œæ…¢æ…¢ä¿®è¡Œ", "got_view_count": 65066, "category_name": "åç«¯", "ctime": 1457483880}
{"tag_name": "HTML", "concern_user_count": 207875, "user_id": "2928754708973704", "title": "ä»è¾“å…¥urlåˆ°é¡µé¢å®ŒæˆåŠ è½½å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ", "mark_content": "å…ˆæ¥ä¸ªæµç¨‹æ€»è¿°ï¼š\n\n - DNSè§£æï¼šå°†åŸŸåè§£ææˆIPåœ°å€\n - TCPè¿æ¥ï¼šTCPä¸‰æ¬¡æ¡æ‰‹\n - å‘é€HTTPè¯·æ±‚\n - æœåŠ¡å™¨å¤„ç†è¯·æ±‚å¹¶è¿”å›HTTPæŠ¥æ–‡\n - æµè§ˆå™¨è§£ææ¸²æŸ“é¡µé¢\n - è¿æ¥ç»“æŸï¼šTCPå››æ¬¡æŒ¥æ‰‹\n\n #### 1ã€DNSè§£æ\n\n åœ¨æµè§ˆå™¨è¾“å…¥URLåï¼Œé¦–å…ˆè¦ç»è¿‡åŸŸåè§£æã€‚æµè§ˆå™¨é€šè¿‡å‘ DNS æœåŠ¡å™¨å‘é€åŸŸåï¼ŒDNS æœåŠ¡å™¨æŸ¥è¯¢åˆ°ä¸åŸŸåç›¸å¯¹åº”çš„ IP åœ°å€ï¼Œç„¶åè¿”å›ç»™æµè§ˆå™¨ï¼Œæµè§ˆå™¨å†å°† IP åœ°å€æ‰“åœ¨åè®®ä¸Šï¼ŒåŒæ—¶è¯·æ±‚å‚æ•°ä¹Ÿä¼šåœ¨åè®®æ­è½½ï¼Œç„¶åä¸€å¹¶å‘é€ç»™å¯¹åº”çš„æœåŠ¡å™¨ã€‚\n\n\n```\n1.ä»€ä¹ˆæ˜¯URL\nURLï¼ˆUniform Resource Locatorï¼‰ï¼Œç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼Œç”¨äºå®šä½äº’è”ç½‘ä¸Šèµ„æºï¼Œä¿—ç§°ç½‘å€ã€‚æ¯”å¦‚ http://www.w3school.com.cn/ht...ï¼Œ\néµå®ˆä»¥ä¸‹çš„è¯­æ³•è§„åˆ™ï¼š\n`scheme://host.domain:port/path/filename`\nå„éƒ¨åˆ†è§£é‡Šå¦‚ä¸‹ï¼š\nschemeï¼šå®šä¹‰å› ç‰¹ç½‘æœåŠ¡çš„ç±»å‹ã€‚å¸¸è§çš„åè®®æœ‰ httpã€httpsã€ftpã€fileï¼Œå…¶ä¸­æœ€å¸¸è§çš„ç±»å‹æ˜¯ httpï¼Œè€Œ https åˆ™æ˜¯è¿›è¡ŒåŠ å¯†çš„ç½‘ç»œä¼ è¾“ã€‚\nhostï¼šå®šä¹‰åŸŸä¸»æœºï¼ˆhttp çš„é»˜è®¤ä¸»æœºæ˜¯ wwwï¼‰\ndomainï¼šå®šä¹‰å› ç‰¹ç½‘åŸŸåï¼Œæ¯”å¦‚ w3school.com.cn\nportï¼šå®šä¹‰ä¸»æœºä¸Šçš„ç«¯å£å·ï¼ˆhttp çš„é»˜è®¤ç«¯å£å·æ˜¯ 80ï¼‰\npathï¼š å®šä¹‰æœåŠ¡å™¨ä¸Šçš„è·¯å¾„ï¼ˆå¦‚æœçœç•¥ï¼Œåˆ™æ–‡æ¡£å¿…é¡»ä½äºç½‘ç«™çš„æ ¹ç›®å½•ä¸­ï¼‰ã€‚\nfilenameï¼š å®šä¹‰æ–‡æ¡£/èµ„æºçš„åç§°\n\n2. ä»€ä¹ˆæ˜¯DNS\nDNS(domain name systemï¼ŒåŸŸåç³»ç»Ÿ)ï¼šå› ç‰¹ç½‘ä¸ŠåŸŸåå’ŒIPåœ°å€ç›¸äº’æ˜ å°„çš„åˆ†å¸ƒå¼æ•°æ®åº“ï¼›ç®€å•ç†è§£å°±æ˜¯åŸŸåä¸IPåœ°å€çš„å¯¹ç…§è¡¨ï¼Œå› ä¸ºåŸŸåï¼ˆå¦‚ï¼šwww.google.comï¼‰å¯¹äºæˆ‘ä»¬è€Œè¨€ï¼Œæ›´ä¾¿äºè®°å¿†ï¼Œä½†æ˜¯æœºå™¨å´ä¸æ“…é•¿è¿™ç§è¡¨è¾¾æ–¹å¼ï¼Œå› æ­¤éœ€è¦å°†åŸŸåè½¬æ¢ä¸ºIPåœ°å€ï¼Œä»¥ä¾¿äºæœºå™¨è¯†åˆ«ï¼Œ è¿™ä¾¿æœ‰äº†DNSã€‚\n\n3. æ ¹åŸŸåæœåŠ¡å™¨\næ ¹æœåŠ¡å™¨æ˜¯æ¶è®¾äº’è”ç½‘çš„å¿…é¡»è®¾æ–½ï¼Œç®¡ç†äº’è”ç½‘çš„ä¸»ç›®å½•ï¼Œå…¨çƒå…±æœ‰13å¥—æ ¹åŸŸåæœåŠ¡å™¨\n\n4. é€’å½’æŸ¥è¯¢\nå®¢æˆ·ç«¯ä¸»æœºå‘æœ¬åœ°åŸŸåæœåŠ¡å™¨çš„æŸ¥è¯¢æ˜¯é€’å½’æŸ¥è¯¢ï¼›æ‰€è°“é€’å½’æŸ¥è¯¢ï¼šå®¢æˆ·ç«¯ä¸»æœºæŸ¥è¯¢çš„åŸŸååœ°å€æ— æ³•åœ¨æœ¬åœ°åŸŸåæœåŠ¡å™¨ä¸­æ‰¾åˆ°ï¼Œå› æ­¤æœ¬åœ°åŸŸåæœåŠ¡å™¨å°±ä»¥DNSå®¢æˆ·ç«¯çš„èº«ä»½å‘å…¶ä»–æ ¹åŸŸåæœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œè¿›è¡ŒæŸ¥è¯¢ï¼Œè€Œä¸æ˜¯è®©å®¢æˆ·ç«¯ä¸»æœºå»ä¸€ç›´æŸ¥è¯¢ï¼›\né€’å½’æŸ¥è¯¢çš„ç»“æœè¦ä¹ˆæ˜¯è¿”å›çš„IPåœ°å€ï¼Œè¦ä¹ˆæ˜¯æŠ¥é”™ï¼Œè¡¨ç¤ºæ— æ³•æŸ¥è¯¢åˆ°åœ°å€ï¼›\n\n5. è¿­ä»£æŸ¥è¯¢\næœ¬åœ°åŸŸåæœåŠ¡å™¨å‘æ ¹æœåŠ¡å™¨ã€é¡¶çº§åŸŸåæœåŠ¡å™¨å’Œä¸»æœºåŸŸåæœåŠ¡å™¨å‘èµ·çš„æŸ¥è¯¢è¯·æ±‚å°±æ˜¯è¿­ä»£çš„è¿‡ç¨‹ï¼Œå¦‚ï¼šæœ¬åœ°åŸŸåæœåŠ¡å™¨å‘æ ¹æœåŠ¡å™¨å‘èµ·æŸ¥è¯¢è¯·æ±‚ï¼Œæ ¹æœåŠ¡å™¨ä¸­ä¼šå‘Šè¯‰æœ¬åœ°åŸŸåæœåŠ¡å™¨ï¼šâ€æˆ‘è¿™é‡Œæ²¡æœ‰ä½ è¦æ‰¾çš„å†…å®¹ï¼Œä½ å»é¡¶çº§åŸŸåæœåŠ¡å™¨ä¸Šæ‰¾å§â€œï¼Œå¹¶å°†é¡¶çº§åŸŸåæœåŠ¡å™¨çš„åœ°å€è¿”å›ç»™æœ¬åœ°åŸŸåæœåŠ¡å™¨ï¼Œæœ¬åœ°åŸŸåæœåŠ¡å™¨æ¥æ”¶åˆ°åï¼Œç»§ç»­å‘é¡¶çº§åŸŸåæœåŠ¡å™¨å‘é€è¯·æ±‚ï¼›é¡¶çº§åŸŸåæœåŠ¡å™¨è¦ä¹ˆè¿”å›ipåœ°å€ï¼Œè¦ä¹ˆå‘Šè¯‰æœ¬åœ°åŸŸåæœåŠ¡å™¨ä¸‹ä¸€æ­¥è¦å‘å“ªä¸ªæƒé™åŸŸåæœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œç›´åˆ°æ‰¾åˆ°ipåœ°å€æˆ–æ‰¾ä¸åˆ°ipè¿”å›æŠ¥é”™ä¿¡æ¯ï¼Œç„¶åä¿¡æ¯è¿”å›ç»™å®¢æˆ·ç«¯ä¸»æœºï¼›\nä¸‹å›¾ç»™å‡ºäº†è¿™ä¸¤ç§æŸ¥è¯¢çš„å·®åˆ«\n\né€’å½’è¿‡ç¨‹ï¼šä¸»æœºâ†’æœ¬åœ°DNSæœåŠ¡å™¨â†’å…¶ä»–DNSæœåŠ¡å™¨ï¼ˆå¦‚ï¼šæˆ‘è¦æ‰¾ä¸€ä¸ªè‹¹æœåƒï¼Œæ‰¾åˆ°äº†Aï¼Œé—®Aæœ‰æ²¡æœ‰ï¼ŒAè¯´æˆ‘å¸®ä½ å»æ‰¾Bï¼ŒBå¯èƒ½æœ‰ï¼ŒæœçœŸBæœ‰ï¼Œç„¶åBå°†è‹¹æœç»™äº†Aï¼ŒAå†å°†è‹¹æœç»™æˆ‘ï¼Œè¿™å°±æ˜¯é€’å½’ï¼‰\nè¿­ä»£è¿‡ç¨‹ï¼šæœ¬åœ°DNSæœåŠ¡å™¨â†’æ ¹æœåŠ¡å™¨ï¼Œæœ¬åœ°DNSæœåŠ¡å™¨â†’é¡¶çº§åŸŸåæœåŠ¡å™¨ï¼Œæœ¬åœ°DNSæœåŠ¡å™¨â†’æƒé™åŸŸåæœåŠ¡å™¨ï¼›ï¼ˆå¦‚ï¼šæˆ‘è¦æ‰¾ä¸€ä¸ªè‹¹æœï¼Œæ‰¾åˆ°äº†Aï¼ŒAè¯´æˆ‘ä¹Ÿæ²¡æœ‰ï¼ŒBå¯èƒ½æœ‰ï¼Œä½ å»æ‰¾Bå§ï¼›æˆ‘åˆæ‰¾Bï¼ŒBè¯´æˆ‘ä¹Ÿæ²¡æœ‰ï¼Œä½ å»æ‰¾Cå§ï¼Œæˆ‘åˆå»æ‰¾Cï¼Œç»ˆäºæ‰¾åˆ°äº†è‹¹æœï¼Œè¿™å°±æ˜¯è¿­ä»£çš„è¿‡ç¨‹ï¼‰\n```\n\n #### 2ã€TCPè¿æ¥ï¼šTCPä¸‰æ¬¡æ¡æ‰‹\n\n åœ¨å®¢æˆ·ç«¯å‘é€æ•°æ®ä¹‹å‰ä¼šå‘èµ· TCP ä¸‰æ¬¡æ¡æ‰‹ç”¨ä»¥åŒæ­¥å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„åºåˆ—å·å’Œç¡®è®¤å·ï¼Œå¹¶äº¤æ¢ TCP çª—å£å¤§å°ä¿¡æ¯ã€‚\n ![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://user-gold-cdn.xitu.io/2020/4/12/1716dfdccbdd0461?w=707&h=559&f=png&s=229861)\n\n```\n è¯´æ˜ï¼š\n    Ackï¼šåº”ç­”\n    Finï¼šç»“æŸ; ç»“æŸä¼šè¯\n    Seqï¼š ä¸€ä¸ªæ•°æ®æ®µçš„ç¬¬ä¸€ä¸ªåºåˆ—å·\n    SYNï¼š åŒæ­¥; è¡¨ç¤ºå¼€å§‹ä¼šè¯è¯·æ±‚\n```\n\n -  ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯Aå°†æ ‡å¿—ä½SYNç½®ä¸º1,éšæœºäº§ç”Ÿä¸€ä¸ªå€¼ä¸ºseq=Xï¼ˆXçš„å–å€¼èŒƒå›´ä¸º=1234567ï¼‰çš„æ•°æ®åŒ…åˆ°æœåŠ¡å™¨ï¼Œå®¢æˆ·ç«¯Aè¿›å…¥SYN_SENTçŠ¶æ€ï¼Œç­‰å¾…æœåŠ¡ç«¯Bç¡®è®¤ï¼ˆç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼Œç”±æµè§ˆå™¨å‘èµ·ï¼Œå‘Šè¯‰æœåŠ¡å™¨æˆ‘è¦å‘é€è¯·æ±‚äº†ï¼‰ï¼›\n -  ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šæœåŠ¡ç«¯Bæ”¶åˆ°æ•°æ®åŒ…åç”±æ ‡å¿—ä½SYN=1çŸ¥é“å®¢æˆ·ç«¯Aè¯·æ±‚å»ºç«‹è¿æ¥ï¼ŒæœåŠ¡ç«¯Bå°†æ ‡å¿—ä½SYNå’ŒACKéƒ½ç½®ä¸º1ï¼Œack=X+1ï¼Œéšæœºäº§ç”Ÿä¸€ä¸ªå€¼seq=Yï¼Œå¹¶å°†è¯¥æ•°æ®åŒ…å‘é€ç»™å®¢æˆ·ç«¯Aä»¥ç¡®è®¤è¿æ¥è¯·æ±‚ï¼ŒæœåŠ¡ç«¯Bè¿›å…¥SYN_RCVDçŠ¶æ€ï¼ˆç¬¬äºŒæ¬¡æ¡æ‰‹ï¼Œç”±æœåŠ¡å™¨å‘èµ·ï¼Œå‘Šè¯‰æµè§ˆå™¨æˆ‘å‡†å¤‡æ¥å—äº†ï¼Œä½ èµ¶ç´§å‘é€å§ï¼‰ã€‚\n -  ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯Aæ”¶åˆ°ç¡®è®¤åï¼Œæ£€æŸ¥ackæ˜¯å¦ä¸ºX+1ï¼ŒACKæ˜¯å¦ä¸º1ï¼Œå¦‚æœæ­£ç¡®åˆ™å°†æ ‡å¿—ä½ACKç½®ä¸º1ï¼Œack=Y+1ï¼Œå¹¶å°†è¯¥æ•°æ®åŒ…å‘é€ç»™æœåŠ¡ç«¯Bï¼ŒæœåŠ¡ç«¯Bæ£€æŸ¥ackæ˜¯å¦ä¸ºY+1ï¼ŒACKæ˜¯å¦ä¸º1ï¼Œå¦‚æœæ­£ç¡®åˆ™è¿æ¥å»ºç«‹æˆåŠŸï¼Œå®¢æˆ·ç«¯Aå’ŒæœåŠ¡ç«¯Bè¿›å…¥ESTABLISHEDçŠ¶æ€ï¼Œå®Œæˆä¸‰æ¬¡æ¡æ‰‹ï¼Œéšåå®¢æˆ·ç«¯Aä¸æœåŠ¡ç«¯Bä¹‹é—´å¯ä»¥å¼€å§‹ä¼ è¾“æ•°æ®äº†ï¼ˆç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼Œç”±æµè§ˆå™¨å‘é€ï¼Œå‘Šè¯‰æœåŠ¡å™¨ï¼Œæˆ‘é©¬ä¸Šå°±å‘äº†ï¼Œå‡†å¤‡æ¥å—å§ï¼‰ã€‚\n\n>**ä¸ºä»€éœ€è¦ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿ**\n>è®¡ç®—æœºç½‘ç»œã€‹ç¬¬å››ç‰ˆä¸­è®²â€œä¸‰æ¬¡æ¡æ‰‹â€çš„ç›®çš„æ˜¯â€œä¸ºäº†é˜²æ­¢å·²å¤±æ•ˆçš„è¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µçªç„¶åˆä¼ é€åˆ°äº†æœåŠ¡ç«¯ï¼Œå› è€Œäº§ç”Ÿé”™è¯¯â€ã€‚ ä¹¦ä¸­çš„ä¾‹å­æ˜¯è¿™æ ·çš„ï¼Œâ€œå·²å¤±æ•ˆçš„è¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µâ€çš„äº§ç”Ÿåœ¨è¿™æ ·ä¸€ç§æƒ…å†µä¸‹ï¼šclientå‘å‡ºçš„ç¬¬ä¸€ä¸ªè¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µå¹¶æ²¡æœ‰ä¸¢å¤±ï¼Œè€Œæ˜¯åœ¨æŸä¸ªç½‘ç»œç»“ç‚¹é•¿æ—¶é—´çš„æ»ç•™äº†ï¼Œä»¥è‡´å»¶è¯¯åˆ°è¿æ¥é‡Šæ”¾ä»¥åçš„æŸä¸ªæ—¶é—´æ‰åˆ°è¾¾serverã€‚æœ¬æ¥è¿™æ˜¯ä¸€ä¸ªæ—©å·²å¤±æ•ˆçš„æŠ¥æ–‡æ®µã€‚ä½†serveræ”¶åˆ°æ­¤å¤±æ•ˆçš„è¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µåï¼Œå°±è¯¯è®¤ä¸ºæ˜¯clientå†æ¬¡å‘å‡ºçš„ä¸€ä¸ªæ–°çš„è¿æ¥è¯·æ±‚ã€‚äºæ˜¯å°±å‘clientå‘å‡ºç¡®è®¤æŠ¥æ–‡æ®µï¼ŒåŒæ„å»ºç«‹è¿æ¥ã€‚\n>å‡è®¾ä¸é‡‡ç”¨â€œä¸‰æ¬¡æ¡æ‰‹â€ï¼Œé‚£ä¹ˆåªè¦serverå‘å‡ºç¡®è®¤ï¼Œæ–°çš„è¿æ¥å°±å»ºç«‹äº†ã€‚ç”±äºç°åœ¨clientå¹¶æ²¡æœ‰å‘å‡ºå»ºç«‹è¿æ¥çš„è¯·æ±‚ï¼Œå› æ­¤ä¸ä¼šç†ç¬serverçš„ç¡®è®¤ï¼Œä¹Ÿä¸ä¼šå‘serverå‘é€æ•°æ®ã€‚ä½†serverå´ä»¥ä¸ºæ–°çš„è¿è¾“è¿æ¥å·²ç»å»ºç«‹ï¼Œå¹¶ä¸€ç›´ç­‰å¾…clientå‘æ¥æ•°æ®ã€‚è¿™æ ·ï¼Œserverçš„å¾ˆå¤šèµ„æºå°±ç™½ç™½æµªè´¹æ‰äº†ã€‚é‡‡ç”¨â€œä¸‰æ¬¡æ¡æ‰‹â€çš„åŠæ³•å¯ä»¥é˜²æ­¢ä¸Šè¿°ç°è±¡å‘ç”Ÿã€‚ä¾‹å¦‚åˆšæ‰é‚£ç§æƒ…å†µï¼Œclientä¸ä¼šå‘serverçš„ç¡®è®¤å‘å‡ºç¡®è®¤ã€‚serverç”±äºæ”¶ä¸åˆ°ç¡®è®¤ï¼Œå°±çŸ¥é“clientå¹¶æ²¡æœ‰è¦æ±‚å»ºç«‹è¿æ¥ã€‚â€ã€‚ä¸»è¦ç›®çš„é˜²æ­¢serverç«¯ä¸€ç›´ç­‰å¾…ï¼Œæµªè´¹èµ„æºã€‚\n\n #### 3ã€æµè§ˆå™¨å‘webæœåŠ¡å™¨å‘é€HTTPè¯·æ±‚\n\n TCPä¸‰æ¬¡æ¡æ‰‹ä¹‹åï¼Œå¼€å§‹å‘é€HTTPè¯·æ±‚æŠ¥æ–‡è‡³æœåŠ¡å™¨ï¼ˆå…³äºHTTPè¯·æ±‚æŠ¥æ–‡è¯¦è§£ï¼Œæˆ‘å•ç‹¬å†™äº†ä¸€ç¯‡â˜[ä¼ é€é—¨](https://blog.csdn.net/qq_39735040/article/details/96749197)\n\n   HTTPè¯·æ±‚æŠ¥æ–‡æ ¼å¼ï¼šè¯·æ±‚è¡Œ+è¯·æ±‚å¤´+ç©ºè¡Œ+æ¶ˆæ¯ä½“ï¼Œè¯·æ±‚è¡ŒåŒ…æ‹¬è¯·æ±‚æ–¹å¼ï¼ˆGET/POST/DELETE/PUTï¼‰ã€è¯·æ±‚èµ„æºè·¯å¾„ï¼ˆURLï¼‰ã€HTTPç‰ˆæœ¬å·ï¼›\n\n![](https://user-gold-cdn.xitu.io/2020/4/12/1716e626c50c96be?w=554&h=154&f=png&s=35651)\n\n #### 4ã€æœåŠ¡å™¨å¤„ç†è¯·æ±‚å¹¶è¿”å›HTTPæŠ¥æ–‡\n\n æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚åä¼šå‘å‡ºåº”ç­”ï¼Œå³å“åº”æ•°æ®ã€‚HTTPå“åº”ä¸HTTPè¯·æ±‚ç›¸ä¼¼ï¼Œ\n     HTTPå“åº”æŠ¥æ–‡æ ¼å¼ï¼šçŠ¶æ€è¡Œ+å“åº”å¤´+ç©ºè¡Œ+æ¶ˆæ¯ä½“ï¼ŒçŠ¶æ€è¡ŒåŒ…æ‹¬HTTPç‰ˆæœ¬å·ã€çŠ¶æ€ç ã€çŠ¶æ€è¯´æ˜ã€‚\n\n![](https://user-gold-cdn.xitu.io/2020/4/12/1716e6220b3d8c04?w=272&h=62&f=png&s=22988)\n\n #### 5ã€æµè§ˆå™¨è§£ææ¸²æŸ“é¡µé¢\n\n æµè§ˆå™¨æ‹¿åˆ°å“åº”æ–‡æœ¬åï¼Œè§£æHTMLä»£ç ï¼Œè¯·æ±‚jsï¼Œcssç­‰èµ„æºï¼Œæœ€åè¿›è¡Œé¡µé¢æ¸²æŸ“ï¼Œå‘ˆç°ç»™ç”¨æˆ·ã€‚é¡µé¢æ¸²æŸ“ä¸€èˆ¬åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š\n\n ï¼ˆ1ï¼‰æ ¹æ®HTMLæ–‡ä»¶è§£æå‡ºDOM Tree\n\nï¼ˆ2ï¼‰æ ¹æ®CSSè§£æå‡º CSSOM Tree(CSSè§„åˆ™æ ‘)\n\nï¼ˆ3ï¼‰å°† DOM Tree å’Œ CSSOM Treeåˆå¹¶ï¼Œæ„å»ºRender tree(æ¸²æŸ“æ ‘)\n\nï¼ˆ4ï¼‰reflow(é‡æ’)ï¼šæ ¹æ®Render treeè¿›è¡ŒèŠ‚ç‚¹ä¿¡æ¯è®¡ç®—ï¼ˆLayoutï¼‰\n\nï¼ˆ5ï¼‰repaint(é‡ç»˜)ï¼šæ ¹æ®è®¡ç®—å¥½çš„ä¿¡æ¯ç»˜åˆ¶æ•´ä¸ªé¡µé¢ï¼ˆPaintingï¼‰\n\n\n #### 6ã€TCPå››æ¬¡æŒ¥æ‰‹ã€‚\n\n å½“æ•°æ®ä¼ è¾“å®Œæ¯•ï¼Œéœ€è¦æ–­å¼€TCPè¿æ¥ï¼Œæ­¤æ—¶å‘èµ·tcpå››æ¬¡æŒ¥æ‰‹\n![](https://user-gold-cdn.xitu.io/2020/4/12/1716e7fa22920ea6?w=836&h=514&f=png&s=84908)\n 1ã€å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€æŠ¥æ–‡ï¼ŒFinã€Ackã€Seqï¼Œè¡¨ç¤ºå·²ç»æ²¡æœ‰æ•°æ®ä¼ è¾“äº†ã€‚å¹¶è¿›å…¥ FIN_WAIT_1 çŠ¶æ€ã€‚(ç”±æµè§ˆå™¨å‘Šè¯‰æœåŠ¡å™¨ï¼Œæˆ‘è¯·æ±‚æŠ¥æ–‡å‘é€å®Œäº†ï¼Œä½ å‡†å¤‡å…³é—­å§)\n\n2ã€æœåŠ¡ç«¯å‘å®¢æˆ·ç«¯å‘é€æŠ¥æ–‡ï¼ŒAckã€Seqï¼Œè¡¨ç¤ºåŒæ„å…³é—­è¯·æ±‚ã€‚æ­¤æ—¶ä¸»æœºå‘èµ·æ–¹è¿›å…¥ FIN_WAIT_2 çŠ¶æ€ã€‚(ç”±æœåŠ¡å™¨å‘Šè¯‰æµè§ˆå™¨ï¼Œæˆ‘è¯·æ±‚æŠ¥æ–‡æ¥å—å®Œäº†ï¼Œæˆ‘å‡†å¤‡å…³é—­äº†ï¼Œä½ ä¹Ÿå‡†å¤‡å§)\n\n3ã€æœåŠ¡ç«¯å‘å®¢æˆ·ç«¯å‘é€æŠ¥æ–‡æ®µï¼ŒFinã€Ackã€Seqï¼Œè¯·æ±‚å…³é—­è¿æ¥ã€‚å¹¶è¿›å…¥ LAST_ACK çŠ¶æ€ã€‚(ç”±æœåŠ¡å™¨å‘Šè¯‰æµè§ˆå™¨ï¼Œæˆ‘å“åº”æŠ¥æ–‡å‘é€å®Œäº†ï¼Œä½ å‡†å¤‡å…³é—­å§)\n\n4ã€å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€æŠ¥æ–‡æ®µï¼ŒAckã€Seqã€‚ç„¶åè¿›å…¥ç­‰å¾… TIME_WAIT çŠ¶æ€ã€‚è¢«åŠ¨æ–¹æ”¶åˆ°å‘èµ·æ–¹çš„æŠ¥æ–‡æ®µä»¥åå…³é—­è¿æ¥ã€‚å‘èµ·æ–¹ç­‰å¾…ä¸€å®šæ—¶é—´æœªæ”¶åˆ°å›å¤ï¼Œåˆ™æ­£å¸¸å…³é—­ã€‚(ç”±æµè§ˆå™¨å‘Šè¯‰æœåŠ¡å™¨ï¼Œæˆ‘å“åº”æŠ¥æ–‡æ¥å—å®Œäº†ï¼Œæˆ‘å‡†å¤‡å…³é—­äº†ï¼Œä½ ä¹Ÿå‡†å¤‡å§)\n\nç®€å•è¯´å°±æ˜¯ï¼š\n\n`1ã€Aâ€”â€”>B ï¼šAå‘Šè¯‰Bï¼šâ€œæˆ‘å‘å®Œäº†â€ï¼›`\n\n`2ã€Bâ€”â€”>Aï¼šBå‘Šè¯‰Aï¼šâ€œå¥½çš„ï¼Œæˆ‘çŸ¥é“ä½ å‘å®Œäº†â€`\n\n`3ã€Bâ€”â€”>Aï¼šBå‘Šè¯‰Aï¼šâ€œæˆ‘æ”¶å®Œäº†â€ï¼›`\n\n`4ã€Aâ€”â€”>Bï¼šAå‘Šè¯‰Bï¼šâ€œå¥½çš„ï¼Œæˆ‘çŸ¥é“ä½ å‘æ”¶å®Œäº†â€`\n\n\n### åè¯\n\nä»¥ä¸ŠåŸºæœ¬å°±æ˜¯åœ¨åœ°å€æ ä»è¾“å…¥ URL åˆ°é¡µé¢åŠ è½½æ˜¾ç¤ºå‘ç”Ÿçš„å…¨è¿‡ç¨‹ï¼Œå½“ç„¶è¿˜æœ‰å¾ˆå¤šçš„ç»†èŠ‚æ²¡æœ‰å†™è¿›å»ï¼Œä¸è¿‡è¿™äº›çŸ¥è¯†å¯¹äºå‰ç«¯æ¥è¯´å·²ç»è¶³å¤Ÿäº†ï¼Œæœ‰å…´è¶£çš„å°ä¼™ä¼´å¯ä»¥è‡ªè¡Œæ·±ç©¶ã€‚\n", "user_name": "ouyang091X", "description": "codeæ¬è¿å·¥", "got_view_count": 225, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "åç«¯", "concern_user_count": 364361, "user_id": "1380642333405501", "title": "ä¸‰ä¸‡å­—ï¼Œ100å¼ å›¾ï¼Œ1ä¸ªå°æ—¶ï¼Œå¸¦åç«¯çš„åŒå­¦æ•´ä½“äº†è§£ vue å‰ç«¯æ¶æ„", "mark_content": "æœ€è¿‘å†™çš„æ–‡ç« å¾ˆå¤šï¼Œä½†æ˜¯éå¸¸ä¸çˆ±å‘å¸ƒæ–‡ç« äº†ï¼Œç›´åˆ°æˆ‘æœ€è¿‘ç”¨ notion æ­å»ºäº†æˆ‘çš„åšå®¢ï¼Œé‡æ–°æ‰¾å›äº†å†™æ–‡ç« çš„åˆè¡·ï¼Œè¿‘å‡ å¹´ä¸€ç›´åœ¨è‡´åŠ›äºåç«¯ï¼Œè¿™ä¸ªæ•™ç¨‹æ˜¯æˆ‘ä»¥å‰é—²ç€æ²¡äº‹ç ”ç©¶å‰ç«¯æ¶æ„å†™çš„ï¼Œè¿™æ¬¡æ•´ç†åšå®¢å…¨éƒ¨è¿ç§»åˆ° notion ä¸Šå»ï¼Œé¡ºä¾¿æ•´ç†åˆå¹¶ï¼Œæ ¡å¯¹äº†ä¸€ä¸‹ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥é¢„è§ˆä¸€ä¸‹,ä¸“ä¸šçš„å‰ç«¯åŒå­¦å¯ä»¥ä¸ç”¨çœ‹äº†ï¼ŒåŸºäº vue2.0 å®Œæˆè¿™ä¸ªæ•™ç¨‹å·²ç»æ˜¯ä¸¤å¹´å‰äº†ï¼Œå¯¹äºä¸“ä¸šçš„ä½ ä»¬å¯èƒ½æœ‰äº›è¿‡æ—¶\n  \næˆ‘çš„ notion çº¿ä¸Š blog ï¼š https://niubility.me   \n\nè¿ç§»æ˜¯ä¸ªä½“åŠ›æ´»ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦ï¼Œæˆ‘å¯ä»¥å‡ºä¸ªæ•™ç¨‹ï¼Œnotion å¯è§å³å¯å¾—\n\n> è¿™ä¸ªç³»åˆ—æˆ‘å…¨éƒ¨é‡‡ç”¨äº†ç›®å‰æ¯”è¾ƒä¸»æµæŠ€æœ¯æ ˆ\n\n\n## æ•´ä½“å¤§çº²çš„æŠŠæ¡\nè¿™ä¸ªç³»åˆ—æ–‡ç« æˆ‘å°½é‡ç…§é¡¾å‰ç«¯çš„åŒå­¦å’Œåç«¯çš„åŒå­¦ï¼Œä¸ç©¿æ’è®²è¿°ã€‚å°½é‡æŒ‰ç…§å‰ç«¯-åç«¯-éƒ¨ç½²-è¿ç»´æ¥è®²ï¼Œå½“ç„¶ä¸­é€”æ¶‰åŠåˆ°**è·¨åŸŸ**ã€**Rest**ã€**oAuth2.0**è¿™ç§å‰ååè°ƒçš„è¿˜æ˜¯æ— æ³•é¿å…æå¸¦ä¸€ç¬”ã€‚ \n\næ¯”å¦‚:\n\n![](http://www.gitrue.com:9000/image/GA0cLD13AT)\n\n\n  \n  \nè¿™ç§ç›®å½•é˜…è¯»å¯èƒ½å¯¹äºåªæŒæ¡ **å‰ç«¯**/**åç«¯** ä¸€ç§æŠ€æœ¯æ ˆçš„åŒå­¦ï¼Œæˆ–åªæƒ³å»çœ‹**åç«¯**/**å‰ç«¯**/**è¿ç»´** çš„åŒå­¦çœ‹ä¸Šå»éå¸¸çš„éš¾å—ã€æˆ‘ä¼šä¿®æ”¹å¤§çº²é¿å…è¿™ä¸ªé—®é¢˜,å¾ªåºæ¸è¿›çš„æ¥ã€‚\n\n\n## ä½ ä¼šå­¦åˆ°\n- æ·±å…¥äº†è§£å‰ååˆ†ç¦»ï¼Œäº†è§£å¸¸è§æ¶æ„\n\n- å‰ç«¯åç«¯é¡¹ç›®çš„æ­å»ºä¸ä¼˜åŒ–\n\n- å‰ç«¯åç«¯æŠ€æœ¯çš„é€‰å‹\n\n- å¼€å‘è¿‡ç¨‹ä¸­æå‡æ•ˆç‡çš„å°æŠ€å·§\n\n- ä¸åŒåœºæ™¯ä¸‹è·¨åŸŸçš„Nç§è§£å†³åŠæ³•\n\n- å‡ ä¸ªè‰¯å¥½ä¹ æƒ¯æå‡ *debug* çš„èƒ½åŠ›\n\n- å‰ç«¯çš„ *Hybrid* å¼€å‘è‡ªå·±çš„ *APP*\n\n- å‰ç«¯ *SPA* æ¨¡å¼çš„ä¼˜åŒ–\n\n- å­¦ä¼šçˆ¬å–æˆ‘ä»¬æƒ³è¦çš„*èµ„æº*\n\n- åç«¯æ¶æ„å¦‚ä½•å‘å¾®æœåŠ¡è½¬å‹\n\n- å¦‚ä½•ä½¿ç”¨ *docker* éƒ¨ç½²å¾®æœåŠ¡\n\n- å¦‚ä½•ç»´æŠ¤é¡¹ç›®çš„è¿è½¬\n\n \nå¦‚ä½•ä»é›¶æ‰“é€ ä¸€ä¸ªå‰ååˆ†ç¦»çš„äº’è”ç½‘ä¸»æµ *WEB* é¡¹ç›®ã€çœŸå¿ƒå¸Œæœ›æˆ‘èƒ½å¸®åˆ°ä½ ä»¬ã€‚\n\n\n\n\n# Part 2 : çºµè§‚WEBå†å²æ¼”å˜\n\n\n\n \n\n> åœ¨æ ¡å­¦ä¹ å’Œå‡ å¹´å·¥ä½œå·¥ä½œä¸­ä¸çŸ¥ä¸è§‰ç»å†äº†ä¸€åŠçš„ WEB å†å²æ¼”å˜ã€å¯¹è¿‘å‡ å¹´çš„å‘å±•æ¯”è¾ƒäº†è§£ï¼Œç»“åˆç»éªŒèŠèŠ WEB å‘å±•å†å²ã€‚\n\n**æ¼”å˜ä¸æ˜“ï¼Œä½†ä¹Ÿæ˜¯å¿…ç„¶ï¼Œå› ä¸ºä¸ºäººå§‹ç»ˆè¦è¿›æ­¥ã€‚**\n\n## WEB çš„å‘å±•å²\n\n\n\n### ä¸€ã€å¼€å±±é¼»ç¥– - çŸ³å™¨æ—¶ä»£\n\n#### é™æ€ç½‘ç«™\n\n![](http://www.gitrue.com:9000/image/DokGcl5GXc)\n\n\n\nè¿™æ˜¯ *1997* å¹´ Apple å®˜ç½‘ï¼Œé‚£æ—¶çš„ç½‘ç«™ä¸å¦‚å«ç½‘é¡µï¼Œåƒä¸€å¼ æµ®å¤¸çš„å½©è‰²æŠ¥çº¸ï¼Œé‚£æ—¶æ˜¯çº¯ç²¹çš„ *HTML* æ—¶ä»£ï¼Œä¸ç®¡ä½ æ˜¯ä¸æ˜¯è®¿é—®è¿™ä¸ªç½‘é¡µï¼Œæ¯ä¸ªé¡µé¢éƒ½æ˜¯åœ¨æœåŠ¡å™¨ä¸Šå­˜åœ¨çš„ã€‚\n\n#### CGIæŠ€æœ¯\néšåæŠ€æœ¯æ€§å¼ºä¸€ç‚¹çš„ç½‘ç«™å¯èƒ½ä¼šé€šè¿‡ *CGI Perl* è¿è¡Œä¸€å°æ®µä»£ç ä¸æ•°æ®åº“æˆ–æ–‡ä»¶ç³»ç»Ÿè¿›è¡Œäº¤äº’ã€‚æ¯”å¦‚ï¼š\n\n![](http://www.gitrue.com:9000/image/hgDk1lLR8I)\nè¿™æ˜¯*1998* å¹´çš„ Google ï¼Œä¸ºäº†è¾¾åˆ°æœç´¢æ¡ä»¶ï¼Œä¸å¯èƒ½ç”¨å¤§é‡çš„äººåŠ›å»å †ç Œ**é™æ€é¡µé¢**,æ‰€ä»¥ä½¿ç”¨è¿™ç§æ–¹å¼â€œæ›²çº¿æ•‘å›½â€ï¼Œä½†æ˜¯ *CGI* ä¼¸ç¼©æ€§ä¸æ˜¯å¤ªå¥½ï¼šæ¯ä¸ªè¯·æ±‚åˆ†é…ä¸€ä¸ªæ–°çš„è¿›ç¨‹ï¼Œä¸å¤ªå®‰å…¨(ç›´æ¥ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿæˆ–è€…ç¯å¢ƒå˜é‡)ï¼ŒåŒæ—¶ä¹Ÿæ²¡æä¾›ä¸€ç§ç»“æ„åŒ–çš„æ–¹å¼å»æ„é€ åŠ¨æ€åº”ç”¨ç¨‹åºã€‚\n\né™æ€ç½‘ç«™æ˜¯æœ€å—æœç´¢å¼•æ“æ¬¢è¿çš„ç½‘ç«™ï¼Œå› ä¸ºå®ƒç›¸å¯¹å›ºå®šï¼Œæ‰€ä»¥ç½‘ç«™ *SEO* éå¸¸å¥½åšï¼Œæˆ‘çŒœæµ‹è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆç°åœ¨çš„æ–‡æ¡£ç½‘ç«™å¤§éƒ¨åˆ†éƒ½æ˜¯é™æ€ç½‘é¡µçš„åŸå› ä¹‹ä¸€å§ã€‚\n\n>å¾ˆå¯æƒœæˆ‘æ²¡èƒ½äº²çœ¼çœ‹ä¸€çœ‹è¿™æ ·çš„æ—¶ä»£\n\n \n\n### äºŒã€å‰äººç§æ ‘ - æ–‡æ˜æ—¶ä»£\n#### asp å’Œ jsp\n*2005* å¹´å·¦å³ï¼Œå…ˆåå‡ºç°äº† å¾®è½¯çš„ *ASP* å’Œ *Java Server Pages [JSP]* ç­‰æŠ€æœ¯,å–ä»£äº† *CGI* ï¼Œå¢å¼ºäº† *WEB* ä¸æœåŠ¡ç«¯çš„äº¤äº’çš„å®‰å…¨æ€§ã€ç”¨èµ·æ¥ä¹Ÿæ›´åŠ ç®€å•ï¼Œä½†éšç€å„ä¸ªå…¬å¸WEBä¸šåŠ¡çš„å¤æ‚æ€§ï¼Œç¼ºç‚¹ä¹Ÿé€æ¸æš´éœ²å‡ºæ¥ï¼š\n\n**1ã€æŠ€æœ¯å•ä¸€ï¼Œéš¾ä»¥ç»´æŠ¤**\n\n![](http://www.gitrue.com:9000/image/7LvZ2jx4Br)\n\n \nJSPé¡µé¢ç”±HTMLä»£ç å’ŒåµŒå…¥å…¶ä¸­çš„Javaä»£ç æ‰€ç»„æˆ,ç”¨ä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„ *JSP* ä»£ç æ®µä¸¾ä¾‹ï¼š\n\n```jsp\n\n<%@ page language=\"java\" contentType=\"text/html; charset=UTF-8\"\n    pageEncoding=\"UTF-8\"%>\n<%\nString path = request.getContextPath();\nString basePath = request.getScheme()+\"://\"+request.getServerName()+\":\"+request.getServerPort()+path+\"/\";\n%>\n    <%@ page import=\"com.zifangsky.OnlineFriend.model.article.ShowByPage\"%>\n<jsp:useBean id=\"showAllTitle\" type=\"com.zifangsky.OnlineFriend.model.article.ShowByPage\" scope=\"session\"/>\n```\n\n\n\n> JSP = HTML+Java\n\nä¸Šé¢çš„ä»£ç  HTML ä¸­å¤§é‡è€¦åˆäº†JAVAä»£ç ï¼Œé€šè¿‡JSPç¼–è¯‘ä¹‹åå¯ä»¥åœ¨å®¢æˆ·ç«¯å……å½“éƒ¨åˆ†æœåŠ¡ç«¯çš„è§’è‰²ï¼Œè¿™è®©æˆ‘ä»¬éš¾ä»¥ææ¸…æœåŠ¡ç«¯çš„è§’è‰²ï¼Œä»¥åŠå¢åŠ è°ƒè¯•çš„å¤æ‚åº¦ã€‚ä¸šåŠ¡ç¨å¾®å¤æ‚ä¸€ç‚¹ï¼Œè¯•æƒ³ä¸€ä¸‹ï¼šHTMLä¸­æºæ‚äº†å¤ªå¤šjavaä»£ç ï¼Œä¸è®ºæ˜¯å¼€å‘è¿˜æ˜¯ç»´æŠ¤éƒ½æ˜¯ä¸€ä»¶ç—›è‹¦çš„äº‹æƒ…ã€‚\n\n**2ã€ä¸ä¸å¤Ÿçµæ´»**\n JSPä¸Java Servletä¸€æ ·ï¼Œæ˜¯åœ¨æœåŠ¡å™¨ç«¯æ‰§è¡Œçš„ï¼Œé€šå¸¸è¿”å›è¯¥å®¢æˆ·ç«¯çš„å°±æ˜¯ä¸€ä¸ªHTMLæ–‡æœ¬ã€‚æˆ‘ä»¬æ¯æ¬¡çš„è¯·æ±‚ï¼šè·å–çš„æ•°æ®ã€å†…å®¹çš„åŠ è½½ï¼Œéƒ½æ˜¯æœåŠ¡å™¨ä¸ºæˆ‘ä»¬è¿”å›æŸ“å®Œæˆä¹‹åçš„ DOMï¼Œè¿™ä¹Ÿå°±ä½¿å¾—æˆ‘ä»¬å¼€å‘ç½‘ç«™çš„çµæ´»åº¦å¤§æ‰“æŠ˜æ‰£ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒåŒå¹´ï¼šAjaxç«äº†ã€‚\n\n\n\n\n####  AJAX çš„å‡ºç°\nä¸ºä»€ä¹ˆè¯´ *2005* å¹´ ***Ajax*** ç«äº†ï¼Ÿå› ä¸º *Ajax* æŠ€æœ¯å¹¶ä¸æ˜¯ *2005* å¹´å‡ºç°çš„ï¼Œä»–çš„é›å½¢æ˜¯ *1999* å¹´ã€‚\n\n1999å¹´ï¼Œå¾®è½¯å…¬å¸å‘å¸ƒIE5ï¼Œç¬¬ä¸€æ¬¡å¼•å…¥æ–°åŠŸèƒ½ï¼šå…è®¸javascriptè„šæœ¬å‘æœåŠ¡å™¨å‘èµ·HTTPè¯·æ±‚[è¿™ä¹Ÿå°±æ˜¯ä»Šå¤©ä¸‡æ¶çš„ ***ActiveX*** åŸå‹]ã€‚è¿™ä¸ªåŠŸèƒ½å½“æ—¶å¹¶æ²¡æœ‰å¼•èµ·æ³¨æ„ï¼Œç›´åˆ°2004å¹´Gmailå‘å¸ƒå’Œ2005å¹´Google Mapå‘å¸ƒï¼Œæ‰å¼•èµ·å¹¿æ³›é‡è§†\n\n**Googleåšäº†ä»€ä¹ˆäº‹å„¿ï¼Ÿ**\nåœ¨ 2005 å¹´ï¼ŒGoogle é€šè¿‡å…¶ Google Suggest ä½¿ AJAX å˜å¾—æµè¡Œèµ·æ¥ï¼Œä»–å¤§æ¦‚æ˜¯è¿™æ ·çš„äº‹æƒ…ï¼š\n\n![](http://www.gitrue.com:9000/image/uYxdJHLGI5)\n\nç°åœ¨çœ‹æ¥å¾ˆå¸¸è§çš„æŠ€æœ¯æ‰‹æ®µï¼Œå½“æ—¶è¿…é€Ÿç‡ƒçˆ†äº†æŠ€æœ¯åœˆï¼Œä»¥æ­¤æ¥å®ç°ï¼š**å¼‚æ­¥äº¤äº’**\nè¿™æ ·æ—¢èƒ½å¢åŠ ç”¨æˆ·çš„ä½“éªŒï¼Œåˆèƒ½æ›¿ä»£æ‰é¡µé¢éƒ¨åˆ†çš„æœåŠ¡ç«¯ä»£ç ï¼Œä»æ­¤ï¼Œ *AJAX* æˆä¸ºè„šæœ¬å‘èµ· *HTTP* é€šä¿¡çš„ä»£åè¯ï¼Œæ¬¡å¹´ *W3C* ä¹Ÿåœ¨ *2006* å¹´å‘å¸ƒäº† *AJAX* çš„å›½é™…æ ‡å‡†\n\n**æ€»ç»“ï¼š**\n\n\n\n\n![](http://www.gitrue.com:9000/image/5ZqyDfHaZZ)\n\néšåå„ç§ *JSP ASP* çš„æ”¹è‰¯æ¨¡æ¿å¼•æ“ã€å…¨æ–°çš„äº¤äº’æ–¹å¼ä¹Ÿå¦‚é›¨åæ˜¥ç¬‹ä¸€èˆ¬æ¶Œç°ã€‚å¹¶ä¸”ä»¥ *JAVA* ä½œä¸ºæœåŠ¡ç«¯ä¹Ÿå‡ºç°äº†å¦‚ Struts ã€ Springã€Hibernate çš„è€ä¸€ä»£æ¡†æ¶ã€é‡‡ç”¨åç«¯ *MVC* çš„æ–¹å¼è®©æ„å»º *WEB* åº”ç”¨å†ä¸€æ¬¡æ›´åŠ å¥å…¨, *WEB* æœåŠ¡æ­£åœ¨é€æ¸ç”±çŸ³å™¨æ—¶ä»£èµ°å‘æ–‡æ˜æ—¶ä»£ã€‚\n\n\n### ä¸‰ã€åŒ–ç¹ä¸ºç®€ - å·¥ä¸šé©å‘½æ—¶ä»£\næ—¶å…‰å•Šä¸æ–­åœ°é£é€ï¼Œå‰ç«¯åç«¯ä¹Ÿå‡ºç°äº†å‡ ä¸ªæ½®æµã€‚\n\n#### å‰ç«¯å‘å±•\n\n**ç§»åŠ¨ç«¯**\n\næ‰‹æœºå·²ç»å‘å±•å‡ºäº†ä¸€äº›è‹—å¤´ï¼Œç½‘é¡µä¹ŸåŒºåˆ†äº†webå’Œç§»åŠ¨åº”ç”¨ä¸¤ç§æ¨¡å¼ï¼Œä½†ç§»åŠ¨ç«¯é™åˆ¶äºå½“æ—¶æ‰‹æœºè¡Œä¸šçš„æŠ€æœ¯ï¼Œå‘å±•è¾ƒæ…¢ã€‚\n\n**Jqueryçš„å‡ºç°**\n\nå‡ºç°äº†éå¸¸æµè¡Œçš„JavaScriptåº“ï¼šjqueryï¼Œèƒ½å¤Ÿå¿«é€Ÿæ„å»ºåŠ¨æ€ã€ç¾å¦™çš„webåº”ç”¨ï¼Œå®Œç¾çš„å°è£…äº†Ajaxï¼Œè®©å¼€å‘è€…å¼€å‘ç½‘é¡µå˜å¾—ä¼˜é›…ã€‚\n\n**SPAçš„é›å½¢**\n\n![](http://www.gitrue.com:9000/image/bNVlylj3GY)\n\n\néšç€æ–‡æ˜æ—¶ä»£ Ajax æ­£å¼æå‡ºï¼ŒåŠ ä¸Š CDN å¼€å§‹å¤§é‡ç”¨äºé™æ€èµ„æºå­˜å‚¨ï¼Œäºæ˜¯å‡ºç°äº†  *SPA ï¼ˆSingle Page Application å•é¡µé¢åº”ç”¨ï¼‰*ï¼Œ*Backbone EmberJS AngularJS* è¿™æ ·ä¸€æ‰¹å‰ç«¯æ¡†æ¶éšä¹‹å‡ºç°ï¼Œä½†ä»¥å½“æ—¶çš„é…å¥—æŠ€æœ¯æ¥è¯´ï¼Œ*SPA* é“è·¯å¹¶ä¸å¥½èµ°ï¼šä¾‹å¦‚ *SEO* é—®é¢˜ã€*SPA* è¿‡å¤šçš„é¡µé¢ã€å¤æ‚åœºæ™¯ä¸‹ *VIEW* çš„ç»‘å®šç­‰ï¼Œéƒ½æ²¡æœ‰å¾ˆå¥½çš„å¤„ç†ã€‚\n\n\n#### åç«¯å‘å±•\n\nStruts ã€ Springã€Hibernate ç»è¿‡å‡ å¹´çš„å‘å±•ã€SSMè¿™ä¸ªä»Šå¤©è¢«æˆ‘ä»¬è¯´çƒ‚äº†çš„è¯ã€å½“æ—¶å‡ ä¹æˆäº†å½“æ—¶ JAVA æœåŠ¡ç«¯çš„ é¦–è¦é€‰å‹ï¼Œæˆ‘æƒ³è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå¾ˆå¤šå…¬å¸ã€æˆ–å¤–åŒ…å…¬å¸ä¾ç„¶ç»´æŠ¤è¿™æ ·ä¸€å¥—æ¶æ„çš„ä¸»è¦åŸå› ã€‚\n\n**æ€»ç»“**\nè¿™å‡ å¹´çš„é£é€Ÿå‘å±•ï¼Œä¸ºæˆ‘ä»¬èŠ‚çº¦äº†å¤§é‡çš„ç»å†ã€é™ä½äº†å¼€å‘è€…å’Œå¼€å‘è¿‡ç¨‹çš„é—¨æ§›ï¼Œæå¤§æå‡äº†å¼€å‘æ•ˆç‡å’Œè¿­ä»£é€Ÿåº¦ï¼Œæˆ‘ç§°ä¹‹ä¸º**å·¥ä¸šæ—¶ä»£**\n\n\n**ç»å†**\n\nè¯´å‡ºæ¥ä½ å¯èƒ½ä¸ä¿¡ï¼šå¤§ä¸‰å¿«ç»“æŸæ—¶å®ä¹ æ±‚å¾—çš„ç¬¬ä¸€ä»½å·¥ä½œï¼Œä¸€ä¸ªäººæ–­æ–­ç»­ç»­å¼€å‘7ã€8ä¸ªæœˆï¼Œå°±æ˜¯é’»ç ”è¿™äº›è‡ªæŠ€æœ¯æ ˆï¼Œç‹¬ç«‹å¼€å‘å‡ºä¸€æ¬¾webåº”ç”¨ [å¾®å®åˆ›ä¸š](http://www.weibaochuangye.com),æƒ­æ„§çš„è¯´ï¼š\n> é¡¹ç›®æ¶æ„ä»æ–‡æ˜æ—¶ä»£ -> èµ°åˆ°æœ€åçš„å·¥ä¸šæ—¶ä»£ï¼ä¸æ–­çš„é‡æ„ï¼Œä¸æ–­çš„ä¸Šçº¿ ï¼Œæ‹¼å‘½çš„å­¦ä¹ ï¼Œæˆ‘å¾ˆæ„Ÿè°¢å½“æ—¶è€æ¿å¯¹æˆ‘çš„ä¿¡ä»»å’ŒåŒäº‹å¯¹æˆ‘çš„å¸®åŠ©ã€‚\n\n\n### å››ã€ç™¾å®¶äº‰é¸£ - æŠ€æœ¯å¤§çˆ†ç‚¸æ—¶ä»£\næ—¶å…‰å•Šä»–ä¸€åˆ»ä¸åœï¼Œç›´åˆ°ä»Šå¤© -- æŠ€æœ¯åªèƒ½ç”¨çˆ†ç‚¸æ¥å½¢å®¹ã€‚\n\n#### å‰ç«¯çˆ†ç‚¸\n\n![](http://www.gitrue.com:9000/image/2EtbPZzv2m)\n\nå·¥ä¸šæ—¶ä»£æå‡ºçš„ *SPA* æ¨¡å‹éšç€ *NODE* çš„å…´èµ·ã€æœåŠ¡ç«¯ã€å„ç§å·¥å…·ã€å®¹å™¨çš„é£é€Ÿå‘å±•ã€å‰ç«¯ *MVC MVVM* æ¨¡å¼é€æ¸æ¸…æ™°ã€å‰ç«¯æ¶Œç°äº†ç›¸å½“ä¸€æ‰¹ä¼˜ç§€çš„å¼€æºé¡¹ç›®ï¼š\nåŒ…ç®¡ç†ï¼š ***npm yarn*** \næ‰“åŒ…ï¼š***grunt gulp***\næ¨¡å—åŠ è½½ï¼š***RequireJS SeaJs***\næ¡†æ¶ï¼š***VUE Angular React***\nhybrid ï¼š***ionic weex react-native electron***\né¢„å¤„ç†å™¨ï¼š***less sass***\næ•°æ®å¯è§†åŒ–ï¼š***echarts hcharts***\nä»¥åŠæå‡ç”¨æˆ·ä½“éªŒçš„åŠ¨ç”»ï¼Œè®©æˆ‘ä»¬æ›´æœ‰â€œ**é¢å­**â€\n\nç”šè‡³å‰ç«¯ä¹Ÿå¯ä»¥ä½¿ç”¨ **Node** æ¥æ„å»ºè‡ªå·±ç®€å•çš„æœåŠ¡ç«¯ã€æ­£åœ¨é€æ¸æ‘†è„±â€œ**å®¢æˆ·ç«¯å¼€å‘è€…**â€çš„è§’è‰²\n\n#### åç«¯çˆ†ç‚¸\n \n ![](http://www.gitrue.com:9000/image/uPnNgkiTLk)\n\n\n**go** \n\næ›´é€‚åˆé¢å‘æœåŠ¡å™¨ç¼–ç¨‹ï¼Œä»¥å‰ä½ å¦‚æœä½¿ç”¨Cæˆ–è€…C++åšçš„é‚£äº›äº‹æƒ…ï¼Œç”¨Goæ¥åšå¾ˆåˆé€‚ï¼Œä¾‹å¦‚ã€è™šæ‹Ÿæœºå¤„ç†ã€æ–‡ä»¶ç³»ç»Ÿç­‰ï¼Œå¼ºå¦‚ docker Kubernetesï¼ˆk8sï¼‰éƒ½æ˜¯ GO å†™çš„\n\n**python**\n\nåƒä¸€é—¨ç”Ÿç‰©è¯­è¨€ï¼Œç›®å‰çœ‹æ¥æ›´å®¹æ˜“å¤„ç†ç®—æ³•ã€äººå·¥æ™ºèƒ½ã€ç½‘ç»œçˆ¬è™«ã€è¿ç»´æ–¹å‘\n\n**java**\n\nä¸€æ¬¾20å¤šå¹´çš„è¯­è¨€ï¼Œä¸æ–­çš„å˜å¼ºã€‚æ¶Œç°äº†å¾ˆå¤šé«˜è´¨é‡çš„åº“ï¼Œå‡ ä¸ªæœ‰ä»£è¡¨æ€§çš„ï¼š\n\n*netty rebbitmq*ï¼šè½»æ¾å®ç°æ¶ˆæ¯é˜Ÿåˆ—\n*elasticSearch*ï¼š è½»æ¾å®ç°æœç´¢å¼•æ“\n*spring-boot*ï¼š   é¢å‘é…ç½®ï¼Œæ›´åŠ è½»æ¾çš„æ„å»ºwebæœåŠ¡ç«¯\n*spring-cloudã€dubbo*ï¼š  è½»æ¾æ„å»ºå¾®æœåŠ¡\n\nä»¥åŠå³å°†è¿æ¥çš„  [**å¼ºæ‚çš„JAVA11**](https://zhuanlan.zhihu.com/p/38348775) \n\n> è¿˜æœ‰ æŒç»­é›†æˆ äº‘æœåŠ¡ devops ç­‰è¿ç»´ç›¸å…³\n\n**æ€»ç»“**\n\n*go* å’Œ *python* çš„å‡ºç°è®©æˆ‘ä»¬æœåŠ¡ç«¯å¼€å‘è€…èƒ½åšæ›´å¤šçš„äº‹æƒ…ï¼Œæ¯”å¦‚è‡ªåŠ¨åŒ–è¿ç»´ã€å†™ä¸­é—´ä»¶ã€‚é€æ¸åå‘å…¨æ ˆæ–¹å‘å‘å±•ã€‚è€Œ JAVA 20å¤šå¹´æ¥çš„ç”Ÿæ€åœˆå­å‘å±•ï¼Œèƒ½å¸®åŠ©æˆ‘ä»¬å†™å‡ºæ›´å¥å£®çš„æœåŠ¡ã€‚ä»¥åŠç‹ ç‹ å‘æˆ‘ä»¬ç ¸æ¥çš„ï¼šäººå·¥æ™ºèƒ½ã€devopsã€äº‘æœåŠ¡ç­‰æŠ€æœ¯ï¼Œä»¤æˆ‘ä»¬çœ¼èŠ±ç¼­ä¹±ï¼Œ**å¼€æº**æˆä¸ºäº†ä¸€ç§æ½®æµï¼ŒæŠ€æœ¯åˆ†äº«æˆäº†æ¯ä¸ªäººéƒ½æƒ³åšçš„äº‹æƒ…ï¼Œæˆ‘ç§°ä¹‹ä¸ºï¼š**æŠ€æœ¯çˆ†ç‚¸çš„æ—¶ä»£**\n\n**ç»å†**\n\næˆ‘è¿‘ä¸¤å¹´å¾ˆçƒ¦æ¼ï¼šå¦‚ä½•æ‰èƒ½è®©å‰åç«¯æ›´åŠ ä¼˜é›…çš„é€šä¿¡ï¼Ÿ\n\næ›¾ç»ä½¿ç”¨å¤šç§åç«¯æ¨¡æ¿å¼•æ“ç›´åˆ°å®Œå…¨æ‘’å¼ƒï¼Œååˆ° node åšä»£ç†ã€æ¸²æŸ“ + grunt è¿›è¡Œæ•°å¤„ç†ï¼Œä¹‹åé€æ¸ä½¿ç”¨\n> vue + webpack ------>  Rest API \n\nè¿™æ ·å¦‚æœä¸å¾—ä¸ç”¨ NODE ä¹Ÿåªä¼šæˆä¸º Rest ä¸­çš„ä¸€å‘˜è€Œä¸ç”¨ç»è¿‡ NODE åšç¹ççš„é€šä¿¡äº†ã€‚è¿™ç§å‰ååˆ†ç¦»çš„æ–¹å¼è¾¾åˆ°äº†æ»¡æ„çš„æ•ˆæœï¼Œå‰ç«¯ä¸å¿…å†ç®¡åç«¯çš„äº‹æƒ…ï¼Œåç«¯ï¼Ÿå†™å¥½è‡ªå·±çš„æœåŠ¡å°±å¥½äº†ã€‚\n\n\n# Part 3 èŠèŠå‰ååˆ†ç¦»æ¶æ„\n\n\n\nå‰ååˆ†ç¦»ï¼Œä¸€ç›´æ˜¯ä¸€ä¸ªç›¸å½“æ³›æ³›çš„é—®é¢˜ï¼Œå‰ååˆ†ç¦»åˆ°åº•å¥½ä¸å¥½ï¼Ÿæ²¡æœ‰ç»å¯¹çš„å¯¹ï¼Œæ²¡æœ‰ç»å¯¹çš„é”™ï¼Œä¸šç•Œå°±è¿™ä¸ªé—®é¢˜å·²ç»æ¿€çƒˆçš„æ¢è®¨å‡ å¹´äº†.å‡ºç°è®¨è®ºçš„ç‚¹åœ¨äºï¼šåˆ†ç¦»å½“ç„¶æ˜¯å¥½çš„,ä½†æ˜¯ä»¥ä»€ä¹ˆæ ·çš„æœåŠ¡éœ€è¦è¿›è¡Œå‰åæ‹†åˆ†ï¼Ÿæ‹†åˆ†åˆ°ä»€ä¹ˆç²’åº¦ï¼Ÿå‰åç«¯å¦‚ä½•é…åˆï¼Ÿ\n![](http://www.gitrue.com:9000/image/HMGlXxJJIO)\n\n\n> æˆªå›¾æ—¶é—´: 2018-08-30 - Github\n\næˆ‘ä»¬éšæ„åœ¨ *Github* è¾“å…¥**å‰ååˆ†ç¦»**å…³é”®å­—ï¼Œçœ‹ä¸‹æœç´¢çš„ç»“æœ: *1K* çš„åº“ *11k* çš„ *Issues* è¶³ä»¥è¯´æ˜å‰ååˆ†ç¦»çš„è¶‹åŠ¿ï¼Œå¯ä»¥æƒ³è±¡æ¿€çƒˆç¨‹åº¦ï¼Œä¸šç•Œæ¯”è¾ƒæœ‰åçš„è®¨è®ºï¼š[Web å‰åç«¯åˆ†ç¦»çš„æ„ä¹‰å¤§å—ï¼Ÿ](https://www.zhihu.com/question/28207685)ï¼Œå€¼å¾—ä¸€æçš„æ˜¯ï¼šå‰æ’å¯¹äºè¿™ä¸ªé—®é¢˜è®¨è®ºæ¯”è¾ƒæ·±åˆ»çš„å¤§éƒ¨åˆ†éƒ½æ˜¯**å…¨æ ˆå·¥ç¨‹å¸ˆ**ã€‚å› ä¸ºå…¨æ ˆå¯¹å…¨å±€çš„äº†è§£ç›¸å¯¹æ¯”å•çº¯åšå‰ç«¯ã€åç«¯å…¨å±€è§‚å¿µæ›´å¼ºä¸€äº›ï¼Œè€ƒè™‘çš„é—®é¢˜æ›´å¤šä¸€äº›ã€‚\n\n## ç­›ç®€å†å¼•å‘çš„æ€è€ƒå’Œåˆ†æ\n![](http://www.gitrue.com:9000/image/vSQR2NOePr)\n---\n![](http://www.gitrue.com:9000/image/qmIFPTGY2G)\n---\n![](http://www.gitrue.com:9000/image/Uudz7xRt7C)\n---\n### åç«¯èŒä½çš„æ€ªåœˆ\n\nåœ¨å…¬å¸çš„ç®€å†åº“éšæ‰‹æˆªå‡ ä¸ªå±€éƒ¨çš„å›¾ï¼Œè¿‘ä¸¤å¹´é¢è¯•è¿‡å¾ˆå¤šçš„ *1-3* å¹´ *java* å¼€å‘è€…ï¼Œåœ¨ç­›é€‰ç®€å†å’Œé¢è¯•è¿‡ç¨‹ä¸­ï¼Œä¹Ÿå‘ç°äº†å‡ ä¸ªé—®é¢˜ï¼š**ç›¸å½“å¤šä¸€éƒ¨åˆ†** *javaer* æŠ€æœ¯æ ˆä¸Šæ€»æ˜¯å¤šäº†é‚£ä¹ˆä¸ª *HTML* *ajax* *jquery* *bootstrap* *easyUi* ï¼Œçœ‹èµ·æ¥å¾ˆå”çªï¼Œå¦‚æœé¢è¯•æåˆ°äº†å‰ç«¯æŠ€æœ¯æ ˆï¼ŒåŸºæœ¬æ²¡æœ‰èƒ½ç­”çš„å¾ˆå¥½çš„ï¼Œç”šè‡³æœ‰çš„äººè¿ **åŸå‹é“¾** éƒ½ä¸çŸ¥é“ã€‚**è¿™ä¹Ÿæ˜¯å¤§éƒ¨åˆ†äººå¯¹å…¨æ ˆçš„è¯¯è§£**ï¼Œå…¶å®æˆ‘æ˜¯ä¸å¤ªæ„Ÿå†’è¿™æ ·çš„ç®€å†çš„ï¼Œå› ä¸ºæ²¡æœ‰ä»€ä¹ˆäº®ç‚¹ï¼ŒæŠ€æœ¯æ ˆä¸æ˜¯å†™çš„è¶Šå¤šè¶Šå¥½ï¼Œæ€»ç»“èµ·æ¥ï¼šä»–ä»¬å¯¹å‰ç«¯çš„æŒæ¡å¾ˆåŸºç¡€ï¼Œå‹‰å¼ºèƒ½èƒœä»»ä¸€äº›ä¸šåŠ¡ä¸Šçš„å·¥ä½œã€‚é‚£ä¸ºä»€ä¹ˆè¿™ä¹ˆå¤šäººéƒ½æŒæ¡ä¸€äº›å‰ç«¯æŠ€æœ¯å‘¢ï¼Ÿæˆ‘åˆ†æå¯èƒ½æœ‰ä¸‰ç‚¹ï¼š\n\n### æ€è€ƒåŸå› ï¼š\n\n- åŸ¹è®­æœºæ„çš„å…´èµ·ï¼Œæœºæ¢°åŒ–çš„æ•™å­¦\n\n- æ±‚èŒè€…è‡ªèº«çš„å…´è¶£\n\n- ä¸€äº›å…¬å¸çš„æŠ€æœ¯æ ˆä¸å…¨ï¼Œå¯¹æŠ€æœ¯æ²¡æœ‰è¿½æ±‚ï¼Œå¤§éƒ¨åˆ†ç”¨çš„å‡ å¹´å‰çš„æ¶æ„ï¼Œå‰åä¸šåŠ¡è€¦åˆå¾ˆå¤§ï¼Œå¸‚åœºç¼ºå£å¤§\n\n### åˆ†æ\nå› ä¸ºæˆ‘ä¹Ÿç»´æŠ¤è¿‡å‡ ä¸ªæœˆçš„æ•æ„Ÿé¡¹ç›®ï¼Œæ·±æœ‰ä½“ä¼šï¼Œåªå†™æœåŠ¡ç«¯çš„äººæ˜¯æ— æ³•èƒœä»»è¿™é¡¹å·¥ä½œçš„ï¼Œ \nå¦‚æœå¤šæ•°çš„ å¼€å‘è€… è¿™æ ·çš„ç®€å†ï¼Œå¯ä»¥æ¨æµ‹ï¼šç°åœ¨çš„ **IT** è¡Œä¸šä¸­å‰åç«¯ç³…æ‚ä¸€èµ·çš„æ¶æ„è¿˜æ˜¯å­˜åœ¨ã€å¹¶ä¸”æœ‰ä¸€ä¸ªé‡çº§ï¼Œè¿™å¯¼è‡´ä»–ä»¬**ä¸å¾—ä¸**å¯»æ‰¾ä¸€äº›æ‡‚å¾—ä¸€ç‚¹å‰ç«¯æŠ€æœ¯çš„äººæ¥å¼€å‘é¡¹ç›®ï¼Œå‡å°‘æ²Ÿé€šçš„æˆæœ¬ï¼ŒåŠ å¿«é¡¹ç›®çš„è¿›åº¦ï¼Œè¿™ä¹Ÿå°±å‚¬ç”Ÿäº†å¾ˆå¤šæ‰€è°“çš„ *web* å¼€å‘åŸ¹è®­æœºæ„ã€‚\n> ä½ é—®æˆ‘å½“å¹´ç»´æŠ¤çš„å¼€å¿ƒå—ï¼Ÿä¸€ä¼šå‘Šè¯‰ä½ ã€‚\n\n## ä»€ä¹ˆæ˜¯å‰ååˆ†ç¦»\n\nå‰åç«¯åˆ†ç¦»å¹¶ä¸æ˜¯ä»€ä¹ˆæ–°é²œäº‹ï¼Œåˆ°å¤„éƒ½æ˜¯å‰åç«¯åˆ†ç¦»çš„å®è·µã€‚ç„¶è€Œä¸€äº›å†å²é¡¹ç›®åœ¨ä»ä¸€ä½“åŒ– Web è®¾è®¡è½¬å‘å‰åç«¯åˆ†ç¦»çš„æ¶æ„æ—¶ï¼Œä¸å¯é¿å…çš„ä¼šé‡åˆ°å„ç§å„æ ·çš„é—®é¢˜ã€‚ç”±äºå±‚å‡ºä¸ç©·çš„é—®é¢˜ï¼Œç”šè‡³ä¼šæœ‰å›¢é˜Ÿè´¨ç–‘ï¼Œä¸€ä½“åŒ–å¥½å¥½çš„ï¼Œä¸ºä»€ä¹ˆè¦æå‰åç«¯åˆ†ç¦»ï¼Ÿè¯´åˆ°åº•ï¼Œè¿˜æ˜¯æŠ€æœ¯å’Œæ€ç»´æ–¹å¼æ²¡è½¬å˜è¿‡æ¥ã€‚\n\nä¸€ä½“åŒ–æ¨¡å¼å…¶å®åœ¨ä¸Šä¸€å¼€ç¯‡ï¼š[çºµè§‚å†å²æ¼”å˜](https://github.com/pkwenda/blog/issues/10) ä¸­å·²ç»æåˆ°è¿‡äº†ï¼Œä¸åœ¨èµ˜è¿°ã€‚\n\nå‰ååˆ†ç¦»çœ‹èµ·æ¥åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š\n\n![](http://www.gitrue.com:9000/image/1E5EdYLBJH)\n\n\nå‰ååˆ†ç¦»å°±æ˜¯åœ¨**æ¶æ„å±‚æ¬¡**ä¸Š æ„å»ºé¡¹ç›®æˆ–å¯¹ç°æœ‰çš„é¡¹ç›® **å®¢æˆ·ç«¯** **æœåŠ¡ç«¯** åˆ†ç¦»å¼€ï¼Œå‡å°‘å‰åç«¯ä»£ç çš„è€¦åˆåº¦ï¼Œå¤§å®¶ä¸€è‡´è®¤åŒçš„å‰åç«¯åˆ†ç¦»çš„ä¾‹å­å°±æ˜¯***SPA(Single-page application)*** ï¼Œæ‰€æœ‰ç”¨åˆ°çš„å±•ç°æ•°æ®éƒ½æ˜¯åç«¯é€šè¿‡ **JSON** ä½†ä¸ä»…é™äº ***JSON*** çš„æ–¹å¼æä¾›çš„ï¼Œå‰ç«¯åªç®¡å±•ç°,æä¾›æ›´å¥½æ›´ç»šçš„äº¤äº’ï¼Œåç«¯åªç®¡æä¾›æ›´å¥å£®çš„é«˜å¯ç”¨æœåŠ¡ã€‚\n\n\n\nåƒä¸‡ä¸è¦æœ‰å…ˆå†™é¡¹ç›®ï¼Œå†™å®Œå†é‡æ„çš„æƒ³æ³•ï¼Œé¡¹ç›®åˆæœŸèƒ½ä¸€æ­¥åˆ°ä½æœ€å¥½ï¼Œä½•å¿…å†å»é‡æ„ï¼Œç„¶åä¸å¾—å·²æŠ›å¼ƒä¸€äº›å·²ç»å†™å®Œçš„ç»„ä»¶ã€åº“æµªè´¹äººåŠ›å‘¢ï¼Ÿ\n\n\n\n## å‰ååˆ†ç¦»è§£å†³äº†ä»€ä¹ˆé—®é¢˜\n### æ¯ä¸ªäººå„å°½å…¶èŒ\nå¥½çš„å¼€å‘è€…æ˜¯å¯ä¸ä¸å¯æ±‚çš„ï¼Œè‹¥å¯»æ‰¾ä¸€ä¸ª **ä¼˜ç§€çš„** *full_stack* æ›´æ˜¯éš¾ï¼Œä»æ ¡æ‹›è¿›è¡ŒåŸ¹å…»ä¹Ÿä¸å¤ªå®é™…ï¼Œæ‹›ä¸€ä¸ªèƒ½åŠ›ä¸€èˆ¬çš„ç¨‹åºå‘˜ï¼ŒæŠ€æœ¯é©±åŠ¨æ€§æ¯”è¾ƒå·®ï¼Œç”šè‡³æ‹–æ…¢äº§å“è¿­ä»£ã€‚åˆ†ç¦»å¼€æ¥æˆ‘ä»¬å°±å¯ä»¥ä¸“æ³¨äº **å‰ç«¯**ã€ **æœåŠ¡ç«¯** é¢†åŸŸå»å¯»æ‰¾ä¸“ä¸šçš„äººæ‰ã€‚\n\n### è§£è€¦\n\nå‰ç«¯åç«¯ä»£ç å¤§é‡è€¦åˆä»£ç çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š\n\n![](http://www.gitrue.com:9000/image/Nk3N9JrHVg)\n\nçœ‹çœ‹ç®€å•ä¾‹å­å§ï¼š\n\n```js\n//(nodeç«¯å¤„ç†)\nif (is_weixin()) {\ninit([\n'api',\n'image',\n'xxx',\n'...',\n], function () {\n<%- doSomeGloble %>\n});\n} else {\n\n}\n//æ¥æ”¶nodeç«¯ä¸€äº›æ•°æ®\nlet blogs = <%- blogs %>;\n\nlet users = <%- users %>;\n                     \n```\n\nè¿™è¿˜ä¸æ˜¯ ***JAVA*** æ¨¡æ¿ è€Œæ˜¯ç›¸å¯¹è½»é‡ã€ä¼˜é›…çš„ *NODE* çš„ *EJS* æ¸²æŸ“çš„ï¼Œè¿™è¿˜å¥½ï¼Œæˆ‘è§è¿‡æ›´ä»¤äººéš¾å—çš„ä»£ç ï¼Œç»å¸¸ä¸ºäº†ä¸€ä¸ªé—®é¢˜è¦å›å¤´çœ‹ N å¤šä»£ç ï¼Œè¿™é‡Œå°±ä¸å†™äº†ã€‚\n\né‚£ä¹ˆå‰ååˆ†ç¦»å¦‚ä½•è®©å®ƒä»¬è§£è€¦å˜å¾—æ›´æ¸…æ™°ï¼Ÿåé¢ä¼šç»“åˆæœåŠ¡ç«¯ç»Ÿä¸€è¡¥å……ã€‚\n\n## ä»€ä¹ˆé¡¹ç›®ä¸é€‚åˆå‰ååˆ†ç¦»\n\n### blogã€æ–‡æ¡£\nä½ è¯´ä½ æ­å»ºä¸€ä¸ª*åšå®¢ã€ API æ–‡æ¡£ç³»ç»Ÿ* è¿™ç§å°é¡¹ç›®ï¼Œä¸€ä¸ªäººå°±å¯ä»¥å¼€å‘ã€‚æäº†ä¸€ä¸ªå‰ååˆ†ç¦»ï¼Œéœ€è¦åˆ†ç¦»éƒ¨ç½²ã€‚åˆå¢åŠ äº† **SEO** çš„å¤æ‚åº¦ï¼Œå¢åŠ äº†å¼€å‘çš„å‘¨æœŸã€å¢åŠ äº†ç”¨æˆ·éƒ¨ç½²çš„éš¾åº¦ï¼Œä½•å¿…å‘¢ï¼Ÿå½“ç„¶ï¼Œå¦‚æœåªæ˜¯æŠ€æœ¯å®è·µçš„ä¸€ç§å­¦ä¹ æ–¹å¼ï¼Œè¿˜æ˜¯æ¬¢è¿çš„ã€‚\n\n\n## å‰ååˆ†ç¦»å¸¦æ¥çš„é—®é¢˜ï¼Œå¦‚ä½•è§£å†³ï¼Ÿ\n\n### æ²Ÿé€šæˆæœ¬é—®é¢˜\n\n> å‰ç«¯å¦¹å­ï¼šå“¥ï¼Œè·å–å…¨éƒ¨åšå®¢è°ƒå“ªä¸ªæ¥å£ï¼Ÿ\n\n> å“¦ï¼Œæ˜¨å¤©ä¸æ˜¯å‘ä½ æ–‡ä»¶äº†å—\n\n> å‰ç«¯å¦¹å­ï¼šæˆ‘æ‰¾ä¸åˆ°äº†ğŸ˜­\n\n> å“¦ï¼Œç­‰ä¸‹åƒæ™šé¥­å‘ä½ å•Š\n\n---\n> å‰ç«¯å¦¹å­ï¼šå“¥ï¼Œäº§å“æå‡ºæ ¹æ®æ‰‹æœºå£³è‡ªåŠ¨æ¢ä¸»é¢˜çš„éœ€æ±‚ï¼Œä½ æœ‰æ¥å£å—ï¼Ÿ\n\n> ... æˆ‘çœ‹çœ‹...åº”è¯¥...æ²¡æœ‰ï¼å¯èƒ½éœ€è¦ Python çš„è€å“¥æ”¯æŒï¼ä½ å»æ‰¾ä»–è¦å§\n\n---\n> å‰ç«¯å¦¹å­ï¼šå“¥ï¼Œä½ æ ¹æ® TAG è·å–åšå®¢çš„æ¥å£å†™å®Œäº†æ²¡ï¼Ÿæ¥å£æ˜¯å•¥ï¼Ÿæˆ‘å¥½æ¸²æŸ“æ•°æ®å•Š\n\n> æ²¡ç­‰ç­‰......\n\n---\n\n\nè¿™æ˜¾ç„¶æ˜¯ä¸è§„èŒƒçš„ï¼Œæˆ‘ä»¬æœŸæœ›çš„æ˜¯å‰ç«¯åç«¯å…ˆçº¦å®šä¸€ä¸ªæ¥å£åè®®ï¼Œåç«¯æ²¡å®Œæˆæ—¶ï¼Œå‰ç«¯è‡ªå·± *mock* æµ‹è¯•æ•°æ®ï¼Œå‰ç«¯æ‰¾ä¸åˆ°æ¥å£çš„æ—¶å€™ï¼Œç›´æ¥æŸ¥çœ‹ *API* ï¼Œæ ¹æ®è¿™ä¸ªæ¥å£åè®®æˆ‘ä»¬å‰åç«¯ç»Ÿä¸€ç¼–ç¨‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•å¤„ç†å‘¢ï¼Ÿ\n\n\n\n**å¦‚ä½•é™ä½æ²Ÿé€šæˆæœ¬ï¼Ÿ**\n åç«¯æ•°æ®æœåŠ¡åŒ–ï¼Œèµ°ç»Ÿä¸€çš„ **REST** æ¥å£è§„èŒƒè¾“å‡ºï¼Œé™ä½å‰åç«¯æ¥å£å®šä¹‰çš„æ²Ÿé€šæˆæœ¬ã€‚é¿å…â€œå£å¤´è¯´æ˜â€çš„æ–¹å¼ã€‚\n \n **ä»€ä¹ˆæ˜¯ RESTful API ï¼Ÿ**\n   æ‰€ä»¥RESTful APIå°±æ˜¯RESTé£æ ¼çš„APIã€‚ é‚£ä¹ˆåœ¨ä»€ä¹ˆåœºæ™¯ä¸‹ä½¿ç”¨RESTful APIå‘¢ï¼Ÿåœ¨å½“ä»Šçš„äº’è”ç½‘åº”ç”¨çš„å‰ç«¯å±•ç¤ºåª’ä»‹å¾ˆä¸°å¯Œã€‚æœ‰æ‰‹æœºã€æœ‰å¹³æ¿ç”µè„‘è¿˜æœ‰PCä»¥åŠå…¶ä»–çš„å±•ç¤ºåª’ä»‹ã€‚é‚£ä¹ˆè¿™äº›å‰ç«¯æ¥æ”¶åˆ°çš„ç”¨æˆ·è¯·æ±‚ç»Ÿä¸€ç”±ä¸€ä¸ªåå°æ¥å¤„ç†å¹¶è¿”å›ç»™ä¸åŒçš„å‰ç«¯è‚¯å®šæ˜¯æœ€ç§‘å­¦å’Œæœ€ç»æµçš„æ–¹å¼ï¼ŒRESTful APIå°±æ˜¯ä¸€å¥—åè®®æ¥è§„èŒƒå¤šç§å½¢å¼çš„å‰ç«¯å’ŒåŒä¸€ä¸ªåå°çš„äº¤äº’æ–¹å¼ã€‚\n\n![](http://www.gitrue.com:9000/image/IwZGhdI8Jl)\n\n> æˆ‘é€šå¸¸ç”¨ *swagger* + *mock* å¹³å°ç”Ÿæˆæ ‡å‡†çš„ *RESTful API*ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒæ‰©å±•å¤šä¸ªç¼–ç¨‹è¯­è¨€ä¾‹å¦‚ï¼š*Go Python*\n\n\n### *SEO* é—®é¢˜\nä»¥ *vue* + *webpack* çš„ *SPA* ä¸ºä¾‹ï¼Œæ²¡æœ‰äº†åç«¯æ¨¡æ¿è¿”å›çš„ *HTML*ï¼Œå‰ç«¯æ¸²æŸ“å¹¶ä¸è¢«æœç´¢å¼•æ“çš„çˆ¬è™«æ¥çº³ã€‚åœ¨æ—¥åå®æˆ˜ *SEO* ä¹‹å‰å…ˆé€šä¿—æ¸²æŸ“å‘—çˆ¬è™«è¯†åˆ«çš„åŒºåˆ«ï¼š\n\n> seo æœ¬è´¨æ˜¯ä¸€ä¸ªæœåŠ¡å™¨å‘å¦ä¸€ä¸ªæœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œè§£æè¯·æ±‚å†…å®¹ã€‚ä½†ä¸€èˆ¬æ¥è¯´æœç´¢å¼•æ“æ˜¯ä¸å›å»æ‰§è¡Œè¯·æ±‚åˆ°çš„ js çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä¸€ä¸ªå•é¡µåº”ç”¨ï¼Œhtml åœ¨æœåŠ¡å™¨ç«¯è¿˜æ²¡æœ‰æ¸²æŸ“éƒ¨åˆ†æ•°æ®æ•°æ®ï¼Œåœ¨æµè§ˆå™¨æ‰æ¸²æŸ“å‡ºæ•°æ®ï¼Œè€Œæœç´¢å¼•æ“è¯·æ±‚åˆ°çš„ html æ˜¯æ²¡æœ‰æ¸²æŸ“æ•°æ®çš„ã€‚ è¿™æ ·å°±å¾ˆä¸åˆ©äºå†…å®¹è¢«æœç´¢å¼•æ“æœç´¢åˆ°ã€‚ æ‰€ä»¥æœåŠ¡ç«¯æ¸²æŸ“å°±æ˜¯å°½é‡åœ¨æœåŠ¡å™¨å‘é€åˆ°æµè§ˆå™¨å‰ é¡µé¢ä¸Šå°±æ˜¯æœ‰æ•°æ®çš„ã€‚\n\nä»¥åšå®¢ä¸ºä¾‹ç®€å•èŠèŠ:\n\n-  é™æ€æœåŠ¡\n\n```html\n<div>æˆ‘æ˜¯æ­£æ–‡1</div>\n<div>æˆ‘æ˜¯æ­£æ–‡2</div>\n<div>æˆ‘æ˜¯æ­£æ–‡3</div>\n```\nçˆ¬è™«ç›´æ¥æŠ“åˆ° *html*   è§£æ - ç”Ÿæˆç´¢å¼•\n\n- ä¼ ç»Ÿåç«¯æ¸²æŸ“\n\n```\n @RequestMapping(\"/index\") \n    public String index(HttpServletRequest request,HttpServletResponse   response){ \n        return \"welcome\"; \n    } \n```\n\nè¿™é‡Œå°±æ¯”è¾ƒæœ‰æ„æ€äº†ï¼Œæ¯”å¦‚æˆ‘ä»¬æ‰“å¼€çš„ç½‘å€æ˜¯:\n\n`http://host:port/index`\nå®é™…å……å½“ Controller çš„æ˜¯ æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯ç›´æ¥è¿”å›æ¸²æŸ“å¥½çš„ç½‘é¡µç»™ä½ ï¼Œçˆ¬è™«æ‹¿åˆ°çš„ä¹Ÿæ˜¯ä¸€æ ·ï¼Œæ‰€ä»¥ *SEO* æ²¡å•¥å¤ªå¤§çš„é—®é¢˜ã€‚\n\n- å‰ååˆ†ç¦» *SPA*\n\n```js\nlet blogs = [];\n\nthis.axios.get('/index, {})\n                .then(res => {\n                 blogs = res.data;    \n                })\n                .catch(err => {\n                    console.error(err);\n                });\n                \n             <!--å‰ç«¯æ¨¡æ¿æ¸²æŸ“dom-->   \n <div  v-for=\"(item, index) in blogs\" :key=\"item\">               \n```\n\nåŒæ ·æˆ‘ä»¬è¾“å…¥\n`http://host:port/index`\n> æ³¨æ„ï¼šSPA é€šå¸¸æœ‰è‡ªå·±çš„è·¯ç”±ç­–ç•¥ï¼Œè¿™ä¹Ÿå°±æ˜¯å‰ç«¯ *MVC* *MVVM* ä¸­çš„ ç¬¬ä¸€ä¸ª **M**\n\n![](http://www.gitrue.com:9000/image/LNpy9Htu0T)\n \n> ä¸€ä¸ªå…¸å‹çš„ SPA ç«™ç‚¹\n\næˆ‘ä»¬è¾“å…¥ç½‘å€å…ˆåˆ°äº†è¿™ä¸ªé¡µé¢ï¼Œç„¶åå†å»å¼‚æ­¥è¯·æ±‚æœåŠ¡å™¨ï¼Œå†ç”±å‰ç«¯é¡µé¢æ¸²æŸ“ï¼Œåˆæ˜¯**å•é¡µé¢æœåŠ¡**å¦‚æœæˆ‘ä»¬ä¸åšä»»ä½•å¤„ç†ï¼Œé‚£ä¹ˆä½ å°†è¢«å„å¤§æœç´¢å¼•æ“æŠ›å¼ƒã€‚\n\n**å¦‚ä½•è§£å†³ï¼Ÿ**\n\n> åªè¦åš SEO çš„äº§å“å°±è¦åšæœåŠ¡ç«¯æ¸²æŸ“,å¦‚æœä½ å¯¹ SEO éœ€æ±‚æœ‰ï¼Œä½†è¦æ±‚å¹¶ä¸é«˜ï¼Œä»…éƒ¨åˆ†é¡µé¢ã€å¯ä»¥æ›²çº¿æ•‘å›½\n\n*nodejs* å‡ºç°ä¹‹å‰æœ‰ä¸¤ç§è§£å†³æ–¹å¼ï¼Œä¸€æ˜¯åšä¸€åŠ¨ä¸€é™ä¸¤å¥—é¡µé¢ï¼ŒæœåŠ¡å™¨åˆ¤æ–­è¯·æ±‚æ¥è‡ªèœ˜è››å°±å‘ˆç°é™æ€é¡µï¼Œå¦åˆ™å‘ˆç°åŠ¨æ€é¡µï¼›äºŒæ˜¯æœåŠ¡å™¨æ¶è®¾è™šæ‹Ÿæµè§ˆå™¨è½¯ä»¶ï¼Œè¯·æ±‚è¿‡æ¥äº†å…ˆè®©è™šæ‹Ÿæµè§ˆå™¨è·‘ä¸€éï¼Œå†å°†å¾—åˆ°çš„é™æ€é¡µé¢è¿”å›ç»™å®¢æˆ·ç«¯ã€‚è¿™ä¸¤ç§æ–¹å¼åœ¨å¤§å‹é¡¹ç›®ä¸Šéƒ½æœ‰æ€§èƒ½é—®é¢˜ã€‚\n\næœ‰äº† *nodejs* åä¸»æµåšæ³•æ˜¯å‰åç«¯åŒæ„æ–¹æ¡ˆï¼Œå³ä¸€å¥—ä»£ç åœ¨æµè§ˆå™¨ç«¯å’Œ *node* ç«¯éƒ½å¯ä»¥è¿è¡Œï¼Œä»è€Œå¯ä»¥å…ˆåœ¨ *node* ç«¯è¯·æ±‚æ•°æ®æ¸²æŸ“æ¨¡æ¿ï¼Œç„¶åå°†æ¸²æŸ“ç»“æœè¿”å›ç»™æµè§ˆå™¨æœ€ç»ˆå‘ˆç°ã€‚æ„Ÿå…´è¶£å¯ä»¥çœ‹çœ‹ \n[*Vue* çš„SSRæ–¹æ¡ˆ](https://ssr.vuejs.org/zh)\n[*Angular* çš„SSRæ–¹æ¡ˆ](https://www.angular.cn/guide/universal)\n\n\nå¦‚ä½•æ›´ç»†è‡´çš„ç ”ç©¶ **SEO** ä»¥åå†è¯´\n\n### è·¨åŸŸ\nç”±äºé‡‡ç”¨å‰åç«¯åˆ†ç¦»éƒ¨ç½²ï¼Œè‡ªç„¶ä¸åœ¨ä¸€ä¸ªç«¯å£ï¼Œä¸åœ¨ä¸€ä¸ªç«¯å£å¿…ç„¶è·¨åŸŸï¼Œä¸è¿‡è¿™å¯¹ç°åœ¨çš„æŠ€æœ¯æ‰‹æ®µæ¥è¯´å®Œå…¨ä¸æ˜¯é—®é¢˜\n\n***å¼€å‘æ¨¡å¼***\nä¸ºäº†æ›´å¿«æ›´å¥½çš„å¼€å‘ï¼Œ*dev* ä¸‹ä¸€èˆ¬é‡‡ç”¨ *node* åšä»£ç†å±‚ï¼Œè§£å†³è·¨åŸŸï¼Œå‡ ä¹æ— éšœç¢å¼€å‘ï¼Œè€Œä¸”å¯ä»¥è½»æ¾åˆ‡æ¢ç¯å¢ƒã€‚\n\n***éƒ¨ç½²æ¨¡å¼***\néƒ¨ç½²ä¸€èˆ¬ä¸ä¾æ‰˜ *node* è¿›è¡Œéƒ¨ç½²ï¼Œé€šå¸¸æˆ‘ä»¬å‘å¸ƒåˆ° *HTTP* æœåŠ¡å™¨ï¼Œä¸æœåŠ¡ç«¯è¿›è¡Œé€šä¿¡ï¼Œé€šå¸¸ä½¿ç”¨ *nginx* è¿›è¡Œæ­£å‘ä»£ç†ã€‚\n\n\n\n# Part4 å‰ç«¯äº†è§£å¤šå°‘ï¼Ÿ\n\n\n\n![](http://www.gitrue.com:9000/image/ZHReAU7RHu)\n\n\n\n## æŠ€æœ¯æ ˆçš„é€‰æ‹©\n\né¦–å…ˆæˆ‘ä»¬æ„å»ºå‰ç«¯æ¶æ„éœ€è¦å¯¹å‰ç«¯ç”Ÿæ€åœˆæœ‰ä¸€åˆ‡äº†è§£ï¼Œå¹¶ä¸”æœ€å¥½å¸¦æœ‰ä¸€å®šçš„æŠ€æœ¯**å‰ç»æ€§**ï¼Œå¥½çš„æŠ€æœ¯æ¶æ„å¯èƒ½æ—¥åä¼šæ–¹ä¾¿çš„æ‰©å±•ï¼Œå‡å°‘é‡æ„çš„æ¬¡æ•°ï¼Œå³ä½¿é‡æ„ä¹Ÿä¸éœ€è¦å¤§åŠ¨å¹²æˆˆï¼Œæˆ‘é€šå¸¸é€‰å‹æŠ€æœ¯æ ˆä¼šå‚è€ƒä»¥ä¸‹ä¸‰ç‚¹ï¼š\n\n### ä¸€ã€æå‡ºè‡ªèº«ä¸šåŠ¡çš„éœ€æ±‚\n- SEO æ˜¯å¦éå¸¸é‡è¦ï¼Ÿ\n- ä¸»è¦é¢å‘ï¼šç§»åŠ¨ç«¯è¿˜æ˜¯ pc ç«¯ï¼Ÿ\n- æ˜¯å¦æœ‰å¼€å‘ app çš„è§„åˆ’ï¼Ÿ\n\næœ‰äº†è¿™æ ·çš„é—®é¢˜æˆ‘ä»¬å¯ä»¥å¸¦ç€é—®é¢˜å»é‡ç‚¹é€‰å‹ä¸€äº›è¿™å†™é—®é¢˜æŠ€æœ¯æ–¹æ¡ˆæ¯”è¾ƒæˆç†Ÿçš„æŠ€æœ¯æ ˆã€‚\n\n### äºŒã€è‡ªèº«æ˜¯å¦æˆç†Ÿï¼Œæ–‡æ¡£æ˜¯å¦å‹å¥½\n> è¿™é‡Œä¸¾ä¸€ä¸ªä»¥å‰å¼€å‘è¿‡ç¨‹ä¸­å®é™…é‡åˆ°çš„ï¼Œå½“æ—¶ä¸ºäº†ä¼˜åŒ–ç”¨æˆ·ä½“éªŒï¼ŒèŠ‚çœå¼€å‘æ•ˆç‡ é€‰å‹äº†ä¸€æ¬¾ *MVVM* è½»é‡æ¡†æ¶ï¼Œå¯æƒœå½“æ—¶æ²¡æœ‰å†³å®šæƒï¼Œ*CTO* é€‰å‹äº† *avalon* \n\nå½“æ—¶ä¹‹æ‰€ä»¥æ²¡æœ‰é€‰æ‹© backbone  ï¼Œä¸»è¦æ˜¯å› ä¸ºæ²¡æœ‰æˆç†Ÿçš„ä¸­æ–‡æ–‡æ¡£ï¼Œè€ƒè™‘åˆ°å›¢é˜Ÿçš„æµåŠ¨æ€§å’Œä¸Šæ‰‹æ€§æš‚æ—¶æ²¡åšè€ƒè™‘ï¼Œæœ€ç»ˆé€‰æ‹©äº† å¸å¾’æ­£ç¾çš„ avalon å½“æ—¶æ¥è¯´è¿˜æ˜¯æ¯”è¾ƒå‰å«çš„ï¼Œä¹Ÿæœ‰ä¸€äº›ä»¥å»å“ªç½‘ä¸ºé¦–çš„å¤§å…¬å¸éƒ½åœ¨ç”¨ã€‚æˆ‘ä»¬å½“æ—¶ç”¨çš„æ—¶å€™ avalon2 åˆšå‡ºä¸ä¹…ï¼Œç›´æ¥ç”¨çš„ 2.0ï¼Œä½¿ç”¨è¿‡ç¨‹ä¹Ÿå‡ºç°äº†ä¸€ç‚¹é—®é¢˜ï¼šæ–‡æ¡£ç¦»æ•£ï¼Œè¿™ä¸€å—é‚£ä¸€å—ï¼Œå­˜åœ¨åç½®æ€§ï¼Œç”Ÿæ€å°‘ï¼Œæ‰©å±•æ€§ä»·æ¯”ä¸é«˜ ï¼Œæœ‰æ—¶å€™é‡åˆ°åŒªå¤·æ‰€æ€çš„ bug å¯»æ‰¾åŸå› ç¿»äº†å‡ é demo ã€æ–‡æ¡£ å¯èƒ½ä¼šæ‰¾åˆ°ç­”æ¡ˆï¼Œæ²¡æœ‰é‡ç‚¹æ ‡è¯†ã€‚å½“ç„¶å°±å½“æ—¶æ¥è¯´ç¡®å®æ˜¯ç»™æˆ‘ä»¬æå‡äº†éƒ¨åˆ†å¼€å‘æ•ˆç‡ï¼Œä½†æ˜¯æˆ‘å¯èƒ½å½“æ—¶æ›´åå‘ Angular æˆ– vue çš„ã€‚å› ä¸ºä»–ä»¬æœ‰æ— ä»¥ä¼¦æ¯”çš„ç”Ÿæ€åœˆå’Œå„ç§é—®é¢˜çš„æŠ€æœ¯æ–¹æ¡ˆä»¥ä»¥åŠå®Œå–„çš„å¼€å‘è€…æ–‡æ¡£ï¼Œå€¼å¾—ä¸€æçš„æ˜¯ avalon çš„ä½œè€…æ˜¯å…¼èŒç»´æŠ¤çš„ï¼Œå¦‚æœå…¨æ ˆè¿è¥çš„è¯ï¼Œæˆ‘ç›¸ä¿¡è¿œæ¯”ç°åœ¨æ›´å¥½ï¼Œçœ‹ä¸€çœ‹ avalon çš„æºç ä¹Ÿä¼šå¯¹è‡ªå·±æœ‰ä¸å°‘çš„æå‡ã€‚å¯¹äºç”Ÿäº§çš„æŠ€æœ¯é€‰å‹è¦æ›´åŠ è°¨æ…ã€‚\n\n### ä¸‰ã€äº†è§£å…¶ç”Ÿæ€ç³»ç»Ÿ \nä¸Šæ–‡æåˆ°äº†ç”Ÿæ€ç³»ç»Ÿï¼Œä»¥æˆ‘æ¯”è¾ƒå¸¸ç”¨çš„ vue æ¥ä¸¾ä¾‹ï¼Œvue å‘å±•è‡³ä»Šä»…å®˜æ–¹ä¸ºæˆ‘ä»¬æä¾›äº†ä»¥ **vuexã€ vue-routerã€ vue-loaderã€ vue-cliã€ vuepressã€ vue-devtoolsã€ vue-ssr** ä¸ºé¦–çš„ *89* ä¸ªå¼€æºé¡¹ç›®ï¼ŒåŒ…æ‹¬æ— æ•°çš„ *vue* ç›¸å…³çš„ *UI* åº“ï¼Œ*vue* æ’ä»¶ ç”šè‡³æ˜¯è¿‘ä¸¤å¹´æ·˜å®æä¾›çš„ *Hybrid* ï¼š **weex** çš„æ”¯æŒ\n\næˆªæ­¢ä»Šå¤© *github* å¼€æºçš„ ä¸ *vue* ç›¸å…³çš„é¡¹ç›®å¤šè¾¾ *167,752* ä¸ªï¼Œä¸ *angular* ç›¸å…³çš„å¤šè¾¾ *416,811* ä¸ªï¼Œä¸ *react* ç›¸å…³çš„ å¤šè¾¾ *594,272* ä¸ªã€‚\n> ç»Ÿè®¡æ—¶é—´ 2018-09-01\n\næˆ‘æƒ³æœ‰äº†è¿™æ ·çš„ç”Ÿæ€æ”¯æŒï¼Œå®Œå…¨å¯ä»¥æ»¡è¶³æˆ‘ä»¬ä¸­å°é¡¹ç›®çš„ *95%* ä»¥ä¸Šçš„éœ€æ±‚ï¼Œè‡³äºæ¯”è¾ƒå“ªä¸ªæ›´å¼ºæ˜¯æ²¡æœ‰æ„ä¹‰çš„ ã€‚\n\nå› ä¸ºæ¯”è¾ƒç†Ÿæ‚‰è®©æˆ‘æ–—èƒ†ç§è‡ªé€‰æ‹© vue ä½œä¸ºæˆ‘ä»¬çš„ *SPA* ä¸»æ¶æ„\n\n\n\n### å››ã€ç”»å‡ºæˆ‘ä»¬æœŸæœ›çš„å‰ç«¯åŸºç¡€æ¶æ„æ¨¡å‹\n\n**å› ä¸ºæˆ‘ä»¬ä¸Šä¸€ç« é€‰å‹äº† Vueï¼Œå¦‚æœåªè€ƒè™‘å‰ç«¯æˆ‘ä»¬æœ€åˆçš„æƒ³æ³•:æŠ€æœ¯æ ˆå¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š**\n\n![](http://www.gitrue.com:9000/image/h5Ya0WhZqZ)\n\n> é€šè¿‡ node å’Œ webpack çš„æ”¯æŒ æŠŠ  vue ç»„ä»¶ *build* æ‰“åŒ…æˆä¼ ç»Ÿå…ƒç´ ï¼Œå‘å¸ƒåˆ° *http* æœåŠ¡ä¸­ï¼Œè¯·æ±‚åç«¯æœåŠ¡ã€‚\n\n**éšåå¯èƒ½æ˜¯è¿™æ ·çš„ï¼š**\n\n![](http://www.gitrue.com:9000/image/epKtL5vuvm)\n\n> éšç€ç›®å‰ä¸»æµç¬¬ä¸‰æ–¹åº“çš„è¶Šæ¥è¶Šå¤šå’ŒæŠ€æœ¯çš„å°é²œã€å®¢æˆ·ç«¯çš„éœ€æ±‚ã€æˆ–è¢«åŠ¨[ä¸å¾—ä¸ç”¨]ã€æˆ–ä¸»åŠ¨çš„å»å¼•ç”¨äº† babel less sass *.loader å’Œ hybrid ç­‰ç»„ä»¶åº“ã€‚\n\n **å†åæ¥çš„æŠ€æœ¯æ ˆéœ€è¦æˆ‘ä»¬æ ¹æ®çœŸæ­£è¸©å‘ä¹‹åæ‰ä¼šé€æ­¥å®Œå–„**\n\nå¯èƒ½æ˜¯ *polyfill* *æ‡’åŠ è½½* *xss* *protobuf* ç­‰ é’ˆå¯¹ **æµè§ˆå™¨å…¼å®¹**ã€**é€Ÿåº¦ä¼˜åŒ–**ã€ **SEO** ã€**é€šä¿¡åè®®** ç­‰å…·ä½“é—®é¢˜ã€‚æ‰€ä»¥ï¼Œå‰æœŸå¯ä»¥ä¸ç”¨è¿‡å¤šè€ƒè™‘ï¼Œæˆ‘ä»¬åªè¦çŸ¥é“ï¼šè¿™ä¸ªé—®é¢˜æˆ‘ä»¬æ˜¯å¯ä»¥è§£å†³çš„ï¼Œä½†æ˜¯ç°åœ¨å¯ä»¥å…ˆä¸å»è€ƒè™‘ï¼Œæœ‰äº›åŒå­¦ï¼Œå¤ªè¿‡äºâ€œ**å®Œç¾ä¸»ä¹‰**â€ä»¥è‡³äºæƒ³æ³•ä¸é”™ï¼Œä½†åŠ¨èµ·æ‰‹æ¥åšäº†å‡ å¤©å°±ä¸åšäº†ï¼Œ**å®Œç¾ä¸»ä¹‰å®³æ­»äºº**ã€‚\n\n\n## äº†è§£ [Webpack](https://www.webpackjs.com/)\nWebPack å¯ä»¥çœ‹åšæ˜¯æ¨¡å—æ‰“åŒ…æœºå™¨ï¼Œå®ƒå¯ä»¥åˆ†æä½ çš„é¡¹ç›®ç»“æ„ï¼Œæ‰¾åˆ° JavaScript æ¨¡å—ä»¥åŠå…¶å®ƒçš„ä¸€äº›æµè§ˆå™¨ä¸èƒ½ç›´æ¥è¿è¡Œçš„æ‹“å±•è¯­è¨€ï¼šStylusã€Scssã€lessã€TypeScriptã€CoffeeScript ç­‰ï¼Œå¹¶å°†å…¶è½¬æ¢å’Œæ‰“åŒ…ä¸ºåˆé€‚çš„æ ¼å¼ä¾›æµè§ˆå™¨ä½¿ç”¨ã€‚æ¯”è¾ƒå¸¸ç”¨çš„è¿˜å¯ä»¥é€šè¿‡ webpack-dev-server è¿›è¡Œå¼€å‘æ¨¡å¼çš„**çƒ­æ›´æ–°** \n\n**WebPack æ˜¯ä¸€ç§æ¨¡å—åŒ–å¼€å‘çš„æ–¹æ¡ˆ**\n\nå½“ webpack å¤„ç†åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¼šé€’å½’åœ°æ„å»ºä¸€ä¸ªä¾èµ–å…³ç³»å›¾(*dependency graph*)ï¼Œå…¶ä¸­åŒ…å«åº”ç”¨ç¨‹åºéœ€è¦çš„æ¯ä¸ªæ¨¡å—ï¼Œç„¶åå°†æ‰€æœ‰è¿™äº›æ¨¡å—æ‰“åŒ…æˆä¸€ä¸ªæˆ–å¤šä¸ª bundle\n\n\n![](http://www.gitrue.com:9000/image/TXM4cAN7cu)\n\n*webpack* é€šè¿‡ *loader* å¯ä»¥æ”¯æŒå„ç§è¯­è¨€å’Œé¢„å¤„ç†å™¨ç¼–å†™æ¨¡å—ï¼Œæœ€åæ‰“åŒ…ä¸ºä¸€ä¸ªï¼ˆæˆ–å¤šä¸ªï¼‰æµè§ˆå™¨å¯è¯†åˆ«çš„ *JavaScript css * æ–‡ä»¶\n\nç›®å‰æ”¯æŒçš„ [loader åˆ—è¡¨](https://www.webpackjs.com/loaders/) \n\n## äº†è§£ ES6\n\n![](http://www.gitrue.com:9000/image/WWjtS9nDDO)\n\n\n### å®˜æ–¹è¯´æ³•\n\nECMAScript 6ï¼ˆç®€ç§°ES6ï¼‰æ˜¯äº2015å¹´6æœˆæ­£å¼å‘å¸ƒçš„JavaScriptè¯­è¨€çš„æ ‡å‡†ï¼Œæ­£å¼åä¸ºECMAScript 2015ï¼ˆES2015ï¼‰ã€‚å®ƒçš„ç›®æ ‡æ˜¯ä½¿å¾—JavaScriptè¯­è¨€å¯ä»¥ç”¨æ¥ç¼–å†™å¤æ‚çš„å¤§å‹åº”ç”¨ç¨‹åº.\n\n### ç§‘æ™®\nå¾ˆå¤šäººæ€»æ˜¯æä¸æ¸…æ¥š ES è¿™äº›ä¸œè¥¿ï¼Œè¿™é‡Œå¤§ç™½è¯è®²è®²ï¼š\nä»–ä»¬çš„å…ˆåé¡ºåºæ˜¯ï¼šES5ã€ES6(ES2015)ã€ES7ã€ES8\n\n> åœ¨ 2015 å¹´ 6 æœˆ ES6 çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬å‘å¸ƒï¼Œ æ­£å¼åç§°å°±æ˜¯ ã€ŠECMAScript 2015 æ ‡å‡†ã€‹ï¼ˆç®€ç§° ES2015ï¼‰ç®—æ˜¯ 2011 å¹´ ECMAScript 5.1 ä¹‹åçš„ 6.0ç‰ˆæœ¬\n> 2016 å¹´ 6 æœˆï¼Œå°å¹…ä¿®è®¢çš„ã€ŠECMAScript 2016 æ ‡å‡†ã€‹ï¼ˆç®€ç§° ES2016ï¼‰[å› ä¸ºæ”¹åŠ¨å°ï¼Œå…¶å®ä»–æ˜¯ 6.1 ç‰ˆæœ¬ï¼Œä½†æ€»æœ‰äººæ„¿æ„å«å®ƒ ES7 ï¼Œä¸æ ‡å‡†çš„]\n> 2017 å¹´ 6 æœˆå‘å¸ƒ çš„ã€ŠECMAScript 2017 æ ‡å‡†ã€‹ï¼ˆç®€ç§° ES2017ï¼‰ [å› ä¸ºæ”¹åŠ¨å°ï¼Œå…¶å®ä»–æ˜¯ 6.2 ç‰ˆæœ¬ï¼Œä½†æ€»æœ‰äººæ„¿æ„å«å®ƒ ES8 ï¼Œä¸æ ‡å‡†çš„]\n\nå°±åƒ ***Kubernetes*** äººä»¬å¼€ä»–èµ·äº†ä¸€ä¸ª ***K8S*** çš„åå­— (*K* å’Œ *S* ä¸­é—´æœ‰ 8 ä¸ªå•è¯)ï¼Œä»–æ˜¯ä¸æ ‡å‡†çš„\n\n\n## äº†è§£ Babel Traceur\n\n![](http://www.gitrue.com:9000/image/La8yS97yuJ)\n\nBabelã€Traceur æ˜¯ä¸€ä¸ªç¼–è¯‘JavaScriptçš„å¹³å°ï¼Œå®ƒå¯ä»¥ç¼–è¯‘ä»£ç å¸®ä½ è¾¾åˆ°ä»¥ä¸‹ç›®çš„ï¼š\n\n> JavaScript.next-to-JavaScript-of-today compiler\n\n**ä»Šå¤©å°±ä½¿ç”¨æœªæ¥çš„ JavaScript**\n\næˆªæ­¢å‘å¸ƒæ—¥æœŸ (2018-09-04) ï¼Œ[æ²¡æœ‰ä¸€æ¬¾å®Œå…¨æ”¯æŒES6çš„JavaScriptä»£ç†](http://kangax.github.io/compat-table/es6/)ï¼ˆæ— è®ºæ˜¯æµè§ˆå™¨ç¯å¢ƒè¿˜æ˜¯æœåŠ¡å™¨ç¯å¢ƒï¼‰ï¼Œæ‰€ä»¥çƒ­è¡·äºä½¿ç”¨è¯­è¨€æœ€æ–°ç‰¹æ€§çš„å¼€å‘è€…éœ€è¦å°†ES6ä»£ç è½¬è¯‘ä¸ºES5ä»£ç ã€‚\n\nè®©ä½ èƒ½ä½¿ç”¨æœ€æ–°çš„JavaScriptä»£ç ï¼ˆES6ï¼ŒES7...ï¼‰ï¼Œè€Œä¸ç”¨ç®¡æ–°æ ‡å‡†æ˜¯å¦è¢«å½“å‰ä½¿ç”¨çš„æµè§ˆå™¨å®Œå…¨æ”¯æŒï¼› \n\n> ES7 ä½œè€…å®Œå…¨æ²¡ç²¾åŠ›çœ‹ ï¼Œä¸è¿‡ Bable é€æ¸æ›¿ä»£äº† Google çš„ Traceur æˆä¸ºä¸»æµäº†ï¼Œæˆ‘æ˜¯ä¸ªä¿—äººï¼Œæ‰€ä»¥æˆ‘é€‰ Bable \n\n\n\n\n## äº†è§£ [Sass](https://www.sass.hk/) [Less](http://lesscss.cn/) [Stylus](http://stylus-lang.com/)\n\n![](http://www.gitrue.com:9000/image/L42Jeqojhd)\n\n> Sass æ˜¯ä¸æ˜¯è¿åäº†ä¸­å›½çš„å¹¿å‘Šæ³•äº†ï¼Ÿï¼Ÿ\n\nSass ã€Stylus å’Œ Less ä¹‹ç±»çš„é¢„å¤„ç†å™¨æ˜¯å¯¹åŸç”ŸCSSçš„æ‹“å±•ï¼Œå®ƒä»¬å…è®¸ä½ ä½¿ç”¨ç±»ä¼¼äºvariables, nesting, mixins, inheritanceç­‰ä¸å­˜åœ¨äºCSSä¸­çš„ç‰¹æ€§æ¥å†™CSSï¼ŒCSSé¢„å¤„ç†å™¨å¯ä»¥è¿™äº›ç‰¹æ®Šç±»å‹çš„è¯­å¥è½¬åŒ–ä¸ºæµè§ˆå™¨å¯è¯†åˆ«çš„CSSè¯­å¥ã€‚\n\n\n- **ä¸€å¼ è¡¨æ ¼å¯¹æ¯”ä¸‰è¯­è¨€**\n\n| è¯­è¨€ | å®ç° | ç‰¹æ€§ | èµ‹å€¼ | ç¼©è¿› |\n| --- | --- | --- | --- | --- |\n| Sass | Ruby | å˜é‡$å¼€å¤´ | $var: value | ä¸éœ€è¦ |\n| Less | JavaSript | å˜é‡@å¼€å¤´ | @var: value | ä¸éœ€è¦ |\n| Stylus | NodeJs | ä¸èƒ½ä½¿ç”¨@å¼€å¤´ | var:10 | éƒ½å¯ä»¥ |\n \n\n\nä½ ç°åœ¨å¯èƒ½éƒ½å·²ç»ç†Ÿæ‚‰äº†ï¼Œä¸Šæ–‡è®² WebPack è®²è¿‡ï¼š webpack é‡Œä½¿ç”¨ç›¸å…³ loaders è¿›è¡Œé…ç½®å°±å¯ä»¥ä½¿ç”¨äº†ï¼Œä»¥ä¸‹æ˜¯å¸¸ç”¨çš„CSS å¤„ç†loaders:\n\nLess Loader\nSass Loader\nStylus Loader\n\nè‡ªå·±å»æ‰¾ï¼š[loader åˆ—è¡¨](https://www.webpackjs.com/loaders/) \n\n> åƒï¼šå“ªç§è¯­è¨€æ›´å¥½ã€ä½¿ç”¨çš„æ›´å¤šã€æ›´ç®€å• å®¹æ˜“å¼•èµ·äº‰è®®çš„ åšä¸»ä¸æƒ³è®¨è®ºï¼Œçœ‹è‡ªå·±å–œå¥½\n\n\n## äº†è§£ [Electron](https://electronjs.org/) \n\n![](http://www.gitrue.com:9000/image/91rSh78oFI)\n\nä¸€ä¸ªå¯ä»¥ä½¿ç”¨ä½¿ç”¨ï¼š JavaScript, HTML å’Œ CSS æ„å»ºè·¨å¹³å°çš„æ¡Œé¢åº”ç”¨çš„æ¡†æ¶ï¼Œä¹Ÿç®— *hybrid* çš„ä¸€ç§ï¼Œä¸»è¦åœºæ™¯æ˜¯ PC ç«¯ï¼Œæ²¡å•¥å¥½è¯´çš„ã€‚\n\n> å€¼å¾—ä¸€æçš„æ˜¯ Visual Studio Code ã€Atomã€GIthub Desktop éƒ½æ˜¯åŸºäºæ­¤æ„å»ºçš„ï¼Œæœ‰æ—¶å€™æŒ‰ CMD + option + i æœ‰æƒŠå–œå“¦\n\n\n[åŸºäº Electron å¼€å‘çš„APPåˆ—è¡¨](https://electronjs.org/apps)\n\n\n# Part5 å¿«é€Ÿæ„å»ºè§„èŒƒçš„é¡¹ç›®éª¨æ¶ ã€ŒVUEã€\n\n\n\n\n## åˆæ­¥æ­å»ºè„šæ‰‹æ¶\n- **Tips**\n\n> ä»»ä½•ä¸é”™çš„å¼€æºé¡¹ç›®éƒ½æœ‰ project-cli è„šæ‰‹æ¶ã€æˆ‘ä»¬ç”¨å®ƒç”Ÿæˆå¾€å¾€èƒ½**å¿«é€Ÿ**é…åˆ¶å‡ºæœ€ä½³çš„ã€ç†æƒ³çš„è„šæ‰‹æ¶\n\næˆ‘é€šå¸¸ä½¿ç”¨ *cli* ç”Ÿæˆé¡¹ç›®éª¨æ¶å†åœ¨ä¹‹åŸºç¡€ä¸Šè¿›è¡Œä¸ªäººä¿®æ”¹ã€‚\n\n### ä»€ä¹ˆæ˜¯ CLI\n> å‘½ä»¤è¡Œç•Œé¢ï¼ˆè‹±è¯­ï¼šcommand-line interfaceï¼Œç¼©å†™ï¼šCLIï¼‰æ˜¯åœ¨å›¾å½¢ç”¨æˆ·ç•Œé¢å¾—åˆ°æ™®åŠä¹‹å‰ä½¿ç”¨æœ€ä¸ºå¹¿æ³›çš„ç”¨æˆ·ç•Œé¢ï¼Œå®ƒé€šå¸¸ä¸æ”¯æŒé¼ æ ‡ï¼Œç”¨æˆ·é€šè¿‡é”®ç›˜è¾“å…¥æŒ‡ä»¤ï¼Œè®¡ç®—æœºæ¥æ”¶åˆ°æŒ‡ä»¤åï¼Œäºˆä»¥æ‰§è¡Œã€‚ä¹Ÿæœ‰äººç§°ä¹‹ä¸ºå­—ç¬¦ç”¨æˆ·ç•Œé¢\n\né¡¾åæ€ä¹‰  *XXX-CLI* å°±æ˜¯ä½¿ç”¨å‘½ä»¤è¡Œç”Ÿæˆçš„ *XXX* ç¨‹åºã€‚ä¹‹å‰å†™è¿‡ä¸€æ¬¾ åŸºäº *nodeJs* åˆ¶ä½œä¸ªæ€§ *CLI* çš„æ•™ç¨‹\n\n**[å¦‚ä½•ç”¨nodeå¼€å‘è‡ªå·±çš„cliå·¥å…·å¹¶å‘å¸ƒåˆ°NPM ](https://github.com/pkwenda/blog/issues/7)** ï¼Œ æƒ³è¯¦ç»†äº†è§£åˆ¶ä½œæµç¨‹çš„å¯ä»¥ç®€å•çœ‹çœ‹ã€‚\n\n### [vue-cli](https://cli.vuejs.org/zh/)\n\n![](http://www.gitrue.com:9000/image/O6K3FxiGwv)\n\n> æˆªæ­¢ 2018-09-02 vue-cli æœ€æ–°ç‰ˆæœ¬ä¸º 3.0\n\n*vue* ä¸­æ–‡ç”Ÿæ€éå¸¸å®Œå–„ï¼Œæˆ‘ä»¬ç›´æ¥å»å®˜ç½‘çœ‹çœ‹ï¼š\n\nhttps://cli.vuejs.org/zh/\n\n### vue-cli2 å’Œ vue-cli3 çš„å¯¹æ¯”\n![](http://www.gitrue.com:9000/image/qUg4EhmtHi)\n\n> å¾ˆé—æ†¾ï¼Œ*vue-cli-3* æ˜¯ *2018-08-11* å‡ºæ¥çš„ï¼Œè€Œæˆ‘çš„è®ºå›æ—©åœ¨ä¹‹å‰å°±ç€æ‰‹æ­å»ºäº† cli-3 è€½è¯¯äº†æˆ‘ä¸€äº›æ—¶é—´ï¼Œåé¢ä¹Ÿä¼šæåˆ°\n\n#### ç®€å•çœ‹çœ‹äº†çœ‹ *vue-cli3* çš„æ–°ç‰¹æ€§ï¼š\n\n- å¯ä»¥ç”Ÿæˆ pwa\n- æ”¯æŒ UI ç•Œé¢å‹¾å‹¾é€‰é€‰å°±å¯ä»¥äº†\n- å…¼å®¹ cnpm äº†\n- æäº†ä¸€å¥—è‡ªå·±çš„ vue-cli-service å¦‚ä¸‹ï¼š\n\n![](http://www.gitrue.com:9000/image/zRBgzcD2NK)\n\n> æˆ‘è¿™ä¸¤å¤©ä¸å¿™çš„æ—¶å€™å°±åœ¨è€ƒè™‘é¡¹ç›®å…¼å®¹ *vli-3* ä½†æ˜¯åæ¥åºŸäº†å¾ˆå¤šæ—¶é—´ï¼Œæ•ˆæœä¾ç„¶ä¸ç†æƒ³ï¼Œæˆ‘å›æ»šäº†ä»£ç å®£å¸ƒæ”¾å¼ƒäº†ã€‚\n\né‰´äºä½¿ç”¨ *cli-3* å¹¶æ²¡æœ‰å¯¹æˆ‘çš„é¡¹ç›®æœ‰æ€§èƒ½ä¸Šçš„æå‡ï¼Œåè€Œç¿»éäº†æˆ‘çš„å¾ˆå¤šæˆç†Ÿçš„åŸºç¡€æ¶æ„ï¼Œä¸ºæ—¶é—´æˆæœ¬è€ƒè™‘ï¼Œæˆ‘å†³å®šè¿˜æ˜¯ä½¿ç”¨ cli-2 è¿›è¡Œå¼€å‘ï¼Œå¤§ä½“ç›®å½•ç»“æ„éƒ½æ˜¯ä¸€æ ·çš„ã€‚\n\n\n### vue-cli çš„å®‰è£…\nå®‰è£…å‰åº”æ³¨æ„å‰ææ¡ä»¶ï¼Œé¿å…æµªè´¹ä¸å¿…è¦çš„æ—¶é—´ã€‚\n> *Vue CLI* éœ€è¦ *Node.js 8.9* æˆ–æ›´é«˜ç‰ˆæœ¬ (æ¨è *8.11.0+*)ã€‚(å¦‚æœä½ ç”¨çš„å’Œæˆ‘ä¸€æ · ä¹Ÿæ˜¯ *cli-2* é‚£ä¹ˆä¸éœ€è¦å¦‚æ­¤æ–°çš„ *nodeJs* )ä½ å¯ä»¥ä½¿ç”¨ *nvm* æˆ– *nvm-windows* åœ¨åŒä¸€å°ç”µè„‘ä¸­ç®¡ç†å¤šä¸ª *Node* ç‰ˆæœ¬ã€‚\n\n\nä¸å°†è¿œç¦»äº†ï¼Œå®˜ç½‘æ¯”æˆ‘è®²çš„å¥½å¾—å¤šã€‚\n\nå¯ä»¥ä½¿ç”¨ *yarn* æˆ– *npm* æ¥å®‰è£…\n\n```\nnpm install -g @vue/cli\n# OR\nyarn global add @vue/cli\n```\n\næˆ‘ç”¨ NPM æ¥é‡æ–°å°è¯•ä¸€æ¬¡ (å¯¹ npm é€Ÿåº¦è¡¨ç¤ºä¸ç†æƒ³çš„ å¯ä»¥å°è¯•æ·˜å®çš„ [CNPM](https://npm.taobao.org/) ä¸è¦è¿‡åº¦ä¾èµ–cnpm)ï¼š\n\n```\nlocalhost:~ Venda-GM$ sudo cnpm i @vue/cli -g\n```\n#### TIPS\n> *npm* ä¸­ *install* å¯ä»¥å†™æˆ i , -g æ”¾å“ªéƒ½è¡Œ ï¼Œ--save å¯ä»¥å†™æˆ -S  , --save-dev å¯ä»¥å†™æˆ -D\n\n![](http://www.gitrue.com:9000/image/CmoDalPGVy)\n\nçœ‹åˆ°è¿™ä¸ªç”»é¢ï¼Œå®‰è£…å®Œæˆäº†ã€‚\n \n ![](http://www.gitrue.com:9000/image/KGjuW2qQpf)\n\næµ‹è¯•ä¸€ä¸‹æŸ¥çœ‹ä¸€ä¸‹ç‰ˆæœ¬æ˜¯ä¸æ˜¯æ­£ç¡®ï¼Œok åˆ›å»ºé¡¹ç›®ï¼š\n\n\n\n```\nvue create new-bee\n```\n### æ‹‰å– 2.x æ¨¡æ¿ (æ—§ç‰ˆæœ¬)\n*Vue CLI 3* å’Œæ—§ç‰ˆä½¿ç”¨äº†ç›¸åŒçš„ *vue* å‘½ä»¤ï¼Œæ‰€ä»¥ *Vue CLI 2* (vue-cli) è¢«è¦†ç›–äº†ã€‚å¦‚æœä½ ä»ç„¶éœ€è¦ä½¿ç”¨æ—§ç‰ˆæœ¬çš„ *vue init* åŠŸèƒ½ï¼Œä½ å¯ä»¥å…¨å±€å®‰è£…ä¸€ä¸ªæ¡¥æ¥å·¥å…·ï¼š\n\n```\nnpm install -g @vue/cli-init\n```\n#### `vue init` çš„è¿è¡Œæ•ˆæœå°†ä¼šè·Ÿ `vue-cli@2.x` ç›¸åŒ\n\n```\nvue init webpack my-project #è¿™æ ·æ¥ç”Ÿæˆä¸€ä¸ª *cli-2* é¡¹ç›®\n```\n\n### ä½¿ç”¨ vue-cli-2 ç”Ÿæˆé¡¹ç›®\n\n```shell\nvue init webpack new-bee\n```\n\nä¸‹é¢æ˜¯æˆ‘åˆ›å»ºé¡¹ç›®æˆ‘æ‰€é€‰çš„é€‰é¡¹ï¼š\n \n![](http://www.gitrue.com:9000/image/nd8ZpEA8O3)\n\n\nç¨å¾®è®²è®²ä¸‹é¢ä¸‰ä¸ªï¼š\n\n- vue build çš„æ–¹å¼ \n![](http://www.gitrue.com:9000/image/0zTzftalrV)\n> æ¨èä½¿ç”¨ è¿è¡Œæ—¶ + ç¼–è¯‘æ—¶ï¼Œé€šå¸¸éœ€è¦ webpack ç¼–è¯‘ .vue æ¨¡æ¿ã€‚\n\n- æ˜¯å¦é€‰æ‹©é¢„å…ˆè®¾å®šçš„Eslint\n![](http://www.gitrue.com:9000/image/0v0yl6tZvU)\n> å¹¶æ˜¯ä¸æ¯ä¸ªäººéƒ½é€‚åˆçš„ï¼Œæœ‰çš„è¦æ±‚è¿‡äºä¸¥æ ¼ï¼Œæˆ‘è‡ªå·±æœ‰ä¸€å¥—æˆç†Ÿçš„ï¼Œ[ä»£ç åœ¨è¿™é‡Œ](https://github.com/pkwenda/Blog/tree/master/effective_config) , å°±ç”¨è‡ªå·±çš„äº†ï¼Œå½“ç„¶å¯ä»¥åŸºäºå®ƒåšä¸€äº›åˆ å‡ã€‚\n\n- å®ƒè¦å¸®æˆ‘ä»¬æ‰§è¡Œ install\n![](http://www.gitrue.com:9000/image/6q3Fr3dldZ)\n> å¦‚æœä½ æœ‰ä¸€ä¸ªå¥½çš„socketç»ˆç«¯ä»£ç†ï¼Œå¯ä»¥ç”¨è¿™ä¸ªï¼Œå¦åˆ™å¯ä»¥é€‰æ‹© No è‡ªå·±ç”¨ cnpm æ‰§è¡Œ\n\n\n\n### åˆçª¥ç›®å½•ç»“æ„\n\nè®©æˆ‘ä»¬æ¥çœ‹çœ‹ vue-cli2 è‡ªåŠ¨ç”Ÿæˆçš„é¡¹ç›®ç›®å½•ï¼Œæˆ‘æ‰“ä¸Šæ ‡ç­¾ï¼Œä¸ºå¯èƒ½ä¸å¤ªç†è§£çš„åŒå­¦ç®€å•æè¿°ä¸€ä¸‹\n\n![](http://www.gitrue.com:9000/image/JPvEfX6vEx)\n\n\n \n\n\n\nè¿™æ¬¡æˆ‘ä»¬é‡æ„çš„ä¸»è¦ç›®çš„æ˜¯è§„èŒƒã€æ›´é€‚åˆå¤šæ¨¡å—å¤šäººåä½œã€è€Œä¸æ˜¯ä¸ºäº†è®©å®ƒçœ‹èµ·æ¥æ›´å¤æ‚ï¼Œæœ¬æ–‡çš„é¡¹ç›®ç»“æ„ã€*esLint* æ”¹è‰¯ã€ç­‰éƒ½æ˜¯ç»è¿‡é¡¹ç›®å°ç»„åå¤çš„æ¨æ•²å†³å®šçš„ï¼Œæœ‰ä¸€å®šçš„ç”Ÿäº§ä»·å€¼ã€‚\n \n\n\n#### æäººå¿§å¤© ï¼š ä¸º electron åšå¥½å‡†å¤‡\n\n\n*cli* ç”Ÿæˆçš„é¡¹ç›® *src* ä¸‹é¢ç›´æ¥å°±æ˜¯æºç ï¼Œä½†æ˜¯ä¸ºäº†è€ƒè™‘ä»¥åä½¿ç”¨ *electron* æˆ‘ä»¬å†ç”¨ *renderer* åŒ…è£¹ä¸€ä¸‹ï¼Œè§„èŒƒä¸€ç‚¹ã€‚\n\n> å¯ä»¥å‚è€ƒä¸€ä¸‹ [electron-vue ](https://github.com/SimulatedGREG/electron-vue) \n\n#### å…¼å®¹Electronçš„æºç ç›®å½•\n\n![](http://www.gitrue.com:9000/image/Altv98J4Ux)\n\n> tips: ä¸Šè¿°æˆªå›¾ *github* æ ‘å½¢ç›®å½•çš„æ’ä»¶æ˜¯ [octotree](https://github.com/buunguyen/octotree) ä¹Ÿå¯ä»¥åœ¨è°·æ­Œå•†åº—ç›´æ¥æœç´¢å®‰è£…ï¼Œçœ‹æºç çœå»ä¸å°‘æ—¶é—´ã€‚\n\n* å…ˆä¸å»ºç«‹ *electron* çš„ *main* æ–‡ä»¶å¤¹ å’Œ *index.ejs* éœ€è¦æ·»åŠ ä¾èµ–ï¼Œç›®å‰æš‚æ—¶ç”¨ä¸åˆ°ã€‚\n\nåˆ«å¿˜äº†æ”¹ä¸€ä¸‹ *webpack* ç›¸å…³çš„è·¯å¾„é—®é¢˜\n\n![](http://www.gitrue.com:9000/image/jOkGCszKi0)\n\nåŠ ä¸Š *renderer* çš„è·¯å¾„\n\n```javascript\n app: './renderer/src/main.js'\n```\n\n@ çš„è·¯å¾„ä¹Ÿè¦åœ¨ *webpack* è¿›è¡Œä¿®æ”¹ï¼Œå¦åˆ™ä¼šä¸æ‰¾ç»„ä»¶\n\n![](http://www.gitrue.com:9000/image/fbK6z3NP1w)\néœ€è¦æ”¹ä¸‹ *webpack alias* [åˆ«å] é…ç½®\n![](http://www.gitrue.com:9000/image/9jTwsiaJ0B)\n\næ”¹ä¹‹åçš„æ ·å­\n\n```\nalias: {\n      '@': resolve('renderer/src'),\n    }\n```\n\n#### å®¹å™¨çº§çš„ç›®å½•\n\nåœ¨ ç»„ä»¶ç›®å½•(*components*) åŒçº§å»ºç«‹ **å®¹å™¨**(*container*) ï¼šå®¹å™¨é‡Œé¢çš„å„ä¸ªæ¨¡å—åˆ†ç¦»å¼€ï¼Œè¿™æ ·å¯ä»¥ä½¿é¡¹ç›®**æ¨¡å—**çœ‹èµ·æ¥æ›´åŠ æ¸…æ™°ã€‚å¦‚æœåå¤šäººåä½œçš„é¡¹ç›®åˆèƒ½å¾ˆå¥½åœ°å¯¹å·¥ä½œåŒºåˆ’åˆ†ï¼Œåˆç†çš„å»ºç«‹è·¯ç”±ï¼Œé¿å…ä¸å¿…è¦çš„å†²çªã€‚\n\n> ä»¥ç›®å‰çš„[è®ºå›é¡¹ç›®](https://github.com/pkwenda/new-bee)ä¸ºä¾‹\n\n![](http://www.gitrue.com:9000/image/eSAq3sGukf)\n \n\n#### è·¯ç”±ç›®å½•çš„è°ƒæ•´è§„èŒƒ\n\nåœ¨ /*router* ä¸‹ä¸º */container/blog* å»ºç«‹ *blog.js*\n\n```javascript\nconst Blog = () => import ( /* webpackChunkName: \"blog\" */ '@/container/blog/index')\n\n/*\n æ‰€æœ‰container/blogç›®å½•ä¸‹çš„è·¯å¾„éƒ½é…ç½®åœ¨æ­¤è·¯ç”±childrenä¸‹ï¼Œé¿å…æ··ä¹±\n */\nlet routes = [{\n  path: '/blog',\n  name: 'blog',\n  component: Blog,\n  children: [{\n      path: 'blogdemo',\n      component: Blog\n    } \n  ]\n}]\n\n\nexport {\n  routes\n}\n\n// æ³¨æ„ \n/* webpackChunkName: \"blog\" */ \n//æ˜¯ä¸ºäº†åé¢çš„è·¯ç”±æ‡’åŠ è½½ï¼Œåé¢ä¼šè®²ï¼Œä¸æ‡‚æ²¡å…³ç³»ï¼Œç°åœ¨å¯ä»¥å¿½ç•¥\n\n```\n\n- è‡ªåŠ¨ç”Ÿæˆçš„ *index.js* ä¸»è·¯ç”±æ˜¯è¿™æ ·çš„\n\n![](http://www.gitrue.com:9000/image/coaEdMVqML)\n\n- ç¼ºç‚¹ï¼š\n\nå¤ªå•ä¸€ï¼Œæˆ‘ä»¬ä¸å¯èƒ½æ‰€æœ‰çš„è·¯ç”±éƒ½å†™åœ¨é‡Œé¢ä½œä¸º *children* ï¼Œçœ‹èµ·æ¥éå¸¸æ··ä¹±ï¼Œå¼€å‘è°ƒè¯•å¾ˆéš¾å¤„ç†ï¼Œå¤šäººåä½œè¿˜å¾ˆå®¹æ˜“å¼•èµ·å†²çªã€‚\n\næˆ‘ä»¬å°è¯•å°† *blog.js* å¼•è¿‡æ¥\n\nå…ˆå°† *blog.js* *export* çš„è·¯ç”±å¼•è¿‡æ¥ï¼Œèµ·ä¸€ä¸ªåˆ«åé˜²æ­¢å†²çª\n\n```\nimport { routes as blogRoutes } from './blog'\n```\n\nå› ä¸ºå¯èƒ½æœ‰Nå¤šä¸ªè·¯ç”±æ¨¡å—ï¼Œæˆ‘ä»¬å°† *routes* æ‹†åˆ†\n\nè‡ªåŠ¨ç”Ÿæˆçš„æ˜¯è¿™æ ·ç®€å•çš„ï¼š\n\n```\n//ç›´æ¥å¯¼å‡ºè·¯ç”±\nexport default new Router({\n  routes: [\n    {\n      path: '/',\n      name: 'HelloWorld',\n      component: HelloWorld\n    }\n  ]\n})\n```\n\næˆ‘ä»¬æ‹†åˆ†æˆè¿™æ ·ï¼š\n\n```\n//å®šä¹‰åŸºç¡€è·¯ç”±\nlet route = [\n  {\n    path: '/',\n    name: 'HelloWorld',\n    component: HelloWorld\n  }\n]\n\n//ä»¥æ­¤ç±»æ¨å¯ä»¥æ–¹ä¾¿çš„é“¾æ¥æ›´å¤šè·¯ç”±\nroute = route.concat(blogRoutes)\n\n//å¯¼å‡º\nexport default new Router({\n  routes: route,\n  linkActiveClass: 'active'\n})\n```\n\nå›è¿‡å¤´æ¥ï¼Œæˆ‘ä»¬ä¸º blog/index.vue æ·»åŠ ä¸€äº›å†…å®¹ï¼Œæµ‹è¯•ä¸€ä¸‹ï¼š\n\n```html\n<template>\n  <div class=\"Blog\">\n    <h1>{{ msg }}</h1>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Blog\",\n  data() {\n    return {\n      msg: \"Welcome to Your Blog Page\"\n    };\n  }\n};\n</script>\n```\n\n### æµ‹è¯•ä¸€ä¸‹\né¦–å…ˆ\n\n```\nnpm install\n```\nå«Œæ…¢å¯ä»¥ä½¿ç”¨æ·˜å®çš„ cnpm æˆ‘ä»¥å‰çš„æ–‡ç« è®²è¿‡\n\n```\nnpm run dev\n```\næŒ‰ç…§æç¤ºåœ¨æµè§ˆå™¨è¾“å…¥ï¼šhttp://localhost:8080/#/blog\n\n![](http://www.gitrue.com:9000/image/E8KvhAktGK)\n\n\n![](http://www.gitrue.com:9000/image/zrcDvwx3EO)\n\n*vue-cli2 webpack* ç”Ÿæˆçš„é¡¹ç›®æ˜¯æ”¯æŒ**çƒ­éƒ¨ç½²**çš„ï¼Œæ‰€ä»¥å¾ˆå¤šé…ç½®ä¸éœ€è¦è‡ªå·±ä»é›¶å¼€å§‹é…ç½®ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘å¸Œæœ›å¤§å®¶ä½¿ç”¨ *CLI* çš„åŸå› ï¼Œçœå»äº†ä¸€äº›æ—¶é—´ã€‚å…¶ä»– login ç­‰ä¸€äº›æ¨¡å— æŒ‰ç…§è¿™ä¸ªæ¨¡å¼å†™å°±å¯ä»¥äº†ã€‚\n\n### è°ˆè°ˆ *eslint*\nä¸ªäººè§‰å¾— *esLint* ä¸è®ºæ˜¯åœ¨ä¸ªäººé¡¹ç›®è¿˜æ˜¯å›¢é˜Ÿåä½œä¸­ï¼Œéƒ½æ˜¯æœ‰ä»·å€¼çš„ï¼Œå®ƒå¯ä»¥è®©è‡ªå·±ã€å›¢é˜Ÿçš„ä»£ç é£æ ¼æ ‡å‡†åŒ–ã€‚ç°åœ¨esLint ç”šè‡³å¯ä»¥é¢„æµ‹ä½ çš„ä»£ç æ˜¯å¦å¯èƒ½ä¼šæœ‰é—®é¢˜ã€‚å»ºè®®å¯ä»¥åˆ¶å®šä¸€äº›è§„åˆ™ï¼Œå¼€å‘æ—¶é€šè¿‡ä½ çš„ IDE(é›†æˆç¯å¢ƒ) ï¼š idea ã€WebStormã€ vscodeã€ ä¹‹ç±»çš„æ’ä»¶é…åˆæ£€æµ‹ï¼Œ*eslint* æ‰“åŒ…æ£€æµ‹ç¼–è¯‘ä¸é€šè¿‡çš„é‚£ç§éå¸¸ä¸¥æ ¼çš„åˆæœŸè¿˜æ˜¯ä¸è¦å°è¯•äº†ã€‚\n\næˆ‘å½“æ—¶å‚è€ƒ *airbnb* è°ƒæ•´çš„é…ç½®ï¼Œç»è¿‡ä¸€å¹´å¤šçš„é¡¹ç›®å®æˆ˜é€æ¸è°ƒæ•´ï¼Œç›®å‰è¿˜ç®—æ¯”è¾ƒåˆç†ï¼Œ[esLinté…ç½®è§„åˆ™ä»£ç åœ¨è¿™é‡Œ](https://github.com/pkwenda/Blog/tree/master/effective_config)ã€‚\n\n### [æœ¬ç« ä»£ç åœ¨è¿™é‡Œ](https://github.com/pkwenda/Blog/tree/master/code/web_project_course/start-vue-cli-2/new-bee)\nä½ ç”šè‡³å¯ä»¥å† [commit](https://github.com/pkwenda/Blog/commits/master) é‡Œçœ‹åˆ°æœ¬ç« å¾ªåºæ¸è¿›çš„æ”¹é€ è¿‡ç¨‹\n\n![](http://www.gitrue.com:9000/image/WRw02sYfvC)\n \n\n\n\n\n# Part 6 æ‰“ç£¨å‰ç«¯æ¶æ„\n\n\n\n\n## axios\n\nä½¿ç”¨äº† vue çš„ä½ ï¼Œå‘ç° Vue å±…ç„¶ä¸èƒ½å‘è¯·æ±‚ï¼Œäºæ˜¯ä½  Google äº†ä¸‹ï¼Œå‘ç°å¯ä»¥ç”¨ Vue-Resourceã€‚\nä½ å»é—®åˆ«äºº Vue-Resource æ€ä¹ˆæ ·ï¼Œä»–è¯´ä¸è¦ç”¨ Vue-Resourceï¼Œå› ä¸º Vue-Resource å®˜æ–¹å·²ç»åœæ­¢ç»´æŠ¤äº†ï¼Œä½ åº”è¯¥ç”¨ Axiosã€æˆ–è€… fetchã€‚ä½†æ˜¯æˆ‘ä»¬æƒ³æ‹¥æŠ± ES6 æ’é™¤æ‰äº† ES5çš„fetchï¼ˆå½“ç„¶ä¹Ÿæœ‰ES6-fetchï¼‰ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ Axiosï¼\n\n### Tips\n\n è¿™é‡Œå‘¢ä¹Ÿç§‘æ™®ä¸€ä¸‹ï¼šä»€ä¹ˆæ—¶å€™ä¾èµ–éœ€è¦æ”¾åˆ° dependenciesã€ä»€ä¹ˆæ—¶å€™ä¾èµ–éœ€è¦æ”¾åˆ° devDependenciesï¼š\n>devDependenciesï¼šé¡¾åæ€ä¹‰ï¼Œä»…åœ¨å¼€å‘ï¼ˆdevï¼‰æ¨¡å¼ä¸‹å¦‚ï¼šwebpack.*ã€*.loaderã€eslintã€babelã€æ‰“åŒ…åéƒ¨ç½²æ—¶å®Œå…¨ç”¨ä¸åˆ°çš„ã€ä»…åœ¨å¼€å‘éœ€è¦ ç¼–è¯‘ã€æ£€æµ‹ã€è½¬æ¢ çš„æ”¾åœ¨è¿™é‡Œã€‚\ndependenciesï¼šä¾‹å¦‚ï¼šaxiosã€chartã€js-cookieã€lessã€lodashã€underscoreç­‰è¿è¡Œæ—¶çš„åº“æˆ–å·¥å…·ç±»ç­‰ç›¸å…³ä¾èµ–æˆ‘ä»¬è¦æ”¾åœ¨è¿™é‡Œ\n\nä¸è¿‡åŸºæœ¬ä¸ç”¨æ‹…å¿ƒï¼Œå®˜ç½‘éƒ½ä¼šæä¾› start è¯´æ˜ï¼Œä½†æ˜¯æˆ‘ä»¬è¦å¤§æ¦‚æ˜ç™½æ„æ€ï¼Œä¸è¦æœºæ¢°èˆ¬çš„ copyã€‚\n\n### å¼•å…¥ Axios\n\n- ç›´æ¥ç©æœ€æ–°çš„\n![](http://www.gitrue.com:9000/image/yAj2OFgAnp)\n\n>*2018-09-28* æˆªå›¾ npmjs.com \n\n- æ·»åŠ ä¾èµ–\n\n```javascript\n\"dependencies\": {    \n    \"axios\": \"^0.18.0\"\n }\n```\n\n![](http://www.gitrue.com:9000/image/t1Uni8dXN2)\n\n> åŸºäºä¸Šä¸€ç« å†…å®¹,åˆ«å¿˜äº†é‡æ–° npm i ä¸‹è½½ä¸€ä¸‹\n\nè¿˜è®°å¾—æˆ‘ä»¬è‡ªåŠ¨ç”Ÿæˆçš„ vue ä¸»é¡µé¢è„šæœ¬ main.jså—ï¼Ÿ\n\n### å°è£…axios\n\næˆ‘ä»¬åœ¨ `src/renderer/utils` å»ºç«‹ä¸€ä¸ª `request.js` åœ¨è¿™ä¸ªè¯·æ±‚è„šæœ¬ä¸­ï¼Œå¯¹ Axios åšä¸€äº›å¿…è¦çš„å°è£…ï¼Œå¤§æ¦‚å†…å®¹æ˜¯ç”¨ æ‹¦æˆªå™¨ axios.interceptors å¯¹è¯·æ±‚å’Œå“åº”åšäº›æ‹¦æˆªï¼Œå®šä¹‰ä¸€ä¸‹ API çš„å‰ç¼€ï¼Œå¤„ç†ä¸€äº›å¸¸è§çš„ HTTP çŠ¶æ€ç ã€‚\n\n- interceptors æ–‡æ¡£\n\n![](http://www.gitrue.com:9000/image/HdxeeDV1WT)\n\næˆ‘å°½å¯èƒ½çš„ä¸ºå¤§å®¶å†™äº†è¯¦ç»†çš„æ³¨é‡Šã€‚ \n\n\n```javascript \n// src/renderer/utils/request.js\nimport axios from 'axios'\n\n//è¿™é‡Œä¸€èˆ¬æŒ‡åç«¯é¡¹ç›®APIçš„å‰ç¼€ï¼Œä¾‹å¦‚ /baidu/*/*/1.api  /mi/*/*/2.api\nconst BASE_API = \"\"\n\nexport function axiosIntercept(Vue, router) {\n    const axiosIntercept = axios.create({\n        baseURL: BASE_API\n    })\n\n    //http request æ‹¦æˆªå™¨ ä¸€èˆ¬ç”¨æ¥åœ¨è¯·æ±‚å‰å¡ä¸€äº›å…¨å±€çš„é…ç½®ã€æˆ–å¼€å¯ä¸€äº› css åŠ è½½åŠ¨ç”»\n    axiosIntercept.interceptors.request.use(\n        (config) => {\n            // åˆ¤æ–­æ˜¯å¦å­˜åœ¨tokenï¼Œå¦‚æœå­˜åœ¨çš„è¯ï¼Œåˆ™æ¯ä¸ªhttp headeréƒ½åŠ ä¸Štoken\n            // if (store.getters.accessToken) {\n            //     console.log(store.getters.accessToken)\n            //     config.headers.Authorization = `token ${store.getters.accessToken}`;\n            // }\n\n            //todo:åŠ è½½åŠ¨ç”»\n\n            //è‹¥æœ‰éœ€æ±‚å¯ä»¥å¤„ç†ä¸€ä¸‹ post äº¦æˆ–æ”¹å˜postä¼ è¾“æ ¼å¼\n            if (config.method === 'post') {\n\n            };\n\n            return config;\n        }, function (err) {\n            return Promise.reject(err);\n        });\n\n\n    //http response æ‹¦æˆªå™¨ ä¸€èˆ¬ç”¨æ¥æ ¹æ®ä¸€äº›åç«¯åè®®ç‰¹æ®Šè¿”å›å€¼åšä¸€äº›å¤„ç†ï¼Œä¾‹å¦‚ï¼šæƒé™æ–¹é¢ã€404... æˆ–å…³é—­ä¸€äº› css åŠ è½½åŠ¨ç”»\n    axiosIntercept.interceptors.response.use(function (response) {\n        // todo: æš‚åœåŠ è½½åŠ¨ç”»\n        return response;\n    }, function (err) {\n        //æ•è·å¼‚å¸¸\n        if (err.response) {\n            switch (err.response.status) {\n                case 401:\n                    // do something è¿™é‡Œæˆ‘ä»¬å†™å®Œåç«¯åšå¥½çº¦æŸå†å®Œå–„\n            }\n        }\n        return Promise.reject(err);\n    });\n    return axiosIntercept;\n}\n\n\n```\n\nå¤§å®¶è¿˜è®°å¾—æˆ‘ä»¬ç”¨ vue-cli ç”Ÿæˆçš„ vue ä¸»é¡µè„šæœ¬ main.js å§ï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦å¯¹ Axios å’Œ Vue åšä¸€ä¸ªè€¦åˆã€‚\n\n```javascript \n// src/renderer/main.js\nimport axios from 'axios'\nimport { axiosIntercept } from './utils/request'\n\n// å°†Axiosæ‰©å±•åˆ°VueåŸå‹é“¾ä¸­\nVue.prototype.$http = axiosIntercept(Vue)\n```\nè¿™æ ·æˆ‘ä»¬åœ¨å†™ä¸šåŠ¡é€»è¾‘ï¼Œç›´æ¥åœ¨ Vue çš„ä¸Šä¸‹æ–‡ä¸­ ä½¿ç”¨ this.$http æ¥å‘é€è¯·æ±‚ã€‚æ—¢å®ç°äº†æ‹¦æˆªã€åˆå®ç°äº†çŠ¶æ€çš„å…±äº«ã€‚\n\n**çŸ¥å…¶ç„¶ï¼ŒçŸ¥å…¶æ‰€ä»¥ç„¶** \n\n- è¿™æ ·åšçš„æ„ä¹‰åœ¨å“ªï¼Ÿ\n\n> èŠ‚çœä»£ç é‡ï¼Œè®©ä»£ç æ›´åŠ æ˜“è¯»\n\n- ä¸ºä»€ä¹ˆï¼Ÿ\n\n> æ‰©å±•åˆ°åŸå‹é“¾ï¼Œä½¿ Axios è¿è¡Œæ—¶å…±äº« Vue åŸå‹é“¾çš„å†…å®¹ï¼Œå‡å°‘äº†å¾ˆå¤šæŒ‡ä»£ Vue çš„ä¸´æ—¶å˜é‡\n\n- ä¸¾ä¸ªæ —å­\n\nä¼ ç»Ÿæƒ…å†µ\n\n```javascript\nimport axios from 'axios'\n\n\nnew Vue({\n  data: {\n    user: \"\"\n  },\n  created: function () {\n    //æ­¤æ—¶ä½œç”¨åŸŸåœ¨ Vue ä¸Š,ç¼“å­˜èµ·æ¥,è¦ä¾èµ–æ­¤å˜é‡\n    let _this = this;\n    axios.get(\"/user/getUserInfo/\" + userName).then(res => {\n            if (res.data.code === 200) {\n                //æ­¤æ—¶ä½œç”¨åŸŸåœ¨axiosä¸Šï¼Œæ‹¿ä¸åˆ°vueç»‘å®šçš„å€¼ï¼Œåªèƒ½å€ŸåŠ©åˆšæ‰ç¼“å­˜çš„_thisä¸Šä¸‹æ–‡\n                _this.data.user = res.data.user\n            }\n        });\n    }\n})\n\n```\n\nä»£ç†ä¹‹å\n\n\n```javascript\n \n\n\nnew Vue({\n  data: {\n    user: \"\"\n  },\n  created: function () {\n    // axios æˆä¸ºäº† vue çš„åŸå‹é“¾ä¸€éƒ¨åˆ†ï¼Œå…±äº«vueçŠ¶æ€ã€‚\n    \n    this.$http.get(\"/user/getUserInfo/\" + userName).then(res => {\n            if (res.data.code === 200) {\n                //æ³¨æ„ï¼Œaxioså›è°ƒï¼Œåº”è¯¥å°½é‡ä½¿ç”¨ç®­å¤´å‡½æ•°ï¼Œå¯ä»¥ç»§æ‰¿çˆ¶ç±»ä¸Šä¸‹æ–‡ï¼Œå¦åˆ™ç±»ä¼¼é—­åŒ…ï¼Œè¿˜æ˜¯æ— æ³•å…±äº«å˜é‡ã€\n                // æ›´ä¼˜é›…äº†ä¸€äº›\n                this.data.user = res.data.user\n            }\n        });\n    }\n})\n\n```\n\n> ä¸æ‡‚ prototype å¯ä»¥ç¿»ç¿»æˆ‘ä»¥å‰å†™çš„æ–‡ç« \n\n\n\n### proxy\nå…ˆç®€å•å¼„ä¸€ä¸‹ï¼Œä¸ºå‰ååˆ†ç¦»æ‰“ä¸ªå°é“ºå«\n\n\n\n### webPack\n\n- webPack çš„åˆ«å\n\n```javascript\nresolve: {\n    extensions: ['.js', '.vue', '.json'],\n    alias: {\n      '@': resolve('src/renderer'),\n    }\n  },\n```\n\n ä¸ºäº†ä½¿ç”¨èµ·æ¥æ›´åŠ ä¼˜é›…ï¼Œå¯ä»¥ä¸ºæ¯ä¸ªå¸¸ç”¨çš„ç›®å½•éƒ½å»ºç«‹åˆ«å\n \n ```javascript\n resolve: {\n    extensions: ['.js', '.vue', '.json'],\n    alias: {\n      'vue$': 'vue/dist/vue.esm.js',\n      '@': resolve('src/renderer'),\n      'assets': resolve('src/renderer/assets'),\n      'components': resolve('src/renderer/components'),\n      'container': resolve('src/renderer/container'),\n      'utils': resolve('src/renderer/utils')\n    }\n  },\n ```\n\n\n### ç”Ÿäº§å’Œå¼€å‘çš„è·¨åŸŸé—®é¢˜\n![](http://www.gitrue.com:9000/image/FmnXlXtCnK)\n\ndev æ˜¯å¼€å‘æ—¶å¯åŠ¨çš„æŒ‡ä»¤\nbuild æ˜¯é¢„å‘å¸ƒæ—¶ webPack æ‰“åŒ…çš„æŒ‡ä»¤\n\nå‡è®¾ç¬”è€…åªæ˜¯ä¸€ä¸ªå‰ç«¯ï¼Œé€šå¸¸å‘¢ï¼Œåœ¨å¼€å‘è°ƒè¯•è¿‡ç¨‹å½“ä¸­ï¼Œæ— æ³•é¿å…éœ€è¦ä¸åç«¯çš„åŒå­¦è¿›è¡Œ API çš„å¯¹æ¥ï¼Œé‚£ä¹Ÿå°±éš¾å…ä¼šå‡ºç°è·¨åŸŸé—®é¢˜ã€‚å½“ç„¶ä¼ ç»Ÿ javaWeb ä¸éœ€è¦è·¨åŸŸï¼Œ(ip åŸŸ ç«¯å£ ä»»ä½•ä¸€ä¸ªä¸åŒçš†ä¸ºè·¨åŸŸ) åœ¨ DEV æ¨¡å¼è°ƒè¯•ä¸­ï¼Œæˆ‘ä»¬éƒ½æ˜¯å°½é‡é€‰æ‹©å‰ç«¯ç¯å¢ƒè§„é¿è·¨åŸŸé—®é¢˜ï¼Œè€Œä¸ä¼šå»é¢å¤–æ­å»º nginx æˆ–æ›´æ”¹åç«¯ä»£ç ã€‚\n\nè·¨åŸŸåªæ˜¯é’ˆå¯¹ JavaScript çš„ï¼Œå› ä¸ºå¼€å‘è€…è®¤ä¸ºæµè§ˆå™¨ä¸Šçš„è„šæœ¬æ˜¯ä¸å®‰å…¨çš„ã€‚\n\næ—¢ç„¶æˆ‘ä»¬çš„ vue é¡¹ç›®æ˜¯ node å…¨å®¶æ¡¶ï¼Œä¾é  nodeã€webPack ç¼–è¯‘ æˆ‘ä»¬ç›´æ¥é…ç½® node çš„ proxyTable ä½œä¸ºå¼€å‘çš„ä»£ç†å™¨ï¼Œè¿™æ ·æœ€ç®€å•ï¼Œä¾æ¬¡é…ç½®ï¼Œå›¢é˜Ÿå—ç›Šã€‚\n\n\n\n\n#### cnode æ˜é‡‘ ç¤¾åŒº API ä¸¾ä¾‹\n\nhttps://cnodejs.org/api\nä¸Šè¾¹cnode çš„ API æ˜¯å¯ä»¥éšæ„è°ƒç”¨çš„ï¼Œå› ä¸ºåç«¯åšäº†å¤„ç†ã€‚\n\nçœ‹çœ‹æ˜é‡‘çš„ï¼š\nhttps://xiaoce-timeline-api-ms.juejin.im/v1/getListByLastTime?src=web&pageNum=1\nè¯·æ±‚ä¸€ä¸‹ï¼Œä¸å‡ºæ„å¤–æµè§ˆå™¨åšäº†è·¨åŸŸæŠ¥è­¦ã€‚\n![](http://www.gitrue.com:9000/image/3QhU14XFTF)\n\nå“¦ï¼Œæˆ‘ä»¬é€‚é…ä¸€ä¸‹ node ä»£ç†\n\nå®˜æ–¹ä¾‹å­åœ¨è¿™ï¼š\nhttps://vuejs-templates.github.io/webpack/proxy.html\n\næ‰©å±•ä¸€ä¸‹ proxyTableï¼š\n\n```javascript\n\nproxyTable: [{\n      //æ‹¦æˆªæ‰€æœ‰v1å¼€å¤´çš„xhrè¯·æ±‚\n      context: ['/v1'], \n      target: \"https://xiaoce-timeline-api-ms.juejin.im\",\n      cookieDomainRewrite: {\n        // ä¸ç”¨cookie\n      },\n      changeOrigin: true,//é‡ç‚¹ï¼Œæ­¤å¤„æœ¬åœ°å°±ä¼šè™šæ‹Ÿä¸€ä¸ªæœåŠ¡æ›¿æˆ‘ä»¬æ¥å—æˆ–è½¬å‘è¯·æ±‚\n      secure: false\n    }],\n\n```\n\nå†æ¬¡å‘é€è¯·æ±‚ã€‚\n\n- æ„‰å¿«çš„æ‹¿åˆ°äº†æ•°æ®\n\n![](http://www.gitrue.com:9000/image/ryhYwQT89O)\n\nè¿™æ ·ï¼Œå‰ååˆ†ç¦»çš„é¡¹ç›®å¯ä»¥è¿™æ ·å€ŸåŠ© swagger æµ‹è¯•æ¥å£ï¼Œä¸éœ€è¦éªšæ‰°ä»»ä½•äººã€‚å®ç°è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘ï¼Œç®€å•å®ç°ä¸€ç‚¹ã€‚\n![](http://www.gitrue.com:9000/image/whDpNZImMv)\n\nä»£ç :\n\n```javascript\n// blog/index.vue\n<template>\n  <div class=\"Blog\">\n    <h1>{{ msg }}</h1>\n  <div v-for=\"(blog,index) in blogList\" v-bind:key=\"index\">\n    <h3 >\n      <a :href=\"`https://juejin.im/book/`+blog.id\" >\n        <span>{{blog.title}}</span>\n      </a>\n      </h3>\n  </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Blog\",\n  data() {\n    return {\n      msg: \"æ˜é‡‘å°å†Œä¸€è§ˆ\",\n      blogList: []\n    };\n  },\n  created() {\n    this.getBlog();\n  },\n  methods: {\n    getBlog() {\n      this.$http.get(\"/v1/getListByLastTime?src=web&pageNum=1\").then(res => {\n        this.blogList = res.data.d;\n      });\n    }\n  }\n};\n</script>\n```\n\n\n#### å‘å¸ƒ\n\n- æ‰«ç›²\n\nå†™å®Œä»£ç ä¹‹åéƒ¨ç½²åˆ°çº¿ä¸Šï¼Œæ˜¯ä¸ä¼šåœ¨çº¿ä¸Š clone ä»£ç ä¹‹å Npm run dev çš„ğŸ˜†ï¼Œé‚£æ ·ä¼šæœ‰å¤ªå¤šå¤ªå¤šçš„åƒåœ¾ä¾èµ–ï¼Œä¸ºç”¨æˆ·å¸¦æ¥äº†ç¾éš¾æ€§çš„ç½‘ç»œè¯·æ±‚ï¼Œé€šå¸¸å€ŸåŠ©webPackæ‰“åŒ…ä¹‹åå‘å¸ƒåˆ°æœåŠ¡å™¨çš„webæœåŠ¡å½“ä¸­ã€‚\n\nè¿è¡Œ\n\n```\n npm run build\n```\n\n![](http://www.gitrue.com:9000/image/GCxys1jfzU)\n\næ‰“åŒ…ç›®å½•æ˜¯ä¹‹å‰é…ç½®çš„webpack\n\n\n![](http://www.gitrue.com:9000/image/aqi8o2otzo)\n\n![](http://www.gitrue.com:9000/image/z87CykBv3r)\n\n\nå¥½äº†ï¼Œå¾ˆå¤šäººç›´æ¥åŒå‡» index.html æ˜¯ä¸è¡Œçš„ã€‚\n>Tip: built files are meant to be served over an HTTP server.\n  Opening index.html over file:// won't work.\n  \néœ€è¦ http æœåŠ¡å¯åŠ¨ï¼Œå¯ä»¥æ‰”åˆ°æœ¬åœ°æˆ–æœåŠ¡å™¨çš„ nginxã€apacheã€tomcatç­‰å®¹å™¨æµ‹è¯•ï¼Œæˆ‘é€šå¸¸ä½¿ç”¨ python å¯åŠ¨ä¸€ä¸ª http æœåŠ¡æ¥è¿è¡Œï¼ˆè„šæœ¬åœ°å€ï¼‰ã€å½“ç„¶,è‡ªå·± ide æ”¯æŒ http å¯åŠ¨ä¹Ÿå¯ä»¥ã€‚\n\n#### ç”Ÿäº§ä¸­çš„è·¨åŸŸ\n\nç”Ÿäº§å½“ä¸­ï¼Œå› ä¸ºå‰ç«¯åç«¯å¿…ç„¶ä¸åŒç«¯å£ï¼Œé¿å…è·¨åŸŸï¼Œé€šå¸¸ä½¿ç”¨ nginx çš„æ­£å‘/åå‘ä»£ç†ä½œä¸ºè·¨åŸŸçš„æ‰‹æ®µã€‚ï¼ˆå¹¶éè´Ÿè½½å‡è¡¡ï¼Œä¸¤ä¸ªæ¦‚å¿µï¼‰\n\n```\nserver {\n        listen       80;\n        server_name  localhost;\n \n        location ^~ /v1 {\n        proxy_pass              https://xiaoce-timeline-api-ms.juejin.im;#ä»£ç†ã€‚\n        proxy_set_header        X-Real-IP $remote_addr;#è½¬å‘å®¢æˆ·ç«¯çœŸå®IP\n        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header        Host $http_host;\n        }\n }       \n```\n\nç®€å•é…ç½®ä¸€ä¸‹å°±å¯ä»¥äº†ï¼Œä¸å¤šè®²ï¼Œå‰ç«¯åŒå­¦äº†è§£ä¸€ä¸‹å°±å¯ä»¥äº†ï¼Œnginx èƒ½å¹²çš„äº‹æƒ…è¿˜æœ‰å¾ˆå¤šã€‚\n\n### API çš„è§„èŒƒåŒ–\nä½ æ˜¯å¦ä¸ºäº†æ‰¾æŸä¸€ä¸ªä¸šåŠ¡çš„æ¥å£å¤´ç—›\nä½ æ˜¯å¦è¿˜åœ¨ä½¿ç”¨å…¨å±€æœç´¢æ‰¾è‡ªå·±çš„æ¥å£\nä½ æ˜¯å¦æŸä¸€ä¸ªæ¥å£ä¸åŒç»„ä»¶é‡å¤å†™äº†å¤šæ¬¡\næ•´ç†ä¸€ä¸‹è‡ªå·±çš„æ¥å£å§ï¼Œåƒä¸Šæ–‡çš„ router ä¸€æ ·æ•´é½çš„åˆ’åˆ†å§ã€‚\n\n![](http://www.gitrue.com:9000/image/0nbBt8l1Tc)\n\n\n/renderer ä¸‹å»ºç«‹ä¸€ä¸ª api çš„æ–‡ä»¶å¤¹\n\n![](http://www.gitrue.com:9000/image/rYiDinlXNv)\n\nwebpack.base.conf.js æ·»åŠ ä¸€æ¡ api çš„åˆ«åï¼Œæ–¹ä¾¿æˆ‘ä»¬æ—¥åå¤§é‡è°ƒç”¨\n\n\n```\n'api': resolve('src/renderer/api')\n```\n\næˆ‘ä»¬å»ºç«‹ /renderer/api/juejin.js\n\n```javascript\n\nimport axios from 'axios'\n\nlet Api = Function()\n\nApi.prototype = {\n    getBlog(page, fn) {\n        axios.get(`/v1/getListByLastTime?src=web&pageNum=${page}`).then(res => {\n            // if (res.data.code === 200) {\n            fn(res.data)\n            // }\n        }).error()\n    }\n}\nexport default new Api()\n\n\n```\n\nä¿®æ”¹ä¸€ä¸‹æˆ‘ä»¬åˆšæ‰ /blog/index.vue çš„ Axios è¯·æ±‚ï¼š\n\n- å…ˆå¼•å…¥ api\n\n```\nimport juejin from \"@/api/juejin\";\n```\næ³¨æ‰ä¹‹å‰ç¦»æ•£çš„ axios ï¼Œä½¿ç”¨ä» api ä¸­å®šä¹‰è¿‡çš„ XHR è¯·æ±‚æ•°æ®ã€‚\n\n```javascript\ngetBlog() {\n      // this.$http.get(\"/v1/getListByLastTime?src=web&pageNum=1\").then(res => {\n      //   this.blogList = res.data.d;\n      // });\n      juejin.getBlog(\"1\", response => {\n        this.blogList = response.d;\n      });\n    }\n```\n\n![](http://www.gitrue.com:9000/image/NEEExyDHOY)\n\n\n# Part 7 å¿«é€Ÿæ„å»ºç½‘ç«™å¸ƒå±€\n\n\n\n \næœ¬æ–‡ä¸ºæ–¹ä¾¿è®²è¿°é‡æ„å»é™¤äº† Elementã€vux åº“ï¼Œç”¨äº†æœ€è¿‘æ¯”è¾ƒç«çš„ bulma è½»é‡ã€å¿«æ·ã€æ˜“è¯»ã€‚\n\n![2018-11-22-15.58.03.gif](http://www.gitrue.com:9000/image/qNfc2oEEyR)\n\n> é¡¹ç›®æˆªå±\n### Layout and Components\n\n![design_web_layout.png](http://www.gitrue.com:9000/image/mUiW85X1C5)\n\n#### Layout\n\né¦–å…ˆï¼Œä¼¼ä¸Šå›¾ï¼Œæˆ‘ä»¬æ€è€ƒæŠŠä¸€ä¸ªå°å‹ç½‘ç«™æ‹†æˆä¸‰éƒ¨åˆ†ï¼šé¡µå¤´(Header)ã€å†…å®¹(Content)ã€é¡µè„š(Footer) è¿™å‡ ä¹æ¯ä¸ªç½‘ç«™å†…éƒ½å¿…é¡»æœ‰çš„ï¼Œé€šå¸¸æŠŠä¸‡å¹´ä¸å˜çš„ï¼šé¡µå¤´(Header)ã€é¡µè„š(Footer) åˆ¶ä½œæˆ Layout æ–¹ä¾¿é€šç”¨ã€‚\n\n#### Components\n\n\nå†æŠŠå†…å®¹(Content)æ ¹æ®ä¸šåŠ¡è¿›è¡Œæ‹†åˆ†æˆ ç»„ä»¶(Components)\n\n![1A8A610A-E0AF-4794-96B0-D38B0C39D585.jpg](http://www.gitrue.com:9000/image/YbKmDWEZ46)\n\nå¦‚ä¸Šå›¾ï¼šHeader å’Œ Content ï¼šHeaderå…¶å®æ²¡æœ‰æ‹†åˆ†çš„å¿…è¦ï¼Œæ²¡æœ‰å¯ä»¥é‡ç”¨çš„ç»„ä»¶ï¼Œè€Œ Conntent æ˜¯å¿…é¡»è¦æ‹†åˆ†çš„å¸ƒå±€å…ƒç´ ã€‚å› ä¸ºåŠ¨æ€ç½‘ç«™ Conntent éšç€å†…å®¹çš„å˜åŒ–è€Œå˜åŒ–ï¼Œå†…å®¹å¤šï¼Œå¯é‡ç”¨çš„ä¸œè¥¿çš„æ¦‚ç‡è¶Šé«˜ï¼Œéœ€è¦æŠŠèƒ½é‡ç”¨çš„ä¸œè¥¿æç‚¼å‡ºæ¥\n\n1ã€èŠ‚çœä»£ç ã€æé«˜ä»£ç é˜…è¯»æ€§\n\n2ã€ä¾¿äºä¿®æ”¹ ï¼ˆæ¯”å¦‚æ›´æ–°å¹¿å‘Šï¼‰\n\n\n## å¼€å§‹å†™ä»£ç \n\næ¥ç€æˆ‘ä»¬çš„ [ç¬¬äºŒç« ä¸Šä¼ çš„æºç ](https://github.com/pkwenda/Blog/tree/master/code/web_project_course/2-complete_project/new-bee) å¼€å§‹ï¼ŒåŸºäºå®ƒç»§ç»­å®Œå–„å°ç½‘ç«™å¸ƒå±€å’Œç»„ä»¶åŒ–ã€‚\n\n> å€¼å¾—ä¸€æçš„æ˜¯ï¼šæœ¬ç³»åˆ—æ•™ç¨‹ä¸€ç« è·Ÿéšä¸€ç« å¹¶ä¸”æ¯ä¸€ç« å¯ä»¥ç‹¬ç«‹è¿è¡Œï¼Œç« ä¸ç« ä¹‹é—´å®Œç¾è¡”æ¥ï¼Œæ²¡æœ‰ â€œçªç„¶å‡ºç°â€ çš„ä»£ç æ®µã€‚ä¸ä¼šç»™æ–°æ‰‹æ— ä»ä¸‹æ‰‹çš„æ„Ÿè§‰ï¼Œå¦‚æœé‚£ä½ å¯¹ä»£ç é™Œç”Ÿï¼Œé‚£ä½ è¯¥è®¤çœŸç¿»ç¿»å¾€æœŸæ–‡ç« äº†ã€‚ä½ å¯ä»¥åŸºäºä¸Šä¸€ç« é€æ­¥å†™ä»£ç ï¼Œä¹Ÿå¯ä»¥ä¸‹è½½æœ¬ç« ç®€å•é¢„è§ˆä»£ç ã€‚\n\n- å¼•å…¥ bulma æ ·å¼ CDN \n\n```\nvim new-bee/index.html\n```\n\n```\n\n <!-- font -->\n  <link href=\"//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css\" rel=\"stylesheet\">\n  <!-- css -->\n  <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/bulma/0.6.0/css/bulma.min.css\">\n\n```\n\n- æ–°å»º Layout ç›®å½•\n\n```\nvim new-bee/src/renderer/components/layout\n```\n\n- Layout ç›®å½•ä¸‹å»ºç«‹ Header.vue æ¨¡æ¿ç»„ä»¶\n\n\nè¿™ä¸ªç»„ä»¶ä¸“é—¨å†™å¤´éƒ¨çš„å†…å®¹ï¼Œæœ€å¥½é…åˆæ …æ ¼å°½å¯èƒ½å†™å‡ºç®€å•çš„å“åº”å¼ç»„ä»¶\n\n```html\n<template>\n\n    <div id=\"bee-header\"   element-loading-text=\"æ­£åœ¨åŠªåŠ›è¯·æ±‚github...\" element-loading-background=\"rgba(0, 0, 0, 0.8)\">\n        <!-- é®ç½© -->\n        <div  :class=\"  loading ? `modal is-active` : `modal` \" style=\"background-color: #ffffff36\">\n                < img src=\"https://img.actd.tw/images/2018/11/17/ez-4-05f4bba41fef\" style=\"width: 300px\" alt=\"\">\n        </div>\n\n        <div class=\"is-underline \">\n    <div class=\"container\">\n      <nav class=\"navbar \">\n        <div class=\"navbar-brand\">\n          <a class=\"navbar-item\"   >\n            < img src=\"https://img.actd.tw/images/2018/11/17\" alt=\"Bulma: a modern CSS framework based on Flexbox\" width=\"92\" height=\"28\">\n          </a >\n          <div class=\"login-before is-hidden-mobile\" style=\"padding-top: 5px;\">\n            <a class=\"navbar-item is-hidden-desktop\" href=\" \" target=\"_blank\">\n              <span class=\"icon\" style=\"color: #333;\">\n                <i class=\"fa fa-lg fa-github is-size-2\"></i>\n              </span>\n            </a >\n          </div>\n          <div class=\"navbar-item is-hidden-desktop \">\n             <div class=\"field has-addons\"  ><div class=\"control\" ><input   type=\"input\" class=\"input\" name=\"email\" placeholder=\"æœç´¢ä¸€ä¸‹\" required=\"required\" style=\"height: 36.4px;width:130px\"><input   type=\"hidden\" name=\"redirect\" id=\"name\" value=\"/fr/#thanks\"></div><div class=\"control\"  ><input  type=\"submit\" class=\"button is-warning\" value=\"GO\"></div></div>\n          </div>\n           \n          <div class=\"navbar-burger burger\" data-target=\"navMenuDocumentation\" >\n            <span></span>\n            <span></span>\n            <span></span>\n          </div>\n        </div>\n\n        <div id=\"navMenuDocumentation\" class=\"navbar-menu\">\n          <div class=\"navbar-start\">\n            <div class=\"navbar-item has-dropdown is-hoverable\">\n              <a class=\"navbar-link  is-active\">\n                å‘ç°\n              </a >\n              <div class=\"navbar-dropdown \">\n                <a class=\"navbar-item \" type=\"æ”¶è—é›†\">\n                  æ”¶è—é›†\n                </a >\n                <a class=\"navbar-item\" type=\"å¾½ç« \">\n                  å¾½ç« \n                </a >\n                <a class=\"navbar-item \" type=\"æ’å\">\n                  æ’å\n                </a >\n                <a class=\"navbar-item \"  type=\"èŒåœºç”Ÿæ´»\">\n                  èŒåœºç”Ÿæ´»\n                </a >\n              </div>\n            </div>\n            <a class=\"navbar-item \" href=\"https://bulma.io/expo/\">\n              <!--<span class=\"bd-emoji\">â­ï¸</span>-->\n              ä¸“æ \n            </a >\n            <a class=\"navbar-item \" href=\"https://bulma.io/expo/\">\n              <!--<span class=\"bd-emoji\">â­ï¸</span>-->\n              èŠå¤©\n              <!-- å¾ˆå¤šäººä¸çŸ¥é“å¹²ä»€ä¹ˆã€‚ã€‚ã€‚ -->\n            </a >\n            <a class=\"navbar-item \" href=\"https://bulma.io/expo/\">\n              <!--<span class=\"bd-emoji\">â­ï¸</span>-->\n              é¢ç»\n            </a >\n            <router-link class=\"navbar-item \" to=\"/book\">\n              <!--<span class=\"bd-emoji\">â¤ï¸</span>-->\n              ä¹¦ç±\n            </router-link>\n          </div>\n\n          <div class=\"navbar-end\">\n            <div class=\"login-before\" style=\"padding-top: 5px;\">\n              <!-- pc -->\n              <a class=\"navbar-item is-hidden-desktop-only\" href=\"https://github.com/pkwenda/my-bbs\" target=\"_blank\">\n                <span class=\"icon\" style=\"color: #333;\">\n                  <i class=\"fa fa-lg fa-github is-size-2\"></i>\n                </span>\n              </a >\n            </div>\n\n            <div class=\"navbar-item is-hidden-mobile \">\n               <div class=\"field has-addons\"  ><div class=\"control\" ><input   type=\"input\" class=\"input\" name=\"email\" placeholder=\"æœç´¢ä¸€ä¸‹\" required=\"required\" style=\"height: 36.4px;\"><input   type=\"hidden\" name=\"redirect\" id=\"name\" value=\"/fr/#thanks\"></div><div class=\"control\"  ><input  type=\"submit\" class=\"button is-warning\" value=\"GO\"></div></div>\n            </div>\n\n            <div class=\"navbar-item is-hidden-mobile \">\n              <!--<span class=\"icon is-medium\">-->\n              <i class=\"iconfont icon-tixing\"></i>\n              <!--</span>-->\n            </div>\n\n               \n            <div class=\"navbar-item has-dropdown is-hoverable\">\n              <a class=\"is-hidden-mobile\"  target=\"_blank\">          \n              < img src=\"https://avatars2.githubusercontent.com/u/14212375?s=400&u=dc515636befebfda36501309d1cdc087ee31d500&v=4\" class=\" header-avatar img-circle \"\n                                  style=\"margin-top: 10px\">\n              </a >\n              <div class=\"navbar-dropdown \">\n                <a class=\"navbar-item \" type=\"æ”¶è—é›†\">\n                  å†™æ–‡ç« \n                </a >\n                <a class=\"navbar-item\" type=\"å¾½ç« \">\n                  è®¾ç½®\n                </a >\n                <a class=\"navbar-item \" type=\"æ’å\">\n                  é€€å‡º\n                </a >\n              </div>\n            </div>   \n            \n \n           \n            <div class=\"login-before\">\n              <div class=\"navbar-item\">\n                <div class=\"field is-grouped\">\n                 \n                  <p class=\"control\">\n                    <a class=\"button is-warning\"  v-show=\"!isLogin\"  >\n                      <strong>ç™»å½•</strong>\n                    </a >\n\n                  </p >\n\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </nav>\n    </div>\n  </div>\n    </div>\n</template>\n\n\n<script>\nexport default {\n  name: \"BeeHeader\",\n\n  data() {\n    return {\n      popupShow: false,\n      isLogin: false,\n      user: {},\n      loading: false,\n      userInfo: {}\n    };\n  },\n  created() {},\n  destroyed() {},\n  mounted() {},\n  methods: {}\n};\n</script>\n\n<style scoped>\n.img-circle {\n  -webkit-border-radius: 50%;\n  -moz-border-radius: 50%;\n  border-radius: 50%;\n}\n</style>\n\n```\n\n### ä»€ä¹ˆæ ·å¼å¯ä»¥å†™åœ¨ .vue æ–‡ä»¶ä¸­\n\nä¸Šæ–‡çš„æ¯”è¾ƒç†Ÿæ‚‰çš„ä»£ç æ˜¯è®©æˆ‘ä»¬çš„å¤´åƒå˜åœ†çš„ä»£ç æ®µ\n\n```\n<style scoped>\n.img-circle {\n  -webkit-border-radius: 50%;\n  -moz-border-radius: 50%;\n  border-radius: 50%;\n}\n```\n\n- æ•ˆæœ\n\n![-2018-11-22-18.45.39.png](http://www.gitrue.com:9000/image/OLflLsApEN)\n\nè¿™é‡Œæˆ‘å·äº†ä¸ªæ‡’ï¼Œåˆšå¥½å¯ä»¥è¯´ä¸€è¯´ï¼Œå¯¹äºå¦‚æ­¤é€šç”¨çš„æ ·å¼ï¼Œå±€é™åœ¨ .vueæ–‡ä»¶ä¸­ï¼Œå¹¶ä¸”ä»¥ scoped æ ‡ç¤ºï¼Œå®£åˆ¤äº†å®ƒæ— æ³•å¤ç”¨çš„äº‹å®ï¼Œä»»ä½•æ¨¡å—æƒ³ç”¨è¿™ä¸ªæ ·å¼ï¼Œéƒ½éœ€è¦å¤åˆ¶ä¸€ä»½ï¼Œæ˜¾ç„¶æ˜¯ä¸è§„èŒƒçš„ï¼Œæˆ‘ä»¬é€šå¸¸è¿˜ä¼šå»ºç«‹é€šç”¨çš„ css æ–‡ä»¶è¿›è¡Œç®¡ç†ï¼Œå¤§å‹é¡¹ç›® css ç®¡ç†è§„èŒƒå°†æ›´åŠ ä¸¥æ ¼ã€è§„èŒƒçš„æ ‘çº§ç»“æ„ï¼Œå…·ä½“å°±çœ‹ CTO çš„æƒ³æ³•äº†ã€‚\n\n\n### æ ¹æ®å–œå¥½é€‰æ‹©å¦‚ä½•å¸ƒå±€\n\n#### æŒ‰éœ€å¼•å…¥\n\n```\nvim new-bee/src/renderer/components/HelloWorld.vue\n```\n\n```\n<template>\n    <div>\n   <Header></Header>\n     <!--<div class=\"container\"> </div>-->\n    </div>\n</template>\n\n<script>\nimport Header from \"@/components/layout/Header\";\nexport default {\n  name: \"NewBeeIndex\",\n  components: { Header },\n  data() {\n    return {};\n  },\n\n  destroyed() {},\n  mounted() {},\n  methods: {},\n  watch: {}\n};\n</script>\n```\n\nç¼ºç‚¹æ˜¯è¦ä¸€ä¸ªä¸€ä¸ªå¼•å…¥ï¼Œä½†ä¼˜ç‚¹æ˜¯ä»£ç å¯è¯»æ€§é«˜\n\n#### å…¨å±€å¼•å…¥\n\n- App ä¸»å…¥å£\n\n```\nvim  new-bee/src/renderer/App.vue\n```\n\n- å¼•å…¥\n\n```html\n<template>\n  <div id=\"app\">\n     <Header></Header>\n    <!-- < img src=\"./assets/logo.png\"> -->\n    <router-view/>\n  </div>\n</template>\n\n<script>\nimport Header from \"@/components/layout/Header\";\nexport default {\n  name: \"App\",\n  components: { Header }\n};\n</script>\n\n<style>\n</style>\n\n\n```\n- æŸ¥çœ‹æ•ˆæœ\n\n![-2018-11-22-18.38.31.png](http://www.gitrue.com:9000/image/7ARqQ5O5rZ)\n\n\nåŸºäº webpack çˆ¸çˆ¸çš„çƒ­éƒ¨ç½²ï¼Œæˆ‘ä»¬æ— éœ€åˆ·æ–°æµè§ˆå™¨ï¼Œwebpack å·å·ç”¨ ws æ›´æ–°äº†æˆ‘ä»¬çš„å†…å®¹ã€‚ä¼¼ä¹å¾ˆå®Œç¾ï¼Œä½†æ˜¯ä¹Ÿè®¸å¤§å®¶å‘ç°äº†ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬é€šè¿‡æµè§ˆå™¨æ¸²æŸ“å‡ºæ¥çš„ dom å°±å¯ä»¥çœ‹åˆ°ï¼šï¼š\n\n[![-2018-11-22-19.08.58.md.png](http://www.gitrue.com:9000/image/kH0X0i6eMr)](https://img.actd.tw/image/TiN)\n\n\n\næˆ‘ä»¬åœ¨ä¸» APP å…¥å£å¼•å…¥äº†å¤´éƒ¨å¸ƒå±€ï¼Œ App.vue æ˜¯ç´§ä¸´ <body> å…ƒç´ çš„æ­£æ–‡å…ƒç´ ï¼Œè€Œè¿™ä¸ªç¨‹åºæ‰€æœ‰é¡µé¢ã€å­è·¯ç”±å…¨éƒ¨éƒ½æ˜¯ App.vue å…¥å£çš„å­é›†ï¼Œè¯´æ˜å…¨å±€å¼•å…¥å¸ƒå±€ä¼šå­˜åœ¨å¦‚ä¸‹é—®é¢˜ï¼š\n\n \n1ã€è¿™ä¸ªé¡¹ç›®æ‰€æœ‰çš„é¡¹ç›®éƒ½ä¸€å®šä¼šå¸¦ä¸Š Header ç»„ä»¶æ¸²æŸ“çš„å†…å®¹ \n2ã€è€Œä¸”ä¼šå½±å“åœ¨ä¸‹æœŸ ã€Šæ€§èƒ½ä¼˜åŒ–ã€‹ä¸­è®²çš„ webpack æŒ‰éœ€åŠ è½½çš„æ€§èƒ½ã€‚\n\n> å½“ç„¶å¯ä»¥å† Header ç»„ä»¶ä¸Šä¹¦å†™é€»è¾‘æ¡ä»¶,è¿‡æ»¤æŒ‡å®šçš„è·¯ç”±ï¼Œä½†ä¼šç ´åé¡¹ç›®çš„æ˜“è¯»æ€§ï¼Œéš¾ä»¥ç»´æŠ¤\n> \n>   æˆ‘ä¸ªäººæ˜¯æ¯”è¾ƒæ¨èç¬¬ä¸€ç§ï¼šæŒ‰éœ€å¼•å…¥çš„æ–¹å¼ã€‚\n\n\n### ç»§ç»­å¸ƒå±€\n\n- ç…§çŒ«ç”»è™å†™å¥½ Footer\n\n```\nvim new-bee/src/renderer/components/layout/Footer.vue\n```\n\n```\n<template>\n    <footer class=\"footer footer-light-medium \" style=\"padding-bottom: 20px;padding-top: 20px;\">\n    <div class=\"container\">\n        <div class=\"columns\">\n            <!-- Column -->\n            <div class=\"column is-4\">\n                <div class=\"mb-20\">\n                    < img class=\"small-footer-logo\" src=\"https://img.actd.tw/images/2018/11/17/\" alt=\"\">\n                    <div class=\"footer-description pt-10\">\n                        new bee æ˜¯ä¸€ä¸ªä¸ºå¼€å‘è€…æä¾›çš„ä¸“æ³¨äºæŠ€æœ¯åˆ†äº«çš„å¼€æºç¤¾åŒº,æ‰€æœ‰æºç å‡å¯åœ¨ github ä¸Šæ‰¾åˆ°,å¸Œæœ›å¯¹å¹¿å¤§å¼€å‘è€…æœ‰æ‰€å¸®åŠ©ã€‚\n                    </div>\n                </div>\n                <div>\n                    <span class=\"moto\">å–œæ¬¢é¡¹ç›®å¯ä»¥ç‚¹èµæ”¯æŒ  <a href=\"https://github.com/pkwenda/new-bee\" target=\"_blank\">\n                            <span class=\"icon\"><i class=\"fa fa-github\"></i></span>\n                        </a >.</span>\n                    <div class=\"social-links mt-20\">\n                         \n                        \n                    </div>\n                </div>\n            </div>\n            <!-- Column -->\n            <div class=\"column is-6 is-offset-2\">\n                <div class=\"columns\">\n                    <!-- Column -->\n                    <div class=\"column\">\n                        <ul class=\"footer-column\">\n                            <li class=\"column-header\">\n                                Links\n                            </li>\n                            <li class=\"column-item\"><a href=\"https://github.com/pkwenda/new-bee\">Home</a ></li>\n                            <li class=\"column-item\"><a href=\"https://cssninja.io/themes\">Blog</a ></li>\n                            <li class=\"column-item\"><a href=\"https://github.com/pkwenda/new-bee/wiki\">Wiki</a ></li>\n                        </ul>\n                    </div>\n                    <!-- Column -->\n                    <div class=\"column\">\n                        <ul class=\"footer-column\">\n                            <li class=\"column-header\">\n                                Ressources\n                            </li>\n                            <li class=\"column-item\"><a href=\"https://cssninja.io/help\">Help center</a ></li>\n                            <li class=\"column-item\"><a href=\"https://cssninja.io/blog\">Blog</a ></li>\n                            <li class=\"column-item\"><a href=\"https://cssninja.io/help/rules\">Rules</a ></li>\n                        </ul>\n                    </div>\n                    <!-- Column -->\n                    <div class=\"column\">\n                        <ul class=\"footer-column\">\n                            <li class=\"column-header\">\n                                Terms\n                            </li>\n                            <li class=\"column-item\"><a href=\"https://cssninja.io/help/terms/licenses/personal\">Personal</a ></li>\n                            <li class=\"column-item\"><a href=\"https://cssninja.io/help/terms/licenses/developer\">Developer</a ></li>\n                            <li class=\"column-item\"><a href=\"https://cssninja.io/help/terms/service\">Terms of Service</a ></li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</footer>\n</template>\n\n\n<script>\nexport default {\n  name: \"Footer\",\n  data() {\n    return {};\n  },\n  created() {},\n  destroyed() {},\n  mounted() {\n\n  },\n  methods: {}\n};\n</script>\n\n```\n\n> åˆ«å¿˜äº†åœ¨ HelloWorld å¼•å…¥ä¸€ä¸‹\n\n- çœ‹çœ‹æ•ˆæœ\n\n![-2018-11-22-19.46.28.png](http://www.gitrue.com:9000/image/zPOvxAyyWi)\n\n\n- çœ‹èµ·æ¥æ•ˆæœè¿˜ä¸é”™ï¼Œæ¥ä¸‹æ¥æ˜¯ Contentï¼ˆæ­£æ–‡ï¼‰éƒ¨åˆ†\n\n```\nvim new-bee/src/renderer/components/layout/Content.vue\n```\n\n```\n<template>\n\n      <div class=\"container\" style=\"height:700px\">\n        <h1  >åšå®¢åˆ—è¡¨</h1>\n          <article class=\"column is-3\"   v-for=\"blog in blogs\" v-bind:key=\"blog\"> \n            <a   class=\"bd-article-image is-bootstrap\" >\n            <span class=\"bd-article-overlay\"></span>\n            <span class=\"bd-article-icon\">\n                <i class=\"fa fa-tag\"></i>\n            </span>\n            <strong class=\"bd-star-icon\" ><i class=\"fa fa-star\"></i> <span style=\"font-size: 1rem\">&nbsp;{{blog.commendCount}}</span></strong>\n            <strong class=\"bd-article-info\">\n                <span>\n                <time class=\"bd-article-date\" datetime=\"2017-10-09T00:00:00+00:00\">\n                    {{blog.tag}}\n                </time>\n                <strong class=\"bd-article-title\">\n                    {{blog.title}}\n                </strong>\n                </span>\n            </strong>\n            </a>\n        </article>\n      </div>\n</template>\n\n\n<script>\nlet article = { tag: \"java\", title: \"java\", commendCount: 0 };\nexport default {\n  name: \"Footer\",\n  data() {\n    return {\n      blogs: [\n        article,\n        article,\n        article,\n        article,\n        article,\n        article,\n        article,\n        article\n      ]\n    };\n  },\n  created() {},\n  destroyed() {},\n  mounted() {},\n  methods: {}\n};\n</script>\n\n<style scoped>\n.bd-article-image.is-bootstrap {\n  background-color: #6f5499;\n}\n.bd-article-image {\n  background-color: #00d1b2;\n  display: block;\n  height: 240px;\n  margin-left: auto;\n  margin-right: auto;\n  position: relative;\n  text-align: center;\n}\n\n.bd-star-icon {\n  font-size: 19.2px;\n  font-size: 1.2rem;\n  color: #0a0a0a;\n  opacity: 0.25;\n  bottom: 10px;\n  left: 30px;\n  position: absolute;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  -webkit-align-items: center;\n  align-items: center;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-box-pack: center;\n  -ms-flex-pack: center;\n  -webkit-justify-content: center;\n  justify-content: center;\n}\n.bd-article-icon,\n.bd-article-info {\n  bottom: 0;\n  left: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n  -ms-flex-pack: center;\n  justify-content: center;\n}\n.bd-article-info {\n  padding: 20px;\n}\na strong {\n  color: currentColor;\n}\n.bd-article-date {\n  color: rgba(0, 0, 0, 0.5);\n  display: block;\n}\n.bd-article-title {\n  color: white;\n  display: block;\n  font-size: 1.8rem;\n  font-weight: 700;\n  line-height: 1.25;\n  padding: 0 20px;\n}\n.bd-article-icon {\n  color: #0a0a0a;\n  opacity: 0.25;\n}\nh1 {\n  text-align: center;\n  font-size: 30px;\n}\n\n.column.is-3,\n.column.is-3-tablet {\n  -webkit-box-flex: 0;\n  -ms-flex: none;\n  flex: none;\n  width: 25%;\n  float: left;\n}\n</style>\n\n\n```\n\n- çœ‹çœ‹æ•ˆæœ\n[![-2018-11-22-22.31.22.md.png](http://www.gitrue.com:9000/image/bhU2ODG5eq)](https://img.actd.tw/image/9VP)\n\n- HelloWorld.vue ä»£ç çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„\n\n[![-2018-11-22-19.52.42.png](http://www.gitrue.com:9000/image/rZnwH8GSKi)](https://img.actd.tw/image/380)\n\nè¿˜ç®—çœ‹å¾—è¿‡å»ï¼Œæˆ‘ä»¬ç»§ç»­å‚ç…§å›¾äºŒ\n\n![design_web_layout.png](http://www.gitrue.com:9000/image/mUiW85X1C5)\n\nä¸º Content åˆ¶å®š AD(å¹¿å‘Š) ç»„ä»¶ã€‚ \n\n\n```\nvim new-bee/src/renderer/components/common/AD.vue\n```\n\n```html\n\n<template>\n     \n             <div class=\"ad\"><h1>æ¾³é—¨XXèµŒåœºä¸Šçº¿å•¦</h1></div>\n    \n</template>\n\n<script>\nexport default {\n  name: \"AD\",\n\n  data() {\n    return {};\n  },\n  destroyed() {},\n  mounted() {},\n  methods: {},\n  watch: {}\n};\n</script>\n <style   scoped>\n.ad {\n  width: 150px;\n  height: 180px;\n  background-color: #ececec;\n  position: fixed;\n  right: 30px;\n  top: 80px;\n}\n</style>\n \n```\n\n- åˆ«å¿˜äº†åœ¨ Content.vue å¼•å…¥ä¸€ä¸‹\n\n```html\n...\n<AD></AD>\n...\nimport AD from \"@/components/common/AD\";\nexport default {\n  name: \"Content\",\n  components: { AD },\n  ...\n  }\n```\n\n- çœ‹ä¸‹æ•ˆæœ\n\n![2018-11-22-22.45.30.gif](http://www.gitrue.com:9000/image/1yIaneQlVL)\n\n- å¯¹æ¯”ä¸€ä¸‹æˆ‘ä»¬ä¹‹å‰ sketch ç”»çš„è‰å›¾\n\n![design_web_layout.png](http://www.gitrue.com:9000/image/mUiW85X1C5)\n\nå·®ä¸å¤šå®Œæˆäº†æˆ‘ä»¬åˆæ­¥çš„æ„æ€\n\n\n\n\n# Part 8 å‰ç«¯æ€§èƒ½ä¼˜åŒ–\n\n\n\n## æœ¬èŠ‚æ©„æ¦„\n\n- å‰ç«¯éœ€è¦äº†è§£çš„ docker åŸºç¡€çŸ¥è¯†\n- éƒ¨ç½²å‰ç«¯é¡¹ç›®åˆ°æœ¬åœ°/å¤–ç½‘æœåŠ¡\n- å‰ç«¯é¡¹ç›®çš„ gZip ä¼˜åŒ–\n- äº†è§£ CDN çš„é‡è¦æ€§\n- webpack æŒ‰éœ€åŠ è½½\n- å›¾ç‰‡çš„ç›¸å…³ä¼˜åŒ–\n- å¦‚ä½•åˆ†æé¡¹ç›®ä¾èµ–ï¼Œæ–¹ä¾¿é’ˆå¯¹æ€§å¤„ç†\n- å¦‚ä½•å‡å° webpack æ‰“åŒ…å¤§å°/é€Ÿåº¦\n\n##  ä¸Šçº¿ \n\næˆ‘ä»¬é€šå¸¸åœ¨æœ¬åœ°å¼€å‘ï¼Œæœ¬åœ°ç¯å¢ƒå’Œçº¿ä¸Šä¹Ÿå¹¶éå®Œå…¨ä¸€æ ·ï¼Œå¾ˆå¤šé¡¹ç›®ç¬¬ä¸€æ¬¡ä¸Šçº¿å‡ ä¹éƒ½ä¼šé‡åˆ°æœ¬åœ°å¼€å‘æ— æ³•å¤ç°çš„é—®é¢˜ï¼Œå¯èƒ½æ˜¯å­—ä½“ã€æ ·å¼çš„é—®é¢˜ï¼Œä¹Ÿå¯èƒ½æ˜¯webpack ç¼–è¯‘çš„é—®é¢˜ã€ç”šè‡³å¯èƒ½æ˜¯æœ¬åœ°çš„å¥‡è‘©ç¯å¢ƒã€‚æ‰€ä»¥  æœ¬åœ°å®Œç¾è¿è¡Œ â‰  çº¿ä¸Šå®Œç¾è¿è¡Œï¼Œæˆ‘ä»¬éœ€è¦ build é¡¹ç›®ï¼Œæ¨¡æ‹Ÿçº¿ä¸Šæµ‹è¯•ä¸€ä¸‹ï¼Œçœ‹çœ‹æ˜¯å¦å¯ä»¥å®Œç¾è¿è¡Œï¼Œæœ‰é—®é¢˜å¯ä»¥æ–¹ä¾¿åŠæ—¶ä½œå‡ºè°ƒæ•´ã€‚\n\n### å‡†å¤‡\n\n>ä¸ºäº†é¿å…æœ¬æ•™ç¨‹æ±¡æŸ“å¤§å®¶æœ¬åœ°ç¯å¢ƒï¼Œæ¨èå¤§å®¶å®‰è£…ä¸€ä¸ªdockerï¼ŒåæœŸè¿ç»´ä¹Ÿä¼šæ ¹æ® docker å±•å¼€ã€‚\n\nçœ‹åˆ°è¿™ä¸ª Title ï¼šã€Šå‡†å¤‡dockerã€‹ï¼Œæ²¡æ¥è§¦è¿‡çš„å‰ç«¯ä¸è¦æ€‚ï¼Œè£…ä¸€ä¸ªï¼Œå‹‡äºè·¨å‡ºç¬¬ä¸€æ­¥ï¼Œä¸å­¦ä¹ å°±æ˜¯ç­‰æ­»ã€Œ[ç‚¹å‡»è¿™é‡Œäº†è§£ docker](http://www.docker-cn.com)ã€\n\nè™½ç„¶ `tomcat nginx apache jboss jetty `ç­‰ç­‰ç­‰ç­‰éƒ½å¯ä»¥ä½œä¸º http æœåŠ¡ï¼Œæœ¬ç« ä»¥æœ€å¸¸è§çš„ nginx å±•å¼€è®²è¿°ï¼š\n \n## å¤§ç™½è¯ä»‹ç»ä¸‹ docker\n\ndocker å°±æ˜¯ç”¨æ›´ä¼˜é›…çš„æ–¹æ³•ï¼Œåšåˆ°äº†è™šæ‹Ÿæœºçš„äº‹æƒ…ï¼Œå¹¶ä¸”åšçš„æ›´å¥½ï¼Œå¯ç¼–ç¨‹ç®¡ç†é›†ç¾¤ã€‚docker å¯åŠ¨å®¹å™¨ï¼Œåœ¨å®¹å™¨å†…éƒ¨è¿è¡Œä½ çš„ç¯å¢ƒï¼Œé»˜è®¤å„ä¸ªå®¹å™¨æ˜¯äº’ç›¸éš”ç¦»çš„ï¼Œå½“ç„¶ä½ å¯ä»¥é€šè¿‡ link network å…³è”å®¹å™¨ï¼Œæˆ–è€…ç›´æ¥ä½¿ç”¨ docker-compose ç¼–æ’ï¼Œå¯åŠ¨å®¹å™¨çš„å‰ææ˜¯é•œåƒï¼Œä¹Ÿç±»ä¼¼ä¸è™šæ‹Ÿæœºçš„é•œåƒï¼Œæƒ³è·‘å®¹å™¨ï¼Œå…ˆå¾—ä¸‹è½½ã€Œpullã€é•œåƒã€‚\n\n## ä½¿ç”¨ docker\n\nä¹Ÿè®¸å¾ˆå¤šäººæ²¡ç”¨è¿‡ï¼Œæ²¡ç”¨è¿‡ä¹Ÿä¸è®²æ€ä¹ˆå®‰è£…äº†ï¼Œè‡ªå·±å»çœ‹å®˜ç½‘å§[ä¸­æ–‡å®˜ç½‘](http://www.docker-cn.com)ã€[ç¤¾åŒºç‰ˆä¸‹è½½](http://www.docker-cn.com/community-edition)ã€[ä¸­å›½é•œåƒåŠ é€Ÿ](http://www.docker-cn.com/registry-mirror)ï¼Œwindows çš„è¯å¯èƒ½è¦å¼€å¯è™šæ‹ŸåŒ–ï¼Œlinux æ¨è ubuntuï¼Œ æœ‰ç¯‡æ–‡ç« è¿™æ ·è®²ï¼š[ä¸ºäº†æ€§èƒ½è¯·ä¸è¦åœ¨ centosä¸­è¿è¡Œ Docker](https://www.linux-toys.com/?p=374) ï¼Œ [æŸ¥çœ‹ç¿»è¯‘ç‚¹è¿™é‡Œ]([](http://www.dockone.io/article/972))ï¼Œå‡ å¹´å‰çš„æ–‡ç« äº†ï¼Œç°åœ¨æ€ä¹ˆæ ·æœ‰å¾…è€ƒç©¶ã€‚\n\n### çœ‹ä¸‹ images çŠ¶æ€\n\n```\ndocker images\n```\n\n![å±å¹•å¿«ç…§ 2018-11-27 16.28.03.png](http://www.gitrue.com:9000/image/F1QaCXU55P)\n\nå¯ä»¥çœ‹åˆ°æˆ‘å·²ç»æœ‰ä¸€äº›é•œåƒäº†ã€Œæˆ‘å·²ç»åˆ é™¤äº†nginxã€\n\n\n### dockerHub æ‹‰ Nginx é•œåƒ \n\n```\ndocker pull registry.docker-cn.com/library/nginx:latest\n```\n\n> æ­£å¸¸ docker pull nginx å³å¯ï¼Œä¸­é—´é‚£æ®µæ˜¯ä¸­å›½é•œåƒæº\n\n![2018-11-27 16.28.54.gif](http://www.gitrue.com:9000/image/B8QAyVAzTo)\n\n\n![å±å¹•å¿«ç…§ 2018-11-27 16.33.04.png](http://www.gitrue.com:9000/image/Zgypo7kaVi)\n\n\nokï¼Œæˆ‘ä»¬æˆåŠŸ pull ä¸‹æ¥äº† Nginx çš„é•œåƒã€‚é»˜è®¤å­˜å‚¨çš„é•œåƒåä¸ºï¼š registry.docker-cn.com/library/nginx \n\n## æ‰“åŒ…\n\nè¿›å…¥æˆ‘ä»¬ä¸Šä¸€ç« æºç çš„ç›®å½•ï¼Œbuild ä¸€ä¸‹è¿›è¡Œå‘å¸ƒã€‚\n[ä¸Šä¸€ç« æºç åœ¨è¿™é‡Œ](https://github.com/pkwenda/Blog/tree/master/code/web_project_course/3-layout/new-bee)\n \n```sh\nnpm run build\n```\n\n![2018-11-27 16.43.35.gif](http://www.gitrue.com:9000/image/qnfn26w0zm)\n\n\n### å¯åŠ¨ docker å®¹å™¨\n\n\n```shell\ndocker run --name nginx -d -p 8888:80 -v /new-bee/dist:/usr/share/nginx/html  registry.docker-cn.com/library/nginx\n```\n\n![2018-11-27 16.55.18.gif](http://www.gitrue.com:9000/image/3moBJbU2AG)\n \n\n\n- ä¸Šè°ƒå‘½ä»¤ä¸€äº›è§£é‡Šã€Œä¸å¤šè®²ï¼Œé¿å…æ¶ˆåŒ–ä¸è‰¯ï¼Œè‡ªå·±æ¢ç©¶ã€\n\n\n| CMD | è§£é‡Š  |\n| --- | --- |\n| -dÂ  | å®ˆæŠ¤è¿›ç¨‹è¿è¡Œ |\n| -p | ç«¯å£æ˜ å°„ Â  8888 ï¼š80 docker80ç«¯å£æ˜ å°„åˆ°æœ¬æœºã€Œå®¿ä¸»æœºã€ |\n| -v | æŒ‚è½½å®¿ä¸»æœºçš„ä¸€ä¸ªç›®å½• Â æœ¬æœºã€Œå®¿ä¸»æœºã€: dockerå®¹å™¨ |\n| â€”name | ä¸ºå®¹å™¨å‘½å |\n\n### æµ‹è¯•ä¸€ä¸‹\n\n```\nhttp://localhost:8888/#/\n```\n\n![2018-11-27 17.06.00.gif](http://www.gitrue.com:9000/image/ScN0E2S7bu)\n\n\n\n\nå½“ç„¶åˆæ¬¡å°è¯• docker ä½ å¯èƒ½ä¼šæœ‰æ›´å¤šçš„ç–‘é—®ï¼š\n\n- ä½ æ€ä¹ˆçŸ¥é“éœ€è¦å°†ä¸»ç›®å½•æŒ‚è½½åˆ°ï¼š /usr/share/nginx/html ? \n- èƒ½å¦/æ€æ · æŸ¥çœ‹ Nginx æ—¥å¿— ?  \n- å®¹å™¨å†…çš„ nginx èƒ½å¦è‡ªå®šä¹‰é…ç½® ? \n-  ......\n\nè¿™äº›å°ç™½é—®é¢˜æœ¬ç« ç®€å•è®²è®²ï¼Œåé¢åšè‡ªåŠ¨è¿ç»´çš„æ—¶å€™å•ç‹¬å±•å¼€è®²ï¼Œå¯ä»¥å…³æ³¨[æˆ‘çš„åšå®¢](https://github.com/pkwenda/Blog)\n\n\n## gZip\n\næˆ‘ä»¬å¯ä»¥é€šè¿‡ webpack å‹ç¼©è„šæœ¬æ–‡ä»¶ï¼Œä¸Šä¼ åˆ° http æœåŠ¡å™¨ï¼Œæµè§ˆå™¨æµè§ˆçš„æ—¶å€™ï¼Œç»è¿‡å‹ç¼©çš„HTTPåº”ç­”æŠ¥æ–‡æ˜¯ç”±æµè§ˆå™¨è§£å‹çš„ï¼Œæ¯”èµ·å‹ç¼©ï¼Œè§£å‹çš„é€Ÿåº¦æ˜¯éå¸¸å¿«çš„ï¼ˆåªè¦æ•°æ®æ­£å¸¸ï¼Œå¯ä»¥è§£å‹çš„è¯ï¼‰ï¼Œæ‰€ä»¥ä¸ç”¨æ‹…å¿ƒæµè§ˆå™¨ç”¨äºè§£å‹çš„æ—¶é—´ä¼šé™ä½ç”¨æˆ·ä½“éªŒã€‚äº‹å®ä¸Šï¼Œæµè§ˆå™¨è§£å‹æ¶ˆè€—çš„è¿™ç‚¹æ—¶é—´æ¯”èµ·æ•°æ®åŒ…å› ä¸ºç½‘ç»œæ‹¥å µè€Œè€½è¯¯çš„æ—¶é—´è¦å°‘çš„å¤šä¹Ÿå¯æ§çš„å¤šã€‚\n\nÂ \n\nåœ¨æµè§ˆå™¨å‘ç»™æœåŠ¡å™¨çš„HTTPè¯·æ±‚æŠ¥æ–‡ä¸­ï¼Œä½¿ç”¨Accept-Encodingå­—æ®µæ ‡æ˜è‡ªå·±æ”¯æŒçš„å‹ç¼©æ ¼å¼ï¼Œå³è‡ªå·±å¯ä»¥è§£å‹å“ªå‡ ç§å‹ç¼©æŠ¥æ–‡ï¼ˆgzipã€zlibåº“æä¾›çš„deflateï¼‰ã€‚æœåŠ¡å™¨å›å¤å®¢æˆ·ç«¯çš„HTTPåº”ç­”æŠ¥æ–‡ä¸­ï¼Œä½¿ç”¨Content-Encodingå­—æ®µæ ‡æ˜è¯¥åº”ç­”æŠ¥æ–‡ä½¿ç”¨å“ªç§å‹ç¼©æ–¹å¼ã€‚\n \n\n### gZip æ”»ç ´ webpackã€nginx\n\nåƒæˆ‘è¿™æ ·å±Œä¸çš„æœåŠ¡å™¨ä¸€èˆ¬éƒ½ä¹° 1M çš„ï¼Œå¤§çš„èµ„æºæ–‡ä»¶ hold ä¸ä½ï¼Œä¸€ä¸ªåŠ¨è¾„ 400K çš„ vendar æ–‡ä»¶è¿™å¾ˆè›‹ç–¼ï¼Œä¸ä¸Š gZIp å¾ˆéš¾å—ã€‚\n\næ‰“å¼€ network è§‚å¯Ÿä¸€ä¸‹:\n\n![å±å¹•å¿«ç…§ 2018-11-27 17.31.07.png](http://www.gitrue.com:9000/image/7Nvn7iygVC)\n\nå®ƒæœ‰ 144K è¿™ä¹ˆå¤§\n\n![å±å¹•å¿«ç…§ 2018-11-27 17.54.58.png](http://www.gitrue.com:9000/image/nHCVuLqIPX)\n\næˆ‘ä»¬å°±ä»¥ webpack æ‰“åŒ…çš„æ ¸å¿ƒ vendor ä¸ºä¾‹ï¼Œæˆ‘ä»¬å‘ç°ï¼Œå®¢æˆ·ç«¯å‘æœåŠ¡ç«¯è¯·æ±‚äº† gZIp èµ„æº `Accept-Encoding: gzip, deflate`ï¼Œä½†å¯æƒœæœåŠ¡ç«¯å¹¶æ²¡æœ‰ç»™æˆ‘ä»¬ç†æƒ³ä¸­çš„ `response - Content-Encoding: gzip` çš„å“åº”, æˆ‘ä»¬éœ€è¦æ’æŸ¥ä¸€ä¸‹åŸå› ã€‚\n\n- é¦–å…ˆçœ‹çœ‹ webpack åˆ°åº•æ‰“æ²¡æ‰“å‡ºæ¥æ‰“å‡ºæ¥ gZip å‘¢ï¼Ÿçœ‹çœ‹ä»–çš„ç›®å½•æœ‰æ²¡æœ‰ js çš„ .gz æ–‡ä»¶ã€‚\n\n![å±å¹•å¿«ç…§ 2018-11-27 17.49.21.png](http://www.gitrue.com:9000/image/vCd9XNDIvd)\n\nå¾ˆé—æ†¾æ²¡æœ‰ï¼Œåªæœ‰ä¸€äº›å‹ç¼©æ–‡ä»¶å’Œç”¨äºå®šä½çš„ map æ–‡ä»¶ï¼Œçœ‹æ¥é¦–å…ˆæˆ‘ä»¬çš„æ‰“åŒ…å°±å‡ºç°äº†é—®é¢˜ã€‚\n\nå¤§å®¶è¿˜è®°å¾—å½“åˆæ„å»ºé¡¹ç›®æˆ‘å‘çš„è¿™å¼ å›¾å—ï¼Ÿ\n\n![å±å¹•å¿«ç…§ 2018-11-27 17.36.24.png](http://www.gitrue.com:9000/image/mLo2tA6qwY)\n\n\n\n- package.json é¡¹ç›®æè¿°æ–‡ä»¶\n\n\næ‰“å¼€çœ‹çœ‹ build å‘½ä»¤æ‰§è¡Œäº†å“ªä¸ªè„šæœ¬ï¼Ÿ\n\n\n![å±å¹•å¿«ç…§ 2018-11-27 17.42.22.png](http://www.gitrue.com:9000/image/euLLe5cPzl)\n\næ‰“å¼€ build.js çœ‹çœ‹æ‰§è¡Œäº†å“ªäº›å†…å®¹ï¼Œéš¾é“æ˜¯ vue-cli æ²¡æœ‰ä¸ºæˆ‘ä»¬é…ç½®å¥½webpack gZip ç›¸å…³çš„é…ç½®å—ï¼Ÿ\n\n\n![å±å¹•å¿«ç…§ 2018-11-27 17.43.47.png](http://www.gitrue.com:9000/image/vNUNofAy0q)\n \n\n\næˆ‘ä»¬å‘ç°æ²¡ä»€ä¹ˆç‰¹åˆ«çš„ï¼Œå‘ç°ä¸€ä¸ª\n `const webpackConfig = require('./webpack.prod.conf')`\n çš„ä¾èµ–ï¼Œå¤§æ¦‚å°±æ˜¯å­—é¢æ„æ€ï¼ˆwebpackç”Ÿäº§é…ç½®ï¼‰è¿›å»çœ‹çœ‹ã€‚\n \n![å±å¹•å¿«ç…§ 2018-11-27 17.46.37.png](http://www.gitrue.com:9000/image/PkuQKiK82Z)\n \n\n\nå“¦ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†ï¼Œwebpack ç¡®å®ä¸ºæˆ‘ä»¬é…ç½®äº† gZip ç›¸å…³é…ç½®ã€‚\n\nå¯æ˜¯å‘ç°è¿™ä¸ªé…ç½®è¢«è¿™ä¸ªåˆ¤æ–­åŒ…è£¹ä½äº†ï¼š\n\n```js\nif (config.build.productionGzip) {\n\n}\n```\n\nè¿½è¸ªä¸‹å»\n\n```js\n    // Gzip off by default as many popular static hosts such as\n    // Surge or Netlify already gzip all static assets for you.\n    // Before setting to `true`, make sure to:\n    // npm install --save-dev compression-webpack-plugin\n    productionGzip: false,\n```\n\næˆ‘ä»¬çš„å…¨éƒ¨ç–‘æƒ‘éƒ½è¢«æ­å¼€äº†ï¼Œå¼€å‘è€…é€šè¿‡æ³¨é‡Šè¿™æ ·å‘Šè¯‰æˆ‘ä»¬ä»–çš„ç†ç”±ï¼Œæˆ‘ç®€å•ç¿»è¯‘ä¸€ä¸‹ï¼š\n\n \n![å±å¹•å¿«ç…§ 2018-11-27 17.59.02.png](http://www.gitrue.com:9000/image/phapBcxGq5)\n \n\né¦–å…ˆä¸‹è½½ä¸€ä¸‹ä¾èµ–ï¼š\n\n```\n vim package.json\n \n \"devDependencies\": {\n    \"compression-webpack-plugin\": \"^1.1.12\",\n    }\n```\n\nç„¶å productionGzip æ”¹æˆ true\n\n \n- åºŸè¯ä¸å¤šè¯´æ‰“ä¸ªåŒ…è¯•è¯•ï¼š\n\n```\nnpm run build\n```\n\n![å±å¹•å¿«ç…§ 2018-11-27 18.14.11.png](http://www.gitrue.com:9000/image/B3n5P3f1uk)\n \n\n\næˆåŠŸäº†ï¼Œå‡ºç°äº† .zg æ–‡ä»¶å‹ç¼©åŒ…ï¼Œä½†æ˜¯ gZip æ˜¯éœ€è¦æœåŠ¡ç«¯çš„æ”¯æŒçš„ï¼ŒæœåŠ¡å™¨é€šè¿‡å®¢æˆ·ç«¯è¯·æ±‚çš„ `Accept-Encoding` é¦–éƒ¨å¼€åˆ¤æ–­è¿”å›å“ªç§æ ¼å¼çš„è„šæœ¬æ–‡ä»¶ï¼Œç„¶åç”±æµè§ˆå™¨è§£å‹ï¼Œæˆ‘ä»¬æ‹‰ä¸‹æ¥çš„ nginx é•œåƒï¼Œnginx æ˜¯ä¸ä¼šä¸ºæˆ‘ä»¬é»˜è®¤é…ç½® gZIp æœåŠ¡ç«¯å‹ç¼©çš„ï¼Œæˆ‘ä»¬å»æŸ¥çœ‹ä¸€ä¸‹å§ã€‚\n\n\n### è¿›å…¥ docker ä¸»æœº\n\n```\n docker exec -it nginx /bin/bash\n```\n\næˆ–è€…\n\n```\n docker exec -it nginx \"bash\"\n```\n\n\n![2018-11-27 18.30.57.gif](http://www.gitrue.com:9000/image/60fWqcc3tb)\n \n\n\n\n| CMD | è§£é‡Š |\n| --- | --- |\n| exec | è¿›å…¥dockerå®¹å™¨ |\n| -iÂ  | -i: ä»¥äº¤äº’æ¨¡å¼è¿è¡Œå®¹å™¨ï¼Œé€šå¸¸ä¸ -t åŒæ—¶ä½¿ç”¨ï¼› |\n| -t | -t: ä¸ºå®¹å™¨é‡æ–°åˆ†é…ä¸€ä¸ªä¼ªè¾“å…¥ç»ˆç«¯ï¼Œé€šå¸¸ä¸ -i åŒæ—¶ä½¿ç”¨ï¼› |\n| -it | -it  = -i -t |\n| â€œbashâ€ æˆ– /bin/bash | /bin/bashçš„ä½œç”¨æ˜¯å› ä¸ºdockeråå°å¿…é¡»è¿è¡Œä¸€ä¸ªè¿›ç¨‹ï¼Œå¦åˆ™å®¹å™¨å°±ä¼šé€€å‡º |\n\n\n### è¿›å…¥ nginx ä¸»æœºçš„ç¬¬ä¸€ä»¶äº‹\n\n## nginx åœ¨å“ªï¼Ÿï¼Ÿï¼Ÿ\n\nLinux whereis å‘½ä»¤ç”¨äºæŸ¥æ‰¾æ–‡ä»¶ã€‚\n\nè¯¥æŒ‡ä»¤ä¼šåœ¨ç‰¹å®šç›®å½•ä¸­æŸ¥æ‰¾ç¬¦åˆæ¡ä»¶çš„æ–‡ä»¶ã€‚è¿™äº›æ–‡ä»¶åº”å±äºåŸå§‹ä»£ç ã€äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæˆ–æ˜¯å¸®åŠ©æ–‡ä»¶ã€‚\n\nè¯¥æŒ‡ä»¤åªèƒ½ç”¨äºæŸ¥æ‰¾äºŒè¿›åˆ¶æ–‡ä»¶ã€æºä»£ç æ–‡ä»¶å’Œmanæ‰‹å†Œé¡µï¼Œä¸€èˆ¬æ–‡ä»¶çš„å®šä½éœ€ä½¿ç”¨ locate å‘½ä»¤ã€‚\n\nè¯­æ³•\n\n```shell\nwhereis [-bfmsu][-B <ç›®å½•>...][-M <ç›®å½•>...][-S <ç›®å½•>...][æ–‡ä»¶...]\n```\n\n- æŸ¥çœ‹ nginx ä½ç½®\n\n```shell\nroot@e0017cab245f:/# whereis nginx\nnginx: /usr/sbin/nginx /usr/lib/nginx /etc/nginx /usr/share/nginx\n```\n\n\n![å±å¹•å¿«ç…§ 2018-11-27 18.40.42.png](http://www.gitrue.com:9000/image/mB7Egq5aJi)\n\n- æˆ‘ä»¬åœ¨ /usr/share/nginx æ‰¾åˆ°äº†æ ¹ç›®å½• html/\n\n\n![å±å¹•å¿«ç…§ 2018-11-27 18.41.52.png](http://www.gitrue.com:9000/image/LBJJSIznuK)\n\n- æˆ‘ä»¬åœ¨ /etc/nginx/ æ‰¾åˆ°äº† nginx é…ç½®æ–‡ä»¶\n\n> ps ä¸­é—´ä»¶è¿™ä¹ˆå¤šï¼Œè°è®°å¾—ä½å‘¢ï¼Œè®°ä¸ä½è‡ªå·±çœ‹çœ‹å°±è¡Œäº†ä¸æ˜¯å—?\n\n\n- æŸ¥çœ‹ä¸€ä¸‹ nginx çš„é…ç½®\n\n![2018-11-27 18.45.36.gif](http://www.gitrue.com:9000/image/JcrJIahx8O)\n \nç¡®å® gZip çœŸçš„æ²¡å¼€å¯ï¼Œè¢«æ³¨æ‰äº†ã€‚\n\næˆ‘ä»¬æ‰“å¼€ gZip çš„æ³¨é‡Šï¼Œå¹¶ä¸”é˜²æ­¢æœåŠ¡ç«¯å¯¹ css å·æ‡’ï¼Œæˆ‘ä»¬ä¸€æ­¥åˆ°ä½åŠ ä¸Šå‡ è¡Œç»å…¸é…ç½®ã€‚\n\n```shell\ngzip on;\ngzip_min_length 1k;\ngzip_buffers 4 16k;\ngzip_comp_level 6;\ngzip_types application/javascript text/plain application/x-javascript text/css application/xml text/javascript application/json;\ngzip_vary on;\n    \n```\n\n[nginxé…ç½®](https://github.com/pkwenda/Blog/blob/master/code/web_project_course/4-optimizing/nginx/nginx.conf) ä»£ç åœ¨è¿™é‡Œ\n\n### å¦‚ä½•ä¿®æ”¹ docker å†…éƒ¨çš„é…ç½®\n\nå°±ç›®å‰æ¥çœ‹ï¼Œä½ æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥é€‰æ‹©ï¼š\n\n- ç›´æ¥ exec å®¹å™¨è¿›è¡Œä¿®æ”¹ï¼Œå¢åŠ ä¸Šè¿° gZip ä»£ç æ®µã€‚ç¼ºç‚¹ï¼šè‹¥æƒ³é‡æ–°åŸºäºé•œåƒæ„å»ºå®¹å™¨å®¹å™¨å†…çš„é…ç½®ä¼šä¸¢å¤±ã€‚ï¼ˆé™¤éä½  commit é•œåƒï¼‰\n- ç‹¬ç«‹å‡ºé…ç½®æ–‡ä»¶ï¼Œä¸€åŠ³æ°¸é€¸ã€‚\n\næˆ‘ä»¬åŸºäºç¬¬äºŒç‚¹åœ¨ new-bee/ ç›®å½• åŒçº§ åˆ›å»ºäº†ä¸€ä¸ªç›®å½• nginx/ åˆ›å»ºä¸€ä¸ªåŒåçš„ nginx.conf æ–‡ä»¶ã€‚\n\n[nginxé…ç½®](https://github.com/pkwenda/Blog/blob/master/code/web_project_course/4-optimizing/nginx/nginx.conf) ä»£ç åœ¨è¿™é‡Œ\n\n- å…ˆåœæ­¢ nginx å®¹å™¨\n\n```shell\ndocker stop nginx\n```\n\n- åˆ é™¤ nginx å®¹å™¨\n\n```shell\ndocker rm nginx\n```\n\n- é‡æ–°æ„å»º nginx å®¹å™¨\n\n```shell\ndocker run --name nginx -d -p 8888:80 -v /new-bee/dist:/usr/share/nginx/html -v /nginx/nginx.conf:/etc/nginx/nginx.conf:ro registry.docker-cn.com/library/nginx\n```\n\n- çœ‹çœ‹æ•ˆæœ\n\n```\nhttp://localhost:8888/#/\n```\n\n\nä¸ºäº†é¿å…æµè§ˆå™¨åŠ è½½åˆšæ‰çš„ 304 ç¼“å­˜ï¼Œæ¸…é™¤ä¸‹æµè§ˆå™¨ç¼“å­˜æˆ–è¿›è¡Œéšèº«æ¨¡å¼\n\n![å±å¹•å¿«ç…§ 2018-11-27 22.32.22.png](http://www.gitrue.com:9000/image/yFe0F8LqXI)\n\nå·²ç»å¥æ•ˆäº†ã€‚\n\n\n- çœ‹çœ‹å¤§å°å‹ç¼©åˆ°å¤šå°‘\n\n\n![å±å¹•å¿«ç…§ 2018-11-27 22.47.03.png](http://www.gitrue.com:9000/image/fw8oJeIJ3s)\n\nåªæœ‰ 50K å·¦å³ï¼Œå‹ç¼©äº† 2/3 çš„å¤§å°ï¼Œè¿™å¯¹äºå¤§å‹é¡¹ç›®æ¥è¯´ï¼ŒèŠ‚çœçš„ä¸åªæ˜¯ 100K ï¼Œç”šè‡³æ˜¯æ›´å¤šï¼Œwebpack æˆ–è€…è¯´ gz ç­‰å‹ç¼©ç®—æ³•ï¼Œä¼šå°†æ‰€æœ‰çš„å¤§é‡é‡å¤çš„ç‰‡æ®µå•ç‹¬æ ‡è®°ï¼Œæ‰€ä»¥é‡å¤çš„è¶Šå¤šï¼Œå‹ç¼©çš„è¶Šå¤šï¼Œè¿™å¯¹äºç°åœ¨å¸¦å®½æ¯”é‡‘å­è´µçš„äº‘æœåŠ¡æ¥è¯´æ˜¯ååˆ†é‡è¦çš„ã€‚\n\n\n## CDN\n\n![å±å¹•å¿«ç…§ 2018-11-27 22.50.16.png](http://www.gitrue.com:9000/image/UWVgxzDh84)\n \n\nå¤§å®¶æ³¨æ„åˆ°ï¼Œæœ‰äº›èƒ½ç”¨ CDN çš„æˆ‘é€‰æ‹©ä½¿ç”¨äº† CDNï¼Œé‚£ä¹ˆ CDN å¯¹äºçº¿ä¸ŠæœåŠ¡æ¥è¯´åˆ°åº•æœ‰å¤šé‡è¦å‘¢?\n\n### åŸç†\n\n\n### è¯·æ±‚é€Ÿåº¦\n\n\nåºŸè¯å…ˆä¸è¯´ç»™å¤§å®¶ä¸Šä¸ªå¯¹æ¯”å›¾ [æµ‹è¯•åœ°å€](https://www.17ce.com/)\n\n- è¿™æ˜¯æˆ‘çš„ è®ºå› \n\n![å±å¹•å¿«ç…§ 2018-11-27 23.40.31.png](http://www.gitrue.com:9000/image/ZFxpaQi9Q7)\n\nå¯ä»¥çœ‹åˆ°ä»…æœ‰å‡ ä¸ªåœ°æ–¹è¿˜ç®—ä¸é”™ï¼Œå…¶ä½™åœ°æ–¹éƒ½æ˜¯ä¸€å¡Œç³Šæ¶‚\n\n- è¿™æ˜¯æ·˜å®\n\n![å±å¹•å¿«ç…§ 2018-11-27 23.41.54.png](http://www.gitrue.com:9000/image/rfx1JQuo20)\n\nä¸ç”¨è¯´äº†å§ï¼Ÿä¸è¿‡è¿˜å¥½ï¼Œè¿™éƒ¨åˆ†æˆ‘ä»¬èµ„é‡‘ä¸è¶³è´¥äº†ä¹Ÿå¾ˆæ­£å¸¸ï¼Œä½†å¤§å®¶å¯èƒ½ä¹Ÿå¤§æ¦‚çŸ¥é“ CDN çš„æ„ä¹‰äº†ï¼Œä¸»è¦æ„ä¹‰ä¸æ˜¯èŠ‚çœå¼€æºé¡¹ç›®æœåŠ¡å™¨å¸¦å®½ï¼Œè€Œæ˜¯å…¨å›½å„ä¸ªèŠ‚ç‚¹çš„è®¿é—®é€Ÿåº¦é—®é¢˜ï¼Œä¹Ÿå°±è§£é‡Šäº†ï¼šæˆ‘éƒ¨ç½²çš„é¡¹ç›®è®¿é—®é€Ÿåº¦è¿˜ä¸é”™ï¼Œä½ è¿™é‡Œæ€ä¹ˆè¿™ä¹ˆæ…¢ï¼Œä½ ç½‘ä¸å¥½å§ï¼ŸCDN æ¥å‘Šè¯‰ä½ ç­”æ¡ˆã€‚\n\n### cookie\n\næˆ‘ä»¬è¿˜æ˜¯æ‹¿å®æˆ˜çš„ [bbsè®ºå›](https://github.com/pkwenda/new-bee) ä¸¾ä¾‹å­å§ï¼ŒæŸ¥çœ‹ç½‘ç»œçŠ¶æ€ï¼š\n\n![33249096-90F2-4E73-A6E8-475DA49D38E7.png](http://www.gitrue.com:9000/image/vzXwT7C3YQ)\n\n**ä½¿ç”¨ CDN çš„å‡ ç‚¹ä¼˜åŠ¿**\n\n- è®¿é—®å¿«\n- æœåŠ¡ç«¯å‹åŠ›å°\n- webpackæ‰“åŒ…å°ä¸”å¿«ï¼ˆä¸‹é¢è®²ï¼‰\n \nå®¢æˆ·ç«¯çš„ cookie æ˜¯ç»‘å®šæœåŠ¡ç«¯ åŸŸå çš„, çœ‹ä¸Šå›¾ï¼Œæˆ‘ä»¬éœ€è¦ XHR è¯·æ±‚æºå¸¦ cookie è®¿é—®æœåŠ¡ç«¯è·å–å¯¹åº”æƒé™ï¼Œä½†è¯•æƒ³ä¸€ä¸‹ï¼šæ¯ä¸€ä¸ª jsã€imgã€ç”šè‡³æ˜¯css éƒ½æºå¸¦åƒåœ¾çš„ cookie ï¼Œåœ¨å¤§ç”¨æˆ·é‡ä¸‹ï¼ŒæœåŠ¡ç«¯æ‰¿å—ç€ä¸åº”è¯¥å±äºä»–çš„ç—›è‹¦ï¼Œè¿™æ ·çš„æ¶ˆè€—æ˜¯ç‰¹åˆ«åº”è¯¥é¿å…çš„ï¼Œæˆ‘ä»¬å¯ä»¥éšä¾¿ç¿»ä¸€ç¿»ä»»ä½•ä¸€ä¸ªæˆç†Ÿçš„ç½‘ç«™ï¼Œéƒ½ä¼šå‘ç°å­˜åœ¨è‡ªå·±çš„ CDN æœåŠ¡ï¼Œè¿™æ ·æ—¢ä¼˜åŒ–äº†ä¸­å›½ä¸åŒåœ°åŒºçš„è®¿é—®é€Ÿåº¦ï¼ŒåŒæ—¶ä¹Ÿå¤§å¤§å‡å°äº†æœåŠ¡ç«¯çš„å¼€é”€ã€‚\n  \n\n\n### èŠ‚çœ webpack æ‰“åŒ…å¤§å°/é€Ÿåº¦\n\nå¾ˆé•¿æ—¶é—´å‰ç»å†è¿‡å…¬å¸å‰ç«¯ webpack ç¼–è¯‘ç‰¹åˆ«æ…¢çš„é—®é¢˜ï¼Œdev æ¨¡å¼ä¸‹æˆ‘ä»¬å¯ä»¥æ³¨æ‰å¼€å‘èŒƒå›´å¤–çš„ è·¯ç”±ï¼Œä½†æ˜¯ build å‘å¸ƒçš„æ—¶å€™ä¼¼ä¹æ²¡æ³•è§£å†³ï¼Œä½¿ç”¨äº† Happypack å¤šçº¿ç¨‹æ‰“åŒ…è¿˜æ˜¯ä¸å¦‚äººæ„ï¼ŒæŸ¥é˜…èµ„æ–™è¯»åˆ°äº† [è¿™ç¯‡æ–‡ç« ](https://zhuanlan.zhihu.com/p/21748318) \n\n![å±å¹•å¿«ç…§ 2018-11-27 23.50.06.png](http://www.gitrue.com:9000/image/GhUzOfu0yx)\n \n\næˆ‘ä»¬å¯ä»¥æŠŠèƒ½å¤Ÿ externals è°ƒçš„æ’é™¤æ‰ï¼Œç„¶åä½¿ç”¨ webpack çš„ webpack.DllPlugin ç”Ÿæˆä¾èµ–åº“ï¼ˆè¿™ç‚¹å¾ˆé‡è¦ï¼‰ï¼Œå¤§å¤§å‡å°‘ä¾¿ä»¥é€Ÿåº¦ï¼ŒDllPlugin æœ¬è´¨ä¸Šçš„åšæ³•å’Œæˆ‘ä»¬æ‰‹åŠ¨åˆ†ç¦»è¿™äº›ç¬¬ä¸‰æ–¹åº“æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯å¯¹äºåŒ…æå¤šçš„åº”ç”¨æ¥è¯´ï¼Œè‡ªåŠ¨åŒ–æ˜æ˜¾åŠ å¿«äº†ç”Ÿäº§æ•ˆç‡ã€‚ \n\n## å¦‚ä½•åˆ†æé¡¹ç›®ä¾èµ–\n\n### webpack-bundle-analyzer\n\nå…¶å®å¾ˆå¤šäººéƒ½çŸ¥é“ï¼Œå¯èƒ½åˆšå…¥å‘çš„åŒå­¦ä¸å¤ªäº†è§£ï¼Œä¸ç®¡æ˜¯ npm maven  éƒ½æœ‰è‡ªå·±ä¸€å¥—ä»¥æ¥åˆ†æå·¥å…·ï¼Œå½“ç„¶ä¹Ÿéƒ½æ¥æºäºç¬¬ä¸‰æ–¹ï¼Œè¿™é‡Œä¸ºå¤§å®¶ä»‹ç» npm çš„ä»¥æ¥åˆ†æå·¥å…·ï¼š [webpack-bundle-analyzer](https://www.npmjs.com/package/webpack-bundle-analyzer) ï¼Œä»–ä¼šåœ¨æµè§ˆå™¨ç”Ÿæˆä¸€ä¸ªæŠ¥è¡¨ï¼Œç›´è§‚çš„å±•ç¤ºå“ªé‡Œå¤§ï¼Œå“ªé‡Œéœ€è¦ä¼˜åŒ–ï¼Œä»¥åŠé¢„æµ‹ gZip çš„å¤§å°ï¼Œè¿˜æ˜¯ä»¥ [å®æˆ˜é¡¹ç›®](https://github.com/pkwenda/new-bee)ä¸ºä¾‹ï¼š\n\næŒ‰ç…§å®˜æ–¹æŒ‡å¼•çš„é…ç½®ï¼Œä¸‹è½½ä¾èµ–ï¼Œpackage.json æ–‡ä»¶æŒ‡å®šä¸‹ build çš„è„šæœ¬ï¼š\n\n```js\n\"analyz\": \"NODE_ENV=production npm_config_report=true npm run buildProd\",\n```\n\nè¿è¡Œä¸€ä¸‹ï¼š\n\n```js\nnpm run analyz\n```\n\n![2018-11-28 01.02.57.gif](http://www.gitrue.com:9000/image/ckDAw8RZgq)\n\næ•ˆæœï¼š\n\n![2018-11-28 01.06.27.gif](http://www.gitrue.com:9000/image/yDqybaf7md)\n\nåˆ†æï¼š\n\nå‘ç°äº†é—®é¢˜ï¼Œ`static/` é™æ€æ–‡ä»¶ä¸‹ hightlight æ–‡ä»¶æ¯”è¾ƒå¤§ï¼Œæœ‰é’±å¯ä»¥è€ƒè™‘ä¸‹ CDNï¼Œ`node_modules/` ä¸‹ element-ui é¥¿äº†ä¹ˆç»„ä»¶æ¯”è¾ƒå¤§ï¼Œï¼ˆæˆ‘æ¯”è¾ƒæ‡’ï¼Œå…¨å±€å¯¼å…¥çš„ï¼Œå¯ä»¥ç”¨å“ªä¸ªå¼•å…¥å“ªä¸ªé¿å…å…¨å±€æ‰“åŒ…é—®é¢˜ï¼‰å¯ä»¥ä¼˜åŒ–ï¼Œç„¶åæ— èŠçš„åŒå­¦æ²¡äº‹å„¿ç‚¹ç‚¹ç©ç©å§ã€‚\n\n\n\n\n\n## webpack æŒ‰éœ€åŠ è½½ ï¼š ä¸€åˆ‡çš†æ¨¡å—\n\nå½“æ‰“åŒ…æ„å»ºåº”ç”¨æ—¶ï¼ŒJavascript åŒ…ä¼šå˜å¾—éå¸¸å¤§ï¼Œå½±å“é¡µé¢åŠ è½½ã€‚å¦‚æœæˆ‘ä»¬èƒ½æŠŠä¸åŒè·¯ç”±å¯¹åº”çš„ç»„ä»¶åˆ†å‰²æˆä¸åŒçš„ä»£ç å—ï¼Œç„¶åå½“è·¯ç”±è¢«è®¿é—®çš„æ—¶å€™æ‰åŠ è½½å¯¹åº”ç»„ä»¶ï¼Œè¿™æ ·å°±æ›´åŠ é«˜æ•ˆäº†ã€‚ Webpack çš„ä»£ç åˆ†å‰²åŠŸèƒ½ï¼Œ å®ç°è·¯ç”±ç»„ä»¶çš„æ‡’åŠ è½½.\n\n **[å®˜æ–¹è¯¦ç»†è¯´æ˜](https://webpack.docschina.org/guides/code-splitting)**\n\nå®˜æ–¹è¯´çš„æŒºè¯¦ç»†äº†ï¼Œè¿™é‡Œå°±å·ä¸ªæ‡’ä¸ä¸Šä»£ç äº†ï¼Œç»™å¤§å®¶æä¾›ä¸€ç§ç»å…¸å¤„ç†æ–¹å¼ï¼Œæˆ‘ä»¬ä¸æ”¾åœ¨ç»„ä»¶ä¸Šï¼Œç›´æ¥å¯¹è·¯ç”±è¿›è¡Œæ‹†åˆ†ï¼Œå…·ä½“å¯ä»¥çœ‹ [å®æˆ˜é¡¹ç›®è·¯ç”±](https://github.com/pkwenda/new-bee/blob/master/bbs-vue/src/renderer/router/index.js) çš„è·¯ç”±æ‹†åˆ†\n\nä¼šå‘ç°å¾ˆå¤šè¿™ç§æ³¨é‡Šï¼š\n\n```js\nconst Blog = () => import(/* webpackChunkName: \"blog\" */ '@/container/blog/Blog')\n```\n\né‚£ä¹ˆç±»ä¼¼ï¼š\n\n```js\n/* webpackChunkName: \"blog\" */\n```\n\nä¸æ˜¯ç™½å†™çš„ï¼Œä»–æ˜¯é…åˆ webpack å¯¹é¡¹ç›®å„è·¯ç”±æ‹†åˆ†çš„ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹çœ‹ [å®é™…é¡¹ç›®åŠ è½½æƒ…å†µ](http://www.gitrue.com/)  ï¼š\n\n![2018-11-28 00.41.32.gif](http://www.gitrue.com:9000/image/gBUiuO8kT9)\n \n\nè¿™ä¸ª `blog.hash.js`\n\nä¸æ˜¯æˆ‘ä»¬å†™çš„ï¼Œæ˜¯ webpack è¿›è¡Œåˆ†å‰²çš„ï¼Œè¿™æ ·ç±»ä¼¼ vue è¿™æ ·çš„å•é¡µé¢æ¶æ„ï¼Œä¸ä¼šåŠ è½½æŸæ¨¡å—æ€»æ˜¯åŠ è½½å…¨éƒ¨è„šæœ¬ï¼Œå¤§å¤§æå‡åŠ è½½é€Ÿåº¦ã€‚\n\n\n\n## å›¾ç‰‡å¤„ç†\n\næœ¬æ¥ä¸æƒ³è®²çš„ï¼Œç®€å•è¯´è¯´å§ï¼Œå¸¸ç”¨çš„ä¹Ÿå°±é‚£å‡ ç§ svg ã€base64ã€ æˆ–ä½¿ç”¨fastdfsç»„ä»¶ç±»ä¼¼ CDN çš„æœåŠ¡ã€‚\n\n### base64\n\nç®€å•æ¥è®² base64 ä¼šå‡å°‘ä½ çš„ http è¯·æ±‚æ•°é‡ï¼Œè¦çŸ¥é“ XHR å¯ä¸æ˜¯çœæ²¹çš„ç¯ï¼Œä»–ä¼šå¸¦æ¥é¢å¤–çš„å¤„ç†è¯·æ±‚å’Œå¤„ç†å“åº”æŸè€—ï¼Œä»¥è¡¨æƒ…ä¸ºä¾‹ï¼ŒåŠ¨è¾„å‡ åä¸ªè¡¨æƒ… http è¯·æ±‚ä¼¼ä¹å¤ªæ™ºéšœäº†ä¸€äº›ï¼Œé€šå¸¸é‡‡ç”¨ base64 å¤„ç†ï¼Œå‡å°‘äº† http è¯·æ±‚æ•°é‡ï¼Œä½†æ˜¯å¢å¤§äº†å›¾ç‰‡æœ¬èº«çš„ä½“ç§¯ï¼Œå¦‚æœä½ ç”¨äº†webpack ä¸”ä½ çš„è¡¨æƒ…åœ¨æœ¬åœ°ï¼Œé‚£ä¹ˆ webpack å¯ä»¥å¸®ä½ è‡ªåŠ¨è¿›è¡Œ base64 ç¼–ç å“¦ã€‚\n\n### å‹ç¼©å›¾ç‰‡\n\nç”¨æˆ·ä¸Šä¼ çš„å›¾ç‰‡å¯ä»¥é€šè¿‡å‹ç¼©å›¾ç‰‡å¤§å°æˆ–è´¨é‡å‡å°‘å¸¦å®½å“¦ï¼Œé€šå¸¸ä½¿ç”¨ [GM](https://github.com/aheckmann/gm) å¯¹ç”¨æˆ·ä¸Šä¼ çš„æœ‰å¿…è¦å¤§é”çš„å›¾ç‰‡ å‹ç¼©æˆä¸åŒå¤§å°çš„ï¼Œæ ¹æ®ä¸šåŠ¡åŠ è½½ï¼Œæ¯”å¦‚å¤´åƒï¼Œé»˜è®¤è‚¯å®šä¸ä¼šè¯·æ±‚åŸå§‹å›¾ç‰‡ï¼Œä»Šæ—¥å¤´æ¡çš„æ­£æ–‡ï¼Œä½¿ç”¨æµé‡çš„æƒ…å†µä¸‹ä¹Ÿä¼šé»˜è®¤åŠ è½½å°å›¾ï¼Œè¿™äº›éƒ½ä¸æ˜¯å®¢æˆ·ç«¯èƒ½åšåˆ°çš„ï¼Œéœ€è¦æœåŠ¡ç«¯å‹ç¼©ã€‚\n\n\n## ç»“è¯­\n\nå½“ç„¶è¿™äº›çŸ¥è¯†ä¸‡é‡Œé•¿å¾çš„ç¬¬ä¸€æ­¥ï¼Œä»¥åçš„ä¼˜åŒ–ä¹‹è·¯èŒ«èŒ«å¤šï¼Œèƒ½å¤§æ¦‚æƒ³èµ·æ¥çš„æ¯”å¦‚ ï¼šLazy-Loadï¼ˆä¼˜åŒ–é¦–å±ä½“éªŒï¼‰ã€PWAï¼ˆæ„å»ºweb APPï¼‰ã€æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆä¸ºäº†SEOï¼‰ã€éª¨æ¶å±ï¼ˆæå‡ç”¨æˆ·ä½“éªŒï¼‰ï¼Œåç«¯å’ŒæœåŠ¡ç«¯æ–‡ç« è¿˜æ²¡å†™ï¼Œ 1.0 ç‰ˆæœ¬å°±æ”¾è¿™äº›å§ï¼ŒæœŸå¾…ç¬¬äºŒç‰ˆå¡«å‘ï¼Œä¸‹ç¯‡å¼€å§‹åç«¯ã€‚\n\nSO  -  åŠªåŠ›å§!\n \nåšå®¢å½’æ¡£åœ°å€ï¼š[https://github.com/pkwenda/blog](https://github.com/pkwenda/blog)\n\nåšå®¢å®ä¾‹åœ°å€ï¼š[https://github.com/pkwenda/new-bee](https://github.com/pkwenda/new-bee)\n\n", "user_name": "åº„æ–‡è¾¾", "description": "don't know What should be said", "got_view_count": 104076, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "æ•°æ®åˆ†æ", "concern_user_count": 16705, "user_id": "1838039172387262", "title": "æ²™é¾™å›é¡¾ï½œClickHouse åœ¨å­—èŠ‚å¹¿å‘Š DMP& CDP çš„åº”ç”¨", "mark_content": "\n\n> å¹¿å‘Šæ˜¯æ”¯æ’‘äº’è”ç½‘é«˜é€Ÿå‘å±•çš„ç»æµåŸºçŸ³ï¼Œä¹Ÿæ˜¯å¾ˆå¤šäº’è”ç½‘å…¬å¸çš„é‡è¦æ”¶å…¥æ¥æºã€‚å­—èŠ‚è·³åŠ¨çš„å¹¿å‘Šå¹³å°ç®¡ç†ç€ EB é‡çº§çš„æ•°æ®å’ŒæœåŠ¡ç€æ•°ä»¥åƒä¸‡çš„å•†ä¸šç”¨æˆ·ï¼Œå…¶ä¸­ ClickHouse ä½œä¸ºæ ¸å¿ƒå¼•æ“æ”¯æ’‘äº†æµ·é‡æ•°æ®åœ¨çº¿åˆ†æçš„éœ€æ±‚ã€‚<br><br>\n> æœ¬æ¬¡åˆ†äº«ä¸­ï¼Œä»‹ç»äº† ClickHouse åœ¨å­—èŠ‚è·³åŠ¨å¹¿å‘Šä¸šåŠ¡ä¸Šçš„åº”ç”¨ä¸å®è·µï¼ŒåŒ…å«äººç¾¤é¢„ä¼°ã€æ•°æ®åˆ†æã€äººç¾¤ç”»åƒç­‰å¤šä¸ªåœºæ™¯ã€‚å…¶ä¸­ç€é‡ä»‹ç»äº†å¦‚ä½•é€šè¿‡æ·±åº¦ä¼˜åŒ–é«˜æ•ˆè§£å†³å¹¿å‘Šäººç¾¤é¢„ä¼°çš„é—®é¢˜ï¼Œä»¥åŠæœªæ¥çš„è¿­ä»£è®¡åˆ’ã€‚<br><br>\nï¼ˆæ–‡æœ«é™„ ClickHouse æ²™é¾™ç¬¬ä¸‰åœºï¼šã€ŠClickHouse åœ¨å®æ—¶åœºæ™¯çš„åº”ç”¨å’Œä¼˜åŒ–ã€‹æŠ¥åæ–¹å¼ï¼‰\n\n# æ²™é¾™è§†é¢‘\n\n### [ClickHouse åœ¨å­—èŠ‚å¹¿å‘Š DMP& CDP çš„åº”ç”¨](https://www.ixigua.com/6856602552218157580/)\n\n#### è®²å¸ˆï¼šè‘£ä¸€å³° å­—èŠ‚è·³åŠ¨ ClickHouse ç ”å‘å·¥ç¨‹å¸ˆ\n\n\n# æ–‡å­—æ²‰æ·€\n## ä¸šåŠ¡èƒŒæ™¯\n\nä¼—æ‰€å‘¨çŸ¥ï¼Œå¹¿å‘Šæ˜¯å¾ˆå¤šäº’è”ç½‘å…¬å¸çš„ä¸»è¦æ”¶å…¥ï¼Œå¯¹äºå­—èŠ‚è·³åŠ¨æ¥è¯´ä¹Ÿæ˜¯å¦‚æ­¤ã€‚é‚£ä¹ˆï¼Œåœ¨å­—èŠ‚è·³åŠ¨å¹¿å‘Šçš„ DMP&CDP ä¸šåŠ¡ï¼Œä¹ƒè‡³æ‰€æœ‰å¹¿å‘Šä¸šåŠ¡ä¸­ï¼Œæœ‰å“ªäº›åœºæ™¯åœ¨ä½¿ç”¨ ClickHouse å‘¢ï¼Ÿæ˜¯åœ¨çº¿æœåŠ¡è¿˜æ˜¯ç¦»çº¿ç»Ÿè®¡çš„å‘¢ï¼Ÿåº”è¯¥è¯´éƒ½æœ‰ã€‚\n\nå¯ä»¥ä»ä¸‰ä¸ªåœºæ™¯æ¥è®²ï¼šäººç¾¤é¢„ä¼°ã€äººç¾¤ç”»åƒå’Œç»Ÿè®¡åˆ†æã€‚\n\n**äººç¾¤é¢„ä¼°**ä¸»è¦æ˜¯æ ¹æ®ä¸€å®šçš„åœˆé€‰æ¡ä»¶ï¼Œç¡®è®¤å‘½ä¸­çš„ç”¨æˆ·æ•°ç›®ã€‚åœ¨å¹¿å‘Šç²¾å‡†æŠ•æ”¾è¿‡ç¨‹ä¸­ï¼Œå¹¿å‘Šä¸»éœ€è¦çŸ¥é“å½“å‰é€‰å®šçš„äººç¾¤ç»„åˆä¸­å¤§æ¦‚ä¼šæœ‰å¤šå°‘äººï¼Œç”¨äºè¾…åŠ©åˆ¤æ–­æŠ•æ”¾æƒ…å†µè¿›è€Œç¡®å®šæŠ•æ”¾é¢„ç®—ã€‚å› ä¸ºæ˜¯åœ¨çº¿ä¸šåŠ¡ï¼Œä¸€èˆ¬è¦æ±‚è®¡ç®—çš„æ—¶é—´ä¸èƒ½è¶…è¿‡ 5 ç§’ã€‚\n\n**äººç¾¤ç”»åƒ**ä¸»è¦æ˜¯å¯¹å¹¿å‘ŠæŠ•æ”¾çš„ç”¨æˆ·ç¾¤è¿›è¡Œç”»åƒåˆ†æï¼Œä¹Ÿæ˜¯åœ¨çº¿çš„ï¼ŒåŒæ ·å¯¹æ—¶é—´æœ‰ä¸€å®šçš„è¦æ±‚ï¼Œå› ä¸ºæ˜¯ååˆ†æçš„åœºæ™¯ï¼Œä¸€èˆ¬ä¸èƒ½è¶…è¿‡ 20 ç§’ï¼Œå¦åˆ™ç”¨æˆ·çš„ä½“éªŒå°±éå¸¸å·®äº†ã€‚\n\n**ç»Ÿè®¡åˆ†æ**çš„ä½¿ç”¨åœºæ™¯æ¯”è¾ƒå¤šï¼Œåœ¨çº¿ã€ç¦»çº¿éƒ½æœ‰ï¼ŒåŒ…æ‹¬ä¸€äº›æœç´¢è¯ç»Ÿè®¡åˆ†æï¼Œå¹¿å‘Šã€æŠ•æ”¾æ”¶å…¥æ•°æ®çš„åˆ†æç­‰ç­‰ï¼Œåº”ç”¨çš„æ–¹é¢å¾ˆå¤šã€‚\n\næˆ‘ä»Šå¤©ä¸»è¦åˆ†äº«çš„æ˜¯äººç¾¤é¢„ä¼°ï¼Œå› ä¸ºè¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¤§çš„éš¾ç‚¹ã€‚è€Œå¯¹äºç»Ÿè®¡åˆ†ææ¥è¯´æœ¬èº«å°±æ˜¯ ClickHouse çš„å¼ºé¡¹ã€‚\n\nå°±å¦‚æˆ‘ä¹‹å‰è¯´çš„ï¼Œäººç¾¤é¢„ä¼°å°±æ˜¯æ ¹æ®ä¸€å®šçš„åœˆé€‰æ¡ä»¶ï¼Œç¡®è®¤å‘½ä¸­çš„ç”¨æˆ·æ•°ç›®ã€‚æ¯”å¦‚ä¸‹å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨æŠ•æ”¾å¹¿å‘Šçš„æ—¶å€™ï¼Œå¯ä»¥æ ¹æ®åœ°åŸŸã€æ€§åˆ«ã€å¹´é¾„ã€å…´è¶£ã€é¦–æ¬¡æ¿€æ´»æ—¶é—´ç­‰æ¡ä»¶è¿›è¡Œåœˆé€‰ã€‚å…¶æœ¬è´¨å°±æ˜¯é›†åˆçš„å¿«é€Ÿäº¤å¹¶è¡¥è®¡ç®—ã€‚\n\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f77ce224b3154d7ea3d7371d9179f9bc~tplv-k3u1fbpfcp-zoom-1.image)\n\nä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œå‡è®¾ä¸€ä¸ªæœ›è¿œé•œå‚å•†æƒ³é€šè¿‡æŠ•æ”¾å¹¿å‘Šå¸å¼•ç”¨æˆ·è´­ä¹°ã€‚é‚£ä¹ˆå‡è®¾ä»–æƒ³æŠ•ç»™åœ¨åŒ—äº¬çš„å–œæ¬¢æˆ·å¤–æˆ–è€…çˆ¬å±±çš„äººã€‚æœ¬è´¨ä¸Šæ¥è¯´ï¼Œæˆ‘ä»¬å°±æ˜¯é€šè¿‡é›†åˆè¿ç®—ï¼ŒæŠŠå–œæ¬¢æˆ·å¤–å’Œå–œæ¬¢çˆ¬å±±çš„äººç¾¤æ±‚å¹¶é›†ï¼Œç„¶åä¸åŒ—äº¬çš„äººç¾¤æ±‚äº¤é›†ï¼Œä¹Ÿå°±æ˜¯**åŒ—äº¬**çš„å–œæ¬¢**æˆ·å¤–**æˆ–è€…**çˆ¬å±±**çš„äººã€‚\n\nè¿™ä¸ªç»“æœå°±æ˜¯æˆ‘ä»¬æƒ³è¦æŠ•å¹¿å‘Šå¯¹åº”çš„çš„äººç¾¤ï¼Œè€Œæˆ‘ä»¬çš„ç›®æ ‡å°±æ˜¯èƒ½å¤Ÿå¿«é€Ÿåœ°æ±‚è¿™ä¸ªäººç¾¤å¯¹åº”çš„ç”¨æˆ·æ•°ã€‚\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5e20332711934ce1909614fadb0f4fd5~tplv-k3u1fbpfcp-zoom-1.image)\n\nå› æ­¤ï¼Œæˆ‘ä»¬å‡è®¾å¹³å°çš„å…¨é‡ç”¨æˆ·æ˜¯ 8 äººï¼Œåˆ†åˆ«æ˜¯ä» uid1 åˆ° uid8ã€‚å…¶ä¸­åŒ—äº¬å…±æœ‰ 5 äººï¼Œåˆ†åˆ«æ˜¯ uid 1 åˆ° uid5ï¼Œå¯¹åº”é›†åˆ Aï¼›å–œæ¬¢æˆ·å¤–çš„æ˜¯ uid1 å’Œ 4ï¼Œå¯¹åº”é›†åˆ Bï¼›å–œæ¬¢çˆ¬å±±çš„æ˜¯ uid 1ã€3ã€5ã€6ï¼Œå¯¹åº”é›†åˆ Cã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬æƒ³è¦æŠ•æ”¾å¹¿å‘Šçš„äººæ•°æ˜¯ A äº¤ä¸Š B å’Œ C çš„å¹¶é›†ï¼Œuid 1ã€3ã€4ã€5 å…± 4 äººã€‚\n\nå¬èµ·æ¥å°±æ˜¯é›†åˆè¿ç®—ï¼Œå¹¶ä¸å¤æ‚ã€‚é‚£ä¹ˆéš¾ç‚¹å’ŒæŒ‘æˆ˜åœ¨å“ªé‡Œï¼Ÿä¸»è¦æ˜¯ 3 ä¸ªæ–¹é¢ï¼š\n\n1. äººç¾¤åŒ…æ•°æ®é‡å¤šï¼ŒåŸºæ•°å¤§ã€‚å¹³å°çš„ç”¨æˆ·æ•°ä¸Šäº¿ï¼Œä»…æŠ–éŸ³çš„ DAU å°±å¥½å‡ äº¿ï¼ŒæŠ–éŸ³ã€å¤´æ¡å¯¹åº”çš„äººç¾¤åŒ…åœ¨äº¿çº§åˆ«ã€‚æ•´ä½“çš„äººç¾¤åŸºæ•°å¤§ï¼Œå¯¹åº”çš„æ ‡ç­¾ä¹Ÿéå¸¸å¤šã€‚\n2. è®¡ç®—å¤æ‚ï¼ˆå•æ¬¡è®¡ç®—å¯èƒ½åŒ…å«å‡ ç™¾ä¸Šåƒä¸ªäººç¾¤åŒ…ï¼‰ï¼Œä»ä¹‹å‰çš„å›¾æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œå¹¿å‘Šä¸»å¯ä»¥è®¾å®šä¸€ä¸ªéå¸¸å¤æ‚çš„åœˆé€‰æ¡ä»¶ã€‚\n3. æŸ¥è¯¢æ—¶é•¿è¦æ±‚çŸ­ï¼ˆå°äº 5 sï¼‰ï¼Œå…¶å®å¦‚æœé¡µé¢ä¸Šç­‰å¾…æ—¶é—´è¶…è¿‡ 1sï¼Œæ˜¯æœ‰æ˜æ˜¾æ„ŸçŸ¥ã€‚å¦‚æœè¶…è¿‡ 5 sï¼Œé‚£ä¹ˆå¹¿å‘Šä¸»çš„ä½“éªŒç¡®å®ä¼šéå¸¸ä¸å¥½ã€‚\n\né™¤äº†è¿™ä¸ªä¹‹å¤–ï¼Œäººç¾¤æƒé™è®¡ç®—çš„äººç¾¤åŒ…è¿˜éœ€è¦ä¸å…¶ä»–æ•°æ® join è¿›è¡Œåˆ†æï¼Œè¿™å°±æ„å‘³ç€è¯´æˆ‘ä»¬ä¸ä»…ä»…åªå‡ºä¸€ä¸ªæ•°ï¼Œè¿˜æœ‰æ¯”è¾ƒå¤æ‚çš„è®¡ç®—ã€‚æˆ‘ä»¬çš„è®¡ç®—å¼•æ“å¿…é¡»è¦æœ‰ä¸€å®šçš„åˆ†æèƒ½åŠ›ï¼Œèƒ½å¤Ÿè¿›è¡Œå¤æ‚çš„åˆ†æè®¡ç®—ã€‚\n\nåœ¨ä½¿ç”¨ ClickHouse ä¹‹å‰æˆ‘ä»¬ä¹Ÿå°è¯•äº†ä¸å°‘å·²æœ‰çš„ç³»ç»Ÿï¼Œå¦‚ Druidã€ESã€Sparkï¼Œç”šè‡³ä¸šåŠ¡æ–¹è¿˜è‡ªç ”è¿‡ä¸€ä¸ªç³»ç»Ÿã€‚å…¶ä¸­ Druidã€ESã€Spark å‡ä¸èƒ½å¾ˆå¥½çš„æ»¡è¶³æ—¶é—´æœŸæœ›ã€‚è‡ªç ”çš„ç³»ç»Ÿå› ä¸ºæˆ‘ä»¬å¯ä»¥é«˜åº¦çš„å®šåˆ¶åŒ–ï¼Œæ€§èƒ½ä¸Šèƒ½å¤Ÿä¸Šæ¥ï¼Œä½†ç¼ºä¹ä¸€å®šçš„çµæ´»æ€§ã€‚\n\nå› æ­¤ï¼Œé€šè¿‡å¯¹æ¯”æˆ‘ä»¬é€‰æ‹©äº† ClickHouseã€‚åŸå› ä¸»è¦æœ‰ä¸¤ä¸ªæ–¹é¢\n\n- ç¬¬ä¸€æ˜¯å¿«ï¼Œç‰¹åˆ«é€‚ç”¨äºå¤§å®½è¡¨çš„åœºæ™¯ï¼Œè¿™ä¸ªæ˜¯å…¶ä»–å¼•æ“æ‰€ä¸èƒ½æ¯”æ‹Ÿçš„ã€‚\n- ç¬¬äºŒæ˜¯æ¶æ„ç®€å•ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå¥½åœ°åšå¾ˆå¤šå®šåˆ¶åŒ–çš„å¼€å‘ï¼Œç”šè‡³å»ä¿®æ”¹æ•´ä¸ªæ‰§è¡Œé€»è¾‘ï¼Œè¿™ä¸ªæˆ‘åé¢ä¼šæåˆ°ï¼Œæˆ‘ä»¬å…¶å®å¯¹äº ClickHouse æœ‰æ¯”è¾ƒå¤§çš„æ”¹åŠ¨ã€‚\n\n## æŠ€æœ¯æ–¹æ¡ˆ V1\n\né‚£ä¹ˆé¦–å…ˆæ˜¯æˆ‘ä»¬çš„ç¬¬ä¸€ç‰ˆæŠ€æœ¯æ–¹æ¡ˆï¼Œè¿™ä¸ªæŠ€æœ¯æ–¹æ¡ˆçš„èƒŒæ™¯æ˜¯ï¼Œä¸šåŠ¡æå‡ºæ¥å¸Œæœ›èƒ½å¤Ÿå°½å¿«ä¸Šçº¿ï¼Œæ—¶é—´æ¯”è¾ƒç´§ã€‚\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f8ca6f9b436b47a0bbbbfa96e335a641~tplv-k3u1fbpfcp-zoom-1.image)\n\næˆ‘ä»¬é‡‡ç”¨æ˜ç»†å­˜å‚¨çš„æ–¹å¼ï¼Œè¡¨æœ‰ 2 åˆ—ï¼Œåˆ†åˆ«æ˜¯ tag_id å’Œ uidã€‚æ¯ä¸€ä¸ª tag_id è¡¨ç¤ºä¸€ä¸ªäººç¾¤åŒ…ï¼Œuid æ˜¯å¯¹åº”çš„ç”¨æˆ· idã€‚é‚£ä¹ˆå¦‚æœæ˜¯ä¸€ä¸ªæ¯”è¾ƒå¤§çš„äººç¾¤åŒ…ï¼Œå¯èƒ½éœ€è¦ç”¨ä¸Šäº¿è¡Œæ¥è¡¨ç¤ºã€‚æˆ‘ä»¬å¯¹ tag_id å»ºç«‹äº†ä¸»é”®ï¼Œå› æ­¤å¯ä»¥å¿«é€Ÿçš„æ‰¾å‡ºå¯¹åº”çš„ç”¨æˆ· id é›†åˆã€‚é›†åˆçš„äº¤é›†æ“ä½œä¼šè½¬åŒ–ä¸º inï¼Œå¹¶é›†ä¸º orï¼Œè¡¥é›†ä¸º not in è¡¨ç¤ºã€‚\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ce7bcb7a53cd4a8092d0793f76754897~tplv-k3u1fbpfcp-zoom-1.image)\n\næˆ‘ä»¬çœ‹ä¸€ä¸ªå…·ä½“çš„ä¾‹å­ã€‚å¦‚æœæˆ‘ä»¬è¦æ±‚ A äº¤ä¸Š B å’Œ C çš„å¹¶é›†ã€‚é‚£ä¹ˆå¯¹åº”çš„ sql å°±æ˜¯å¦‚æ­¤ã€‚å…¶ä¸­ï¼Œäº¤é›†æ˜¯é‡‡ç”¨ in å­æŸ¥è¯¢çš„æ–¹å¼ã€‚å¹¶é›†ç›´æ¥ç”¨ or è¡¨ç¤ºã€‚å…¶ä¸­ï¼ŒSELECT distinct uid FROM tag_uid_map WHERE (tag_id = B) OR (tag_id = C) ç”¨æ¥è¡¨ç¤º B | Cã€‚SELECT count distinct(uid) FROM tag_uid_map WHERE tag_id = A è¡¨ç¤ºé›†åˆ Aï¼Œuid IN è¡¨ç¤ºæ±‚äº¤é›†è®¡ç®—ã€‚\n\n```\nA&(B|C)\nSELECT count distinct(uid)\nFROM tag_uid_map\nWHERE tag_id = A\nAND uid IN (\nSELECT distinct uid\nFROM tag_uid_map\nWHERE (tag_id = B) OR (tag_id = C)\n)\n```\n\nåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æƒ³è¦å¿«é€Ÿçš„æ±‚å‡º sql çš„ç»“æœï¼Œé‡‡ç”¨äº† 2 ä¸ªä¼˜åŒ–æ–¹å‘ï¼š\n\n1. å› ä¸º clickhouse æ˜¯åˆ†å¸ƒå¼æ•°æ®åº“ï¼Œæˆ‘ä»¬å¸Œæœ›å°½å¯èƒ½å¹¶è¡Œè®¡ç®—ï¼Œå‡å°‘èŠ‚ç‚¹ä¹‹é—´æ•°æ®ä¼ è¾“ï¼ŒæŠŠè®¡ç®—ä¸‹æ¨ä¸‹å»ï¼Œå‡å°‘æ±‡èšèŠ‚ç‚¹çš„è®¡ç®—å‹åŠ›ã€‚\n2. å› ä¸ºæœ€åè¦è·å–å»é‡åçš„ç”¨æˆ·æ•°ï¼Œçœ‹çœ‹å¦‚ä½•èƒ½å¤Ÿå¿«é€Ÿè®¡ç®— count distinctã€‚ä¸Šä¸€æ¬¡åˆ†äº«ä¹Ÿæœ‰äººé—®å­—èŠ‚æ˜¯å¦åœ¨ count distinct åšè¿‡ä¸€äº›ä¼˜åŒ–ï¼Ÿæˆ‘ä»¬ä¹Ÿåšäº†ä¸€äº›ä¼˜åŒ–å’Œå°è¯•ã€‚\n\n![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/195acd2b1f7c4bde89c36f6c4bfd32d2~tplv-k3u1fbpfcp-zoom-1.image)\n\næˆ‘ä»¬ç»§ç»­çœ‹ä¹‹å‰çš„åœºæ™¯ï¼Œ A äº¤ä¸Š B å’Œ C çš„å¹¶é›†ã€‚æˆ‘ä»¬æœ‰æ²¡æœ‰åŠæ³•èƒ½å¤Ÿåˆ’åˆ†ä¸åŒçš„åŒºé—´è¿›è¡Œå¹¶è¡Œè®¡ç®—å‘¢ï¼Ÿç­”æ¡ˆå½“ç„¶æ˜¯æœ‰çš„ã€‚\n\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c80903210c344338b0da7ce9f2de158b~tplv-k3u1fbpfcp-zoom-1.image)\n\nå¦‚æœæˆ‘ä»¬æŠŠç”¨æˆ· id æŒ‰ç…§å¥‡æ•°å¶æ•°åˆ†ä¸º 2 ä¸ªåŒºé—´ï¼Œå¯ä»¥ä¿è¯ä¸€ä¸ªç”¨æˆ·åªä¼šåœ¨ä¸€ä¸ªåŒºé—´å†…ï¼Œå› ä¸ºç”¨æˆ·çš„ id è¦ä¹ˆæ˜¯å¥‡æ•°è¦ä¹ˆæ˜¯å¶æ•°ï¼Œä¸”åŒºé—´ä¹‹é—´ç”¨æˆ· id ä¸é‡å¤ã€‚é‚£ä¹ˆ A B C ä¹ŸåŒæ ·åˆ’åˆ†ä¸ºå¥‡å¶ä¸¤ä¸ªåŒºé—´ã€‚åœ¨è¿™æ ·çš„åŸºç¡€ä¸Šï¼Œå¯ä»¥åœ¨åŒºé—´å†…å•ç‹¬çš„è®¡ç®—å­é›†åˆçš„ç»“æœæœ€åå¯¹åŒºé—´è®¡ç®—ç»“æœè¿›è¡Œæ±‡æ€»ã€‚A äº¤ä¸Š B å’Œ C çš„å¹¶é›†å°±ç­‰äº A*å¥‡æ•°é›†åˆ äº¤ä¸Š B*å¥‡æ•°é›†åˆå’Œ C*å¥‡æ•°é›†åˆçš„å¹¶é›† å¹¶ä¸Š A*å¶æ•°é›†åˆ äº¤ä¸Š B*å¶æ•°é›†åˆå’Œ C*å¶æ•°é›†åˆçš„å¹¶é›†çš„ç»“æœã€‚å¯¹äºäººç¾¤é¢„ä¼°æ¥è¯´ï¼Œæˆ‘ä»¬æ›´å…³å¿ƒé›†åˆçš„æ•°ç›®ã€‚A äº¤ä¸Š B å’Œ C çš„å¹¶é›†æ‰€å¯¹åº”ç”¨æˆ·çš„ä¸ªæ•°å¯ä»¥è½¬åŒ–ä¸ºï¼ŒA*å¥‡æ•°é›†åˆ äº¤ä¸Š B*å¥‡æ•°é›†åˆå’Œ C*å¥‡æ•°é›†åˆçš„å¹¶é›†æ‰€å¯¹åº”ç”¨æˆ·çš„ä¸ªæ•°åŠ ä¸Š A*å¶æ•°é›†åˆ äº¤ä¸Š B*å¶æ•°é›†åˆå’Œ C*å¶æ•°é›†åˆçš„å¹¶é›†çš„ç”¨æˆ·æ•°ã€‚å› æ­¤ï¼Œé€šè¿‡æŠŠç”¨æˆ· id åˆ’åˆ†åˆ°ä¸åŒçš„é›†åˆï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ¯ä¸ªé›†åˆä¸Šå¹¶è¡Œè®¡ç®—ã€‚æœ€ååªéœ€è¦æŠŠæ¯ä¸ªé›†åˆçš„ç”¨æˆ·æ•°åšä¸€æ¬¡ç´¯åŠ å°±å¯ä»¥ï¼Œæˆ‘ä»¬çš„è®¡ç®—æ–¹å¼å°±æ˜¯è¿™æ ·çš„ã€‚\n\nä»¥ A äº¤ B ä¸ºä¾‹ï¼š\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f298e01ec02e41618264c3b43f74b4bd~tplv-k3u1fbpfcp-zoom-1.image)\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/72d3d314583e402c8c9e6f60c4f18b3f~tplv-k3u1fbpfcp-zoom-1.image)\n\næˆ‘ä»¬åœ¨æ•°æ®å¯¼å…¥çš„æ—¶å€™æŒ‰ç…§ç”¨æˆ· id åˆ’åˆ†ä¸º 4 ä¸ªåŒºé—´ï¼Œåˆ†åˆ«å¯¼å…¥åˆ° 4 å°ä¸åŒçš„æœºå™¨ï¼Œä¿è¯æ¯å°æœºå™¨ä¸Šçš„ç”¨æˆ·ä¸é‡å¤ã€‚è¿™æ ·åœ¨æ¯ä¸€å°æœºå™¨è®¡ç®—å®Œç»“æœåï¼Œç›´æ¥æŠŠç»“æœè¿›è¡Œæ±‡æ€»ã€‚åŒæ—¶ï¼Œåœ¨äººç¾¤é¢„ä¼°çš„åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬è¿”å›çš„æ˜¯å­åŒºé—´ count distinct ç»“æœï¼Œè€Œä¸æ˜¯å¯¹åº”çš„èšåˆå‡½æ•°ä¸­é—´çŠ¶æ€ã€‚è¿™æ ·å¯ä»¥å¤§å¤§å‡å°‘è¾“çš„æ•°æ®é‡ã€‚åŒæ—¶ï¼Œæœ€ååªéœ€è¦åšä¸€æ¬¡ç´¯åŠ ï¼Œä¸éœ€è¦æŠŠèšåˆå‡½æ•°ä¸­é—´çŠ¶æ€è¿›è¡Œ merge åæ±‚å»é‡åç»“æœã€‚å®é™…åœºæ™¯çš„è¯æˆ‘ä»¬åˆ’åˆ†çš„åŒºé—´æ•°å¯èƒ½è¦æ¯”æœºå™¨æ•°è¦å¤šï¼Œè¿™æ ·æ‰å¯èƒ½å¹¶è¡Œå¯¼å…¥ã€‚\n\nå› æ­¤ï¼Œåœ¨ clickhouse ä¸Šçš„æ”¹åŠ¨ä¸»è¦æ˜¯ä¸¤ä¸ªï¼š\n\n1. å¯¼å…¥çš„æ—¶å€™æŒ‰ç…§ uid åˆ†ç‰‡ï¼Œå®é™…ä¸­è‚¯å®šä¸æ˜¯æŒ‰ç…§å¥‡å¶æ¥åˆ’åˆ†äº†\n2. æ‰©å……äº† sql è¯­æ³•ï¼Œå¹¶è¡Œè®¡ç®—ï¼Œä¿®æ”¹äº†å¼•æ“çš„æ‰§è¡Œé€»è¾‘ã€‚æ”¯æŒ count distinct ä¸­é—´ç»“æœä¸åš merge ç›´æ¥è¿›è¡Œç´¯åŠ \n\nç¬¬äºŒä¸ªä¼˜åŒ–æ˜¯å¿«é€Ÿè®¡ç®— count distinctï¼Œè¿™é‡Œæˆ‘ä»¬åšè¿‡å‡ ä¸ªæ–¹å‘çš„å°è¯•ï¼Œæ¯”è¾ƒé€šç”¨çš„æ€è·¯æœ‰ä¸¤ä¸ªï¼š\n\n1. ä¼˜åŒ– hash å‡½æ•°ï¼Œèƒ½å¤Ÿå¿«é€Ÿæ±‚å‡º hash ç»“æœã€‚\n2. é€šè¿‡ä¸€äº›è¿‘ä¼¼å‡½æ•°çš„æ–¹å¼ï¼Œåœ¨å…è®¸ä¸€å®šçš„è¯¯å·®çš„æƒ…å†µä¸‹å¿«é€Ÿæ±‚å‡ºç»“ç®—ç»“æœï¼Œæ¯”å¦‚ UniqHLL12/UniqCombined ç­‰ã€‚\n\nå…¶ä»–è¿˜æœ‰ä¸€äº›æ€è·¯åæ¢ç´¢ï¼Œä¸»è¦æ˜¯ç²¾ç¡®ç®—æ³•ä¸‹ä¼˜åŒ– hash è¡¨çš„ç»“æ„ï¼Œå‡å°‘ hash å†²çªã€‚\n\néšç€ä¸Šé¢çš„ä¸€ç³»åˆ—ä¼˜åŒ–åï¼Œç¬¬ä¸€ç‰ˆæœ¬çš„æ–¹æ¡ˆä¸Šçº¿äº†ã€‚\n\n- ä¼˜ç‚¹æ˜¯åŸºæœ¬èƒ½æ»¡è¶³éœ€æ±‚ï¼Œå¤§éƒ¨åˆ†çš„æŸ¥è¯¢éƒ½å°äº 5 sã€‚\n- ç¼ºç‚¹æ˜¯å½“è¡¨è¾¾å¼éå¸¸å¤æ‚ï¼Œç‰¹åˆ«æ˜¯å­˜åœ¨å¾ˆå¤šçš„äº¤é›†å’Œè¡¥é›†çš„æ—¶å€™ï¼Œç”±äºäº¤é›†å’Œè¡¥é›†éœ€è¦ç”¨å­æŸ¥è¯¢æ¥å®ç°ï¼ŒSQL ä¼šéå¸¸é•¿ï¼Œå¯¹ç”¨æˆ·å¾ˆä¸å‹å¥½ï¼Œä¸”ä¸åˆ©äºåˆ†æã€‚\n- å…¶æ¬¡ï¼Œå½“äººç¾¤åŒ…éå¸¸å¤§ä¸”è¡¨è¾¾å¼å¤æ‚çš„æ—¶å€™æŸ¥è¯¢å®¹æ˜“è¶…æ—¶ã€‚å› ä¸º in å’Œ not in çš„æ“ä½œæ˜¯æ¯”è¾ƒèŠ±è´¹ cpu èµ„æºçš„ã€‚\n\néšç€æ•°æ®é‡çš„ä¸æ–­å¢é•¿ ClickHouse åœ¨å½“å‰å­˜å‚¨å¼•æ“çš„æ”¯æŒä¸‹ä¹Ÿéš¾ä»¥ä¿è¯æŸ¥è¯¢æ—¶é—´,è€Œä¸”è¿™äº›å¤§æŸ¥è¯¢è¿˜ä¼šå½±å“å…¶ä»–æŸ¥è¯¢ï¼Œå› æ­¤æˆ‘ä»¬è§‰å¾—æœ‰å¿…è¦åšæ–°ä¸€ç‰ˆçš„å¼€å‘ã€‚\n\n## æŠ€æœ¯æ–¹æ¡ˆ V2\n\nä¸‹é¢ä»‹ç»ä¸€ä¸‹æˆ‘ä»¬çš„ç¬¬äºŒç‰ˆæ–¹æ¡ˆã€‚è¿™ä¸ªæ–¹æ¡ˆåšäº†å¾ˆå¤šçš„ä¼˜åŒ–ï¼Œæˆ‘ä»¬ä¹Ÿå·²ç»å¯¹æ ¸å¿ƒçš„æŠ€æœ¯æ–¹æ¡ˆç”³è¯·äº†ä¸“åˆ©ã€‚\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/680b0976c4674ddfacef260493f92100~tplv-k3u1fbpfcp-zoom-1.image)\n\næˆ‘ä»¬è®¤ä¸ºï¼Œå¯ä»¥ä½¿ç”¨ä½å›¾æ¥è¿›è¡Œè®¡ç®—ï¼Œå› ä¸ºä½å›¾æ˜¯ä¸€ç§é€»è¾‘ä¸Šéå¸¸å·§å¦™çš„æå™é›†åˆçš„æ–¹æ³•ã€‚æ ¹æ®ç”¨æˆ· id çš„ç‰¹æ€§ï¼Œæˆ‘ä»¬å‡†å¤‡é‡‡ç”¨æ€§èƒ½æœ€å¥½çš„ç¨€ç–ä½å›¾ç´¢å¼• RoaringBitmap æ¥è¡¨ç¤ºä¸€ä¸ªæ ‡ç­¾å¯¹åº”çš„äººç¾¤åŒ…ã€‚åœ¨è¿™æ ·çš„æƒ…å†µä¸‹ï¼Œé›†åˆçš„è®¡ç®—å¯ä»¥è½¬æ¢åˆ°å¯¹åº”ä½å›¾çš„è®¡ç®—ã€‚\n\nä¾‹å¦‚ A äº¤ä¸Š B å’Œ C çš„å¹¶é›†å¯ä»¥è½¬æ¢ä¸º RoaringBitmap çš„è®¡ç®—\n\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e653a0180a7d4db6b147028e018021d0~tplv-k3u1fbpfcp-zoom-1.image)\n\nClickHouse å…¶å®æœ‰å¼•å…¥ RoaringBitmapï¼Œä½†æ˜¯æ˜¯ 32 ä½çš„ bitmapã€‚è€Œæˆ‘ä»¬çš„ç”¨æˆ·è§„æ¨¡ç”¨ 32 ä½è¡¨ç¤ºå¹¶ä¸å¤Ÿï¼Œå› æ­¤æˆ‘ä»¬ç»™ ClickHouse å¼•å…¥äº† Bitmap64 ç±»å‹å’Œä¸€ç³»åˆ—çš„ç›¸å…³è®¡ç®—å‡½æ•°ã€‚\n\næˆ‘ä»¬ç¬¬äºŒç‰ˆæœ¬çš„è¡¨ç»“æ„é•¿è¿™æ ·ï¼Œè¿˜æ˜¯ 2 åˆ—ï¼Œä½†ä¸éœ€è¦æ˜ç»†å­˜å‚¨ã€‚ä¸€åˆ— tag_id ç”¨æ¥è¡¨ç¤ºæ ‡ç­¾ï¼Œå¦å¤–ç”¨ç±»å‹ä¸º Bitmap64 çš„ uids åˆ—è¡¨ç¤ºæ ‡ç­¾æ‰€å¯¹åº”çš„ç”¨æˆ· idã€‚\n\nç›¸æ¯”äºç¬¬ä¸€ä¸ªæ–¹æ¡ˆï¼Œtag_id åªéœ€è¦å­˜ 1 ä¸ªï¼Œä¼šèŠ‚çœç©ºé—´ã€‚å¦å¤–ï¼Œuids ç”¨ RoaringBitmap å­˜å‚¨ä¹Ÿä¼šæ¯”åŸæ¥çš„å­˜å‚¨è¦èŠ‚çœä¸å°‘ç©ºé—´ã€‚è€Œé›†åˆçš„äº¤å¹¶è¡¥ä¹Ÿå¯¹åº”äº† bitmap çš„äº¤å¹¶è¡¥è®¡ç®—ã€‚\n\n![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8ccc875380e74c3387a2b8fffa8d45cf~tplv-k3u1fbpfcp-zoom-1.image)\n\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2ab5ab73f89d435d8ffa3b9326c31c04~tplv-k3u1fbpfcp-zoom-1.image)\n\nå¦‚æœæˆ‘ä»¬è¦æ±‚ A äº¤ä¸Š B å’Œ C çš„å¹¶é›†ã€‚å¯¹åº”çš„ sql ç›¸æ¯”ç¬¬ä¸€ç‰ˆæœ¬å°±è¦ç®€å•å¾ˆå¤šäº†ã€‚çœ‹å³è¾¹ï¼ŒåŸºæœ¬ä¸Šä»è¡¨è¾¾å¼å°±èƒ½å¯¹è®¡ç®—çš„å†…å®¹ä¸€ç›®äº†ç„¶ï¼Œéå¸¸ç›´è§‚ã€‚ç›¸æ¯”äºä½¿ç”¨ç¬¬ä¸€ç‰ˆæœ¬çš„å»ºè¡¨å’ŒæŸ¥è¯¢æ–¹å¼ï¼Œä½¿ç”¨ bitmap æœ‰å¦‚ä¸‹ä¼˜åŠ¿ï¼š\n\n1. ç©ºé—´èŠ‚çœï¼Œæ²¡æœ‰å†—ä½™æ•°æ®ï¼ŒRoaringBitmap å­˜å‚¨é«˜æ•ˆ\n2. è®¡ç®—é«˜æ•ˆ\n3. Sql ç›´è§‚ï¼Œæ— éœ€å­æŸ¥è¯¢ï¼Œä¸”å…·æœ‰æ›´å¥½çš„æ‹“å±•æ€§ã€‚\n\nå…‰æ˜¯ç”¨ RoaringBitmap å…¶å®æ˜¯ä¸å¤Ÿçš„ï¼Œæˆ‘ä»¬èŠ±äº† 1-2 ä¸ªç¤¼æ‹œå¿«é€Ÿåšäº†ä¸€ä¸ª demo å‡ºæ¥ï¼Œå‘ç°æ•ˆæœå¹¶ä¸ç†æƒ³ï¼Œä¸ç¬¬ä¸€ç‰ˆæœ¬çš„å·®è·ä¸å¤§ã€‚æˆ‘ä»¬åœ¨è¿™ä¸ªåŸºç¡€ä¸Šåšäº†å¾ˆå¤šçš„ä¼˜åŒ–ï¼Œç›®æ ‡å°±æ˜¯è®©æ•´ä½“è®¡ç®—å°½å¯èƒ½å¾—å¿«ï¼Œå¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š\n\n1. å’Œç¬¬ä¸€ç‰ˆæœ¬çš„æƒ³æ³•ä¸€æ ·ï¼Œå°½å¯èƒ½çš„å¹¶è¡Œè®¡ç®—ï¼Œå‡å°‘æ•°æ®ä¼ è¾“\n2. åœ¨æ•°æ®å±‚é¢è¿›è¡Œä¼˜åŒ–\n3. è®¡ç®—çš„ä¼˜åŒ–\n4. è¯»å–çš„ä¼˜åŒ–\n5. é€šè¿‡ cache å‡å°‘è®¡ç®—çš„æ•°æ®é‡\n\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3d716c1a1b72464f84a9ac5e63a3863e~tplv-k3u1fbpfcp-zoom-1.image)\n\né¦–å…ˆæ˜¯å¹¶è¡Œè®¡ç®—ï¼Œç›¸æ¯”äºä¹‹å‰ç”¨å­æŸ¥è¯¢æ¥è¡¨ç¤ºäº¤é›†å’Œè¡¥é›†ï¼Œé‡‡ç”¨ RoaringBitmap æ¥å®ç°äº¤é›†å’Œè¡¥é›†è¦ç®€å•å¾ˆå¤šï¼Œè¿™æ ·ä½¿å¾—æˆ‘ä»¬çš„è®¡ç®—å¯ä»¥æ›´åŠ å……åˆ†çš„å¹¶è¡Œï¼Œåˆ°çº¿ç¨‹ç²’åº¦ã€‚è¿™æ ·ï¼Œä¸€æ–¹é¢æˆ‘ä»¬å¯ä»¥æ›´å¥½çš„åˆ©ç”¨ä¸Šå¤šæ ¸çš„è®¡ç®—èµ„æºã€‚å¦ä¸€æ–¹é¢ï¼Œå¯ä»¥æ›´å¥½çš„æ§åˆ¶æŸ¥è¯¢ä½¿ç”¨çš„èµ„æºï¼Œé¿å…ä¸€äº›å¤§æŸ¥è¯¢å ç”¨è¿‡å¤šèµ„æºã€‚å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬æŠŠå…¨é‡æ•°æ®åˆ†æˆå¾ˆå¤šä»½ï¼Œæ¯å°æœºå™¨çš„æ¯ä¸€ä¸ªçº¿ç¨‹å¤„ç†å…¶ä¸­ä¸€éƒ¨åˆ†çš„æ•°æ®ï¼Œå¾—å‡ºå¯¹åº”çš„è®¡ç®—ç»“æœã€‚æœ€åå°†å„çº¿ç¨‹ç›´æ¥åˆå¹¶ã€‚\n\nè¿™ä¸ªä¸ ClickHouse é»˜è®¤çš„å¤„ç†æœºåˆ¶æ˜¯ä¸ä¸€æ ·çš„ï¼ŒClickhouse åœ¨å¤šçº¿ç¨‹è¯»å–çš„æ—¶å€™ï¼Œè¯»å–çš„æ•°æ®å¹¶ä¸æ˜¯å›ºå®šçš„ï¼Œå“ªä¸ªçº¿ç¨‹å¤„ç†å®Œäº†å°±å»è¯»æ–°çš„æ•°æ®ï¼Œå½“å¤„ç†é€Ÿåº¦è·Ÿä¸ä¸Šçš„è¯ä¹Ÿä¼šé™ä½çº¿ç¨‹æ•°ç›®ã€‚å¦‚æœè¦å®ç°æ¯ä¸ªçº¿ç¨‹å›ºå®šè¯»å¯¹åº”çš„æ•°æ®ï¼Œå¹¶åœ¨è¯»å–å®Œæˆåå®Œæˆè®¡ç®—ï¼Œå°±éœ€è¦ä¿®æ”¹æ•´ä¸ªè¯»å–å’Œå¤„ç†æ¨¡å‹ã€‚\n\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a6cb971dc92a4c8fa45de7140ffa2524~tplv-k3u1fbpfcp-zoom-1.image)\n\nè¿™ä¸ªæ˜¯æˆ‘ä»¬çš„è¯»å–å’Œå¤„ç†æ¨¡å‹ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæ•°æ®åœ¨å¯¼å…¥çš„æ—¶å€™è¢«åˆ†æˆäº†è‹¥å¹²ä»½ï¼Œæ¯ä¸€ä»½ uid éƒ½æ˜¯ç‹¬ç«‹çš„ã€‚æˆ‘ä»¬é€šè¿‡å»ºç«‹ input stream å»è¯»å–å¯¹åº”çš„æ•°æ®ï¼Œstream çš„æ•°é‡å’Œæ•°æ®åˆ†æˆçš„æ•°é‡ç›¸ç­‰ï¼Œå¹¶ä¿è¯ä¸€ä¸ªåŒä¸€ä»½æ•°æ®åªä¼šè¿›å…¥ä¸€ä¸ª Streamã€‚ParallelBitMapProcessor æ„é€ ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œä»é˜Ÿåˆ—é‡Œé¢ä¸€æ¬¡å– Stream è¿›è¡Œæ•°æ®è¯»å–ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹å®Œå…¨è¯»å®Œä¸€ä¸ª Stream ä¹‹åï¼Œæ‰ä¼šè°ƒç”¨ä¸‹ä¸€ä¸ª streamã€‚\n\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fcffcacc277c42bfbc37d6e7dadfb556~tplv-k3u1fbpfcp-zoom-1.image)\n\nClickHouse æ•´ä½“çš„ç»“æ„å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œé»‘è‰²çš„æ˜¯åŸæ¥ ClickHouse çš„è¯»å–å’Œæ‰§è¡Œæµç¨‹ï¼Œçº¢è‰²çš„æ˜¯æˆ‘ä»¬æ–°å¢çš„ï¼Œå¯ä»¥çœ‹åˆ°ï¼ŒåŸºæœ¬ä¸Šæ•´ä¸ªè¯»å–å’Œæ‰§è¡Œæµç¨‹éƒ½å‘ç”Ÿäº†å˜åŒ–ï¼Œæ”¹åŠ¨è¿˜æ˜¯æ¯”è¾ƒå¤§çš„ã€‚\n\n![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/330f744216ae40f3b272e151d6d8c787~tplv-k3u1fbpfcp-zoom-1.image)\n\nåœ¨æ•´ä¸ªå¹¶è¡Œåæˆ‘ä»¬å‘ç°æ•ˆæœå¹¶ä¸æ˜¯éå¸¸ç†æƒ³ï¼Œç›¸æ¯”äºç¬¬ä¸€ç‰ˆæœ¬çš„æå‡å¹¶ä¸æ˜æ˜¾ï¼Œé€šè¿‡å¯¹ RoaringBitmap åº•å±‚åŸç†çš„æ·±å…¥ç ”ç©¶å’Œå¯¹æ•°æ®çš„åˆ†æï¼Œæˆ‘ä»¬å‘ç°ï¼ŒåŸå› æ˜¯å› ä¸ºåŒºé—´å†…çš„ç”¨æˆ· id è¿‡äºç¦»æ•£ã€‚\n\nç¦»æ•£çš„åŸå› æœ‰ 2 ç‚¹ï¼š\n\n1. uid çš„ç”Ÿæˆå¹¶ä¸æ˜¯è¿ç»­çš„ã€‚\n2. ç”±äºæ•°æ®æŒ‰ç…§ä¸€å®šè§„åˆ™å‡åŒ€åˆ’åˆ†åˆ°ä¸åŒçš„åŒºé—´å†…ï¼Œé‚£ä¹ˆå°±ä¼šå¯¼è‡´å­åŒºé—´å†…çš„æ•°æ®æ¯”åŸå§‹ç©ºé—´æ›´åŠ ç¦»çº¿ã€‚\n\né‚£ä¹ˆä¸ºä»€ä¹ˆç¦»æ•£çš„æƒ…å†µä¸‹ä¼šå¯¼è‡´è®¡ç®—æ•ˆæœå¹¶ä¸ç†æƒ³ï¼Œå¤§å®¶å¯èƒ½æœ‰ç–‘é—®ï¼ŒRoaringBitmap ä¸å°±æ˜¯ç”¨æ¥å­˜å‚¨ç¨€ç–çš„æ•°æ®çš„å—ï¼Ÿ\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5d365308670f4715ab5855e665e3aab0~tplv-k3u1fbpfcp-zoom-1.image)\n\nåŸå› è·Ÿ RoaringBitmap64 çš„å®ç°æœ‰å…³ï¼ŒRoaringBitmap64 æ˜¯ç”±ä¸€ç³»åˆ— RoaringBitmap32 è¡¨ç¤ºã€‚å®ç°æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œä¸€ç§æ¯”è¾ƒé€šç”¨çš„åšæ³•ç”¨ map å­˜å‚¨ï¼Œæ˜¯æŠŠå‰ 32 ä½å­˜æˆ keyï¼Œvalue æ˜¯ å 32 æ‰€å¯¹åº”çš„ RoaringBitmap32ï¼ŒRoaringBitmap32 çš„å®ç°å¦‚å›¾ä¸­æ‰€ç¤ºã€‚\n\nç¬¬ä¸€å±‚ç§°ä¹‹ä¸º Chunkï¼ˆé«˜ 16 ä½ï¼‰ï¼Œå¦‚æœè¯¥å–å€¼èŒƒå›´å†…æ²¡æœ‰æ•°æ®å°±ä¸ä¼šåˆ›å»º Chunkã€‚\n\nç¬¬äºŒå±‚ç§°ä¹‹ä¸º Containerï¼ˆä½ 16 ä½ï¼‰ï¼Œä¼šä¾æ®æ•°æ®åˆ†å¸ƒè¿›è¡Œåˆ›å»ºã€‚\n\nRoaringBitmap32 ä½¿ç”¨ä¸¤ç§å®¹å™¨ç»“æ„ï¼š Array Container å’Œ Bitmap Containerã€‚Array Container å­˜æ”¾ç¨€ç–çš„æ•°æ®ï¼ŒBitmap Container å­˜æ”¾ç¨ å¯†çš„æ•°æ®ã€‚è‹¥ä¸€ä¸ª Container é‡Œé¢çš„å…ƒç´ æ•°é‡å°äº 4096ï¼Œå°±ä½¿ç”¨ Array Containerï¼›åä¹‹ï¼Œå°±ç”¨ Bitmap æ¥å­˜å‚¨å€¼ã€‚\n\nå½“æ•°æ®æ¯”è¾ƒç¨€ç–çš„æ—¶å€™ï¼Œæˆ‘ä»¬å‘ç°ä¸€ä¸ªäººç¾¤åŒ…å¯¹åº”çš„ RoaringBitmap64 ç”±å¾ˆå¤šä¸ª RoaringBitmap32 ç»„æˆï¼Œæ¯ä¸ª RoaringBitmap32 å†…éƒ¨åˆç”±å¾ˆå¤šä¸ª array container ç»„æˆã€‚è€Œå¯¹æœ‰åºæ•°ç»„çš„äº¤å¹¶è¡¥è®¡ç®—å°½ç®¡ä¹Ÿæ¯”è¾ƒé«˜æ•ˆï¼Œä½†æ˜¯ç›¸æ¯”äº bitmap è®¡ç®—æ¥è¯´è¿˜æ˜¯æœ‰æ˜æ˜¾çš„å·®å¼‚ã€‚è¿™æ ·å¯¼è‡´è®¡ç®—æ€§èƒ½æå‡ä¸ä¸Šå»ã€‚å› æ­¤æˆ‘ä»¬å°±åœ¨æƒ³ï¼Œèƒ½ä¸èƒ½é€šè¿‡ç¼–ç çš„æ–¹å¼ï¼Œå¯¹åŒºé—´å†…çš„æ•°æ®è¿›è¡Œç¼–ç ï¼Œè®©æ•°æ®æ›´åŠ é›†ä¸­ï¼Œä»è€Œæå‡è®¡ç®—æ•ˆç‡ã€‚äº‹å®ä¸Šæˆ‘ä»¬ä¹Ÿæ˜¯è¿™ä¹ˆåšçš„ï¼Œæˆ‘ä»¬å®ç°äº†ä¸€ç§é«˜æ•ˆçš„ç¼–ç ï¼Œå¸Œæœ›è¾¾åˆ°å¦‚ä¸‹æ•ˆæœï¼š\n\n- ç¼–ç ååŒä¸€ä¸ªåŒºé—´å†…çš„ç”¨æˆ·ç›¸å¯¹é›†ä¸­\n- ä¸åŒåŒºé—´çš„ç”¨æˆ·ç¼–ç ååŒæ ·åœ¨ä¸åŒçš„åŒºé—´å†…\n- ç¼–ç ååŒä¸€ä¸ªäººç¾¤åŒ…åŒä¸€ä¸ªåŒºé—´å†…çš„ç”¨æˆ· id ç›¸å¯¹é›†ä¸­\n\né€šè¿‡ç¼–ç ï¼Œèƒ½å¤Ÿéå¸¸å¥½åœ°åŠ é€Ÿè®¡ç®—ï¼Œè®¡ç®—é€Ÿåº¦æå‡ **1~2** ä¸ªé‡çº§\n\nå½“ç„¶ï¼Œç¼–ç çš„è¿‡ç¨‹æ˜¯åœ¨å¼•æ“å†…éƒ¨å®ç°çš„ï¼Œå¯¹ç”¨æˆ·æ˜¯æ— æ„ŸçŸ¥çš„ã€‚å½“æ•°æ®å¯¼å…¥çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨å®Œæˆç¼–ç ã€‚\n\nè¿™å—å…¶å®æœ‰ä¸€ä¸ªæ¯”è¾ƒå¤§çš„å·¥ç¨‹é‡ï¼Œæœ‰è¿™å‡ ä¸ªé—®é¢˜éœ€è¦è§£å†³ï¼š\n\n1. ç¼–ç ç›¸å½“äºæ˜¯ä¸€ä¸ªé¢å¤–çš„å·¥ä½œé‡ï¼Œä¼šå¯¹å¯¼å…¥æœ‰ä¸€å®šå½±å“ã€‚åŒæ—¶ï¼Œå¦‚æœè¦å¯¼å‡º uidï¼Œéœ€è¦å¢åŠ é¢å¤–çš„è§£ç è¿‡ç¨‹ã€‚å¦‚ä½•å‡å°‘ç¼–ã€è§£ç å¸¦æ¥çš„é¢å¤–çš„ä»£ä»·ã€‚\n2. åŸæ¥ä¸ºäº†èƒ½å¤Ÿå°½å¿«å¯¼å…¥æ•°æ®ï¼Œæˆ‘ä»¬æ˜¯é‡‡ç”¨å¹¶è¡Œå¯¼å…¥çš„æ–¹å¼ã€‚å¢åŠ äº†é¢å¤–çš„ç¼–ç ç¯èŠ‚æ˜¯å¦ä¼šå¯¼è‡´å¯¼å…¥å¿…é¡»è¦ä¸²è¡Œæ¥å®Œæˆï¼Œå¹¶è¡Œå¯¼å…¥å¦‚æœéƒ½åœ¨å†™å­—å…¸æ˜¯å¦ä¼šå¯¼è‡´æ•°æ®äº§ç”Ÿå†²çª\n3. ä¸»å¤‡ä¹‹é—´å¦‚ä½•é«˜æ•ˆåŒæ­¥å­—å…¸ï¼Œé¿å…å­—å…¸çš„åŒæ­¥ä¸åŠæ—¶å¯¼è‡´æ•°æ®æ— æ³•è§£ç ã€‚æœ‰ä¸€äº›ä¸€è‡´æ€§çš„é—®é¢˜è¦å¤„ç†ã€‚\n4. å­—å…¸å¦‚ä½•é«˜æ•ˆç®¡ç†ã€å¤‡ä»½ï¼Œé¿å…ä¸¢å¤±ã€‚\n\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c873565a035549ff9ddd87e530bc47cd~tplv-k3u1fbpfcp-zoom-1.image)\n\né™¤äº†æ•°æ®é€šè¿‡ç¼–ç ä¼˜åŒ–åˆ†å¸ƒæ€§å¤–ï¼Œæˆ‘ä»¬è¿˜ä»å·¥ç¨‹çš„è§’åº¦å¯¹è®¡ç®—è¿›è¡Œäº†ä¼˜åŒ–ã€‚ä¸»è¦æœ‰ä¸‹é¢ 3 ç‚¹ï¼š\n\n1. é€šè¿‡ä¸€äº›æŒ‡ä»¤é›†è®¡ç®—å’Œæ±‡ç¼–æŒ‡ä»¤å¯¹è®¡ç®—è¿›è¡ŒåŠ é€Ÿï¼Œåœ¨æˆ‘ä»¬å®é™…æµ‹è¯•ä¸­å‘ç°è¿™ä¸ªèƒ½å¤Ÿå¤§å¤§åŠ å¿«è®¡ç®—é€Ÿåº¦ã€‚\n2. å¦å¤–ï¼Œæˆ‘ä»¬ bitmap çš„è®¡ç®—èƒ½å¤Ÿå°½å¯èƒ½åœ¨åŸåœ°å®Œæˆï¼Œå‡å°‘æ•°æ®æ‹·è´ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæ±‚ A ä¸ C çš„å¹¶é›†ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨ A ä¸Šé¢è¿›è¡Œè®¡ç®—ï¼Œå¾—åˆ°ç»“æœã€‚å½“æˆ‘ä»¬çš„è®¡ç®—è¡¨è¾¾å¼åŒ…å«å¤šä¸ª A çš„æ—¶å€™ä¸” A åœ¨å·¦ä¾§çš„æ—¶å€™ï¼Œè¿™æ ·å°±å¤±æ•ˆäº†ã€‚å› æ­¤ï¼Œéœ€è¦æˆ‘ä»¬å¤„ç†çš„æ—¶å€™éœ€è¦å¯¹æ•´ä¸ªè¡¨è¾¾å¼è¿›è¡Œå¤„ç†å’Œåˆ¤æ–­ï¼Œçœ‹çœ‹å“ªäº›è®¡ç®—å¯ä»¥åœ¨åŸåœ°å®Œæˆã€‚å½“ç„¶ï¼Œæ›´è¿›ä¸€æ­¥çš„è¯ï¼Œåœ¨è¿™ä¸ª Case ä¸­æˆ‘ä»¬é€šè¿‡ç§»åŠ¨ä½ç½®ï¼ˆA å’Œ C äº¤æ¢ä½ç½®ï¼‰ä¹Ÿæ˜¯å¯ä»¥åšåˆ°åŸåœ°è®¡ç®—çš„ã€‚\n3. æ˜¯æˆ‘ä»¬åœ¨å¯¹æ¯”ç¬¬ä¸€ç¬¬äºŒç‰ˆæœ¬çš„æ—¶å€™å‘ç°ï¼Œbitmap åœ¨äº¤é›†å’Œè¡¥é›†çš„æ€§èƒ½ä¸Šç›¸æ¯”åŸæ¥çš„å­æŸ¥è¯¢æœ‰éå¸¸æ˜æ˜¾çš„æå‡ï¼Œä½†æ˜¯åœ¨å¤§é‡çš„å¹¶é›†çš„æƒ…å†µä¸‹ä¸åŸæ¥çš„ç›¸æ¯”æå‡ä¸å¤Ÿæ˜æ˜¾ã€‚è¿™ä¸ªä¸€æ–¹é¢è¯´æ˜ clickhouse çš„æ€§èƒ½è¿˜æ˜¯éå¸¸ä¼˜è¶Šçš„ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿç»™æˆ‘ä»¬å¸¦æ¥äº†æŒ‘æˆ˜ã€‚æœ€åæˆ‘ä»¬å‘ç°å¯ä»¥æŠŠ RoaringBitmap32 çš„ Fast Union çš„æ€æƒ³ç§»æ¤åˆ° RoaringBiamap64 ä¸Šï¼Œé€šè¿‡ lazy è®¡ç®—çš„æ–¹å¼ï¼Œæé«˜å¤§é‡å¹¶é›†çš„è®¡ç®—æ€§èƒ½ã€‚\n\nå½“ç„¶ï¼Œä»¥ä¸Šè¯´çš„å…¶å®æ˜¯æˆ‘ä»¬åœ¨å·¥ç¨‹å®è·µçš„ä¸€äº›å¤§çš„æœ‰æ˜æ˜¾æ•ˆæœçš„ä¼˜åŒ–ç‚¹ï¼Œå…¶å®å°çš„ä¼˜åŒ–ç‚¹è¿˜æœ‰å¾ˆå¤šï¼Œå·¥ç¨‹ä¸Šè¦åšçš„äº‹æƒ…å¾ˆå¤šã€‚\n\né™¤äº†è®¡ç®—ä»¥å¤–ï¼Œè¯»å–çš„ä¼˜åŒ–ä¹Ÿå¾ˆé‡è¦ã€‚å¤§å®¶éƒ½çŸ¥é“ clickhouse æ˜¯åˆ—å­˜æ•°æ®åº“ï¼Œå¯¹äºæ¯ä¸€åˆ—çš„æ•°æ®åˆæ˜¯åˆ†å—å­˜å‚¨çš„ï¼Œé»˜è®¤æ˜¯æ¯ 8192 è¡Œä¸ºä¸€å—ã€‚åˆ†å—å­˜å‚¨çš„å¥½å¤„æ˜¯èƒ½å¤Ÿæ›´å¥½çš„åšå‹ç¼©ï¼Œå‡å°æ•°æ®å­˜å‚¨ã€‚å¯¹äºä¸€äº›åŸºæœ¬ç±»å‹æ¥è¯´æ•ˆæœå¾ˆå¥½ã€‚ä½†æ˜¯å¯¹äº bitmap ç±»å‹æ¥è¯´æœ¬èº«å€¼çš„ç±»å‹å°±éå¸¸å¤§ï¼Œ8192 è¡Œç»„æˆçš„å—å¤§å°éå¸¸å¤§ï¼Œå¦‚æœæˆ‘åªæ˜¯è¯»å–å…¶ä¸­çš„ä¸€ä¸ª bitmapï¼Œä¼šæœ‰å¾ˆå¤§çš„è¯»æ”¾å¤§ï¼Œä¼šéå¸¸å½±å“æ€§èƒ½ã€‚\n\nå¦å¤–ï¼Œç”±äº clickhouse æ˜¯ä¸€ä¸ªåœ¨ä¸»é”®ä¸Šçš„ç¨€ç–ç´¢å¼•ï¼Œå¹¶ä¸èƒ½ç²¾ç¡®åœ°å®šä½æŸä¸€ä¸ªå—ä¸­æ˜¯å¦åŒ…å«å¯¹åº”çš„æ•°æ®ã€‚è¿™ä¸ªå¯¹äºæ™®é€šç±»å‹ä¹Ÿæ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œå› ä¸ºæœ‰çš„æ—¶å€™å»ºç«‹ç²¾ç¡®ç´¢å¼•å¹¶ä¸”æŸ¥æ‰¾ç´¢å¼•çš„ä»£ä»·è¿˜ä¸å¦‚ç›´æ¥æš´åŠ›æ‰«åŸå§‹æ•°æ®ã€‚ä½†æ˜¯å¯¹äº bitmap æ¥è¯´æˆ‘ä»¬æ˜¯å¸Œæœ›èƒ½å¤Ÿç²¾ç¡®åˆ°å®šä½åˆ°æ•°æ®çš„ã€‚\n\nå› æ­¤æˆ‘ä»¬åšäº†è¿™å‡ ä¸ªä¼˜åŒ–ï¼š\n\n1. è°ƒæ•´å—çš„å¤§å°ï¼ŒæŠŠé»˜è®¤çš„ 8192 è¡Œæ”¹æˆäº† 128ï¼Œè¿™ä¸ªæ˜¯æˆ‘ä»¬å®é™…æµ‹è¯•ä¸­åœ¨æˆ‘ä»¬åœºæ™¯çš„æœ€ä½³å®è·µã€‚å¦‚æœæ•°æ®å¤ªç»†ï¼Œé‚£ä¹ˆä¼šå¯¼è‡´ mark æ–‡ä»¶è¿‡å¤§ï¼Œè¯»å–ç´¢å¼•å®šä½æ•°æ®çš„æ—¶é—´å˜é•¿ã€‚\n2. å®šæœŸåˆå¹¶å†å²æ•°æ®ï¼Œå› ä¸ºæˆ‘ä»¬æœ‰çš„æ ‡ç­¾æ˜¯ä¸€ä¸ªå¢é‡æ•°æ®ï¼Œæˆ‘ä»¬å¸Œæœ›é€šè¿‡ä¸€äº›åˆå¹¶å‡å°‘æ•°æ®è¯»å–\n3. é€šè¿‡äºŒçº§ç´¢å¼•çš„æ–¹å¼èƒ½å¤Ÿæ›´å¥½çš„ç²¾ç¡®å®šä½ï¼Œå°½é‡å‡å°‘è¯»å–ä¸éœ€è¦çš„æ•°æ®\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bcd16012b7e24162a7a0694b7dcd0f3d~tplv-k3u1fbpfcp-zoom-1.image)\n\næœ€åä¸€ä¸ªä¼˜åŒ–ç‚¹ä¹Ÿæ˜¯å¾ˆå¤šç³»ç»Ÿéƒ½å¿…å¤‡çš„ï¼Œé‚£å°±æ˜¯ cacheã€‚å› ä¸ºç”¨æˆ·è¯»å–çš„æ•°æ®å’Œè®¡ç®—çš„ç»“æœé€šå¸¸å…·æœ‰ 2 8 åŸåˆ™ï¼Œå³ç»å¸¸è¯»å–çš„éƒ½æ˜¯ä¸€å°éƒ¨åˆ†æ•°æ®ã€‚å› æ­¤ï¼Œæˆ‘ä»¬é€šè¿‡ cache å¯ä»¥åŠ é€Ÿç¬¬äºŒã€ç¬¬ä¸‰æ¬¡è¯»å–æ—¶é—´ã€‚å®é™…ä¸Šæˆ‘ä»¬åšäº†ä¸‰å±‚çš„ cacheï¼š\n\n1. è¯»å–å±‚é¢çš„ cacheï¼Œå¯¹äºåŒä¸€ä¸ªæ ‡ç­¾ï¼Œé€šè¿‡ cache ç¬¬äºŒæ¬¡å¯ä»¥ç›´æ¥å‘½ä¸­å†…å­˜\n\n2. ä¸­é—´è®¡ç®—ç»“æœçš„ cacheï¼Œè¿˜æ˜¯ä¸¾ä¹‹å‰æœ›è¿œé•œä¾‹å­ï¼Œå¹¿å‘Šä¸»é™¤äº†æƒ³çœ‹åˆ° åŒ—äº¬çš„å–œæ¬¢æˆ·å¤–æˆ–è€…çˆ¬å±±çš„äººçš„ä¸€å…±æœ‰å¤šå°‘äººã€‚è¿˜æƒ³çœ‹åˆ°è¿™äº›äººåœ¨å¤´æ¡ã€æŠ–éŸ³ç­‰å„ç«¯ä¸Šåˆ†åˆ«å¤šå°‘äººã€‚å¦‚æœæˆ‘ä»¬æ˜¯ä¾æ¬¡è®¡ç®—æ¯ä¸ªç»“æœï¼Œè¿™é‡Œé¢å°±æœ‰é‡å¤è®¡ç®—çš„è¿‡ç¨‹ã€‚å› æ­¤æˆ‘ä»¬ç›®å‰çš„åšæ³•æ˜¯æä¾›ä¸€ä¸ª udf multiCountï¼Œå¯ä»¥è®©ç”¨æˆ·å¤ç”¨ä¸­é—´çš„è®¡ç®—ç»“æœã€‚æ¯”å¦‚æˆ‘ä»¬æƒ³è®¡ç®—ï¼ŒA&B&C&D&E&Fï¼ŒA&B&C&D&E&F&Gï¼ŒA&B&C&D&E&F&Hï¼Œè¿™é‡Œæœ‰é‡å¤çš„éƒ¨åˆ†ã€‚å¯ä»¥ç”¨è¿™æ ·çš„å‡½æ•°ä¸€æ¬¡æ€§è®¡ç®—å‡ºç»“æœã€‚multiCount å‡½æ•°é‡Œ \\_1 æ¥è¡¨ç¤ºç¬¬ä¸€ä¸ªè¡¨è¾¾å¼çš„è®¡ç®—ç»“æœï¼Œå‡½æ•°çš„ç»“æœè¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œåˆ†åˆ«æ˜¯æ¯ä¸ªè¡¨è¾¾å¼çš„è®¡ç®—ç»“æœã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œä¸€ä¸ªæ˜¯é¿å…äº†é‡å¤ç»“æœçš„åå¤è®¡ç®—ï¼Œå¦ä¸€ä¸ªä¹Ÿå‡å°‘äº†æ•´ä½“çš„ qpsã€‚å½“ç„¶ï¼Œè¿™æ ·çš„æ–¹æ³•è¿˜æ˜¯æœ‰ä¸€å®šçš„å±€é™æ€§ï¼Œåé¢è®²æœªæ¥çš„å±•æœ›æ—¶æˆ‘ä¼šæåˆ°æˆ‘ä»¬æƒ³åšçš„æ›´é€šç”¨æ€§ä¸€äº›ã€‚\n\n3. å¯¹ç»“æœçš„ cacheï¼Œç»“æœ cache åªéœ€è¦è®°å½•ä¸€ä¸ª string ç”¨æ¥è¡¨ç¤ºè®¡ç®—çš„è¡¨è¾¾å¼å’Œä¸€ä¸ª uint64 è¡¨ç¤ºç»“æœï¼Œä»£ä»·éå¸¸å°ã€‚é‚£ä¹ˆå¯ä»¥ç”¨å¾ˆå°çš„ç©ºé—´å­˜å‚¨å¤§é‡çš„è®¡ç®—ç»“æœã€‚å½“ç„¶å‰ææ˜¯ç¡®å®å‡ºç°ä¸å°‘åå­—ç¼“å­˜çš„æƒ…å†µã€‚\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3d4e4b06015147b3ad9e7c138b4cba00~tplv-k3u1fbpfcp-zoom-1.image)\n\nåšäº†è¿™ä¹ˆå¤šï¼Œéƒ½æ˜¯ä¸ºäº†é™ä½æŸ¥è¯¢çš„æ—¶é—´ï¼Œå‡å°‘å¯¼å…¥å’ŒæŸ¥è¯¢çš„èµ„æºï¼Œé‚£ä¹ˆåˆ°åº•æ•ˆæœæ€ä¹ˆæ ·å‘¢ï¼Ÿå¯ä»¥è¯´è¿˜æ˜¯éå¸¸çªå‡ºçš„ã€‚ä»ç©ºé—´ä¸Šæ¥è¯´ï¼Œé‡‡ç”¨ RoaringBitmap å¯ä»¥å‡å°‘ tag_id åˆ—çš„å†—ä½™å­˜å‚¨ï¼ŒåŒæ—¶ uid é‡‡ç”¨å‹ç¼©å­˜å‚¨ï¼Œå› æ­¤æ•´çš„ç©ºé—´å­˜å‚¨é™ä½ä¸ºåŸæ¥çš„ 1/3ï¼Œå› ä¸ºæ•°æ®é‡é™ä½äº†ï¼Œå› æ­¤å¯¼å…¥ä¹Ÿå˜å¿«äº†ï¼Œå¯¼å…¥æ—¶é•¿ä¹Ÿç¼©çŸ­ä¸ºåŸæ¥çš„ 1/3ï¼ŒåŒæ—¶ï¼Œåœ¨æŸ¥è¯¢æ€§èƒ½ä¸Šæ”¶ç›Šéå¸¸æ˜æ˜¾ï¼Œavg/pct99/max ä¸‹é™æ˜æ˜¾ï¼Œæ¶ˆé™¤ç»å¤§å¤šæ•° 5 s ä»¥ä¸Šçš„å¤§æŸ¥è¯¢ï¼Œå¯ä»¥è¯´è¾¾åˆ°äº†å¼€å‘çš„é¢„æœŸã€‚æœ€åï¼Œåœ¨èµ„æºä¸Šæ•ˆæœä¹Ÿå¾ˆä¸é”™ï¼ŒCPU ä½¿ç”¨ä¸‹é™æ˜æ˜¾ï¼Œå†…å­˜ä½¿ç”¨ä¸Š PageCache èŠ‚çœ 100 G+ ä»¥ä¸Šã€‚\n\n![æŸ¥è¯¢æ—¶é•¿](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9248c9f290bb4b31b5867d77b5461ab8~tplv-k3u1fbpfcp-zoom-1.image)\n\nè¿™ä¸ªå›¾æ˜¯ä¸Šçº¿åçš„æ•ˆæœå›¾ï¼Œå¯ä»¥çœ‹åˆ°ï¼ŒåŸæ¥ç¡®å®æ˜¯ç»å¸¸æœ‰ä¸€äº›å¤§çš„æŸ¥è¯¢ï¼Œæœ‰äº›æ—¶é—´ä¹…çš„ç”šè‡³è¶…è¿‡äº† 20 sã€‚ä¸Šçº¿åå¦‚å³è¾¹çš„çº¢æ¡†æ‰€ç¤ºï¼Œå¾ˆå°‘çœ‹åˆ°è¶…è¿‡ 5 s çš„æŸ¥è¯¢äº†ï¼Œç»å¤§éƒ¨åˆ†æŸ¥è¯¢éå¸¸ç¨³å®šã€‚è¿™ä¸ªå…¶å®è¿˜æ˜¯æˆ‘ä»¬æ²¡æœ‰ä¸Šä¸­é—´ç»“ç®—ç»“æœ cache æ—¶å€™çš„æ•ˆæœå›¾ï¼Œå½“æˆ‘ä»¬é€šè¿‡ multiCount ç¼“å­˜ä¸­é—´ç»“æœåï¼Œç›´æ¥æŠŠ qps ä¸‹é™äº† 4 å€ä»¥ä¸Šã€‚\n\nå½“ç„¶ï¼Œè¦åœ¨æ›´å¤šçš„åœºæ™¯ç”¨ä¸Šæ¥ï¼Œæˆ‘ä»¬å…¶å®è¿˜è¦åšä¸å°‘å·¥ä½œçš„ã€‚æ¯”å¦‚ï¼Œä¸ºäº†æ”¯æŒä¸€äº›æ›´å¤æ‚çš„æŸ¥è¯¢æˆ‘ä»¬è¿˜å¼€å‘äº†å…¶ä»–ä¸€ç³»åˆ—è®¡ç®—çš„ udfï¼Œæ¯”å¦‚ç»“æœä¸è¿”å› count è€Œæ˜¯ array ç”¨æ¥åšæŠ•æ”¾ã€‚\n\nåŒæ—¶ï¼Œä¸ºäº†æ”¯æŒä¸å…¶ä»–è¡¨ joinï¼Œæˆ‘ä»¬è¿˜æ”¯æŒäº† in bitmap è¯­æ³•ï¼Œèƒ½å¤Ÿè®© bitmap è¡¨ä¸å…¶ä»–è¡¨è¿›è¡Œ joinï¼Œjoin çš„æ—¶å€™ï¼Œå› ä¸ºåšäº†ç¼–ç ï¼Œå› æ­¤éœ€è¦æ”¯æŒå­—å…¸çš„å¤ç”¨ï¼ˆå…¶ä»–è¡¨ä½¿ç”¨ç›¸åŒçš„å­—å…¸è¿›è¡Œç¼–ç ï¼‰ç­‰ç­‰ã€‚\n\n### æœªæ¥å±•æœ›\n\nå¯ä»¥è¯´ï¼Œç¬¬äºŒç‰ˆæœ¬è¾¾åˆ°äº†æˆ‘ä»¬çš„é¢„æœŸï¼Œä¹Ÿåœ¨çº¿ä¸Šå–å¾—äº†æ¯”è¾ƒå¤§çš„æˆæœï¼Œä¸šåŠ¡æ–¹çš„åé¦ˆä¹Ÿå¾ˆä¸é”™ã€‚å¯èƒ½åœ¨å¾ˆé•¿ä¸€æ®µæ—¶é—´å†…éƒ½èƒ½æ»¡è¶³ä¸šåŠ¡éœ€è¦ã€‚éšç€æ•°æ®é‡çš„ä¸æ–­å¢é•¿ï¼Œå°†æ¥åˆæœ‰å“ªäº›æ–¹é¢å¯ä»¥åšä¸€äº›æŒç»­çš„ä¼˜åŒ–å‘¢ï¼Ÿæˆ‘å¯¹æœªæ¥çš„å±•æœ›ç®€å•åšäº†ä¸€äº›æ€»ç»“:\n\næˆ‘ä»¬ä¸»è¦æƒ³ä»è¿™ä¸‰ä¸ªæ–¹é¢è¿›è¡Œè¿­ä»£ï¼š\n\n1. ä»è®¡ç®—å±‚é¢å’Œæ•°æ®å±‚é¢è¿›è¡Œæ›´å¤šçš„ä¼˜åŒ–ï¼Œè¯»å–çš„æ•°æ®æ›´å°‘ï¼Œæ›´ç²¾å‡†çš„æ‰¾åˆ°çœŸæ­£è¦è¯»å–çš„æ•°æ®ã€‚å‡å°‘ç”šè‡³å°½å¯èƒ½æ¶ˆé™¤è¯»æ”¾å¤§ã€‚è®¡ç®—ä¸Šèƒ½å¤Ÿæƒ³æ›´å¤šçš„æ‹›ï¼ŒåŒ…æ‹¬åˆ©ç”¨ä¸€äº›æ–°ç¡¬ä»¶å‡å°‘è®¡ç®—çš„æ—¶é—´\n2. ä» cache å±‚é¢èƒ½å¤Ÿåšçš„æ›´åŠ æ™ºèƒ½åŒ–ã€‚é€šè¿‡è§£æè¡¨è¾¾å¼ï¼Œä»å­è¡¨è¾¾å¼çš„ç²’åº¦çœ‹çœ‹æ˜¯å¦èƒ½å¤ŸæŠŠä¸€äº›å…¬å…±å­é¡¹ç¼“å­˜èµ·æ¥ï¼Œè¿™æ · cache æ‰ä¼šæ›´é€šç”¨ã€‚å½“ç„¶ï¼Œè¿™å¯èƒ½è¦å¼•å…¥ä¸€äº›æœºå™¨å­¦ä¹ çš„ç®—æ³•ã€‚\n3. æ‰©å……è¡¨è¾¾å¼çš„è¡¨ç°èƒ½åŠ›ï¼Œèƒ½å¤Ÿåœ¨æ›´è¿‡çš„åœºæ™¯å¾—åˆ°åº”ç”¨ã€‚å¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œç›®å‰æˆ‘ä»¬åœ¨è®¡ç®—çš„æ—¶å€™æ˜¯ä½¿ç”¨ä¸€ä¸ª uint64 æ¥è¡¨ç¤ºä¸€ä¸ªå¯¹åº”çš„æ ‡ç­¾ï¼Œå¦‚æœè¡¨ç¤ºä¸€ä¸ªå¤šç»´çš„æ ‡ç­¾ï¼Œæˆ‘ä»¬å†…éƒ¨æœ‰ä¸€äº›åšæ³•ï¼Œä½†æ˜¯è¿˜ä¸æ˜¯å¾ˆé€šç”¨ï¼Œä¸šåŠ¡æ–¹ç”¨èµ·æ¥ä¹Ÿæœ‰ç‚¹è´¹åŠ²ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿæ›´å¥½çš„æ”¯æŒæ ‡ç­¾çš„è¡¨è¾¾ã€‚åŒæ—¶ï¼Œæ›´å¤šçš„åœºæ™¯ä¹Ÿéœ€è¦ä¸€äº›æ›´å¤šçš„ udf å¼€å‘ï¼Œæˆ‘ä»¬ä¼šé€æ­¥æ”¯æŒå„ä¸ªåœºæ™¯çš„éœ€æ±‚ã€‚\n\næœ€åï¼Œæ­¤æ¬¡åˆ†äº«ä¸»è¦ä»‹ç»äº† ClickHouse åœ¨å­—èŠ‚å¹¿å‘Šçš„åº”ç”¨åœºæ™¯ï¼Œä¸»è¦æ˜¯äººç¾¤é¢„ä¼°ã€äººç¾¤ç”»åƒå’Œç»Ÿè®¡åˆ†æè¿™å‡ ä¸ªæ–¹é¢ã€‚å…¶æ¬¡ï¼Œå°±äººç¾¤é¢„ä¼°è¿™ä¸ªåœºæ™¯ä»‹ç»äº†æˆ‘ä»¬çš„å®ç°æ–¹æ¡ˆå’Œä¼˜åŒ–çš„æ€è·¯ï¼Œä»¥åŠæœªæ¥çš„è¿­ä»£è®¡åˆ’ã€‚\n\nä»¥ä¸Šå°±æ˜¯æœ¬æ¬¡åˆ†äº«çš„å…¨éƒ¨å†…å®¹ï¼Œè°¢è°¢ã€‚\n\n## æ²™é¾™é¢„å‘Š\n\n### ã€ŠClickHouse åœ¨å®æ—¶åœºæ™¯çš„åº”ç”¨å’Œä¼˜åŒ–ã€‹\n\n#### æ—¶é—´ï¼š2020 å¹´ 8 æœˆ 14 æ—¥ 19:00-20:00\n\n#### è®²å¸ˆï¼šéƒ­æ˜ ä¸­ å­—èŠ‚è·³åŠ¨ ClickHouse ç ”å‘å·¥ç¨‹å¸ˆ\n\n## æŠ¥åé“¾æ¥\n\n[https://live.bytedance.com/8889/4136164](https://live.bytedance.com/8889/4136164)\n\n\n## å‚ä¸æ–¹å¼ï¼š\n\n![](https://imgkr2.cn-bj.ufileos.com/fd06383f-fc72-4062-b40e-91b0b1c78dda.png?UCloudPublicKey=TOKEN_8d8b72be-579a-4e83-bfd0-5f6ce1546f13&Signature=jUVbYbnkIVdbNV%252BcyxzlWUmAwUo%253D&Expires=1597141445)\n\nä¸‹è½½ **é£ä¹¦** APPï¼Œæ‰«ç åŠ å…¥ ClickHouse é£ä¹¦äº¤æµç¾¤\n\n## å­—èŠ‚è·³åŠ¨æŠ€æœ¯æ²™é¾™\n\nå­—èŠ‚è·³åŠ¨æŠ€æœ¯æ²™é¾™æ˜¯ç”±å­—èŠ‚è·³åŠ¨æŠ€æœ¯å­¦é™¢å‘èµ·ï¼Œå­—èŠ‚è·³åŠ¨æŠ€æœ¯å­¦é™¢ã€æ˜é‡‘æŠ€æœ¯ç¤¾åŒºè”åˆä¸»åŠçš„æŠ€æœ¯äº¤æµæ´»åŠ¨ã€‚\n\nå­—èŠ‚è·³åŠ¨æŠ€æœ¯æ²™é¾™é‚€è¯·æ¥è‡ªå­—èŠ‚è·³åŠ¨åŠä¸šå†…äº’è”ç½‘å…¬å¸çš„æŠ€æœ¯ä¸“å®¶ï¼Œåˆ†äº«çƒ­é—¨æŠ€æœ¯è¯é¢˜ä¸ä¸€çº¿å®è·µç»éªŒï¼Œå†…å®¹è¦†ç›–æ¶æ„ã€å¤§æ•°æ®ã€å‰ç«¯ã€æµ‹è¯•ã€è¿ç»´ã€ç®—æ³•ã€ç³»ç»Ÿç­‰æŠ€æœ¯é¢†åŸŸã€‚\n\nå­—èŠ‚è·³åŠ¨æŠ€æœ¯æ²™é¾™æ—¨åœ¨ä¸ºæŠ€æœ¯é¢†åŸŸäººæ‰æä¾›ä¸€ä¸ªå¼€æ”¾ã€è‡ªç”±çš„äº¤æµå­¦ä¹ å¹³å°ï¼Œå¸®åŠ©æŠ€æœ¯äººå­¦ä¹ æˆé•¿ï¼Œä¸æ–­è¿›é˜¶ã€‚\n\næ¬¢è¿å…³æ³¨å­—èŠ‚è·³åŠ¨æŠ€æœ¯å›¢é˜Ÿ\n", "user_name": "å­—èŠ‚è·³åŠ¨æŠ€æœ¯å›¢é˜Ÿ", "description": "å­—èŠ‚è·³åŠ¨çš„æŠ€æœ¯å®è·µåˆ†äº«", "got_view_count": 172391, "category_name": "é˜…è¯»", "ctime": 1457483895}
{"tag_name": "Vue.js", "concern_user_count": 263220, "user_id": "3175045313866702", "title": "Vue3æ–‡æ¡£ã€Vue2è¿ç§»Vue3ã€‘", "mark_content": "## Vue2ä¸Vue3çš„å…¨å±€é…ç½®APIå˜åŒ–åŒºåˆ«\n\n### `createApp`\n\n+ Vue2.xåˆ›å»ºå®ä¾‹å¹¶ä¸”æŒ‚è½½DOMä¸Š\n\n  ```vue\n  import Vue from \"vue\";\n  import App from './App.vue'\n  \n  new Vue({\n    render: (h) => h(App)\n  }).$mount(\"#app\");\n  ```\n\n+ Vue3æ–°å¢api===>createApp[æºç åœ°å€](https://github.com/vuejs/vue-next/blob/4951d4352605eb9f4bcbea40ecc68fc6cbc3dce2/packages/runtime-dom/src/index.ts) åˆ›å»ºå®ä¾‹\n\n  > `createApp` ä¼šäº§ç”Ÿä¸€ä¸ª app å®ä¾‹ï¼Œè¯¥å®ä¾‹æ‹¥æœ‰å…¨å±€çš„å¯é…ç½®ä¸Šä¸‹æ–‡\n\n  ```vue\n  import { createApp } from 'vue'\n  import App from './App.vue'\n  \n  createApp(App).mount('#app')\n  ```\n\n#### createAppåšäº†ä»€ä¹ˆ\n\n![æºç ](https://files.catbox.moe/t9vxaw.png)\n\n+ ensureRendereræ–¹æ³•è¿½æº¯è¿‡å»åº•[æ·»åŠ patchclass+patchStyleç­‰è·Ÿæ“ä½œDOMç›¸å…³çš„æ–¹æ³•](https://github.com/vuejs/vue-next/blob/4951d4352605eb9f4bcbea40ecc68fc6cbc3dce2/packages/runtime-dom/src/patchProp.ts)\n  + ensureRenderer(åˆ›å»ºè™šæ‹ŸDOM)ä¸€ç›´è¿½æº¯åˆ°[createRendererä»¥åŠbaseCreateRenderer](https://github.com/vuejs/vue-next/blob/de62cc040c22e3bd93222a9cc84b6564a4b08b51/packages/runtime-core/src/renderer.ts)ï¼ŒbaseCreateRendereræ–¹æ³•æ¶‰åŠäº†è™šæ‹ŸDOMçš„åˆ›å»ºæ›´æ–°DIFFç®—æ³•\n+ ä¹‹åå°±æ˜¯æ£€æŸ¥æ—¶å€™åˆmountæ˜¯å¦æŒ‚è½½åœ¨DOMä¸Š\n+ [appå¯¹è±¡](https://github.com/vuejs/vue-next/blob/54727f9874abe8d0c99ee153d252269ae519b45d/packages/runtime-core/src/apiCreateApp.ts)ä¸Šçš„æ–¹æ³•ï¼šconfigã€useã€mixinã€componentã€directiveã€mountã€unmountã€provide/inject\n\n### `component`\n\n+ Vue2.xã€æ³¨å†Œæˆ–è·å–å…¨å±€ç»„ä»¶ã€‚æ³¨å†Œè¿˜ä¼šè‡ªåŠ¨ä½¿ç”¨ç»™å®šçš„ `id` è®¾ç½®ç»„ä»¶çš„åç§°ã€‘\n\n  ```vue\n  // æ³¨å†Œç»„ä»¶ï¼Œä¼ å…¥ä¸€ä¸ªé€‰é¡¹å¯¹è±¡ (è‡ªåŠ¨è°ƒç”¨ Vue.extend) \n  \n  Vue.component('my-component', { /* ... */ }) \n  \n  // è·å–æ³¨å†Œçš„ç»„ä»¶ (å§‹ç»ˆè¿”å›æ„é€ å™¨) \n  var MyComponent = Vue.component('my-component')\n  ```\n\n+ Vue3ã€æ³¨å†Œæˆ–è·å–å…¨å±€ç»„ä»¶. æ³¨å†Œè¿˜ä¼šè‡ªåŠ¨ä½¿ç”¨ç»™å®šçš„ nameç»„ä»¶ è®¾ç½®ç»„ä»¶çš„åç§°ã€‘[å…¨å±€ç»„ä»¶](https://codepen.io/team/Vue/pen/rNVqYvM)\n\n  > åŸºæœ¬vue2å†™æ³•ä¸€è‡´\n\n  ```vue\n  import { createApp } from 'vue'\n  \n  const app = createApp({})\n  \n  // æ³¨å†Œç»„ä»¶ï¼Œä¼ å…¥ä¸€ä¸ªé€‰é¡¹å¯¹è±¡\n  app.component('my-component', {\n    /* ... */\n  })\n  \n  // è·å–æ³¨å†Œçš„ç»„ä»¶ (å§‹ç»ˆè¿”å›æ„é€ å™¨) \n  const MyComponent = app.component('my-component', {})\n  ```\n\n\n### `config`ã€app=createApp(App)ã€‘\n\n#### `devtools`\n\n> é…ç½®æ˜¯å¦å…è®¸ [vue-devtools](https://github.com/vuejs/vue-devtools) æ£€æŸ¥ä»£ç ã€‚å¼€å‘ç‰ˆæœ¬é»˜è®¤ä¸º `true`ï¼Œç”Ÿäº§ç‰ˆæœ¬é»˜è®¤ä¸º `false`ã€‚ç”Ÿäº§ç‰ˆæœ¬è®¾ä¸º `true` å¯ä»¥å¯ç”¨æ£€æŸ¥ã€‚\n\n```vue\n- Vue.config.devtools = true\n+ app.config.devtools = true    \n```\n\n#### `errorHandler`\n\n````vue\n- Vue.config.errorHandler = function (err, vm, info) {\n  // handle error\n  // `info` æ˜¯ Vue ç‰¹å®šçš„é”™è¯¯ä¿¡æ¯ï¼Œæ¯”å¦‚é”™è¯¯æ‰€åœ¨çš„ç”Ÿå‘½å‘¨æœŸé’©å­\n  // åªåœ¨ 2.2.0+ å¯ç”¨\n}\n+ app.config.errorHandler = (err, vm, info) => {\n  // handle error\n  // `info` æ˜¯ Vue ç‰¹å®šçš„é”™è¯¯ä¿¡æ¯ï¼Œæ¯”å¦‚é”™è¯¯æ‰€åœ¨çš„ç”Ÿå‘½å‘¨æœŸé’©å­\n  // è¿™é‡Œèƒ½å‘ç°é”™è¯¯\n}\n````\n\n> æŒ‡å®šç»„ä»¶çš„æ¸²æŸ“å’Œè§‚å¯ŸæœŸé—´æœªæ•è·é”™è¯¯çš„å¤„ç†å‡½æ•°ã€‚è¿™ä¸ªå¤„ç†å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œå¯è·å–é”™è¯¯ä¿¡æ¯å’Œ Vue å®ä¾‹ã€‚\n\n> é”™è¯¯è¿½è¸ªæœåŠ¡ [Sentry](https://sentry.io/) å’Œ [Bugsnag](https://docs.bugsnag.com/platforms/browsers/vue/) éƒ½é€šè¿‡æ­¤é€‰é¡¹æä¾›äº†å®˜æ–¹æ”¯æŒã€‚\n\n#### `warnHandler`\n\n````vue\n- Vue.config.warnHandler = function (msg, vm, trace) {\n  // `trace` æ˜¯ç»„ä»¶çš„ç»§æ‰¿å…³ç³»è¿½è¸ª\n}\n+ app.config.warnHandler = function(msg, vm, trace) {\n  // `trace` æ˜¯ç»„ä»¶çš„ç»§æ‰¿å…³ç³»è¿½è¸ª\n}\n````\n\n> ä¸º Vue çš„è¿è¡Œæ—¶è­¦å‘Šèµ‹äºˆä¸€ä¸ªè‡ªå®šä¹‰å¤„ç†å‡½æ•°ã€‚æ³¨æ„è¿™åªä¼šåœ¨å¼€å‘è€…ç¯å¢ƒä¸‹ç”Ÿæ•ˆï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹å®ƒä¼šè¢«å¿½ç•¥ã€‚\n\n\n\n#### `globalProperties` ã€æ–°å¢å±æ€§ã€‘\n\n````vue\napp.config.globalProperties.foo = 'bar'\n\napp.component('child-component', {\n  mounted() {\n    console.log(this.foo) // 'bar'\n  }\n})\n````\n\n> æ·»åŠ å¯åœ¨ç¨‹åºå†…çš„ä»»ä½•ç»„ä»¶å®ä¾‹ä¸­è®¿é—®çš„å…¨å±€å±æ€§ã€‚å½“å­˜åœ¨é”®å†²çªæ—¶ï¼Œç»„ä»¶å±æ€§å°†ä¼˜å…ˆ\n>\n> æ›¿ä»£æ‰Vue2.xçš„ Vue.prototypeå±æ€§æ”¾åˆ°åŸå‹ä¸Šçš„å†™æ³•\n\n````vue\n// Vue2.x\nVue.prototype.$http = () => {}\n\n// Vue3\nconst app = Vue.createApp({})\napp.config.globalProperties.$http = () => {}\n````\n\n#### `isCustomElement` ã€æ–°å¢å±æ€§ã€‘\n\n+ æ›¿ä»£æ‰Vue2.xçš„ignoredElements\n\n````vue\n- Vue.config.ignoredElements = [\n  // ç”¨ä¸€ä¸ª `RegExp` å¿½ç•¥æ‰€æœ‰â€œion-â€å¼€å¤´çš„å…ƒç´ \n  // ä»…åœ¨ 2.5+ æ”¯æŒ\n  /^ion-/\n]\n\n// ä¸€äº›ç»„ä»¶ä»¥'ion-'å¼€å¤´å°†ä¼šè¢«è§£æä¸ºè‡ªå®šä¹‰ç»„ä»¶\n+ app.config.isCustomElement = tag => tag.startsWith('ion-')\n````\n\n> æŒ‡å®šä¸€ä¸ªæ–¹æ³•æ¥è¯†åˆ«åœ¨Vueä¹‹å¤–å®šä¹‰çš„è‡ªå®šä¹‰ç»„ä»¶(ä¾‹å¦‚ï¼Œä½¿ç”¨[Web Component API](http://www.ruanyifeng.com/blog/2019/08/web_components.html))ã€‚å¦‚æœç»„ä»¶ç¬¦åˆè¿™ä¸ªæ¡ä»¶ï¼Œå®ƒå°±ä¸éœ€è¦æœ¬åœ°æˆ–å…¨å±€æ³¨å†Œï¼ŒVueä¹Ÿä¸ä¼šæŠ›å‡ºå…³äºUnknown custom elementçš„è­¦å‘Š\n\n> æ³¨æ„ï¼Œè¿™ä¸ªå‡½æ•°ä¸­ä¸éœ€è¦åŒ¹é…æ‰€æœ‰åŸç”ŸHTMLå’ŒSVGæ ‡è®°â€”Vueè§£æå™¨ä¼šè‡ªåŠ¨æ‰§è¡Œæ­¤æ£€æŸ¥\n\n#### `optionMergeStrategies`\n\n````vue\nconst app = Vue.createApp({\n  mounted() {\n    console.log(this.$options.hello)\n  }\n})\n\napp.config.optionMergeStrategies.hello = (parent, child, vm) => {\n  return `Hello, ${child}`\n}\n\napp.mixin({\n  hello: 'Vue'\n})\n\n// 'Hello, Vue\n````\n\n> å®šä¹‰è‡ªå®šä¹‰é€‰é¡¹çš„åˆå¹¶ç­–ç•¥ã€‚\n>\n> åˆå¹¶ç­–ç•¥æ¥æ”¶åœ¨**çˆ¶å®ä¾‹**$optionså’Œ**å­å®ä¾‹**$optionsï¼Œåˆ†åˆ«ä½œä¸ºç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªå‚æ•°ã€‚ä¸Šä¸‹æ–‡Vueå®ä¾‹ä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ä¼ é€’\n\n##### ã€è‡ªå®šä¹‰é€‰é¡¹åˆå¹¶ç­–ç•¥ã€‘[mixin](https://github.com/vuejs/docs-next/blob/master/src/guide/mixins.md#custom-option-merge-strategies)\n\n````vue\nconst app = Vue.createApp({\n  custom: 'hello!'\n})\n\napp.config.optionMergeStrategies.custom = (toVal, fromVal) => {\n  console.log(fromVal, toVal)\n  // => \"goodbye!\", undefined\n  // => \"hello!\", \"goodbye!\"\n  return fromVal || toVal\n}\n\napp.mixin({\n  custom: 'goodbye!',\n  created() {\n    console.log(this.$options.custom) // => \"hello!\"\n  }\n})\n````\n\n> + optionMergeStrategieså…ˆè·å–åˆ°å­å®ä¾‹çš„$optionsçš„mixinè€Œæ²¡æœ‰çˆ¶å®ä¾‹ã€customç¬¬ä¸€æ¬¡æ”¹å˜ä»undefinedåˆ°goodbye--->æ‰“å°\"goodbye!\", undefinedã€‘\n> + çˆ¶å®ä¾‹çš„$optionsæ›¿æ¢æ‰å­å®ä¾‹çš„$optionsã€customç¬¬äºŒæ¬¡ä»goodbyeåˆ°hello!--->æ‰“å°äº†\"hello\", \"goodbye!\"ã€‘\n> + æœ€ååœ¨æ‰“å°app.config.optionMergeStrategies.customè¿”å›çš„çˆ¶å®ä¾‹çš„$options\n\n\n\n> æ— è®ºå¦‚ä½•this.$options.customæœ€åä¼šè¿”å›åˆå¹¶ç­–ç•¥çš„returnçš„å€¼ã€ä½¿ç”¨åœºæ™¯åˆ©ç”¨çˆ¶å­ç»„ä»¶çš„$options,ç„¶åè¿”å›è®¡ç®—ç­‰æ“ä½œå¾—åˆ°æ‰€éœ€è¦çš„å€¼ã€‘optionMergeStrategiesåˆå¹¶$optionså˜åŒ–\n\n\n\n#### performance\n\n````vue\n- Vue.config.performance=true;\n+ app.config.performance=true;\n````\n\n> è®¾ç½®ä¸º true ä»¥åœ¨æµè§ˆå™¨å¼€å‘å·¥å…·çš„æ€§èƒ½/æ—¶é—´çº¿é¢æ¿ä¸­å¯ç”¨å¯¹ç»„ä»¶åˆå§‹åŒ–ã€ç¼–è¯‘ã€æ¸²æŸ“å’Œæ‰“è¡¥ä¸çš„æ€§èƒ½è¿½è¸ªã€‚åªé€‚ç”¨äºå¼€å‘æ¨¡å¼å’Œæ”¯æŒ performance.mark API çš„æµè§ˆå™¨ä¸Šã€‚\n\n\n\n### directive[æ•™ç¨‹æ–‡æ¡£](https://github.com/vuejs/docs-next/blob/master/src/guide/custom-directive.md)\n\n> æ³¨å†Œæˆ–è·å–å…¨å±€æŒ‡ä»¤ã€‚\n\n````\nimport { createApp } from 'vue'\nconst app = createApp({})\n\n// æ³¨å†Œ\napp.directive('my-directive', {\n  // æŒ‡ä»¤çš„ç”Ÿå‘½å‘¨æœŸ\n  // åœ¨ç»‘å®šå…ƒç´ çš„çˆ¶ç»„ä»¶è¢«æŒ‚è½½ä¹‹å‰è°ƒç”¨\n  beforeMount(el, binding, vnode) {},\n  // åœ¨æŒ‚è½½ç»‘å®šå…ƒç´ çš„çˆ¶ç»„ä»¶æ—¶è°ƒç”¨\n  mounted(el, binding, vnode) {},\n  // åœ¨æ›´æ–°åŒ…å«ç»„ä»¶çš„VNodeä¹‹å‰è°ƒç”¨\n  beforeUpdate(el, binding, vnode, prevNode) {},\n  // ç»„ä»¶çš„VNodeåŠå…¶å­ç»„ä»¶çš„VNodeæ›´æ–°ä¹‹åè°ƒç”¨\n  updated(el, binding, vnode, prevNode) {},\n  // åœ¨å¸è½½ç»‘å®šå…ƒç´ çš„çˆ¶ç»„ä»¶ä¹‹å‰è°ƒç”¨\n  beforeUnmount(el, binding, vnode) {},\n  // åœ¨å¸è½½ç»‘å®šå…ƒç´ çš„çˆ¶ç»„ä»¶æ—¶è°ƒç”¨\n  unmounted(el, binding, vnode) {}\n})\n\n// æ³¨å†Œ (æŒ‡ä»¤å‡½æ•°)\napp.directive('my-directive', (el, binding, vnode, prevNode) => {\n  // è¿™é‡Œå°†ä¼šè¢« `mounted` å’Œ `updated` è°ƒç”¨\n})\n\n// getterï¼Œè¿”å›å·²æ³¨å†Œçš„æŒ‡ä»¤\nconst myDirective = app.directive('my-directive')\n````\n\n![æ³¨å†Œ (æŒ‡ä»¤å‡½æ•°)el+binding+vnode+prevNode](https://files.catbox.moe/m00sa0.png)\n\n![binding](https://files.catbox.moe/piuht7.png)\n\n+ el\n\n  æŒ‡ä»¤ç»‘å®šåˆ°çš„å…ƒç´ ã€‚è¿™å¯ä»¥ç”¨æ¥ç›´æ¥æ“ä½œDOMã€‚\n\n+ bindingã€åŒ…å«ä¸‹åˆ—å±æ€§çš„å¯¹è±¡ã€‘\n\n  + instanceï¼šä½¿ç”¨æŒ‡ä»¤çš„ç»„ä»¶çš„å®ä¾‹\n\n  + valueï¼šæŒ‡ä»¤çš„ç»‘å®šå€¼ï¼Œä¾‹å¦‚ï¼š`v-my-directive=\"1 + 1\"`ä¸­ï¼Œç»‘å®šå€¼ä¸º `2`\n\n  + oldValueï¼šæŒ‡ä»¤ç»‘å®šçš„å‰ä¸€ä¸ªå€¼ï¼Œä»…åœ¨ `beforeUpdate` å’Œ `updated` é’©å­ä¸­å¯ç”¨ã€‚æ— è®ºå€¼æ˜¯å¦æ”¹å˜éƒ½å¯ç”¨\n\n  + argï¼šä¼ ç»™æŒ‡ä»¤çš„å‚æ•°ï¼Œå¯é€‰ã€‚ä¾‹å¦‚ `v-my-directive:foo` ä¸­ï¼Œå‚æ•°ä¸º `\"foo\"`\n\n  + modifiersï¼šä¸€ä¸ªåŒ…å«ä¿®é¥°ç¬¦çš„å¯¹è±¡ã€‚ä¾‹å¦‚ï¼š`v-my-directive.foo.bar` ä¸­ï¼Œä¿®é¥°ç¬¦å¯¹è±¡ä¸º `{ foo: true, bar: true }`\n\n  + dirï¼šä¸€ä¸ªå¯¹è±¡ï¼Œåœ¨æ³¨å†ŒæŒ‡ä»¤æ—¶ä½œä¸ºå‚æ•°ä¼ é€’;  ä¸¾ä¸ªä¾‹å­ï¼Œçœ‹ä¸‹é¢æŒ‡ä»¤\n\n    ```\n    app.directive('focus', {\n      mounted(el) {\n        el.focus()\n      }\n    })\n    ```\n\n    dirå°±æ˜¯ä¸‹é¢çš„å¯¹è±¡\n\n    ```\n    {\n      mounted(el) {\n        el.focus()\n      }\n    }\n    ```\n\n+ vnode\n\n  ç¼–è¯‘ç”Ÿæˆçš„è™šæ‹ŸèŠ‚ç‚¹\n\n+ prevNode\n\n  å‰ä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼Œä»…åœ¨beforeUpdateå’Œupdatedé’©å­ä¸­å¯ç”¨\n\n  > tips:é™¤äº† `el` ä¹‹å¤–ï¼Œå…¶å®ƒå‚æ•°éƒ½åº”è¯¥æ˜¯åªè¯»çš„ï¼Œåˆ‡å‹¿è¿›è¡Œä¿®æ”¹ã€‚å¦‚æœéœ€è¦åœ¨é’©å­ä¹‹é—´å…±äº«æ•°æ®ï¼Œå»ºè®®é€šè¿‡å…ƒç´ çš„ [`dataset`](https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement/dataset) æ¥è¿›è¡Œ\n\n\n\n### mixinã€åŸºæœ¬Vue2.xä¸€è‡´ã€‘\n\n+ optionMergeStrategies å½±å“ï¼Œå¯çœ‹ä¸Šé¢\n\n> å…¨å±€æ³¨å†Œä¸€ä¸ªæ··å…¥ï¼Œå½±å“æ³¨å†Œä¹‹åæ‰€æœ‰åˆ›å»ºçš„æ¯ä¸ª Vue å®ä¾‹ã€‚æ’ä»¶ä½œè€…å¯ä»¥ä½¿ç”¨æ··å…¥ï¼Œå‘ç»„ä»¶æ³¨å…¥è‡ªå®šä¹‰çš„è¡Œä¸ºã€‚**ä¸æ¨èåœ¨åº”ç”¨ä»£ç ä¸­ä½¿ç”¨**ã€‚\n\n### mountã€ç±»ä¼¼Vue2.xã€‘\n\n> åœ¨æ‰€æä¾›çš„DOMå…ƒç´ ä¸ŠæŒ‚è½½åº”ç”¨ç¨‹åºå®ä¾‹çš„æ ¹ç»„ä»¶\n\n````\nimport { createApp } from 'vue'\n\nconst app = createApp({})\n// åšä¸€äº›å‡†å¤‡\napp.mount('#my-app')\n````\n\n### provide/injectã€Vue2.xä¸€è‡´ã€‘\n\n> è¯¥é€‰é¡¹ä¸injectä¸€èµ·ä½¿ç”¨ï¼Œå…è®¸ä¸€ä¸ªç¥–å…ˆç»„ä»¶ä½œä¸ºå…¶æ‰€æœ‰åä»£çš„ä¾èµ–æ³¨å…¥å™¨ï¼Œæ— è®ºç»„ä»¶å±‚æ¬¡ç»“æ„æœ‰å¤šæ·±ï¼Œåªè¦å®ƒä»¬ä½äºåŒä¸€çˆ¶é“¾ä¸­å°±å¯ä»¥\n\n> `provide` é€‰é¡¹åº”è¯¥æ˜¯ä¸€ä¸ªå¯¹è±¡æˆ–è¿”å›ä¸€ä¸ªå¯¹è±¡çš„å‡½æ•°ã€‚è¯¥å¯¹è±¡åŒ…å«å¯æ³¨å…¥å…¶å­å­™çš„ propertyã€‚åœ¨è¯¥å¯¹è±¡ä¸­ä½ å¯ä»¥ä½¿ç”¨ ES2015 Symbols ä½œä¸º keyï¼Œä½†æ˜¯åªåœ¨åŸç”Ÿæ”¯æŒ `Symbol` å’Œ `Reflect.ownKeys` çš„ç¯å¢ƒä¸‹å¯å·¥ä½œã€‚\n\n> å¦‚æœåœ¨ç»„ä»¶ä¸­ä¸¤è€…éƒ½åªèƒ½åœ¨å½“å‰æ´»åŠ¨ç»„ä»¶å®ä¾‹çš„ `setup()` ä¸­è°ƒç”¨ï¼Œè¯¦ç»†è¯·çœ‹ä¾èµ–æ³¨å…¥éƒ¨åˆ†\n\n````\nimport { createApp } from 'vue'\n\nconst app = createApp({\n  provide: {\n    user: 'John Doe'\n  }\n})\n\napp.component('user-card', {\n  inject: ['user'],\n  template: `\n    <div>\n      {{ user }}\n    </div>\n  `\n})\n````\n\n### unmountã€æ–°å¢å±æ€§ã€‘\n\nåœ¨æ‰€æä¾›çš„DOMå…ƒç´ ä¸Šå¸è½½åº”ç”¨ç¨‹åºå®ä¾‹çš„æ ¹ç»„ä»¶\n\n````\nimport { createApp } from 'vue'\n\nconst app = createApp({})\n// åšä¸€äº›å¿…è¦çš„å‡†å¤‡\napp.mount('#my-app')\n\n// åº”ç”¨ç¨‹åºå°†åœ¨æŒ‚è½½å5ç§’è¢«å¸è½½\nsetTimeout(() => app.unmount('#my-app'), 5000)\n````\n\n### useã€Vue2.xä¸€è‡´ã€‘\n\nå®‰è£… Vue.js æ’ä»¶ã€‚å¦‚æœæ’ä»¶æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¿…é¡»æä¾› `install` æ–¹æ³•ã€‚å¦‚æœæ’ä»¶æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒä¼šè¢«ä½œä¸º install æ–¹æ³•ã€‚install æ–¹æ³•è°ƒç”¨æ—¶ï¼Œä¼šå°† Vue ä½œä¸ºå‚æ•°ä¼ å…¥ã€‚\n\nå½“ install æ–¹æ³•è¢«åŒä¸€ä¸ªæ’ä»¶å¤šæ¬¡è°ƒç”¨ï¼Œæ’ä»¶å°†åªä¼šè¢«å®‰è£…ä¸€æ¬¡ã€‚\n\n\n\n## setup\n\n`setup` å‡½æ•°æ˜¯ä¸€ä¸ªæ–°çš„ç»„ä»¶é€‰é¡¹ã€‚ä½œä¸ºåœ¨ç»„ä»¶å†…ä½¿ç”¨ **Composition API** çš„å…¥å£ç‚¹\n\n+ æ³¨æ„ `setup` è¿”å›çš„ ref åœ¨æ¨¡æ¿ä¸­ä¼šè‡ªåŠ¨è§£å¼€ï¼Œä¸éœ€è¦å†™ `.value`ã€`setup` å†…éƒ¨éœ€è¦`.value`ã€‘\n\n### è°ƒç”¨æ—¶æœº\n\n+ åˆ›å»ºç»„ä»¶å®ä¾‹ï¼Œç„¶ååˆå§‹åŒ– `props` ï¼Œç´§æ¥ç€å°±è°ƒç”¨`setup` å‡½æ•°ã€‚ä»ç”Ÿå‘½å‘¨æœŸé’©å­çš„è§†è§’æ¥çœ‹ï¼Œå®ƒä¼šåœ¨ `beforeCreate` é’©å­ä¹‹å‰è¢«è°ƒç”¨\n\n+ å¦‚æœ `setup` è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™å¯¹è±¡çš„å±æ€§å°†ä¼šè¢«åˆå¹¶åˆ°ç»„ä»¶æ¨¡æ¿çš„æ¸²æŸ“ä¸Šä¸‹æ–‡\n\n### å‚æ•°\n\n+ `props` ä½œä¸ºå…¶ç¬¬ä¸€ä¸ªå‚æ•°\n\n> æ³¨æ„ `props` å¯¹è±¡æ˜¯å“åº”å¼çš„ï¼Œ`watchEffect` æˆ– `watch` ä¼šè§‚å¯Ÿå’Œå“åº” `props` çš„æ›´æ–°\n>\n> **ä¸è¦**è§£æ„ `props` å¯¹è±¡ï¼Œé‚£æ ·ä¼šä½¿å…¶å¤±å»å“åº”æ€§\n\n````\nexport default {\n  props: {\n    name: String,\n  },\n  setup(props) {\n    console.log(props.name)\n     watchEffect(() => {\n      console.log(`name is: ` + props.name)\n    })\n  },\n}\n````\n\n+ ç¬¬äºŒä¸ªå‚æ•°æä¾›äº†ä¸€ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ã€ä»åŸæ¥ 2.x ä¸­ `this` é€‰æ‹©æ€§åœ°æš´éœ²äº†ä¸€äº› propertyï¼ˆattrs/emit/slotsï¼‰ã€‘\n\n  > `attrs` å’Œ `slots` éƒ½æ˜¯å†…éƒ¨ç»„ä»¶å®ä¾‹ä¸Šå¯¹åº”é¡¹çš„ä»£ç†ï¼Œå¯ä»¥ç¡®ä¿åœ¨æ›´æ–°åä»ç„¶æ˜¯æœ€æ–°å€¼ã€‚æ‰€ä»¥å¯ä»¥è§£æ„ï¼Œæ— éœ€æ‹…å¿ƒåé¢è®¿é—®åˆ°è¿‡æœŸçš„å€¼\n\n  ä¸ºä»€ä¹ˆpropsä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Ÿ\n\n  + ç»„ä»¶ä½¿ç”¨ `props` çš„åœºæ™¯æ›´å¤šï¼Œæœ‰æ—¶å€™ç”šè‡³åªä½¿ç”¨ `props`\n  + å°† `props` ç‹¬ç«‹å‡ºæ¥ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¯ä»¥è®© TypeScript å¯¹ `props` å•ç‹¬åšç±»å‹æ¨å¯¼ï¼Œä¸ä¼šå’Œä¸Šä¸‹æ–‡ä¸­çš„å…¶ä»–å±æ€§ç›¸æ··æ·†ã€‚è¿™ä¹Ÿä½¿å¾— `setup` ã€ `render` å’Œå…¶ä»–ä½¿ç”¨äº† TSX çš„å‡½æ•°å¼ç»„ä»¶çš„ç­¾åä¿æŒä¸€è‡´\n\n  > **`this` åœ¨ `setup()` ä¸­ä¸å¯ç”¨**ã€‚ç”±äº `setup()` åœ¨è§£æ 2.x é€‰é¡¹å‰è¢«è°ƒç”¨ï¼Œ`setup()` ä¸­çš„ `this` å°†ä¸ 2.x é€‰é¡¹ä¸­çš„ `this` å®Œå…¨ä¸åŒã€‚åŒæ—¶åœ¨ `setup()` å’Œ 2.x é€‰é¡¹ä¸­ä½¿ç”¨ `this` æ—¶å°†é€ æˆæ··ä¹±\n\n  ```js\n  setup(props, { attrs }) {\n      // ä¸€ä¸ªå¯èƒ½ä¹‹åå›è°ƒç”¨çš„ç­¾å\n      function onClick() {\n        console.log(attrs.foo) // ä¸€å®šæ˜¯æœ€æ–°çš„å¼•ç”¨ï¼Œæ²¡æœ‰ä¸¢å¤±å“åº”æ€§\n      }\n    }\n  ```\n\n  ![ts](https://files.catbox.moe/vxu51z.png)\n\n  ![å±æ€§](https://files.catbox.moe/v5shq1.png)\n\n\n\n##  å“åº”å¼ç³»ç»Ÿ API\n\n### `reactive`\n\ndesc: æ¥æ”¶ä¸€ä¸ªæ™®é€šå¯¹è±¡ç„¶åè¿”å›è¯¥æ™®é€šå¯¹è±¡çš„å“åº”å¼ä»£ç†ã€ç­‰åŒäº 2.x çš„ `Vue.observable()`ã€‘\n\n+ ssss\n\n  tips:`Proxy`å¯¹è±¡æ˜¯ç›®æ ‡å¯¹è±¡çš„ä¸€ä¸ªä»£ç†å™¨ï¼Œä»»ä½•å¯¹ç›®æ ‡å¯¹è±¡çš„æ“ä½œï¼ˆå®ä¾‹åŒ–ï¼Œæ·»åŠ /åˆ é™¤/ä¿®æ”¹å±æ€§ç­‰ç­‰ï¼‰ï¼Œéƒ½å¿…é¡»é€šè¿‡è¯¥ä»£ç†å™¨ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥æŠŠæ¥è‡ªå¤–ç•Œçš„æ‰€æœ‰æ“ä½œè¿›è¡Œæ‹¦æˆªå’Œè¿‡æ»¤æˆ–è€…ä¿®æ”¹ç­‰æ“ä½œ\n\n> å“åº”å¼è½¬æ¢æ˜¯â€œæ·±å±‚çš„â€ï¼šä¼šå½±å“å¯¹è±¡å†…éƒ¨æ‰€æœ‰åµŒå¥—çš„å±æ€§ã€‚åŸºäº ES2015 çš„ Proxy å®ç°ï¼Œè¿”å›çš„ä»£ç†å¯¹è±¡**ä¸ç­‰äº**åŸå§‹å¯¹è±¡ã€‚å»ºè®®ä»…ä½¿ç”¨ä»£ç†å¯¹è±¡è€Œé¿å…ä¾èµ–åŸå§‹å¯¹è±¡\n\n> `reactive` ç±»çš„ api ä¸»è¦æä¾›äº†å°†å¤æ‚ç±»å‹çš„æ•°æ®å¤„ç†æˆå“åº”å¼æ•°æ®çš„èƒ½åŠ›ï¼Œå…¶å®è¿™ä¸ªå¤æ‚ç±»å‹æ˜¯è¦åœ¨`object array map set weakmap weakset` è¿™äº”ç§ä¹‹ä¸­ã€å¦‚ä¸‹æºç ï¼Œä»–ä¼šåˆ¤æ–­æ˜¯å¦æ˜¯äº”ç±»ä»¥åŠæ˜¯å¦è¢«å†»ç»“ã€‘\n\n![æºç ](https://i.niupic.com/images/2020/08/03/8ubQ.png)\n\n\n\n> å› ä¸ºæ˜¯ç»„åˆå‡½æ•°ã€å¯¹è±¡ã€‘ï¼Œæ‰€ä»¥å¿…é¡»å§‹ç»ˆä¿æŒå¯¹è¿™ä¸ªæ‰€è¿”å›å¯¹è±¡çš„å¼•ç”¨ä»¥ä¿æŒå“åº”æ€§ã€ä¸èƒ½è§£æ„è¯¥å¯¹è±¡æˆ–è€…å±•å¼€ã€‘ä¾‹å¦‚ `const { x, y } = useMousePosition()`æˆ–è€…`return { ...useMousePosition() }`\n\n````js\nfunction useMousePosition() {\n    const pos = reactive({\n        x: 0,\n        y: 0,\n      })\n    return pos\n}\n````\n\n> [`toRefs`](https://vue-composition-api-rfc.netlify.app/zh/api.html#torefs) API ç”¨æ¥æä¾›è§£å†³æ­¤çº¦æŸçš„åŠæ³•â€”â€”å®ƒå°†å“åº”å¼å¯¹è±¡çš„æ¯ä¸ª property éƒ½è½¬æˆäº†ç›¸åº”çš„ refã€æŠŠå¯¹è±¡è½¬æˆäº†refã€‘ã€‚\n>\n> ````js\n>  function useMousePosition() {\n>     const pos = reactive({\n>         x: 0,\n>         y: 0,\n>       })\n>     return toRefs(pos)\n> }\n> \n> // x & y ç°åœ¨æ˜¯ ref å½¢å¼äº†!\n> const { x, y } = useMousePosition()\n> ````\n\n### `ref`\n\næ¥å—ä¸€ä¸ªå‚æ•°å€¼å¹¶è¿”å›ä¸€ä¸ªå“åº”å¼ä¸”å¯æ”¹å˜çš„ ref å¯¹è±¡ã€‚ref å¯¹è±¡æ‹¥æœ‰ä¸€ä¸ªæŒ‡å‘å†…éƒ¨å€¼çš„å•ä¸€å±æ€§ `.value`\n\n````js\nconst count = ref(0)\nconsole.log(count.value) // 0\n````\n\n> å¦‚æœä¼ å…¥ ref çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå°†è°ƒç”¨ `reactive` æ–¹æ³•è¿›è¡Œæ·±å±‚å“åº”è½¬æ¢\n>\n> ![æºç ](https://i.niupic.com/images/2020/08/03/8uc2.png)\n\n\n\n#### é™·é˜±\n\n+ `setup` ä¸­`return`è¿”å›ä¼šè‡ªåŠ¨è§£å¥—ã€åœ¨æ¨¡æ¿ä¸­ä¸éœ€è¦`.value`ã€‘\n\n  ![](https://i.niupic.com/images/2020/08/03/8uc5.png)\n\n+ ref ä½œä¸º reactive å¯¹è±¡çš„ property è¢«è®¿é—®æˆ–ä¿®æ”¹æ—¶ï¼Œä¹Ÿå°†è‡ªåŠ¨è§£å¥— `.value` \n\n  ````js\n  const count = ref(0)\n  /*å½“åšreactiveçš„å¯¹è±¡å±æ€§----è§£å¥—*/\n  const state = reactive({\n    count,\n  })\n  /* ä¸éœ€è¦.value*/\n  console.log(state.count) // 0\n  \n  /*ä¿®æ”¹reactiveçš„å€¼*/\n  state.count = 1\n  /*ä¿®æ”¹äº†refçš„å€¼*/\n  console.log(count.value) // 1\n  ````\n\n  > æ³¨æ„å¦‚æœå°†ä¸€ä¸ªæ–°çš„ ref åˆ†é…ç»™ç°æœ‰çš„ refï¼Œ å°†æ›¿æ¢æ—§çš„ ref\n  >\n  > ````js\n  > /*åˆ›å»ºä¸€ä¸ªæ–°çš„ref*/\n  > const otherCount = ref(2)\n  > \n  > /*èµ‹å€¼ç»™reactiveçš„æ—§çš„refï¼Œæ—§çš„ä¼šè¢«æ›¿æ¢æ‰*/\n  > state.count = otherCount\n  > /*ä¿®æ”¹reactiveä¼šä¿®æ”¹otherCount*/\n  > console.log(state.count) // 2\n  > /*ä¿®æ”¹reactiveä¼šcountæ²¡æœ‰è¢«ä¿®æ”¹ */\n  > console.log(count.value) // 1\n  > ````\n\n+ åµŒå¥—åœ¨ reactive `Object` ä¸­æ—¶ï¼Œref æ‰ä¼šè§£å¥—ã€‚ä» `Array` æˆ–è€… `Map` ç­‰åŸç”Ÿé›†åˆç±»ä¸­è®¿é—® ref æ—¶ï¼Œä¸ä¼šè‡ªåŠ¨è§£å¥—ã€è‡ªç”±æ•°æ®ç±»å‹æ˜¯Objectæ‰ä¼šè§£å¥—ï¼Œ`array ` `map ` `set `  `weakmap ` `weakset`é›†åˆç±» **è®¿é—® ref æ—¶ï¼Œä¸ä¼šè‡ªåŠ¨è§£å¥—**ã€‘\n\n  ````js\n  const arr = reactive([ref(0)])\n  // è¿™é‡Œéœ€è¦ .value\n  console.log(arr[0].value)\n  \n  const map = reactive(new Map([['foo', ref(0)]]))\n  // è¿™é‡Œéœ€è¦ .value\n  console.log(map.get('foo').value)\n  ````\n\n#### å¿ƒæ™ºè´Ÿæ‹…ä¸Š `ref `  vs  `reactive`\n\n+ åœ¨æ™®é€š JavaScript ä¸­åŒºåˆ«`å£°æ˜åŸºç¡€ç±»å‹å˜é‡`ä¸`å¯¹è±¡å˜é‡`æ—¶ä¸€æ ·åŒºåˆ«ä½¿ç”¨ `ref` å’Œ `reactive`\n+ æ‰€æœ‰çš„åœ°æ–¹éƒ½ç”¨ `reactive`ï¼Œç„¶åè®°å¾—åœ¨ç»„åˆå‡½æ•°è¿”å›å“åº”å¼å¯¹è±¡æ—¶ä½¿ç”¨ `toRefs`ã€‚è¿™é™ä½äº†ä¸€äº›å…³äº ref çš„å¿ƒæ™ºè´Ÿæ‹…\n\n### `readonly`\n\nä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼ˆå“åº”å¼æˆ–æ™®é€šï¼‰æˆ– refï¼Œè¿”å›ä¸€ä¸ªåŸå§‹å¯¹è±¡çš„**åªè¯»**ä»£ç†ã€‚ä¸€ä¸ªåªè¯»çš„ä»£ç†æ˜¯â€œæ·±å±‚çš„â€ï¼Œå¯¹è±¡å†…éƒ¨ä»»ä½•åµŒå¥—çš„å±æ€§ä¹Ÿéƒ½æ˜¯åªè¯»çš„ã€è¿”å›ä¸€ä¸ªæ°¸è¿œä¸ä¼šå˜çš„åªè¯»ä»£ç†ã€‘ã€åœºæ™¯å¯ä»¥å‚æ•°æ¯”å¯¹ç­‰ã€‘\n\n````js\nconst original = reactive({ count: 0 })\n\nconst copy = readonly(original)\n\nwatchEffect(() => {\n  // ä¾èµ–è¿½è¸ª\n  console.log(copy.count)\n})\n\n// original ä¸Šçš„ä¿®æ”¹ä¼šè§¦å‘ copy ä¸Šçš„ä¾¦å¬\noriginal.count++\n\n// æ— æ³•ä¿®æ”¹ copy å¹¶ä¼šè¢«è­¦å‘Š\ncopy.count++ // warning!\n````\n\n## `reactive`å“åº”å¼ç³»ç»Ÿå·¥å…·é›†\n\n### `isProxy`\n\n>  æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ç”± `reactive` æˆ–è€… `readonly` æ–¹æ³•åˆ›å»ºçš„ä»£ç†\n\n### `isReactive`\n\n>  æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ç”± `reactive` åˆ›å»ºçš„å“åº”å¼ä»£ç†\n>\n> ````js\n> import { reactive, isReactive } from 'vue'\n> const state = reactive({\n>       name: 'John'\n>     })\n> console.log(isReactive(state)) // -> true\n> ````\n\n> å¦‚æœè¿™ä¸ªä»£ç†æ˜¯ç”± `readonly` åˆ›å»ºçš„ï¼Œä½†æ˜¯åˆè¢« `reactive` åˆ›å»ºçš„å¦ä¸€ä¸ªä»£ç†åŒ…è£¹äº†ä¸€å±‚ï¼Œé‚£ä¹ˆåŒæ ·ä¹Ÿä¼šè¿”å› `true`\n>\n> ````js\n> import { reactive, isReactive, readonly } from 'vue'\n> const state = reactive({\n>       name: 'John'\n>     })\n> // ç”¨readonlyåˆ›å»ºä¸€ä¸ªåªè¯»å“åº”å¼å¯¹è±¡plain\n> const plain = readonly({\n>     name: 'Mary'\n> })\n> //readonlyåˆ›å»ºçš„ï¼Œæ‰€ä»¥isReactiveä¸ºfalse\n> console.log(isReactive(plain)) // -> false  \n> \n> // reactiveåˆ›å»ºçš„å“åº”å¼ä»£ç†å¯¹è±¡åŒ…è£¹ä¸€å±‚readonly,isReactiveä¹Ÿæ˜¯true,isReadonlyä¹Ÿæ˜¯true\n> const stateCopy = readonly(state)\n> console.log(isReactive(stateCopy)) // -> true\n> ````\n\n### `isReadonly`\n\n> æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ç”± `readonly` åˆ›å»ºçš„åªè¯»ä»£ç†\n\n## `reactive`é«˜çº§å“åº”å¼ç³»ç»ŸAPI\n\n### `toRaw`\n\n> è¿”å›ç”± `reactive` æˆ– `readonly` æ–¹æ³•è½¬æ¢æˆå“åº”å¼ä»£ç†çš„æ™®é€šå¯¹è±¡ã€‚è¿™æ˜¯ä¸€ä¸ªè¿˜åŸæ–¹æ³•ï¼Œå¯ç”¨äºä¸´æ—¶è¯»å–ï¼Œè®¿é—®ä¸ä¼šè¢«ä»£ç†/è·Ÿè¸ªï¼Œå†™å…¥æ—¶ä¹Ÿä¸ä¼šè§¦å‘æ›´æ”¹ã€‚ä¸å»ºè®®ä¸€ç›´æŒæœ‰åŸå§‹å¯¹è±¡çš„å¼•ç”¨ã€`**ä¸å»ºè®®èµ‹å€¼ç»™ä»»ä½•å˜é‡**`ã€‘ã€‚è¯·è°¨æ…ä½¿ç”¨\n\nè¢«**`toRaw`**ä¹‹åçš„å¯¹è±¡æ˜¯æ²¡æœ‰è¢«ä»£ç†/è·Ÿè¸ªçš„çš„æ™®é€šå¯¹è±¡\n\n````js\nconst foo = {}\nconst reactiveFoo = reactive(foo)\n\nconsole.log(toRaw(reactiveFoo) === foo) // true\nconsole.log(toRaw(reactiveFoo) !== reactiveFoo) // true\n````\n\n### `markRaw`\n\næ˜¾å¼æ ‡è®°ä¸€ä¸ªå¯¹è±¡ä¸ºâ€œæ°¸è¿œä¸ä¼šè½¬ä¸ºå“åº”å¼ä»£ç†â€ï¼Œå‡½æ•°è¿”å›è¿™ä¸ªå¯¹è±¡æœ¬èº«ã€‚\n\n> ã€`markRaw`ä¼ å…¥å¯¹è±¡ï¼Œè¿”å›çš„å€¼æ˜¯æ°¸è¿œä¸ä¼šè¢«è½¬ä¸ºå“åº”å¼ä»£ç†çš„ã€‘\n>\n> ````js\n> const foo = markRaw({\n>     name: 'Mary'\n> })\n> console.log(isReactive(reactive(foo))) // false\n> ````\n\n> è¢« markRaw æ ‡è®°äº†ï¼Œå³ä½¿åœ¨å“åº”å¼å¯¹è±¡ä¸­ä½œå±æ€§ï¼Œä¹Ÿä¾ç„¶ä¸æ˜¯å“åº”å¼çš„\n>\n> ```js\n> const bar = reactive({ foo })\n> console.log(isReactive(bar.foo)) // false\n> ```\n\n#### `markRaw`æ³¨æ„ç‚¹\n\n+ markRawå’Œ shallowXXX ä¸€æ—çš„ APIå…è®¸**é€‰æ‹©æ€§çš„**è¦†ç›–reactiveæˆ–è€…readonly é»˜è®¤åˆ›å»ºçš„ \"æ·±å±‚çš„\" ç‰¹æ€§ã€å“åº”å¼ã€‘/æˆ–è€…ä½¿ç”¨æ— ä»£ç†çš„æ™®é€šå¯¹è±¡\n\n+ è®¾è®¡è¿™ç§ã€Œæµ…å±‚è¯»å–ã€æœ‰å¾ˆå¤šåŸå› \n\n  + ä¸€äº›å€¼çš„å®é™…ä¸Šçš„ç”¨æ³•éå¸¸ç®€å•ï¼Œå¹¶æ²¡æœ‰å¿…è¦è½¬ä¸ºå“åº”å¼ã€ä¾‹å¦‚ä¸‰æ–¹åº“çš„å®ä¾‹/çœå¸‚åŒºjson/Vueç»„ä»¶å¯¹è±¡ã€‘\n  + å½“æ¸²æŸ“ä¸€ä¸ªå…ƒç´ æ•°é‡åºå¤§ï¼Œä½†æ˜¯æ•°æ®æ˜¯ä¸å¯å˜çš„ï¼Œè·³è¿‡ Proxy çš„è½¬æ¢å¯ä»¥å¸¦æ¥æ€§èƒ½æå‡\n\n+ è¿™äº› API è¢«è®¤ä¸ºæ˜¯é«˜çº§çš„ï¼Œæ˜¯å› ä¸ºè¿™ç§ç‰¹æ€§ä»…åœç•™åœ¨æ ¹çº§åˆ«ï¼Œæ‰€ä»¥å¦‚æœä½ å°†ä¸€ä¸ªåµŒå¥—çš„ï¼Œæ²¡æœ‰ `markRaw` çš„å¯¹è±¡è®¾ç½®ä¸º reactive å¯¹è±¡çš„å±æ€§ï¼Œåœ¨é‡æ–°è®¿é—®æ—¶ï¼Œä½ åˆä¼šå¾—åˆ°ä¸€ä¸ª Proxy çš„ç‰ˆæœ¬ï¼Œåœ¨ä½¿ç”¨ä¸­æœ€ç»ˆä¼šå¯¼è‡´**æ ‡è¯†æ··æ·†**çš„ä¸¥é‡é—®é¢˜ï¼šæ‰§è¡ŒæŸä¸ªæ“ä½œåŒæ—¶ä¾èµ–äºæŸä¸ªå¯¹è±¡çš„åŸå§‹ç‰ˆæœ¬å’Œä»£ç†ç‰ˆæœ¬ï¼ˆæ ‡è¯†æ··æ·†åœ¨ä¸€èˆ¬ä½¿ç”¨å½“ä¸­åº”è¯¥æ˜¯éå¸¸ç½•è§çš„ï¼Œä½†æ˜¯è¦æƒ³å®Œå…¨é¿å…è¿™æ ·çš„é—®é¢˜ï¼Œå¿…é¡»è¦å¯¹æ•´ä¸ªå“åº”å¼ç³»ç»Ÿçš„å·¥ä½œåŸç†æœ‰ä¸€ä¸ªç›¸å½“æ¸…æ™°çš„è®¤çŸ¥ï¼‰ã€‚\n\n  ````js\n  const foo = markRaw({\n    nested: {},\n  })\n  \n  const bar = reactive({\n    // å°½ç®¡ `foo` å·±ç»è¢«æ ‡è®°ä¸º raw äº†, ä½† foo.nested å¹¶æ²¡æœ‰\n    nested: foo.nested,\n  })\n  \n  console.log(foo.nested === bar.nested) // false\n  ````\n\n  + foo.nestedæ²¡æœ‰è¢«æ ‡è®°ä¸º(æ°¸è¿œä¸ä¼šè½¬ä¸ºå“åº”å¼ä»£ç†)ï¼Œå¯¼è‡´æœ€åçš„å€¼ä¸€ä¸ªreactive\n\n  ![å·®å¼‚](https://i.niupic.com/images/2020/08/03/8udB.png)\n\n### `shallowReactive`\n\nåªä¸ºæŸä¸ªå¯¹è±¡çš„ç§æœ‰ï¼ˆç¬¬ä¸€å±‚ï¼‰å±æ€§åˆ›å»ºæµ…å±‚çš„å“åº”å¼ä»£ç†ï¼Œä¸ä¼šå¯¹â€œå±æ€§çš„å±æ€§â€åšæ·±å±‚æ¬¡ã€é€’å½’åœ°å“åº”å¼ä»£ç†ï¼Œè€Œåªæ˜¯ä¿ç•™åŸæ ·ã€ç¬¬ä¸€å±‚æ˜¯å“åº”å¼ä»£ç†ï¼Œæ·±å±‚æ¬¡åªä¿ç•™åŸæ ·(ä¸å…·å¤‡å“åº”å¼ä»£ç†)ã€‘\n\n````js\nconst state = shallowReactive({\n  foo: 1,\n  nested: {\n    bar: 2,\n  },\n})\n\n// å˜æ›´ state çš„è‡ªæœ‰å±æ€§æ˜¯å“åº”å¼çš„ã€ç¬¬ä¸€å±‚æ¬¡å“åº”å¼ã€‘\nstate.foo++\n// ...ä½†ä¸ä¼šæ·±å±‚ä»£ç†ã€æ·±å±‚æ¬¡ä¸æ˜¯å“åº”å¼ã€‘(æ¸²æŸ“æ€§èƒ½)\nisReactive(state.nested) // false\nstate.nested.bar++ // éå“åº”å¼\n````\n\n### `shallowReadonly`\n\nç±»ä¼¼äº`shallowReactive`ï¼ŒåŒºåˆ«æ˜¯ï¼š\n\n+ ç¬¬ä¸€å±‚å°†ä¼šæ˜¯å“åº”å¼ä»£ç†ã€ç¬¬ä¸€å±‚ä¿®æ”¹å±æ€§ä¼šå¤±è´¥ã€‘ï¼Œå±æ€§ä¸ºå“åº”å¼\n+ æ·±å±‚æ¬¡çš„å¯¹è±¡å±æ€§å¯ä»¥ä¿®æ”¹ï¼Œå±æ€§ä¸æ˜¯å“åº”å¼\n\n````js\nconst state = shallowReadonly({\n  foo: 1,\n  nested: {\n    bar: 2,\n  },\n})\n\n// å˜æ›´ state çš„è‡ªæœ‰å±æ€§ä¼šå¤±è´¥\nstate.foo++\n// ...ä½†æ˜¯åµŒå¥—çš„å¯¹è±¡æ˜¯å¯ä»¥å˜æ›´çš„\nisReadonly(state.nested) // false\nstate.nested.bar++ // åµŒå¥—å±æ€§ä¾ç„¶å¯ä¿®æ”¹\n````\n\n## `ref` å“åº”å¼ç³»ç»Ÿå·¥å…·é›†\n\n### `unref`\n\n `unref`æ˜¯`val = isRef(val) ? val.value : val` çš„è¯­æ³•ç³–\n\n````js\nunref(ref(0))===unref(0)===0   è¿”å›number\n````\n\n````js\nfunction useFoo(x: number | Ref<number>) {\n  const unwrapped = unref(x) // unwrapped ä¸€å®šæ˜¯ number ç±»å‹\n}\n````\n\n### `toRef`\n\n`toRef` å¯ä»¥ç”¨æ¥ä¸ºä¸€ä¸ª reactive å¯¹è±¡çš„`å±æ€§`ã€æŸä¸ªå±æ€§åŒºåˆ«toRefsæ¯ä¸€ä¸ªå±æ€§ã€‘åˆ›å»ºä¸€ä¸ª refã€‚è¿™ä¸ª ref å¯ä»¥è¢«ä¼ é€’å¹¶ä¸”èƒ½å¤Ÿä¿æŒå“åº”æ€§\n\n````js\nconst state = reactive({\n  foo: 1,\n  bar: 2,\n})\n\n//reactiveè·å–å•ä¸ªå±æ€§è½¬ä¸ºrefã€fooRefåªæ˜¯ä¸€ä¸ªä»£ç†ã€‘\nconst fooRef = toRef(state, 'foo')\n\nfooRef.value++\nconsole.log(state.foo) // 2\n\nstate.foo++\nconsole.log(fooRef.value) // 3\n````\n\n### `toRefs`\n\næŠŠä¸€ä¸ªå“åº”å¼å¯¹è±¡è½¬æ¢æˆæ™®é€šå¯¹è±¡ï¼Œè¯¥æ™®é€šå¯¹è±¡çš„æ¯ä¸ª property éƒ½æ˜¯ä¸€ä¸ª ref ï¼Œå’Œå“åº”å¼å¯¹è±¡ property ä¸€ä¸€å¯¹åº”\n\n````js\nconst state = reactive({\n  foo: 1,\n  bar: 2,\n})\n\nconst stateAsRefs = toRefs(state)\n/*\nstateAsRefs çš„ç±»å‹å¦‚ä¸‹:\n\n{\n  foo: Ref<number>,\n  bar: Ref<number>\n}\n*/\n\n// ref å¯¹è±¡ ä¸ åŸå±æ€§çš„å¼•ç”¨æ˜¯ \"é“¾æ¥\" ä¸Šçš„\nstate.foo++\nconsole.log(stateAsRefs.foo) // 2\n\nstateAsRefs.foo.value++\nconsole.log(state.foo) // 3\n````\n\n> å¯ä»¥é€šè¿‡`toRefs`è¿”å›å¯è§£æ„çš„reactiveï¼Œå› ä¸º`toRefs`åŒ…è£¹ä¹‹åè¿”å›ä¸€ä¸€å¯¹åº”çš„refå±æ€§\t\n>\n> ````js\n> function useFeatureX() {\n>   const state = reactive({\n>     foo: 1,\n>     bar: 2,\n>   })\n> \n>   // å¯¹ state çš„é€»è¾‘æ“ä½œ\n> \n>   // è¿”å›æ—¶å°†å±æ€§éƒ½è½¬ä¸º ref\n>   return toRefs(state)\n> }\n> \n> export default {\n>   setup() {\n>     // å¯ä»¥è§£æ„ï¼Œä¸ä¼šä¸¢å¤±å“åº”æ€§\n>     const { foo, bar } = useFeatureX()\n> \n>     return {\n>       foo,\n>       bar,\n>     }\n>   },\n> }\n> ````\n\n### `isRef`\n\næ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºä¸€ä¸ª ref å¯¹è±¡\n\n## `ref` é«˜çº§å“åº”å¼ç³»ç»ŸAPI\n\n### `customRef`\n\nç”¨äºè‡ªå®šä¹‰ä¸€ä¸ª `ref`ï¼Œå¯ä»¥æ˜¾å¼åœ°æ§åˆ¶ä¾èµ–è¿½è¸ªå’Œè§¦å‘å“åº”ï¼Œæ¥å—ä¸€ä¸ªå·¥å‚å‡½æ•°ï¼Œä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯ç”¨äºè¿½è¸ªçš„ `track` ä¸ç”¨äºè§¦å‘å“åº”çš„ `trigger`ï¼Œå¹¶è¿”å›ä¸€ä¸ªä¸€ä¸ªå¸¦æœ‰ `get` å’Œ `set` å±æ€§çš„å¯¹è±¡ã€å®é™…ä¸Šå°±æ˜¯æ‰‹åŠ¨ `track`è¿½è¸ª å’Œ `trigger`è§¦å‘å“åº”ã€‘\n\n+ ä»¥ä¸‹ä»£ç å¯ä»¥ä½¿å¾—v-modelé˜²æŠ–\n\n````js\nfunction useDebouncedRef(value, delay = 200) {\n  let timeout\n  return customRef((track, trigger) => {\n    return {\n      get() {\n          /*åˆå§‹åŒ–æ‰‹åŠ¨è¿½è¸ªä¾èµ–è®²ç©¶ä»€ä¹ˆæ—¶å€™å»è§¦å‘ä¾èµ–æ”¶é›†*/\n        track()\n        return value\n      },\n      set(newValue) {\n          /*ä¿®æ”¹æ•°æ®çš„æ—¶å€™ä¼šæŠŠä¸Šä¸€æ¬¡çš„å®šæ—¶å™¨æ¸…é™¤ã€é˜²æŠ–ã€‘*/\n        clearTimeout(timeout)\n        timeout = setTimeout(() => {\n            /*æŠŠæ–°è®¾ç½®çš„æ•°æ®ç»™åˆ°refæ•°æ®æº*/\n          value = newValue\n            /*å†æœ‰ä¾èµ–è¿½è¸ªçš„å‰æä¸‹è§¦å‘å“åº”å¼*/\n          trigger()\n        }, delay)\n      },\n    }\n  })\n}\n\nsetup() {\n    return {\n        /*æš´éœ²è¿”å›çš„æ•°æ®åŠ é˜²æŠ–*/\n      text: useDebouncedRef('hello'),\n    }\n  }\n````\n\n### `shallowRef`\n\nåˆ›å»ºä¸€ä¸ª ref ï¼Œå°†ä¼šè¿½è¸ªå®ƒçš„ `.value` æ›´æ”¹æ“ä½œï¼Œä½†æ˜¯å¹¶ä¸ä¼šå¯¹å˜æ›´åçš„ `.value` åšå“åº”å¼ä»£ç†è½¬æ¢ï¼ˆå³å˜æ›´ä¸ä¼šè°ƒç”¨ `reactive`ï¼‰\n\n> å‰é¢æˆ‘ä»¬è¯´è¿‡å¦‚æœä¼ å…¥ ref çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå°†è°ƒç”¨ `reactive` æ–¹æ³•è¿›è¡Œæ·±å±‚å“åº”è½¬æ¢,é€šè¿‡`shallowRef`åˆ›å»ºçš„ref,å°†ä¸ä¼šè°ƒç”¨reactiveã€å¯¹è±¡ä¸ä¼šæ˜¯å“åº”å¼çš„ã€‘\n>\n> ````js\n> const refOne = shallowRef({});\n> refOne.value = { id: 1 };\n> refOne.id == 20;\n> console.log(isReactive(refOne.value),refOne.value);//false  { id: 1 }\n> ````\n>\n> \n\n### `triggerRef` ã€ä¸`shallowRef`é…åˆã€‘\n\næ‰‹åŠ¨æ‰§è¡Œä¸`shallowRef`ç›¸å…³çš„ä»»ä½•æ•ˆæœ\n\n```js\nconst shallow = shallowRef({\n  greet: 'Hello, world'\n})\n\n// ç¬¬ä¸€æ¬¡è¿è¡Œæ‰“å° \"Hello, world\" \nwatchEffect(() => {\n  console.log(shallow.value.greet)\n})\n\n// è¿™ä¸ä¼šè§¦å‘æ•ˆæœï¼Œå› ä¸ºrefæ˜¯shallow\nshallow.value.greet = 'Hello, universe'\n\n// æ‰“å° \"Hello, universe\"\ntriggerRef(shallow)\n```\n\n## Computed and watchã€ç›‘æ§å˜åŒ–ã€‘\n\n### `computed`\n\n+ ä¼ å…¥ä¸€ä¸ª getter å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ª**é»˜è®¤ä¸å¯æ‰‹åŠ¨ä¿®æ”¹çš„ ref å¯¹è±¡**ã€é»˜è®¤ä¼ å…¥çš„æ˜¯getå‡½æ•°çš„å¯¹è±¡ã€‘\n\n+ ä¼ å…¥ä¸€ä¸ªæ‹¥æœ‰ `get` å’Œ `set` å‡½æ•°çš„å¯¹è±¡ï¼Œåˆ›å»ºä¸€ä¸ªå¯æ‰‹åŠ¨ä¿®æ”¹çš„è®¡ç®—çŠ¶æ€\n\n![æºç ](https://i.niupic.com/images/2020/08/03/8ucL.png)\n\n````js\nconst count = ref(1)\n/*ä¸æ”¯æŒä¿®æ”¹ã€åªè¯»çš„ã€‘ */\nconst plusOne = computed(() => count.value + 1)\nplusOne.value++ // é”™è¯¯ï¼\n\n/*ã€å¯æ›´æ”¹çš„ã€‘ */\nconst plusOne = computed({\n  get: () => count.value + 1,\n  set: (val) => {\n    count.value = val - 1\n  },\n})\n\nplusOne.value = 1\nconsole.log(count.value) // 0\n````\n\n### `watchEffect`\n\nç«‹å³æ‰§è¡Œä¼ å…¥çš„ä¸€ä¸ª*å‡½æ•°*ï¼Œå¹¶å“åº”å¼è¿½è¸ªå…¶ä¾èµ–ï¼Œå¹¶åœ¨**å…¶ä¾èµ–å˜æ›´æ—¶é‡æ–°è¿è¡Œè¯¥å‡½æ•°**\n\n`computed`ä¸`watchEffect`åŒºåˆ«ï¼š\n\n+ `computed`è®¡ç®—å±æ€§å¯é€šè¿‡setup `return`ï¼Œå†æ¨¡æ¿ä¸­ä½¿ç”¨ï¼ŒwatchEffectä¸èƒ½ï¼›\n+ `computed`å¯ä»¥ä½¿ç”¨å¤šä¸ªï¼Œå¹¶ä¸”å¯¹å¤šä¸ªå±æ€§è¿›è¡Œä¸åŒçš„å“åº”è®¡ç®—ï¼ŒwatchEffectä¼šå­˜åœ¨å‰¯ä½œç”¨\n\n````js\nconst count = ref(0)\n\nwatchEffect(() => console.log(count.value))\n// -> æ‰“å°å‡º 0\n\nsetTimeout(() => {\n  count.value++\n  // -> æ‰“å°å‡º 1\n}, 100)\n````\n\n#### åœæ­¢è§‚å¯Ÿ\n\n> å½“åœ¨ç»„ä»¶çš„setup()å‡½æ•°æˆ–ç”Ÿå‘½å‘¨æœŸé’©å­æœŸé—´è°ƒç”¨watchEffectæ—¶ï¼Œç›‘è§†ç¨‹åºä¼šé“¾æ¥åˆ°ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¹¶åœ¨å¸è½½ç»„ä»¶æ—¶è‡ªåŠ¨åœæ­¢\n>\n> ä¸€èˆ¬æƒ…å†µä¸‹`watchEffect`è¿”å›å¯ä»¥stop æ“ä½œï¼Œåœæ­¢ç›‘å¬ç¨‹åº\n>\n> ```js\n> const stop = watchEffect(() => {\n>   /* ... */\n> })\n> \n> // åœæ­¢ç›‘å¬ç¨‹åº\n> stop()\n> ```\n\n\n\n#### å‰¯ä½œç”¨(å‡½æ•°å¼ç¼–ç¨‹)\n\nä¸€ä¸ªå¸¦æœ‰å‰¯ä½œç”¨çš„å‡½æ•°ä¸ä»…åªæ˜¯ç®€å•çš„è¿”å›ä¸€ä¸ªå€¼ï¼Œè¿˜å¹²äº†ä¸€äº›å…¶ä»–çš„äº‹æƒ…ï¼Œæ¯”å¦‚:\n\n- ä¿®æ”¹ä¸€ä¸ªå˜é‡\n- ç›´æ¥ä¿®æ”¹æ•°æ®ç»“æ„\n- è®¾ç½®ä¸€ä¸ªå¯¹è±¡çš„æˆå‘˜\n- æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸æˆ–ä»¥ä¸€ä¸ªé”™è¯¯ç»ˆæ­¢\n- æ‰“å°åˆ°ç»ˆç«¯æˆ–è¯»å–ç”¨æˆ·çš„è¾“å…¥\n- è¯»å–æˆ–å†™å…¥ä¸€ä¸ªæ–‡ä»¶\n- åœ¨å±å¹•ä¸Šç»˜ç”»\n\n> buyCoffeeçš„ä¾‹å­(p3)ï¼šå‡½æ•°åªä¸è¿‡æ˜¯éœ€è¦è¿”å›ä¸€æ¯å’–å•¡ï¼Œå¯æ˜¯å´å¯¹è´¹ç”¨è¿›è¡Œäº†æŒä¹…åŒ–æ“ä½œï¼ˆäº§ç”Ÿå‰¯ä½œç”¨ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨buyCoffeeæ–¹æ³•è¿”å›å’–å•¡æ—¶ä¹ŸæŠŠè´¹ç”¨ä½œä¸ºå€¼ä¸€å¹¶è¿”å›ï¼Œå°†è´¹ç”¨è¿™æ¡è®°å½•äº¤ç»™å…¶ä»–ç¨‹åºæ¥åšæŒä¹…åŒ–ï¼Œä»¥æ­¤æ¥å»é™¤å‰¯ä½œç”¨ ====ã€‹é€šè¿‡æŠŠè¿™äº›å‰¯ä½œç”¨æ¨åˆ°ç¨‹åºçš„å¤–å±‚ï¼Œæ¥è½¬æ¢ä»»ä½•å¸¦æœ‰å‰¯ä½œç”¨çš„å‡½æ•°ï¼ˆçº¯çš„å†…æ ¸å’Œä¸€å±‚å¾ˆè–„çš„å¤–å›´æ¥å¤„ç†å‰¯ä½œç”¨ï¼‰\n\n> å¦‚æœä¸€ä¸ªå‡½æ•°å†…å¤–æœ‰ä¾èµ–äºå¤–éƒ¨å˜é‡æˆ–è€…ç¯å¢ƒæ—¶ï¼Œå¸¸å¸¸æˆ‘ä»¬ç§°ä¹‹ä¸ºå…¶æœ‰å‰¯ä½œç”¨ï¼Œå¦‚æœæˆ‘ä»¬ä»…é€šè¿‡å‡½æ•°ç­¾åä¸æ‰“å¼€å†…éƒ¨ä»£ç æ£€æŸ¥å¹¶ä¸èƒ½çŸ¥é“è¯¥å‡½æ•°åœ¨å¹²ä»€ä¹ˆï¼Œä½œä¸ºä¸€ä¸ªç‹¬ç«‹å‡½æ•°æˆ‘ä»¬æœŸæœ›æœ‰æ˜ç¡®çš„è¾“å…¥å’Œè¾“å‡ºï¼Œå‰¯ä½œç”¨æ˜¯bugçš„å‘æºåœ°ï¼Œä½œä¸ºç¨‹åºå‘˜å¼€å‘è€…åº”å°½é‡å°‘çš„å¼€å‘æœ‰å‰¯ä½œç”¨çš„å‡½æ•°æˆ–æ–¹æ³•ï¼Œå‰¯ä½œç”¨ä¹Ÿä½¿å¾—æ–¹æ³•é€šç”¨æ€§ä¸‹é™ä¸é€‚åˆæ‰©å±•å’Œå¯é‡ç”¨æ€§\n\n#### æ¸…é™¤å‰¯ä½œç”¨\n\n[^]: watchEffectå‡½æ•°éƒ½æ˜¯å‰¯ä½œç”¨\n\nåœ¨ä¸€äº›æ—¶å€™ç›‘å¬å‡½æ•°å°†æ‰§è¡Œ**å¼‚æ­¥**å‰¯ä½œç”¨ã€ä¸€ä¸ªå“åº”å¼ä¾èµ–è¢«ä¿®æ”¹äº†ï¼Œä¼šåšå…¶ä»–äº‹æƒ…ã€‘ï¼Œè¿™äº›å“åº”éœ€è¦åœ¨å…¶å¤±æ•ˆæ—¶æ¸…é™¤(ä¾‹å¦‚åœ¨æ•ˆæœå®Œæˆå‰çŠ¶æ€æ”¹å˜)ã€‚effectå‡½æ•°æ¥æ”¶ä¸€ä¸ªonInvalidate å‡½æ•°ä½œå…¥å‚ï¼Œ ç”¨æ¥æ³¨å†Œæ¸…ç†å¤±æ•ˆæ—¶çš„å›è°ƒã€‚è¿™ä¸ª invalidationå‡½æ•° åœ¨ä»€ä¹ˆæ—¶å€™ä¼šè¢«è°ƒç”¨ï¼š\n\n+ ç›‘å¬å‡½æ•°é‡æ–°è¢«æ‰§è¡Œçš„æ—¶å€™ã€å“åº”å¼ä¾èµ–çš„æ•°æ®è¢«ä¿®æ”¹ã€‘\n\n+ ç›‘å¬åœæ­¢çš„æ—¶å€™ï¼ˆå¦‚æœwatchEffectåœ¨`setup()`æˆ–è€…ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­è¢«ä½¿ç”¨çš„æ—¶å€™ç»„ä»¶ä¼šè¢«å¸è½½ï¼‰ã€åœæ­¢è§‚å¯Ÿã€‘\n\n  ````js\n  watchEffect(onInvalidate => {\n    /*è¿™æ˜¯ä¸ªå¼‚æ­¥æ“ä½œ*/\n    const token = performAsyncOperation(id.value)//idä¾èµ–\n    onInvalidate(() => {\n      // idè¢«ä¿®æ”¹äº†æˆ–è€…ç›‘å¬åœæ­¢äº†ä¼šè§¦å‘token.cancel()äº‹ä»¶ã€è¿™å—åŒºåŸŸçš„ä»£ç ã€‘.\n      // è¿™é‡Œæ˜¯å¼‚æ­¥äº‹ä»¶çš„è¯ï¼Œå‰é¢çš„pedingçš„å¼‚æ­¥æ“ä½œæ— æ•ˆã€è¿™é‡Œçš„å¼‚æ­¥äº‹ä»¶åªæ‰§è¡Œä¸€æ¬¡ã€‘\n       token.cancel()/*å¼‚æ­¥æ“ä½œ*/\n      console.log('onInvalidate')\n    })\n  })\n  ````\n````\n  \n  ä»ä¸Šé¢çœ‹ï¼šæˆ‘ä»¬ä¹‹æ‰€ä»¥æ˜¯é€šè¿‡ä¼ å…¥ä¸€ä¸ªå‡½æ•°å»æ³¨å†Œå¤±æ•ˆå›è°ƒï¼Œè€Œä¸æ˜¯ä»å›è°ƒè¿”å›å®ƒï¼ˆå¦‚ React `useEffect` ä¸­çš„æ–¹å¼ï¼‰ï¼Œæ˜¯å› ä¸ºè¿”å›å€¼å¯¹äºå¼‚æ­¥é”™è¯¯å¤„ç†å¾ˆé‡è¦\n  \n  ````js\n  const data = ref(null)\n  watchEffect(async onInvalidate => {\n    onInvalidate(() => {...}) // æˆ‘ä»¬åœ¨Promiseçš„resolvesä¹‹å‰æ³¨å†Œæ¸…ç†å‡½æ•°(cleanup function)\n    data.value = await fetchData(props.id)\n  })\n````\n\n  æˆ‘ä»¬çŸ¥é“å¼‚æ­¥å‡½æ•°éƒ½ä¼šéšå¼åœ°è¿”å›ä¸€ä¸ª Promiseï¼Œä½†æ˜¯**æ¸…ç†å‰¯ä½œç”¨çš„å‡½æ•°**å¿…é¡»è¦åœ¨ Promise è¢« resolve **ä¹‹å‰è¢«æ³¨å†Œ**ã€‚å¦å¤–ï¼ŒVue ä¾èµ–è¿™ä¸ªè¿”å›çš„ Promise æ¥è‡ªåŠ¨å¤„ç† Promise é“¾ä¸Šçš„æ½œåœ¨é”™è¯¯\n\n#### å‰¯ä½œç”¨åˆ·æ–°æ—¶æœº\n\nVue çš„å“åº”å¼ç³»ç»Ÿä¼š**ç¼“å­˜å‰¯ä½œç”¨å‡½æ•°**ï¼Œå¹¶å¼‚æ­¥åœ°åˆ·æ–°å®ƒä»¬ï¼Œè¿™æ ·å¯ä»¥é¿å…åŒä¸€ä¸ª tick ä¸­å¤šä¸ªçŠ¶æ€æ”¹å˜å¯¼è‡´çš„ä¸å¿…è¦çš„é‡å¤è°ƒç”¨ã€‚åœ¨æ ¸å¿ƒçš„å…·ä½“å®ç°ä¸­, ç»„ä»¶çš„æ›´æ–°å‡½æ•°ä¹Ÿæ˜¯ä¸€ä¸ªè¢«ä¾¦å¬çš„å‰¯ä½œç”¨ã€‚å½“ä¸€ä¸ªç”¨æˆ·å®šä¹‰çš„å‰¯ä½œç”¨å‡½æ•°è¿›å…¥é˜Ÿåˆ—æ—¶, ä¼šåœ¨**æ‰€æœ‰çš„ç»„ä»¶æ›´æ–°åæ‰§è¡Œ**\n\n````js\n<template>\n  <div>{{ count }}</div>\n</template>\n\n<script>\n  export default {\n    setup() {\n      const count = ref(0)\n\n      watchEffect(() => {\n        console.log(count.value)\n      })\n\n      return {\n        count,\n      }\n    },\n  }\n</script>\n````\n\n- `count` ä¼šåœ¨åˆå§‹è¿è¡Œæ—¶åŒæ­¥æ‰“å°å‡ºæ¥\n\n- æ›´æ”¹ `count` æ—¶ï¼Œå°†åœ¨ç»„ä»¶**æ›´æ–°å**æ‰§è¡Œå‰¯ä½œç”¨\n\n  > åˆå§‹åŒ–è¿è¡Œæ˜¯åœ¨ç»„ä»¶ `mounted` ä¹‹å‰æ‰§è¡Œçš„ã€ä½ å¸Œæœ›åœ¨ç¼–å†™å‰¯ä½œç”¨å‡½æ•°æ—¶è®¿é—® DOMï¼ˆæˆ–æ¨¡æ¿ refï¼‰ï¼Œè¯·åœ¨ `onMounted` é’©å­ä¸­è¿›è¡Œã€‘\n  >\n  > `````js\n  > onMounted(() => {\n  >   watchEffect(() => {\n  >     // åœ¨è¿™é‡Œå¯ä»¥è®¿é—®åˆ° DOM æˆ–è€… template refs\n  >   })\n  > })\n  > `````\n\n\n\n> å¦‚æœå‰¯ä½œç”¨éœ€è¦åŒæ­¥æˆ–åœ¨ç»„ä»¶æ›´æ–°ä¹‹å‰é‡æ–°è¿è¡Œï¼Œæˆ‘ä»¬å¯ä»¥ä¼ é€’ä¸€ä¸ªæ‹¥æœ‰ `flush` å±æ€§çš„å¯¹è±¡ä½œä¸ºé€‰é¡¹ï¼ˆé»˜è®¤ä¸º `'post'`ï¼‰\n>\n> ````js\n> // åŒæ­¥è¿è¡Œ\n> watchEffect(\n>   () => {\n>     /* ... */\n>   },\n>   {\n>     flush: 'sync',\n>   }\n> )\n> \n> // ç»„ä»¶æ›´æ–°å‰æ‰§è¡Œ\n> watchEffect(\n>   () => {\n>     /* ... */\n>   },\n>   {\n>     flush: 'pre',\n>   }\n> )\n> ````\n\n#### ä¾¦å¬å™¨è°ƒè¯•ã€å“åº”å¼è°ƒè¯•ç”¨çš„ã€‘\n\n`onTrack` å’Œ `onTrigger` é€‰é¡¹å¯ç”¨äºè°ƒè¯•ä¸€ä¸ªä¾¦å¬å™¨çš„è¡Œä¸ºã€‚\n\n- å½“ä¸€ä¸ª reactive å¯¹è±¡å±æ€§æˆ–ä¸€ä¸ª ref ä½œä¸ºä¾èµ–è¢«è¿½è¸ªæ—¶ï¼Œå°†è°ƒç”¨ `onTrack`ã€è°ƒç”¨æ¬¡æ•°ä¸ºè¢«è¿½è¸ªçš„æ•°é‡ã€‘\n- ä¾èµ–é¡¹å˜æ›´ä¼šå¯¼è‡´é‡æ–°è¿½è¸ªä¾èµ–ï¼Œä»è€Œ`onTrack`è¢«è°ƒç”¨ã€è°ƒç”¨æ¬¡æ•°ä¸ºè¢«è¿½è¸ªçš„æ•°é‡ã€‘\n- ä¾èµ–é¡¹å˜æ›´å¯¼è‡´å‰¯ä½œç”¨è¢«è§¦å‘æ—¶ï¼Œå°†è°ƒç”¨ `onTrigger`\n\nè¿™ä¸¤ä¸ªå›è°ƒéƒ½å°†æ¥æ”¶åˆ°ä¸€ä¸ªåŒ…å«æœ‰å…³æ‰€ä¾èµ–é¡¹ä¿¡æ¯çš„è°ƒè¯•å™¨äº‹ä»¶ã€‚å»ºè®®åœ¨ä»¥ä¸‹å›è°ƒä¸­ç¼–å†™ `debugger` è¯­å¥æ¥æ£€æŸ¥ä¾èµ–å…³ç³»:ã€**`onTrack` å’Œ `onTrigger` ä»…åœ¨å¼€å‘æ¨¡å¼ä¸‹ç”Ÿæ•ˆ**ã€‘\n\n````js\nwatchEffect(\n  () => {\n    /* å‰¯ä½œç”¨çš„å†…å®¹ */\n  },\n  {\n    onTrigger(e) {\n      /*å‰¯ä½œç”¨ä¾èµ–ä¿®æ”¹*/\n      debugger\n    },\n    onTrack(e) {\n      /*å‰¯ä½œç”¨ä¾èµ–ä¿®æ”¹*/\n      debugger\n    },\n  }\n)\n````\n\n![ts](https://files.catbox.moe/eobnec.png)\n\n\n\n### `watch`\n\n`watch` API å®Œå…¨ç­‰æ•ˆäº 2.x `watch` ä¸­ç›¸åº”çš„é€‰é¡¹ã€‚`watch` éœ€è¦ä¾¦å¬ç‰¹å®šçš„æ•°æ®æºï¼Œå¹¶åœ¨å›è°ƒå‡½æ•°ä¸­æ‰§è¡Œå‰¯ä½œç”¨ã€é»˜è®¤æƒ…å†µæ˜¯æ‡’æ‰§è¡Œçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä»…åœ¨ä¾¦å¬çš„æºå˜æ›´æ—¶æ‰æ‰§è¡Œå›è°ƒã€‘\n\n`watch`å…è®¸æˆ‘ä»¬:\n\n+ æ‡’æ‰§è¡Œå‰¯ä½œç”¨\n+ æ›´æ˜ç¡®å“ªäº›çŠ¶æ€çš„æ”¹å˜ä¼šè§¦å‘ä¾¦å¬å™¨é‡æ–°è¿è¡Œå‰¯ä½œç”¨\n+ è®¿é—®ä¾¦å¬çŠ¶æ€å˜åŒ–å‰åçš„å€¼\n\n#### **ä¾¦å¬å•ä¸ªæ•°æ®æº**\n\nä¾¦å¬å™¨çš„æ•°æ®æºå¯ä»¥æ˜¯ä¸€ä¸ªæ‹¥æœ‰è¿”å›å€¼çš„ getter å‡½æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯ ref:\n\n````js\n// ä¾¦å¬ä¸€ä¸ª getter\nconst state = reactive({ count: 0 })\nwatch(\n  () => state.count,\n  (count, prevCount) => {\n    /* ... */\n  }\n)\n\n// ç›´æ¥ä¾¦å¬ä¸€ä¸ª ref\nconst count = ref(0)\nwatch(count, (count, prevCount) => {\n  /* ... */\n})\n````\n\n#### **ä¾¦å¬å¤šä¸ªæ•°æ®æº**\n\n> `watcher` ä¹Ÿå¯ä»¥ä½¿ç”¨æ•°ç»„æ¥åŒæ—¶ä¾¦å¬å¤šä¸ªæº\n>\n> ````js\n> watch([fooRef, barRef], ([foo, bar], [prevFoo, prevBar]) => {\n>   /* ... */\n> })\n> ````\n\n\n\n#### **ä¸ `watchEffect` å…±äº«çš„è¡Œä¸º**\n\nwatch å’Œ watchEffect åœ¨[åœæ­¢ä¾¦å¬](https://vue-composition-api-rfc.netlify.app/zh/api.html#æ‰‹åŠ¨åœæ­¢ä¾¦å¬), [æ¸…é™¤å‰¯ä½œç”¨](https://vue-composition-api-rfc.netlify.app/zh/api.html#æ¸…é™¤å‰¯ä½œç”¨) (ç›¸åº”åœ° `onInvalidate` ä¼šä½œä¸ºå›è°ƒçš„ç¬¬ä¸‰ä¸ªå‚æ•°ä¼ å…¥)ï¼Œ[å‰¯ä½œç”¨åˆ·æ–°æ—¶æœº](https://vue-composition-api-rfc.netlify.app/zh/api.html#å‰¯ä½œç”¨åˆ·æ–°æ—¶æœº) å’Œ [ä¾¦å¬å™¨è°ƒè¯•](https://vue-composition-api-rfc.netlify.app/zh/api.html#ä¾¦å¬å™¨è°ƒè¯•) ç­‰æ–¹é¢è¡Œä¸ºä¸€è‡´\n\n````js\nwatch([fooRef, barRef], ([foo, bar], [prevFoo, prevBar],onInvalidate) => {\n  /* ... */\n  onInvalidate(() => {...})\n},\n  {\n    onTrigger(e) {\n      /*å‰¯ä½œç”¨ä¾èµ–ä¿®æ”¹*/\n      debugger\n    },\n    onTrack(e) {\n      /*å‰¯ä½œç”¨ä¾èµ–ä¿®æ”¹*/\n      debugger\n    },\n  })\n````\n\n## ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°\n\n### **ä¸ 2.x ç‰ˆæœ¬ç”Ÿå‘½å‘¨æœŸç›¸å¯¹åº”çš„ç»„åˆå¼ API**\n\n-  ~~`beforeCreate`~~ -> ä½¿ç”¨ `setup()`\n- ~~`created`~~ -> ä½¿ç”¨ `setup()`\n- `beforeMount` -> `onBeforeMount`\n- `mounted` -> `onMounted`\n- `beforeUpdate` -> `onBeforeUpdate`\n- `updated` -> `onUpdated`\n- `beforeDestroy` -> `onBeforeUnmount`\n- `destroyed` -> `onUnmounted`\n- `errorCaptured` -> `onErrorCaptured`\n\n````js\nimport { onMounted, onUpdated, onUnmounted } from 'vue'\nsetup() {\n    onMounted(() => {\n      console.log('mounted!')\n    })\n    onUpdated(() => {\n      console.log('updated!')\n    })\n    onUnmounted(() => {\n      console.log('unmounted!')\n    })\n  }\n````\n\nè¿™äº›ç”Ÿå‘½å‘¨æœŸé’©å­æ³¨å†Œå‡½æ•°åªèƒ½åœ¨ `setup()` æœŸé—´åŒæ­¥ä½¿ç”¨ï¼Œ å› ä¸ºå®ƒä»¬ä¾èµ–äºå†…éƒ¨çš„å…¨å±€çŠ¶æ€æ¥å®šä½å½“å‰ç»„ä»¶å®ä¾‹ï¼ˆæ­£åœ¨è°ƒç”¨ `setup()` çš„ç»„ä»¶å®ä¾‹ï¼‰, ä¸åœ¨å½“å‰ç»„ä»¶ä¸‹è°ƒç”¨è¿™äº›å‡½æ•°ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚\n\nç»„ä»¶å®ä¾‹ä¸Šä¸‹æ–‡ä¹Ÿæ˜¯åœ¨ç”Ÿå‘½å‘¨æœŸé’©å­åŒæ­¥æ‰§è¡ŒæœŸé—´è®¾ç½®çš„ï¼Œå› æ­¤ï¼Œåœ¨å¸è½½ç»„ä»¶æ—¶ï¼Œåœ¨ç”Ÿå‘½å‘¨æœŸé’©å­å†…éƒ¨åŒæ­¥åˆ›å»ºçš„ä¾¦å¬å™¨å’Œè®¡ç®—çŠ¶æ€ä¹Ÿå°†è‡ªåŠ¨åˆ é™¤ã€‚\n\n### **æ–°å¢çš„é’©å­å‡½æ•°**\n\né™¤äº†å’Œ 2.x ç”Ÿå‘½å‘¨æœŸç­‰æ•ˆé¡¹ä¹‹å¤–ï¼Œç»„åˆå¼ API è¿˜æä¾›äº†ä»¥ä¸‹è°ƒè¯•é’©å­å‡½æ•°ï¼š\n\n- `onRenderTracked`\n- `onRenderTriggered`\n\nä¸¤ä¸ªé’©å­å‡½æ•°éƒ½æ¥æ”¶ä¸€ä¸ª `DebuggerEvent`ï¼Œä¸ `watchEffect` å‚æ•°é€‰é¡¹ä¸­çš„ `onTrack` å’Œ `onTrigger` ç±»ä¼¼:\n\n````js\nexport default {\n  onRenderTracked(e){\n      debugger\n    // æ£€æŸ¥æœ‰å“åº”å’Œè¿½è¸ªçš„ä¾èµ–æ€§\n },\n  onRenderTriggered(e) {\n    debugger\n    // æ£€æŸ¥å“ªä¸ªä¾èµ–æ€§å¯¼è‡´ç»„ä»¶é‡æ–°æ¸²æŸ“\n  },\n}\n````\n\n## Vueæä¾›çš„å†…ç½®ç»„ä»¶\n\n### component ä¸Vue2.xä¸€è‡´\n\næ¸²æŸ“ä¸€ä¸ªâ€œå…ƒç»„ä»¶â€ä¸ºåŠ¨æ€ç»„ä»¶ã€‚ä¾ `is` çš„å€¼ï¼Œæ¥å†³å®šå“ªä¸ªç»„ä»¶è¢«æ¸²æŸ“ã€‚\n\n````\n<!-- åŠ¨æ€ç»„ä»¶ç”± vm å®ä¾‹çš„ `componentId` property æ§åˆ¶ -->\n<component :is=\"componentId\"></component>\n\n<!-- ä¹Ÿèƒ½å¤Ÿæ¸²æŸ“æ³¨å†Œè¿‡çš„ç»„ä»¶æˆ– prop ä¼ å…¥çš„ç»„ä»¶ -->\n<component :is=\"$options.components.child\"></component>\n````\n\n### transition ä¸ Vue2.x ã€åŸºæœ¬ã€‘ ä¸€è‡´æœ‰å·®å¼‚\n\n+ **Propsæ–°å¢**ï¼š\n  + `persisted` \\- `boolean `å¦‚æœä¸ºtrueï¼Œåˆ™è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªè½¬æ¢ï¼Œå®é™…ä¸Šä¸ä¼šæ’å…¥/åˆ é™¤å…ƒç´ ï¼Œè€Œæ˜¯åˆ‡æ¢æ˜¾ç¤º/éšè—çŠ¶æ€ã€‚ transition è¿‡æ¸¡æŒ‚é’©è¢«æ³¨å…¥ï¼Œä½†ä¼šè¢«æ¸²æŸ“å™¨è·³è¿‡ã€‚ ç›¸åï¼Œè‡ªå®šä¹‰æŒ‡ä»¤å¯ä»¥é€šè¿‡è°ƒç”¨æ³¨å…¥çš„é’©å­ï¼ˆä¾‹å¦‚v-showï¼‰æ¥æ§åˆ¶è¿‡æ¸¡\n  + ~~`enter-class`~~----->`enter-from-class`\n  + ~~`leave-class`~~----->`leave-from-class`\n+ äº‹ä»¶\n  + ~~`before-appear`~~\n\n### transition-group ä¸ Vue2.x ä¸€è‡´\n\n### slot ä¸ Vue2.x ä¸€è‡´\n\n### teleport ã€æ–°å¢ç»„ä»¶ã€‘\n\n+ **Props**\n\n  + `to` - `string` å¿…å¡«å±æ€§ï¼Œå¿…é¡»æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„queryé€‰æ‹©å™¨ï¼Œæˆ–è€…æ˜¯å…ƒç´ (å¦‚æœåœ¨æµè§ˆå™¨ç¯å¢ƒä¸­ä½¿ç”¨ï¼‰ã€‚<teleport>ä¸­çš„å†…å®¹å°†ä¼šè¢«æ”¾ç½®åˆ°æŒ‡å®šçš„ç›®æ ‡å…ƒç´ ä¸­\n\n    ````js\n    <!-- æ­£ç¡®çš„ -->\n    <teleport to=\"#some-id\" />\n    <teleport to=\".some-class\" />\n     /*å…ƒç´ */\n    <teleport to=\"[data-teleport]\" />\n    \n    <!-- é”™è¯¯çš„ -->\n    <teleport to=\"h1\" />\n    <teleport to=\"some-string\" />\n    ````\n\n  + `disabled`  \\- `boolean` è¿™æ˜¯ä¸€ä¸ªå¯é€‰é¡¹ ï¼Œåšä¸€ä¸ªæ˜¯å¯ä»¥ç”¨æ¥ç¦ç”¨<teleport>çš„åŠŸèƒ½ï¼Œè¿™æ„å‘³ç€å®ƒçš„æ’æ§½å†…å®¹ä¸ä¼šç§»åŠ¨åˆ°ä»»ä½•åœ°æ–¹ï¼Œè€Œæ˜¯æŒ‰æ²¡æœ‰`teleport`ç»„ä»¶ä¸€èˆ¬æ¥å‘ˆç°ã€é»˜è®¤ä¸ºfalseã€‘\n\n    ````js\n    <teleport to=\"#popup\" :disabled=\"displayVideoInline\">\n      <h1>999999</h1>\n    </teleport>\n    ````\n\n    æ³¨æ„ï¼Œè¿™å°†ç§»åŠ¨å®é™…çš„DOMèŠ‚ç‚¹ï¼Œè€Œä¸æ˜¯é”€æ¯å’Œé‡æ–°åˆ›å»ºï¼Œå¹¶ä¸”è¿˜å°†ä¿æŒä»»ä½•ç»„ä»¶å®ä¾‹æ˜¯æ´»åŠ¨çš„ã€‚æ‰€æœ‰æœ‰çŠ¶æ€HTMLå…ƒç´ (æ¯”å¦‚ä¸€ä¸ªæ­£åœ¨æ’­æ”¾çš„è§†é¢‘)å°†ä¿æŒå®ƒä»¬çš„çŠ¶æ€ã€‚ã€æ§åˆ¶displayVideoInlineå¹¶ä¸æ˜¯é”€æ¯é‡å»ºï¼Œå®ƒä¿æŒå®ä¾‹æ˜¯å­˜åœ¨çš„ï¼Œä¸ä¼šè¢«æ³¨é”€ã€‘\n\n#### å…³äºTeleport å…¶ä»–å†…å®¹\n\nVueé¼“åŠ±æˆ‘ä»¬é€šè¿‡å°†UIå’Œç›¸å…³è¡Œä¸ºå°è£…åˆ°ç»„ä»¶ä¸­æ¥æ„å»ºUIã€‚æˆ‘ä»¬å¯ä»¥å°†å®ƒä»¬å½¼æ­¤åµŒå¥—åœ¨ä¸€èµ·ï¼Œä»¥æ„å»ºæ„æˆåº”ç”¨ç¨‹åºUIçš„æ ‘\n\nä½†æ˜¯ï¼Œæœ‰æ—¶ç»„ä»¶æ¨¡æ¿çš„ä¸€éƒ¨åˆ†é€»è¾‘ä¸Šå±äºè¿™ä¸ªç»„ä»¶ï¼Œè€Œä»æŠ€æœ¯è§’åº¦æ¥çœ‹ï¼Œæœ€å¥½å°†è¿™ä¸€éƒ¨åˆ†æ¨¡æ¿ç§»åˆ°DOMä¸­çš„å…¶ä»–åœ°æ–¹ï¼Œæ”¾åˆ°Vueåº”ç”¨ç¨‹åºä¹‹å¤–\n\nä¸€ä¸ªå¸¸è§çš„åœºæ™¯æ˜¯åˆ›å»ºä¸€ä¸ªåŒ…å«å…¨å±æ¨¡æ€çš„ç»„ä»¶ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ‚¨å¸Œæœ›æ¨¡æ€çš„é€»è¾‘é©»ç•™åœ¨ç»„ä»¶ä¸­ï¼Œä½†æ˜¯æ¨¡æ€æ¡†çš„å®šä½é—®é¢˜å¾ˆå¿«å°±å¾ˆéš¾é€šè¿‡CSSè§£å†³ï¼Œæˆ–è€…éœ€è¦æ›´æ”¹ç»„ä»¶çš„ç»„æˆ\n\nè€ƒè™‘ä¸‹é¢çš„HTMLç»“æ„ï¼š\n\n````js\n<body>\n  <div style=\"position: relative;\">\n    <h3>Tooltips with Vue 3 Teleport</h3>\n    <div>\n      <modal-button></modal-button>\n    </div>\n  </div>\n</body>\n````\n\nè®©æˆ‘ä»¬çœ‹çœ‹ `mode -button`\n\nè¯¥ç»„ä»¶å°†æœ‰ä¸€ä¸ª`button`å…ƒç´ æ¥è§¦å‘æ¨¡æ€çš„æ‰“å¼€ï¼Œè¿˜æœ‰ä¸€ä¸ªdivå…ƒç´ ï¼Œå…¶ç±»ä¸º.modalï¼Œå®ƒå°†åŒ…å«æ¨¡æ€çš„å†…å®¹å’Œä¸€ä¸ªè‡ªå…³é—­æŒ‰é’®\n\n````js\nconst app = Vue.createApp({});\n\napp.component('modal-button', {\n  template: `\n    <button @click=\"modalOpen = true\">\n        Open full screen modal!\n    </button>\n\n    <div v-if=\"modalOpen\" class=\"modal\">\n      <div>\n        I'm a modal! \n        <button @click=\"modalOpen = false\">\n          Close\n        </button>\n      </div>\n    </div>\n  `,\n  data() {\n    return { \n      modalOpen: false\n    }\n  }\n})\n````\n\nå½“åœ¨åˆå§‹HTMLç»“æ„ä¸­ä½¿ç”¨è¿™ä¸ªç»„ä»¶æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€ä¸ªé—®é¢˜â€”â€”æ¨¡æ€è¢«å‘ˆç°åœ¨æ·±åµŒå¥—çš„divä¸­ï¼Œæ¨¡æ€çš„ç»å¯¹ä½ç½®ä»¥çˆ¶divç›¸å¯¹ä½ç½®ä½œä¸ºå‚è€ƒã€‚\n\n![](https://files.catbox.moe/7pil2k.png)\n\n![](https://files.catbox.moe/nk1w9w.png)\n\nTeleportæä¾›äº†ä¸€ç§å¹²å‡€çš„æ–¹å¼ï¼Œå…è®¸æˆ‘ä»¬æ§åˆ¶DOMä¸­å¸Œæœ›åœ¨å“ªä¸ªçˆ¶èŠ‚ç‚¹ä¸‹å‘ˆç°HTMLç‰‡æ®µï¼Œè€Œä¸å¿…è¯‰è¯¸å…¨å±€çŠ¶æ€æˆ–å°†å…¶æ‹†åˆ†ä¸ºä¸¤ä¸ªç»„ä»¶ã€‚\n\nè®©æˆ‘ä»¬ä¿®æ”¹æˆ‘ä»¬çš„modal-buttonæ¥ä½¿ç”¨<teleport>å¹¶å‘Šè¯‰Vue \"teleport this HTML to the \"body\"æ ‡ç­¾\"ã€‚\n\n````\napp.component('modal-button', {\n  template: `\n    <button @click=\"modalOpen = true\">\n        Open full screen modal! (With teleport!)\n    </button>\n\n    <teleport to=\"body\">\n      <div v-if=\"modalOpen\" class=\"modal\">\n        <div>\n          I'm a teleported modal! \n          (My parent is \"body\")\n          <button @click=\"modalOpen = false\">\n            Close\n          </button>\n        </div>\n      </div>\n    </teleport>\n  `,\n  data() {\n    return { \n      modalOpen: false\n    }\n  }\n})\n````\n\n![](https://files.catbox.moe/wymwe9.png)\n\n![](https://files.catbox.moe/9lrbzm.png)\n\n\n\n#### ä¸Vueç»„ä»¶ä¸€èµ·ä½¿ç”¨\n\nå¦‚æœ<teleport>åŒ…å«ä¸€ä¸ªVueç»„ä»¶ï¼Œå®ƒå°†ä»ç„¶æ˜¯<teleport>çš„çˆ¶ç»„ä»¶çš„é€»è¾‘å­ç»„ä»¶\n\n````js\nconst app = Vue.createApp({\n  template: `\n    <h1>Root instance</h1>\n    <parent-component />\n  `\n})\n\napp.component('parent-component', {\n  template: `\n    <h2>This is a parent component</h2>\n    <teleport to=\"#endofbody\">\n      <child-component name=\"John\" />\n    </teleport>\n  `\n})\n\napp.component('child-component', {\n  props: ['name'],\n  template: `\n    <div>Hello, {{ name }}</div>\n  `\n})\n````\n\nåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå³ä½¿åœ¨ä¸åŒçš„åœ°æ–¹å‘ˆç°`child-component`ï¼Œå®ƒä»å°†æ˜¯`parent-componen`çš„å­ç»„ä»¶ã€è€Œä¸æ˜¯çˆ·çˆ·ç»„ä»¶ã€‘ï¼Œå¹¶å°†ä»å…¶çˆ¶ç»„ä»¶æ¥æ”¶ä¸€ä¸ªname çš„props\n\nè¿™ä¹Ÿæ„å‘³ç€æ¥è‡ªçˆ¶ç»„ä»¶çš„æ³¨å…¥å¦‚é¢„æœŸçš„é‚£æ ·å·¥ä½œï¼Œå¹¶ä¸”å­ç»„ä»¶å°†åµŒå¥—åœ¨Vue Devtoolsçš„çˆ¶ç»„ä»¶ä¹‹ä¸‹ï¼Œè€Œä¸æ˜¯æ”¾åœ¨å®é™…å†…å®¹ç§»åŠ¨åˆ°çš„åœ°æ–¹\n\n#### å¯¹åŒä¸€ç›®æ ‡ä½¿ç”¨å¤šæ¬¡teleports\n\nä¸€ä¸ªå¸¸è§çš„ç”¨ä¾‹åœºæ™¯æ˜¯ä¸€ä¸ªå¯é‡ç”¨çš„<Modal>ç»„ä»¶ï¼Œè¯¥ç»„ä»¶å¯èƒ½åŒæ—¶æœ‰å¤šä¸ªæ´»åŠ¨å®ä¾‹ã€‚å¯¹äºè¿™ç§åœºæ™¯ï¼Œå¤šä¸ª<teleport>ç»„ä»¶å¯ä»¥å°†å®ƒä»¬çš„å†…å®¹æŒ‚è½½åˆ°ç›¸åŒçš„ç›®æ ‡å…ƒç´ ã€‚è¿™ä¸ªé¡ºåºå°†æ˜¯ä¸€ä¸ªç®€å•çš„é™„åŠ â€”ç¨åçš„æŒ‚è½½å°†ä½äºç›®æ ‡å…ƒç´ ä¸­è¾ƒæ—©çš„æŒ‚è½½ä¹‹åã€‚\n\n`````js\n<teleport to=\"#modals\">\n  <div>A</div>\n</teleport>\n<teleport to=\"#modals\">\n  <div>B</div>\n</teleport>\n\n<!-- result-->\n<div id=\"modals\">\n  <div>A</div>\n  <div>B</div>\n</div>\n`````\n\n## ä¾èµ–æ³¨å…¥Provide / Inject\n\n`provide` å’Œ `inject` æä¾›ä¾èµ–æ³¨å…¥ï¼ŒåŠŸèƒ½ç±»ä¼¼ 2.x çš„ `provide/inject`ã€‚ä¸¤è€…éƒ½åªèƒ½åœ¨å½“å‰æ´»åŠ¨ç»„ä»¶å®ä¾‹çš„ `setup()` ä¸­è°ƒç”¨\n\nä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æƒ³åœ¨æ ¹ç»„ä»¶ä¸Šæä¾›ä¸€ä¸ªbook nameï¼Œå¹¶å°†å…¶injectåˆ°å­ç»„ä»¶ä¸Š\n\n````js\nimport { provide, inject } from 'vue'\n\nconst RootComponent = {\n  setup() {\n    provide('book', 'Vue 3 guide')\n  }\n}\n\nconst MyBook = {\n  setup() {\n    const book = inject(\n      'book',\n      'Eloquent Javascript' /* é€‰é¡¹çš„é»˜è®¤å€¼ï¼Œå‡å¦‚çˆ¶ç»„ä»¶ä¸æä¾›å€¼å°±è¿”å›é»˜è®¤ */\n    )\n    return {\n      book\n    }\n  }\n}\n````\n\n`inject` æ¥å—ä¸€ä¸ªå¯é€‰çš„çš„é»˜è®¤å€¼ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ã€‚å¦‚æœæœªæä¾›é»˜è®¤å€¼ï¼Œå¹¶ä¸”åœ¨ provide ä¸Šä¸‹æ–‡ä¸­æœªæ‰¾åˆ°è¯¥å±æ€§ï¼Œåˆ™ `inject` è¿”å› `undefined`ã€‚\n\nå¦‚æœæˆ‘ä»¬éœ€è¦æä¾›æˆ–æ³¨å…¥å¤šä¸ªå€¼ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡éšååˆ†åˆ«è°ƒç”¨provideæˆ–injectæ¥å®ç°ã€å¤šæ¬¡è°ƒç”¨ã€‘\n\n````js\nimport { provide, inject } from 'vue'\n\nconst RootComponent = {\n  setup() {\n    provide('book', 'Vue 3 guide')\n    provide('year', '2020')\n  }\n}\n\nconst MyBook = {\n  setup() {\n    const book = inject(\n      'book',\n      'Eloquent Javascript' /* é€‰é¡¹çš„é»˜è®¤å€¼ï¼Œå‡å¦‚çˆ¶ç»„ä»¶ä¸æä¾›å€¼å°±è¿”å›é»˜è®¤ */\n    )\n    const year = inject('year')\n    return {\n      book,\n      year\n    }\n  }\n}\n````\n\n#### **æ³¨å…¥çš„å“åº”æ€§**\n\nå¯ä»¥ä½¿ç”¨ `ref` æˆ– `reactive` æ¥ä¿è¯ `provided` å’Œ `injected` ä¹‹é—´å€¼çš„å“åº”\n\n````js\nimport { ref, reactive } from 'vue'\n\n// æä¾›è€…\nsetup() {\n  const book = reactive({\n    title: 'Vue 3 Guide',\n    author: 'Vue Team'\n  })\n  const year = ref('2020')\n\n /*æä¾›reactiveå“åº”å¼*/\n  provide('book', book)\n /*æä¾›refå“åº”å¼*/\n  provide('year', year)\n}\n\n// æ¶ˆè´¹è€…\nsetup() {\n  const book = inject('book')\n  const year = inject('year')\n /*å“åº”å¼*/\n  return { book, year }\n}\n````\n\nç°åœ¨ï¼Œå½“æä¾›è€…ç»„ä»¶ä¸Šçš„bookæˆ–yearå‘ç”Ÿå˜åŒ–æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥è§‚å¯Ÿåˆ°å®ƒä»¬åœ¨æ³¨å…¥çš„ç»„ä»¶ä¸Šçš„å˜åŒ–ã€‚\n\n> è­¦å‘Š:æˆ‘ä»¬ä¸å»ºè®®æ”¹å˜ä¸€ä¸ªè¢«æ³¨å…¥çš„ååº”æ€§å±æ€§ã€å­ç»„ä»¶å»ä¿®æ”¹æ•°æ®æµã€‘ï¼Œå› ä¸ºå®ƒä¼šç ´åVueçš„å•å‘æ•°æ®æµã€‚ç›¸åï¼Œå°è¯•åœ¨æä¾›å€¼ã€çˆ¶ç»„ä»¶å»ä¿®æ”¹ã€‘çš„åœ°æ–¹æ”¹å˜å€¼ï¼Œæˆ–è€…æä¾›ä¸€ä¸ªæ–¹æ³•æ¥æ”¹å˜å€¼\n>\n> ````js\n> import { ref, reactive } from 'vue'\n> \n> // in provider\n> setup() {\n>   const book = reactive({\n>     title: 'Vue 3 Guide',\n>     author: 'Vue Team'\n>   })\n> \n>   function changeBookName() {\n>     book.title = 'Vue 3 Advanced Guide'\n>   }\n> \n>   provide('book', book)\n>   provide('changeBookName', changeBookName)\n> }\n> \n> // in consumer\n> setup() {\n>   const book = inject('book')\n>   const changeBookName = inject('changeBookName')\n> \n>   return { book, changeBookName }\n> }\n> ````\n\n## æŒ‡ä»¤\n\n### v-text ã€Vue2.xä¸€è‡´ã€‘\n\n### v-htmlã€Vue2.xä¸€è‡´ã€‘\n\n### v-showã€Vue2.xä¸€è‡´ã€‘\n\n### v-ifã€Vue2.xä¸€è‡´ã€‘\n\n### v-elseã€Vue2.xä¸€è‡´ã€‘\n\n### v-else-ifã€Vue2.xä¸€è‡´ã€‘\n\n### v-forã€Vue2.xä¸€è‡´ã€‘\n\n### v-onã€Vue2.xä¸€è‡´ã€‘\n\n### v-bind ã€Vue2.x **ä¿®é¥°ç¬¦**å·®å¼‚ã€‘\n\n**ä¿®é¥°ç¬¦**\n\n+ ~~`.prop`~~ å»é™¤\n+ ~~`.sync`~~ å»é™¤\n+ `.camel` å°† kebab-case attribute åè½¬æ¢ä¸º camelCase\n\n### v-modelã€Vue2.xä¸€è‡´ã€‘\n\n### v-slotã€Vue2.xä¸€è‡´ã€‘\n\n### v-cloakã€Vue2.xä¸€è‡´ã€‘\n\n### v-once ã€Vue2.xä¸€è‡´ã€‘\n\n### v-preã€Vue2.xä¸€è‡´ã€‘\n\n### v-isã€æ–°å¢ã€‘\n\n> æ³¨æ„:æœ¬èŠ‚åªå½±å“åœ¨é¡µé¢çš„HTMLä¸­ç›´æ¥ç¼–å†™Vueæ¨¡æ¿çš„æƒ…å†µ\n\n+ é™åˆ¶ï¼šåŸç”Ÿhtmlå…ƒç´ \n\n+ ä½¿ç”¨ï¼š\n\n   ä½¿ç”¨in-DOMæ¨¡æ¿æ—¶ï¼Œè¯¥æ¨¡æ¿åº”éµå®ˆæœ¬æœºHTMLè§£æè§„åˆ™ã€‚ æŸäº›HTMLå…ƒç´ ï¼ˆä¾‹å¦‚<ul>ï¼Œ<ol>ï¼Œ<table>å’Œ<select>ï¼‰å¯¹å¯ä»¥åœ¨å…¶ä¸­æ˜¾ç¤ºå“ªäº›å…ƒç´ æœ‰é™åˆ¶ï¼Œè€ŒæŸäº›å…ƒç´ ï¼ˆä¾‹å¦‚<li>ï¼Œ<tr>å’Œ<option>ï¼‰åªèƒ½ å‡ºç°åœ¨æŸäº›å…¶ä»–å…ƒç´ å†…ã€‚ è§£å†³æ–¹æ³•æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™äº›å…ƒç´ ä¸Šä½¿ç”¨v-isæŒ‡ä»¤ã€ä½œç”¨å°±æ˜¯è½¬æˆç»„ä»¶çš„åå­—ã€‘\n\n> è­¦å‘Šv-is åŠŸèƒ½ åƒä¸€ä¸ªåŠ¨æ€2.x `:is` ç»‘å®š æ‰€ä»¥è¦æ ¹æ®æ³¨å†Œçš„åç§°æ¸²æŸ“ç»„ä»¶ï¼Œå®ƒçš„å€¼åº”è¯¥æ˜¯ä¸€ä¸ªJavaScriptå­—ç¬¦ä¸²\n>\n> ````js\n> <!-- ä¸æ­£ç¡®çš„, ä¸ä¼šå‡ºç°ä»»ä½•æ¸²æŸ“ -->\n> <tr v-is=\"blog-post-row\"></tr>\n> \n> <!-- æ­£ç¡® -->\n> <tr v-is=\"'blog-post-row'\"></tr>\n> ````\n>\n> ![](https://files.catbox.moe/297484.png)\n\n\n\n## å…¨å±€API\n\n### createApp\n\nè¿”å›ä¸€ä¸ªåº”ç”¨ç¨‹åºå®ä¾‹,æä¾›äº†ä¸€ä¸ªåº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ã€‚åº”ç”¨ç¨‹åºå®ä¾‹æŒ‚è½½çš„æ•´ä¸ªç»„ä»¶æ ‘å…±äº«ç›¸åŒçš„ä¸Šä¸‹æ–‡\n\n```JS\nconst app = Vue.createApp({})\n```\n\n#### å‚æ•°\n\n+ è¯¥å‡½æ•°æ¥æ”¶ä¸€ä¸ªæ ¹ç»„ä»¶é€‰é¡¹å¯¹è±¡ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°\n\n````js\nconst app = Vue.createApp({\n  data() {\n    return {\n      ...\n    }\n  },\n  methods: {...},\n  computed: {...}\n  setup(){...}\n  ...\n})\n````\n\n+ ä½¿ç”¨ç¬¬äºŒä¸ªå‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ ¹ç»„ä»¶props ä¼ é€’ç»™åº”ç”¨\n\n````js\n<div id=\"app\">\n  <!-- è¿™é‡Œå°†ä¼šæ˜¾ç¤º 'Evan' -->\n  {{ username }}\n</div>\n\nconst app = Vue.createApp(\n  {\n    props: ['username']\n  },\n  { username: 'Evan' }\n)\n````\n\n![](https://files.catbox.moe/wbzptw.png)\n\n### h\n\nè¿”å›â€œè™šæ‹ŸèŠ‚ç‚¹â€ï¼Œé€šå¸¸ç¼©å†™ä¸ºVNode:ä¸€ä¸ªç®€å•çš„å¯¹è±¡ï¼Œå®ƒåŒ…å«æè¿°Vueåº”è¯¥åœ¨é¡µé¢ä¸Šæ¸²æŸ“ä½•ç§ç±»å‹çš„èŠ‚ç‚¹çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬å¯¹ä»»ä½•å­èŠ‚ç‚¹çš„æè¿°ã€‚ä½ å¯ä»¥æ‰‹åŠ¨é˜…è¯»[render functions](https://github.com/vuejs/docs-next/blob/master/src/guide/render-function.md)\n\n````js\nrender() {\n  return Vue.h('h1', {}, 'Some title')\n}\n````\n\n#### å‚æ•°\n\næ¥å—ä¸‰ä¸ªå‚æ•°`tag`, `props` and `children`\n\n+ **tag**: \n\n  + ç±»å‹ï¼š`String | Object | Function | null`\n  + è¯¦æƒ…:ä¸€ä¸ªHTMLæ ‡ç­¾åï¼Œä¸€ä¸ªç»„ä»¶ï¼Œä¸€ä¸ªå¼‚æ­¥ç»„ä»¶æˆ–nullã€‚ä½¿ç”¨nullå°†æ¸²æŸ“æˆæ³¨é‡Šã€‚æ­¤å‚æ•°æ˜¯å¿…éœ€çš„\n\n+ #### **props**\n\n  + ç±»å‹:`Object`\n  + è¯¦æƒ…:æ¨¡æ¿ä¸­ä½¿ç”¨çš„attributesã€props å’Œevents å¯¹åº”çš„å¯¹è±¡ã€‚å¯é€‰\n\n+ **children**\n\n  + ç±»å‹: `String | Array | Object`\n\n  + è¯¦æƒ…ï¼š\n\n    Children VNodesï¼Œä½¿ç”¨h()æ„å»ºï¼Œæˆ–ä½¿ç”¨å­—ç¬¦ä¸²æ¥è·å–â€œtext VNodesâ€æˆ–å¸¦æœ‰æ§½çš„å¯¹è±¡ã€‚å¯é€‰\n\n````js\nconst aaa = {\n  props: {\n    someProp: String\n  },\n  setup(props) {\n    console.log(props, \"dsadasdasddasds\");\n  },\n  render() {\n    return h(\n      \"h2\",\n        // {Object}props\n        //ä¸propsï¼Œattributeså’Œeventsç›¸å¯¹åº”çš„å¯¹è±¡\n        //æˆ‘ä»¬å°†åœ¨templateä¸­ä½¿ç”¨ã€‚\n        // å¯é€‰çš„ã€‚\n        {style: {\"font-size\": \"20px\",\n          color: \"#136\"}},\n          [this.someProp,this.$slots.default()]);\n        }\n};\napp.component(\"anchored-heading\", {\n  render() {\n    return h(\n        /*\n\t\t// {String | Object | Function | null}æ ‡ç­¾\n        // HTMLæ ‡è®°åç§°ï¼Œç»„ä»¶ï¼Œå¼‚æ­¥ç»„ä»¶æˆ–nullã€‚\n        //ä½¿ç”¨nullå°†æ¸²æŸ“æ³¨é‡Šã€‚\n        //å¿…å¡«\n        */\n      \"h\" + this.level, // tag name\n        // {Object}props\n        //ä¸propsï¼Œattributeså’Œeventsç›¸å¯¹åº”çš„å¯¹è±¡\n        //æˆ‘ä»¬å°†åœ¨templateä¸­ä½¿ç”¨ã€‚\n        // å¯é€‰çš„ã€‚\n      {}, \n        // {String | Array | Object} children\n        //ä½¿ç”¨`hï¼ˆï¼‰`æ„å»ºçš„å­çº§VNodeï¼Œ\n        //æˆ–ä½¿ç”¨å­—ç¬¦ä¸²è·å–â€œæ–‡æœ¬VNodesâ€æˆ–\n        //å…·æœ‰æ’æ§½çš„å¯¹è±¡ã€‚\n        // å¯é€‰çš„ã€‚\n      [\n        \"Some text comes first.\",\n        h(\"h1\", \"A headline\"),\n        h(aaa, {\n          someProp: \"foobar\"\n        })\n      ]  );},\n});\n````\n\n![](https://files.catbox.moe/h8e4xn.png)\n\n````js\n Vue.h(\n        'a',\n        {\n          name: headingId,\n          href: '#' + headingId\n        },\n        this.$slots.default()\n      )\n    ])\n````\n\n#### é™åˆ¶\n\n#####  VNodes å¿…é¡»ç‹¬ä¸€æ— äºŒ\n\n+ ç»„ä»¶æ ‘ä¸­çš„æ‰€æœ‰vnodeå¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚è¿™æ„å‘³ç€ä¸‹é¢çš„æ¸²æŸ“å‡½æ•°æ˜¯æ— æ•ˆçš„\n\n  ````js\n   render() {\n       const myParagraphVNode = Vue.h('p', 'hi')\n        return Vue.h('div', [\n          // è¡¨ç¤ºæƒŠè®¶ - å‰¯æœ¬å¤åˆ¶ VNodes!\n          myParagraphVNode, myParagraphVNode\n        ])\n    }\n  ````\n\n+ å¦‚æœæ‚¨ç¡®å®æƒ³å¤šæ¬¡å¤åˆ¶ç›¸åŒçš„å…ƒç´ /ç»„ä»¶ï¼Œåˆ™å¯ä»¥ä½¿ç”¨å·¥å‚å‡½æ•°è¿›è¡Œå¤åˆ¶ã€‚ ä¾‹å¦‚ï¼Œä»¥ä¸‹å‘ˆç°å‡½æ•°æ˜¯å‘ˆç°20ä¸ªç›¸åŒæ®µè½çš„å®Œç¾æœ‰æ•ˆæ–¹æ³•ï¼š\n\n  ````js\n  render() {\n    return Vue.h('div',\n      Array.apply(null, { length: 20 }).map(() => {\n        return Vue.h('p', 'hi')\n      })\n    )\n  }\n  ````\n\n##### ç”¨æ™®é€šçš„JavaScriptæ›¿æ¢æ¨¡æ¿ç‰¹æ€§\n\n######  `v-if` and `v-for`\n\nåœ¨ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥ç”¨æ™®é€šJavaScriptè½»æ¾å®Œæˆï¼ŒVueæ¸²æŸ“functions éƒ½ä¸æä¾›ä¸“æœ‰çš„æ›¿ä»£æ–¹æ¡ˆã€‚ä¾‹å¦‚ï¼Œåœ¨ä½¿ç”¨v-ifå’Œv-forçš„æ¨¡æ¿ä¸­\n\n````js\n<ul v-if=\"items.length\">\n  <li v-for=\"item in items\">{{ item.name }}</li>\n</ul>\n<p v-else>No items found.</p>\n==>\nprops: ['items'],\nrender() {\n  if (this.items.length) {\n    return Vue.h('ul', this.items.map((item) => {\n      return Vue.h('li', item.name)\n    }))\n  } else {\n    return Vue.h('p', 'No items found.')\n  }\n}   \n````\n\n###### `v-model`\n\nv-modelæŒ‡ä»¤è¢«æ‰©å±•åˆ°`modelValue`å’Œ`onUpdate:modelValue`é“å…·åœ¨æ¨¡æ¿ç¼–è¯‘æœŸé—´ï¼Œæˆ‘ä»¬å°†ä¸å¾—ä¸è‡ªå·±æä¾›è¿™äº›props \n\n````js\nprops: ['modelValue'],\nrender() {\n  return Vue.h(SomeComponent, {\n    modelValue: this.modelValue,\n    'onUpdate:modelValue': value => this.$emit('update:modelValue', value)\n  })\n}\n````\n\n###### `v-on`\n\næˆ‘ä»¬å¿…é¡»ä¸ºäº‹ä»¶å¤„ç†ç¨‹åºæä¾›ä¸€ä¸ªé€‚å½“çš„propåç§°ï¼Œä¾‹å¦‚ï¼Œä¸ºäº†å¤„ç†`click`äº‹ä»¶ï¼Œpropåç§°åº”è¯¥æ˜¯`onClick`\n\n````js\nrender() {\n  return Vue.h('div', {\n    onClick: $event => console.log('clicked', $event.target)\n  })\n}\n````\n\n###### `äº‹ä»¶ä¿®é¥°ç¬¦`\n\nå¯¹äº.passiveã€.captureå’Œ.onceäº‹ä»¶ä¿®é¥°ç¬¦ï¼ŒVueæä¾›äº†å¤„ç†ç¨‹åºçš„å¯¹è±¡è¯­æ³•\n\n```js\nrender() {\n  return Vue.h('input', {\n    onClick: {\n      handler: this.doThisInCapturingMode,\n      capture: true\n    },\n    onKeyUp: {\n      handler: this.doThisOnce,\n      once: true\n    },\n    onMouseOver: {\n      handler: this.doThisOnceInCapturingMode,  //äº‹ä»¶\n      once: true, //æ˜¯å¦è§¦å‘ä¸€æ¬¡\n      capture: true \n    },\n  })\n}\n```\n\nå¯¹äºæ‰€æœ‰å…¶ä»–äº‹ä»¶å’Œé”®ä¿®é¥°ç¬¦ï¼Œä¸éœ€è¦ç‰¹æ®Šçš„APIï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥åœ¨å¤„ç†ç¨‹åºä¸­ä½¿ç”¨äº‹ä»¶æ–¹æ³•\n\n![](https://files.catbox.moe/ftdpzd.png)\n\n````js\nrender() {\n  return Vue.h('input', {\n    onKeyUp: event => {\n      // å¦‚æœå‘å‡ºäº‹ä»¶çš„å…ƒç´ ä¸å­˜åœ¨ï¼Œåˆ™ä¸­æ­¢äº‹ä»¶ç»‘å®šåˆ°çš„å…ƒç´ \n      if (event.target !== event.currentTarget) return\n      // åŒæ—¶å¦‚æœæŒ‰ä¸‹çš„é”®ä¸æ˜¯enteré”®key (13)ä»¥åŠshifté”®æ²¡æœ‰æŒ‰ä¸‹\n      if (!event.shiftKey || event.keyCode !== 13) return\n      // åœæ­¢äº‹ä»¶ä¼ æ’­\n      event.stopPropagation()\n      // é˜»æ­¢æ­¤å…ƒç´ çš„é»˜è®¤keyupå¤„ç†ç¨‹åº\n      event.preventDefault()\n      // ...\n    }\n  })\n}\n````\n\n###### `Slots`\n\nä½ å¯ä»¥è®¿é—®æ’æ§½å†…å®¹`this.$slots`åœ¨VNodesæ•°ç»„çš„\n\n````js\nrender() {\n  // `<div><slot></slot></div>`\n  return Vue.h('div', {}, this.$slots.default())\n}\n````\n\n````js\nprops: ['message'],\nrender() {\n  // `<div><slot :text=\"message\"></slot></div>`\n  return Vue.h('div', {}, this.$slots.default({\n    text: this.message\n  }))\n}\n````\n\nä½¿ç”¨renderå‡½æ•°å°†æ§½ä¼ é€’ç»™å­ç»„ä»¶\n\n````js\nrender() {\n  // `<div><child v-slot=\"props\"><span>{{ props.text }}</span></child></div>`\n  return Vue.h('div', [\n    Vue.h('child', {}, {\n      // é€šè¿‡`slots'ä½œä¸ºå­å¯¹è±¡\n      // in the form of { name: props => VNode | Array<VNode> }\n      default: (props) => Vue.h('span', props.text)\n    })\n  ])\n}\n````\n\n###### `JSX`\n\nå¦‚æœæˆ‘ä»¬è¦ç¼–å†™å¤§é‡çš„æ¸²æŸ“å‡½æ•°ï¼Œç¼–å†™è¿™æ ·çš„ä¸œè¥¿å¯èƒ½ä¼šè®©äººæ„Ÿåˆ°ç—›è‹¦\n\n````js\nVue.h(\n  'anchored-heading',\n  {\n    level: 1\n  },\n  [Vue.h('span', 'Hello'), ' world!']\n)\n````\n\nç‰¹åˆ«æ˜¯å½“æ¨¡æ¿ç‰ˆæœ¬ç›¸æ¯”ä¹‹ä¸‹å¦‚æ­¤ç®€æ´çš„æ—¶å€™\n\n````js\n<anchored-heading :level=\"1\"> <span>Hello</span> world! </anchored-heading>\n````\n\nè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæœ‰ä¸€ä¸ªBabelæ’ä»¶å¯ä»¥åœ¨Vueä¸­ä½¿ç”¨JSXï¼Œè®©æˆ‘ä»¬å›åˆ°æ›´æ¥è¿‘æ¨¡æ¿çš„è¯­æ³•\n\n````js\nimport AnchoredHeading from './AnchoredHeading.vue'\n\nnew Vue({\n  el: '#demo',\n  render() {\n    return (\n      <AnchoredHeading level={1}>\n        <span>Hello</span> world!\n      </AnchoredHeading>\n    )\n  }\n})\n````\n\n### defineComponentã€ç»„ä»¶ã€‘\n\nåœ¨å®ç°æ–¹é¢ï¼ŒdefineComponentåªä¼šæ‰§è¡Œè¿”å›ä¼ é€’ç»™å®ƒçš„å¯¹è±¡çš„æ“ä½œã€‚ ä½†æ˜¯ï¼Œå°±ç±»å‹è€Œè¨€ï¼Œè¿”å›çš„å€¼å…·æœ‰äººå·¥æ¸²æŸ“åŠŸèƒ½ï¼ŒTSXå’ŒIDEå·¥å…·æ”¯æŒçš„æ„é€ å‡½æ•°çš„ç»¼åˆç±»å‹\n\n#### å‚æ•°\n\nå…·æœ‰ç»„ä»¶é€‰é¡¹çš„å¯¹è±¡\n\n```js\nimport { defineComponent } from 'vue'\n\nconst MyComponent = defineComponent({\n  data() {\n    return { count: 1 }\n  },\n  methods: {\n    increment() {\n      this.count++\n    }\n  }\n})\n```\n\n### defineAsyncComponent ã€å¼‚æ­¥ç»„ä»¶ã€‘\n\nåˆ›å»ºåªåœ¨å¿…è¦æ—¶åŠ è½½çš„å¼‚æ­¥ç»„ä»¶\n\n#### å‚æ•°\n\nå¯¹äºåŸºæœ¬ç”¨æ³•ï¼ŒdefineAsyncComponentå¯ä»¥æ¥å—è¿”å›`Promise`çš„å·¥å‚å‡½æ•°ã€‚å½“æ‚¨ä»serveæ£€ç´¢åˆ°ç»„ä»¶å®šä¹‰æ—¶ï¼Œåº”è¯¥è°ƒç”¨Promiseçš„è§£æå›è°ƒã€‚æ‚¨è¿˜å¯ä»¥è°ƒç”¨reject(reason)æ¥æŒ‡ç¤ºåŠ è½½å¤±è´¥ã€‚\n\n````js\nimport { defineAsyncComponent } from 'vue'\n\n\nconst AsyncComp = defineAsyncComponent(() =>\n   /*æˆ–è€…*/\n  import('./components/AsyncComponent.vue')\n   /*æˆ–è€…*/\n  new Promise((resolve, reject) => {\n  /*å¯ä»¥reject*/\n      resolve({\n        template: '<div>I am async!</div>'\n      })\n    })\n)\n\napp.component('async-component', AsyncComp)\n````\n\nåœ¨ä½¿ç”¨æœ¬åœ°æ³¨å†Œæ—¶ï¼Œè¿˜å¯ä»¥ç›´æ¥æä¾›è¿”å›Promiseçš„å‡½æ•°\n\n```js\nimport { createApp, defineAsyncComponent } from 'vue'\n\ncreateApp({\n  // ...\n  components: {\n    AsyncComponent: defineAsyncComponent(() =>\n      import('./components/AsyncComponent.vue')\n    )\n  }\n})\n```\n\nå¯¹äºé«˜çº§ç”¨æ³•ï¼ŒdefineAsyncComponentå¯ä»¥æ¥å—ä¸€ä¸ªå¯¹è±¡\n\n````js\nconst AsyncComp = defineAsyncComponent({\n  // å·¥å‚å‡½æ•°\n  loader: () => import('./Foo.vue')\n  // åŠ è½½å¼‚æ­¥ç»„ä»¶æ—¶ä½¿ç”¨çš„ç»„ä»¶\n  loadingComponent: LoadingComponent,\n  //åŠ è½½å¤±è´¥çš„æ—¶å€™ä½¿ç”¨çš„ç»„ä»¶\n  errorComponent: ErrorComponent,\n  // åœ¨æ˜¾ç¤ºåŠ è½½ç»„ä»¶ä¹‹å‰å»¶è¿Ÿã€‚é»˜è®¤å€¼:200 msã€‚\n  delay: 200,\n  // å¦‚æœè¶…æ—¶ï¼Œå°†æ˜¾ç¤ºé”™è¯¯ç»„ä»¶\n  // å­˜åœ¨timeoutå¹¶ä¸”è¶…è¿‡è¿™ä¸ªæ—¶é—´. é»˜è®¤å€¼:æ— ç©·\n  timeout: 3000,\n  // è¿”å›å¸ƒå°”å€¼çš„å‡½æ•°ï¼ŒæŒ‡ç¤ºå½“åŠ è½½å™¨promise rejectsæ—¶å¼‚æ­¥ç»„ä»¶æ˜¯å¦åº”è¯¥é‡è¯•\n  retryWhen: error => error.code !== 404,\n  // å…è®¸çš„æœ€å¤§é‡è¯•æ¬¡æ•°\n  maxRetries: 3,\n  // å®šä¹‰ç»„ä»¶æ˜¯å¦å¯æŒ‚è½½\n  suspensible: false\n})\n````\n\n### resolveComponent\n\n> è­¦å‘ŠresolveComponentåªèƒ½åœ¨`render`æˆ–`setup`å‡½æ•°ä¸­ä½¿ç”¨ã€‚\n>\n> å…è®¸é€šè¿‡åç§°è§£æç»„ä»¶ï¼Œå¦‚æœå®ƒåœ¨å½“å‰åº”ç”¨ç¨‹åºå®ä¾‹ä¸­å¯ç”¨ã€‚å¦‚æœæ‰¾ä¸åˆ°ç»„ä»¶ï¼Œè¿”å›ç»„ä»¶æˆ–æœªå®šä¹‰ç»„ä»¶\n>\n> å¦‚æœæ‰¾ä¸åˆ°ç»„ä»¶ï¼Œè¿”å›ç»„ä»¶æˆ–æœªå®šä¹‰ç»„ä»¶ã€ç»„ä»¶ã€‘\n>\n> ````js\n> app.component('MyComponent', {\n>   /* ... */\n> })\n> const MyComponent = resolveComponent('MyComponent')\n> ````\n\n###  resolveDynamicComponentã€è§£ææ´»åŠ¨çš„ç»„ä»¶activeã€‘\n\n> resolveDynamicComponentåªèƒ½åœ¨`render`æˆ–`setup`å‡½æ•°ä¸­ä½¿ç”¨ã€‚\n>\n> å…è®¸ä½¿ç”¨ä¸<component:is=\"\">ç›¸åŒçš„æœºåˆ¶æ¥è§£æç»„ä»¶ã€‚\n>\n> è¿”å›è§£æçš„ç»„ä»¶æˆ–ä¸€ä¸ªæ–°åˆ›å»ºçš„VNodeä»¥ç»„ä»¶åç§°ä½œä¸ºèŠ‚ç‚¹æ ‡è®°çš„ã€‚\n>\n> å¦‚æœæ²¡æœ‰æ‰¾åˆ°ç»„ä»¶ï¼Œä¼šå‘å‡ºè­¦å‘Š\n\n### resolveDirective\n\n> è­¦å‘ŠresolveDirectiveåªèƒ½åœ¨`render`æˆ–`setup`å‡½æ•°ä¸­ä½¿ç”¨ã€‚\n>\n> å…è®¸é€šè¿‡åç§°è§£ææŒ‡ä»¤ï¼Œå¦‚æœå®ƒåœ¨å½“å‰åº”ç”¨ç¨‹åºå®ä¾‹ä¸­å¯ç”¨ã€‚\n>\n> è¿”å›ä¸€ä¸ª`Directive`æˆ– å½“æ²¡æœ‰æ‰¾åˆ°çš„æ—¶å€™ï¼Œè¿”å›`undefined`ã€‚\n>\n> ````js\n> app.directive('highlight', {})\n> render(){\n>     const highlightDirective = resolveDirective('highlight')\n> }\n> ````\n\n### withDirectives\n\n> è­¦å‘Š`withDirectives`åªèƒ½åœ¨`render`æˆ–`setup`å‡½æ•°ä¸­ä½¿ç”¨ã€‚\n>\n> :::å…è®¸åº”ç”¨æŒ‡ä»¤åˆ°VNodeã€‚è¿”å›ä¸€ä¸ªå¸¦æœ‰åº”ç”¨æŒ‡ä»¤çš„VNodeã€‚\n>\n> ````js\n> const bar = resolveDirective('bar')\n> \n> return withDirectives(h('div'), [\n>   [bar, this.y]\n> ])\n> ````\n\n### createRenderer *ã€å¾…ã€‘\n\n### nextTick\n\nå°†å›è°ƒå»¶è¿Ÿåˆ°ä¸‹ä¸€ä¸ªDOMæ›´æ–°å‘¨æœŸä¹‹åæ‰§è¡Œã€‚åœ¨æ›´æ”¹äº†ä¸€äº›æ•°æ®ä»¥ç­‰å¾…DOMæ›´æ–°ä¹‹åç«‹å³ä½¿ç”¨å®ƒ\n\n````js\nsetup() {\n    const message = ref('Hello!')\n    const changeMessage = async newMessage => {\n      message.value = newMessage\n      /*ç­‰å¾…DOMæ›´æ–°*/\n      await nextTick()\n      console.log('Now DOM is updated')\n    }\n  }\n````\n\n## å®ä¾‹æ–¹æ³•methods\n\n### $watch\n\n#### å‚æ•°\n\n- `{string | Function} source`\n- `{Function | Object} callback`\n- `{Object} [options]`\n  - `{boolean} deep`\n  - `{boolean} immediate`\n\n#### ç”¨æ³•\n\nè§‚å¯Ÿç»„ä»¶å®ä¾‹ä¸Šçš„å“åº”å¼å±æ€§æˆ–computedå‡½æ•°çš„æ›´æ”¹ã€‚ä½¿ç”¨å›è°ƒè·å–åˆ°ç»™å®šå±æ€§çš„æ–°å€¼å’Œæ—§å€¼ã€‚æˆ‘ä»¬åªèƒ½é€šè¿‡é¡¶çº§dataã€propæˆ–computedçš„å±æ€§åä½œä¸ºå­—ç¬¦ä¸²çš„å½¢å¼ä¼ é€’ã€‚å¯¹äºæ›´å¤æ‚çš„è¡¨è¾¾å¼æˆ–åµŒå¥—å±æ€§ï¼Œä½¿ç”¨å‡½æ•°ä»£æ›¿ã€‚\n\n#### ä¾‹å­\n\n````js\nconst app = Vue.createApp({\n  data() {\n    return {\n      a: 1,\n      b: 2,\n      c: {\n        d: 3,\n        e: 4\n      }\n    }\n  },\n  created() {\n    // é¡¶çº§å±æ€§åa\n    this.$watch('a', (newVal, oldVal) => {\n      // åšä¸€äº›äº‹\n    })\n\n    // è§‚å¯Ÿç›‘è§†å•ä¸ªåµŒå¥—å±æ€§\n    this.$watch(\n      () => this.c.d,\n      (newVal, oldVal) => {\n        // åšä¸€äº›äº‹\n      }\n    )\n\n    // ç›‘æ§å¤æ‚è¡¨è¾¾å¼\n    this.$watch(\n      // æ¯å½“è¡¨è¾¾å¼`this.a + this.b`äº§ç”Ÿä¸åŒçš„ç»“æœæ—¶\n      // å¤„ç†ç¨‹åºå°†è¢«è°ƒç”¨ã€‚è¿™å°±å¥½åƒæˆ‘ä»¬åœ¨çœ‹computedå±æ€§\n      // è€Œä¸å®šä¹‰è®¡ç®—å±æ€§æœ¬èº«\n      () => this.a + this.b,\n      (newVal, oldVal) => {\n        // åšä¸€äº›äº‹\n      }\n    )\n  }\n})\n````\n\n> + å½“ç›‘è§†çš„å€¼æ˜¯å¯¹è±¡æˆ–æ•°ç»„æ—¶ï¼Œå¯¹å…¶å±æ€§æˆ–å…ƒç´ çš„ä»»ä½•æ›´æ”¹éƒ½ä¸ä¼šè§¦å‘ç›‘è§†ç¨‹åºï¼Œå› ä¸ºå®ƒä»¬å¼•ç”¨ç›¸åŒçš„å¯¹è±¡/æ•°ç»„\n>\n> ````js\n> const app = Vue.createApp({\n>   data() {\n>     return {\n>       article: {\n>         text: 'Vue is awesome!'\n>       },\n>       comments: ['Indeed!', 'I agree']\n>     }\n>   },\n>   created() {\n>     this.$watch('article', () => {\n>       console.log('Article changed!')\n>     })\n> \n>     this.$watch('comments', () => {\n>       console.log('Comments changed!')\n>     })\n>   },\n>   methods: {\n>     // è¿™äº›æ–¹æ³•ä¸ä¼šè§¦å‘è§‚å¯Ÿè€…ï¼Œå› ä¸ºæˆ‘ä»¬ä»…æ›´æ”¹äº†å¯¹è±¡/æ•°ç»„çš„å±æ€§,\n>     // å¹¶ä¸æ˜¯ Object/Array æœ¬èº«\n>     changeArticleText() {\n>       this.article.text = 'Vue 3 is awesome'\n>     },\n>     addComment() {\n>       this.comments.push('New comment')\n>     },\n> \n>     // è¿™äº›æ–¹æ³•ä¼šè§¦å‘è§‚å¯Ÿè€…ï¼Œå› ä¸ºæˆ‘ä»¬å®Œæ•´æ›¿æ¢äº†å¯¹è±¡/æ•°ç»„\n>     changeWholeArticle() {\n>       this.article = { text: 'Vue 3 is awesome' }\n>     },\n>     clearComments() {\n>       this.comments = []\n>     }\n>   }\n> })\n> ````\n>\n> + $watchè¿”å›ä¸€ä¸ªå–æ¶ˆç›‘è§†çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°åœæ­¢è§¦å‘å›è°ƒ\n>\n> ````js\n> const unwatch = vm.$watch('a', cb)\n> // later, teardown the watcher\n> unwatch()\n> ````\n\n#### **Option: deep**\n\næ£€æµ‹å¯¹è±¡å†…éƒ¨åµŒå¥—çš„å€¼æ›´æ”¹ï¼Œéœ€è¦åœ¨optionså‚æ•°ä¸­ä¼ å…¥deep: trueã€‚æ³¨æ„ï¼Œä¾¦å¬æ•°ç»„çªå˜å¹¶ä¸éœ€è¦è¿™æ ·åšã€‚\n\n````js\nvm.$watch('someObject', callback, {\n  deep: true\n})\nvm.someObject.nestedValue = 123\n// è§¦å‘å›è°ƒ\n````\n\n#### **Option: immediate**\n\nåœ¨é€‰é¡¹ä¸­ä¼ å…¥immediate: trueå°†ç«‹å³ç”¨è¡¨è¾¾å¼çš„å½“å‰å€¼è§¦å‘å›è°ƒ\n\n````js\nvm.$watch('a', callback, {\n  immediate: true\n})\n// â€œcallbackâ€è¢«ç«‹å³è§¦å‘ï¼Œå½“å‰å€¼ä¸ºâ€œaâ€\n````\n\n>  è¯·æ³¨æ„ï¼Œä½¿ç”¨`immediate`é€‰é¡¹ï¼Œæ‚¨å°†æ— æ³•åœ¨ç¬¬ä¸€ä¸ªå›è°ƒè°ƒç”¨ä¸­å–æ¶ˆç›‘è§†ç»™å®šçš„å±æ€§ã€‚\n>\n> ````js\n> //è¿™ä¸ªä¾‹å­æ˜¯é”™è¯¯çš„\n> const unwatch = vm.$watch(\n>   'value',\n>   function() {\n>     doSomething()\n>     unwatch()\n>   },\n>   { immediate: true }\n> )\n> ````\n>\n> å¦‚æœä½ ä»ç„¶æƒ³åœ¨å›è°ƒä¸­è°ƒç”¨ä¸€ä¸ªunwatchå‡½æ•°ï¼Œä½ åº”è¯¥é¦–å…ˆæ£€æŸ¥å®ƒçš„å¯ç”¨æ€§\n>\n> `````js\n> const unwatch = vm.$watch(\n>   'value',\n>   function() {\n>     doSomething()\n>     if (unwatch) {\n>       unwatch()\n>     }\n>   },\n>   { immediate: true }\n> )\n> `````\n\n### $emit ã€ä¸€è‡´ã€‘\n\n### $forceUpdateã€ä¸€è‡´ã€‘\n\n### $nextTickã€ä¸€è‡´ã€‘\n\n## å®ä¾‹ property\n\n### vm.$data ã€ä¸€è‡´ã€‘\n\n### vm.$props ã€ä¸€è‡´ã€‘\n\n### vm.$el ã€ä¸€è‡´ã€‘\n\n### vm.$options ã€ä¸€è‡´ã€‘\n\n### vm.$parent ã€ä¸€è‡´ã€‘\n\n### vm.$rootã€ä¸€è‡´ã€‘\n\n### vm.$slots ã€ä¸€è‡´ã€‘\n\n### vm.$refs ã€ä¸€è‡´ã€‘\n\n### vm.$attrs ã€ä¸€è‡´ã€‘\n\n![](https://files.catbox.moe/qw8krc.png)![](https://files.catbox.moe/1blngf.png)\n\n### åºŸå¼ƒ:\n\n#### ~~vm.$children~~\n\n#### ~~vm.$slots~~\n\n#### ~~vm.$scopedSlots~~\n\n#### ~~vm.$isServer~~\n\n#### ~~vm.$listeners~~\n\n## é€‰é¡¹ / ç»„åˆ\n\n#### mixins ã€ä¸€è‡´ã€‘\n\n#### extendsã€ä¸€è‡´ã€‘\n\n#### provide / injectã€ä¸€è‡´ã€‘\n\n#### ~~parent~~ã€åºŸå¼ƒã€‘\n\n#### setupã€æ–°å¢ã€‘\n\nè¯¦æƒ…è§ä¸Š\n\n## é€‰é¡¹ / èµ„æº\n\n### directivesã€ä¸€è‡´ã€‘\n\n### componentsã€ä¸€è‡´ã€‘\n\n### ~~filters~~ã€åºŸå¼ƒã€‘\n\n## é€‰é¡¹ / æ•°æ®\n\n### dataã€ä¸€è‡´ã€‘\n\n### propsã€ä¸€è‡´ã€‘\n\n### computedã€ä¸€è‡´ã€‘\n\n### methodsã€ä¸€è‡´ã€‘\n\n### watchã€ä¸€è‡´ã€‘\n\n### emitsã€æ–°å¢ã€‘\n\n#### **è¯¦æƒ…**\n\nå¯ä»¥ä»ç»„ä»¶å‘å‡ºçš„è‡ªå®šä¹‰äº‹ä»¶çš„list/hashã€‚ å®ƒå…·æœ‰åŸºäºæ•°ç»„çš„ç®€å•è¯­æ³•å’Œå…è®¸é…ç½®äº‹ä»¶éªŒè¯çš„æ›¿ä»£çš„åŸºäºå¯¹è±¡çš„è¯­æ³•ã€‚\n\nåœ¨åŸºäºå¯¹è±¡çš„è¯­æ³•ä¸­ï¼Œæ¯ä¸ªå±æ€§çš„å€¼å¯ä»¥ä¸ºnullæˆ–éªŒè¯å‡½æ•°ã€‚ éªŒè¯å‡½æ•°å°†æ¥æ”¶ä¼ é€’ç»™$emitè°ƒç”¨çš„å…¶ä»–å‚æ•°ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœè°ƒç”¨this.$emit('foo',1)ï¼Œåˆ™fooçš„ç›¸åº”éªŒè¯å™¨å°†æ¥æ”¶å‚æ•°1ã€‚éªŒè¯å™¨å‡½æ•°åº”è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œä»¥æŒ‡ç¤ºäº‹ä»¶å‚æ•°æ˜¯å¦æœ‰æ•ˆã€‚\n\n````js\nconst app = Vue.createApp({})\n\n// æ•°ç»„è¯­æ³•\napp.component('todo-item', {\n  emits: ['check'],\n  created() {\n    this.$emit('check')\n  }\n})\n\n// å¯¹è±¡è¯­æ³•\napp.component('reply-form', {\n  emits: {\n    // æ— æ•ˆ\n    click: null,\n    // æœ‰æ•ˆ\n    submit: payload => {\n      if (payload.email && payload.password) {\n        return true\n      } else {\n        console.warn(`Invalid submit event payload!`)\n        return false\n      }\n    }\n  }\n})\n````\n\n> æç¤º åœ¨emité€‰é¡¹ä¸­åˆ—å‡ºçš„äº‹ä»¶å°†ä¸ä¼šè¢«ç»„ä»¶çš„æ ¹å…ƒç´ ç»§æ‰¿ã€<template>æ¨¡æ¿ã€‘ï¼Œè€Œä¸”ä¹Ÿå°†è¢«æ’é™¤åœ¨$attrså±æ€§ä¹‹å¤–ã€‚\n\n## é€‰é¡¹ / DOM\n\n### templateã€ä¸€è‡´ã€‘\n\n### renderã€ä¸€è‡´ã€‘\n\n### ~~el~~ã€åºŸå¼ƒã€‘\n\n### ~~renderError~~ã€åºŸå¼ƒã€‘\n\n## ç‰¹æ®Š attribute\n\n### keyã€ä¸€è‡´ã€‘\n\n### refã€ä¸€è‡´ã€‘\n\n### isã€ä¸€è‡´ã€‘\n\n### ~~slot~~ã€åºŸå¼ƒã€‘\n\n### ~~slot-scope~~ã€åºŸå¼ƒã€‘\n\n### ~~scope~~ã€åºŸå¼ƒã€‘\n\n## é€‰é¡¹ / ç”Ÿå‘½å‘¨æœŸé’©å­\n\n### beforeCreateã€ä¸€è‡´ã€‘\n\n### createdã€ä¸€è‡´ã€‘\n\n### beforeMountã€ä¸€è‡´ã€‘\n\n### mountedã€ä¸€è‡´ã€‘\n\n### beforeUpdateã€ä¸€è‡´ã€‘\n\n### updatedã€ä¸€è‡´ã€‘\n\n### activatedã€ä¸€è‡´ã€‘\n\n### deactivatedã€ä¸€è‡´ã€‘\n\n### ~~beforeDestroy~~=>beforeUnmount\n\n### ~~destroyed~~=>unmounted\n\n### errorCapturedã€ä¸€è‡´ã€‘\n\n### renderTrackedã€æ–°å¢ã€‘\n\nåœ¨è·Ÿè¸ªè™šæ‹ŸDOMé‡æ–°æ¸²æŸ“æ—¶è°ƒç”¨ã€‚é’©å­æ¥æ”¶è°ƒè¯•å™¨äº‹ä»¶ä½œä¸ºå‚æ•°ã€‚æ­¤äº‹ä»¶å‘Šè¯‰æ‚¨è·Ÿè¸ªç»„ä»¶å’Œè¯¥æ“ä½œçš„ç›®æ ‡å¯¹è±¡å’Œé”®çš„æ“ä½œ\n\n````js\nconst app = Vue.createApp({\n  data() {\n    return {\n      cart: 0\n    }\n  },\n  renderTracked({ key, target, type }) {\n    console.log({ key, target, type })\n    /* è¿™å°†åœ¨ç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶è¢«è®°å½•\n    {\n      key: \"cart\",\n      target: {\n        cart: 0\n      },\n      type: \"get\"\n    }\n    */\n  },\n  methods: {\n    addToCart() {\n      this.cart += 1\n    }\n  }\n})\n\napp.mount('#app')\n````\n\n\n\n### renderTriggeredã€æ–°å¢ã€‘\n\nå½“è™šæ‹ŸDOMé‡æ–°æ¸²æŸ“è¢«è§¦å‘æ—¶è°ƒç”¨ã€‚ä¸renderTrackedç±»ä¼¼ï¼Œæ¥æ”¶è°ƒè¯•å™¨äº‹ä»¶ä½œä¸ºå‚æ•°ã€‚æ­¤äº‹ä»¶å‘Šè¯‰æ‚¨è§¦å‘é‡æ–°æ¸²æŸ“çš„æ“ä½œä»¥åŠè¯¥æ“ä½œçš„ç›®æ ‡å¯¹è±¡å’Œé”®ã€‚\n\n````js\nconst app = Vue.createApp({\n  data() {\n    return {\n      cart: 0\n    }\n  },\n  renderTriggered({ key, target, type }) {\n    console.log({ key, target, type })\n  },\n  methods: {\n    addToCart() {\n      this.cart += 1\n      /* This will cause renderTriggered call\n        {\n          key: \"cart\",\n          target: {\n            cart: 1\n          },\n          type: \"set\"\n        }\n      */\n    }\n  }\n})\n\napp.mount('#app')\n````\n\n## é€‰é¡¹ / å…¶å®ƒ\n\n### nameã€ä¸€è‡´ã€‘\n\n### inheritAttrsã€ä¸€è‡´ã€‘\n\n### delimitersã€ä¸€è‡´ã€‘\n\n### ~~comments~~ã€åºŸå¼ƒã€‘\n\n### ~~model~~ã€åºŸå¼ƒã€‘\n\n### ~~functional~~ã€åºŸå¼ƒã€‘\n\n![](https://files.catbox.moe/1jn619.png)\n\nå¯ä»¥çœ‹å‰é¢Vue2.xæ—¶å€™å†™çš„\n\n\n\n## Vue Router\n\n### ä¸vue-router@3.xç›¸æ¯”ï¼Œç ´åå˜åŒ–\n\n+ mode: 'history' option å·²è¢«ä¸€ä¸ªæ›´çµæ´»çš„ history çš„é€‰é¡¹æ‰€æ›¿ä»£\n\n  ````js\n  // vue-router@3.x\n  const router = new VueRouter({\n    mode: 'history',\n    routes:[],\n    ...\n  })\n  \n  // vue-next-router\n  import { createRouter, createWebHistory } from 'vue-next-router'\n  // è¿˜æœ‰createWebHashHistoryå’ŒcreateMemoryHistory\n  const router = createRouter({\n    history: createWebHistory(),\n    routes: [],\n    ...\n  })\n  ````\n\n+ baseé€‰é¡¹ç°åœ¨ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’ç»™createWebHistory(å’Œå…¶ä»–historiesæ¨¡å¼)\n\n  > åº”ç”¨çš„åŸºè·¯å¾„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ•´ä¸ªå•é¡µåº”ç”¨æœåŠ¡åœ¨ `/app/` ä¸‹ï¼Œç„¶å `base` å°±åº”è¯¥è®¾ä¸º `\"/app/\"`ã€é»˜è®¤å€¼: `\"/\"`ã€‘\n\n  ````js\n  //vue-router@3.x\n  const router = new VueRouter({\n    base: '/',\n  })\n  \n  // vue-next-router\n  import { createRouter, createWebHistory } from 'vue-next-router'\n  const router = createRouter({\n    history: createWebHistory('/'), \n  })\n  ````\n\n+ ç°åœ¨å¿…é¡»ä½¿ç”¨å¸¦æœ‰è‡ªå®šä¹‰æ­£åˆ™è¡¨è¾¾å¼çš„å‚æ•°å®šä¹‰æ•è·æ‰€æœ‰è·¯ç”±(`/*`)ï¼š`/:catchAll(.*)`\n\n  ````js\n  // vue-router@3.x\n  const router = new VueRouter({\n    mode: 'history',\n    routes: [\n      { path: '/user/:a*', component: User },\n    ],\n  })\n  \n  // vue-next-router\n  const router = createRouter({\n    history: createWebHistory(),\n    routes: [\n      { path: '/user/:a:catchAll(.*)', component: User },\n    ],\n  })\n  ````\n\n+ `router.match` ä¸ `router.resolve` åˆå¹¶åœ¨ä¸€èµ·ä¸º `router.resolve`ï¼Œä½†ç­¾åç•¥æœ‰ä¸åŒã€‚é€šè¿‡è‡ªåŠ¨å®Œæˆæ£€æŸ¥å…¶ç±»å‹ or [Router's `resolve` method](https://github.com/vuejs/vue-router-next/blob/master/src/router.ts)\n\n  ````js\n  // vue-router@3.x\n  function resolve(to: RawLocation, current?: Route, append?: boolean) {\n    //..............\n    return {\n      location,\n      route,\n      href,\n      normalizedTo: location,\n      resolved: route\n    }\n  }\n  \n  // vue-next-router\n   function resolve(\n      rawLocation: Readonly<RouteLocationRaw>,\n      currentLocation?: RouteLocationNormalizedLoaded\n    ): RouteLocation & { href: string } {\n  //..............\n  return assign(\n        {\n          fullPath,\n          // fullPathå®é™…ä¸Šæ˜¯ path + encodedQuery +hash\n          hash,\n          query:\n            // å¦‚æœç”¨æˆ·ä½¿ç”¨è‡ªå®šä¹‰çš„queryåº“ï¼Œæ¯”å¦‚qs, å¯èƒ½åµŒå¥—å¯¹è±¡, æ‰€ä»¥æˆ‘ä»¬ä¿æŒqueryä¸å˜, æ„å‘³ç€å®ƒå¯ä»¥åŒ…å«numbers åœ¨`$route.query`ï¼Œä½†æ˜¯åœ¨æ­¤æ—¶ï¼Œç”¨æˆ·å°†ä¸å¾—ä¸ä½¿ç”¨è‡ªå·±çš„ç±»å‹\n            // https://github.com/vuejs/vue-router-next/issues/328#issuecomment-649481567\n            stringifyQuery === originalStringifyQuery\n              ? normalizeQuery(rawLocation.query)\n              : (rawLocation.query as LocationQuery),\n        },\n        matchedRoute,\n        {\n          redirectedFrom: undefined,\n          href,\n        }\n      )\n   }\n  ````\n\n+ ç§»é™¤ `router.getMatchedComponents`ï¼Œå¯ä»¥ä» `router.currentRoute.value.matched` ä¸­è·å–\n\n  router.getMatchedComponents(å‡½æ•°ç­¾å)-->è¿”å›ç›®æ ‡ä½ç½®æˆ–æ˜¯å½“å‰è·¯ç”±åŒ¹é…çš„ç»„ä»¶æ•°ç»„ (æ˜¯æ•°ç»„çš„å®šä¹‰/æ„é€ ç±»ï¼Œä¸æ˜¯å®ä¾‹)ã€‚é€šå¸¸åœ¨æœåŠ¡ç«¯æ¸²æŸ“çš„æ•°æ®é¢„åŠ è½½æ—¶ä½¿ç”¨\n\n  `````js\n  router.currentRoute.value.matched.flatMap(record =>\n    Object.values(record.components)\n  )\n  `````\n\n  > appendå‚æ•°å·²è¢«åˆ é™¤ã€‚æ‚¨å¯ä»¥æ‰‹åŠ¨å°†è¯¥å€¼è¿æ¥åˆ°ç°æœ‰çš„pathã€‚\n\n+ `parent`ä»Route locationsä¸­è¢«ç§»é™¤ï¼ˆ`this.$route`ï¼‰\n\n## Vueçš„å˜åŒ–\n\n### é‡‡ç”¨viteä½œä¸ºVueçš„è„šæ‰‹æ¶å¼€å‘æ„å»ºå·¥å…·\n\n> Viteï¼Œä¸€ä¸ªåŸºäºæµè§ˆå™¨åŸç”Ÿ ES imports çš„å¼€å‘æœåŠ¡å™¨ã€‚åˆ©ç”¨æµè§ˆå™¨å»è§£æ importsï¼Œåœ¨æœåŠ¡å™¨ç«¯æŒ‰éœ€ç¼–è¯‘è¿”å›ï¼Œå®Œå…¨è·³è¿‡äº†æ‰“åŒ…è¿™ä¸ªæ¦‚å¿µï¼ŒæœåŠ¡å™¨éšèµ·éšç”¨ã€‚åŒæ—¶ä¸ä»…æœ‰ Vue æ–‡ä»¶æ”¯æŒï¼Œè¿˜æå®šäº†çƒ­æ›´æ–°ï¼Œè€Œä¸”çƒ­æ›´æ–°çš„é€Ÿåº¦ä¸ä¼šéšç€æ¨¡å—å¢å¤šè€Œå˜æ…¢ã€‚é’ˆå¯¹ç”Ÿäº§ç¯å¢ƒåˆ™å¯ä»¥æŠŠåŒä¸€ä»½ä»£ç ç”¨ rollup æ‰“ã€‚è™½ç„¶ç°åœ¨è¿˜æ¯”è¾ƒç²—ç³™ï¼Œä½†è¿™ä¸ªæ–¹å‘æˆ‘è§‰å¾—æ˜¯æœ‰æ½œåŠ›çš„ï¼Œåšå¾—å¥½å¯ä»¥å½»åº•è§£å†³æ”¹ä¸€è¡Œä»£ç ç­‰åŠå¤©çƒ­æ›´æ–°çš„é—®é¢˜", "user_name": "ä¸‰è—ä¼šæ³•æœ¯", "description": "è€å­æ˜¯æ ç²¾ï¼Œåˆ«æ æˆ‘ï¼Œä¸ç„¶æ æ­»ä½ ä¸«çš„", "got_view_count": 9522, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "JavaScript", "concern_user_count": 343215, "user_id": "3526889030558407", "title": "ã€Œé¢è¯•å¿…ä¼šã€ä¸­é«˜çº§å‰ç«¯å¿…ä¼šçš„æ‰‹å†™é¢è¯•é¢˜(ä¸€)", "mark_content": "> æœ¬æ–‡é¦–å‘äºæˆ‘çš„ä¸ªäººç½‘ç«™ï¼š[litgod.net](https://litgod.net)\n\n## å‰è¨€\nåœ¨é¢è¯•ä¸­ï¼Œå¸¸å¸¸ä¼šé—®åˆ°ä¸€äº›â€œæ‰‹å†™XXXâ€çš„é¢è¯•é¢˜ï¼Œå¦‚æœæˆ‘ä»¬åªæ˜¯åœç•™åœ¨ç†Ÿç»ƒä½¿ç”¨è¿™äº› APIï¼Œé—®åˆ°è¿™ç§é—®é¢˜æƒ³å¿…æ€»æ˜¯æŸæ‰‹æ— ç­–çš„ã€‚å…¶å®æƒ³è¦æ‰‹å†™ API çš„å®ç°ä¹Ÿå¹¶ä¸éš¾ï¼Œæ›´å¤šçš„æ˜¯éœ€è¦æˆ‘ä»¬è®­ç»ƒè‡ªå·±**é€šè¿‡ä½¿ç”¨æ–¹å¼æ¥æ¨å€’å®ç°**çš„èƒ½åŠ›ï¼Œåƒä¸‡ä¸è¦æ­»è®°ç¡¬èƒŒã€‚æœ€è¿‘æˆ‘ä¹Ÿåœ¨å¼ºåŒ–è‡ªå·±æ‰‹å†™ API çš„èƒ½åŠ›ï¼Œå¹¶æ±‡æ€»äº†é¢è¯•ä¸­é«˜é¢‘çš„æ‰‹å†™ API é¢è¯•é¢˜ï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰ä¸€ä¸¢ä¸¢å¸®åŠ©ï½\n\n### ä¸€ã€å®ç°call/apply\n\n* ç‰¹ç‚¹ï¼š\n\n1. å¯ä»¥æ”¹å˜å½“å‰å‡½æ•° this çš„æŒ‡å‘\n2. è®©å½“å‰å‡½æ•°æ‰§è¡Œ\n\n* ç”¨æ³•ï¼š\n\n```js\nfunction f1() {\n  console.log(1);\n}\n\nfunction f2() {\n  console.log(2);\n}\n\n// è®© f1 çš„ this æŒ‡å‘ f2ï¼Œå¹¶ä¸”è®© f1 æ‰§è¡Œ\nf1.call(f2);  // 1\n\n// å¦‚æœå¤šä¸ª callï¼Œä¼šè®© call æ–¹æ³•æ‰§è¡Œï¼Œå¹¶æŠŠ call ä¸­çš„ this æŒ‡å‘æ”¹å˜æˆ fn2\nf1.call.call.call(f2);\n```\n\n* å®ç°ï¼š\n\n```js\nFunction.prototype.call = function (context) {\n  // å¦‚æœ context å­˜åœ¨ï¼Œä½¿ç”¨ contextï¼Œå¦‚æœ context ä¸å­˜åœ¨ï¼Œä½¿ç”¨ windowï¼›å¦‚æœ context æ˜¯æ™®é€šç±»å‹ï¼Œè½¬æˆå¯¹è±¡ã€‚\n  context = context ? Object(context) : window;\n  context.fn = this;\n  let args = [];\n  for(let i = 1; i < arguments.length; i++) {\n    args.push('arguments['+i+']');\n  }\n\n  let r = eval('context.fn('+args+')');\n  delete context.fn;\n  return r;\n}\n\nFunction.prototype.apply = function (context, args) {\n  // å¦‚æœ context å­˜åœ¨ï¼Œä½¿ç”¨ contextï¼Œå¦‚æœ context ä¸å­˜åœ¨ï¼Œä½¿ç”¨ windowï¼›å¦‚æœ context æ˜¯æ™®é€šç±»å‹ï¼Œè½¬æˆå¯¹è±¡ã€‚\n  context = context ? Object(context) : window;\n  context.fn = this;\n\n  if(!args){\n    return context.fn();\n  }\n\n  let r = eval('context.fn('+args+')');\n  delete context.fn;\n  return r;\n}\n```\n### äºŒã€å®ç°bindæ–¹æ³•\n\n* ç‰¹ç‚¹ï¼š\n\n1. bind æ–¹æ³•å¯ä»¥ç»‘å®š this æŒ‡å‘\n2. bind æ–¹æ³•è¿”å›ä¸€ä¸ªç»‘å®šåçš„å‡½æ•°\n3. å¦‚æœç»‘å®šçš„å‡½æ•°è¢« newï¼Œå½“å‰å‡½æ•°çš„ this å°±æ˜¯å½“å‰çš„å®ä¾‹\n4. new å‡ºæ¥çš„å®ä¾‹è¦ä¿è¯åŸå‡½æ•°çš„åŸå‹å¯¹è±¡ä¸Šçš„å±æ€§ä¸èƒ½ä¸¢å¤±\n\n* ç”¨æ³•ï¼š\n\n```js\n// ç”¨æ³•ä¸€:\nlet person = {\n  name: \"Cherry\",\n}\n\nfunction fn(name, age) {\n  console.log(this.name+ 'å…»äº†ä¸€åª'+ name + 'ä»Šå¹´' + age + 'äº†'); // Cherryå…»äº†ä¸€åªçŒ«ä»Šå¹´2äº†\n}\n\nlet bindFn = fn.bind(person, 'çŒ«');\n\nbindFn(2);\n\n// ç”¨æ³•äºŒï¼š\nlet person = {\n  name: \"Cherry\",\n}\n\nfunction fn(name, age) {\n  this.say = 'è¯´è¯'\n  console.log(this);  // fnÂ {say: \"è¯´è¯\"}\n}\n\nlet bindFn = fn.bind(person, 'çŒ«');\nlet instance = new bindFn(9);\n\n// ç”¨æ³•ä¸‰ï¼š\nlet person = {\n  name: \"Cherry\",\n}\n\nfunction fn(name, age) {\n  this.say = 'è¯´è¯'\n}\n\nfn.prototype.flag = 'å“ºä¹³ç±»';\nlet bindFn = fn.bind(person, 'çŒ«');\nlet instance = new bindFn(9);\nconsole.log(instance.flag);\n```\n\n* å®ç°ï¼š\n\n```js\nFuncition.protoType.bind = function (context) {\n  // thisè¡¨ç¤ºè°ƒç”¨bindçš„å‡½æ•°\n  let that = this;\n  let bindArgs = Array.prototype.slice.call(arguments, 1);  //[\"çŒ«\"]\n  function Fn() {}\n  function fBound() {\n    let args = Array.prototype.slice.call(arguments);  //[9] \n    //this instanceof fBoundä¸ºtrueè¡¨ç¤ºæ„é€ å‡½æ•°çš„æƒ…å†µã€‚å¦‚new bindFn(9);\n    return that.apply(this instanceof fBound ? this : context, bindArgs.concat(args));\n  }\n\n  fn.prototype = this.prototype;\n  fBound.prototype = new Fn();\n  return fBound;\n}\n```\n\n### ä¸‰ã€å®ç°newå…³é”®å­—\n\n* ç‰¹ç‚¹ï¼š \n\n1. åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡çš„__proto__è¦æŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡\n2. æ‰§è¡Œæ„é€ å‡½æ•°\n3. è¿”å›å€¼ä¸ºobjectç±»å‹åˆ™ä½œä¸ºnewæ–¹æ³•çš„è¿”å›å€¼è¿”å›ï¼Œå¦åˆ™è¿”å›ä¸Šè¿°å…¨æ–°å¯¹è±¡\n\n* ç”¨æ³•ï¼š\n\n```js\nfunction Animal(type) {\n  this.type = type;   // å®ä¾‹ä¸Šçš„å±æ€§\n  // å¦‚æœå½“å‰æ„é€ å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ªå¼•ç”¨ç±»å‹ï¼Œéœ€è¦ç›´æ¥è¿”å›è¿™ä¸ªå¯¹è±¡\n  return {name: 'dog'}\n}\n\nAnimal.prototype.say = function () {\n  console.log('say');\n}\n\nlet animal = new Animal('å“ºä¹³ç±»');\n\nconsole.log(animal.type); // å“ºä¹³ç±»\nanimal.say(); // say\n\n```\n\n* å®ç°ï¼š\n\n```js\nfunction mockNew() {\n  // Constructor => animalï¼Œå‰©ä½™çš„ arguments å°±æ˜¯å…¶ä»–çš„å‚æ•°\n  let Constructor = [].shift.call(arguments);\n  let obj = {};  //è¿”å›çš„ç»“æœ\n  obj.__proto__ = Constructor.prototype;\n  Constructor.apply(obj, arguments);\n  return r instanceof Object ? r : obj;\n}  \n```\n\n### å››ã€ç”¨ES5å®ç°æ•°ç»„çš„mapæ–¹æ³•\n\n* ç‰¹ç‚¹ï¼š\n\n1. å¾ªç¯éå†æ•°ç»„ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°æ•°ç»„\n2. å›è°ƒå‡½æ•°ä¸€å…±æ¥æ”¶3ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯ï¼šã€Œæ­£åœ¨å¤„ç†çš„å½“å‰å…ƒç´ çš„å€¼ã€æ­£åœ¨å¤„ç†çš„å½“å‰å…ƒç´ çš„ç´¢å¼•ã€æ­£åœ¨éå†çš„é›†åˆå¯¹è±¡ã€\n\n* ç”¨æ³•ï¼š\n```js\nlet array = [1, 2, 3].map((item) => {\n  return item * 2;\n})\n\nconsole.log(array);  // [2, 4, 6]\n```\n\n* å®ç°ï¼š\n\n```js\nArray.prototype.map = function(fn) {\n  let arr = [];\n  for(let i = 0; i < this.length; i++) {\n    arr.push(fn(this[i], i, this));\n  }\n  return arr;\n}\n```\n\n### äº”ã€ç”¨ES5å®ç°æ•°ç»„çš„filteræ–¹æ³•\n\n* ç‰¹ç‚¹ï¼š\n\n1. è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªç”±é€šè¿‡æµ‹è¯•çš„å…ƒç´ ç»„æˆçš„æ–°æ•°ç»„ï¼Œå¦‚æœæ²¡æœ‰é€šè¿‡æµ‹è¯•çš„å…ƒç´ ï¼Œåˆ™è¿”å›ä¸€ä¸ªç©ºæ•°ç»„\n2. å›è°ƒå‡½æ•°ä¸€å…±æ¥æ”¶3ä¸ªå‚æ•°ï¼ŒåŒ map æ–¹æ³•ä¸€æ ·ã€‚åˆ†åˆ«æ˜¯ï¼šã€Œæ­£åœ¨å¤„ç†çš„å½“å‰å…ƒç´ çš„å€¼ã€æ­£åœ¨å¤„ç†çš„å½“å‰å…ƒç´ çš„ç´¢å¼•ã€æ­£åœ¨éå†çš„é›†åˆå¯¹è±¡ã€\n\n* ç”¨æ³•ï¼š\n\n```js\nlet array = [1, 2, 3].filter((item) => {\n  return item > 2;\n})\n\nconsole.log(array); // [3]\n```\n\n* å®ç°ï¼š\n\n```js\nArray.prototype.filter = function(fn) {\n  let arr = [];\n  for(let i = 0; i < this.length; i++) {\n    fn(this[i]) && arr.push(fn(this[i], i, this));\n  }\n  return arr;\n}\n```\n\n### å…­ã€ç”¨ES5å®ç°æ•°ç»„çš„someæ–¹æ³•\n\n* ç‰¹ç‚¹ï¼š\n\n1. åœ¨æ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ ï¼Œå¦‚æœæ‰¾åˆ°ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„å…ƒç´ å°±è¿”å›trueï¼Œå¦‚æœæ‰€æœ‰å…ƒç´ éƒ½ä¸ç¬¦åˆæ¡ä»¶å°±è¿”å› falseï¼›\n2. å›è°ƒå‡½æ•°ä¸€å…±æ¥æ”¶3ä¸ªå‚æ•°ï¼ŒåŒ map æ–¹æ³•ä¸€æ ·ã€‚åˆ†åˆ«æ˜¯ï¼šã€Œæ­£åœ¨å¤„ç†çš„å½“å‰å…ƒç´ çš„å€¼ã€æ­£åœ¨å¤„ç†çš„å½“å‰å…ƒç´ çš„ç´¢å¼•ã€æ­£åœ¨éå†çš„é›†åˆå¯¹è±¡ã€ã€‚\n\n* ç”¨æ³•ï¼š\n\n```js\nlet flag = [1, 2, 3].some((item) => {\n  return item > 1;\n})\n\nconsole.log(flag); // true\n```\n\n* å®ç°ï¼š\n\n```js\nArray.prototype.some = function(fn) {\n  for(let i = 0; i < this.length; i++) {\n    if (fn(this[i])) {\n      return true;\n    }\n  }\n  return false;\n}\n```\n\n### ä¸ƒã€ç”¨ES5å®ç°æ•°ç»„çš„everyæ–¹æ³•\n\n* ç‰¹ç‚¹ï¼š\n\n1. æ£€æµ‹ä¸€ä¸ªæ•°ç»„ä¸­çš„å…ƒç´ æ˜¯å¦éƒ½èƒ½ç¬¦åˆæ¡ä»¶ï¼Œéƒ½ç¬¦åˆæ¡ä»¶è¿”å›trueï¼Œæœ‰ä¸€ä¸ªä¸ç¬¦åˆåˆ™è¿”å› false\n2. å¦‚æœæ”¶åˆ°ä¸€ä¸ªç©ºæ•°ç»„ï¼Œæ­¤æ–¹æ³•åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½ä¼šè¿”å› true\n3. å›è°ƒå‡½æ•°ä¸€å…±æ¥æ”¶3ä¸ªå‚æ•°ï¼ŒåŒ map æ–¹æ³•ä¸€æ ·ã€‚åˆ†åˆ«æ˜¯ï¼šã€Œæ­£åœ¨å¤„ç†çš„å½“å‰å…ƒç´ çš„å€¼ã€æ­£åœ¨å¤„ç†çš„å½“å‰å…ƒç´ çš„ç´¢å¼•ã€æ­£åœ¨éå†çš„é›†åˆå¯¹è±¡ã€\n\n* ç”¨æ³•ï¼š\n\n```js\nlet flag = [1, 2, 3].every((item) => {\n  return item > 1;\n})\n\nconsole.log(flag); // false\n```\n\n* å®ç°ï¼š\n\n```js\nArray.prototype.every = function(fn) {\n  for(let i = 0; i < this.length; i++) {\n    if(!fn(this[i])) {\n      return false\n    }\n  }\n  return true;\n}\n```\n\n### å…«ã€ç”¨ES5å®ç°æ•°ç»„çš„findæ–¹æ³•\n\n* ç‰¹ç‚¹ï¼š\n\n1. åœ¨æ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ ï¼Œå¦‚æœæ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„å…ƒç´ å°±è¿”å›è¿™ä¸ªå…ƒç´ ï¼Œå¦‚æœæ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„å…ƒç´ å°±è¿”å› undefinedï¼Œä¸”æ‰¾åˆ°åä¸ä¼šç»§ç»­æŸ¥æ‰¾\n2. å›è°ƒå‡½æ•°ä¸€å…±æ¥æ”¶3ä¸ªå‚æ•°ï¼ŒåŒ map æ–¹æ³•ä¸€æ ·ã€‚åˆ†åˆ«æ˜¯ï¼šã€Œæ­£åœ¨å¤„ç†çš„å½“å‰å…ƒç´ çš„å€¼ã€æ­£åœ¨å¤„ç†çš„å½“å‰å…ƒç´ çš„ç´¢å¼•ã€æ­£åœ¨éå†çš„é›†åˆå¯¹è±¡ã€\n\n* ç”¨æ³•ï¼š\n\n```js\nlet item = [1, 2, 3].find((item) => {\n  return item > 1;\n})\n\nconsole.log(item); // 2\n```\n\n* å®ç°ï¼š\n\n```js\nArray.prototype.find = function(fn) {\n  for(let i = 0; i < this.length; i++) {\n    if (fn(this[i])) return this[i];\n  }\n}\n```\n\n### ä¹ã€ç”¨ES5å®ç°æ•°ç»„çš„forEachæ–¹æ³•\n* ç‰¹ç‚¹ï¼š\n\n1. å¾ªç¯éå†æ•°ç»„ï¼Œè¯¥æ–¹æ³•æ²¡æœ‰è¿”å›å€¼\n2. å›è°ƒå‡½æ•°ä¸€å…±æ¥æ”¶3ä¸ªå‚æ•°ï¼ŒåŒ map æ–¹æ³•ä¸€æ ·ã€‚åˆ†åˆ«æ˜¯ï¼šã€Œæ­£åœ¨å¤„ç†çš„å½“å‰å…ƒç´ çš„å€¼ã€æ­£åœ¨å¤„ç†çš„å½“å‰å…ƒç´ çš„ç´¢å¼•ã€æ­£åœ¨éå†çš„é›†åˆå¯¹è±¡ã€\n\n* ç”¨æ³•ï¼š\n\n```js\n[1, 2, 3].forEach((item, index, array) => {\n  // 1 0 [1, 2, 3]\n  // 2 1 [1, 2, 3]\n  // 3 2 [1, 2, 3]\n  console.log(item, index, array)  \n})\n```\n\n* å®ç°ï¼š\n\n```js\nArray.prototype.forEach = function(fn) {\n  for(let i = 0; i < this.length; i++) {\n    fn(this[i], i, this);\n  }\n}\n```\n\n### åã€ç”¨ES5å®ç°æ•°ç»„çš„reduceæ–¹æ³•\n\n* ç‰¹ç‚¹ï¼š\n\n1. åˆå§‹å€¼ä¸ä¼ æ—¶çš„ç‰¹æ®Šå¤„ç†ï¼šä¼šé»˜è®¤ç”¨æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ \n2. å‡½æ•°çš„è¿”å›ç»“æœä¼šä½œä¸ºä¸‹ä¸€æ¬¡å¾ªç¯çš„ prev\n3. å›è°ƒå‡½æ•°ä¸€å…±æ¥æ”¶4ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯ã€Œä¸Šä¸€æ¬¡è°ƒç”¨å›è°ƒæ—¶è¿”å›çš„å€¼ã€æ­£åœ¨å¤„ç†çš„å…ƒç´ ã€æ­£åœ¨å¤„ç†çš„å…ƒç´ çš„ç´¢å¼•ï¼Œæ­£åœ¨éå†çš„é›†åˆå¯¹è±¡ã€\n\n* ç”¨æ³•ï¼š\n\n```js\nlet total = [1, 2, 3].reduce((prev, next, currentIndex, array) => {\n  return prev + next;\n}, 0)\n\nconsole.log(total); // 6\n```\n\n* å®ç°ï¼š\n\n```js\nArray.prototype.reduce = function(fn, prev) {\n  for(let i = 0; i < this.length; i++) {\n    // åˆå§‹å€¼ä¸ä¼ æ—¶çš„å¤„ç†\n    if (typeof prev === 'undefined') {\n      // æ˜ç¡®å›è°ƒå‡½æ•°çš„å‚æ•°éƒ½æœ‰å“ªäº›\n      prev = fn(this[i], this[i+1], i+1, this);\n      ++i;\n    } else {\n      prev = fn(prev, this[i], i, this)\n    }\n  }\n  // å‡½æ•°çš„è¿”å›ç»“æœä¼šä½œä¸ºä¸‹ä¸€æ¬¡å¾ªç¯çš„ prev\n  return prev;\n}\n```\n\n### åä¸€ã€å®ç°instanceofæ–¹æ³•\n\n* ç‰¹ç‚¹ï¼š\n\næ²¿ç€åŸå‹é“¾çš„å‘ä¸ŠæŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°åŸå‹çš„æœ€é¡¶ç«¯ï¼Œä¹Ÿå°±æ˜¯`Object.prototype`ã€‚æŸ¥æ‰¾æ„é€ å‡½æ•°çš„ prototype å±æ€§æ˜¯å¦å‡ºç°åœ¨æŸä¸ªå®ä¾‹å¯¹è±¡çš„åŸå‹é“¾ä¸Šï¼Œå¦‚æœæ‰¾åˆ°äº†è¿”å› trueï¼Œæ²¡æ‰¾åˆ°è¿”å› falseã€‚\n\n* ç”¨æ³•ï¼š\n\n```js\nconsole.log([] instanceof Array); // true\nconsole.log([] instanceof Object); // true\n\n// ç›¸å½“äºï¼š\nconsole.log([].__proto__ === Array.prototype); // true\nconsole.log([].__proto__.__proto__ === Object.prototype); // true\n```\n\n* å®ç°ï¼š\n\n```js\nfunction myInstanceof(left, right) {\n  left = left.__proto__;\n  while(true) {\n    if (left === null) {\n      return false;\n    }\n    if (left === right.prototype) {\n      return true;\n    }\n    left = left.__proto__;\n  }\n}\n\nclass A{};\n\nconst a = new A();\nconsole.log(myInstanceof(a, A)); // true\nconsole.log(myInstanceof(a, Object)); // true \nconsole.log(myInstanceof(a, Array)); // false\n```\n\n### åäºŒã€å®ç°Object.createæ–¹æ³•(ç»å¸¸è€ƒ)\n* ç‰¹ç‚¹ï¼š\n\nåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œä½¿ç”¨ç°æœ‰çš„å¯¹è±¡æ¥æä¾›æ–°åˆ›å»ºçš„å¯¹è±¡çš„__proto__\n\n* ç”¨æ³•ï¼š\n\n```js\nlet demo = {\n    c : '123'\n}\nlet cc = Object.create(demo)\nconsole.log(cc);\n```\n\n* å®ç°ï¼š\n\n```js\nfunction create(proto) {\n    function Fn() {};\n    // å°†Fnçš„åŸå‹æŒ‡å‘ä¼ å…¥çš„ proto\n    Fn.prototype = proto;\n    Fn.prototype.constructor = Fn;\n    return new Fn();\n}\n```\n\n### åä¸‰ã€å®ç°ä¸€ä¸ªé€šç”¨çš„æŸ¯é‡ŒåŒ–å‡½æ•°\n\n* ç‰¹ç‚¹ï¼š\næŸ¯é‡ŒåŒ–å°±æ˜¯å°†ä¸€ä¸ªå‡½æ•°çš„åŠŸèƒ½ç»†åŒ–ï¼ŒæŠŠæ¥å—ã€Œå¤šä¸ªå‚æ•°ã€çš„å‡½æ•°å˜æ¢æˆæ¥å—ä¸€ä¸ªã€Œå•ä¸€å‚æ•°ã€çš„å‡½æ•°ï¼Œå¹¶ä¸”è¿”å›æ¥å—ã€Œä½™ä¸‹å‚æ•°ã€è¿”å›ç»“æœçš„ä¸€ç§åº”ç”¨ã€‚\n\n1. åˆ¤æ–­ä¼ é€’çš„å‚æ•°æ˜¯å¦è¾¾åˆ°æ‰§è¡Œå‡½æ•°çš„fnä¸ªæ•°\n2. æ²¡æœ‰è¾¾åˆ°çš„è¯ï¼Œç»§ç»­è¿”å›æ–°çš„å‡½æ•°ï¼Œå°†fnå‡½æ•°ç»§ç»­è¿”å›å¹¶å°†å‰©ä½™å‚æ•°ç´¯åŠ \n3. è¾¾åˆ°fnå‚æ•°ä¸ªæ•°æ—¶ï¼Œå°†ç´¯åŠ åçš„å‚æ•°ä¼ ç»™fnæ‰§è¡Œ\n\n* ç”¨æ³•ï¼š\n\n```js\nfunction sum(a, b, c, d, e) {\n  return a+b+c+d+e;\n}\n\nlet a = curring(sum)(1,2)(3,4)(5);  // 15\n```\n\n* å®ç°ï¼š\n\n```js\nconst curring = (fn, arr = []) => {\n  let len = fn.length;\n  return function (...args) {\n    arr = [...arr, ...args];\n    if (arr.length < len) {\n      return curring(fn, arr);\n    } else {\n      return fn(...arr);\n    }\n  };\n};\n```\n\n### åå››ã€å®ç°ä¸€ä¸ªåæŸ¯é‡ŒåŒ–å‡½æ•° \n\n* ç‰¹ç‚¹ï¼š\nä½¿ç”¨`call`ã€`apply`å¯ä»¥è®©éæ•°ç»„å€Ÿç”¨ä¸€äº›å…¶ä»–ç±»å‹çš„å‡½æ•°ï¼Œæ¯”å¦‚ï¼Œ`Array.prototype.push.call`, `Array.prototype.slice.call`ï¼Œ `uncrrying`æŠŠè¿™äº›æ–¹æ³•æ³›åŒ–å‡ºæ¥ï¼Œä¸åœ¨åªå•å•çš„ç”¨äºæ•°ç»„ï¼Œæ›´å¥½çš„è¯­ä¹‰åŒ–ã€‚\n\n* ç”¨æ³•ï¼š\n\n```js\n// åˆ©ç”¨åæŸ¯é‡ŒåŒ–åˆ›å»ºæ£€æµ‹æ•°æ®ç±»å‹çš„å‡½æ•°\nlet checkType = uncurring(Object.prototype.toString);\n\ncheckType(1); // [object Number]\ncheckType(\"hello\"); // [object String]\ncheckType(true); // [object Boolean]\n```\n\n* å®ç°ï¼š\n\n```js\nFunction.prototype.uncurring = function () {\n  var self = this;\n  return function () {\n    return Function.prototype.call.apply(self, arguments);\n  }\n}\n```\n\n### åäº”ã€å®ç°ä¸€ä¸ªç®€å•çš„èŠ‚æµå‡½æ•°(throttle)\n\n* ç‰¹ç‚¹ï¼š\n\nè§„å®šåœ¨ä¸€ä¸ªå•ä½æ—¶é—´å†…ï¼Œåªèƒ½è§¦å‘ä¸€æ¬¡å‡½æ•°ã€‚å¦‚æœè¿™ä¸ªå•ä½æ—¶é—´å†…è§¦å‘å¤šæ¬¡å‡½æ•°ï¼Œåªæœ‰ä¸€æ¬¡ç”Ÿæ•ˆã€‚\n\nèŠ‚æµé‡åœ¨åŠ é”`flag = false`\n\n* åº”ç”¨åœºæ™¯ï¼š\n\n  * scrollæ»šåŠ¨äº‹ä»¶ï¼Œæ¯éš”ç‰¹å®šæè¿°æ‰§è¡Œå›è°ƒå‡½æ•°\n  * inputè¾“å…¥æ¡†ï¼Œæ¯ä¸ªç‰¹å®šæ—¶é—´å‘é€è¯·æ±‚æˆ–æ˜¯å±•å¼€ä¸‹æ‹‰åˆ—è¡¨ï¼Œï¼ˆé˜²æŠ–ä¹Ÿå¯ä»¥ï¼‰\n\n* ç”¨æ³•ï¼š\n\n```js\nconst throttleFn = throttle(fn, 300);\n```\n\n* å®ç°ï¼š\n\n```js\nconst throttle = (fn, delay = 500) => {\n  let flag = true;\n  return (...args) => {\n    if (!flag) return;\n    flag = false;\n    setTimeout(() => {\n      fn.apply(this, args);\n      flag = true;\n    }, delay);\n  };\n};\n```\n\n### åå…­ã€å®ç°ä¸€ä¸ªç®€å•çš„é˜²æŠ–å‡½æ•°(debounce)\n\n* ç‰¹ç‚¹ï¼š\n\nåœ¨äº‹ä»¶è¢«è§¦å‘nç§’åå†æ‰§è¡Œå›è°ƒï¼Œå¦‚æœåœ¨è¿™nç§’å†…åˆè¢«è§¦å‘ï¼Œåˆ™é‡æ–°è®¡æ—¶\n\né˜²æŠ–é‡åœ¨æ¸…é›¶`clearTimeout(timer)`\n\n* åº”ç”¨åœºæ™¯ï¼š\n\n  * æµè§ˆå™¨çª—å£å¤§å°resizeé¿å…æ¬¡æ•°è¿‡äºé¢‘ç¹\n  * ç™»å½•ï¼Œå‘çŸ­ä¿¡ç­‰æŒ‰é’®é¿å…å‘é€å¤šæ¬¡è¯·æ±‚\n  * æ–‡æœ¬ç¼–è¾‘å™¨å®æ—¶ä¿å­˜\n\n* ç”¨æ³•ï¼š\n\n```js\nconst debounceFn = debounce(fn, 300);\n```\n\n* å®ç°ï¼š\n\n```js\nconst debounce = (fn, delay) => {\n  let timer = null;\n  return (...args) => {\n    clearTimeout(timer);\n    timer = setTimeout(() => {\n      fn.apply(this, args);\n    }, delay);\n  };\n};\n```\n\n`lodash`ã€`underscore`ç­‰åº“ä¸­çš„èŠ‚æµé˜²æŠ–åŠŸèƒ½è¿˜æä¾›äº†æ›´å¤šçš„é…ç½®å‚æ•°ï¼Œè¿™é‡Œæˆ‘ä»¬åªæ˜¯å®ç°äº†æœ€åŸºæœ¬çš„èŠ‚æµé˜²æŠ–ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥çœ‹çœ‹`lodash`ã€`underscore`çš„æºç ã€‚\n\n### åä¸ƒã€å®ç°ä¸€ä¸ª Compose (ç»„åˆ)\n\n* ç‰¹ç‚¹ï¼š\n\nå°†éœ€è¦åµŒå¥—æ‰§è¡Œçš„å‡½æ•°å¹³é“ºï¼ŒåµŒå¥—æ‰§è¡Œå°±æ˜¯ä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼å°†ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„å‚æ•°ã€‚è¯¥å‡½æ•°è°ƒç”¨çš„æ–¹å‘æ˜¯ä»å³è‡³å·¦çš„ï¼ˆå…ˆæ‰§è¡Œ sumï¼Œå†æ‰§è¡Œ toUpperï¼Œå†æ‰§è¡Œ addï¼‰\n\n* ç”¨æ³•ï¼š\n\n```js\nfunction sum(a, b) {\n  return a+b;\n}\n\nfunction toUpper(str) {\n  return str.toUpperCase();\n}\n\nfunction add(str) {\n  return '==='+str+'==='\n}\n\n// ä½¿ç”¨ compose ä¹‹å‰ï¼š\nconsole.log(add(toUpper(sum('cherry', '27')))); // ===CHERRY27===\n// ä½¿ç”¨ compose ä¹‹åï¼š\nconsole.log(compose(add, toUpper, sum)('cherry', '27')); // ===CHERRY27===\n```\n\n* å®ç°ï¼š\n\n```js\n// ä½¿ç”¨ ES5- reduceRight å®ç°\nfunction compose(...fns) {\n  return function (...args) {\n    let lastFn = fns.pop();\n    return fns.reduceRight((a, b) => {\n      return b(a);\n    }, lastFn(...args));\n  };\n}\n\n// ä½¿ç”¨ ES6 - reduceRight å®ç°\nconst compose = (...fns) => (...args) => {\n  let lastFn = fns.pop();\n  return fns.reduceRight((a, b) => b(a), lastFn(...args));\n};\n\n// ä½¿ç”¨ ES6 - reduce ä¸€è¡Œä»£ç å®ç°ï¼š\nconst compose = (...fns) => fns.reduce((a, b) => (...args) => a(b(...args)));\n```\n\n### åå…«ã€å®ç°ä¸€ä¸ª Pipe ï¼ˆç®¡é“ï¼‰\n\n* ç‰¹ç‚¹ï¼š\n\npipeå‡½æ•°è·Ÿcomposeå‡½æ•°çš„ä½œç”¨æ˜¯ä¸€æ ·çš„ï¼Œä¹Ÿæ˜¯å°†å‚æ•°å¹³é“ºï¼Œåªä¸è¿‡ä»–çš„é¡ºåºæ˜¯ä»å·¦å¾€å³ã€‚ï¼ˆå…ˆæ‰§è¡Œ splitStringï¼Œå†æ‰§è¡Œ countï¼‰\n\n* ç”¨æ³•ï¼š\n\n```js\nfunction splitString(str) {\n  return str.split(' ');\n}\n\nfunction count(array) {\n  return array.length;\n}\n\n// ä½¿ç”¨ pipe ä¹‹å‰ï¼š\nconsole.log(count(splitString('hello cherry'))); // 2\n// ä½¿ç”¨ pipe ä¹‹åï¼š\nconsole.log(pipe(splitString, count)('hello cherry')); // 2\n```\n\n* å®ç°ï¼š\n\n```js\nconst pipe = function(){\n  const args = [].slice.apply(arguments);\n  return function(x) {\n    return args.reduce((res, cb) => cb(res), x);\n  }\n}\n\n// ä½¿ç”¨ ES5- reduceRight å®ç°\nfunction pipe(...fns) {\n  return function (...args) {\n    let lastFn = fns.shift();\n    return fns.reduceRight((a, b) => {\n      return b(a);\n    }, lastFn(...args));\n  };\n}\n\n// ä½¿ç”¨ ES6 - reduceRight å®ç°\nconst pipe = (...fns) => (...args) => {\n  let lastFn = fns.shift();\n  return fns.reduceRight((a, b) => b(a), lastFn(...args));\n};\n\n// ä½¿ç”¨ ES6 - reduce ä¸€è¡Œä»£ç å®ç°ï¼šï¼ˆreduxæºç ï¼‰\nconst pipe = (...fns) => (...args) => fns.reduce((a, b) => b(a), ...args);\n```\n\n### åä¹ã€å®ç°ä¸€ä¸ªæ¨¡ç‰ˆå¼•æ“\n\n* ç‰¹ç‚¹ï¼šwithè¯­æ³• + å­—ç¬¦ä¸²æ‹¼æ¥ + new Functionæ¥å®ç°\n\n1. å…ˆå°†å­—ç¬¦ä¸²ä¸­çš„ `<%=%>`æ›¿æ¢æ‰ï¼Œæ‹¼å‡ºä¸€ä¸ªç»“æœçš„å­—ç¬¦ä¸²ï¼›\n2. å†é‡‡ç”¨`new Function`çš„æ–¹å¼æ‰§è¡Œè¯¥å­—ç¬¦ä¸²ï¼Œå¹¶ä¸”ä½¿ç”¨`with`è§£å†³ä½œç”¨åŸŸçš„é—®é¢˜ã€‚\n\n* ç”¨æ³•ï¼š\n\n```js\nconst ejs = require('ejs');\nconst path = require('path');\n\nejs.renderFile(path.resolve(__dirname, 'template.html'),{name: 'Cherry', age: 27, arr: [1, 2, 3]}, function(err, data) {\n  console.log(data);\n})\n\n```\n\n```html\n// ===== template.html =====\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Document</title>\n</head>\n<body>\n  <%=name%>  <%=age%>\n  <%arr.forEach(item =>{%>\n      <li><%=item%></li>\n  <%})%>\n</body>\n</html>\n```\n\n* å®ç°ï¼š\n\næˆ‘ä»¬ç”¨`{ {} }`æ›¿æ¢`<%=%>`æ ‡ç­¾æ¥æ¨¡æ‹Ÿå®ç°ä¸€ä¸ªæ¨¡ç‰ˆå¼•æ“ï¼Œå®ç°åŸç†æ˜¯ä¸€æ ·çš„ï¼Œé‡ç‚¹çœ‹å®ç°åŸç†å“ˆã€‚\n\n```html\n// ===== my-template.html =====\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Document</title>\n</head>\n<body>\n  {{name}}  {{age}}\n  {%arr.forEach(item => {%}\n      <li>{{item}}</li>\n  {%})%}\n</body>\n</html>\n```\n\n```js\nconst fs = require('fs');\nconst path = require('path');\n\nconst renderFile = (filePath, obj, cb) => {\n  fs.readFile(filePath, 'utf8', function(err, html) {\n    if(err) {\n      return cb(err, html);\n    }\n\n    html = html.replace(/\\{\\{([^}]+)\\}\\}/g, function() {\n      console.log(arguments[1], arguments[2]);\n      let key = arguments[1].trim();\n      return '${' + key + '}';\n    });\n\n    let head = `let str = '';\\r\\n with(obj){\\r\\n`;\n    head += 'str+=`';\n    html = html.replace(/\\{\\%([^%]+)\\%\\}/g, function() {\n      return '`\\r\\n' + arguments[1] + '\\r\\nstr+=`\\r\\n';\n    });\n    let tail = '`}\\r\\n return str;';\n    let fn = new Function('obj', head + html + tail);\n    cb(err, fn(obj));\n  });\n};\n\nrenderFile(path.resolve(__dirname, 'my-template.html'),{name: 'Cherry', age: 27, arr: [1, 2, 3]}, function(err, data) {\n  console.log(data);\n});\n```\n\n## å…³äº\nä½œè€…é½å°ç¥ï¼Œå‰ç«¯ç¨‹åºåª›ä¸€æšã€‚\n\næœ‰ç‚¹æ–‡è‰ºï¼Œå–œæ¬¢æ‘„å½±ã€‚\nè™½ç„¶ç°åœ¨æœä¹æ™šäº”ï¼ŒåŸ‹å¤´è‹¦å­¦ï¼Œ\nä½†æ¢¦æƒ³æ˜¯åšå¥³ä¾ ï¼Œæ‰¶è´«æµç©·ï¼Œä»—å‰‘èµ°å¤©æ¶¯ã€‚\nå¸Œæœ›æœ‰ä¸€å¤©èƒ½æ”¹å®Œ BUG å»å®ç°è‡ªå·±çš„æ¢¦æƒ³ã€‚\n\nä¸‹é¢æ˜¯æˆ‘çš„å…¬ä¼—å·ï¼Œä¸å®šæ—¶æ›´æ–°ï¼Œæ¬¢è¿æ¥ç©ï½\n\n![](https://imgkr2.cn-bj.ufileos.com/0c6dbe0a-51d6-4326-aa05-9f76b160cf95.jpg?UCloudPublicKey=TOKEN_8d8b72be-579a-4e83-bfd0-5f6ce1546f13&Signature=UPJ9Qy7Pd%252FraDj2mR8Pm9ecfgd8%253D&Expires=1597078015)\n\nè®¡åˆ’è¾“å‡ºï¼š\nä¸­é«˜çº§å‰ç«¯å·¥ç¨‹å¸ˆå¿…ä¼šçš„æ‰‹å†™APIï¼ˆäºŒï¼‰\n", "user_name": "é½å°ç¥", "description": "å…¬ä¼—å·ï¼šå¤§å‰ç«¯Space", "got_view_count": 11196, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "CSS", "concern_user_count": 258450, "user_id": "2849531329280551", "title": "ä¸‰è¡ŒCSSä¸ºæ˜é‡‘æ·»åŠ æš—é»‘æ¨¡å¼æ”¯æŒ", "mark_content": "**æœ¬æ–‡ä½œè€…ï¼š[Gavin](https://juejin.im/user/4300945217562887)ï¼Œæœªç»æˆæƒç¦æ­¢è½¬è½½ã€‚**\n\n\nè¿™æ˜¯ä¸€ä¸ªæ”¯æŒæš—é»‘æ¨¡å¼çš„å‚»ç“œå¼è½¬æ¢æ–¹å¼ï¼Œä»¥æ˜é‡‘æŸæ–‡ç« é¡µé¢ä¸ºä¾‹ï¼š\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/721594cc426f4929aaf67291783b0fa4~tplv-k3u1fbpfcp-zoom-1.image)\n\nç°åœ¨æ·»åŠ ç¥å¥‡çš„CSS\n\n```css\n@media (prefers-color-scheme: dark) {\n  html {\n    filter: invert(1) hue-rotate(180deg);\n  }\n}\n```\n\nå°±æ˜¯è¿™ä¹ˆç®€å•ï¼Œä½ å·²ç»å®Œæˆäº†ï¼âœŒï¸\n\nå®ç°æš—é»‘æ¨¡å¼\n\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/265e08de29bb40b780dab301413794bf~tplv-k3u1fbpfcp-zoom-1.image)\n\n### chromeæ¨¡æ‹Ÿæš—é»‘æ¨¡å¼\n\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e3f6eeab6192403699f0b6c64c917ed6~tplv-k3u1fbpfcp-zoom-1.image)\n\n\n### è§£é‡Š\n\n`filter`CSSå±æ€§å°†æ¨¡ç³Šæˆ–é¢œè‰²åç§»ç­‰å›¾å½¢æ•ˆæœåº”ç”¨äºå…ƒç´ ã€‚æ»¤é•œé€šå¸¸ç”¨äºè°ƒæ•´å›¾åƒï¼ŒèƒŒæ™¯å’Œè¾¹æ¡†çš„æ¸²æŸ“ã€‚ï¼ˆå‚è€ƒï¼š[MDN Webæ–‡æ¡£](https://developer.mozilla.org/zh-CN/docs/Web/CSS/filter)ï¼‰\n\nå¯¹äºæš—é»‘æ¨¡å¼ï¼Œå°†ä½¿ç”¨ä¸¤ä¸ª`filter`ï¼š`invert`å’Œ`hue-rotate`\n\n**invert**ï¼šåè½¬è¾“å…¥å›¾åƒã€‚å€¼å®šä¹‰è½¬æ¢çš„æ¯”ä¾‹ã€‚100%ï¼ˆæˆ–`1`ï¼‰å°†å®Œå…¨è½¬æ¢ï¼šé»‘è‰²å˜ä¸ºç™½è‰²ï¼Œç™½è‰²å˜ä¸ºé»‘è‰²ï¼Œå…¶å®ƒé¢œè‰²ç±»ä¼¼ã€‚\n\n**hue-rotate**ï¼š`hue-rotate`å¯ä»¥å¸®åŠ©æˆ‘ä»¬å¤„ç†éé»‘ç™½çš„å…¶å®ƒé¢œè‰²ï¼Œè‰²è°ƒæ—‹è½¬180åº¦ï¼Œç¡®ä¿ç½‘é¡µçš„é¢œè‰²ä¸»é¢˜ä¸æ”¹å˜ï¼Œè€Œåªæ˜¯å‰Šå¼±å®ƒçš„é¢œè‰²ã€‚è¿™ç§åšæ³•å”¯ä¸€çš„ç¼ºç‚¹æ˜¯ï¼šå®ƒè¿˜ä¼šåè½¬ç½‘é¡µä¸­æ‰€æœ‰çš„å›¾åƒã€‚å› æ­¤ï¼Œéœ€è¦å°†é¡µé¢ä¸­æ‰€æœ‰çš„å›¾åƒæ·»åŠ ç›¸åŒçš„è§„åˆ™ï¼Œä»¥ä¿®å¤è¿™ä¸ªé—®é¢˜ã€‚\n\n```css\n@media (prefers-color-scheme: dark) {\n  html {\n    filter: invert(1) hue-rotate(180deg);\n  }\n  html img {\n    filter: invert(1) hue-rotate(180deg);\n  }\n}\n```\n\nå½“ç„¶ï¼Œè¿˜å¯ä»¥æ·»åŠ ä¸€ä¸ª`transition`çš„è¿‡æ¸¡æ•ˆæœ\n\n```css\nhtml {\n    transition: color 300ms, background-color 300ms;\n}\n```\n\n\n\n### ç»“æœ\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d23f3eebe4f947d5b0014c91ea62ade0~tplv-k3u1fbpfcp-zoom-1.image)\n\nç»†å¿ƒçš„åŒå­¦å¯èƒ½å‘ç°ä¸Šé¢å¤´åƒè¿˜æ˜¯æœ‰é—®é¢˜ï¼Œæ²¡æœ‰å˜æˆåŸæœ¬çš„å›¾ç‰‡é¢œè‰²ï¼Œå› ä¸ºæ˜é‡‘æ–‡ç« å¤´åƒç”¨çš„aæ ‡ç­¾ï¼Œä¸ä¸ŠåŒç†ï¼Œæˆ‘ä»¬å¯ä»¥ç»™aæ ‡ç­¾ä¹ŸåŠ ä¸Šåè½¬ï¼Œæœ€ç»ˆä»£ç å¦‚ä¸‹ï¼š\n\n```css\n@media (prefers-color-scheme: dark) {\n  html {\n    filter: invert(1) hue-rotate(180deg);\n  }\n  html img {\n      filter: invert(1) hue-rotate(180deg);\n  }\n  a {\n      filter: invert(1) hue-rotate(180deg);\n  }\n}\nhtml {\n  transition: color 300ms, background-color 300ms;\n}\n```\n\n**å‚è€ƒæ–‡ç« **ï¼š[https://dev.to/akhilarjun/one-line-dark-mode-using-css-24li](https://dev.to/akhilarjun/one-line-dark-mode-using-css-24li)\n\n**åˆ©ç”¨JSå®ç°æš—é»‘æ¨¡å¼**ï¼š[https://dev.to/akhilarjun/dark-mode-unmistified-1ji6](https://dev.to/akhilarjun/dark-mode-unmistified-1ji6)", "user_name": "æ™ºäº‘å¥åº·å‰ç«¯å›¢é˜Ÿ", "description": "https://github.com/clouDr-f2e", "got_view_count": 5655, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "HBase", "concern_user_count": 5206, "user_id": "3966693685605143", "title": "å†…å­˜æ€»æ˜¯ä¸å¤Ÿï¼ŸHBase&GeoMesaé…ç½®ä¼˜åŒ–äº†è§£ä¸€ä¸‹", "mark_content": "## æ¦‚å†µï¼š\n\nç”Ÿäº§ç¯å¢ƒHBaseé›†ç¾¤å†…å­˜ç»å¸¸å¤„äºé«˜ä½ï¼ˆ90%ï¼‰ï¼Œè€Œä¸”GCä¹‹åä¹Ÿæ˜¯å†…å­˜ä¾ç„¶å¤„äºé«˜ä½ï¼Œç»åˆ†æå†…å­˜å…¨éƒ¨ç”±é›†ç¾¤çš„regionserverè¿›ç¨‹æ‰€æŒæœ‰ï¼Œï¼Œç»å¸¸é‡å¯ä¹‹åï¼Œå¤§æ¦‚3-4å¤©å°±ä¼šä¿æŒåœ¨é«˜ä½ã€‚ç”±ä¸Šè¿°ç—‡çŠ¶ï¼Œå¯ä»¥åˆ¤æ–­é›†ç¾¤å†…å­˜æœ‰æ³„éœ²çš„å«Œç–‘ã€‚\n\n## åˆ†æ\n\n### 1ã€**å…ˆç†Ÿæ‚‰ä¸€ä¸‹HBaseçš„å†…å­˜æ¨¡å‹**\n\nHBaseç³»ç»Ÿä¸­æœ‰ä¸¤å—å¤§çš„å†…å­˜ç®¡ç†æ¨¡å—ï¼Œä¸€å—æ˜¯**MemStore** ï¼Œä¸€å—æ˜¯**BlockCacheï¼Œå‰ç½®æ˜¯ç”¨äºé›†ç¾¤å†™å…¥æ‰€å±å†…å­˜ï¼Œè€Œåè€…ç”¨äºç¼“å­˜çƒ­æ•°æ®ï¼Œæä¾›æŸ¥è¯¢é€Ÿåº¦ã€‚**è¿™ä¸¤è€…å‡å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶è¿›è¡Œé…ç½®ã€‚å½“å‰é›†ç¾¤å‡é…ç½®äº†0.4å’Œ0.4çš„æ¯”ä¾‹ã€‚è€Œè€ƒè™‘åˆ°HBaseé›†ç¾¤æ˜¯å¤šå†™å°‘è¯»çš„æƒ…æ™¯ï¼Œä¸ºæ­¤è€Œå¼•å…¥äº†**MSLABæœºåˆ¶æ¥ä¼˜åŒ–HBaseçš„MemStore è´Ÿæ‹…ã€‚å†…å­˜çš„ä½¿ç”¨ç‡ä¼šå‘ˆç°å¾ˆä¼˜ç¾çš„é”¯é½¿å›¾å½¢ã€‚**\n\n **![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8768974bbb6c416db63f243ef169b57b~tplv-k3u1fbpfcp-zoom-1.image)** \n\n### **2ã€åˆ†æå†…å­˜ä½¿ç”¨ç‡å’Œä¸šåŠ¡å…³ç³»**\n\nèµ·åˆè®¤ä¸ºæ˜¯è¯»å†™ä¸šåŠ¡é‡å·²ç»è¶…è¿‡äº†é›†ç¾¤è´Ÿè½½èƒ½åŠ›ï¼Œä½†é›†ç¾¤ä¸šåŠ¡ä¹Ÿä¸å¤§ï¼Œå†™å’Œè¯»çš„TPSï¼Œå¸¦å®½ååé‡å‡æœªè¾¾åˆ°é›†ç¾¤é™å®šçš„èƒ½åŠ›ï¼Œè€Œä¸”CPUåˆ©ç”¨ç‡å¤§å¤šåŠéƒ½è¢«GCå ç”¨ï¼Œä½†å†…å­˜å°±æ˜¯æŒé«˜ä¸ä¸‹ï¼Œå³ä½¿ä¸šåŠ¡äº†åœäº†ä¸€å¤©ï¼Œå†…å­˜è¿˜æ˜¯ä¸æ€ä¹ˆä¸‹é™ï¼Œå¾ˆæ˜æ˜¾å’Œä¸šåŠ¡é‡æ— å…³ã€‚\n\né‚£ä¹ˆå’Œcompactionæœ‰å…³ï¼Ÿç»è§‚å¯Ÿçš„ç¡®å¯ä»¥çœ‹compactæ—¶ç‰¹åˆ«æ¶ˆè€—æ—¶é—´ã€‚æ­¤æ—¶æ„Ÿè§‰çœ‹åˆ°äº†å¸Œæœ›ï¼Œè°ƒæ•´å„ä¸ªå‚æ•°ï¼ŒæŠŠcompactæ“ä½œæå‡äº†10+å€ä¹‹åï¼Œå†…å­˜è¿˜æ˜¯æŒé«˜ä¸ä¸‹ ã€‚å‰©ä¸‹æœ€æ ¹æ²»çš„åŠæ³•å°±æ˜¯åˆ†æå†…å­˜ï¼Œçœ‹ä¸€ä¸‹å†…å­˜æ•°æ®éƒ½æ˜¯ä»€ä¹ˆï¼Ÿæœ‰æ— å†…å­˜æ³„éœ²é—®é¢˜ã€‚\n\n **![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/736fe8c018a345589031bf11873e9ffd~tplv-k3u1fbpfcp-zoom-1.image)** \n\n### **3ã€åˆ†ædunpæ–‡ä»¶**\n\nèŠ‚ç‚¹dumpä¸‹regionserverçš„å†…å­˜ï¼Œåˆ†æå‘ç°å†…å­˜ä¸­æœ‰50ä¸ªRpcServer.FifoRWQ.default.read.handlerçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹æŒæœ‰äº†1.2%å·¦å³çš„æ€»å†…å­˜ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„çº¿ç¨‹æŒæœ‰çš„å†…å­˜å æœ‰é‡å¤§äºä¸º50*1.2%=60%ã€‚éšç€æŸ¥è¯¢æ¬¡æ•°å¢å¤šï¼Œçº¿ç¨‹æŒç»­çš„å†…å­˜è¿˜ä¼šæŒç»­å¢åŠ ï¼Œå¦‚ä¸‹å›¾ã€‚\n\n **![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/49fd208c58ce4ab4a719e42eacbc28d2~tplv-k3u1fbpfcp-zoom-1.image)** \n\nåˆ†ææ¯ä¸€ä¸ªçº¿ç¨‹æŒæœ‰çš„å†…å­˜æ•°æ®ï¼Œå…¨éƒ¨éƒ½æ˜¯ä¸šåŠ¡ä¿¡æ¯ã€‚\n\n<div>\n\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/38c84960e5ae46c389ebfa4fb5b23fbc~tplv-k3u1fbpfcp-zoom-1.image)  \n\n</div>\n\né‚£ä¹ˆç»§ç»­åˆ†æï¼Œæ­¤ä¸šåŠ¡ä¿¡æ¯æ‰€å±å¯¹è±¡ï¼šorg.locationtech.**geomesa**.filter.factory.FastFilterFactoryã€‚è€Œå¯¹æ¯”åŒè§„æ¨¡çš„é›†ç¾¤ï¼Œçš„ç¡®æ˜¯æ­¤å¼‚å¸¸é›†ç¾¤å¼€å¯äº†GeoMesaç‰¹æ€§ã€‚æ‰¾åˆ°é—®é¢˜æ‰€åœ¨ï¼Œé‚£å°±çœ‹æºç åˆ†ææ˜¯å”¯ä¸€å‡ºè·¯ã€‚\n\n## è§£å†³æ–¹æ¡ˆ\n\nç»åˆ†æGeoMesaæºç ï¼Œç¼“å­˜æ•°æ®ä¸ºGeoMesaçš„**_filterCacheï¼Œ_**å…¨éƒ¨éƒ½æ˜¯æŸ¥è¯¢çš„æ¡ä»¶åŠå…¶ä¼˜åŒ–åæŸ¥è¯¢æ¡ä»¶ã€‚å¦‚ä¸‹ä»£ç ï¼š\n\n<div>\n\n    override def getOrElseUpdate(key: K, op: => V): V = {\n     val cached = caches.get.getIfPresent(key)\n     if (cached != null) { cached } else {\n     val value = op\n\n</div>\n\n<div>\n\n    //value=optimize(sft, ECQL.toFilter(ecql))\n\n</div>\n\n<div>\n\n    caches.get.put(key, value)\n         value\n       }\n     }\n\n</div>\n\nå¯¼è‡´é›†ç¾¤éšç€æŸ¥è¯¢æ¬¡æ•°å¢å¤šï¼Œå†…å­˜ä¸€ç›´æŒç»­ä¸ä¸‹ã€‚\n\nèƒ½å¦å»æ‰æ­¤å¤„ç¼“å­˜ç­–ç•¥å‘¢ï¼Ÿä¸ºä»€ä¹ˆç¼“å­˜æ­¤æŸ¥è¯¢ä¿¡æ¯å‘¢ï¼Œç›®çš„å°±æ˜¯ä¸ºäº†å‡å°‘åŒæ ·çš„æŸ¥è¯¢å†æ¬¡è¢«ä¼˜åŒ–çš„æ­¥éª¤ã€‚é‚£ä¹ˆæˆ‘ä»¬æŸ¥è¯¢æ·»æ¡ä»¶keyæœ‰æ²¡æœ‰é‡å¤ä½¿ç”¨ï¼Œæ­¤å¤„æœ‰ä¸ªä¸¥æ ¼è§„å®šï¼Œå°±æ˜¯keyä¸­ä¸ä»…ä¿è¯ä½¿ç”¨ç›¸åŒçš„GeoMesaå‡½æ•°è¿˜æœ‰ä½¿ç”¨ç›¸åŒçš„å‚æ•°ï¼ŒåŸºäºè¿™ä¸ªåŸåˆ™ï¼Œä¸šåŠ¡ä¸ŠæŸ¥è¯¢æ¡ä»¶æ˜¯æ²¡æœ‰é‡å¤çš„ã€‚\n\næˆ‘ä»¬é…ç½®äº†å¯é€‰å‚æ•°useFilterCacheï¼Œé»˜è®¤æ˜¯å¼€å¯çš„ï¼Œæ²¡å¿…è¦ç¼“å­˜æ­¤æŸ¥è¯¢æ¡ä»¶ï¼Œåº”äºˆä»¥åˆ é™¤ã€‚\n\n## ç»“è®º\n\nåœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ äº†useFilterCacheå‚æ•°ï¼Œé»˜è®¤æ˜¯å¼€å¯çš„ï¼Œæ ¹æ®ä¸šåŠ¡éœ€è¦é€‰æ‹©å¼€å§‹å’Œå…³é—­**_filterCacheç‰¹æ•ˆã€‚_**\n\nç»åˆ†ææˆ‘ä»¬ä¸šåŠ¡åœºæ™¯æ²¡å¿…è¦ç¼“å­˜æ­¤æŸ¥è¯¢æ¡ä»¶ï¼Œï¼Œåº”äºˆä»¥å…³é—­ã€‚ä¼˜åŒ–åçš„é›†ç¾¤å†…å­˜ä½¿ç”¨ç‡æƒ…å†µå°±æ¢å¤äº†æ­£å¸¸çŠ¶æ€ã€‚\n\n **![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/54a49831c38c434f868ce6960267db91~tplv-k3u1fbpfcp-zoom-1.image)** \n\n**[ç‚¹å‡»å…³æ³¨ï¼Œç¬¬ä¸€æ—¶é—´äº†è§£åä¸ºäº‘æ–°é²œæŠ€æœ¯~](https://bbs.huaweicloud.com/blogs/173946?utm_source=juejin&utm_medium=bbs-ex&utm_campaign=ei&utm_content=content)**", "user_name": "åä¸ºäº‘å¼€å‘è€…ç¤¾åŒº", "description": "åä¸ºäº‘å¼€å‘è€…ç¤¾åŒºï¼Œæä¾›å…¨é¢æ·±å…¥çš„äº‘è®¡ç®—å‰æ™¯åˆ†æã€ä¸°å¯Œçš„æŠ€æœ¯å¹²è´§ã€ç¨‹", "got_view_count": 33299, "category_name": "åç«¯", "ctime": 1457483880}
{"tag_name": "Linux", "concern_user_count": 198821, "user_id": "501033032750472", "title": "ç¨‹åºå‘˜è½»æ¾ç»˜å›¾ç¥å™¨", "mark_content": "æˆ‘ä»¬ç¨‹åºå‘˜åœ¨å·¥ä½œç”Ÿæ´»ä¸­ï¼Œæœ‰å¾ˆå¤šåœºåˆä¸‹éœ€è¦ç»˜åˆ¶å›¾è¡¨ï¼Œæ¯”å¦‚PPTé‡Œçš„å›¾è¡¨ï¼Œå­¦ä¹ ç¬”è®°çš„ä¸€äº›åŠ©è®°å›¾ï¼Œè¿˜æœ‰æœ€å¸¸è§çš„ï¼Œå·¥ä½œä¸­å¤§é‡ä½¿ç”¨çš„æµç¨‹å›¾ã€‚\n\nåœ¨ Window ä¸‹ï¼Œæˆ‘ä»¬æœ‰å¾ˆå¤šå¥½ç”¨çš„å·¥å…·ï¼Œæ¯”å¦‚ `Visio` ã€ `EA` ç­‰ç­‰ã€‚è¿™äº›è½¯ä»¶ä¹Ÿå¾ˆå¥½ç”¨ï¼Œä½†éƒ½æœ‰ä¸ªç¼ºç‚¹ï¼Œé‚£å°±æ˜¯å¤ªå¤æ‚ã€‚æˆ‘ä»¬éœ€è¦ä¸€å®šçš„ç¾å·¥åŸºç¡€ï¼Œè¿˜è¦å­¦å¾ˆå¤šè½¯ä»¶æ“ä½œï¼Œæ‰èƒ½ç”»å‡ºä¸€å¼ å¾ˆç®€å•çš„æµç¨‹å›¾ã€‚\n\nè€Œä¸”ï¼Œæ›´è¦å‘½çš„æ˜¯ï¼Œä¸€æ—¦éœ€æ±‚å‘ç”Ÿå˜åŠ¨ï¼Œå¾ˆä¸å¥½ä¿®æ”¹ï¼Œå¾€å¾€ç‰µä¸€å‘è€ŒåŠ¨å…¨èº«ã€‚æ‰€ä»¥ç»å¸¸åœ¨å¬åˆ°éœ€æ±‚å˜æ›´çš„æ—¶å€™ï¼Œè‰¯è®¸å°±è„ŠèƒŒä¸€å‡‰â€¦â€¦\n\nåæ¥ï¼Œåœ¨å¤§ç¥çš„ä»‹ç»ä¸‹ï¼Œè‰¯è®¸å¼€å§‹ä½¿ç”¨ä¸€ä¸ªç¥å™¨ã€‚è¿™ä¸ªç¥å™¨ä¸éœ€è¦ä½ æ‡‚ç¾å·¥ï¼Œä¹Ÿä¸å¤ªéœ€è¦æ‡‚è½¯ä»¶æ“ä½œï¼Œç»˜å›¾çš„è¿‡ç¨‹è·Ÿä½ å†™è½¯ä»¶çš„è¿‡ç¨‹å·®ä¸å¤šï¼ŒçŸ­çŸ­çš„å‡ è¡Œä»£ç ï¼Œå°±èƒ½æŠŠä½ å¤´è„‘é‡Œçš„æƒ³æ³•è¡¨ç°å‡ºæ¥ã€‚\n\nè€Œä¸”ï¼Œä¸ç”¨æ‹…å¿ƒå¸ƒå±€ï¼Œä¸ç”¨æ‹…å¿ƒä¿®æ”¹ï¼Œç”šè‡³éƒ½ä¸ç”¨é¼ æ ‡ï¼Œä¹Ÿç»™åˆ¶ä½œå‡ºç›¸å½“ç²¾ç¾çš„ä½œå“ï¼\n\nè¿™ä¸ªç¥å™¨å°±æ˜¯ï¼š`dot` å‘½ä»¤ï¼\n\nè¿™ä¸ªç¥å™¨è¿˜æœ‰ä¸ªå›¾å½¢ç•Œé¢ç‰ˆï¼Œå« `Graphviz` ï¼Œä½†è‰¯è®¸ä¹ æƒ¯äº†å‘½ä»¤è¡Œï¼Œä¸€èˆ¬æ˜¯åœ¨å‘½ä»¤è¡Œä¸‹å®Œæˆçš„ã€‚\n\næˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹å®ƒèƒ½åšä»€ä¹ˆã€‚ä»¥ä¸‹å‡ ä¸ªå›¾ç‰‡é€‰è‡ªå®ƒçš„å®˜ç½‘ï¼š\n\n![](https://i.loli.net/2019/03/07/5c811b2c07676.png)\n\n![](https://i.loli.net/2019/03/07/5c811b4c257ae.png)\n\n![](https://i.loli.net/2019/03/07/5c811b67391e7.png)\n\n![](https://i.loli.net/2019/03/07/5c811b7c770de.png)\n\nè¿™åªæ˜¯å…¶ä¸­çš„å‡ å¼ å›¾è€Œå·²ï¼Œæ›´å¤šå›¾ç‰‡å¯ä»¥å»å®ƒçš„å®˜ç½‘æŸ¥çœ‹ï¼š\n\n    http://www.graphviz.org\n\nè¿™ä¸ªè½¯ä»¶éå¸¸å¼ºå¤§ï¼Œå¦‚æœæŒæ¡å¾—å¥½çš„è¯ï¼Œå¯ä»¥ç”»å‡ºéå¸¸å¥½çœ‹çš„ä½œå“ï¼Œè€Œä¸”è¿˜ä¸æ€•äº§å“ç»ç†æ”¹éœ€æ±‚ã€‚ä½†æ˜¯ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸å¤ªéœ€è¦ç”¨åˆ°å®ƒçš„é«˜çº§åŠŸèƒ½ï¼Œå¾€å¾€ä¸€äº›å¾ˆåŸºç¡€çš„åŠŸèƒ½å°±å¯ä»¥åº”ä»˜æˆ‘ä»¬å·¥ä½œä¸­çš„ 80% ä»¥ä¸Šçš„éœ€æ±‚äº†ã€‚\n\nè¿™ä¸ªè½¯ä»¶çš„å®‰è£…å¾ˆç®€å•ï¼Œåªéœ€æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯ï¼š\n\n    sudo apt install graphviz\n\nç¨ç­‰ä¸€å°ä¼šå„¿ï¼Œå°±å®‰è£…æˆåŠŸäº†ã€‚ç„¶åï¼Œå°±å¯ä»¥æ„‰å¿«åœ°ç©è€å•¦~\n\næˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ä¸€ä¸ª Hello world æ°´å¹³çš„ä½œå“ã€‚\n\né¦–å…ˆï¼Œåœ¨ä»»æ„ä½ç½®åˆ›å»ºä¸€ä¸ª `test.dot` æ–‡ä»¶ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥å«å…¶å®ƒåå­—ï¼‰ï¼Œæ–‡ä»¶çš„å†…å®¹å¦‚ä¸‹ï¼š\n\n    graph g{\n         \"Hello\" -- \"world\"\n    }\n\nç„¶åï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š\n\n    dot -Tpng -o test.png test.dot\n\nä¹‹åï¼Œå°±åœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆäº†ä¸‹é¢è¿™å¹…æœ€ç®€å•çš„å›¾ç‰‡äº†ï¼Œæ˜¯ä¸æ˜¯éå¸¸ç®€å•ï¼Ÿ\n\n![](https://i.loli.net/2019/03/07/5c8120ee21c82.png)\n\næˆ‘ä»¬æ¥ç®€å•ä»‹ç»ä¸‹ DOT å‘½ä»¤çš„è¯­æ³•ã€‚åœ¨ test.dot æ–‡ä»¶é‡Œï¼Œ`graph` è¡¨ç¤ºçš„æ˜¯è¿™å¹…å›¾æ˜¯ `æ— å‘å›¾`ï¼Œä¹Ÿå°±æ˜¯è¿æ¥çº¿æ˜¯æ²¡æœ‰ç®­å¤´çš„ã€‚ä¸ä¹‹å¯¹åº”çš„æ˜¯ `digraph` ï¼Œè¡¨ç¤º `æœ‰å‘å›¾` ï¼Œè¿æ¥çº¿æ˜¯æœ‰ç®­å¤´çš„ã€‚\n\nè€Œå›¾ç‰‡çš„æè¿°ï¼Œæ˜¯åœ¨ `{}` é‡Œè¿›è¡Œï¼Œå¹¶ä¸”ä¹Ÿæ”¯æŒæ³¨é‡Šï¼Œæ³¨é‡Šé£æ ¼ä¸ C è¯­è¨€ç±»ä¼¼ï¼Œ`//` ç”¨äºå•è¡Œæ³¨é‡Šï¼Œ `/**/` ç”¨äºå¤šè¡Œæ³¨é‡Šã€‚\n\nå‰æ–‡æåˆ°ï¼Œdot å‘½ä»¤ååˆ†å¼ºå¤§ï¼Œè¿™é‡Œåªä»‹ç»å®ƒçš„æœ€åŸºæœ¬çš„ä¸€äº›ç”¨æ³•ï¼Œè€Œå­¦ä¼šè¿™äº›æœ€åŸºæœ¬çš„å‘½ä»¤ï¼Œå°±å¯ä»¥åº”å¯¹ 80% å·¦å³çš„å·¥ä½œã€‚æ›´å¤šé«˜çº§ç”¨æ³•å¯ä»¥å‚è€ƒå®ƒçš„å®˜ç½‘ã€‚\n\n#### èŠ‚ç‚¹\n\nç±»ä¼¼äºè„šæœ¬è¯­è¨€ï¼ŒèŠ‚ç‚¹æ— éœ€ç”³æ˜å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚è€Œå¯¹äºèŠ‚ç‚¹ï¼Œæˆ‘ä»¬ä¸€èˆ¬è®¾ç½®å®ƒçš„ä»¥ä¸‹å‡ ä¸ªå±æ€§ï¼š\n\n*   shape å½¢çŠ¶\n*   label æ ‡ç­¾\n*   style ç±»å‹ï¼Œå¡«å……è¿˜æ˜¯éå¡«å……\n*   color çº¿æ¡é¢œè‰²\n*   fillcolor å¡«å……é¢œè‰²\n\nè¿™äº›å±æ€§æ˜¯åœ¨èŠ‚ç‚¹åçš„ä¸€å¯¹æ–¹æ‹¬å· `[]` é‡Œè®¾ç½®çš„ã€‚å¾ˆå¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„èŠ‚ç‚¹å±æ€§æ˜¯å®Œå…¨ç›¸åŒçš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ª `node` ï¼Œå¹¶å¯¹å®ƒè¿›è¡Œè®¾ç½®ï¼Œé‚£ä¹ˆå›¾å½¢é‡Œæ‰€æœ‰èŠ‚ç‚¹å±æ€§éƒ½è·Ÿ node ä¸€æ ·ã€‚å¦‚æœæŸä¸ªèŠ‚ç‚¹æƒ³æç‰¹æ®Šï¼Œåªéœ€å•ç‹¬å¯¹å®ƒè¿›è¡Œè®¾ç½®å³å¯ã€‚\n\n    graph g{\n        node [shape = \"box\", style = \"filled\", color = \"red\", fillcolor = \"green\"]   //è®¾ç½®èŠ‚ç‚¹çš„é»˜è®¤å½¢çŠ¶ï¼Œç±»å‹ï¼Œé¢œè‰²ï¼Œå¡«å……é¢œè‰²\n        a [shape = \"ellipse\", fillcolor = \"yellow\", label = \"Hello\"]    //å¯¹æŸä¸ªèŠ‚ç‚¹è¿›è¡Œå•ç‹¬è®¾ç½®\n        b [label = \"world\"]   \n        a -- b\n        a -- c     //ä¸å¯¹cè¿›è¡Œè®¾ç½®ï¼Œä½¿ç”¨é»˜è®¤å±æ€§\n        d [shape = \"circle\"ï¼Œlabel = \"cicle\"]    //då•ç‹¬è®¾ç½®å±æ€§\n        c -- d\n    }\n\n![](https://i.loli.net/2019/03/10/5c847ab47116f.png)\n\n#### è¿æ¥çº¿\n\nè¿æ¥çº¿ä¾ç…§æœ‰æ— ç®­å¤´åˆ†ä¸ºæœ‰å‘è¾¹å’Œæ— å‘è¾¹ã€‚å®ƒçš„å¸¸ç”¨å±æ€§æœ‰å¦‚ä¸‹ï¼š\n\n*   style ç±»å‹ï¼Œå®çº¿è¿˜æ˜¯è™šçº¿\n*   color è¿æ¥çº¿é¢œè‰²\n*   label æ ‡ç­¾\n*   labelfontcolor æ ‡ç­¾å­—ä½“é¢œè‰²\n*   headlabel èµ·å§‹æ ‡ç­¾å†…å®¹\n*   taillabel ç»“æŸæ ‡ç­¾å†…å®¹\n*   decorate æ ‡ç­¾ä¸è¿æ¥çº¿ä¹‹é—´æœ‰è¿çº¿æ ‡æ³¨\n\nå¯¹äºæœ‰å‘è¾¹ï¼Œè¿˜å¯ä»¥è®¾ç½®èµ·ç‚¹åŠç»ˆç‚¹çš„ä½ç½®ï¼Œç”¨ `e, s, w, n` è¡¨ç¤º `ä¸œå—è¥¿åŒ—` ï¼Œä¹Ÿå¯ä»¥ç»„åˆæ¥è¡¨ç¤ºï¼Œè¯¦ç»†è¯·çœ‹ä¸‹é¢å®ä¾‹ã€‚\n\nå’ŒèŠ‚ç‚¹ç±»ä¼¼ï¼Œè¿æ¥çº¿ä¹Ÿå¯ä»¥è®¾ç½®é»˜è®¤å±æ€§ï¼Œç”¨ `edge` è¡¨ç¤ºã€‚å¦‚æœä¸ä½¿ç”¨é»˜è®¤å±æ€§çš„è¯ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰å±æ€§ã€‚\n\n    digraph edge_settings {\n        edge [color = \"green\", decorate = false]        //è®¾ç½®è¾¹çš„é»˜è®¤å±æ€§\n        node [shape = \"polygon\", sides = 4, color = \"blue\"]\n        a -> b [style = \"dotted\", color = \"red\", label = \"a to b\"]  //è®¾ç½®styleã€colorã€label\n        b: se -> c: w [headlabel = \"end\",  taillabel = \"start\"]     //è®¾ç½®è¾¹ä»bçš„â€œä¸œå—æ–¹â€å‡ºå‘ï¼Œä»cçš„â€œè¥¿æ–¹â€ç»“æŸï¼Œè®¾ç½®æœ‰å‘è¾¹èµ·ç‚¹å’Œç»ˆç‚¹çš„label\n        {c, f} -> {d, e} [label = \"multi-lines\", decorate = true]    //å¯ä»¥ç”¨è¿™ç§æ–¹å¼åŒæ—¶ç”»å¤šæ¡è¾¹\n    }\n\n![](https://i.loli.net/2019/03/10/5c8489562c4fe.png)\n\n#### å›¾\n\nDOTè¯­è¨€å¯ä»¥æè¿°æ— å‘å›¾å’Œæœ‰å‘å›¾ä¸¤ç§å›¾ï¼Œgraphæ ‡è¯†æ— å‘å›¾ï¼Œdigraphæ ‡è¯†æœ‰å‘å›¾ã€‚å¯¹äºå›¾çš„å±æ€§è®¾ç½®ï¼Œå¸¸ç”¨çš„æœ‰ä»¥ä¸‹ä¸€äº›ï¼š\n\n*   size å°ºå¯¸\n*   label æ ‡ç­¾\n*   labelloc æ ‡ç­¾ä½ç½®ï¼Œé€šå¸¸è®¾ç½®ä¸º t ï¼ˆé¡¶ï¼‰ï¼Œæˆ– b ï¼ˆåº•ï¼‰\n*   labeljust æ ‡ç­¾å¯¹é½ï¼Œæ¯”å¦‚å·¦å¯¹é½ã€å³å¯¹é½ã€å±…ä¸­ï¼Œç­‰ç­‰\n*   bgcolor èƒŒæ™¯é¢œè‰²\n*   rankdir å¸ƒå±€ï¼Œæ¯”å¦‚ä»å·¦å¾€å³ï¼Œæˆ–è€…ä»ä¸Šå¾€ä¸‹\n\nå›¾é‡Œé¢è¿˜å¯ä»¥åŒ…å«å­å›¾ï¼Œå­å›¾å¿…é¡»ä»¥ `cluster` ä½œä¸ºå‰ç¼€å¼€å§‹ã€‚æ¯”å¦‚å®˜ç½‘é¦–é¡µä¸Šçš„å›¾ï¼Œå³æœ¬æ–‡ç¬¬ä¸€å¼ å›¾ï¼Œå°±æ˜¯å›¾é‡ŒåŒ…å«å­å›¾ï¼Œå®ƒçš„æºç å¦‚ä¸‹ï¼š\n\n    digraph graph_settings {\n        start [shape = \"Mdiamond\"]\n        end [shape = \"Msquare\"]\n\n        subgraph cluster_sub1 {\n            label = \"process #1\"\n            labelloc = \"t\"\n            bgcolor = \"gray55\"\n            node [style = \"filled\", color = \"white\"]\n            a0 -> a1 -> a2 -> a3 -> a0\n        }\n        subgraph cluster_sub2 {\n            label = \"process #2\"\n            labelloc = \"t\"\n            color = \"blue\"\n            node [style = \"filled\", color = \"black\", fillcolor = \"gray55\"]\n            b0 -> b1 -> b2 -> b3\n        }\n\n        start -> {a0, b0}\n        a1 -> b3\n        b2 -> a3\n        {a3, b3} -> end\n    }\n\n#### å°ç»“\n\nåˆ©ç”¨ dot å‘½ä»¤æ¥ç»˜å›¾ï¼Œéå¸¸çœäº‹ï¼Œä¹Ÿéå¸¸çµæ´»ï¼Œå¯¹äºè®¾è®¡èœé¸Ÿè€Œè¨€ï¼Œç®€ç›´ä¸èƒ½å¤ªæ–¹ä¾¿ï¼å®ƒçš„åŠŸèƒ½ååˆ†å¼ºå¤§ï¼Œæœ¬æ–‡æ‰€ä»‹ç»çš„åªæ˜¯å®ƒéå¸¸å¸¸ç”¨ï¼Œä½†ä¹Ÿæ˜¯éå¸¸å®ç”¨çš„ä¸€äº›åŸºæœ¬åŠŸèƒ½ï¼ŒæŒæ¡è¿™äº›åŠŸèƒ½å°±èƒ½åº”å¯¹å·¥ä½œä¸­ç»å¤§éƒ¨åˆ†çš„åœºæ™¯ã€‚ä½†æƒ³è¦åšå‡ºæ›´åŠ ç‚«é…·çš„æ•ˆæœï¼Œè¿˜éœ€è¦å†ç»†ç»†ç ”ç©¶å®ƒå®˜ç½‘çš„èµ„æ–™ã€‚", "user_name": "è‰¯è®¸Linux", "description": "å…¬ä¼—å·ï¼šè‰¯è®¸Linuxï¼Œå›å¤1024è·å–5TæŠ€æœ¯èµ„æ–™", "got_view_count": 72073, "category_name": "åç«¯", "ctime": 1457483880}
{"tag_name": "JavaScript", "concern_user_count": 343215, "user_id": "958429872534056", "title": "è¿™äº› JavaScript ç»†èŠ‚ï¼Œä½ çŸ¥é“ä¸ï¼Ÿ", "mark_content": "## å‰è¨€\n\næœ¬æ–‡ä¸»è¦ç»™å¤§å®¶å¸¦æ¥ä¸€äº›æˆ‘è¯»ã€Šä½ ä¸çŸ¥é“çš„ JavaScriptï¼ˆä¸­å·ï¼‰ã€‹ä¸­é‡åˆ°çš„ä¸€äº›**æœ‰æ„æ€**çš„å†…å®¹ï¼Œå¯ä»¥è¯´æ˜¯**æ‰“å¼€æ–°ä¸–ç•Œçš„å¤§é—¨**çš„æ„Ÿè§‰ã€‚å¸Œæœ›èƒ½åœ¨å·¥ä½œä¹‹ä½™ï¼Œç»™å¤§å®¶å¸¦æ¥ä¸€ç‚¹ä¹è¶£ã€‚\n\n> JavaScript æ˜¯ä¸€é—¨ä¼˜ç§€çš„è¯­è¨€ã€‚åªå­¦å…¶ä¸­ä¸€éƒ¨åˆ†å†…å®¹å¾ˆå®¹æ˜“ï¼Œä½†æ˜¯è¦å…¨é¢æŒæ¡åˆ™å¾ˆéš¾ã€‚å¼€å‘äººå‘˜é‡åˆ°å›°éš¾æ—¶å¾€å¾€å°†å…¶å½’å’äºè¯­è¨€æœ¬èº«ï¼Œè€Œä¸åçœä»–ä»¬è‡ªå·±å¯¹è¯­è¨€çš„ç†è§£æœ‰å¤šåŒ®ä¹ã€‚ã€Šä½ ä¸çŸ¥é“çš„ JavaScriptã€‹æ—¨åœ¨è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½¿è¯»è€…èƒ½å¤Ÿå‘è‡ªå†…å¿ƒåœ°å–œæ¬¢ä¸Šè¿™é—¨è¯­è¨€ã€‚\n\n## å¼ºåˆ¶ç±»å‹è½¬æ¢\n\n### å€¼ç±»å‹è½¬æ¢\n\n```js\nvar a = 42;\nvar b = a + \"\"; // éšå¼å¼ºåˆ¶ç±»å‹è½¬æ¢\nvar c = String(a); // æ˜¾å¼å¼ºåˆ¶ç±»å‹è½¬æ¢\n```\n\n### æŠ½è±¡å€¼æ“ä½œ\n\n> `document.all` æ˜¯å‡å€¼å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯ `!!document.all` å€¼ä¸º `false`ã€‚\n\n### æ˜¾ç¤ºå¼ºåˆ¶ç±»å‹è½¬æ¢\n\n#### æ—¥æœŸæ˜¾ç¤ºè½¬æ¢ä¸ºæ•°å­—ï¼š\n\nä½¿ç”¨ `Date.now()` æ¥è·å¾—å½“å‰çš„æ—¶é—´æˆ³ï¼Œä½¿ç”¨ `new Date(..).getTime()` æ¥è·å¾—æŒ‡å®šæ—¶é—´çš„æ—¶é—´æˆ³ã€‚\n\n#### å¥‡ç‰¹çš„ ~ è¿ç®—ç¬¦ï¼š\n\n`~x` å¤§è‡´ç­‰åŒäº `-(x+1)`ã€‚å¾ˆå¥‡æ€ªï¼Œä½†ç›¸å¯¹æ›´å®¹æ˜“è¯´æ˜é—®é¢˜ï¼š\n`~42; // -(42+1) ==> -43`\n\nJavaScript ä¸­å­—ç¬¦ä¸²çš„ `indexOf(..)` æ–¹æ³•ä¹Ÿéµå¾ªè¿™ä¸€æƒ¯ä¾‹ï¼Œè¯¥æ–¹æ³•åœ¨å­—ç¬¦ä¸²ä¸­æœç´¢æŒ‡å®šçš„å­\nå­—ç¬¦ä¸²ï¼Œå¦‚æœæ‰¾åˆ°å°±è¿”å›å­å­—ç¬¦ä¸²æ‰€åœ¨çš„ä½ç½®ï¼ˆä» 0 å¼€å§‹ï¼‰ï¼Œå¦åˆ™è¿”å› -1ã€‚\n\n`~` å’Œ `indexOf()` ä¸€èµ·å¯ä»¥å°†ç»“æœå¼ºåˆ¶ç±»å‹è½¬æ¢ï¼ˆå®é™…ä¸Šä»…ä»…æ˜¯è½¬æ¢ï¼‰ä¸ºçœŸ / å‡å€¼ï¼š\n\n```js\nvar a = \"Hello World\";\n~a.indexOf(\"lo\"); // -4 <-- çœŸå€¼!\n\nif (~a.indexOf(\"lo\")) { // true\n  // æ‰¾åˆ°åŒ¹é…ï¼\n}\n```\n\n#### è§£æéå­—ç¬¦ä¸²ï¼š\n\næ›¾ç»æœ‰äººå‘å¸–åæ§½è¿‡ `parseInt(..)` çš„ä¸€ä¸ªå‘ï¼š\n\n```js\nparseInt( 1/0, 19 ); // 18\n```\n\n`parseInt(1/0, 19)` å®é™…ä¸Šæ˜¯ `parseInt(\"Infinity\", 19)`ã€‚ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯ \"I\"ï¼Œä»¥ 19 ä¸ºåŸºæ•°\næ—¶å€¼ä¸º 18ã€‚\n\næ­¤å¤–è¿˜æœ‰ä¸€äº›çœ‹èµ·æ¥å¥‡æ€ªä½†å®é™…ä¸Šè§£é‡Šå¾—é€šçš„ä¾‹å­ï¼š\n\n```js\nparseInt(0.000008); // 0 (\"0\" æ¥è‡ªäº \"0.000008\")\nparseInt(0.0000008); // 8 (\"8\" æ¥è‡ªäº \"8e-7\")\nparseInt(false, 16); // 250 (\"fa\" æ¥è‡ªäº \"false\")\nparseInt(parseInt, 16); // 15 (\"f\" æ¥è‡ªäº \"function..\")\nparseInt(\"0x10\"); // 16\nparseInt(\"103\", 2); // 2\n```\n\n### éšå¼å¼ºåˆ¶ç±»å‹è½¬æ¢\n\n#### å­—ç¬¦ä¸²å’Œæ•°å­—ä¹‹é—´çš„éšå¼å¼ºåˆ¶ç±»å‹è½¬æ¢\n\nä¾‹å¦‚ï¼š\n\n```js\nvar a = \"42\";\nvar b = \"0\";\nvar c = 42;\nvar d = 0;\na + b; // \"420\"\nc + d; // 42\n```\n\nå†ä¾‹å¦‚ï¼š\n\n```js\nvar a = [1,2];\nvar b = [3,4];\na + b; // \"1,23,4\"\n```\n\næ ¹æ® ES5 è§„èŒƒ 11.6.1 èŠ‚ï¼Œå¦‚æœæŸä¸ªæ“ä½œæ•°æ˜¯å­—ç¬¦ä¸²æˆ–è€…èƒ½å¤Ÿé€šè¿‡ä»¥ä¸‹æ­¥éª¤è½¬æ¢ä¸ºå­—ç¬¦ä¸²çš„è¯ï¼Œ+ å°†è¿›è¡Œæ‹¼æ¥æ“ä½œã€‚å¦‚æœå…¶ä¸­ä¸€ä¸ªæ“ä½œæ•°æ˜¯å¯¹è±¡ï¼ˆåŒ…æ‹¬æ•°ç»„ï¼‰ï¼Œåˆ™é¦–å…ˆå¯¹å…¶è°ƒç”¨ ToPrimitive æŠ½è±¡æ“ä½œï¼ˆè§„èŒƒ 9.1 èŠ‚ï¼‰ï¼Œè¯¥æŠ½è±¡æ“ä½œå†è°ƒç”¨ `[[DefaultValue]]`ï¼ˆè§„èŒƒ 8.12.8 èŠ‚ï¼‰ï¼Œä»¥æ•°å­—ä½œä¸ºä¸Šä¸‹æ–‡ã€‚\n\nä½ æˆ–è®¸æ³¨æ„åˆ°è¿™ä¸ `ToNumber` æŠ½è±¡æ“ä½œå¤„ç†å¯¹è±¡çš„æ–¹å¼ä¸€æ ·ï¼ˆå‚è§ 4.2.2 èŠ‚ï¼‰ã€‚å› ä¸ºæ•°ç»„çš„ `valueOf()` æ“ä½œæ— æ³•å¾—åˆ°ç®€å•åŸºæœ¬ç±»å‹å€¼ï¼Œäºæ˜¯å®ƒè½¬è€Œè°ƒç”¨ `toString()`ã€‚å› æ­¤ä¸Šä¾‹ä¸­çš„ä¸¤ä¸ªæ•°ç»„å˜æˆäº† \"`1,2`\" å’Œ \"`3,4`\" ã€‚+ å°†å®ƒä»¬æ‹¼æ¥åè¿”å› \"`1,23,4`\" ã€‚\n\n**ç®€å•æ¥è¯´å°±æ˜¯ï¼Œå¦‚æœ + çš„å…¶ä¸­ä¸€ä¸ªæ“ä½œæ•°æ˜¯å­—ç¬¦ä¸²ï¼ˆæˆ–è€…é€šè¿‡ä»¥ä¸Šæ­¥éª¤å¯ä»¥å¾—åˆ°å­—ç¬¦ä¸²ï¼‰ï¼Œåˆ™æ‰§è¡Œå­—ç¬¦ä¸²æ‹¼æ¥ï¼›å¦åˆ™æ‰§è¡Œæ•°å­—åŠ æ³•ã€‚**\n\n#### ç¬¦å·çš„å¼ºåˆ¶ç±»å‹è½¬æ¢\n\nES6 å…è®¸ä»ç¬¦å·åˆ°å­—ç¬¦ä¸²çš„æ˜¾å¼å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œç„¶è€Œéšå¼å¼ºåˆ¶ç±»å‹è½¬æ¢ä¼šäº§ç”Ÿé”™è¯¯ï¼Œå…·ä½“çš„åŸå› ä¸åœ¨æœ¬ä¹¦è®¨è®ºèŒƒå›´ä¹‹å†…ã€‚\n\nä¾‹å¦‚ï¼š\n\n```js\nvar s1 = Symbol(\"cool\");\nString(s1); // \"Symbol(cool)\"\nvar s2 = Symbol(\"not cool\");\ns2 + \"\"; // TypeError\n```\n\nç¬¦å·ä¸èƒ½å¤Ÿè¢«å¼ºåˆ¶ç±»å‹è½¬æ¢ä¸ºæ•°å­—ï¼ˆæ˜¾å¼å’Œéšå¼éƒ½ä¼šäº§ç”Ÿé”™è¯¯ï¼‰ï¼Œä½†å¯ä»¥è¢«å¼ºåˆ¶ç±»å‹è½¬æ¢ä¸ºå¸ƒå°”å€¼ï¼ˆæ˜¾å¼å’Œéšå¼ç»“æœéƒ½æ˜¯ `true`ï¼‰ã€‚\n\nç”±äºè§„åˆ™ç¼ºä¹ä¸€è‡´æ€§ï¼Œæˆ‘ä»¬è¦å¯¹ ES6 ä¸­ç¬¦å·çš„å¼ºåˆ¶ç±»å‹è½¬æ¢å¤šåŠ å°å¿ƒã€‚\n\nå¥½åœ¨é‰´äºç¬¦å·çš„ç‰¹æ®Šç”¨é€”ï¼Œæˆ‘ä»¬ä¸ä¼šç»å¸¸ç”¨åˆ°å®ƒçš„å¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚\n\n### å®½æ¾ç›¸ç­‰å’Œä¸¥æ ¼ç›¸ç­‰\n\nå¸¸è§çš„è¯¯åŒºæ˜¯â€œ`==` æ£€æŸ¥å€¼æ˜¯å¦ç›¸ç­‰ï¼Œ`===` æ£€æŸ¥å€¼å’Œç±»å‹æ˜¯å¦ç›¸ç­‰â€ã€‚å¬èµ·æ¥è›®æœ‰é“ç†ï¼Œç„¶è€Œè¿˜ä¸å¤Ÿå‡†ç¡®ã€‚å¾ˆå¤š JavaScript çš„ä¹¦ç±å’Œåšå®¢ä¹Ÿæ˜¯è¿™æ ·æ¥è§£é‡Šçš„ï¼Œä½†æ˜¯å¾ˆé—æ†¾ä»–ä»¬éƒ½é”™äº†ã€‚\n\næ­£ç¡®çš„è§£é‡Šæ˜¯ï¼šâ€œ`==` å…è®¸åœ¨ç›¸ç­‰æ¯”è¾ƒä¸­è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œè€Œ `===` ä¸å…è®¸ã€‚â€\n\nå­—ç¬¦ä¸²å’Œæ•°å­—ä¹‹é—´çš„ç›¸ç­‰æ¯”è¾ƒï¼š\n\n- å¦‚æœ Type(x) æ˜¯æ•°å­—ï¼ŒType(y) æ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™è¿”å› x == ToNumber(y) çš„ç»“æœã€‚\n- å¦‚æœ Type(x) æ˜¯å­—ç¬¦ä¸²ï¼ŒType(y) æ˜¯æ•°å­—ï¼Œåˆ™è¿”å› ToNumber(x) == y çš„ç»“æœã€‚\n\nå…¶ä»–ç±»å‹å’Œå¸ƒå°”ç±»å‹ä¹‹é—´çš„ç›¸ç­‰æ¯”è¾ƒï¼š\n\n- å¦‚æœ Type(x) æ˜¯å¸ƒå°”ç±»å‹ï¼Œåˆ™è¿”å› ToNumber(x) == y çš„ç»“æœï¼›\n- å¦‚æœ Type(y) æ˜¯å¸ƒå°”ç±»å‹ï¼Œåˆ™è¿”å› x == ToNumber(y) çš„ç»“æœã€‚\n\n`null` å’Œ `undefined` ä¹‹é—´çš„ç›¸ç­‰æ¯”è¾ƒï¼š\n\n- å¦‚æœ x ä¸º nullï¼Œy ä¸º undefinedï¼Œåˆ™ç»“æœä¸º trueã€‚\n- å¦‚æœ x ä¸º undefinedï¼Œy ä¸º nullï¼Œåˆ™ç»“æœä¸º trueã€‚\n\nå¯¹è±¡å’Œéå¯¹è±¡ä¹‹é—´çš„ç›¸ç­‰æ¯”è¾ƒï¼š\n\n- å¦‚æœ Type(x) æ˜¯å­—ç¬¦ä¸²æˆ–æ•°å­—ï¼ŒType(y) æ˜¯å¯¹è±¡ï¼Œåˆ™è¿”å› x == ToPrimitive(y) çš„ç»“æœï¼›\n- å¦‚æœ Type(x) æ˜¯å¯¹è±¡ï¼ŒType(y) æ˜¯å­—ç¬¦ä¸²æˆ–æ•°å­—ï¼Œåˆ™è¿”å› ToPromitive(x) == y çš„ç»“æœã€‚\n\n## è¯­æ³•\n\n### é”™è¯¯\n\næå‰ä½¿ç”¨å˜é‡\n\nES6 è§„èŒƒå®šä¹‰äº†ä¸€ä¸ªæ–°æ¦‚å¿µï¼Œå«ä½œ TDZï¼ˆTemporal Dead Zoneï¼Œæš‚æ—¶æ€§æ­»åŒºï¼‰ã€‚\n\nTDZ æŒ‡çš„æ˜¯ç”±äºä»£ç ä¸­çš„å˜é‡è¿˜æ²¡æœ‰åˆå§‹åŒ–è€Œä¸èƒ½è¢«å¼•ç”¨çš„æƒ…å†µã€‚\n\nå¯¹æ­¤ï¼Œæœ€ç›´è§‚çš„ä¾‹å­æ˜¯ ES6 è§„èŒƒä¸­çš„ `let` å—ä½œç”¨åŸŸï¼š\n\n```js\n{\n  a = 2; // ReferenceError!\n  let a;\n}\n```\n\n`a = 2` è¯•å›¾åœ¨ `let a` åˆå§‹åŒ– `a` ä¹‹å‰ä½¿ç”¨è¯¥å˜é‡ï¼ˆå…¶ä½œç”¨åŸŸåœ¨ `{ .. }` å†…ï¼‰ï¼Œè¿™é‡Œå°±æ˜¯ `a` çš„ TDZï¼Œä¼šäº§ç”Ÿé”™è¯¯ã€‚\n\næœ‰æ„æ€çš„æ˜¯ï¼Œå¯¹æœªå£°æ˜å˜é‡ä½¿ç”¨ typeof ä¸ä¼šäº§ç”Ÿé”™è¯¯ï¼ˆå‚è§ç¬¬ 1 ç« ï¼‰ï¼Œä½†åœ¨ TDZ ä¸­å´ä¼šæŠ¥é”™ï¼š\n\n```js\n{\n  typeof a; // undefined\n  typeof b; // ReferenceError! (TDZ)\n  let b;\n}\n```\n\n## å›è°ƒ\n\n### çœç‚¹å›è°ƒ\n\næ„é€ ä¸€ä¸ªè¶…æ—¶éªŒè¯å·¥å…·ï¼š\n\n```js\nfunction timeoutify(fn, delay) {\n  var intv = setTimeout(function() {\n    intv = null\n    fn(new Error('Timeout!'))\n  }, delay)\n\n  return function() {\n    // è¿˜æ²¡æœ‰è¶…æ—¶ï¼Ÿ\n    if (intv) {\n      clearTimeout(intv)\n      fn.apply(this, arguments)\n    }\n  }\n}\n```\n\nä»¥ä¸‹æ˜¯ä½¿ç”¨æ–¹å¼ï¼š\n\n```js\n// ä½¿ç”¨ â€˜error-first é£æ ¼â€™ å›è°ƒè®¾è®¡\nfunction foo(err, data) {\n  if (err) {\n    console.error(err)\n  }\n  else {\n    console.log(data)\n  }\n}\n\najax('http://some.url.1', timeoutify(foo, 500))\n```\n\nå¦‚æœä½ ä¸ç¡®å®šå…³æ³¨çš„ API ä¼šä¸ä¼šæ°¸è¿œå¼‚æ­¥æ‰§è¡Œæ€ä¹ˆåŠå‘¢ï¼Ÿå¯ä»¥åˆ›å»ºä¸€ä¸ªç±»ä¼¼äºè¿™ä¸ªâ€œéªŒè¯æ¦‚å¿µâ€ç‰ˆæœ¬çš„ `asyncify(..)` å·¥å…·ï¼š\n\n```js\nfunction asyncify(fn) {\n  var orig_fn = fn,\n    intv = setTimeout(function() {\n      intv = null\n      if (fn) fn()\n    }, 0)\n\n  fn = null\n\n  return function() {\n    // è§¦å‘å¤ªå¿«ï¼Œåœ¨å®šæ—¶å™¨intvè§¦å‘æŒ‡ç¤ºå¼‚æ­¥è½¬æ¢å‘ç”Ÿä¹‹å‰ï¼Ÿ\n    if (intv) {\n      fn = orig_fn.bind.apply(\n        orig_fn,\n        // æŠŠå°è£…å™¨çš„thisæ·»åŠ åˆ°bind(..)è°ƒç”¨çš„å‚æ•°ä¸­ï¼Œ\n        // ä»¥åŠå…‹é‡ŒåŒ–ï¼ˆcurryingï¼‰æ‰€æœ‰ä¼ å…¥å‚æ•°\n        [this].concat([].slice.call(arguments))\n      )\n    }\n    // å·²ç»æ˜¯å¼‚æ­¥\n    else {\n      // è°ƒç”¨åŸæ¥çš„å‡½æ•°\n      orig_fn.apply(this, arguments)\n    }\n  }\n}\n```\n\nå¯ä»¥åƒè¿™æ ·ä½¿ç”¨ `asyncify(..)`ï¼š\n\n```js\nfunction result(data) {\n  console.log(a)\n}\n\nvar a = 0\n\najax('..pre-cached-url..', asyncify(result))\na++\n```\n\nä¸ç®¡è¿™ä¸ª Ajax è¯·æ±‚å·²ç»åœ¨ç¼“å­˜ä¸­å¹¶è¯•å›¾å¯¹å›è°ƒç«‹å³è°ƒç”¨ï¼Œè¿˜æ˜¯è¦ä»ç½‘ç»œä¸Šå–å¾—ï¼Œè¿›è€Œåœ¨å°†æ¥å¼‚æ­¥å®Œæˆï¼Œè¿™æ®µä»£ç æ€»æ˜¯ä¼šè¾“å‡º 1ï¼Œè€Œä¸æ˜¯ 0â€”â€”result(..) åªèƒ½å¼‚æ­¥è°ƒç”¨ï¼Œè¿™æ„å‘³ç€ a++ æœ‰æœºä¼šåœ¨ result(..) ä¹‹å‰è¿è¡Œã€‚\n\n## Promise\n\n### Promise ä¿¡ä»»é—®é¢˜\n\n#### å›è°ƒæœªè°ƒç”¨\n\næä¾›ä¸€ä¸ªè¶…æ—¶å¤„ç†çš„è§£å†³æ–¹æ¡ˆï¼š\n\n```js\n// ç”¨äºè¶…æ—¶ä¸€ä¸ªPromiseçš„å·¥å…·\nfunction timeoutPromise(delay) {\n  return new Promise(function(resolve, reject) {\n    setTimeout(function() {\n      reject('Timeout!')\n    }, delay)\n  })\n}\n\n// è®¾ç½®foo()è¶…æ—¶\nPromise.race([\n  foo(),\n  timeoutPromise(3000)\n])\n.then(\n  function() {\n    // foo(..)åŠæ—¶å®Œæˆï¼\n  },\n  function(err) {\n    // æˆ–è€…foo()è¢«æ‹’ç»ï¼Œæˆ–è€…åªæ˜¯æ²¡èƒ½æŒ‰æ—¶å®Œæˆ\n \t// æŸ¥çœ‹erræ¥äº†è§£æ˜¯å“ªç§æƒ…å†µ\n  }\n)\n```\n\n### é“¾å¼æµ\n\nä¸ºäº†è¿›ä¸€æ­¥é˜é‡Šé“¾æ¥ï¼Œè®©æˆ‘ä»¬æŠŠå»¶è¿Ÿ Promise åˆ›å»ºï¼ˆæ²¡æœ‰å†³è®®æ¶ˆæ¯ï¼‰è¿‡ç¨‹ä¸€èˆ¬åŒ–åˆ°ä¸€ä¸ªå·¥å…·ä¸­ï¼Œä»¥ä¾¿åœ¨å¤šä¸ªæ­¥éª¤ä¸­å¤ç”¨ï¼š\n\n```js\nfunction delay(time) {\n  return new Promise(function(resolve, reject) {\n    setTimeout(resolve, time)\n  })\n}\n\ndelay(100) // æ­¥éª¤1\n  .then(function STEP2() {\n    console.log(\"step 2 (after 100ms)\")\n    return delay(200)\n  })\n  .then(function STEP3() {\n    console.log(\"step 3 (after another 200ms)\")\n  })\n  .then(function STEP4() {\n    console.log(\"step 4 (next Job)\")\n    return delay(50)\n  })\n  .then(function STEP5() {\n    console.log(\"step 5 (after another 50ms)\")\n  })\n```\n\nè°ƒç”¨ `delay(200)` åˆ›å»ºäº†ä¸€ä¸ªå°†åœ¨ 200ms åå®Œæˆçš„ promiseï¼Œç„¶åæˆ‘ä»¬ä»ç¬¬ä¸€ä¸ª `then(..)` å®Œæˆå›è°ƒä¸­è¿”å›è¿™ä¸ª promiseï¼Œè¿™ä¼šå¯¼è‡´ç¬¬äºŒä¸ª `then(..)` çš„ promise ç­‰å¾…è¿™ä¸ª 200ms çš„ promiseã€‚\n\n### Promise å±€é™æ€§\n\n#### é¡ºåºé”™è¯¯å¤„ç†\n\nPromise çš„è®¾è®¡å±€é™æ€§ï¼ˆé“¾å¼è°ƒç”¨ï¼‰é€ æˆäº†ä¸€ä¸ªè®©äººå¾ˆå®¹æ˜“ä¸­æ‹›çš„é™·é˜±ï¼Œå³ Promise é“¾ä¸­çš„é”™è¯¯å¾ˆå®¹æ˜“è¢«æ— æ„ä¸­é»˜é»˜å¿½ç•¥æ‰ã€‚\n\nå…³äº Promise é”™è¯¯ï¼Œè¿˜æœ‰å…¶ä»–éœ€è¦è€ƒè™‘çš„åœ°æ–¹ã€‚ç”±äºä¸€ä¸ª Promise é“¾ä»…ä»…æ˜¯è¿æ¥åˆ°ä¸€èµ·çš„æˆå‘˜ Promiseï¼Œæ²¡æœ‰æŠŠæ•´ä¸ªé“¾æ ‡è¯†ä¸ºä¸€ä¸ªä¸ªä½“çš„å®ä½“ï¼Œè¿™æ„å‘³ç€æ²¡æœ‰å¤–éƒ¨æ–¹æ³•å¯ä»¥ç”¨äºè§‚å¯Ÿå¯èƒ½å‘ç”Ÿçš„é”™è¯¯ã€‚\n\nå¦‚æœæ„å»ºäº†ä¸€ä¸ªæ²¡æœ‰é”™è¯¯å¤„ç†å‡½æ•°çš„ Promise é“¾ï¼Œé“¾ä¸­ä»»ä½•åœ°æ–¹çš„ä»»ä½•é”™è¯¯éƒ½ä¼šåœ¨é“¾ä¸­ä¸€ç›´ä¼ æ’­ä¸‹å»ï¼Œç›´åˆ°åœ¨æŸä¸ªæ­¥éª¤æ³¨å†Œæ‹’ç»å¤„ç†å‡½æ•°ã€‚åœ¨è¿™ä¸ªç‰¹å®šçš„ä¾‹å­ä¸­ï¼Œåªè¦æœ‰ä¸€ä¸ªæŒ‡å‘é“¾ä¸­æœ€åä¸€ä¸ª promise çš„å¼•ç”¨å°±è¶³å¤Ÿäº†ï¼ˆä¸‹é¢ä»£ç ä¸­çš„ pï¼‰ï¼Œå› ä¸ºä½ å¯ä»¥åœ¨é‚£é‡Œæ³¨å†Œæ‹’ç»å¤„ç†å‡½æ•°ï¼Œè€Œä¸”è¿™ä¸ªå¤„ç†å‡½æ•°èƒ½å¤Ÿå¾—åˆ°æ‰€æœ‰ä¼ æ’­è¿‡æ¥çš„é”™è¯¯çš„é€šçŸ¥ï¼š\n\n```js\n// foo(..), STEP2(..)ä»¥åŠSTEP3(..)éƒ½æ˜¯æ”¯æŒpromiseçš„å·¥å…·\nvar p = foo(42)\n  .then(STEP2)\n  .then(STEP3);\n```\n\nè™½ç„¶è¿™é‡Œå¯èƒ½ä»¤äººè¿·æƒ‘ï¼Œä½†æ˜¯è¿™é‡Œçš„ `p` å¹¶ä¸æŒ‡å‘é“¾ä¸­çš„ç¬¬ä¸€ä¸ª promiseï¼ˆè°ƒç”¨ `foo(42)` äº§ç”Ÿçš„é‚£ä¸€ä¸ªï¼‰ï¼Œè€Œæ˜¯æŒ‡å‘æœ€åä¸€ä¸ª promiseï¼Œå³æ¥è‡ªè°ƒç”¨ `then(STEP3)` çš„é‚£ä¸€ä¸ªã€‚\n\nè¿˜æœ‰ï¼Œè¿™ä¸ª Promise é“¾ä¸­çš„ä»»ä½•ä¸€ä¸ªæ­¥éª¤éƒ½æ²¡æœ‰æ˜¾å¼åœ°å¤„ç†è‡ªèº«é”™è¯¯ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥åœ¨ `p` ä¸Šæ³¨å†Œä¸€ä¸ªæ‹’ç»é”™è¯¯å¤„ç†å‡½æ•°ï¼Œå¯¹äºé“¾ä¸­ä»»ä½•ä½ç½®å‡ºç°çš„ä»»ä½•é”™è¯¯ï¼Œè¿™ä¸ªå¤„ç†å‡½æ•°éƒ½ä¼šå¾—åˆ°é€šçŸ¥ï¼š\n\n```js\np.catch(handleErrors); \n```\n\nä½†æ˜¯ï¼Œå¦‚æœé“¾ä¸­çš„ä»»ä½•ä¸€ä¸ªæ­¥éª¤äº‹å®ä¸Šè¿›è¡Œäº†è‡ªèº«çš„é”™è¯¯å¤„ç†ï¼ˆå¯èƒ½ä»¥éšè—æˆ–æŠ½è±¡çš„ä¸å¯è§çš„æ–¹å¼ï¼‰ï¼Œé‚£ä½ çš„ `handleErrors(..)` å°±ä¸ä¼šå¾—åˆ°é€šçŸ¥ã€‚è¿™å¯èƒ½æ˜¯ä½ æƒ³è¦çš„â€”â€”æ¯•ç«Ÿè¿™æ˜¯ä¸€ä¸ªâ€œå·²å¤„ç†çš„æ‹’ç»â€â€”â€”ä½†ä¹Ÿå¯èƒ½å¹¶ä¸æ˜¯ã€‚ä¸èƒ½æ¸…æ™°å¾—åˆ°ï¼ˆå¯¹å…·ä½“æŸä¸€ä¸ªâ€œå·²ç»å¤„ç†â€çš„æ‹’ç»çš„ï¼‰é”™è¯¯é€šçŸ¥ä¹Ÿæ˜¯ä¸€ä¸ªç¼ºé™·ï¼Œå®ƒé™åˆ¶äº†æŸäº›ç”¨ä¾‹çš„åŠŸèƒ½ã€‚\n\nåŸºæœ¬ä¸Šï¼Œè¿™ç­‰åŒäº try..catch å­˜åœ¨çš„å±€é™ï¼štry..catch å¯èƒ½æ•è·ä¸€ä¸ªå¼‚å¸¸å¹¶ç®€å•åœ°åæ‰å®ƒã€‚æ‰€ä»¥è¿™å¹¶ä¸æ˜¯ Promise ç‹¬æœ‰çš„å±€é™æ€§ï¼Œä½†å¯èƒ½æ˜¯æˆ‘ä»¬å¸Œæœ›ç»•è¿‡çš„é™·é˜±ã€‚\n\né—æ†¾çš„æ˜¯ï¼Œå¾ˆå¤šæ—¶å€™å¹¶æ²¡æœ‰ä¸º Promise é“¾åºåˆ—çš„ä¸­é—´æ­¥éª¤ä¿ç•™çš„å¼•ç”¨ã€‚å› æ­¤ï¼Œæ²¡æœ‰è¿™æ ·çš„å¼•ç”¨ï¼Œä½ å°±æ— æ³•å…³è”é”™è¯¯å¤„ç†å‡½æ•°æ¥å¯é åœ°æ£€æŸ¥é”™è¯¯ã€‚\n\n#### å•ä¸€å€¼\n\næ ¹æ®å®šä¹‰ï¼ŒPromise åªèƒ½æœ‰ä¸€ä¸ªå®Œæˆå€¼æˆ–ä¸€ä¸ªæ‹’ç»ç†ç”±ã€‚åœ¨ç®€å•çš„ä¾‹å­ä¸­ï¼Œè¿™ä¸æ˜¯ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯åœ¨æ›´å¤æ‚çš„åœºæ™¯ä¸­ï¼Œä½ å¯èƒ½å°±ä¼šå‘ç°è¿™æ˜¯ä¸€ç§å±€é™äº†ã€‚\n\nä¸€èˆ¬çš„å»ºè®®æ˜¯æ„é€ ä¸€ä¸ªå€¼å°è£…ï¼ˆæ¯”å¦‚ä¸€ä¸ªå¯¹è±¡æˆ–æ•°ç»„ï¼‰æ¥ä¿æŒè¿™æ ·çš„å¤šä¸ªä¿¡æ¯ã€‚è¿™ä¸ªè§£å†³æ–¹æ¡ˆå¯ä»¥èµ·ä½œç”¨ï¼Œä½†è¦åœ¨ Promise é“¾ä¸­çš„æ¯ä¸€æ­¥éƒ½è¿›è¡Œå°è£…å’Œè§£å°ï¼Œå°±ååˆ†ä¸‘é™‹å’Œç¬¨é‡äº†ã€‚\n\n1. åˆ†è£‚å€¼\n\næœ‰æ—¶å€™ï¼Œä½ å¯ä»¥æŠŠè¿™ä¸€ç‚¹ï¼Œå½“ä½œæç¤ºä½ åº”è¯¥æŠŠé—®é¢˜åˆ†è§£ä¸ºä¸¤ä¸ªæˆ–æ›´å¤š Promise çš„ä¿¡å·ã€‚\n\nè®¾æƒ³ä½ æœ‰ä¸€ä¸ªå·¥å…· `foo(..)`ï¼Œå®ƒå¯ä»¥å¼‚æ­¥äº§ç”Ÿä¸¤ä¸ªå€¼ï¼ˆx å’Œ yï¼‰ï¼š\n\n```js\nfunction getY(x) { \n  return new Promise(function(resolve, reject){ \n    setTimeout(function(){ \n      resolve((3 * x) - 1); \n    }, 100); \n  });\n} \n\nfunction foo(bar, baz) { \n  var x = bar * baz; \n  return getY(x).then(function(y){ \n    // æŠŠä¸¤ä¸ªå€¼å°è£…åˆ°å®¹å™¨ä¸­\n    return [x, y]; \n  }); \n} \n\nfoo(10, 20).then(function(msgs){ \n  var x = msgs[0]; \n  var y = msgs[1]; \n  console.log(x, y); // 200 599 \n}); \n```\n\né¦–å…ˆï¼Œæˆ‘ä»¬é‡æ–°ç»„ç»‡ä¸€ä¸‹ `foo(..)` è¿”å›çš„å†…å®¹ï¼Œè¿™æ ·å°±ä¸å†éœ€è¦æŠŠ `x` å’Œ `y` å°è£…åˆ°ä¸€ä¸ªæ•°ç»„å€¼ä¸­ä»¥é€šè¿‡ promise ä¼ è¾“ã€‚å–è€Œä»£ä¹‹çš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ¯ä¸ªå€¼å°è£…åˆ°å®ƒè‡ªå·±çš„ promiseï¼š\n\n```js\nfunction foo(bar, baz) { \n  var x = bar * baz; \n  \n  // è¿”å›ä¸¤ä¸ª promise\n  return [ \n    Promise.resolve(x), \n    getY(x) \n  ]; \n} \n\nPromise.all( \n  foo(10, 20) \n).then(function(msgs){ \n  var x = msgs[0]; \n  var y = msgs[1]; \n  console.log(x, y); \n}); \n```\n\nä¸€ä¸ª promise æ•°ç»„çœŸçš„è¦ä¼˜äºä¼ é€’ç»™å•ä¸ª promise çš„ä¸€ä¸ªå€¼æ•°ç»„å—ï¼Ÿä»è¯­æ³•çš„è§’åº¦æ¥è¯´ï¼Œè¿™ç®—ä¸ä¸Šæ˜¯ä¸€ä¸ªæ”¹è¿›ã€‚\n\nä½†æ˜¯ï¼Œè¿™ç§æ–¹æ³•æ›´ç¬¦åˆ Promise çš„è®¾è®¡ç†å¿µã€‚å¦‚æœä»¥åéœ€è¦é‡æ„ä»£ç æŠŠå¯¹ `x` å’Œ `y` çš„è®¡ç®—åˆ†å¼€ï¼Œè¿™ç§æ–¹æ³•å°±ç®€å•å¾—å¤šã€‚ç”±è°ƒç”¨ä»£ç æ¥å†³å®šå¦‚ä½•å®‰æ’è¿™ä¸¤ä¸ª promiseï¼Œè€Œä¸æ˜¯æŠŠè¿™ç§ç»†èŠ‚æ”¾åœ¨ `foo(..)` å†…éƒ¨æŠ½è±¡ï¼Œè¿™æ ·æ›´æ•´æ´ä¹Ÿæ›´çµæ´»ã€‚è¿™é‡Œä½¿ç”¨äº† `Promise.all([ .. ])`ï¼Œå½“ç„¶ï¼Œè¿™å¹¶ä¸æ˜¯å”¯ä¸€çš„é€‰æ‹©ã€‚\n\n2. ä¼ é€’å‚æ•°\n\n`var x = ..` å’Œ `var y = ..` èµ‹å€¼æ“ä½œä»ç„¶æ˜¯éº»çƒ¦çš„å¼€é”€ã€‚æˆ‘ä»¬å¯ä»¥åœ¨è¾…åŠ©å·¥å…·ä¸­é‡‡ç”¨æŸç§å‡½æ•°æŠ€å·§ï¼š\n\n```js\nfunction spread(fn) { \n  return Function.apply.bind(fn, null); \n} \n\nPromise.all( \n  foo(10, 20) \n).then(spread(function(x, y){ \n  console.log(x, y); // 200 599 \n})) \n```\n\nè¿™æ ·ä¼šå¥½ä¸€ç‚¹ï¼å½“ç„¶ï¼Œä½ å¯ä»¥æŠŠè¿™ä¸ªå‡½æ•°æˆæ³•åœ¨çº¿åŒ–ï¼Œä»¥é¿å…é¢å¤–çš„è¾…åŠ©å·¥å…·ï¼š\n\n```js\nPromise.all( \n  foo(10, 20) \n).then(Function.apply.bind( \n  function(x, y){ \n    console.log(x, y); // 200 599 \n  },\n  null\n)); \n```\n\nè¿™äº›æŠ€å·§å¯èƒ½å¾ˆçµå·§ï¼Œä½† ES6 ç»™å‡ºäº†ä¸€ä¸ªæ›´å¥½çš„ç­”æ¡ˆï¼šè§£æ„ã€‚æ•°ç»„è§£æ„èµ‹å€¼å½¢å¼çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š\n\n```js\nPromise.all( \n  foo(10, 20) \n).then(function(msgs){ \n  var [x, y] = msgs; \n  console.log(x, y); // 200 599 \n}); \n```\n\nä¸è¿‡æœ€å¥½çš„æ˜¯ï¼ŒES6 æä¾›äº†æ•°ç»„å‚æ•°è§£æ„å½¢å¼ï¼š\n\n```js\nPromise.all( \n  foo(10, 20) \n) \n.then(function([x, y]){ \n  console.log(x, y); // 200 599 \n}); \n```\n\nç°åœ¨ï¼Œæˆ‘ä»¬ç¬¦åˆäº†â€œæ¯ä¸ª Promise ä¸€ä¸ªå€¼â€çš„ç†å¿µï¼Œå¹¶ä¸”åˆå°†é‡å¤æ ·æ¿ä»£ç é‡ä¿æŒåœ¨äº†æœ€å°ï¼\n\n#### å•å†³è®®\n\nPromise æœ€æœ¬è´¨çš„ä¸€ä¸ªç‰¹å¾æ˜¯ï¼šPromise åªèƒ½è¢«å†³è®®ä¸€æ¬¡ï¼ˆå®Œæˆæˆ–æ‹’ç»ï¼‰ã€‚åœ¨è®¸å¤šå¼‚æ­¥æƒ…å†µä¸­ï¼Œä½ åªä¼šè·å–ä¸€ä¸ªå€¼ä¸€æ¬¡ï¼Œæ‰€ä»¥è¿™å¯ä»¥å·¥ä½œè‰¯å¥½ã€‚\n\nä½†æ˜¯ï¼Œè¿˜æœ‰å¾ˆå¤šå¼‚æ­¥çš„æƒ…å†µé€‚åˆå¦ä¸€ç§æ¨¡å¼â€”â€”ä¸€ç§ç±»ä¼¼äºäº‹ä»¶æˆ–æ•°æ®æµçš„æ¨¡å¼ã€‚åœ¨è¡¨é¢ä¸Šï¼Œç›®å‰è¿˜ä¸æ¸…æ¥š Promise èƒ½ä¸èƒ½å¾ˆå¥½ç”¨äºè¿™æ ·çš„ç”¨ä¾‹ï¼Œå¦‚æœä¸æ˜¯å®Œå…¨ä¸å¯ç”¨çš„è¯ã€‚å¦‚æœä¸åœ¨ Promise ä¹‹ä¸Šæ„å»ºæ˜¾è‘—çš„æŠ½è±¡ï¼ŒPromise è‚¯å®šå®Œå…¨æ— æ³•æ”¯æŒå¤šå€¼å†³è®®å¤„ç†ã€‚\n\nè®¾æƒ³è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼šä½ å¯èƒ½è¦å¯åŠ¨ä¸€ç³»åˆ—å¼‚æ­¥æ­¥éª¤ä»¥å“åº”æŸç§å¯èƒ½å¤šæ¬¡å‘ç”Ÿçš„æ¿€åŠ±ï¼ˆå°±åƒæ˜¯äº‹ä»¶ï¼‰ï¼Œæ¯”å¦‚æŒ‰é’®ç‚¹å‡»ã€‚\n\nè¿™æ ·å¯èƒ½ä¸ä¼šæŒ‰ç…§ä½ çš„æœŸæœ›å·¥ä½œï¼š\n\n```js\n// click(..) æŠŠ\"click\"äº‹ä»¶ç»‘å®šåˆ°ä¸€ä¸ª DOM å…ƒç´ \n// request(..) æ˜¯å‰é¢å®šä¹‰çš„æ”¯æŒ Promise çš„ Ajax \nvar p = new Promise(function(resolve, reject){ \n  click(\"#mybtn\", resolve); \n}); \n\np.then(function(evt){ \n  var btnID = evt.currentTarget.id; \n  return request(\"http://some.url.1/?id=\" + btnID); \n}).then(function(text){ \n  console.log(text); \n}); \n```\n\nåªæœ‰åœ¨ä½ çš„åº”ç”¨åªéœ€è¦å“åº”æŒ‰é’®ç‚¹å‡»ä¸€æ¬¡çš„æƒ…å†µä¸‹ï¼Œè¿™ç§æ–¹å¼æ‰èƒ½å·¥ä½œã€‚å¦‚æœè¿™ä¸ªæŒ‰é’®è¢«ç‚¹å‡»äº†ç¬¬äºŒæ¬¡çš„è¯ï¼Œpromise p å·²ç»å†³è®®ï¼Œå› æ­¤ç¬¬äºŒä¸ª `resolve(..)` è°ƒç”¨å°±ä¼šè¢«å¿½ç•¥ã€‚\n\nå› æ­¤ï¼Œä½ å¯èƒ½éœ€è¦è½¬åŒ–è¿™ä¸ªèŒƒä¾‹ï¼Œä¸ºæ¯ä¸ªäº‹ä»¶çš„å‘ç”Ÿåˆ›å»ºä¸€æ•´ä¸ªæ–°çš„ Promise é“¾ï¼š\n\n```js\nclick(\"#mybtn\", function(evt){ \n  var btnID = evt.currentTarget.id; \n  request(\"http://some.url.1/?id=\" + btnID).then(function(text){ \n    console.log(text); \n  }); \n}); \n```\n\nè¿™ç§æ–¹æ³•å¯ä»¥å·¥ä½œï¼Œå› ä¸ºé’ˆå¯¹è¿™ä¸ªæŒ‰é’®ä¸Šçš„æ¯ä¸ª \"click\" äº‹ä»¶éƒ½ä¼šå¯åŠ¨ä¸€æ•´ä¸ªæ–°çš„ Promise åºåˆ—ã€‚\n\nç”±äºéœ€è¦åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­å®šä¹‰æ•´ä¸ª Promise é“¾ï¼Œè¿™å¾ˆä¸‘é™‹ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿™ä¸ªè®¾è®¡åœ¨æŸç§ç¨‹åº¦ä¸Šç ´åäº†å…³æ³¨ç‚¹ä¸åŠŸèƒ½åˆ†ç¦»ï¼ˆSoCï¼‰çš„æ€æƒ³ã€‚ä½ å¾ˆå¯èƒ½æƒ³è¦æŠŠäº‹ä»¶å¤„ç†å‡½æ•°çš„å®šä¹‰å’Œå¯¹äº‹ä»¶çš„å“åº”ï¼ˆé‚£ä¸ª Promise é“¾ï¼‰çš„å®šä¹‰æ”¾åœ¨ä»£ç ä¸­çš„ä¸åŒä½ç½®ã€‚å¦‚æœæ²¡æœ‰è¾…åŠ©æœºåˆ¶çš„è¯ï¼Œåœ¨è¿™ç§æ¨¡å¼ä¸‹å¾ˆéš¾è¿™æ ·å®ç°ã€‚\n\n## æ„Ÿè°¢\n\nå¦‚æœæœ¬æ–‡å¯¹ä½ æœ‰å¸®åŠ©ï¼Œå°±ç‚¹ä¸ªèµæ”¯æŒä¸‹å§ï¼æ„Ÿè°¢é˜…è¯»ã€‚", "user_name": "Liam__", "description": "", "got_view_count": 5818, "category_name": "é˜…è¯»", "ctime": 1457483895}
{"tag_name": "åç«¯", "concern_user_count": 364361, "user_id": "958429871749192", "title": "è¢«æˆ‘ç”¨çƒ‚çš„DEBUGè°ƒè¯•æŠ€å·§ï¼Œä¸“æ²»å„ç§æœç´¢ä¸åˆ°çš„é—®é¢˜ï¼", "mark_content": "> SpringBootå®æˆ˜ç”µå•†é¡¹ç›®mallï¼ˆ35k+starï¼‰åœ°å€ï¼š[https://github.com/macrozheng/mall](https://github.com/macrozheng/mall)\n\n## æ‘˜è¦\n\nåœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°é—®é¢˜ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šä½¿ç”¨æœç´¢å¼•æ“æ¥æŸ¥æ‰¾é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼Œç„¶åäºˆä»¥è§£å†³ã€‚ä½†æ˜¯æœ‰äº›é—®é¢˜ä¸€æ—¶åŠä¼šæœç´¢ä¸åˆ°è§£å†³æ–¹æ¡ˆï¼Œéœ€è¦è‡ªå·±å»è§£å†³ã€‚è¿™é‡Œåˆ†äº«ä¸‹æˆ‘è§£å†³è¿™äº›é—®é¢˜ä½¿ç”¨çš„è°ƒè¯•æŠ€å·§ï¼Œç»™å¤§å®¶ä¸€ä¸ªè§£å†³é—®é¢˜çš„æ–°æ€è·¯ï¼\n\n## é—®é¢˜æè¿°\n\nåœ¨[ã€Šæˆ‘æ‰’äº†åŠå¤©æºç ï¼Œç»ˆäºæ‰¾åˆ°äº†Oauth2è‡ªå®šä¹‰å¤„ç†ç»“æœçš„æœ€ä½³æ–¹æ¡ˆï¼ã€‹](https://juejin.im/post/6857296054392471559)ä¸€æ–‡ä¸­ï¼Œå½“JWTä»¤ç‰Œè¿‡æœŸæˆ–è€…ç­¾åä¸æ­£ç¡®æ—¶ï¼Œæˆ‘ä»¬æƒ³è¦è‡ªå®šä¹‰ç½‘å…³è®¤è¯å¤±è´¥çš„è¿”å›ç»“æœã€‚è¿™ä¸ªé—®é¢˜è§£å†³èµ·æ¥å¾ˆç®€å•ï¼Œåªéœ€ä¿®æ”¹ä¸€è¡Œä»£ç å³å¯ã€‚ä½†æ˜¯å½“æ—¶æŸ¥æ‰¾è§£å†³æ–¹æ¡ˆç¡®å®èŠ±è´¹äº†ä¸€ç•ªåŠŸå¤«ï¼Œé€šè¿‡DEBUGæºç æ‰æ‰¾åˆ°äº†Spring Securityä¸­æä¾›çš„è‡ªå®šä¹‰é…ç½®ï¼Œè§£å†³äº†è¯¥é—®é¢˜ã€‚ä¸‹é¢è®²è®²æˆ‘æ˜¯å¦‚ä½•é€šè¿‡DEBUGæºç æ‰¾åˆ°è¿™ä¸ªè§£å†³æ–¹æ¡ˆçš„ï¼\n\n## è§£å†³è¿‡ç¨‹\n\n- é¦–å…ˆæˆ‘ä»¬éœ€è¦æ‰¾åˆ°ä¸€ä¸ªåˆ‡å…¥ç‚¹ï¼Œæ—¢ç„¶é—®é¢˜æ˜¯ç”±äºJWTä»¤ç‰Œè¿‡æœŸæˆ–è€…ç­¾åä¸æ­£ç¡®æ‰äº§ç”Ÿçš„ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“æƒ³åˆ°`RSASSAVerifier`è¿™ä¸ªå…³é”®ç±»ï¼Œå®ƒçš„`verify()`æ–¹æ³•æ˜¯ç”¨æ¥éªŒè¯ç­¾åæ˜¯å¦æ­£ç¡®çš„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¯¥æ–¹æ³•ä¸Šé¢æ‰“ä¸ªæ–­ç‚¹DEBUGä¸€ä¸‹ï¼Œå‘ç°ç¨‹åºæ‰§è¡Œè¿‡ç¨‹æœç„¶ä¼šç»è¿‡è¿™é‡Œï¼Œè¦æ˜¯ç­¾åä¸æ­£ç¡®ä¼šç›´æ¥è¿”å›false;\n\n![](http://img.macrozheng.com/mall/blog/my_debug_skill_01.png)\n\n- è¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥æŸ¥ä¸‹å †æ ˆä¿¡æ¯ï¼Œäº†è§£ä¸‹è¿™æ¬¡è°ƒç”¨çš„æ•´ä¸ªè¿‡ç¨‹ï¼Œå¯ä»¥çœ‹åˆ°çº¢æ¡†ä»¥ä¸‹çš„è°ƒç”¨éƒ½æ˜¯WebFluxé‡Œé¢çš„è°ƒç”¨ï¼Œæ²¡æœ‰å‚è€ƒæ„ä¹‰ï¼Œæ‰€ä»¥è°ƒç”¨æœ€æ—©æ˜¯ä»`NimbusReactiveJwtDecoder`ç±»å¼€å§‹çš„ï¼›\n\n![](http://img.macrozheng.com/mall/blog/my_debug_skill_02.png)\n\n- æˆ‘ä»¬æœç´¢ä¸‹`NimbusReactiveJwtDecoder`åœ¨å“ªé‡Œè¢«ä½¿ç”¨åˆ°äº†ï¼Œå¯ä»¥æ‰¾åˆ°åˆä¸€ä¸ªå…³é”®ç±»`ServerHttpSecurity`ï¼Œæˆ‘ä»¬åœ¨ç½‘å…³çš„å®‰å…¨é…ç½®`ResourceServerConfig`ä¸­æ›¾ç»ç”¨åˆ°è¿‡å®ƒï¼ŒçŒœæƒ³ä¸‹å¦‚æœSpring Securityæä¾›äº†è‡ªå®šä¹‰é…ç½®ï¼Œé‚£ä¼°è®¡å°±åœ¨è¿™ä¸ªç±»é‡Œé¢äº†ï¼›\n\n![](http://img.macrozheng.com/mall/blog/my_debug_skill_03.png)\n\n- æŸ¥çœ‹ä¸‹`ServerHttpSecurity`çš„ç±»æ³¨é‡Šï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°å®ƒç›¸å½“äºWebFluxç‰ˆæœ¬çš„Spring Securityé…ç½®ï¼›\n\n```java\n/**\n * A {@link ServerHttpSecurity} is similar to Spring Security's {@code HttpSecurity} but for WebFlux.\n * It allows configuring web based security for specific http requests. By default it will be applied\n * to all requests, but can be restricted using {@link #securityMatcher(ServerWebExchangeMatcher)} or\n * other similar methods.\n **/\n```\n\n- åœ¨æˆ‘ä»¬ç½‘å…³çš„`ResourceServerConfig`ä¸­ï¼Œæˆ‘ä»¬æ›¾ç»è°ƒç”¨è¿‡`ServerHttpSecurity`çš„`build()`æ–¹æ³•ï¼Œç”¨äºç”Ÿæˆ`SecurityWebFilterChain`;\n\n![](http://img.macrozheng.com/mall/blog/my_debug_skill_04.png)\n\n- è®©æˆ‘ä»¬çœ‹çœ‹è¿™ä¸ª`build()`æ–¹æ³•å¹²äº†ç‚¹å•¥ï¼Œå…¶ä¸­æœ‰æ®µæ¯”è¾ƒå…³é”®çš„æ˜¯å®ƒè°ƒç”¨äº†`OAuth2ResourceServerSpec`ç±»çš„`configure()`æ–¹æ³•ï¼›\n\n![](http://img.macrozheng.com/mall/blog/my_debug_skill_05.png)\n\n- è€Œ`OAuth2ResourceServerSpec`ç±»çš„`configure()`æ–¹æ³•åˆè°ƒç”¨äº†`JwtSpec`ç±»çš„`configure()`æ–¹æ³•ï¼›\n\n![](http://img.macrozheng.com/mall/blog/my_debug_skill_06.png)\n\n- è¿™ä¸ª`JwtSpec`å¯¹è±¡æ˜¯ä¸ä¼šä¸ºç©ºçš„ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨`ResourceServerConfig`ä¸­è°ƒç”¨äº†`OAuth2ResourceServerSpec`ç±»çš„`jwt()`æ–¹æ³•åˆ›å»ºäº†å®ƒï¼›\n\n![](http://img.macrozheng.com/mall/blog/my_debug_skill_07.png)\n\n- `JwtSpec`ç±»çš„`configure`æ–¹æ³•å¾ˆå…³é”®ï¼Œä½¿ç”¨è¿‡æ»¤å™¨æ¥è¿›è¡Œè®¤è¯æ˜¯Spring Securityå®ç°è®¤è¯çš„è€å¥—è·¯äº†ï¼Œäºæ˜¯æˆ‘ä»¬æ‰¾åˆ°äº†é»˜è®¤çš„è®¤è¯è¿‡æ»¤å™¨`BearerTokenAuthenticationWebFilter`ï¼›\n\n![](http://img.macrozheng.com/mall/blog/my_debug_skill_08.png)\n\n- `BearerTokenAuthenticationWebFilter`ä½¿ç”¨äº†`OAuth2ResourceServerSpec`ä¸­çš„`entryPoint`æ¥å¤„ç†è®¤è¯å¤±è´¥ï¼Œé»˜è®¤å®ç°ä¸º`BearerTokenServerAuthenticationEntryPoint`ï¼›\n\n![](http://img.macrozheng.com/mall/blog/my_debug_skill_09.png)\n\n- ä¹‹åæˆ‘ä»¬åœ¨`BearerTokenAuthenticationWebFilter`çš„`filter()`æ–¹æ³•ï¼Œ`BearerTokenServerAuthenticationEntryPoint`çš„`commence()`æ–¹æ³•ä¸Šåˆ†åˆ«æ‰“ä¸ªæ–­ç‚¹ï¼Œæ¥éªŒè¯ä¸‹ï¼Œè°ƒç”¨è¿‡ç¨‹ä¸­éƒ½ç»è¿‡äº†ï¼Œå®Œå…¨æ­£ç¡®ï¼›\n\n![](http://img.macrozheng.com/mall/blog/my_debug_skill_10.png)\n\n- ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åªè¦æŠŠé»˜è®¤çš„è®¤è¯å¤±è´¥å¤„ç†å™¨æ¢æˆæˆ‘ä»¬è‡ªå®šä¹‰çš„å°±è¡Œäº†ï¼Œç›´æ¥é€šè¿‡å¦‚ä¸‹ä»£ç æŠŠ`OAuth2ResourceServerSpec`ä¸­çš„`entryPoint`æ¥è®¾ç½®æˆè‡ªå®šä¹‰çš„å³å¯ã€‚\n\n```java\n/**\n * èµ„æºæœåŠ¡å™¨é…ç½®\n * Created by macro on 2020/6/19.\n */\n@AllArgsConstructor\n@Configuration\n@EnableWebFluxSecurity\npublic class ResourceServerConfig {\n    private final RestAuthenticationEntryPoint restAuthenticationEntryPoint;\n\n    @Bean\n    public SecurityWebFilterChain springSecurityFilterChain(ServerHttpSecurity http) {\n       //çœç•¥è‹¥å¹²ä»£ç ...\n       //è‡ªå®šä¹‰å¤„ç†JWTè¯·æ±‚å¤´è¿‡æœŸæˆ–ç­¾åé”™è¯¯çš„ç»“æœ\n       http.oauth2ResourceServer().authenticationEntryPoint(restAuthenticationEntryPoint);\n       //çœç•¥è‹¥å¹²ä»£ç ...\n       return http.build();\n    }\n}\n```\n\n## æ€»ç»“\n\nå¯¹äºä¸€æ—¶æ‰¾ä¸åˆ°è§£å†³æ–¹æ³•çš„é—®é¢˜ï¼Œæˆ‘æ¨èä½¿ç”¨DEBUGæºç çš„æ–¹å¼æ¥è§£å†³ã€‚é¦–å…ˆå¯»æ‰¾ä¸€ä¸ªçªç ´å£ï¼Œå¯ä»¥ä»ä½ ç†Ÿæ‚‰çš„ä¸€äº›ç±»ä¸­å»å¯»æ‰¾ä¸€ä¸ªå¿…å®šä¼šæ‰§è¡Œçš„æ–¹æ³•ï¼Œç„¶åæ‰“æ–­ç‚¹ï¼Œè¿›è¡ŒDEBUGï¼Œä»è°ƒç”¨çš„æ ˆä¿¡æ¯ä¸­æŸ¥æ‰¾å‡ºå…³é”®çš„ç±»ï¼Œä¹‹åé€šè¿‡è¿™äº›å…³é”®ç±»é¡ºè—¤æ‘¸ç“œå°±èƒ½æ‰¾è§£å†³æ–¹æ³•äº†ï¼\n\n## é¡¹ç›®æºç åœ°å€\n\nhttps://github.com/macrozheng/springcloud-learning/tree/master/micro-oauth2\n\n## æ¨èé˜…è¯»\n\n[Githubæ ‡æ˜Ÿ35K+ï¼ŒSpringBootï¼ˆ2.3.0ï¼‰ç”µå•†å®æˆ˜é¡¹ç›®ï¼Œå…¨å¥—æ•™ç¨‹æ— å¥—è·¯è·å–ï¼](https://www.yuque.com/macrozheng/github/ny150b)\n", "user_name": "MacroZheng", "description": "Javaåç«¯æŠ€æœ¯ | å…¬ä¼—å·ï¼šmacrozheng | Githubå¼€æºé¡¹ç›®mall(35k+star)", "got_view_count": 643187, "category_name": "åç«¯", "ctime": 1457483880}
{"tag_name": "é¢è¯•", "concern_user_count": 285351, "user_id": "3913917126415166", "title": "é¢è¯•è¿™ä¹ˆæ’©å‡†æ‹¿offerï¼ŒHashMapæ·±åº¦å­¦ä¹ ï¼Œæ‰°åŠ¨å‡½æ•°ã€è´Ÿè½½å› å­ã€æ‰©å®¹æ‹†åˆ†ï¼ŒåŸç†å’Œå®è·µéªŒè¯ï¼Œè®©æ‡‚äº†å°±æ˜¯çœŸçš„æ‡‚ï¼", "mark_content": "ä½œè€…ï¼šå°å‚…å“¥\n<br/>åšå®¢ï¼š[https://bugstack.cn](https://bugstack.cn)\n\n>æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼ğŸ˜„\n\n## ä¸€ã€å‰è¨€\n\nå¾—ç›Šäº`Doug Lea`è€çˆ·å­çš„æ“åˆ€ï¼Œè®©`HashMap`æˆä¸ºä½¿ç”¨å’Œé¢è¯•æœ€é¢‘ç¹çš„APIï¼Œæ²¡åŠæ³•è®¾è®¡çš„å¤ªä¼˜ç§€äº†ï¼\n\nHashMap æœ€æ—©å‡ºç°åœ¨ JDK 1.2ä¸­ï¼Œåº•å±‚åŸºäºæ•£åˆ—ç®—æ³•å®ç°ã€‚HashMap å…è®¸ null é”®å’Œ null å€¼ï¼Œåœ¨è®¡ç®—å“ˆé”®çš„å“ˆå¸Œå€¼æ—¶ï¼Œnull é”®å“ˆå¸Œå€¼ä¸º 0ã€‚HashMap å¹¶ä¸ä¿è¯é”®å€¼å¯¹çš„é¡ºåºï¼Œè¿™æ„å‘³ç€åœ¨è¿›è¡ŒæŸäº›æ“ä½œåï¼Œé”®å€¼å¯¹çš„é¡ºåºå¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ã€‚å¦å¤–ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒHashMap æ˜¯éçº¿ç¨‹å®‰å…¨ç±»ï¼Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å¯èƒ½ä¼šå­˜åœ¨é—®é¢˜ã€‚\n\nHashMap æœ€æ—©åœ¨JDK 1.2ä¸­å°±å‡ºç°äº†ï¼Œåº•å±‚æ˜¯åŸºäºæ•£åˆ—ç®—æ³•å®ç°ï¼Œéšç€å‡ ä»£çš„ä¼˜åŒ–æ›´æ–°åˆ°ç›®å‰ä¸ºæ­¢å®ƒçš„æºç éƒ¨åˆ†å·²ç»æ¯”è¾ƒå¤æ‚ï¼Œæ¶‰åŠçš„çŸ¥è¯†ç‚¹ä¹Ÿéå¸¸å¤šï¼Œåœ¨JDK 1.8ä¸­åŒ…æ‹¬ï¼›`1ã€æ•£åˆ—è¡¨å®ç°`ã€`2ã€æ‰°åŠ¨å‡½æ•°`ã€`3ã€åˆå§‹åŒ–å®¹é‡`ã€`4ã€è´Ÿè½½å› å­`ã€`5ã€æ‰©å®¹å…ƒç´ æ‹†åˆ†`ã€`6ã€é“¾è¡¨æ ‘åŒ–`ã€`7ã€çº¢é»‘æ ‘`ã€`8ã€æ’å…¥`ã€`9ã€æŸ¥æ‰¾`ã€`10ã€åˆ é™¤`ã€`11ã€éå†`ã€`12ã€åˆ†æ®µé”`ç­‰ç­‰ï¼Œå› æ¶‰åŠçš„çŸ¥è¯†ç‚¹è¾ƒå¤šæ‰€ä»¥éœ€è¦åˆ†å¼€è®²è§£ï¼Œæœ¬ç« èŠ‚æˆ‘ä»¬ä¼šå…ˆæŠŠç›®å…‰æ”¾åœ¨å‰äº”é¡¹ä¸Šï¼Œä¹Ÿå°±æ˜¯å…³äºæ•°æ®ç»“æ„çš„ä½¿ç”¨ä¸Šã€‚\n\næ•°æ®ç»“æ„ç›¸å…³å¾€å¾€ä¸æ•°å­¦ç¦»ä¸å¼€ï¼Œå­¦ä¹ è¿‡ç¨‹ä¸­å»ºè®®ä¸‹è½½ç›¸åº”æºç è¿›è¡Œå®éªŒéªŒè¯ï¼Œå¯èƒ½è¿™ä¸ªè¿‡ç¨‹æœ‰ç‚¹çƒ§è„‘ï¼Œä½†å­¦ä¼šåä¸ç”¨æ­»è®°ç¡¬èƒŒå°±å¯ä»¥ç†è§£è¿™éƒ¨åˆ†çŸ¥è¯†ã€‚\n\n## äºŒã€èµ„æºä¸‹è½½\n\næœ¬ç« èŠ‚æ¶‰åŠçš„æºç å’Œèµ„æºåœ¨å·¥ç¨‹ï¼Œ**interview-04**ä¸­ï¼ŒåŒ…æ‹¬ï¼›\n1. 10ä¸‡å•è¯æµ‹è¯•æ•°æ®ï¼Œåœ¨docæ–‡ä»¶å¤¹\n2. æ‰°åŠ¨å‡½æ•°excelå±•ç°ï¼Œåœ¨dockæ–‡ä»¶å¤¹\n3. æµ‹è¯•æºç éƒ¨åˆ†åœ¨`interview-04`å·¥ç¨‹ä¸­\n\nå¯ä»¥é€šè¿‡å…³æ³¨å…¬ä¼—å·ï¼š[`bugstackè™«æ´æ ˆ`](https://bugstack.cn/assets/images/qrcode.png)ï¼Œå›å¤ä¸‹è½½è¿›è¡Œè·å–{*å›å¤ä¸‹è½½åæ‰“å¼€è·å¾—çš„é“¾æ¥ï¼Œæ‰¾åˆ°ç¼–å·IDï¼š19*}\n\n## ä¸‰ã€æºç åˆ†æ\n\n### 1. å†™ä¸€ä¸ªæœ€ç®€å•çš„HashMap\n\nå­¦ä¹ HashMapå‰ï¼Œæœ€å¥½çš„æ–¹å¼æ˜¯å…ˆäº†è§£è¿™æ˜¯ä¸€ç§æ€ä¹ˆæ ·çš„æ•°æ®ç»“æ„æ¥å­˜æ”¾æ•°æ®ã€‚è€ŒHashMapç»è¿‡å¤šä¸ªç‰ˆæœ¬çš„è¿­ä»£åï¼Œä¹ä¸€çœ‹ä»£ç è¿˜æ˜¯å¾ˆå¤æ‚çš„ã€‚å°±åƒä½ åŸæ¥åªç©¿ä¸ªè£¤è¡©ï¼Œç°åœ¨è¿˜æœ‰ç§‹è£¤å’Œé£è¡£ã€‚æ‰€ä»¥æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹æœ€æ ¹æœ¬çš„HashMapæ˜¯ä»€ä¹ˆæ ·ï¼Œä¹Ÿå°±æ˜¯åªç©¿è£¤è¡©æ˜¯ä»€ä¹ˆæ•ˆæœï¼Œä¹‹åå†å»åˆ†æå®ƒçš„æºç ã€‚\n\n**é—®é¢˜ï¼š** å‡è®¾æˆ‘ä»¬æœ‰ä¸€ç»„7ä¸ªå­—ç¬¦ä¸²ï¼Œéœ€è¦å­˜æ”¾åˆ°æ•°ç»„ä¸­ï¼Œä½†è¦æ±‚åœ¨è·å–æ¯ä¸ªå…ƒç´ çš„æ—¶å€™æ—¶é—´å¤æ‚åº¦æ˜¯O(1)ã€‚ä¹Ÿå°±æ˜¯è¯´ä½ ä¸èƒ½é€šè¿‡å¾ªç¯éå†çš„æ–¹å¼è¿›è¡Œè·å–ï¼Œè€Œæ˜¯è¦å®šä½åˆ°æ•°ç»„IDç›´æ¥è·å–ç›¸åº”çš„å…ƒç´ ã€‚\n\n**æ–¹æ¡ˆï¼š** å¦‚æœè¯´æˆ‘ä»¬éœ€è¦é€šè¿‡IDä»æ•°ç»„ä¸­è·å–å…ƒç´ ï¼Œé‚£ä¹ˆå°±éœ€è¦æŠŠæ¯ä¸ªå­—ç¬¦ä¸²éƒ½è®¡ç®—å‡ºä¸€ä¸ªåœ¨æ•°ç»„ä¸­çš„ä½ç½®IDã€‚*å­—ç¬¦ä¸²è·å–IDä½ èƒ½æƒ³åˆ°ä»€ä¹ˆæ–¹å¼ï¼Ÿ* ä¸€ä¸ªå­—ç¬¦ä¸²æœ€ç›´æ¥çš„è·å–è·Ÿæ•°å­—ç›¸å…³çš„ä¿¡æ¯å°±æ˜¯HashCodeï¼Œå¯HashCodeçš„å–å€¼èŒƒå›´å¤ªå¤§äº†`[-2147483648, 2147483647]`ï¼Œä¸å¯èƒ½ç›´æ¥ä½¿ç”¨ã€‚é‚£ä¹ˆå°±éœ€è¦ä½¿ç”¨HashCodeä¸æ•°ç»„é•¿åº¦åšä¸è¿ç®—ï¼Œå¾—åˆ°ä¸€ä¸ªå¯ä»¥åœ¨æ•°ç»„ä¸­å‡ºç°çš„ä½ç½®ã€‚å¦‚æœè¯´æœ‰ä¸¤ä¸ªå…ƒç´ å¾—åˆ°åŒæ ·çš„IDï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°ç»„IDä¸‹å°±å­˜æ”¾ä¸¤ä¸ªå­—ç¬¦ä¸²ã€‚\n\nä»¥ä¸Šå‘¢å…¶å®å°±æ˜¯æˆ‘ä»¬è¦æŠŠå­—ç¬¦ä¸²æ•£åˆ—åˆ°æ•°ç»„ä¸­çš„ä¸€ä¸ªåŸºæœ¬æ€è·¯ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±æŠŠè¿™ä¸ªæ€è·¯ç”¨ä»£ç å®ç°å‡ºæ¥ã€‚\n\n#### 1.1 ä»£ç å®ç°\n\n```java\n// åˆå§‹åŒ–ä¸€ç»„å­—ç¬¦ä¸²\nList<String> list = new ArrayList<>();\nlist.add(\"jlkk\");\nlist.add(\"lopi\");\nlist.add(\"å°å‚…å“¥\");\nlist.add(\"e4we\");\nlist.add(\"alpo\");\nlist.add(\"yhjk\");\nlist.add(\"plop\");\n\n// å®šä¹‰è¦å­˜æ”¾çš„æ•°ç»„\nString[] tab = new String[8];\n\n// å¾ªç¯å­˜æ”¾\nfor (String key : list) {\n    int idx = key.hashCode() & (tab.length - 1);  // è®¡ç®—ç´¢å¼•ä½ç½®\n    System.out.println(String.format(\"keyå€¼=%s Idx=%d\", key, idx));\n    if (null == tab[idx]) {\n        tab[idx] = key;\n        continue;\n    }\n    tab[idx] = tab[idx] + \"->\" + key;\n}\n// è¾“å‡ºæµ‹è¯•ç»“æœ\nSystem.out.println(JSON.toJSONString(tab));\n```\n\nè¿™æ®µä»£ç æ•´ä½“çœ‹èµ·æ¥ä¹Ÿæ˜¯éå¸¸ç®€å•ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆå¤æ‚åº¦ï¼Œä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å†…å®¹ï¼›\n1. åˆå§‹åŒ–ä¸€ç»„å­—ç¬¦ä¸²é›†åˆï¼Œè¿™é‡Œåˆå§‹åŒ–äº†7ä¸ªã€‚\n2. å®šä¹‰ä¸€ä¸ªæ•°ç»„ç”¨äºå­˜æ”¾å­—ç¬¦ä¸²ï¼Œæ³¨æ„è¿™é‡Œçš„é•¿åº¦æ˜¯8ï¼Œä¹Ÿå°±æ˜¯2çš„å€æ•°ã€‚è¿™æ ·çš„æ•°ç»„é•¿åº¦æ‰ä¼šå‡ºç°ä¸€ä¸ª `0111` é™¤é«˜ä½ä»¥å¤–éƒ½æ˜¯1çš„ç‰¹å¾ï¼Œä¹Ÿæ˜¯ä¸ºäº†æ•£åˆ—ã€‚\n3. æ¥ä¸‹æ¥å°±æ˜¯å¾ªç¯å­˜æ”¾æ•°æ®ï¼Œè®¡ç®—å‡ºæ¯ä¸ªå­—ç¬¦ä¸²åœ¨æ•°ç»„ä¸­çš„ä½ç½®ã€‚`key.hashCode() & (tab.length - 1)`ã€‚\n4. åœ¨å­—ç¬¦ä¸²å­˜æ”¾åˆ°æ•°ç»„çš„è¿‡ç¨‹ï¼Œå¦‚æœé‡åˆ°ç›¸åŒçš„å…ƒç´ ï¼Œè¿›è¡Œè¿æ¥æ“ä½œ`æ¨¡æ‹Ÿé“¾è¡¨çš„è¿‡ç¨‹`ã€‚\n5. æœ€åè¾“å‡ºå­˜æ”¾ç»“æœã€‚\n\n**æµ‹è¯•ç»“æœ**\n\n```java\nkeyå€¼=jlkk Idx=2\nkeyå€¼=lopi Idx=4\nkeyå€¼=å°å‚…å“¥ Idx=7\nkeyå€¼=e4we Idx=5\nkeyå€¼=alpo Idx=2\nkeyå€¼=yhjk Idx=0\nkeyå€¼=plop Idx=5\næµ‹è¯•ç»“æœï¼š[\"yhjk\",null,\"jlkk->alpo\",null,\"lopi\",\"e4we->plop\",null,\"å°å‚…å“¥\"]\n```\n\n- åœ¨æµ‹è¯•ç»“æœé¦–å…ˆæ˜¯è®¡ç®—å‡ºæ¯ä¸ªå…ƒç´ åœ¨æ•°ç»„çš„Idxï¼Œä¹Ÿæœ‰å‡ºç°é‡å¤çš„ä½ç½®ã€‚\n- æœ€åæ˜¯æµ‹è¯•ç»“æœçš„è¾“å‡ºï¼Œ1ã€3ã€6ï¼Œä½ç½®æ˜¯ç©ºçš„ï¼Œ2ã€5ï¼Œä½ç½®æœ‰ä¸¤ä¸ªå…ƒç´ è¢«é“¾æ¥èµ·æ¥`e4we->plop`ã€‚\n- è¿™å°±è¾¾åˆ°äº†æˆ‘ä»¬ä¸€ä¸ªæœ€åŸºæœ¬çš„è¦æ±‚ï¼Œå°†ä¸²å…ƒç´ æ•£åˆ—å­˜æ”¾åˆ°æ•°ç»„ä¸­ï¼Œæœ€åé€šè¿‡å­—ç¬¦ä¸²å…ƒç´ çš„ç´¢å¼•IDè¿›è¡Œè·å–å¯¹åº”å­—ç¬¦ä¸²ã€‚è¿™æ ·æ˜¯HashMapçš„ä¸€ä¸ªæœ€åŸºæœ¬åŸç†ï¼Œæœ‰äº†è¿™ä¸ªåŸºç¡€åé¢å°±ä¼šæ›´å®¹æ˜“ç†è§£HashMapçš„æºç å®ç°ã€‚\n\n#### 1.2 Hashæ•£åˆ—ç¤ºæ„å›¾\n\nå¦‚æœä¸Šé¢çš„æµ‹è¯•ç»“æœä¸èƒ½åœ¨ä½ çš„å¤´è„‘ä¸­å¾ˆå¥½çš„å»ºç«‹å‡ºä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œé‚£ä¹ˆå¯ä»¥çœ‹ä»¥ä¸‹è¿™å¼ æ•£åˆ—ç¤ºæ„å›¾ï¼Œæ–¹ä¾¿ç†è§£ï¼›\n\n![bugstack.cn Hashæ•£åˆ—ç¤ºæ„å›¾](https://bugstack.cn/assets/images/2020/interview/interview-4-01.png)\n\n- è¿™å¼ å›¾å°±æ˜¯ä¸Šé¢ä»£ç å®ç°çš„å…¨è¿‡ç¨‹ï¼Œå°†æ¯ä¸€ä¸ªå­—ç¬¦ä¸²å…ƒç´ é€šè¿‡Hashè®¡ç®—ç´¢å¼•ä½ç½®ï¼Œå­˜æ”¾åˆ°æ•°ç»„ä¸­ã€‚\n- é»„è‰²çš„ç´¢å¼•IDæ˜¯æ²¡æœ‰å…ƒç´ å­˜æ”¾ã€ç»¿è‰²çš„ç´¢å¼•IDå­˜æ”¾äº†ä¸€ä¸ªå…ƒç´ ã€çº¢è‰²çš„ç´¢å¼•IDå­˜æ”¾äº†ä¸¤ä¸ªå…ƒç´ ã€‚\n\n#### 1.3 è¿™ä¸ªç®€å•çš„HashMapæœ‰å“ªäº›é—®é¢˜\n\nä»¥ä¸Šæˆ‘ä»¬å®ç°äº†ä¸€ä¸ªç®€å•çš„HashMapï¼Œæˆ–è€…è¯´è¿˜ç®—ä¸ä¸ŠHashMapï¼Œåªèƒ½ç®—åšä¸€ä¸ªæ•£åˆ—æ•°æ®å­˜æ”¾çš„é›å½¢ã€‚ä½†è¿™æ ·çš„ä¸€ä¸ªæ•°æ®ç»“æ„æ”¾åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œä¼šæœ‰å“ªäº›é—®é¢˜å‘¢ï¼Ÿ\n\n1. è¿™é‡Œæ‰€æœ‰çš„å…ƒç´ å­˜æ”¾éƒ½éœ€è¦è·å–ä¸€ä¸ªç´¢å¼•ä½ç½®ï¼Œè€Œå¦‚æœå…ƒç´ çš„ä½ç½®ä¸å¤Ÿæ•£åˆ—ç¢°æ’ä¸¥é‡ï¼Œé‚£ä¹ˆå°±å¤±å»äº†æ•£åˆ—è¡¨å­˜æ”¾çš„æ„ä¹‰ï¼Œæ²¡æœ‰è¾¾åˆ°é¢„æœŸçš„æ€§èƒ½ã€‚\n2. åœ¨è·å–ç´¢å¼•IDçš„è®¡ç®—å…¬å¼ä¸­ï¼Œéœ€è¦æ•°ç»„é•¿åº¦æ˜¯2çš„å€æ•°ï¼Œé‚£ä¹ˆæ€ä¹ˆè¿›è¡Œåˆå§‹åŒ–è¿™ä¸ªæ•°ç»„å¤§å°ã€‚\n3. æ•°ç»„è¶Šå°ç¢°æ’çš„è¶Šå¤§ï¼Œæ•°ç»„è¶Šå¤§ç¢°æ’çš„è¶Šå°ï¼Œæ—¶é—´ä¸ç©ºé—´å¦‚ä½•å–èˆã€‚\n4. ç›®å‰å­˜æ”¾7ä¸ªå…ƒç´ ï¼Œå·²ç»æœ‰ä¸¤ä¸ªä½ç½®éƒ½å­˜æ”¾äº†2ä¸ªå­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆé“¾è¡¨è¶Šæ¥è¶Šé•¿æ€ä¹ˆä¼˜åŒ–ã€‚\n5. éšç€å…ƒç´ çš„ä¸æ–­æ·»åŠ ï¼Œæ•°ç»„é•¿åº¦ä¸è¶³æ‰©å®¹æ—¶ï¼Œæ€ä¹ˆæŠŠåŸæœ‰çš„å…ƒç´ ï¼Œæ‹†åˆ†åˆ°æ–°çš„ä½ç½®ä¸Šå»ã€‚\n\nä»¥ä¸Šè¿™äº›é—®é¢˜å¯ä»¥å½’çº³ä¸ºï¼›`æ‰°åŠ¨å‡½æ•°`ã€`åˆå§‹åŒ–å®¹é‡`ã€`è´Ÿè½½å› å­`ã€`æ‰©å®¹æ–¹æ³•`ä»¥åŠ`é“¾è¡¨å’Œçº¢é»‘æ ‘`è½¬æ¢çš„ä½¿ç”¨ç­‰ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ä¼šé€ä¸ªé—®é¢˜è¿›è¡Œåˆ†æã€‚\n\n### 2. æ‰°åŠ¨å‡½æ•°\n\nåœ¨HashMapå­˜æ”¾å…ƒç´ æ—¶å€™æœ‰è¿™æ ·ä¸€æ®µä»£ç æ¥å¤„ç†å“ˆå¸Œå€¼ï¼Œè¿™æ˜¯`java 8`çš„æ•£åˆ—å€¼æ‰°åŠ¨å‡½æ•°ï¼Œç”¨äºä¼˜åŒ–æ•£åˆ—æ•ˆæœï¼›\n\n```java\nstatic final int hash(Object key) {\n    int h;\n    return (key == null) ? 0 : (h = key.hashCode()) ^ (h >>> 16);\n}\n```\n\n#### 2.1 ä¸ºä»€ä¹ˆä½¿ç”¨æ‰°åŠ¨å‡½æ•°\n\nç†è®ºä¸Šæ¥è¯´å­—ç¬¦ä¸²çš„`hashCode`æ˜¯ä¸€ä¸ªintç±»å‹å€¼ï¼Œé‚£å¯ä»¥ç›´æ¥ä½œä¸ºæ•°ç»„ä¸‹æ ‡äº†ï¼Œä¸”ä¸ä¼šå‡ºç°ç¢°æ’ã€‚ä½†æ˜¯è¿™ä¸ª`hashCode`çš„å–å€¼èŒƒå›´æ˜¯[-2147483648, 2147483647]ï¼Œæœ‰å°†è¿‘40äº¿çš„é•¿åº¦ï¼Œè°ä¹Ÿä¸èƒ½æŠŠæ•°ç»„åˆå§‹åŒ–çš„è¿™ä¹ˆå¤§ï¼Œå†…å­˜ä¹Ÿæ˜¯æ”¾ä¸ä¸‹çš„ã€‚\n\næˆ‘ä»¬é»˜è®¤åˆå§‹åŒ–çš„Mapå¤§å°æ˜¯16ä¸ªé•¿åº¦ `DEFAULT_INITIAL_CAPACITY = 1 << 4`ï¼Œæ‰€ä»¥è·å–çš„Hashå€¼å¹¶ä¸èƒ½ç›´æ¥ä½œä¸ºä¸‹æ ‡ä½¿ç”¨ï¼Œéœ€è¦ä¸æ•°ç»„é•¿åº¦è¿›è¡Œå–æ¨¡è¿ç®—å¾—åˆ°ä¸€ä¸ªä¸‹æ ‡å€¼ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¸Šé¢åšçš„æ•£åˆ—åˆ—å­ã€‚\n\né‚£ä¹ˆï¼ŒhashMapæºç è¿™é‡Œä¸åªæ˜¯ç›´æ¥è·å–å“ˆå¸Œå€¼ï¼Œè¿˜è¿›è¡Œäº†ä¸€æ¬¡æ‰°åŠ¨è®¡ç®—ï¼Œ`(h = key.hashCode()) ^ (h >>> 16)`ã€‚æŠŠå“ˆå¸Œå€¼å³ç§»16ä½ï¼Œä¹Ÿå°±æ­£å¥½æ˜¯è‡ªå·±é•¿åº¦çš„ä¸€åŠï¼Œä¹‹åä¸åŸå“ˆå¸Œå€¼åšå¼‚æˆ–è¿ç®—ï¼Œè¿™æ ·å°±æ··åˆäº†åŸå“ˆå¸Œå€¼ä¸­çš„é«˜ä½å’Œä½ä½ï¼Œå¢å¤§äº†**éšæœºæ€§**ã€‚è®¡ç®—æ–¹å¼å¦‚ä¸‹å›¾ï¼›\n\n![bugstack.cn æ‰°åŠ¨å‡½æ•°](https://bugstack.cn/assets/images/2020/interview/interview-4-02.png)\n\n- è¯´ç™½äº†ï¼Œä½¿ç”¨æ‰°åŠ¨å‡½æ•°å°±æ˜¯ä¸ºäº†å¢åŠ éšæœºæ€§ï¼Œè®©æ•°æ®å…ƒç´ æ›´åŠ å‡è¡¡çš„æ•£åˆ—ï¼Œå‡å°‘ç¢°æ’ã€‚\n\n#### 2.2 å®éªŒéªŒè¯æ‰°åŠ¨å‡½æ•°\n\nä»ä¸Šé¢çš„åˆ†æå¯ä»¥çœ‹å‡ºï¼Œæ‰°åŠ¨å‡½æ•°ä½¿ç”¨äº†å“ˆå¸Œå€¼çš„é«˜åŠåŒºå’Œä½åŠåŒºåšå¼‚æˆ–ï¼Œæ··åˆåŸå§‹å“ˆå¸Œç çš„é«˜ä½å’Œä½ä½ï¼Œä»¥æ­¤æ¥åŠ å¤§ä½ä½åŒºçš„éšæœºæ€§ã€‚\n\nä½†çœ‹ä¸åˆ°å®éªŒæ•°æ®çš„è¯ï¼Œè¿™ç»ˆç©¶æ˜¯ä¸€æ®µç†è®ºï¼Œå…·ä½“è¿™æ®µå“ˆå¸Œå€¼çœŸçš„è¢«å¢åŠ äº†éšæœºæ€§æ²¡æœ‰ï¼Œå¹¶ä¸çŸ¥é“ã€‚æ‰€ä»¥è¿™é‡Œæˆ‘ä»¬è¦åšä¸€ä¸ªå®éªŒï¼Œè¿™ä¸ªå®éªŒæ˜¯è¿™æ ·åšï¼›\n\n1. é€‰å–10ä¸‡ä¸ªå•è¯è¯åº“\n2. å®šä¹‰128ä½é•¿åº¦çš„æ•°ç»„æ ¼å­\n3. åˆ†åˆ«è®¡ç®—åœ¨æ‰°åŠ¨å’Œä¸æ‰°åŠ¨ä¸‹ï¼Œ10ä¸‡å•è¯çš„ä¸‹æ ‡åˆ†é…åˆ°128ä¸ªæ ¼å­çš„æ•°é‡\n4. ç»Ÿè®¡å„ä¸ªæ ¼å­æ•°é‡ï¼Œç”Ÿæˆæ³¢åŠ¨æ›²çº¿ã€‚å¦‚æœæ‰°åŠ¨å‡½æ•°ä¸‹çš„æ³¢åŠ¨æ›²çº¿ç›¸å¯¹æ›´å¹³ç¨³ï¼Œé‚£ä¹ˆè¯æ˜æ‰°åŠ¨å‡½æ•°æœ‰æ•ˆæœã€‚\n\n##### 2.2.1 æ‰°åŠ¨ä»£ç æµ‹è¯•\n\n**æ‰°åŠ¨å‡½æ•°å¯¹æ¯”æ–¹æ³•**\n\n```java\npublic class Disturb {\n\n    public static int disturbHashIdx(String key, int size) {\n        return (size - 1) & (key.hashCode() ^ (key.hashCode() >>> 16));\n    }\n\n    public static int hashIdx(String key, int size) {\n        return (size - 1) & key.hashCode();\n    }\n\n}\n```\n\n- `disturbHashIdx` æ‰°åŠ¨å‡½æ•°ä¸‹ï¼Œä¸‹æ ‡å€¼è®¡ç®—\n- `hashIdx` éæ‰°åŠ¨å‡½æ•°ä¸‹ï¼Œä¸‹æ ‡å€¼è®¡ç®—\n\n**å•å…ƒæµ‹è¯•**\n\n```java\n// 10ä¸‡å•è¯å·²ç»åˆå§‹åŒ–åˆ°wordsä¸­\n@Test\npublic void test_disturb() {\n    Map<Integer, Integer> map = new HashMap<>(16);\n    for (String word : words) {\n        // ä½¿ç”¨æ‰°åŠ¨å‡½æ•°\n        int idx = Disturb.disturbHashIdx(word, 128);\n        // ä¸ä½¿ç”¨æ‰°åŠ¨å‡½æ•°\n        // int idx = Disturb.hashIdx(word, 128);\n        if (map.containsKey(idx)) {\n            Integer integer = map.get(idx);\n            map.put(idx, ++integer);\n        } else {\n            map.put(idx, 1);\n        }\n    }\n    System.out.println(map.values());\n}\n```\n\nä»¥ä¸Šåˆ†åˆ«ç»Ÿè®¡ä¸¤ç§å‡½æ•°ä¸‹çš„ä¸‹æ ‡å€¼åˆ†é…ï¼Œæœ€ç»ˆå°†ç»Ÿè®¡ç»“æœæ”¾åˆ°excelä¸­ç”Ÿæˆå›¾è¡¨ã€‚\n\n##### 2.2.2 æ‰°åŠ¨å‡½æ•°æ•£åˆ—å›¾è¡¨\n\nä»¥ä¸Šçš„ä¸¤å¼ å›¾ï¼Œåˆ†åˆ«æ˜¯æ²¡æœ‰ä½¿ç”¨æ‰°åŠ¨å‡½æ•°å’Œä½¿ç”¨æ‰°åŠ¨å‡½æ•°çš„ï¼Œä¸‹æ ‡åˆ†é…ã€‚å®éªŒæ•°æ®ï¼›\n1. 10ä¸‡ä¸ªä¸é‡å¤çš„å•è¯\n2. 128ä¸ªæ ¼å­ï¼Œç›¸å½“äº128é•¿åº¦çš„æ•°ç»„\n\n**æœªä½¿ç”¨æ‰°åŠ¨å‡½æ•°**\n\n![bugstack.cn æœªä½¿ç”¨æ‰°åŠ¨å‡½æ•°](https://bugstack.cn/assets/images/2020/interview/interview-4-03.png)\n\n**ä½¿ç”¨æ‰°åŠ¨å‡½æ•°**\n\n![bugstack.cn ä½¿ç”¨æ‰°åŠ¨å‡½æ•°](https://bugstack.cn/assets/images/2020/interview/interview-4-04.png)\n\n- ä»è¿™ä¸¤ç§çš„å¯¹æ¯”å›¾å¯ä»¥çœ‹å‡ºæ¥ï¼Œåœ¨ä½¿ç”¨äº†æ‰°åŠ¨å‡½æ•°åï¼Œæ•°æ®åˆ†é…çš„æ›´åŠ å‡åŒ€äº†ã€‚\n- æ•°æ®åˆ†é…å‡åŒ€ï¼Œä¹Ÿå°±æ˜¯æ•£åˆ—çš„æ•ˆæœæ›´å¥½ï¼Œå‡å°‘äº†hashçš„ç¢°æ’ï¼Œè®©æ•°æ®å­˜æ”¾å’Œè·å–çš„æ•ˆç‡æ›´ä½³ã€‚\n\n### 3. åˆå§‹åŒ–å®¹é‡å’Œè´Ÿè½½å› å­\n\næ¥ä¸‹æ¥æˆ‘ä»¬è®¨è®ºä¸‹ä¸€ä¸ªé—®é¢˜ï¼Œä»æˆ‘ä»¬æ¨¡ä»¿HashMapçš„ä¾‹å­ä¸­ä»¥åŠHashMapé»˜è®¤çš„åˆå§‹åŒ–å¤§å°é‡Œï¼Œéƒ½å¯ä»¥çŸ¥é“ï¼Œæ•£åˆ—æ•°ç»„éœ€è¦ä¸€ä¸ª2çš„å€æ•°çš„é•¿åº¦ï¼Œå› ä¸ºåªæœ‰2çš„å€æ•°åœ¨å‡1çš„æ—¶å€™ï¼Œæ‰ä¼šå‡ºç°`01111`è¿™æ ·çš„å€¼ã€‚\n\né‚£ä¹ˆè¿™é‡Œå°±æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬åœ¨åˆå§‹åŒ–HashMapçš„æ—¶å€™ï¼Œå¦‚æœä¼ ä¸€ä¸ª17ä¸ªçš„å€¼`new HashMap<>(17);`ï¼Œå®ƒä¼šæ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ\n\n#### 3.1 å¯»æ‰¾2çš„å€æ•°æœ€å°å€¼\n\nåœ¨HashMapçš„åˆå§‹åŒ–ä¸­ï¼Œæœ‰è¿™æ ·ä¸€æ®µæ–¹æ³•ï¼›\n\n```java\npublic HashMap(int initialCapacity, float loadFactor) {\n    ...\n    this.loadFactor = loadFactor;\n    this.threshold = tableSizeFor(initialCapacity);\n}\n```\n\n- é˜€å€¼`threshold`ï¼Œé€šè¿‡æ–¹æ³•`tableSizeFor`è¿›è¡Œè®¡ç®—ï¼Œæ˜¯æ ¹æ®åˆå§‹åŒ–æ¥è®¡ç®—çš„ã€‚\n- è¿™ä¸ªæ–¹æ³•ä¹Ÿå°±æ˜¯è¦å¯»æ‰¾æ¯”åˆå§‹å€¼å¤§çš„ï¼Œæœ€å°çš„é‚£ä¸ª2è¿›åˆ¶æ•°å€¼ã€‚æ¯”å¦‚ä¼ äº†17ï¼Œæˆ‘åº”è¯¥æ‰¾åˆ°çš„æ˜¯32ã€‚\n\nè®¡ç®—é˜€å€¼å¤§å°çš„æ–¹æ³•ï¼›\n\n```java\nstatic final int tableSizeFor(int cap) {\n    int n = cap - 1;\n    n |= n >>> 1;\n    n |= n >>> 2;\n    n |= n >>> 4;\n    n |= n >>> 8;\n    n |= n >>> 16;\n    return (n < 0) ? 1 : (n >= MAXIMUM_CAPACITY) ? MAXIMUM_CAPACITY : n + 1;\n}\n```\n\n- MAXIMUM_CAPACITY = 1 << 30ï¼Œè¿™ä¸ªæ˜¯ä¸´ç•ŒèŒƒå›´ï¼Œä¹Ÿå°±æ˜¯æœ€å¤§çš„Mapé›†åˆã€‚\n- ä¹ä¸€çœ‹å¯èƒ½æœ‰ç‚¹æ™•ğŸ˜µæ€ä¹ˆéƒ½åœ¨å‘å³ç§»ä½1ã€2ã€4ã€8ã€16ï¼Œè¿™ä¸»è¦æ˜¯ä¸ºäº†æŠŠäºŒè¿›åˆ¶çš„å„ä¸ªä½ç½®éƒ½å¡«ä¸Š1ï¼Œå½“äºŒè¿›åˆ¶çš„å„ä¸ªä½ç½®éƒ½æ˜¯1ä»¥åï¼Œå°±æ˜¯ä¸€ä¸ªæ ‡å‡†çš„2çš„å€æ•°å‡1äº†ï¼Œæœ€åæŠŠç»“æœåŠ 1å†è¿”å›å³å¯ã€‚\n\né‚£è¿™é‡Œæˆ‘ä»¬æŠŠ17è¿™æ ·ä¸€ä¸ªåˆå§‹åŒ–è®¡ç®—é˜€å€¼çš„è¿‡ç¨‹ï¼Œç”¨å›¾å±•ç¤ºå‡ºæ¥ï¼Œæ–¹ä¾¿ç†è§£ï¼›\n\n![bugstack.cn è®¡ç®—é˜€å€¼](https://bugstack.cn/assets/images/2020/interview/interview-4-05.png)\n\n#### 3.2 è´Ÿè½½å› å­\n\n```java\nstatic final float DEFAULT_LOAD_FACTOR = 0.75f;\n```\n\n**è´Ÿè½½å› å­æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ**\n\nè´Ÿè½½å› å­ï¼Œå¯ä»¥ç†è§£æˆä¸€è¾†è½¦å¯æ‰¿é‡é‡é‡è¶…è¿‡æŸä¸ªé˜€å€¼æ—¶ï¼ŒæŠŠè´§æ”¾åˆ°æ–°çš„è½¦ä¸Šã€‚\n\né‚£ä¹ˆåœ¨HashMapä¸­ï¼Œè´Ÿè½½å› å­å†³å®šäº†æ•°æ®é‡å¤šå°‘äº†ä»¥åè¿›è¡Œæ‰©å®¹ã€‚*è¿™é‡Œè¦æåˆ°ä¸Šé¢åšçš„HashMapä¾‹å­ï¼Œæˆ‘ä»¬å‡†å¤‡äº†7ä¸ªå…ƒç´ ï¼Œä½†æ˜¯æœ€åè¿˜æœ‰3ä¸ªä½ç½®ç©ºä½™ï¼Œ2ä¸ªä½ç½®å­˜æ”¾äº†2ä¸ªå…ƒç´ ã€‚* æ‰€ä»¥å¯èƒ½å³ä½¿ä½ æ•°æ®æ¯”æ•°ç»„å®¹é‡å¤§æ—¶ä¹Ÿæ˜¯ä¸ä¸€å®šèƒ½æ­£æ­£å¥½å¥½çš„æŠŠæ•°ç»„å æ»¡çš„ï¼Œè€Œæ˜¯åœ¨æŸäº›å°æ ‡ä½ç½®å‡ºç°äº†å¤§é‡çš„ç¢°æ’ï¼Œåªèƒ½åœ¨åŒä¸€ä¸ªä½ç½®ç”¨é“¾è¡¨å­˜æ”¾ï¼Œé‚£ä¹ˆè¿™æ ·å°±å¤±å»äº†Mapæ•°ç»„çš„æ€§èƒ½ã€‚\n\næ‰€ä»¥ï¼Œè¦é€‰æ‹©ä¸€ä¸ªåˆç†çš„å¤§å°ä¸‹è¿›è¡Œæ‰©å®¹ï¼Œé»˜è®¤å€¼0.75å°±æ˜¯è¯´å½“é˜€å€¼å®¹é‡å äº†3/4sæ—¶èµ¶ç´§æ‰©å®¹ï¼Œå‡å°‘Hashç¢°æ’ã€‚\n\nåŒæ—¶0.75æ˜¯ä¸€ä¸ªé»˜è®¤æ„é€ å€¼ï¼Œåœ¨åˆ›å»ºHashMapä¹Ÿå¯ä»¥è°ƒæ•´ï¼Œæ¯”å¦‚ä½ å¸Œæœ›ç”¨æ›´å¤šçš„ç©ºé—´æ¢å–æ—¶é—´ï¼Œå¯ä»¥æŠŠè´Ÿè½½å› å­è°ƒçš„æ›´å°ä¸€äº›ï¼Œå‡å°‘ç¢°æ’ã€‚\n\n### 4.  æ‰©å®¹å…ƒç´ æ‹†åˆ†\n\nä¸ºä»€ä¹ˆæ‰©å®¹ï¼Œå› ä¸ºæ•°ç»„é•¿åº¦ä¸è¶³äº†ã€‚é‚£æ‰©å®¹æœ€ç›´æ¥çš„é—®é¢˜ï¼Œå°±æ˜¯éœ€è¦æŠŠå…ƒç´ æ‹†åˆ†åˆ°æ–°çš„æ•°ç»„ä¸­ã€‚æ‹†åˆ†å…ƒç´ çš„è¿‡ç¨‹ä¸­ï¼ŒåŸjdk1.7ä¸­ä¼šéœ€è¦é‡æ–°è®¡ç®—å“ˆå¸Œå€¼ï¼Œä½†æ˜¯åˆ°jdk1.8ä¸­å·²ç»è¿›è¡Œä¼˜åŒ–ï¼Œä¸åœ¨éœ€è¦é‡æ–°è®¡ç®—ï¼Œæå‡äº†æ‹†åˆ†çš„æ€§èƒ½ï¼Œè®¾è®¡çš„è¿˜æ˜¯éå¸¸å·§å¦™çš„ã€‚\n\n#### 4.1 æµ‹è¯•æ•°æ®\n\n```java\n@Test\npublic void test_hashMap() {\n    List<String> list = new ArrayList<>();\n    list.add(\"jlkk\");\n    list.add(\"lopi\");\n    list.add(\"jmdw\");\n    list.add(\"e4we\");\n    list.add(\"io98\");\n    list.add(\"nmhg\");\n    list.add(\"vfg6\");\n    list.add(\"gfrt\");\n    list.add(\"alpo\");\n    list.add(\"vfbh\");\n    list.add(\"bnhj\");\n    list.add(\"zuio\");\n    list.add(\"iu8e\");\n    list.add(\"yhjk\");\n    list.add(\"plop\");\n    list.add(\"dd0p\");\n    for (String key : list) {\n        int hash = key.hashCode() ^ (key.hashCode() >>> 16);\n        System.out.println(\"å­—ç¬¦ä¸²ï¼š\" + key + \" \\tIdx(16)ï¼š\" + ((16 - 1) & hash) + \" \\tBitå€¼ï¼š\" + Integer.toBinaryString(hash) + \" - \" + Integer.toBinaryString(hash & 16) + \" \\t\\tIdx(32)ï¼š\" + ((\n        System.out.println(Integer.toBinaryString(key.hashCode()) +\" \"+ Integer.toBinaryString(hash) + \" \" + Integer.toBinaryString((32 - 1) & hash));\n    }\n}\n```\n\n**æµ‹è¯•ç»“æœ**\n\n```java\nå­—ç¬¦ä¸²ï¼šjlkk \tIdx(16)ï¼š3 \tBitå€¼ï¼š1100011101001000010011 - 10000 \t\tIdx(32)ï¼š19\n1100011101001000100010 1100011101001000010011 10011\nå­—ç¬¦ä¸²ï¼šlopi \tIdx(16)ï¼š14 \tBitå€¼ï¼š1100101100011010001110 - 0 \t\tIdx(32)ï¼š14\n1100101100011010111100 1100101100011010001110 1110\nå­—ç¬¦ä¸²ï¼šjmdw \tIdx(16)ï¼š7 \tBitå€¼ï¼š1100011101010100100111 - 0 \t\tIdx(32)ï¼š7\n1100011101010100010110 1100011101010100100111 111\nå­—ç¬¦ä¸²ï¼še4we \tIdx(16)ï¼š3 \tBitå€¼ï¼š1011101011101101010011 - 10000 \t\tIdx(32)ï¼š19\n1011101011101101111101 1011101011101101010011 10011\nå­—ç¬¦ä¸²ï¼šio98 \tIdx(16)ï¼š4 \tBitå€¼ï¼š1100010110001011110100 - 10000 \t\tIdx(32)ï¼š20\n1100010110001011000101 1100010110001011110100 10100\nå­—ç¬¦ä¸²ï¼šnmhg \tIdx(16)ï¼š13 \tBitå€¼ï¼š1100111010011011001101 - 0 \t\tIdx(32)ï¼š13\n1100111010011011111110 1100111010011011001101 1101\nå­—ç¬¦ä¸²ï¼švfg6 \tIdx(16)ï¼š8 \tBitå€¼ï¼š1101110010111101101000 - 0 \t\tIdx(32)ï¼š8\n1101110010111101011111 1101110010111101101000 1000\nå­—ç¬¦ä¸²ï¼šgfrt \tIdx(16)ï¼š1 \tBitå€¼ï¼š1100000101111101010001 - 10000 \t\tIdx(32)ï¼š17\n1100000101111101100001 1100000101111101010001 10001\nå­—ç¬¦ä¸²ï¼šalpo \tIdx(16)ï¼š7 \tBitå€¼ï¼š1011011011101101000111 - 0 \t\tIdx(32)ï¼š7\n1011011011101101101010 1011011011101101000111 111\nå­—ç¬¦ä¸²ï¼švfbh \tIdx(16)ï¼š1 \tBitå€¼ï¼š1101110010111011000001 - 0 \t\tIdx(32)ï¼š1\n1101110010111011110110 1101110010111011000001 1\nå­—ç¬¦ä¸²ï¼šbnhj \tIdx(16)ï¼š0 \tBitå€¼ï¼š1011100011011001100000 - 0 \t\tIdx(32)ï¼š0\n1011100011011001001110 1011100011011001100000 0\nå­—ç¬¦ä¸²ï¼šzuio \tIdx(16)ï¼š8 \tBitå€¼ï¼š1110010011100110011000 - 10000 \t\tIdx(32)ï¼š24\n1110010011100110100001 1110010011100110011000 11000\nå­—ç¬¦ä¸²ï¼šiu8e \tIdx(16)ï¼š8 \tBitå€¼ï¼š1100010111100101101000 - 0 \t\tIdx(32)ï¼š8\n1100010111100101011001 1100010111100101101000 1000\nå­—ç¬¦ä¸²ï¼šyhjk \tIdx(16)ï¼š8 \tBitå€¼ï¼š1110001001010010101000 - 0 \t\tIdx(32)ï¼š8\n1110001001010010010000 1110001001010010101000 1000\nå­—ç¬¦ä¸²ï¼šplop \tIdx(16)ï¼š9 \tBitå€¼ï¼š1101001000110011101001 - 0 \t\tIdx(32)ï¼š9\n1101001000110011011101 1101001000110011101001 1001\nå­—ç¬¦ä¸²ï¼šdd0p \tIdx(16)ï¼š14 \tBitå€¼ï¼š1011101111001011101110 - 0 \t\tIdx(32)ï¼š14\n1011101111001011000000 1011101111001011101110 1110\n```\n\n- è¿™é‡Œæˆ‘ä»¬éšæœºä½¿ç”¨ä¸€äº›å­—ç¬¦ä¸²è®¡ç®—ä»–ä»¬åˆ†åˆ«åœ¨16ä½é•¿åº¦å’Œ32ä½é•¿åº¦æ•°ç»„ä¸‹çš„ç´¢å¼•åˆ†é…æƒ…å†µï¼Œçœ‹å“ªäº›æ•°æ®è¢«é‡æ–°è·¯ç”±åˆ°äº†æ–°çš„åœ°å€ã€‚\n- åŒæ—¶ï¼Œè¿™é‡Œè¿˜å¯ä»¥è§‚å¯ŸğŸ•µå‡ºä¸€ä¸ªéå¸¸é‡è¦çš„ä¿¡æ¯ï¼ŒåŸå“ˆå¸Œå€¼ä¸æ‰©å®¹æ–°å¢å‡ºæ¥çš„é•¿åº¦16ï¼Œè¿›è¡Œ&è¿ç®—ï¼Œå¦‚æœå€¼ç­‰äº0ï¼Œåˆ™ä¸‹æ ‡ä½ç½®ä¸å˜ã€‚å¦‚æœä¸ä¸º0ï¼Œé‚£ä¹ˆæ–°çš„ä½ç½®åˆ™æ˜¯åŸæ¥ä½ç½®ä¸ŠåŠ 16ã€‚ï½›è¿™ä¸ªåœ°æ–¹éœ€è¦å¥½å¥½ç†è§£ä¸‹ï¼Œå¹¶çœ‹å®éªŒæ•°æ®ï½\n- è¿™æ ·ä¸€æ¥ï¼Œå°±ä¸éœ€è¦åœ¨é‡æ–°è®¡ç®—æ¯ä¸€ä¸ªæ•°ç»„ä¸­å…ƒç´ çš„å“ˆå¸Œå€¼äº†ã€‚\n\n#### 4.2 æ•°æ®è¿ç§»\n\n![bugstack.cn æ•°æ®è¿ç§»](https://bugstack.cn/assets/images/2020/interview/interview-4-06.png)\n\n- è¿™å¼ å›¾å°±æ˜¯åŸ16ä½é•¿åº¦æ•°ç»„å…ƒç´ ï¼Œåƒ32ä½æ•°ç»„é•¿åº¦ä¸­è½¬ç§»çš„è¿‡ç¨‹ã€‚\n- å…¶ä¸­é»„è‰²åŒºåŸŸå…ƒç´ `zuio`å› è®¡ç®—ç»“æœ `hash & oldCap` ä¸ä¸º1ï¼Œåˆ™è¢«è¿ç§»åˆ°ä¸‹æ ‡ä½ç½®24ã€‚\n- åŒæ—¶è¿˜æ˜¯ç”¨é‡æ–°è®¡ç®—å“ˆå¸Œå€¼çš„æ–¹å¼éªŒè¯äº†ï¼Œç¡®å®åˆ†é…åˆ°24çš„ä½ç½®ï¼Œå› ä¸ºè¿™æ˜¯åœ¨äºŒè¿›åˆ¶è®¡ç®—ä¸­è¡¥1çš„è¿‡ç¨‹ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡ä¸Šé¢ç®€åŒ–çš„æ–¹å¼ç¡®å®šå“ˆå¸Œå€¼çš„ä½ç½®ã€‚\n\n## å››ã€æ€»ç»“\n\n- å¦‚æœä½ èƒ½åšæŒçœ‹å®Œè¿™éƒ¨åˆ†å†…å®¹ï¼Œå¹¶æŒ‰ç…§æ–‡ä¸­çš„ä¾‹å­è¿›è¡Œç›¸åº”çš„å®éªŒéªŒè¯ï¼Œé‚£ä¹ˆä¸€å®šå¯ä»¥å­¦ä¼šæœ¬ç« èŠ‚æ¶‰åŠè¿™äº”é¡¹çŸ¥è¯†ç‚¹ï¼›`1ã€æ•£åˆ—è¡¨å®ç°`ã€`2ã€æ‰°åŠ¨å‡½æ•°`ã€`3ã€åˆå§‹åŒ–å®¹é‡`ã€`4ã€è´Ÿè½½å› å­`ã€`5ã€æ‰©å®¹å…ƒç´ æ‹†åˆ†`ã€‚\n- å¯¹æˆ‘ä¸ªäººæ¥è¯´ä»¥å‰ä¹ŸçŸ¥é“è¿™éƒ¨åˆ†çŸ¥è¯†ï¼Œä½†æ˜¯æ²¡æœ‰éªŒè¯è¿‡ï¼ŒåªçŸ¥é“æ¦‚å¿µå¦‚æ­¤ï¼Œæ­£å¥½å€Ÿç€å†™é¢è¯•æ‰‹å†Œä¸“æ ï¼ŒåŠ æ·±å­¦ä¹ ï¼Œç”¨æ•°æ®éªŒè¯ç†è®ºï¼Œè®©çŸ¥è¯†ç‚¹å¯ä»¥æ›´åŠ æ·±å…¥çš„ç†è§£ã€‚\n- è¿™ä¸€ç« èŠ‚å®Œäº‹ï¼Œä¸‹ä¸€ç« èŠ‚ç»§ç»­è¿›è¡ŒHashMapçš„å…¶ä»–çŸ¥è¯†ç‚¹æŒ–æ˜ï¼Œè®©æ‡‚äº†å°±æ˜¯çœŸçš„æ‡‚äº†ã€‚å¥½äº†ï¼Œå†™åˆ°è¿™é‡Œäº†ï¼Œæ„Ÿè°¢å¤§å®¶çš„é˜…è¯»ã€‚å¦‚æœæŸå¤„æ²¡æœ‰æè¿°æ¸…æ¥šï¼Œæˆ–è€…æœ‰ä¸ç†è§£çš„ç‚¹ï¼Œæ¬¢è¿ä¸æˆ‘è®¨è®ºäº¤æµã€‚\n\n## äº”ã€æ¨èé˜…è¯»\n\n- [HashCodeä¸ºä»€ä¹ˆä½¿ç”¨31ä½œä¸ºä¹˜æ•°ï¼Ÿ](https://bugstack.cn/interview/2020/08/04/%E9%9D%A2%E7%BB%8F%E6%89%8B%E5%86%8C-%E7%AC%AC2%E7%AF%87-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-HashCode%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A831%E4%BD%9C%E4%B8%BA%E4%B9%98%E6%95%B0.html)\n- [é¢ç»æ‰‹å†Œ Â· å¼€ç¯‡ã€Šé¢è¯•å®˜éƒ½é—®æˆ‘å•¥ã€‹](https://bugstack.cn/interview/2020/07/28/%E9%9D%A2%E7%BB%8F%E6%89%8B%E5%86%8C-%E5%BC%80%E7%AF%87-%E9%9D%A2%E8%AF%95%E5%AE%98%E9%83%BD%E9%97%AE%E6%88%91%E5%95%A5.html)\n- [å·¥ä½œä¸¤å¹´ç®€å†å†™æˆè¿™æ ·ï¼Œè°è¦ä½ å‘€ï¼](https://bugstack.cn/itstack-code-life/2020/04/11/å·¥ä½œä¸¤å¹´ç®€å†å†™æˆè¿™æ ·-è°è¦ä½ å‘€.html)\n- [è®²é“ç†ï¼Œåªè¦ä½ æ˜¯ä¸€ä¸ªçˆ±æŠ˜è…¾çš„ç¨‹åºå‘˜ï¼Œæ¯•ä¸šæ‰¾å·¥ä½œçœŸçš„ä¸éœ€è¦å†èŠ±é’±åŸ¹è®­ï¼](https://bugstack.cn/itstack-code-life/2020/04/30/è®²é“ç†-åªè¦ä½ æ˜¯ä¸€ä¸ªçˆ±æŠ˜è…¾çš„ç¨‹åºå‘˜-æ¯•ä¸šæ‰¾å·¥ä½œçœŸçš„ä¸éœ€è¦å†èŠ±é’±åŸ¹è®­.html)\n- [å¤§å­¦å››å¹´åˆ°æ¯•ä¸šå·¥ä½œ5å¹´çš„å­¦ä¹ è·¯çº¿èµ„æºæ±‡æ€»](https://bugstack.cn/itstack-code-life/2020/03/31/å¤§å­¦å››å¹´åˆ°æ¯•ä¸šå·¥ä½œ5å¹´çš„å­¦ä¹ è·¯çº¿èµ„æºæ±‡æ€».html)\n- [æºç åˆ†æ | Mybatisæ¥å£æ²¡æœ‰å®ç°ç±»ä¸ºä»€ä¹ˆå¯ä»¥æ‰§è¡Œå¢åˆ æ”¹æŸ¥](https://bugstack.cn/itstack-demo-any/2019/12/25/æºç åˆ†æ-Mybatisæ¥å£æ²¡æœ‰å®ç°ç±»ä¸ºä»€ä¹ˆå¯ä»¥æ‰§è¡Œå¢åˆ æ”¹æŸ¥.html)", "user_name": "å°å‚…å“¥", "description": "æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼", "got_view_count": 48291, "category_name": "åç«¯", "ctime": 1457483880}
{"tag_name": "Flutter", "concern_user_count": 34101, "user_id": "1926000101569870", "title": "è€å¸æœº iOS å‘¨æŠ¥ #123 | 2020-08-10", "mark_content": "è€å¸æœº iOS å‘¨æŠ¥ï¼Œåªä¸ºä½ å‘ˆç°æœ‰ä»·å€¼çš„ä¿¡æ¯ã€‚\n\nä½ ä¹Ÿå¯ä»¥ä¸ºè¿™ä¸ªé¡¹ç›®å‡ºä¸€ä»½åŠ›ï¼Œå¦‚æœå‘ç°æœ‰ä»·å€¼çš„ä¿¡æ¯ã€æ–‡ç« ã€å·¥å…·ç­‰å¯ä»¥åˆ° [Issues](https://github.com/SwiftOldDriver/iOS-Weekly/issues) é‡Œæç»™æˆ‘ä»¬ï¼Œæˆ‘ä»¬ä¼šå°½å¿«å¤„ç†ã€‚è®°å¾—å†™ä¸Šæ¨èçš„ç†ç”±å“¦ã€‚æœ‰å»ºè®®å’Œæ„è§ä¹Ÿæ¬¢è¿åˆ° [Issues](https://github.com/SwiftOldDriver/iOS-Weekly/issues) æå‡ºã€‚\n\n## WWDC20\n\næœ¬å‘¨åœ¨å‘¨æŠ¥å…¬ä¼—å·ä¸Šæˆ‘ä»¬æ¨é€äº† 4 ç¯‡ WWDC20 å†…å‚ä¸“æ å†…çš„æ–‡ç« ï¼Œæ¯ç¯‡éƒ½å¾ˆç²¾å½©ï¼\n\n- [App Clips æ¢ç´¢ä¹‹æ—…](https://mp.weixin.qq.com/s/_Uc2EBTk26IjZzS9GmVJ-g)\n- [SwiftUI ç¼–ç¨‹æŒ‡å—](https://mp.weixin.qq.com/s/smQmdXF-3VkHQnUV3G8Z3w)\n- [App Clips å¼€å‘è®¾è®¡æŒ‡åŒ—](https://mp.weixin.qq.com/s/yBBIkBdwvhJMSWsDnJJMsA)\n- [ä¸ºå…¶ä»–å•†æˆ·æ„å»º App Clips](https://mp.weixin.qq.com/s/2_pmJ0JFtAP0nbSoEj8V9g)\n\n## æ–‡ç« \n\n### ğŸŒŸ ğŸ• [Flutter 1.20 æ­£å¼å‘å¸ƒï¼Œæ–°ç‰¹æ€§è§£è¯»](https://mp.weixin.qq.com/s/Ua-463pSzEUiwl4WZMW5bw)\n\n[@é‚¦Ben](https://linwenbang.weibo.com)ï¼šFlutter 1.20 æ­£å¼å‘å¸ƒï¼Œå¸¦æ¥äº†ä¸å°‘æ–°ç‰¹æ€§ï¼ŒFlutter çš„æ›´æ–°é€Ÿåº¦è¿˜æ˜¯éå¸¸è®©äººæ»¡æ„ã€‚\n\n- å›¾æ ‡å­—ä½“æ‘‡æ ‘ä¼˜åŒ–ï¼ˆå³åˆ é™¤ä½ æœªä½¿ç”¨çš„å›¾æ ‡å­—ä½“ï¼Œé™ä½ä½“ç§¯ï¼‰\n- æä¾› SKSL é¢„çƒ­åŠŸèƒ½ï¼Œä¼˜åŒ–åŠ¨ç”»æ•ˆæœï¼ˆéœ€è¦è®¾ç½®ï¼‰ã€‚\n- ä¼˜åŒ–äº†é¼ æ ‡å‘½ä¸­æµ‹è¯•ï¼Œæé«˜ web æ€§èƒ½ã€‚\n- Dart 2.9 ä¼˜åŒ–äº† utf-8 è§£ç å™¨ï¼Œåœ¨ä½ç«¯ ARM è®¾å¤‡ä¸Šï¼Œè‹±è¯­æ–‡æœ¬çš„è§£ç é€Ÿåº¦ä¹Ÿæå‡è‡³è¿‘ 200%ï¼Œè€Œä¸­æ–‡æ–‡æœ¬æ›´æ˜¯æå‡è‡³ 400%ã€‚\n- æ”¯æŒ Android å’Œ iOS è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½ã€‚\n- æ›´æ–°äº† InteractiveViewer ç»„ä»¶ï¼ˆç”¨äºå¹³ç§»ã€ç¼©æ”¾ã€æ‹–æ‹½ä»¥åŠå¤§å°è°ƒæ•´ç­‰ï¼‰ã€‚\n- æ›´æ–° Meterial Sliderã€RangeSliderã€TimePicker ä»¥åŠ DatePicker.\n- AboutDialog ç”¨äºæ˜¾ç¤ºæ‰€æœ‰ç”¨åˆ°çš„ package çš„ licenses\n- pubspec.yaml æ–°æ ¼å¼ï¼Œä¸»è¦æ˜¯æŒ‡å®šç‰¹å®šå¹³å°\n- VSCode é›†æˆ Dart DevToolsï¼ˆå¯ä»¥ä¸æ‰“å¼€ç½‘é¡µäº†ï¼‰ã€‚\n- DevTools æ”¯æŒç½‘ç»œåˆ†æã€‚\n- VSCode é‡å‘½åæˆ–è€…ç§»åŠ¨è‡ªåŠ¨æ›´æ–°å¯¹åº”å¼•ç”¨ã€‚\n- Channel ç”Ÿæˆå™¨ï¼ˆPigeonï¼‰ï¼Œé€šè¿‡ Dart å£°æ˜ï¼Œå·¥å…·ç”Ÿæˆ Channel ä¸‰ç«¯é€šä¿¡ä»£ç ã€‚\n- è¿˜æœ‰å¾ˆå¤šçš„ bugfix ä»¥åŠä¸€äº›æ–°ç‰¹æ€§å¤„ç†ã€‚\n\né™¤äº†æ€§èƒ½ä¼˜åŒ–ä¹‹å¤–ï¼Œç‰¹åˆ«æ¨èå…³æ³¨ä¸€ä¸‹ Pigeonï¼Œå¯ä»¥èŠ‚çœä¸‹ä¸å°‘ç¼–å†™ Channel çš„æ—¶é—´ã€‚\n\n### ğŸŒŸ ğŸ• [Flutter åˆå­¦è€…å¿…è¯»çš„é«˜çº§å¸ƒå±€è§„åˆ™](https://mp.weixin.qq.com/s/t5R112IIQUc9SXwWeAgsoA)\n\n[@Damien](https://github.com/ZengyiMa)ï¼šæœ¬æ–‡é€šè¿‡ 29 ä¸ªç¤ºä¾‹æ¥å±•ç¤ºäº† Flutter é«˜çº§å¸ƒå±€è§„åˆ™å¹¶ä¸”æ€»ç»“ Flutter å¸ƒå±€çš„åŸç†å¦‚ä¸‹ï¼š\n\n1. Widget ä»å…¶çˆ¶é¡¹è·å¾—è‡ªå·±çš„çº¦æŸ ã€‚ä¸€ä¸ªâ€œçº¦æŸâ€æ˜¯ç”± 4 ä¸ª double å€¼ç»„æˆçš„ï¼šåˆ†åˆ«æ˜¯æœ€å°å’Œæœ€å¤§å®½åº¦ï¼Œä»¥åŠæœ€å°å’Œæœ€å¤§é«˜åº¦ã€‚\n2. Widget ä¼šéå†è‡ªå·±çš„ å­é¡¹ï¼ˆChildrenï¼‰åˆ—è¡¨ã€‚Widget ä¼šé€ä¸ªå‘æ¯ä¸ªå­é¡¹å‘ŠçŸ¥å®ƒä»¬çš„çº¦æŸï¼ˆå„ä¸ªå­é¡¹çš„çº¦æŸå¯ä»¥æ˜¯ä¸åŒçš„ï¼‰ï¼Œç„¶åè¯¢é—®æ¯ä¸ªå­é¡¹æƒ³è¦è®¾ç½®çš„å¤§å°ã€‚\n3. æ¥ä¸‹æ¥ï¼ŒWidget ä¸€ä¸ªä¸ªç¡®å®šå­é¡¹çš„ä½ç½®ï¼ˆåœ¨ x è½´ä¸Šç¡®å®šæ°´å¹³ä½ç½®ï¼Œåœ¨ y è½´ä¸Šç¡®å®šå‚ç›´ä½ç½®ï¼‰ã€‚\n4. æœ€åï¼ŒWidget å°†å…¶è‡ªèº«å¤§å°å‘ŠçŸ¥çˆ¶é¡¹ï¼ˆå½“ç„¶è¿™ä¸ªå¤§å°ä¹Ÿè¦ç¬¦åˆåŸå§‹çº¦æŸï¼‰ã€‚\n\nå¯¹äº Flutter åˆå­¦è€…æ¥è¯´ï¼Œè¿™æ˜¯ä¸€ç¯‡å¾ˆå¥½é˜è¿° Flutter å¸ƒå±€è§„åˆ™çš„æ–‡ç« ã€‚\n\n### ğŸ¢ [Verify your appâ€™s integrity with the new App Attest API](https://developer.apple.com/news/?id=2sngpulc)\n[@anotheren](https://github.com/anotheren)ï¼šæ–°çš„ App Attest API æ˜¯ [DeviceCheck](https://developer.apple.com/documentation/devicecheck) æ¡†æ¶çš„ä¸€éƒ¨åˆ†ï¼Œå¯å¸®åŠ©é˜²æ­¢ iOS 14 æˆ–æ›´é«˜ç‰ˆæœ¬ä¸Šçš„åº”ç”¨å—åˆ°å®‰å…¨å¨èƒï¼Œä»è€Œå‡å°‘å¯¹æœåŠ¡çš„æ¬ºè¯ˆæ€§ä½¿ç”¨ã€‚å€ŸåŠ© App Attestï¼Œä½ å¯ä»¥åœ¨è®¾å¤‡ä¸Šç”Ÿæˆç‰¹æ®Šçš„åŠ å¯†å¯†é’¥ï¼Œå¹¶åœ¨æœåŠ¡å™¨æä¾›å¯¹æ•æ„Ÿæ•°æ®çš„è®¿é—®ä¹‹å‰ï¼Œä½¿ç”¨è¯¥å¯†é’¥æ¥éªŒè¯åº”ç”¨ç¨‹åºçš„å®Œæ•´æ€§ã€‚å…¶æ ¸å¿ƒç±»ä¸º [DCAppAttestService](https://developer.apple.com/documentation/devicecheck/dcappattestservice)ã€‚Apple æä¾›äº†ä¸€ä¸ªç³»åˆ—æ–‡ç« æ¥å…·ä½“è®²è¿°å¦‚ä½•ä½¿ç”¨è¯¥æ–°ç‰¹æ€§ï¼ŒåŒ…æ‹¬ï¼š[å»ºç«‹åº”ç”¨ç¨‹åºçš„å®Œæ•´æ€§](https://developer.apple.com/documentation/devicecheck/establishing_your_app_s_integrity)ï¼›[éªŒè¯è¿æ¥åˆ°æœåŠ¡å™¨çš„åº”ç”¨ç¨‹åº](https://developer.apple.com/documentation/devicecheck/validating_apps_that_connect_to_your_server)ï¼›[è¯„ä¼°æ¬ºè¯ˆé£é™©](https://developer.apple.com/documentation/devicecheck/assessing_fraud_risk)ï¼›[å‡†å¤‡ä½¿ç”¨ App Attest æœåŠ¡](https://developer.apple.com/documentation/devicecheck/preparing_to_use_the_app_attest_service)ã€‚\n\n### ğŸ [Dependency Injection via Property Wrappers](https://www.kiloloco.com/articles/004-dependency-injection-via-property-wrappers/)\n\n[@å››å¨˜](https://kemchenj.github.io/)ï¼šä¾èµ–æ³¨å…¥æ˜¯ä¸€ç§è§£å†³é«˜ä½å±‚çº§æŠ½è±¡è€¦åˆçš„æ–¹å¼ï¼Œè¿™ç¯‡æ–‡ç« ä»‹ç»äº†åœ¨ Swift é‡Œå¦‚ä½•ç®€å•åœ°å®ç°è¿™ç§æ¨¡å¼ï¼Œå¹¶ä¸”ä½¿ç”¨ `@propertyWrapper` ä¼˜åŒ–å®ƒçš„è¯­æ³•ï¼š\n\n```swift\nstruct ContentView: View {\n    @Inject var dependency: MyDependency\n    \n    var body: some View {\n        Button(\"Tap Me\", action: dependency.doSomething)\n        // prints \"Next level injection ğŸ’‰\" when tapped\n    }\n}\n```\n\n### ğŸ¢ [SwiftÊ¼s Collection Types](https://harshil.net/blog/swift-sequence-collection-array)\n\n[@JonyFang](https://github.com/JonyFang)ï¼šè¿™ç¯‡æ–‡ç« åŸºäº Sequenceã€Collection å’Œ Array è¿›è¡Œæ‹“å±•ï¼Œè§£é‡Šäº†ä¸€äº›é‡è¦åè®®çš„åŠŸèƒ½åŠå…¶å­˜åœ¨çš„åŸå› ã€‚åœ¨æ·±å…¥æ¢è®¨å¤æ‚ç»“æ„ä¹‹å‰å¼•å…¥äº†ä¸¤é¡¹æ€è€ƒï¼š\n- 1.å¦‚ä½•è®¾è®¡ API ä»¥è¾¾åˆ°æœ€ä½è¦æ±‚ï¼Ÿ\n- 2.å¦‚ä½•è®¾è®¡å…±äº«å’Œä¸“é¡¹çš„å®ç°ï¼Ÿ\n\nSequences å’Œ Iterators æ˜¯æ„å»ºå…¶ä»–åè®®å’Œå…·ä½“ç±»å‹çš„åŸºç¡€ï¼Œæ–‡ä¸­åšäº†éƒ¨åˆ†ä»‹ç»ã€‚æœ€åä»¥ Collectionã€BidirectionalCollectonã€RandomAccessCollectionã€MutableCollectionã€RangeReplaceableCollection çš„å¯¹æ¯”åˆ†æï¼Œè§£é‡Šäº†ä¸ºä»€ä¹ˆå­˜åœ¨è¿™äº›åè®®åŠä»–ä»¬å¯ä»¥å®ç°çš„æ”¹è¿›ã€‚ä¸ºäº†è¿›ä¸€æ­¥é˜…è¯»ï¼Œä¹Ÿå¯ä»¥æ·±å…¥äº†è§£æºç ï¼Œå°½ç®¡ Swift æœ¬èº«ä»¥ C++ ç¼–å†™ï¼Œä½†æ ‡å‡†åº“å¤§éƒ¨åˆ†æ˜¯ä½¿ç”¨ Swift ç¼–å†™çš„ï¼ŒåŒ…æ‹¬[å…¬å…± API æºä»£ç ç›®å½•](http://github.com/apple/swift/blob/master/stdlib/public/core)ã€‚å¯ä»¥æœ€å…ˆä» [Sequence](http://github.com/apple/swift/blob/master/stdlib/public/core/Sequence.swift) å’Œ [Collection](http://github.com/apple/swift/blob/master/stdlib/public/core/Collection.swift) ç±»å‹çš„æºä»£ç çœ‹èµ·ã€‚\n\n### ğŸ• [MessageMockï¼šä¼˜é›…çš„æ¨¡æ‹Ÿ Objective-C æ–¹æ³•](https://mp.weixin.qq.com/s/jm2QvYqnvFCPcRPocpj9ZQ)\n\nåœ¨ä»£ç æµ‹è¯•ä¸­ï¼Œå¯¹äºä¸€äº›ä¸å®¹æ˜“è·å–çš„å¯¹è±¡ï¼Œå¯ä»¥è™šæ‹Ÿï¼ˆmockï¼‰å‡ºä¸€ä¸ªå¯¹è±¡æ¥å¸®åŠ©å®Œæˆæµ‹è¯•ã€‚åœ¨ iOS ä¸­ï¼Œå·²ç»æœ‰ OCMock è¿™æ ·æ¯”è¾ƒæœ‰åçš„å¼€æºæ¡†æ¶å»è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ä½†æ˜¯ OCMock åœ¨ä½¿ç”¨ä¸Šçš„é—®é¢˜æ˜¯æ¯”è¾ƒç¹çéº»çƒ¦ï¼Œæµ‹è¯•ä¸€ä¸ªå°çš„åŠŸèƒ½å¯èƒ½åœ¨ä½¿ç”¨ä¸Šä¹Ÿæ¯”è¾ƒéº»çƒ¦ã€‚æœ¬æ–‡ä¸ºè¿™ç§åœºæ™¯æä¾›äº†ä¸€ç§æ–°çš„æ€è·¯ï¼ŒåŸºäº `objc_msgSend` æ¥è¿›è¡Œæ–¹æ³•çš„â€œæ¨¡æ‹Ÿâ€å’Œâ€œæ ¡éªŒâ€ã€‚\n\n[é¡¹ç›®æºä»£ç ](https://github.com/indulgeIn/MessageMock)\n\n### ğŸ• [Self-Sizing UITableView Cells with SwiftUI](https://noahgilmore.com/blog/swiftui-self-sizing-cells/)\n\n[@zvving](https://github.com/zvving)ï¼šåœ¨å·²æœ‰ UIKit é¡¹ç›®ä¸­å¦‚ä½• Hybrid ä½¿ç”¨ SwiftUIï¼Œå¾ˆå¤šå°ä¼™ä¼´éƒ½å…³å¿ƒè¿™ä¸ªé—®é¢˜ã€‚ä½œè€…å°è¯•åœ¨ä¸€ä¸ªç•¥æœ‰å¤æ‚åº¦çš„åœºæ™¯ï¼šè‡ªé€‚åº” UITableviewCell ä¸­ä½¿ç”¨ SwiftUIã€‚å¦‚ä½•è§£å†³è‡ªé€‚åº”é«˜åº¦ï¼Œcell å¤ç”¨ï¼ŸçŠ¶æ€æ”¹å˜å¦‚ä½•æ›´æ–°ï¼Ÿä½œè€…å¯¹è¿™äº›é—®é¢˜åšäº†ç»†è‡´çš„æ¢ç´¢ï¼Œæä¾›ä¸é”™çš„å®è·µå‚è€ƒã€‚\n\n## å·¥å…·\n\n### [ä¸ºå•¥ Flutter Hooks æ²¡æœ‰å—åˆ°å¤ªå¤šå…³æ³¨å’Œé’çï¼Ÿ](https://mp.weixin.qq.com/s/L96a8Jc_HAzPdk4VYJ1Q3g)\n\n[@æé€Ÿç”·å­©](https://github.com/ztlyyznf001)ï¼šhooks æœ€æ—©èµ·æºäº React å½“ä¸­ï¼Œä»–å¯ä»¥æ˜¯æˆ‘ä»¬åœ¨ä¸ç”¨å†™ç±»çš„æƒ…å†µä¸‹å»ç®¡ç†æˆ‘ä»¬çš„ stateã€‚Flutter Hooks å¹¶ä¸éœ€è¦æŒæ¡ React ï¼Œä»–å¯ä»¥ä½¿æˆ‘ä»¬æ–¹ä¾¿çš„åœ¨å¤šä¸ª widget ä¸­å…±äº«åŒä¸€å¥—ä»£ç ï¼Œä»–ä¸ºæˆ‘ä»¬æä¾›äº†çŠ¶æ€ç®¡ç†çš„å¦ä¸€ç§æ€è·¯ã€‚flutter_hooks ä¸­æˆ‘ä»¬å³å¯ä»¥åªæ˜¯ç”¨ä¸€ä¸ªå‡½æ•°ä¹ŸåŒæ ·å¯ä»¥åˆ›å»ºä¸€ä¸ªç±»å»åˆ›å»ºä¸€ä¸ª hook ã€‚æ›´å¤šçš„å†…å®¹å¯ä»¥å‚è€ƒ pub.dev ä¸­çš„[æ–‡æ¡£](https://pub.dev/packages/flutter_hooks)ã€‚\n\n## ä»£ç \n\n### [ConfigableCollectionView](https://github.com/miku1958/ConfigableCollectionView)\n\n[@è€å³°](https://github.com/gesantung)ï¼šä¸€ä¸ªç±»ä¼¼ç”¨ iOS 13 UICollectionViewDiffableDataSource + CellRegistration é…ç½® UICollectionView çš„åº“, CellRegistration å°è£…äº† DataSource ç®€æ´ API é…ç½® CollectionViewï¼ŒDiffableDataSource æä¾›äº†é«˜æ•ˆå®‰å…¨æ•°æ®æ“ä½œ API, å¯¹ UICollectionView æ–°ç‰¹æ€§æ„Ÿå…´è¶£çš„è¯»è€…å¯ä»¥å°è¯•ä¸€ä¸‹ã€‚\n\n>æ¨èäººï¼š[åº„é»›æ·³å](https://weibo.com/augcommaaugust)\n\n### [HappyCodable](https://github.com/miku1958/HappyCodable)\n\n[@EyreFree](https://github.com/EyreFree)ï¼šé€šè¿‡ä½¿ç”¨ SourceKittenFramework å»è‡ªåŠ¨ç”Ÿæˆ Codable ä»£ç ï¼Œè®©äººæ›´æ„‰æ‚¦åœ°ä½¿ç”¨ Codableï¼Œå…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š\n\n- æ”¯æŒè‡ªå®šä¹‰æŸä¸ªå±æ€§çš„ Coding Keyï¼›\n- æ”¯æŒå¿½ç•¥æ‰æŸäº›ä¸èƒ½ Codable çš„å±æ€§ï¼›\n- æ”¯æŒè‡ªåŠ¨åˆæˆé RawRepresentable çš„ Enumï¼›\n- Decode æ—¶æ”¯æŒå¤šä¸ª Coding Key æ˜ å°„åŒä¸€ä¸ªå±æ€§ï¼›\n- ä¾¿äºè°ƒè¯•ï¼›\n- å¯ä»¥ä½¿ç”¨æ¨¡å‹çš„é»˜è®¤å€¼ï¼›\n- æ”¯æŒç®€å•çš„ç±»å‹è½¬æ¢ï¼Œæ¯”å¦‚è½¬æ¢ 0/1 åˆ° False/True, \"123\" åˆ° Int çš„ 123 æˆ–è€…åè¿‡æ¥ã€‚\n\n>æ¨èäººï¼š[åº„é»›æ·³å](https://weibo.com/augcommaaugust)\n\n## å†…æ¨\n\nè€å¸æœºå‘¨æŠ¥å›¢é˜Ÿè”åˆçŸ¥è¯†å°é›†å’Œ SwiftGG ç¿»è¯‘ç»„æ”¶å½•äº†ä¸€ä»½é è°±çš„å†…æ¨èŒä½ã€‚\n\nå¦‚æœä½ æƒ³**æ‰¾å·¥ä½œ**ï¼Œç‚¹è¿™é‡Œï¼šhttps://www.yuque.com/iosalliance/article/bhutav\n\nå¦‚æœä½ æƒ³**æ‹›äºº**ï¼Œç‚¹è¿™é‡Œï¼šhttps://www.yuque.com/iosalliance/article/ycyhf3\n\nå½“ç„¶ï¼Œä¹Ÿæ¬¢è¿ä½ å…³æ³¨æˆ‘ä»¬æ¯ä¸€æœŸçš„å‘¨æŠ¥ï¼Œæˆ‘ä»¬ä¼šåœ¨æ¯æœŸå‘¨æŠ¥åº•éƒ¨åŠæ—¶æ›´æ–°ç¼–è¾‘å†…æ¨å²—ä½ã€‚\n\n## å…³æ³¨æˆ‘ä»¬\n\næˆ‘ä»¬å¼€é€šäº†å…¬ä¼—å·ï¼Œæ¯æœŸå‘å¸ƒæ—¶å…¬ä¼—å·ï¼ˆLSJCodingï¼‰ä¼šæ¨é€æ¶ˆæ¯ï¼Œæ¬¢è¿å…³æ³¨ã€‚\n\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f42387938a824ecc8ace057840d56b33~tplv-k3u1fbpfcp-zoom-1.image)\n\nåŒæ—¶ä¹Ÿæ”¯æŒäº† RSS è®¢é˜…ï¼šhttps://github.com/SwiftOldDriver/iOS-Weekly/releases.atom ã€‚\n\n## è¯´æ˜\n\nğŸš§ è¡¨ç¤ºéœ€æŸå·¥å…·ï¼ŒğŸŒŸ è¡¨ç¤ºç¼–è¾‘æ¨è\n\né¢„è®¡é˜…è¯»æ—¶é—´ï¼šğŸ å¾ˆå¿«å°±èƒ½è¯»å®Œï¼ˆ1 - 10 minsï¼‰ï¼›ğŸ• ä¸­ç­‰ ï¼ˆ10 - 20 minsï¼‰ï¼›ğŸ¢ æ…¢ï¼ˆ20+ minsï¼‰\n", "user_name": "è€å¸æœºæŠ€æœ¯å‘¨æŠ¥", "description": "è€å¸æœºæŠ€æœ¯å‘¨æŠ¥ï¼Œåªä¸ºä½ å‘ˆç°æœ‰ä»·å€¼çš„ä¿¡æ¯", "got_view_count": 427217, "category_name": "iOS", "ctime": 1461266350}
{"tag_name": "JavaScript", "concern_user_count": 343215, "user_id": "1556564164747437", "title": "ç²¾è¯»ã€Šå¯è§†åŒ–æ­å»ºæ€è€ƒ - å¯Œæ–‡æœ¬æ­å»ºã€‹", "mark_content": "## 1 å¼•è¨€\n\n[ã€Œå¯è§†åŒ–æ­å»ºç³»ç»Ÿã€â€”â€”ä»è®¾è®¡åˆ°æ¶æ„ï¼Œæ¢ç´¢å‰ç«¯çš„é¢†åŸŸå’Œæ„ä¹‰](https://juejin.im/post/6854573220532748302) è¿™ç¯‡æ–‡ç« ä¸»è¦åˆ†æäº†ç°é˜¶æ®µå¯è§†åŒ–æ­å»ºçš„å‡ ç§è¡¨ç°å½¢å¼å’Œå®ç°åŸç†ï¼Œå¹¶é‡ç‚¹ä»‹ç»äº†åŸºäºå¯Œæ–‡æœ¬çš„å¯è§†åŒ–æ­å»ºæ€è·¯ï¼Œè®©äººè€³ç›®ä¸€æ–°ã€‚\n\nåŸºäºå¯Œæ–‡æœ¬çš„å¯è§†åŒ–æ­å»ºçœ‹ä¼¼å¾ˆæ–°é¢–ï¼Œä½†å…¶å®æ—©å°±è¢«å¹¿æ³›ä½¿ç”¨äº†ï¼Œä»»ä½•ä¸€ä¸ªå¯Œæ–‡æœ¬ç¼–è¾‘å™¨å‡ ä¹éƒ½æœ‰æ’å…¥è¡¨æ ¼åŠŸèƒ½ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªå…¸å‹æ’å…¥è‡ªå®šä¹‰ç»„ä»¶çš„åœºæ™¯ã€‚\n\nä½¿ç”¨è¿‡ [è¯­é›€](https://www.yuque.com/) çš„åŒå­¦åº”è¯¥çŸ¥é“ï¼Œè¿™ä¸ªäº§å“çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨å¯ä»¥æ’å…¥å„ç§å„æ ·è‡ªå®šä¹‰åŒºå—ï¼Œæ˜¯ â€œæœ€åƒæ­å»ºâ€ çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ã€‚\n\né‚£ä¹ˆç§¯æœ¨å¼æ­å»ºå’Œå¯Œæ–‡æœ¬æ­å»ºå­˜åœ¨å“ªäº›å·®å¼‚ï¼Œé™¤äº†å¯Œæ–‡æœ¬æ›´å€¾å‘äºè®°å½•é™æ€å†…å®¹å¤–ï¼Œè¿˜æœ‰å“ªäº›å·®å¼‚ï¼Œä¸¤è€…æ˜¯å¦å¯ä»¥ç»“åˆï¼Ÿæœ¬æ–‡å°†å›´ç»•è¿™ä¸¤ç‚¹è¿›è¡Œè®¨è®ºã€‚\n\n## 2 ç²¾è¯»\n\nè¿˜æ˜¯å…ˆé¡ºç€åŸæ–‡è°ˆè°ˆå¯¹å¯è§†åŒ–æ­å»ºçš„ç†è§£ï¼š\n\nå¯è§†åŒ–æ­å»ºæ˜¯é€šè¿‡å¯è§†åŒ–æ–¹å¼ä»£æ›¿å¼€å‘ã€‚**å‰ç«¯ä»£ç å¼€å‘ä¸»è¦å›´ç»•çš„æ˜¯ html + js + css**ï¼Œé‚£ä¹ˆæ— è®ºæ˜¯ markdown è¯­æ³•ï¼Œè¿˜æ˜¯åˆ›å»ºå¦ä¸€å¥—æ¨¡ç‰ˆè¯­è¨€äº¦æˆ– JSON æ„æˆçš„ DSLï¼Œ**éƒ½æ˜¯ç”¨ä¸€ç§ dsl + ç»„ä»¶ + css çš„æ–¹å¼ä»£æ›¿ html + js + css**ï¼Œå¯è§†åŒ–æ­å»ºåˆ™æ›´è¿›ä¸€æ­¥ï¼Œç”¨ ui ä»£æ›¿äº† dsl + ç»„ä»¶ï¼Œ**å³ç²¾ç®€ä¸º ui æ“ä½œ + css**ã€‚\n\nå¯ä»¥çœ‹åˆ°ï¼Œè¿™ç§è½¬æ¢çš„æ¨æ¼”è¿‡ç¨‹å­˜åœ¨ä¸€å®šç‘•ç–µï¼Œå› ä¸ºæ¯æ¬¡è½¬æ¢éƒ½æœ‰éƒ¨åˆ†æŸè€—ï¼š\n\n**ç”¨ dsl + ç»„ä»¶ ä»£æ›¿ html + jsã€‚**\n\nå¦‚æœ dsl æ‹“å±•å¾—è¶³å¤Ÿå¥½ï¼Œç†è®ºä¸Šå¯ä»¥è¾¾åˆ° html çš„æ°´å¹³ï¼Œå°¤å…¶åœ¨å‚ç›´ä¸šåŠ¡åœºæ™¯æ˜¯ä¸éœ€è¦é‚£ä¹ˆå¤šç‰¹æ®Š html æ ‡ç­¾çš„ã€‚\n\nä½†ç”¨ç»„ä»¶ä»£æ›¿ js å°±æœ‰ç‚¹å¥‡æ€ªäº†ï¼Œé¦–å…ˆå¹¶ä¸æ˜¯æ‰€æœ‰ js é€»è¾‘éƒ½æ²‰æ·€åœ¨ç»„ä»¶é‡Œï¼Œä¸€å®šæœ‰ç»„ä»¶é—´çš„è”åŠ¨é€»è¾‘æ˜¯æ— æ³•é€šè¿‡ä¸€ä¸ªç»„ä»¶ js å®Œæˆçš„ï¼Œå¦ä¸€æ–¹é¢å¦‚æœå°† js é€»è¾‘å¯„æ‰˜åœ¨ç»„ä»¶ä»£ç é‡Œï¼Œæœ¬è´¨ä¸Šæ˜¯æ²¡æœ‰ææ•ˆçš„ï¼Œç”¨æºç å¼€å‘é¡¹ç›®ä¸å¼€å‘æ­å»ºå¹³å°çš„ç»„ä»¶éƒ½æ˜¯ pro codeï¼Œæ›´æç«¯ä¸€ç‚¹æ¥è¯´ï¼Œæ— è®ºæ˜¯ç»„ä»¶é—´è”åŠ¨è¿˜æ˜¯æ•´ä¸ªåº”ç”¨éƒ½å¯ä»¥ç”¨ä¸€ä¸ªç»„ä»¶æ¥å†™ï¼Œé‚£æ­å»ºå¹³å°å°±æ— äº‹å¯åšäº†ï¼Œè¿™ä¸ªç»„ä»¶ä¹Ÿæˆäº†æ•´ä¸ªåº”ç”¨ï¼Œgame overã€‚\n\nä¸ºäº†å¼¥è¡¥è¿™å—ç¼ºæ†¾ï¼Œä½ä»£ç èƒ½åŠ›çš„å‘¼å£°è¶Šæ¥è¶Šé«˜ï¼Œè€Œä½ä»£ç èƒ½åŠ›çš„æ ¸å¿ƒåœ¨äºè®¾è®¡æ˜¯å¦åˆç†ï¼Œæ¯”å¦‚æš´éœ²å“ªäº› API å¯ä»¥è¦†ç›–å¤§éƒ¨åˆ†éœ€æ±‚ï¼Ÿå†™å¤šå°‘ä»£ç åˆé€‚ï¼Œå¦‚ä½•ä»¥æœ€å° API é€å‡ºæœ€å¤§å¼¥è¡¥ç»„ä»¶é—´ç¼ºå¤±çš„ js èƒ½åŠ›ï¼Ÿç›®å‰æ¥çœ‹ï¼Œä»¥çŠ¶æ€æ•°æ®é©±åŠ¨çš„ä½ä»£ç æ˜¯ç›¸å¯¹ä¼˜é›…çš„ã€‚\n\n**ç”¨ ui æ“ä½œ ä»£æ›¿ dsl + ç»„ä»¶ã€‚**\n\nUI æ“ä½œå¹¶ä¸æ˜¯æ ‡å‡†çš„ï¼Œç›¸æ¯”ç›´æ¥æ“ä½œæ¨¡ç‰ˆæˆ–è€… JSON DSLï¼ŒUI åŒ–åå°±ä»è€…è§ä»æ™ºè€…è§æ™ºäº†ï¼Œä½† UI åŒ–å¸¦æ¥çš„æ•ˆç‡æå‡æ˜¯å·¨å¤§çš„ï¼Œå› ä¸ºæ‰€è§å³æ‰€å¾—æ˜¯ç”Ÿäº§åŠ›çš„æºæ³‰ï¼Œä»ç›´è§‚çš„ UI å¸ƒå±€æ¥çœ‹ï¼Œå°±æ¯”ç»´æŠ¤ä»£ç æ›´è½»æ¾ã€‚ä½† UI åŒ–ä¹Ÿå­˜åœ¨ä¸¤ä¸ªé—®é¢˜ï¼Œä¸€ä¸ªæ˜¯å¯èƒ½æœ‰äººè§‰å¾—ä¸å¦‚ markdown æ•ˆç‡é«˜ï¼Œå¦ä¸€ä¸ªæ˜¯åŠŸèƒ½æœ‰ä¸¢å¤±ã€‚\n\nå¯¹äºç¬¬ä¸€ç‚¹ UI æ“ä½œæ•ˆç‡ä¸å¦‚ markdown é«˜ï¼Œå¯èƒ½å¾ˆå¤šç¨‹åºå‘˜éƒ½å´‡å°šç”¨ markdown ç»´æŠ¤æ–‡æ¡£è€Œä¸æ˜¯å¯Œæ–‡æœ¬ï¼ŒåŸå› æ˜¯è§‰å¾—ç¨‹åºå‘˜ç»´æŠ¤ä»£ç çš„æ•ˆç‡åè€Œæ¯”æ‰€è§å³æ‰€å¾—é«˜ï¼Œä½†é‚£å¯èƒ½æ˜¯é”™è§‰ï¼ŒåŸå› æ˜¯è¿˜æ²¡æœ‰é‡åˆ°å¥½ç”¨çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œä½“éªŒè¿‡è¯­é›€å¯Œæ–‡æœ¬ç¼–è¾‘å™¨åï¼Œç›¸ä¿¡å¤§éƒ¨åˆ†ç¨‹åºå‘˜éƒ½ä¸ä¼šå†æƒ³å›å¤´å†™ markdownã€‚å½“ç„¶è¯­é›€å¯Œæ–‡æœ¬æˆ˜èƒœ markdown çš„åŸå› æœ‰å¾ˆå¤šï¼Œæˆ‘è§‰å¾—ä¸»è¦ä¸¤ç‚¹æ˜¯å¸æ”¶å¹¶å…¼å®¹äº† markdown æ“ä½œä¹ æƒ¯ï¼Œä¸æ”¯æŒäº†æ›´å¤šä»… UI èƒ½åšåˆ°çš„æ‹“å±•èƒ½åŠ›ï¼Œå¯¹ markdown å½¢æˆé™ç»´æ‰“å‡»ã€‚\n\nç¬¬äºŒç‚¹åŠŸèƒ½ä¸¢å¤±å¾ˆå¥½ç†è§£ï¼Œmarkdown æœ‰ä¸€å¥—æ ‡å‡†è¯­æ³•å’Œè§£æå™¨å¯ä»¥éªŒè¯ï¼Œä½† UI æ“ä½œå¹¶æ²¡æœ‰æ ‡å‡†åŒ–ï¼Œä¹Ÿæ²¡æœ‰ç‹¬ç«‹éªŒè¯ç³»ç»Ÿï¼Œå¦‚æœæ— æ³•å›é€€åˆ°æºç æ¨¡å¼ï¼ŒUI æ²¡æœ‰å®ç°çš„åŠŸèƒ½å°±åšä¸åˆ°ã€‚\n\nå›åˆ°å¯Œæ–‡æœ¬æ­å»ºä¸Šï¼Œå…¶å®å¯Œæ–‡æœ¬æ­å»ºå’Œæ™®é€šç½‘é¡µæ„å»ºå¹¶æ²¡æœ‰æœ¬è´¨åŒºåˆ«ã€‚html æ˜¯è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€ï¼Œå¯Œæ–‡æœ¬æ˜¯è·¨å¹³å°æ–‡æ¡£æ ¼å¼ï¼Œä»é€»è¾‘ä¸Šè¿™ä¸¤ä¸ªæ ¼å¼æ˜¯å¯ä»¥äº’è½¬çš„ï¼Œåªè¦å¯Œæ–‡æœ¬è§„åˆ™ä½œå‡ºè¶³å¤Ÿå¤šçš„æ‹“å±•ï¼Œå°±å¯ä»¥å¤§è‡´è¦†ç›– html çš„èƒ½åŠ›ã€‚\n\nä½†å¯Œæ–‡æœ¬æ­å»ºæœ‰ç€æ˜¾è‘—çš„ç‰¹å¾ï¼Œå°±æ˜¯å…‰æ ‡ã€‚\n\n### ç§¯æœ¨å¼æ­å»ºå’Œå¯Œæ–‡æœ¬æ­å»ºçš„åŒºåˆ«\n\nå¯Œæ–‡æœ¬ä»¥æ–‡æœ¬ä¸ºä¸­å¿ƒï¼Œå› æ­¤ç¼–è¾‘æ–‡å­—çš„å…‰æ ‡ä¼šå¸¸é©»ï¼Œç¼–è¾‘çš„æ ¸å¿ƒé€»è¾‘æ˜¯æ’ç‰ˆæ–‡å­—ï¼Œå¹¶è€ƒè™‘å¦‚ä½•åœ¨æ–‡å­—å‘¨å›´æ·»åŠ ä¸€äº›è‡ªå®šä¹‰åŒºå—ã€‚\n\næœ‰äº†å…‰æ ‡åï¼Œåœˆé€‰ä¹Ÿéå¸¸é‡è¦ï¼Œå› ä¸ºå¤§å®¶ç¼–è¾‘æ–‡å­—æ—¶æœ‰ä¸€ç§å¾ˆè‡ªç„¶çš„æƒ³æ³•æ˜¯ï¼Œä»»ä½•æ–‡å­—åœˆé€‰åå¤åˆ¶ï¼Œå¯ä»¥ç²˜è´´åˆ°ä»»ä½•åœ°æ–¹ï¼Œé‚£ä¹ˆæ‰€æœ‰æ’å…¥åˆ°å¯Œæ–‡æœ¬ä¸­çš„è‡ªå®šä¹‰ç»„ä»¶ä¹Ÿè¦æ”¯æŒè¢«åœˆé€‰ï¼Œè¢«å¤åˆ¶ã€‚\n\nå®é™…ä¸Šå¯Œæ–‡æœ¬å†…æ’å…¥è‡ªå®šä¹‰åŒºå—ä¹Ÿå¯ä»¥è½¬æ¢ä¸ºç§¯æœ¨å¼æ­å»ºæ–¹æ¡ˆè§£å†³ï¼Œæ¯”å¦‚ä¸‹é¢çš„åœºæ™¯ï¼š\n\n```text\næ–‡æœ¬ A\nå›¾è¡¨ B\næ–‡æœ¬ C\n```\n\næˆ‘ä»¬åœ¨æ–‡æœ¬ A ä¸ æ–‡æœ¬ C ä¹‹é—´æ’å…¥å›¾è¡¨ Bï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºæ‹–æ‹½äº†ä¸‰ä¸ªç»„ä»¶ï¼šæ–‡æœ¬ç»„ä»¶ A + å›¾è¡¨ç»„ä»¶ B + æ–‡æœ¬ç»„ä»¶ Cï¼Œç„¶ååˆ†åˆ«ç¼–è¾‘è¿™ä¸‰ä¸ªç»„ä»¶ï¼Œå¾®è°ƒæ ·å¼åå¯ä»¥è¾¾åˆ°ä¸å¯Œæ–‡æœ¬ä¸€æ ·çš„ç¼–è¾‘æ•ˆæœï¼Œç”šè‡³åŠ ä¸Šè‡ªç”±å¸ƒå±€åï¼Œåœ¨å¸ƒå±€èƒ½åŠ›ä¸Šä¼šè¶…è¶Šå¯Œæ–‡æœ¬ã€‚\n\nè™½ç„¶åŠŸèƒ½å±‚é¢ä¸Šå¯Œæ–‡æœ¬ç•¥æœ‰è¾“ç»™ç§¯æœ¨å¼æ­å»ºï¼Œä½†å¯Œæ–‡æœ¬åœ¨ç¼–è¾‘ä½“éªŒä¸Šæ˜¯èƒœå‡ºçš„ï¼Œå¯¹äºæ–‡å­—è¾ƒå¤šçš„åœºæ™¯ï¼Œæˆ‘ä»¬è¿˜æ˜¯ä¼šé€‰æ‹©å¯Œæ–‡æœ¬æ–¹å¼ç¼–è¾‘è€Œä¸æ˜¯ç§¯æœ¨å¼æ­å»ºæ‹–æ‹½ N ä¸ªæ–‡æœ¬ç»„ä»¶ã€‚\n\næ‰€ä»¥å¾®è½¯ OneNote ä¹Ÿå¸å–äº†è¿™ä¸ªç»éªŒï¼Œæ¯•ç«Ÿç¬”è®°æœ¬ä¸»è¦è¿˜æ˜¯è®°å½•æ–‡å­—ï¼Œå› æ­¤è¿˜æ˜¯é‡‡ç”¨å¯Œæ–‡æœ¬çš„ç¼–è¾‘æ¨¡å¼ï¼Œä½†åˆ›é€ æ€§çš„åŠ å…¥äº†ä¸€ä¸ªä¸ªç‹¬ç«‹åŒºå—ï¼Œç‚¹å‡»ä»»ä½•åŒºåŸŸéƒ½ä¼šåˆ›é€ ä¸€ä¸ªåŒºå—ï¼Œæ•´ä¸ªæ–‡æ¡£å¯ä»¥ç”±ä¸€ä¸ªåŒºå—æ„æˆï¼Œä¹Ÿå¯ä»¥æ˜¯å¤šä¸ªåŒºå—ç»„åˆè€Œæˆï¼Œè¿™æ ·å¯¹äºè¿è´¯æ€§çš„æ–‡å­—åœºæ™¯å¯ä»¥é‡‡ç”¨ä¸€ä¸ªå¯Œæ–‡æœ¬åŒºå—ï¼Œå¯¹äºè‡ªå®šä¹‰åŒºå—è¾ƒå¤šï¼Œæ¯”å¦‚å¤§éƒ¨åˆ†æ˜¯å›¾ç‰‡å’Œè¡¨æ ¼çš„ï¼Œè¿˜å¯ä»¥å›åˆ°ç§¯æœ¨å¼æ­å»ºçš„ä½“éªŒã€‚ç”±äº OneNote é‡‡ç”¨ç»å¯¹å®šä½æ¨¡æ‹Ÿæµå¼å¸ƒå±€çš„æ€è·¯ï¼Œå½“åŒºå—é‡å æ—¶è¿˜å¯ä»¥è‡ªåŠ¨æŒ¤å‹åº•éƒ¨åŒºå—ï¼Œå› æ­¤å¤šåŒºå—æ¨¡å¼ä¸‹ç¼–è¾‘ä½“éªŒè¿˜æ˜¯ç›¸å¯¹é¡ºç•…çš„ã€‚\n\nå¯ä»¥çœ‹å‡ºæ¥è¿™æ˜¯ä¸€ç§ç»“åˆçš„å°è¯•ï¼Œä»å‰ç«¯è§’åº¦æ¥çœ‹ï¼Œå¯Œæ–‡æœ¬æœ¬è´¨ä¸Šæ˜¯å¯¹ä¸€ä¸ª div è¿›è¡Œ contenteditable ç”³æ˜ï¼Œé‚£ä¹ˆä¸€ä¸ªåº”ç”¨å¯ä»¥æ•´ä½“æ˜¯ contenteditable çš„ï¼Œä¹Ÿå¯ä»¥å±€éƒ¨å‡ ä¸ªåŒºå—æ˜¯ï¼Œè¿™ç§ä»£ç å±‚é¢çš„è‡ªç”±åº¦ä½“ç°åœ¨æ­å»ºä¸Šå°±æ˜¯ç§¯æœ¨å¼æ­å»ºå¯ä»¥ä¸å¯Œæ–‡æœ¬æ­å»ºè‡ªç”±ç»“åˆã€‚\n\n### ç§¯æœ¨å¼æ­å»ºä¸å¯Œæ–‡æœ¬æ­å»ºå¦‚ä½•ç»“åˆ\n\nå¯¹äºç§¯æœ¨å¼æ­å»ºæ¥è¯´ï¼Œå¯Œæ–‡æœ¬åªæ˜¯å…¶ä¸­ä¸€ä¸ªç»„ä»¶ï¼Œåœ¨ä¸è€ƒè™‘æœ‰å¯Œæ–‡æœ¬ç»„ä»¶æ—¶æ˜¯å®Œå…¨æ²¡æœ‰å¯Œæ–‡æœ¬èƒ½åŠ›çš„ã€‚æ¯”å¦‚ä¸€ä¸ªæ­å»ºå¹³å°åªæä¾›äº†å‡ ä¸ªå›¾è¡¨å’ŒåŸºç¡€æ§ä»¶ï¼Œä½ æ˜¯ä¸å¯èƒ½åœ¨å…¶åŸºç¡€ä¸Šä½¿ç”¨å¯Œæ–‡æœ¬èƒ½åŠ›çš„ï¼Œç”šè‡³è¿å†™é™æ€æ–‡æœ¬éƒ½åšä¸åˆ°ã€‚\n\næ‰€ä»¥å¯Œæ–‡æœ¬åªæ˜¯æ­å»ºä¸­ä¸€ä¸ªç»„ä»¶ï¼Œå°±åƒ contenteditable ä¹Ÿåªèƒ½ä¾é™„äºä¸€ä¸ªæ ‡ç­¾ï¼Œæ•´ä¸ªç½‘é¡µè¿˜æ˜¯ç”±æ ‡ç­¾ç»„æˆçš„ã€‚ä½†å¯¹äºä¸€ä¸ªæä¾›äº†å¯Œæ–‡æœ¬ç»„ä»¶çš„ç§¯æœ¨å¼æ­å»ºç³»ç»Ÿæ¥è¯´ï¼Œæ–‡å­—ä¸æ§ä»¶æ··æ’åˆæ˜¯ä¸€ä¸ªç—›ç‚¹ï¼Œæ¯•ç«Ÿè¦ä»¥ä¸€ä¸ªä¸ªåŒºå—ç»„ä»¶çš„æ–¹å¼å»æ‹–æ‹½æ–‡æœ¬èŠ‚ç‚¹ï¼Œæˆæœ¬æ¯”å¯Œæ–‡æœ¬æ¨¡å¼å¤§å¾—å¤šã€‚\n\næ‰€ä»¥ç†æƒ³æƒ…å†µæ˜¯å¯Œæ–‡æœ¬ä¸æ•´ä¸ªæ­å»ºç³»ç»Ÿä½¿ç”¨åŒä¸€å¥— DSL æè¿°ç»“æ„ï¼Œå¯Œæ–‡æœ¬åªæ˜¯åœ¨å¸ƒå±€ä¸Šæœ‰æ‰€ç®€åŒ–ï¼Œç®€åŒ–ä¸ºç®€å•çš„å¹³é“ºæ¨¡å¼å³å¯ï¼Œä½†å› ä¸º DSL æè¿°æ‰“é€šï¼Œå¯Œæ–‡æœ¬ä¹Ÿå¯ä»¥æè¿°ä½¿ç”¨æ­å»ºæä¾›çš„ä»»æ„ç»„ä»¶åµŒå¥—åœ¨å†…ï¼Œæ‰€ä»¥åªè¦ç”¨æˆ·æ„¿æ„ï¼Œå¯ä»¥å°†å¯Œæ–‡æœ¬ç»„ä»¶æ‹‰åˆ°æœ€å¤§ï¼Œæ•´ä¸ªé¡µé¢éƒ½åŸºäºå¯Œæ–‡æœ¬æ¨¡å¼å»æ­å»ºï¼Œè¿™å°±å˜æˆäº†å¯Œæ–‡æœ¬æ­å»ºï¼Œä¹Ÿå¯ä»¥å°†å¯Œæ–‡æœ¬ç¼©å°ï¼Œå°†æ™®é€šæ§ä»¶ä»¥ç§¯æœ¨æ–¹å¼æ‹–æ‹½åˆ°ç”»å¸ƒä¸­ï¼Œèµ°ç§¯æœ¨å¼æ­å»ºè·¯çº¿ã€‚\n\nç”¨ä»£ç æ–¹å¼æè¿°ç§¯æœ¨å¼æ­å»ºï¼š\n\n```html\n<bar-chart />\n<div>\n  <p>header</p>\n  <line-chart />\n  <p>footer</p>\n</div>\n```\n\nä¸Šè¿°æ¨¡å¼éœ€è¦æ‹–æ‹½ `bar-chart`ã€`div`ã€`p`ã€`line-chart`ã€`p` å…± 5 ä¸ªç»„ä»¶ã€‚å¯Œæ–‡æœ¬æ¨¡å¼åˆ™ç±»ä¼¼ä¸‹é¢çš„ç»“æ„ï¼š\n\n```html\n<bar-chart />\n<div contenteditable>\n  <p>header</p>\n  <line-chart />\n  <p>footer</p>\n</div>\n```\n\nåªè¦æ‹–æ‹½ `bar-chart`ã€`div` ä¸¤ä¸ªç»„ä»¶å³å¯ï¼Œ`div` å†…éƒ¨çš„æ–‡å­—é€šè¿‡å…‰æ ‡è¾“å…¥ï¼Œ`line-chart` é€šè¿‡å¯Œæ–‡æœ¬æŸä¸ªæŒ‰é’®æˆ–è€…é”®ç›˜å¿«æ·é”®æ·»åŠ ã€‚\n\nå¯ä»¥çœ‹åˆ°è™½ç„¶æ“ä½œæ–¹å¼ä¸åŒï¼Œä½†æœ¬è´¨ä¸Šæè¿°åè®®å¹¶æ²¡æœ‰æœ¬è´¨åŒºåˆ«ï¼Œæˆ‘ä»¬ç†è®ºä¸Šå¯ä»¥å°†ä»»ä½•å®¹å™¨æ ‡ç­¾åˆ‡æ¢ä¸ºå¯Œæ–‡æœ¬æ¨¡å¼ã€‚\n\n## 3 æ€»ç»“\n\nå¯Œæ–‡æœ¬æ˜¯ä¸€ç§é‡è¦çš„äº¤äº’æ¨¡å¼ï¼Œå¯ä»¥åŸºäºå¯Œæ–‡æœ¬æ¨¡å¼åšæ­å»ºï¼Œä¹Ÿå¯ä»¥åœ¨æ­å»ºç³»ç»Ÿä¸­åµŒå…¥å¯Œæ–‡æœ¬ç»„ä»¶ï¼Œç”šè‡³è¿˜å¯ä»¥è¿½æ±‚æ­å»ºä¸å¯Œæ–‡æœ¬çš„ç»“åˆã€‚\n\nå¯Œæ–‡æœ¬ç»„ä»¶æ—¢å¯ä»¥æ˜¯æ­å»ºç³»ç»Ÿä¸­ä¸€ä¸ªç»„ä»¶ï¼Œåˆå¯ä»¥åœ¨å†…éƒ¨æ‰¿è½½æ­å»ºç³»ç»Ÿçš„æ‰€æœ‰ç»„ä»¶ï¼Œåšåˆ°è¿™ä¸€æ­¥æ‰ç®—æ˜¯çœŸæ­£å‘æŒ¥å‡ºå¯Œæ–‡æœ¬çš„æ½œåŠ›ã€‚\n\n> è®¨è®ºåœ°å€æ˜¯ï¼š[ç²¾è¯»ã€Šå¯è§†åŒ–æ­å»ºæ€è€ƒ - å¯Œæ–‡æœ¬æ­å»ºã€‹Â· Issue #262 Â· dt-fe/weekly](https://github.com/dt-fe/weekly/issues/262)\n\n**å¦‚æœä½ æƒ³å‚ä¸è®¨è®ºï¼Œè¯· [ç‚¹å‡»è¿™é‡Œ](https://github.com/dt-fe/weekly)ï¼Œæ¯å‘¨éƒ½æœ‰æ–°çš„ä¸»é¢˜ï¼Œå‘¨æœ«æˆ–å‘¨ä¸€å‘å¸ƒã€‚å‰ç«¯ç²¾è¯» - å¸®ä½ ç­›é€‰é è°±çš„å†…å®¹ã€‚**\n\n> å…³æ³¨ **å‰ç«¯ç²¾è¯»å¾®ä¿¡å…¬ä¼—å·**\n\n<img width=200 src=\"https://img.alicdn.com/tfs/TB165W0MCzqK1RjSZFLXXcn2XXa-258-258.jpg\">\n\n> ç‰ˆæƒå£°æ˜ï¼šè‡ªç”±è½¬è½½-éå•†ç”¨-éè¡ç”Ÿ-ä¿æŒç½²åï¼ˆ[åˆ›æ„å…±äº« 3.0 è®¸å¯è¯](https://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh)ï¼‰\n", "user_name": "é»„å­æ¯…", "description": "çƒ­çˆ±ç¼–ç¨‹", "got_view_count": 361719, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "Android", "concern_user_count": 240175, "user_id": "1978776659695784", "title": "å€’è®¡æ—¶æ–¹æ¡ˆæ·±å…¥åˆ†æ", "mark_content": "# å€’è®¡æ—¶æ–¹æ¡ˆæ·±å…¥åˆ†æ\n#### ç›®å½•ä»‹ç»\n- 01.ä½¿ç”¨å¤šç§æ–¹å¼å®ç°å€’è®¡æ—¶\n- 02.å„ç§å€’è®¡æ—¶å™¨åˆ†æ\n- 03.CountDownTimerè§£è¯»\n- 04.Timerå’ŒTimerTaskè§£è¯»\n- 05.è‡ªå®šä¹‰å€’è®¡æ—¶å™¨æ¡ˆä¾‹\n\n\n\n\n### 01.ä½¿ç”¨å¤šç§æ–¹å¼å®ç°å€’è®¡æ—¶\n- é¦–å…ˆçœ‹ä¸€ä¸‹éœ€æ±‚\n    - è¦æ±‚å¯ä»¥åˆ›å»ºå¤šä¸ªå€’è®¡æ—¶å™¨ï¼Œå¯ä»¥æš‚åœï¼Œä»¥åŠæ¢å¤æš‚åœã€‚å¯ä»¥è‡ªç”±è®¾ç½®å€’è®¡æ—¶å™¨æ€»æ—¶é—´ï¼Œå€’è®¡æ—¶é—´éš”ã€‚ä¸‹é¢ä¼šä¸€æ­¥æ­¥å®ç°ä¸€ä¸ªå¤šåŠŸèƒ½å€’è®¡æ—¶å™¨ã€‚\n- 01.ä½¿ç”¨Handlerå®ç°å€’è®¡æ—¶\n    - mHandler + runnable ï¼Œè¿™ç§æ˜¯æœ€å¸¸è§çš„ä¸€ç§æ–¹å¼ã€‚å®è´¨æ˜¯ä¸æ–­è°ƒç”¨mHandler.postDelayed(this, 1000)è¾¾åˆ°å®šæ—¶å‘¨æœŸç›®çš„\n- 02.ä½¿ç”¨CountDownTimerå®ç°å€’è®¡æ—¶\n    - ä¹Ÿæ˜¯åˆ©ç”¨mHandler + runnableï¼Œåœ¨æ­¤åŸºç¡€ä¸Šç®€å•å°è£…ä¸€ä¸‹ã€‚ä½¿ç”¨åœºæ™¯æ›´å¼ºå¤§ï¼Œæ¯”å¦‚ä¸€ä¸ªé¡µé¢æœ‰å¤šä¸ªå€’è®¡æ—¶å™¨ï¼Œç”¨è¿™ä¸ªå°±å¾ˆæ–¹ä¾¿â€¦â€¦\n- 03.åˆ©ç”¨Timerå®ç°å®šæ—¶å™¨\n    - ä½¿ç”¨Timer + TimerTask + handleræ–¹å¼å®ç°å€’è®¡æ—¶\n- 04.ä½¿ç”¨chronometeræ§ä»¶å€’è®¡æ—¶\n    - æ–°å‡ºçš„ç»§æ‰¿TextViewç»„ä»¶ï¼Œé‡Œå¤´æ˜¯ä½¿ç”¨äº†View.postDelayed + runnableå®ç°å€’è®¡æ—¶\n- 05.åˆ©ç”¨åŠ¨ç”»å®ç°å€’è®¡æ—¶\n    - è¿™ç§æ–¹å¼ç”¨çš„æ¯”è¾ƒå°‘ï¼Œä½†ä¹Ÿæ˜¯ä¸€ç§æ€è·¯ã€‚ä¸»è¦æ˜¯è®¾ç½®åŠ¨ç”»æ—¶é—´ï¼Œåœ¨onAnimationUpdateç›‘å¬è®¾ç½®å€’è®¡æ—¶å¤„ç†\n- å…·ä½“ä»£ç æ¡ˆä¾‹å¯ä»¥çœ‹\n    - [6ç§å®ç°å€’è®¡æ—¶å™¨çš„ä»£ç æ¡ˆä¾‹](https://github.com/yangchong211/YCTimer/blob/master/read/01.%E5%80%92%E8%AE%A1%E6%97%B6%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F.md)\n- å…·ä½“ä»£ç æ¡ˆä¾‹\n    - [6ç§å®ç°å€’è®¡æ—¶å™¨æ–¹æ¡ˆ](https://github.com/yangchong211/YCTimer)\n\n\n\n### 02.å„ç§å€’è®¡æ—¶å™¨åˆ†æ\n- ç¬¬ä¸€ç§åˆ©ç”¨Handlerå®ç°å€’è®¡æ—¶\n    - è¿™ç§ç”¨çš„å¾ˆæ™®éï¼Œä½†å­˜åœ¨ä¸€ä¸ªé—®é¢˜ã€‚å¦‚æœæ˜¯ä¸€ä¸ªé¡µé¢éœ€è¦å¼€å¯å¤šä¸ªå€’è®¡æ—¶ã€æ¯”å¦‚åˆ—è¡¨é¡µé¢ã€‘ï¼Œåˆ™æ¯”è¾ƒéš¾å¤„ç†ã€‚\n- ç¬¬äºŒç§ä½¿ç”¨CountDownTimerå®ç°å€’è®¡æ—¶\n    - new CountDownTimer(5000, 1000).start()\n        - æœŸå¾…çš„æ•ˆæœæ˜¯ï¼šâ€œ5-4-3-2-1-finishâ€æˆ–è€…â€œ5-4-3-2-1-0â€ã€‚è¿™é‡Œï¼Œæ˜¾ç¤º 0 å’Œ finish çš„æ—¶é—´åº”è¯¥æ˜¯ä¸€è‡´çš„ï¼Œæ‰€ä»¥æŠŠ 0 æ”¾åœ¨ onFinish() é‡Œæ˜¾ç¤ºä¹Ÿå¯ä»¥ã€‚ä½†å®é™…æœ‰è¯¯å·®â€¦â€¦\n    - å­˜åœ¨çš„å‡ ä¸ªé—®é¢˜\n        - é—®é¢˜1. æ¯æ¬¡ onTick() éƒ½ä¼šæœ‰å‡ æ¯«ç§’çš„è¯¯å·®ï¼Œå¹¶ä¸æ˜¯æœŸå¾…çš„å‡†ç¡®çš„ \"5000, 4000, 3000, 2000, 1000, 0\"ã€‚\n        - é—®é¢˜2. å¤šè¿è¡Œå‡ æ¬¡ï¼Œå°±ä¼šå‘ç°è¿™å‡ æ¯«ç§’çš„è¯¯å·®ï¼Œå¯¼è‡´äº†è®¡ç®—å¾—å‡ºçš„å‰©ä½™ç§’æ•°å¹¶ä¸å‡†ç¡®ï¼Œå¦‚æœä½ çš„å€’è®¡æ—¶éœ€è¦æ˜¾ç¤ºå‰©ä½™ç§’æ•°ï¼Œå°±ä¼šå‘ç”Ÿ ç§’æ•°è·³è·ƒ/ç¼ºå¤± çš„æƒ…å†µï¼ˆæ¯”å¦‚ä¸€å¼€å§‹ä»â€œ4â€å¼€å§‹æ˜¾ç¤ºâ€”â€”ç¼ºå°‘â€œ5â€ï¼Œæˆ–è€…ç›´æ¥ä»â€œ5â€è·³åˆ°äº†â€œ3â€â€”â€”ç¼ºå°‘â€œ4â€ï¼‰ã€‚\n        - é—®é¢˜3. æœ€åä¸€æ¬¡ onTick() åˆ° onFinish() çš„é—´éš”é€šå¸¸è¶…è¿‡äº† 1 ç§’ï¼Œå·®ä¸å¤šæ˜¯ 2 ç§’å·¦å³ã€‚å¦‚æœä½ çš„å€’è®¡æ—¶åœ¨æ˜¾ç¤ºç§’æ•°ï¼Œå°±èƒ½å¾ˆæ˜æ˜¾çš„æ„Ÿè§‰åˆ°æœ€å 1 ç§’åœé¡¿çš„æ—¶é—´å¾ˆé•¿ã€‚\n        - é—®é¢˜4. å¦‚æœonTickè€—æ—¶è¶…æ—¶ï¼Œæ¯”å¦‚è¶…è¿‡äº†1000æ¯«ç§’ï¼Œåˆ™ä¼šå¯¼è‡´å‡ºç°onTickå‡ºç°è·³åŠ¨é—®é¢˜\n    - è§£å†³æ–¹æ¡ˆ\n        - å…·ä½“çœ‹libä¸­çš„CountDownTimerç±»ã€‚ä¸‹é¢ä¹Ÿä¼šåˆ†æåˆ°\n        - æ³¨æ„ï¼šonTickæ–¹æ³•ä¸­å¦‚ä½•æ‰§è¡Œè€—æ—¶æ“ä½œã€å¤§äº1ç§’çš„æ‰§è¡Œä»£ç ã€‘ï¼Œå»ºè®®ä½¿ç”¨handleræ¶ˆæ¯æœºåˆ¶è¿›è¡Œå¤„ç†ï¼Œé¿å…å‡ºç°å…¶ä»–é—®é¢˜ã€‚\n- ç¬¬ä¸‰ç§åˆ©ç”¨Timerå®ç°å®šæ—¶å™¨\n    - æ³¨æ„ç‚¹\n        - Timerå’ŒTimerTaskéƒ½æœ‰cancelæ–¹æ³•ï¼Œè€Œä¸”æœ€å¥½åŒæ—¶è°ƒç”¨ï¼›å¦‚æœå·²ç»cancelï¼Œä¸‹æ¬¡å¿…é¡»åˆ›å»ºæ–°çš„Timeræ‰èƒ½scheduleã€‚\n    - å¯èƒ½å­˜åœ¨çš„é—®é¢˜\n        - å¦‚æœä½ åœ¨å½“å‰çš„activityä¸­scheduleäº†ä¸€ä¸ªtaskï¼Œä½†æ˜¯æ²¡æœ‰ç­‰åˆ°taskç»“æŸï¼Œå°±æŒ‰Backé”®finishäº†å½“å‰çš„activityï¼ŒTimerå’ŒTimerTaskå¹¶ä¸ä¼šè‡ªåŠ¨cancelæˆ–è€…é”€æ¯ï¼Œå®ƒè¿˜ä¼šåœ¨åå°è¿è¡Œï¼Œæ­¤æ—¶å¦‚æœä½ åœ¨taskçš„æŸä¸ªé˜¶æ®µè¦è°ƒèµ·ä¸€ä¸ªæ§ä»¶ï¼ˆæ¯”å¦‚AlertDialogï¼‰ï¼Œè€Œè¯¥æ§åˆ¶ä¾èµ–è¢«é”€æ¯çš„activityï¼Œé‚£ä¹ˆå°†ä¼šå¼•å‘crashã€‚\n        - æ‰€ä»¥å»ºè®®åœ¨é¡µé¢é”€æ¯çš„æ—¶å€™ï¼Œå°†Timerå’ŒTimerTaskéƒ½æœ‰cancelç»“æŸå¹¶ä¸”è®¾ç½®æˆnull\n        - Timer çš„æ–¹å¼å®ç°å®šæ—¶ä»»åŠ¡ï¼Œç”¨æ¥åšå€’è®¡æ—¶æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚ä½†æ˜¯å¦‚æœç”¨æ¥æ‰§è¡Œå‘¨æœŸä»»åŠ¡ï¼Œæ°å¥½åˆæœ‰å¤šä¸ªä»»åŠ¡ï¼Œæ°å¥½ä¸¤ä¸ªä»»åŠ¡ä¹‹é—´çš„æ—¶é—´é—´éš”åˆæ¯”å‰ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œæ—¶é—´çŸ­å°±ä¼šå‘ç”Ÿå®šæ—¶ä¸å‡†ç¡®çš„ç°è±¡äº†ã€‚Timer åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å¦‚æœä»»åŠ¡è·‘å‡ºäº†å¼‚å¸¸ï¼ŒTimer ä¼šåœæ­¢æ‰€æœ‰çš„ä»»åŠ¡ã€‚Timer æ‰§è¡Œå‘¨æœŸä»»åŠ¡æ—¶ä¾èµ–ç³»ç»Ÿæ—¶é—´ï¼Œç³»ç»Ÿæ—¶é—´çš„å˜åŒ–ä¼šå¼•èµ· Timer ä»»åŠ¡æ‰§è¡Œçš„å˜åŒ–ã€‚\n\n\n### 03.CountDownTimerè§£è¯»\n#### 03.1 æ¥çœ‹ä¸€ä¸ªé—®é¢˜\n- å…ˆçœ‹æ¡ˆä¾‹ä»£ç ï¼Œå¦‚ä¸‹æ‰€ç¤º\n    - æœŸå¾…çš„æ•ˆæœæ˜¯ï¼šâ€œ5-4-3-2-1-finishâ€æˆ–è€…â€œ5-4-3-2-1-0â€ã€‚è¿™é‡Œï¼Œæ˜¾ç¤º 0 å’Œ finish çš„æ—¶é—´åº”è¯¥æ˜¯ä¸€è‡´çš„ï¼Œæ‰€ä»¥æŠŠ 0 æ”¾åœ¨ onFinish() é‡Œæ˜¾ç¤ºä¹Ÿå¯ä»¥ã€‚\n    ```\n    mCountDownTimer = new CountDownTimer(5000, 1000) {\n        @Override\n        public void onTick(long millisUntilFinished) {\n            Log.i(TAG, \"----å€’è®¡æ—¶----onTick--\"+millisUntilFinished);\n        }\n\n        public void onFinish() {\n            Log.i(TAG, \"----å€’è®¡æ—¶----onFinish\");\n        }\n    };\n    ```\n- ç„¶åçœ‹ä¸€ä¸‹æ‰“å°æ—¥å¿—ï¼Œå¦‚ä¸‹æ‰€ç¤º\n    ```\n    2020-08-05 10:04:28.742 17266-17266/com.yc.yctimer I/CountDownTimer: ----å€’è®¡æ—¶----onTick--5000\n    2020-08-05 10:04:29.744 17266-17266/com.yc.yctimer I/CountDownTimer: ----å€’è®¡æ—¶----onTick--3998\n    2020-08-05 10:04:30.746 17266-17266/com.yc.yctimer I/CountDownTimer: ----å€’è®¡æ—¶----onTick--2997\n    2020-08-05 10:04:31.746 17266-17266/com.yc.yctimer I/CountDownTimer: ----å€’è®¡æ—¶----onTick--1996\n    2020-08-05 10:04:32.747 17266-17266/com.yc.yctimer I/CountDownTimer: ----å€’è®¡æ—¶----onTick--995\n    2020-08-05 10:04:33.747 17266-17266/com.yc.yctimer I/CountDownTimer: ----å€’è®¡æ—¶----onFinish\n    2020-08-05 10:04:45.397 17266-17266/com.yc.yctimer I/CountDownTimer: ----å€’è®¡æ—¶----onTick--4999\n    2020-08-05 10:04:46.398 17266-17266/com.yc.yctimer I/CountDownTimer: ----å€’è®¡æ—¶----onTick--3998\n    2020-08-05 10:04:47.400 17266-17266/com.yc.yctimer I/CountDownTimer: ----å€’è®¡æ—¶----onTick--2996\n    2020-08-05 10:04:48.402 17266-17266/com.yc.yctimer I/CountDownTimer: ----å€’è®¡æ—¶----onTick--1994\n    2020-08-05 10:04:49.405 17266-17266/com.yc.yctimer I/CountDownTimer: ----å€’è®¡æ—¶----onTick--992\n    2020-08-05 10:04:50.401 17266-17266/com.yc.yctimer I/CountDownTimer: ----å€’è®¡æ—¶----onFinish\n    ```\n- å¯ä»¥çœ‹åˆ°æœ‰å‡ ä¸ªé—®é¢˜ï¼š\n    - é—®é¢˜1. æ¯æ¬¡ onTick() éƒ½ä¼šæœ‰å‡ æ¯«ç§’çš„è¯¯å·®ï¼Œå¹¶ä¸æ˜¯æœŸå¾…çš„å‡†ç¡®çš„ \"5000, 4000, 3000, 2000, 1000, 0\"ã€‚\n    - é—®é¢˜2. å¤šè¿è¡Œå‡ æ¬¡ï¼Œå°±ä¼šå‘ç°è¿™å‡ æ¯«ç§’çš„è¯¯å·®ï¼Œå¯¼è‡´äº†è®¡ç®—å¾—å‡ºçš„å‰©ä½™ç§’æ•°å¹¶ä¸å‡†ç¡®ï¼Œå¦‚æœä½ çš„å€’è®¡æ—¶éœ€è¦æ˜¾ç¤ºå‰©ä½™ç§’æ•°ï¼Œå°±ä¼šå‘ç”Ÿ ç§’æ•°è·³è·ƒ/ç¼ºå¤± çš„æƒ…å†µï¼ˆæ¯”å¦‚ä¸€å¼€å§‹ä»â€œ4â€å¼€å§‹æ˜¾ç¤ºâ€”â€”ç¼ºå°‘â€œ5â€ï¼Œæˆ–è€…ç›´æ¥ä»â€œ5â€è·³åˆ°äº†â€œ3â€â€”â€”ç¼ºå°‘â€œ4â€ï¼‰ã€‚\n    - é—®é¢˜3. æœ€åä¸€æ¬¡ onTick() åˆ° onFinish() çš„é—´éš”é€šå¸¸è¶…è¿‡äº† 1 ç§’ï¼Œå·®ä¸å¤šæ˜¯ 2 ç§’å·¦å³ã€‚å¦‚æœä½ çš„å€’è®¡æ—¶åœ¨æ˜¾ç¤ºç§’æ•°ï¼Œå°±èƒ½å¾ˆæ˜æ˜¾çš„æ„Ÿè§‰åˆ°æœ€å 1 ç§’åœé¡¿çš„æ—¶é—´å¾ˆé•¿ã€‚\n\n\n#### 03.3 åˆ†ææ—¶é—´è¯¯å·®\n- ä¸ºä»€ä¹ˆä¼šå­˜åœ¨è¿™ä¸ªé—®é¢˜\n    - å…ˆçœ‹start()æ–¹æ³•ï¼Œè®¡ç®—çš„ mStopTimeInFutureï¼ˆæœªæ¥åœæ­¢å€’è®¡æ—¶çš„æ—¶åˆ»ï¼Œå³å€’è®¡æ—¶ç»“æŸæ—¶é—´ï¼‰ åŠ äº†ä¸€ä¸ª SystemClock.elapsedRealtime() ï¼Œç³»ç»Ÿè‡ªå¼€æœºä»¥æ¥ï¼ˆåŒ…æ‹¬ç¡çœ æ—¶é—´ï¼‰çš„æ¯«ç§’æ•°ï¼Œä¹Ÿå¯ä»¥å«â€œç³»ç»Ÿæ—¶é—´æˆ³â€ã€‚\n    - å³å€’è®¡æ—¶ç»“æŸæ—¶é—´ä¸ºâ€œå½“å‰ç³»ç»Ÿæ—¶é—´æˆ³ + ä½ è®¾ç½®çš„å€’è®¡æ—¶æ—¶é•¿ mMillisInFuture â€ï¼Œä¹Ÿå°±æ˜¯è®¡ç®—å‡ºçš„ç›¸å¯¹äºæ‰‹æœºç³»ç»Ÿå¼€æœºä»¥æ¥çš„ä¸€ä¸ªæ—¶é—´ã€‚åœ¨ä¸‹é¢ä»£ç ä¸­æ‰“å°æ—¥å¿—çœ‹çœ‹\n    ```\n    public synchronized final void start() {\n        if (mMillisInFuture <= 0 && mCountdownInterval <= 0) {\n            throw new RuntimeException(\"you must set the millisInFuture > 0 or countdownInterval >0\");\n        }\n        mCancelled = false;\n        long elapsedRealtime = SystemClock.elapsedRealtime();\n        mStopTimeInFuture = elapsedRealtime + mMillisInFuture;\n        CountTimeTools.i(\"start â†’ mMillisInFuture = \" + mMillisInFuture + \", seconds = \" + mMillisInFuture / 1000 );\n        CountTimeTools.i(\"start â†’ elapsedRealtime = \" + elapsedRealtime + \", â†’ mStopTimeInFuture = \" + mStopTimeInFuture);\n        mPause = false;\n        mHandler.sendMessage(mHandler.obtainMessage(MSG));\n        if (mCountDownListener!=null){\n            mCountDownListener.onStart();\n        }\n    }\n\n    @SuppressLint(\"HandlerLeak\")\n    private Handler mHandler = new Handler() {\n        @Override\n        public void handleMessage(@NonNull Message msg) {\n            synchronized (CountDownTimer.this) {\n                if (mCancelled) {\n                    return;\n                }\n                //å‰©ä½™æ¯«ç§’æ•°\n                final long millisLeft = mStopTimeInFuture - SystemClock.elapsedRealtime();\n                if (millisLeft <= 0) {\n                    mCurrentMillisLeft = 0;\n                    if (mCountDownListener != null) {\n                        mCountDownListener.onFinish();\n                        CountTimeTools.i(\"onFinish â†’ millisLeft = \" + millisLeft);\n                    }\n                } else if (millisLeft < mCountdownInterval) {\n                    mCurrentMillisLeft = 0;\n                    CountTimeTools.i(\"handleMessage â†’ millisLeft < mCountdownInterval !\");\n                    // å‰©ä½™æ—¶é—´å°äºä¸€æ¬¡æ—¶é—´é—´éš”çš„æ—¶å€™ï¼Œä¸å†é€šçŸ¥ï¼Œåªæ˜¯å»¶è¿Ÿä¸€ä¸‹\n                    sendMessageDelayed(obtainMessage(MSG), millisLeft);\n                } else {\n                    //æœ‰å¤šä½™çš„æ—¶é—´\n                    long lastTickStart = SystemClock.elapsedRealtime();\n                    CountTimeTools.i(\"before onTick â†’ lastTickStart = \" + lastTickStart);\n                    CountTimeTools.i(\"before onTick â†’ millisLeft = \" + millisLeft + \", seconds = \" + millisLeft / 1000 );\n                    if (mCountDownListener != null) {\n                        mCountDownListener.onTick(millisLeft);\n                        CountTimeTools.i(\"after onTick â†’ elapsedRealtime = \" + SystemClock.elapsedRealtime());\n                    }\n                    mCurrentMillisLeft = millisLeft;\n                    // è€ƒè™‘ç”¨æˆ·çš„onTickéœ€è¦èŠ±è´¹æ—¶é—´,å¤„ç†ç”¨æˆ·onTickæ‰§è¡Œçš„æ—¶é—´\n                    long delay = lastTickStart + mCountdownInterval - SystemClock.elapsedRealtime();\n                    CountTimeTools.i(\"after onTick â†’ delay1 = \" + delay);\n                    // ç‰¹æ®Šæƒ…å†µï¼šç”¨æˆ·çš„onTickæ–¹æ³•èŠ±è´¹çš„æ—¶é—´æ¯”intervalé•¿ï¼Œé‚£ä¹ˆç›´æ¥è·³è½¬åˆ°ä¸‹ä¸€æ¬¡interval\n                    // æ³¨æ„ï¼Œåœ¨onTickå›è°ƒçš„æ–¹æ³•ä¸­ï¼Œä¸è¦åšäº›è€—æ—¶çš„æ“ä½œ\n                    boolean isWhile = false;\n                    while (delay < 0){\n                        delay += mCountdownInterval;\n                        isWhile = true;\n                    }\n                    if (isWhile){\n                        CountTimeTools.i(\"after onTickæ‰§è¡Œè¶…æ—¶ â†’ delay2 = \" + delay);\n                    }\n                    sendMessageDelayed(obtainMessage(MSG), delay);\n                }\n            }\n        }\n    };\n    ```\n- ç„¶åçœ‹ä¸€ä¸‹æ—¥å¿—\n    ```\n    2020-08-05 13:36:02.475 8742-8742/com.yc.yctimer I/CountDownTimer: start â†’ mMillisInFuture = 5000, seconds = 5\n    2020-08-05 13:36:02.475 8742-8742/com.yc.yctimer I/CountDownTimer: start â†’ elapsedRealtime = 122669630, â†’ mStopTimeInFuture = 122674630\n    2020-08-05 13:36:02.478 8742-8742/com.yc.yctimer I/CountDownTimer: before onTick â†’ lastTickStart = 122669634\n    2020-08-05 13:36:02.478 8742-8742/com.yc.yctimer I/CountDownTimer: before onTick â†’ millisLeft = 4996, seconds = 4\n    2020-08-05 13:36:02.479 8742-8742/com.yc.yctimer I/CountDownTimer: after onTick â†’ elapsedRealtime = 122669635\n    2020-08-05 13:36:02.479 8742-8742/com.yc.yctimer I/CountDownTimer: after onTick â†’ delay1 = 999\n    2020-08-05 13:36:03.480 8742-8742/com.yc.yctimer I/CountDownTimer: before onTick â†’ lastTickStart = 122670636\n    2020-08-05 13:36:03.480 8742-8742/com.yc.yctimer I/CountDownTimer: before onTick â†’ millisLeft = 3994, seconds = 3\n    2020-08-05 13:36:03.483 8742-8742/com.yc.yctimer I/CountDownTimer: after onTick â†’ elapsedRealtime = 122670639\n    2020-08-05 13:36:03.484 8742-8742/com.yc.yctimer I/CountDownTimer: after onTick â†’ delay1 = 996\n    2020-08-05 13:36:04.482 8742-8742/com.yc.yctimer I/CountDownTimer: before onTick â†’ lastTickStart = 122671638\n    2020-08-05 13:36:04.483 8742-8742/com.yc.yctimer I/CountDownTimer: before onTick â†’ millisLeft = 2992, seconds = 2\n    2020-08-05 13:36:04.486 8742-8742/com.yc.yctimer I/CountDownTimer: after onTick â†’ elapsedRealtime = 122671642\n    2020-08-05 13:36:04.486 8742-8742/com.yc.yctimer I/CountDownTimer: after onTick â†’ delay1 = 996\n    2020-08-05 13:36:05.485 8742-8742/com.yc.yctimer I/CountDownTimer: before onTick â†’ lastTickStart = 122672641\n    2020-08-05 13:36:05.485 8742-8742/com.yc.yctimer I/CountDownTimer: before onTick â†’ millisLeft = 1989, seconds = 1\n    2020-08-05 13:36:05.488 8742-8742/com.yc.yctimer I/CountDownTimer: after onTick â†’ elapsedRealtime = 122672644\n    2020-08-05 13:36:05.488 8742-8742/com.yc.yctimer I/CountDownTimer: after onTick â†’ delay1 = 997\n    2020-08-05 13:36:06.487 8742-8742/com.yc.yctimer I/CountDownTimer: handleMessage â†’ millisLeft < mCountdownInterval !\n    2020-08-05 13:36:07.481 8742-8742/com.yc.yctimer I/CountDownTimer: onFinish â†’ millisLeft = -3\n    ```\n- åˆ†æä¸€ä¸‹æ—¥å¿—\n    - å€’è®¡æ—¶ 5 ç§’ï¼Œè€Œ onTick() ä¸€å…±åªæ‰§è¡Œäº† 4 æ¬¡ã€‚åˆ†åˆ«æ˜¯å‡ºç°4ï¼Œ3ï¼Œ2ï¼Œ1\n    - start() å¯åŠ¨è®¡æ—¶æ—¶ï¼ŒmMillisInFuture = 5000ã€‚ä¸”æ ¹æ®å½“å‰ç³»ç»Ÿæ—¶é—´æˆ³ï¼ˆè®°ä¸º elapsedRealtime0 = 122669630ï¼Œå¼€å§‹ start() å€’è®¡æ—¶æ—¶çš„ç³»ç»Ÿæ—¶é—´æˆ³ï¼‰è®¡ç®—äº†å€’è®¡æ—¶ç»“æŸæ—¶ç›¸å¯¹äºç³»ç»Ÿå¼€æœºæ—¶çš„æ—¶é—´ç‚¹ mStopTimeInFutureã€‚\n    - æ­¤ååˆ°ç¬¬ä¸€æ¬¡è¿›å…¥ handleMessage() æ—¶ï¼Œä¸­é—´ç»å†äº†å¾ˆçŸ­çš„æ—¶é—´ 122669630 - 122669634 = 6 æ¯«ç§’ã€‚\n    - handleMessage() è¿™é‡Œç²¾ç¡®è®¡ç®—äº†ç¨‹åºæ‰§è¡Œæ—¶é—´ï¼Œè™½ç„¶æ˜¯ç¬¬ä¸€æ¬¡è¿›å…¥ handleMessageï¼Œä¹Ÿæ²¡æœ‰ç›´æ¥ä½¿ç”¨ mStopTimeInFutureï¼Œè€Œæ˜¯æ ¹æ®ç¨‹åºæ‰§è¡Œåˆ°æ­¤å¤„æ—¶çš„ elapsedRealtime() ï¼ˆè®°ä¸º elapsedRealtime1ï¼‰æ¥è®¡ç®—æ­¤æ—¶å‰©ä½™çš„å€’è®¡æ—¶æ—¶é•¿ã€‚\n    - millisLeft = 4996ï¼Œè¿›å…¥ elseï¼Œæ‰§è¡Œ onTick()æ–¹æ³•å›è°ƒã€‚æ‰€ä»¥ç¬¬ä¸€æ¬¡ onTick() æ—¶ï¼ŒmillisLeft = 4996ï¼Œå¯¼è‡´è®¡ç®—çš„å‰©ä½™ç§’æ•°æ˜¯â€œ4996/1000 = 4â€ï¼Œæ‰€ä»¥å€’è®¡æ—¶æ˜¾ç¤ºç§’æ•°æ˜¯ä»â€œ4â€å¼€å§‹ï¼Œè€Œä¸æ˜¯â€œ5â€å¼€å§‹ã€‚è¿™ä¾¿æ˜¯å‰é¢æåˆ°çš„ é—®é¢˜1 å’Œ é—®é¢˜2ã€‚\n    - è€ƒè™‘ç”¨æˆ·çš„onTickéœ€è¦èŠ±è´¹æ—¶é—´ï¼Œå¤„ç†ç”¨æˆ·onTickæ‰§è¡Œçš„æ—¶é—´ï¼Œäºæ˜¯ä¾¿å‘å‡ºä¸€ä¸ªå»¶è¿Ÿdelayæ—¶é—´çš„æ¶ˆæ¯sendMessageDelayed(obtainMessage(MSG), delay);åœ¨æ—¥å¿—é‡Œçœ‹åˆ°delay1 = 997\n\n\n### 03.3 onTickè€—æ—¶è¶…æ—¶\n- ä¸Šé¢åˆ†æåˆ°äº†ç”¨æˆ·çš„onTickéœ€è¦èŠ±è´¹æ—¶é—´ï¼Œå¦‚æœdelay < 0åˆ™éœ€è¦ç‰¹æ®Šå¤„ç†ï¼Œè¿™ä¸ªç©¶ç«Ÿæ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿä¸‹é¢æ¥åˆ†æä¸€ä¸‹\n- åˆ†æä¸€ä¸‹ä¸‹é¢è¿™ä¸ªwhileå¾ªç¯ä½œç”¨\n    ```\n    // è€ƒè™‘ç”¨æˆ·çš„onTickéœ€è¦èŠ±è´¹æ—¶é—´,å¤„ç†ç”¨æˆ·onTickæ‰§è¡Œçš„æ—¶é—´\n    long delay = lastTickStart + mCountdownInterval - SystemClock.elapsedRealtime();\n    CountTimeTools.i(\"after onTick â†’ delay1 = \" + delay);\n    // ç‰¹æ®Šæƒ…å†µï¼šç”¨æˆ·çš„onTickæ–¹æ³•èŠ±è´¹çš„æ—¶é—´æ¯”intervalé•¿ï¼Œé‚£ä¹ˆç›´æ¥è·³è½¬åˆ°ä¸‹ä¸€æ¬¡interval\n    while (delay < 0){\n        delay += mCountdownInterval;\n    }\n    CountTimeTools.i(\"after onTick â†’ delay2 = \" + delay);\n    sendMessageDelayed(obtainMessage(MSG), delay);\n    ```\n    - å¦‚æœè¿™æ¬¡ onTick() æ‰§è¡Œæ—¶é—´å¤ªé•¿ï¼Œè¶…è¿‡äº† mCountdownInterval ï¼Œé‚£ä¹ˆæ‰§è¡Œå®Œ onTick() åè®¡ç®—å¾—åˆ°çš„ delay æ˜¯ä¸€ä¸ªè´Ÿæ•°ï¼Œæ­¤æ—¶ç›´æ¥è·³åˆ°ä¸‹ä¸€æ¬¡ mCountdownInterval é—´éš”ï¼Œè®© delay + mCountdownIntervalã€‚\n- ä¸¾ä¸€ä¸ªä¾‹å­æ¥è¯´ä¸€ä¸‹ï¼Œä¸ç„¶è¿™é‡Œä¸å¤ªå¥½ç†è§£\n    - å‡å¦‚è®¾å®šæ¯ 1000 æ¯«ç§’æ‰§è¡Œä¸€æ¬¡ onTick()ã€‚å‡è®¾ç¬¬ä¸€æ¬¡ onTick() å¼€å§‹å‰æ—¶çš„ç›¸å¯¹äºæ‰‹æœºç³»ç»Ÿå¼€æœºæ—¶é—´çš„å‰©ä½™å€’è®¡æ—¶æ—¶é•¿æ˜¯ 5000 æ¯«ç§’ï¼Œ æ‰§è¡Œå®Œè¿™æ¬¡ onTick() æ“ä½œæ¶ˆè€—äº† 1015 æ¯«ç§’ï¼Œè¶…å‡ºäº†æˆ‘ä»¬è®¾å®šçš„ 1000 æ¯«ç§’çš„é—´éš”ï¼Œé‚£ä¹ˆç¬¬ä¸€æ¬¡è®¡ç®—çš„ delay = 1000 - 1015 = -15 < 0ï¼Œé‚£ä¹ˆè´Ÿæ•°æ„å‘³ç€ä»€ä¹ˆå‘¢ï¼Ÿ\n    - æœ¬æ¥æˆ‘ä»¬è®¾å®šçš„ onTick() è°ƒç”¨é—´éš”æ˜¯ 1000 æ¯«ç§’ï¼Œå¯æ˜¯å®ƒæ‰§è¡Œå®Œä¸€æ¬¡å´ç”¨äº† 1015 æ¯«ç§’ï¼Œç°åœ¨å‰©ä½™å€’è®¡æ—¶è¿˜å‰©ä¸‹ 5000 - 1015 = 3985 æ¯«ç§’ï¼Œæœ¬æ¥ç¬¬äºŒæ¬¡ onTick() æŒ‰æœŸæœ›åº”è¯¥æ˜¯åœ¨ 4000 æ¯«ç§’æ—¶å¼€å§‹æ‰§è¡Œçš„ï¼Œå¯æ˜¯æ­¤æ—¶ç¬¬ä¸€æ¬¡çš„ onTick() å´è¿˜æœªæ‰§è¡Œå®Œã€‚æ‰€ä»¥ç¬¬äºŒæ¬¡ onTick() å°±ä¼šè¢«å»¶è¿Ÿ delay = -15 + 1000 = 985 æ¯«ç§’ï¼Œä¹Ÿå°±æ˜¯åˆ°å‰©ä½™ 3000 æ¯«ç§’æ—¶å†æ‰§è¡Œäº†ã€‚\n    - é‚£ä¹ˆæ­¤æ—¶å°±ä¼š 3985 / 1000 = 3ï¼Œå°±ä¼šä»5è¿‡åº¦åˆ°3ï¼›ä¾æ¬¡ç±»æ¨ï¼Œåç»­çš„delayå»¶è¿Ÿ985æ¯«ç§’åæ‰§è¡ŒsendMessageDelayedï¼Œä¼šå¯¼è‡´æ—¶é—´å‡ºç°è·³è·ƒæ€§å˜åŠ¨ã€‚å…·ä½“å¯ä»¥çœ‹ä¸€ä¸‹ä¸‹é¢çš„ä¾‹å­â€¦â€¦\n- onTick()åšè€—æ—¶æ“ä½œä¼šå‡ºç°ä»€ä¹ˆæƒ…å†µ\n    - æ¯”å¦‚ä¸‹é¢ï¼Œçœ‹æ‰“å°æ—¥å¿—å¯çŸ¥ï¼š4ï¼Œ2æ²¡æœ‰ï¼Œè¿™å°±æ„å‘³ç€è¿™ä¸ªé˜¶æ®µæ²¡æœ‰æ‰§è¡Œåˆ°onTick()æ–¹æ³•ï¼Œè€Œå¦‚æœä½ åœ¨è¿™ä¸ªé‡Œæœ‰ä¸šåŠ¡é€»è¾‘ä¸æ—¶é—´èŠ‚ç‚¹æœ‰å…³ï¼Œåˆ™å¯èƒ½ä¼šå‡ºç°bug\n    ```\n    2020-08-05 13:58:00.657 11912-11912/com.yc.yctimer I/CountDownTimer: start â†’ mMillisInFuture = 5000, seconds = 5\n    2020-08-05 13:58:00.657 11912-11912/com.yc.yctimer I/CountDownTimer: start â†’ elapsedRealtime = 123987813, â†’ mStopTimeInFuture = 123992813\n    2020-08-05 13:58:01.781 11912-11912/com.yc.yctimer I/CountDownTimer: before onTick â†’ lastTickStart = 123988937\n    2020-08-05 13:58:01.781 11912-11912/com.yc.yctimer I/CountDownTimer: before onTick â†’ millisLeft = 3876, seconds = 3\n    2020-08-05 13:58:02.858 11912-11912/com.yc.yctimer I/CountDownTimer: after onTick â†’ elapsedRealtime = 123990014\n    2020-08-05 13:58:02.858 11912-11912/com.yc.yctimer I/CountDownTimer: after onTick â†’ delay1 = -77\n    2020-08-05 13:58:02.858 11912-11912/com.yc.yctimer I/CountDownTimer: after onTickæ‰§è¡Œè¶…æ—¶ â†’ delay2 = 923\n    2020-08-05 13:58:03.784 11912-11912/com.yc.yctimer I/CountDownTimer: before onTick â†’ lastTickStart = 123990940\n    2020-08-05 13:58:03.784 11912-11912/com.yc.yctimer I/CountDownTimer: before onTick â†’ millisLeft = 1873, seconds = 1\n    2020-08-05 13:58:04.896 11912-11912/com.yc.yctimer I/CountDownTimer: after onTick â†’ elapsedRealtime = 123992052\n    2020-08-05 13:58:04.896 11912-11912/com.yc.yctimer I/CountDownTimer: after onTick â†’ delay1 = -112\n    2020-08-05 13:58:04.896 11912-11912/com.yc.yctimer I/CountDownTimer: after onTickæ‰§è¡Œè¶…æ—¶ â†’ delay2 = 888\n    2020-08-05 13:58:05.788 11912-11912/com.yc.yctimer I/CountDownTimer: onFinish â†’ millisLeft = -130\n    ```\n- onTickæ–¹æ³•ä¸­å¦‚ä½•æ‰§è¡Œè€—æ—¶æ“ä½œã€å¤§äº1ç§’çš„æ‰§è¡Œä»£ç ã€‘\n    - å»ºè®®ä½¿ç”¨handleræ¶ˆæ¯æœºåˆ¶è¿›è¡Œå¤„ç†ï¼Œé¿å…å‡ºç°å…¶ä»–é—®é¢˜ã€‚\n\n\n#### 03.4 ä»£ç æ”¹è¿›å®Œå–„\n- é’ˆå¯¹ é—®é¢˜1 å’Œ é—®é¢˜ 2ï¼š\n    - é—®é¢˜æè¿°\n        - é—®é¢˜1. æ¯æ¬¡ onTick() éƒ½ä¼šæœ‰å‡ æ¯«ç§’çš„è¯¯å·®ï¼Œå¹¶ä¸æ˜¯æœŸå¾…çš„å‡†ç¡®çš„ \"5000, 4000, 3000, 2000, 1000, 0\"ã€‚\n        - é—®é¢˜2. å¤šè¿è¡Œå‡ æ¬¡ï¼Œå°±ä¼šå‘ç°è¿™å‡ æ¯«ç§’çš„è¯¯å·®ï¼Œå¯¼è‡´äº†è®¡ç®—å¾—å‡ºçš„å‰©ä½™ç§’æ•°å¹¶ä¸å‡†ç¡®ï¼Œå¦‚æœä½ çš„å€’è®¡æ—¶éœ€è¦æ˜¾ç¤ºå‰©ä½™ç§’æ•°ï¼Œå°±ä¼šå‘ç”Ÿ ç§’æ•°è·³è·ƒ/ç¼ºå¤± çš„æƒ…å†µï¼ˆæ¯”å¦‚ä¸€å¼€å§‹ä»â€œ4â€å¼€å§‹æ˜¾ç¤ºâ€”â€”ç¼ºå°‘â€œ5â€ï¼Œæˆ–è€…ç›´æ¥ä»â€œ5â€è·³åˆ°äº†â€œ3â€â€”â€”ç¼ºå°‘â€œ4â€ï¼‰ã€‚\n    - è§£å†³æ–¹æ¡ˆ\n        - è¿™2ä¸ªé—®é¢˜å¯ä»¥æ”¾åœ¨ä¸€èµ·å¤„ç†ï¼Œç½‘ä¸Šä¹Ÿæœ‰å¾ˆå¤šäººå¯¹è¿™é‡Œåšäº†æ”¹è¿›ï¼Œé‚£å°±æ˜¯ç»™æˆ‘ä»¬çš„ å€’è®¡æ—¶æ—¶é•¿æ‰©å¤§ä¸€ç‚¹ç‚¹ï¼Œé€šå¸¸æ˜¯æ‰‹åŠ¨å°† mMillisInFuture æ‰©å¤§å‡ åæ¯«ç§’\n    - æ•ˆæœ\n        - è¿™é‡Œå¤šåŠ äº† 20 æ¯«ç§’ï¼Œè¿è¡Œä¸€ä¸‹ï¼ˆä¸¾ä¸ªæ —å­ï¼‰ã€‚å€’è®¡æ—¶æ‰“å°æ—¥å¿—ï¼šâ€œ5ï¼Œ4ï¼Œ3ï¼Œ2ï¼Œ1ï¼Œfinishâ€ï¼Œ\n\n\n\n### 04.Timerå’ŒTimerTaskè§£è¯»\n#### 04.1 Timerå’ŒTimerTaskæ–¹æ³•\n- Timeræ ¸å¿ƒæ–¹æ³•å¦‚ä¸‹æ‰€ç¤º\n    ```java\n    //å®‰æ’æŒ‡å®šä»»åŠ¡åœ¨æŒ‡å®šæ—¶é—´æ‰§è¡Œã€‚å¦‚æœæ—¶é—´åœ¨è¿‡å»ï¼Œä»»åŠ¡è¢«å®‰æ’ç«‹å³æ‰§è¡Œã€‚\n    void schedule(TimerTask task, long delay)\n    //å°†æŒ‡å®šçš„ä»»åŠ¡è°ƒåº¦ä¸ºé‡å¤æ‰§è¡Œ<i>å›ºå®šå»¶è¿Ÿæ‰§è¡Œ</i>ï¼Œä»æŒ‡å®šçš„å»¶è¿Ÿå¼€å§‹ã€‚åç»­æ‰§è¡Œå¤§çº¦æŒ‰æŒ‰æŒ‡å®šå‘¨æœŸé—´éš”çš„è§„åˆ™é—´éš”è¿›è¡Œã€‚\n    void schedule(TimerTask task, long delay, long period)\n    ```\n    - ç¬¬ä¸€ä¸ªæ–¹æ³•åªæ‰§è¡Œä¸€æ¬¡ï¼›\n    - ç¬¬äºŒä¸ªæ–¹å¼æ¯éš”periodæ‰§è¡Œä¸€æ¬¡ï¼Œdelayè¡¨ç¤ºæ¯æ¬¡æ‰§è¡Œçš„å»¶æ—¶æ—¶é—´ï¼Œå…¶å®ä¸»è¦è¡¨ç°åœ¨ç¬¬ä¸€æ¬¡çš„å»¶æ—¶æ•ˆæœï¼Œæ¯”å¦‚delayè®¾ç½®ä¸º0ï¼Œé‚£ä¹ˆç«‹é©¬æ‰§è¡Œtaskå†…å®¹ï¼Œå¦‚æœè®¾ç½®ä¸º1000ï¼Œé‚£ä¹ˆç¬¬ä¸€æ¬¡æ‰§è¡Œtaskä¼šæœ‰ä¸€ç§’çš„å»¶æ—¶æ•ˆæœã€‚\n- TimerTaskæ ¸å¿ƒæ–¹æ³•\n    - TimerTaskç”¨äºç»§æ‰¿ï¼ˆæˆ–è€…ç›´æ¥å®šä¹‰å¹¶åˆå§‹åŒ–åŒ¿åç±»ï¼‰ï¼Œå¹¶é‡å†™runæ–¹æ³•ï¼Œå®šä¹‰è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘ã€‚\n    ```java\n    //å–æ¶ˆæ­¤è®¡æ—¶å™¨ä»»åŠ¡ã€‚å¦‚æœä»»åŠ¡è¢«è®¡åˆ’ä¸ºä¸€æ¬¡æ€§æ‰§è¡Œè€Œå°šæœªè¿è¡Œï¼Œæˆ–å°šæœªè¢«è®¡åˆ’ï¼Œåˆ™å®ƒå°†æ°¸è¿œä¸ä¼šè¿è¡Œã€‚\n    //å¦‚æœä»»åŠ¡è¢«å®‰æ’ä¸ºé‡å¤æ‰§è¡Œï¼Œå®ƒå°†æ°¸è¿œä¸ä¼šå†è¿è¡Œã€‚(å¦‚æœåœ¨æ­¤è°ƒç”¨å‘ç”Ÿæ—¶ä»»åŠ¡æ­£åœ¨è¿è¡Œï¼Œåˆ™ä»»åŠ¡å°†è¿è¡Œåˆ°å®Œæˆï¼Œä½†å°†ä¸å†è¿è¡Œã€‚)\n    public boolean cancel() {\n        synchronized(lock) {\n            boolean result = (state == SCHEDULED);\n            state = CANCELLED;\n            return result;\n        }\n    }\n    ```\n- å…³äºç»“æŸå®šæ—¶å™¨\n    - Timerå’ŒTimerTaskéƒ½æœ‰cancelæ–¹æ³•ï¼Œè€Œä¸”æœ€å¥½åŒæ—¶è°ƒç”¨ï¼›å¦‚æœå·²ç»cancelï¼Œä¸‹æ¬¡å¿…é¡»åˆ›å»ºæ–°çš„Timeræ‰èƒ½scheduleã€‚\n    ```java\n    public void destroyTimer() {\n        if (mTimer != null) {\n            mTimer.cancel();\n            mTimer = null;\n        }\n        if (mTimerTask != null) {\n            mTimerTask.cancel();\n            mTimerTask = null;\n        }\n    }\n    ```\n- å¯èƒ½å­˜åœ¨çš„é—®é¢˜\n    - å¦‚æœä½ åœ¨å½“å‰çš„activityä¸­scheduleäº†ä¸€ä¸ªtaskï¼Œä½†æ˜¯æ²¡æœ‰ç­‰åˆ°taskç»“æŸï¼Œå°±æŒ‰Backé”®finishäº†å½“å‰çš„activityï¼ŒTimerå’ŒTimerTaskå¹¶ä¸ä¼šè‡ªåŠ¨cancelæˆ–è€…é”€æ¯ï¼Œå®ƒè¿˜ä¼šåœ¨åå°è¿è¡Œï¼Œæ­¤æ—¶å¦‚æœä½ åœ¨taskçš„æŸä¸ªé˜¶æ®µè¦è°ƒèµ·ä¸€ä¸ªæ§ä»¶ï¼ˆæ¯”å¦‚AlertDialogï¼‰ï¼Œè€Œè¯¥æ§åˆ¶ä¾èµ–è¢«é”€æ¯çš„activityï¼Œé‚£ä¹ˆå°†ä¼šå¼•å‘crashã€‚\n    - æ‰€ä»¥å»ºè®®åœ¨é¡µé¢é”€æ¯çš„æ—¶å€™ï¼Œå°†Timerå’ŒTimerTaskéƒ½æœ‰cancelç»“æŸå¹¶ä¸”è®¾ç½®æˆnull\n    - Timer çš„æ–¹å¼å®ç°å®šæ—¶ä»»åŠ¡ï¼Œç”¨æ¥åšå€’è®¡æ—¶æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚ä½†æ˜¯å¦‚æœç”¨æ¥æ‰§è¡Œå‘¨æœŸä»»åŠ¡ï¼Œæ°å¥½åˆæœ‰å¤šä¸ªä»»åŠ¡ï¼Œæ°å¥½ä¸¤ä¸ªä»»åŠ¡ä¹‹é—´çš„æ—¶é—´é—´éš”åˆæ¯”å‰ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œæ—¶é—´çŸ­å°±ä¼šå‘ç”Ÿå®šæ—¶ä¸å‡†ç¡®çš„ç°è±¡äº†ã€‚Timer åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å¦‚æœä»»åŠ¡è·‘å‡ºäº†å¼‚å¸¸ï¼ŒTimer ä¼šåœæ­¢æ‰€æœ‰çš„ä»»åŠ¡ã€‚Timer æ‰§è¡Œå‘¨æœŸä»»åŠ¡æ—¶ä¾èµ–ç³»ç»Ÿæ—¶é—´ï¼Œç³»ç»Ÿæ—¶é—´çš„å˜åŒ–ä¼šå¼•èµ· Timer ä»»åŠ¡æ‰§è¡Œçš„å˜åŒ–ã€‚\n\n\n\n### 04.2 TimeråŸç†åˆ†æ\n- å…¶åŸºæœ¬å¤„ç†æ¨¡å‹æ˜¯å•çº¿ç¨‹è°ƒåº¦çš„ä»»åŠ¡é˜Ÿåˆ—æ¨¡å‹ï¼ŒTimerä¸åœåœ°æ¥å—è°ƒåº¦ä»»åŠ¡ï¼Œæ‰€æœ‰ä»»åŠ¡æ¥å—Timerè°ƒåº¦ååŠ å…¥TaskQueue,TimerThreadä¸åœåœ°å»TaskQueueä¸­å–ä»»åŠ¡æ¥æ‰§è¡Œã€‚\n    - [image](https://github.com/yangchong211/YCTimer/blob/master/read/timer.png)\n- æ­¤ç§æ–¹å¼çš„ä¸è¶³ä¹‹å¤„ä¸ºå½“æŸä¸ªä»»åŠ¡æ‰§è¡Œæ—¶é—´è¾ƒé•¿ï¼Œä»¥è‡´äºè¶…è¿‡äº†TaskQueueä¸­ä¸‹ä¸€ä¸ªä»»åŠ¡å¼€å§‹æ‰§è¡Œçš„æ—¶é—´ï¼Œä¼šå½±å“æ•´ä¸ªä»»åŠ¡æ‰§è¡Œçš„å®æ—¶æ€§ã€‚ä¸ºäº†æé«˜å®æ—¶æ€§ï¼Œå¯ä»¥é‡‡ç”¨å¤šä¸ªæ¶ˆè´¹è€…ä¸€èµ·æ¶ˆè´¹æ¥æé«˜å¤„ç†æ•ˆç‡ï¼Œé¿å…æ­¤ç±»é—®é¢˜çš„å®ç°ã€‚\n\n\n### 04.3 TimerTaskåˆ†æ\n- æºä»£ç å¦‚ä¸‹æ‰€ç¤º\n    - å¯ä»¥å‘ç°TimerTaskæ˜¯å®ç°Runnableæ¥å£çš„ä¸€ä¸ªæŠ½è±¡ç±»ã€‚å¦‚æœç›´æ¥ç»§æ‰¿è¯¥ç±»å¹¶ä¸”å®ç°è¯¥ç±»çš„run() æ–¹æ³•å°±å¯ä»¥äº†ï¼Œé‡Œé¢åŒ…å«è¿™ç§å¯¹åº”çš„çŠ¶æ€ã€‚\n    ```java\n    public abstract class TimerTask implements Runnable {\n        final Object lock = new Object();\n        int state = VIRGIN;\n        //è¡¨ç¤ºå°šæœªè®¡åˆ’æ­¤ä»»åŠ¡ï¼ˆä¹Ÿè¡¨ç¤ºåˆå§‹çŠ¶æ€ï¼‰\n        static final int VIRGIN = 0;\n        //è¡¨ç¤ºæ­£åœ¨æ‰§è¡Œä»»åŠ¡çŠ¶æ€\n        static final int SCHEDULED   = 1;\n        //è¡¨ç¤ºæ‰§è¡Œå®ŒæˆçŠ¶æ€\n        static final int EXECUTED    = 2;\n        //å–æ¶ˆçŠ¶æ€\n        static final int CANCELLED   = 3;\n        //ä¸‹æ¬¡æ‰§è¡Œä»»åŠ¡çš„æ—¶é—´\n        long nextExecutionTime;\n        //æ‰§è¡Œæ—¶é—´é—´éš”\n        long period = 0;\n        //å­ç±»éœ€è¦å®ç°è¯¥æ–¹æ³•ï¼Œæ‰§è¡Œçš„ä»»åŠ¡çš„ä»£ç åœ¨è¯¥æ–¹æ³•ä¸­å®ç°\n        public abstract void run();\n        //å–æ¶ˆä»»åŠ¡ï¼Œä»è¿™é‡Œæˆ‘ä»¬å¯ä»¥å¾ˆæ¸…æ¥šçŸ¥é“å–æ¶ˆä»»åŠ¡å°±æ˜¯ä¿®æ”¹çŠ¶æ€\n        public boolean cancel() {\n            synchronized(lock) {\n                boolean result = (state == SCHEDULED);\n                state = CANCELLED;\n                return result;\n            }\n        }\n    }\n    ```\n\n\n### 04.4 Timeræºç åˆ†æ\n- Timeræ‰æ˜¯çœŸæ­£çš„æ ¸å¿ƒï¼Œåœ¨åˆ›å»ºTimerå¯¹è±¡çš„åŒæ—¶ä¹Ÿåˆ›å»ºä¸€ä¸ªTimerThreadå¯¹è±¡ï¼Œè¯¥ç±»é›†æˆThreadï¼Œæœ¬è´¨ä¸Šå°±æ˜¯å¼€å¯äº†ä¸€ä¸ªçº¿ç¨‹ã€‚\n    ```java\n    public class Timer {\n        //åˆ›å»ºä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—\n        private final TaskQueue queue = new TaskQueue();\n        //åˆ›å»ºä¸€ä¸ªThreadçº¿ç¨‹å¯¹è±¡ï¼Œå¹¶ä¸”å°†queueé˜Ÿåˆ—ä¼ è¿›å»\n        private final TimerThread thread = new TimerThread(queue);\n        public Timer() {\n            this(\"Timer-\" + serialNumber());\n        }\n\n        public Timer(boolean isDaemon) {\n            this(\"Timer-\" + serialNumber(), isDaemon);\n        }\n\n        public Timer(String name) {\n            thread.setName(name);\n            thread.start();\n        }\n\n        public Timer(String name, boolean isDaemon) {\n            thread.setName(name);\n            thread.setDaemon(isDaemon);\n            thread.start();\n        }\n    }\n    ```\n- ç„¶åçœ‹ä¸€ä¸‹TimerThreadçº¿ç¨‹çš„æºç ï¼Œå¦‚ä¸‹æ‰€ç¤º\n    - é¦–å…ˆçœ‹runæ–¹æ³•ä¸­çš„mainLoop()ï¼Œå¼€å¯ä¸€ä¸ªä¸æ–­å¾ªç¯çš„çº¿ç¨‹å¦‚æœé˜Ÿåˆ—ä¸­ä¸å­˜åœ¨ä»»åŠ¡åˆ™é˜»å¡å½“å‰çš„çº¿ç¨‹ï¼Œç›´åˆ°é˜Ÿåˆ—ä¸­æ·»åŠ ä»»åŠ¡ä»¥åå”¤é†’çº¿ç¨‹ã€‚\n    - ç„¶åè·å–é˜Ÿåˆ—ä¸­æ‰§è¡Œæ—¶é—´æœ€å°çš„ä»»åŠ¡ï¼Œå¦‚æœè¯¥ä»»åŠ¡çš„çŠ¶æ€æ˜¯å–æ¶ˆçš„è¯åˆ™ä»é˜Ÿåˆ—ä¸­ç§»é™¤æ‰å†ä»é˜Ÿåˆ—ä¸­é‡æ–°è·å–ã€‚\n    - æœ€ååˆ¤æ–­å½“å‰çš„æ—¶é—´æ˜¯å¦å¤§äºç­‰äºä»»åŠ¡çš„æ‰§è¡Œçš„æ—¶é—´ï¼Œå¦‚æœä»»åŠ¡çš„æ‰§è¡Œæ—¶é—´è¿˜æœªåˆ°åˆ™å½“å‰çº¿ç¨‹å†é˜»å¡ä¸€æ®µæ—¶é—´ï¼ŒåŒæ—¶æˆ‘ä»¬è¿˜è¦å°†è¯¥ä»»åŠ¡é‡æ–°æ‰”åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­é‡æ–°æ’åºï¼Œæˆ‘ä»¬å¿…é¡»ä¿è¯é˜Ÿåˆ—ä¸­çš„ç¬¬ä¸€ä¸ªä»»åŠ¡çš„æ‰§è¡Œæ—¶é—´æ˜¯æœ€å°çš„ã€‚\n    - æ‰§è¡Œå®ŒmainLoop()æ–¹æ³•å®Œåï¼Œæ¥ç€å°±å°†newTasksMayBeScheduledè®¾ç½®ä¸ºfalseï¼Œå¹¶ä¸”æ¸…ç©ºé˜Ÿåˆ—ä¸­æ‰€æœ‰çš„ä»»åŠ¡ã€‚\n    - æ€è€ƒä¸€ä¸‹ï¼Œè¿™é‡Œçš„æœ€å°ä»»åŠ¡æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿå…ˆæŠŠè¿™ä¸ªç–‘é—®è®°ç€â€¦â€¦\n    ```java\n    class TimerThread extends Thread {\n        boolean newTasksMayBeScheduled = true;\n        private TaskQueue queue;\n\n        TimerThread(TaskQueue queue) {\n            this.queue = queue;\n        }\n\n        public void run() {\n            try {\n                mainLoop();\n            } finally {\n                synchronized(queue) {\n                //åŒæ—¶å°†çŠ¶æ€ç½®ä¸ºfalse\n                newTasksMayBeScheduled = false;\n                //æ¸…ç©ºé˜Ÿåˆ—ä¸­æ‰€æœ‰çš„ä»»åŠ¡\n                queue.clear();\n            }\n        }\n\n        private void mainLoop() {\n            //whileæ­»å¾ªç¯\n            while (true) {\n                try {\n                    TimerTask task;\n                    boolean taskFired;\n                    synchronized(queue) {\n                        //å¦‚æœä»»åŠ¡é˜Ÿåˆ—ä¸ºç©ºå¹¶ä¸”è¯¥æ ‡å¿—ä½ trueçš„è¯ï¼Œåˆ™è¯¥çº¿ç¨‹ä¸€ç›´è¿›è¡Œç­‰å¾…ä¸­ï¼Œç›´åˆ°é˜Ÿåˆ—ä¸­æœ‰ä»»åŠ¡è¿›æ¥çš„æ—¶å€™æ‰§è¡Œ queue.notifyæ‰ä¼šè§£é™¤é˜»å¡\n                        while (queue.isEmpty() && newTasksMayBeScheduled)\n                            queue.wait();\n                        //å¦‚æœé˜Ÿåˆ—ä¸­çš„å†…å®¹ä¸ºç©ºçš„è¯ç›´æ¥è·³å‡ºå¾ªç¯ï¼Œå¤–éƒ¨è°ƒç”¨è€…å¯èƒ½å–æ¶ˆäº†Timer\n                        if (queue.isEmpty())\n                            break;\n                        long currentTime, executionTime;\n                        //è·å–é˜Ÿåˆ—ä¸­æœ€è¿‘æ‰§è¡Œæ—¶é—´æœ€å°çš„ä»»åŠ¡ï¼ˆä¹Ÿå°±æ˜¯æœ€è¿‘éœ€è¦æ‰§è¡Œçš„ä»»åŠ¡ï¼‰\n                        task = queue.getMin();\n                        synchronized(task.lock) {\n                            //å¦‚æœè¯¥ä»»åŠ¡çš„çŠ¶æ€æ˜¯å–æ¶ˆçŠ¶æ€çš„è¯ï¼Œé‚£ä»é˜Ÿåˆ—ä¸­ç§»é™¤è¿™ä¸ªä»»åŠ¡ï¼Œç„¶åç»§ç»­æ‰§è¡Œå¾ªç¯é˜Ÿåˆ—æ“ä½œ\n                            if (task.state == TimerTask.CANCELLED) {\n                                queue.removeMin();\n                                continue;\n                            }\n                            //è·å–å½“å‰ç³»ç»Ÿæ—¶é—´\n                            currentTime = System.currentTimeMillis();\n                            //è·å–ä¸‹ä¸€ä¸ªç›®æ ‡è¦æ‰§è¡Œçš„æ—¶é—´\n                            executionTime = task.nextExecutionTime;\n                            //å¦‚æœä¸‹ä¸€ä¸ªç›®æ ‡è¦æ‰§è¡Œçš„æ—¶é—´å¤§äºç­‰äºç­‰äºæ—¶é—´äº†ï¼Œè¡¨ç¤ºè¦æ‰§è¡Œä»»åŠ¡äº†\n                            if (taskFired = (executionTime<=currentTime)) {\n                                //å¦‚æœtaskçš„æ—¶é—´é—´éš”ä¸º0ï¼Œè¡¨ç¤ºåªæ‰§è¡Œä¸€æ¬¡è¯¥ä»»åŠ¡\n                                if (task.period == 0) {\n                                    //å°†ä»»åŠ¡çŠ¶æ€æ”¹ä¸ºå·²æ‰§è¡ŒçŠ¶æ€ï¼ŒåŒæ—¶ä»é˜Ÿåˆ—ä¸­åˆ é™¤è¯¥ä»»åŠ¡\n                                    queue.removeMin();\n                                    task.state = TimerTask.EXECUTED;\n                                } else {\n                                    //å°†ä»»åŠ¡é‡æ–°è·Ÿé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡è¿›è¡Œæ’åˆ—ï¼Œè¦å§‹ç»ˆä¿è¯ç¬¬ä¸€ä¸ªtaskçš„æ—¶é—´æ˜¯æœ€å°çš„\n                                    queue.rescheduleMin(task.period<0 ? currentTime   - task.period\n                                                    : executionTime + task.period);\n                                }\n                            }\n                        }\n                        //è¿™é‡Œè¡¨ç¤ºæœ€è¿‘è¦æ‰§è¡Œçš„ä»»åŠ¡æ—¶é—´æ²¡æœ‰åˆ°ï¼Œé‚£ä¹ˆå†è®©å½“å‰çš„çº¿ç¨‹é˜»å¡ä¸€æ®µæ—¶é—´\n                        if (!taskFired)\n                            queue.wait(executionTime - currentTime);\n                    }\n                    //è¡¨ç¤ºè¦æ‰§è¡Œçš„ä»»åŠ¡æ—¶é—´å·²ç»åˆ°äº†ï¼Œé‚£ä¹ˆç›´æ¥è°ƒç”¨ä»»åŠ¡çš„run() æ‰§è¡Œä»£ç \n                    if (taskFired)\n                        task.run();\n                } catch(InterruptedException e) {\n                }\n            }\n        }\n    }\n    ```\n- æ¥ç€å†æ¥çœ‹ä¸€ä¸‹TaskQueueé˜Ÿåˆ—çš„æºä»£ç \n    - å¯ä»¥å‘ç°è¿™ä¸ªé˜Ÿåˆ—ä½¿ç”¨æ•°ç»„å®ç°çš„ï¼Œå¦‚æœè¶…è¿‡äº†128çš„è¯åˆ™æ‰©å®¹ä¸ºåŸæ¥çš„ä¸¤å€ã€‚è¿™ä¸ªä»£ç ä¸å¤šï¼Œæ³¨é‡Šå†™çš„å¾ˆè¯¦ç»†äº†ï¼Œæ²¡ä»€ä¹ˆå¥½è®²çš„â€¦â€¦\n    ```java\n    public class TaskQueue {\n        //åˆ›å»ºä¸€ä¸ªæ•°ç»„ä¸º128çš„æ•°ç»„å­˜æ”¾éœ€è¦æ‰§è¡Œçš„ä»»åŠ¡ï¼Œå¦‚æœè¶…è¿‡äº†128çš„è¯åˆ™æ‰©å®¹ä¸ºåŸæ¥çš„ä¸¤å€\n        private TimerTask[] queue = new TimerTask[128];\n        //ç”¨äºç»Ÿè®¡é˜Ÿåˆ—ä¸­ä»»åŠ¡çš„ä¸ªæ•°\n        private int size = 0;\n        //è¿”å›é˜Ÿåˆ—ä¸­ä»»åŠ¡çš„ä¸ªæ•°\n        int size() {\n            return size;\n        }\n\n        //ä¾æ¬¡éå†æ•°ç»„ä¸­çš„ä»»åŠ¡ï¼Œå¹¶ä¸”ç½®ä¸ºnullï¼Œæœ‰åˆ©äºå†…å­˜å›æ”¶ï¼Œæ³¨æ„è¿™é‡Œçš„ä¸‹æ ‡æ˜¯ä»1å¼€å§‹è®¡ç®—çš„ï¼Œä¸æ˜¯ä»0\n        void clear() {\n            for (int i=1; i<=size; i++)\n                queue[i] = null;\n            size = 0;\n        }\n\n        //è¿™é‡Œæ·»åŠ ä¸€ä¸ªæ–°çš„å…ƒç´ ä½¿ç”¨çš„æ˜¯æœ€å°å †çš„æ“ä½œï¼Œè¿™é‡Œä¸è¯¦ç»†è¯´æ˜äº†ã€‚\n        void add(TimerTask task) {\n            //å¦‚æœæ•°ç»„å·²ç»å­˜æ»¡ä»»åŠ¡ï¼Œé‚£ä¹ˆæ‰©å®¹ä¸€ä¸ªæ–°çš„æ•°ç»„ä¸ºä¹‹å‰çš„ä¸¤å€\n            if (size + 1 == queue.length)\n                queue = Arrays.copyOf(queue, 2*queue.length);\n            queue[++size] = task;\n            fixUp(size);\n        }\n\n        private void fixUp(int k) {\n            while (k > 1) {\n                int j = k >> 1;\n                if (queue[j].nextExecutionTime <= queue[k].nextExecutionTime)\n                    break;\n                TimerTask tmp = queue[j];  queue[j] = queue[k]; queue[k] = tmp;\n                k = j;\n            }\n        }\n    }\n    ```\n\n\n### 04.5 scheduleå‘å¸ƒä»»åŠ¡\n- å½“æˆ‘ä»¬åˆ›å»ºå¥½Timerå¹¶ä¸”å¯åŠ¨äº†å¾ªç¯çº¿ç¨‹ä»¥åï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±éœ€è¦å‘å¸ƒä»»åŠ¡ã€‚å‘å¸ƒä»»åŠ¡ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªæ–¹æ³•ã€‚\n    - schedule(TimerTask task, Date time)\n        - è¡¨ç¤ºç¬¬ä¸€æ¬¡æ‰§è¡Œä»»åŠ¡çš„æ—¶é—´ï¼Œæ—¶é—´é—´éš”ä¸º0ï¼Œä¹Ÿè¡¨ç¤ºè¯¥ä»»åŠ¡åªæ‰§è¡Œä¸€æ¬¡å°±ç»“æŸäº†\n    - schedule(TimerTask task, Date firstTime, long period)\n        - firstTime è¡¨ç¤ºç¬¬ä¸€æ¬¡æ‰§è¡Œçš„æ—¶é—´ï¼Œperiodè¡¨ç¤ºæ‰§è¡Œä»»åŠ¡çš„æ—¶é—´é—´éš”ä¹Ÿå°±æ˜¯å¤šä¹…æ—¶é—´æ‰§è¡Œä¸€æ¬¡\n    - schedule(TimerTask task, long delay)\n        - å»¶è¿Ÿ delayæ—¶é—´æ‰§è¡Œä»»åŠ¡ï¼Œä¹Ÿå°±æ˜¯åœ¨å½“å‰çš„æ—¶é—´+delayæ‰§è¡Œä»»åŠ¡ï¼ˆè¯¥æ–¹æ³•åªæ‰§è¡Œä¸€æ¬¡ä»»åŠ¡ï¼‰\n- ä¸Šé¢è¿™ä¸‰ä¸ªæ–¹æ³•éƒ½ä¼šæ‰§è¡Œschedæ–¹æ³•ï¼Œç„¶åçœ‹ä¸€ä¸‹è¿™ä¸ª\n    - sched(TimerTask task, long time, long period)\n        - ä¸Šé¢æ‰€æœ‰çš„æ‰§è¡Œä»»åŠ¡çš„å‡½æ•°æœ€åéƒ½æ˜¯è°ƒç”¨çš„è¯¥æ–¹æ³•ï¼Œtaskè¡¨ç¤ºè¦æ‰§è¡Œçš„ä»»åŠ¡ï¼Œtimeè¡¨ç¤ºè¦æ‰§è¡Œä»»åŠ¡çš„æ—¶é—´ï¼Œperiodè¡¨ç¤ºä»»åŠ¡æ‰§è¡Œçš„é—´éš”æ—¶é—´ã€‚\n    - å…·ä½“çœ‹ä¸€ä¸‹æºä»£ç \n        ```java\n        private void sched(TimerTask task, long time, long period) {\n            //å¦‚æœæ—¶é—´é—´éš”å¤§äº longæœ€å¤§å€¼çš„ä¸€èˆ¬çš„è¯ï¼Œéœ€è¦å¯¹è¯¥æ•°å€¼ /2\n            if (Math.abs(period) > (Long.MAX_VALUE >> 1))\n                period >>= 1;\n\n            synchronized(queue) {\n                //é¦–å…ˆåˆ¤æ–­è½®è®­çº¿ç¨‹æ˜¯å¦å–æ¶ˆï¼Œå¦‚æœå–æ¶ˆçŠ¶æ€ç›´æ¥æŠ›å‡ºå¼‚å¸¸\n                if (!thread.newTasksMayBeScheduled)\n                    throw new IllegalStateException(\"Timer already cancelled.\");\n                synchronized(task.lock) {\n                    //åˆ¤æ–­æ–°æ‰§è¡Œçš„ä»»åŠ¡çŠ¶æ€å¦‚æœä¸æ˜¯åˆå§‹åŒ–çŠ¶æ€è¯ï¼Œç›´æ¥æŠ›å‡ºå¼‚å¸¸\n                    if (task.state != TimerTask.VIRGIN)\n                        throw new IllegalStateException(\"Task already scheduled or cancelled\");\n                    //èµ‹å€¼ä¸‹æ¬¡æ‰§è¡Œä»»åŠ¡çš„æ—¶é—´\n                    task.nextExecutionTime = time;\n                    task.period = period;\n                    //å°†ä»»åŠ¡çŠ¶æ€ä¿®æ”¹ä¸ºå‘å¸ƒçŠ¶æ€\n                    task.state = TimerTask.SCHEDULED;\n                }\n                //å°†ä»»åŠ¡æ·»åŠ åˆ°æœ€å°å †é˜Ÿåˆ—ä¸­ï¼Œæ³¨æ„ï¼šè¿™é‡Œåœ¨æ·»åŠ åˆ°é˜Ÿåˆ—é‡Œé¢è¦ä¿è¯ç¬¬ä¸€ä¸ªå…ƒç´ å§‹ç»ˆæ˜¯æœ€å°çš„\n                queue.add(task);\n                //å¦‚æœtaskå°±æ˜¯é˜Ÿåˆ—ä¸­æœ€å°çš„ä»»åŠ¡è¯ï¼Œåˆ™ç›´æ¥å”¤é†’è½®è®­çº¿ç¨‹æ‰§è¡Œä»»åŠ¡ï¼ˆä¹Ÿå°±æ˜¯å”¤é†’TimerThreadçº¿ç¨‹ï¼‰\n                if (queue.getMin() == task)\n                    queue.notify();\n            }\n        }\n        ```\n    - ä»ä¸Šé¢çš„ä»£ç ä¸­å¯ä»¥æ¸…æ¥šçš„æ˜ç™½å‘å¸ƒä»»åŠ¡éå¸¸ç®€å•çš„ï¼Œå°±æ˜¯å¾€ä»»åŠ¡é˜Ÿåˆ—ä¸­æ·»åŠ ä»»åŠ¡ç„¶ååˆ¤æ–­æ¡ä»¶æ˜¯å¦éœ€è¦å”¤é†’è½®è®­çº¿ç¨‹å»æ‰§è¡Œä»»åŠ¡ã€‚å…¶æ ¸å¿ƒä»£ç æ˜¯åœ¨ TimerThread è½®è®­ä¸­ä»¥åŠä½¿ç”¨æœ€å°å †å®ç°çš„é˜Ÿåˆ—ä¿è¯æ¯æ¬¡å–å‡ºæ¥çš„ç¬¬ä¸€ä¸ªä»»åŠ¡çš„æ‰§è¡Œæ—¶é—´æ˜¯æœ€å°çš„ã€‚\n\n\n### 04.6 å­˜åœ¨çš„é—®é¢˜åˆ†æ\n- Timeré€šè¿‡ä¸€ä¸ªå¯»è½®çº¿ç¨‹å¾ªç¯çš„ä»é˜Ÿåˆ—ä¸­è·å–éœ€è¦æ‰§è¡Œçš„ä»»åŠ¡ï¼Œå¦‚æœä»»åŠ¡çš„æ‰§è¡Œæ—¶é—´æœªåˆ°åˆ™è¿›è¡Œç­‰å¾…ï¼ˆé€šè¿‡Objectç±»çš„ wait æ–¹æ³•å®ç°é˜»å¡ç­‰å¾…ï¼‰ä¸€æ®µæ—¶é—´å†è‡ªåŠ¨å”¤é†’æ‰§è¡Œä»»åŠ¡ã€‚\n- ä½†æ˜¯ç»†å¿ƒçš„æˆ‘ä»¬å‘ç°è¿™ä¸ªæ˜¯å•çº¿ç¨‹æ‰§è¡Œçš„å¦‚æœæœ‰å¤šä¸ªä»»åŠ¡éœ€è¦æ‰§è¡Œçš„è¯ä¼šä¸ä¼šåº”ä»˜ä¸è¿‡æ¥å‘¢ï¼Ÿç±»ä¼¼ä¸€ä¸ªç¨‹åºå‘˜ï¼Œè¦å¼€å‘å¤šä¸ªéœ€æ±‚ï¼Œè¦æ˜¯æ‰€æœ‰çš„äº‹æƒ…æ‰€è€—è´¹çš„æ—¶é—´å¾ˆçŸ­çš„è¯ï¼Œé‚£ä¹ˆå°±ä¸ä¼šå‡ºç°å»¶è¿Ÿé—®é¢˜ï¼Œè¦æ˜¯å…¶ä¸­ä¸€ä»¶æˆ–è€…æ˜¯æŸä»¶äº‹æƒ…éå¸¸è€—æ—¶é—´çš„è¯é‚£ä¹ˆåˆ™ä¼šå½±å“åˆ°åé¢äº‹æƒ…çš„æ—¶é—´ã€‚\n- å…¶å®è¿™ä¸ªç°è±¡ä¸€æ ·è·ŸTimerå‡ºç°çš„é—®é¢˜ä¹Ÿæ˜¯ä¸€æ ·çš„é“ç†ï¼Œå¦‚æœæŸä¸ªä»»åŠ¡éå¸¸è€—æ—¶é—´ï¼Œè€Œä¸”ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡åˆæ¯”è¾ƒå¤šçš„è¯ï¼Œé‚£ TimerThread æ˜¯å¿™ä¸è¿‡æ¥çš„ï¼Œè¿™æ ·å­å°±ä¼šå¯¼è‡´åé¢çš„ä»»åŠ¡å‡ºç°å»¶è¿Ÿæ‰§è¡Œçš„é—®é¢˜ï¼Œè¿›è€Œä¼šå½±å“æ‰€æœ‰çš„å®šæ—¶ä»»åŠ¡çš„å‡†ç¡®æ‰§è¡Œæ—¶é—´ã€‚\n- é‚£ä¹ˆæœ‰äººå°±ä¼šæƒ³è¦å¯ä»¥ä¸€ä¸ªTimerTaskå¯¹åº”ä¸€ä¸ªTimerä¸å°±è¡Œäº†å—ï¼Ÿä½†æ˜¯æˆ‘ä»¬è¦æ¸…æ¥šçš„æ˜ç™½è®¡ç®—æœºçš„ç³»ç»Ÿèµ„æºæ˜¯æœ‰é™çš„ï¼Œå¦‚æœæˆ‘ä»¬ä¸€ä¸ªä»»åŠ¡å°±å»å•ç‹¬çš„å¼€ä¸€ä¸ªè½®è®­çº¿ç¨‹æ‰§è¡Œçš„è¯ï¼Œå…¶å®æ˜¯æœ‰ä¸€ç‚¹æµªè´¹ç³»ç»Ÿçš„èµ„æºçš„ï¼Œå®Œå…¨æ²¡æœ‰å¿…è¦çš„ï¼Œå¦‚æœä¸éœ€è¦å®šæ—¶ä»»åŠ¡äº†è¯ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å»é”€æ¯çº¿ç¨‹é‡Šæ”¾èµ„æºçš„ï¼Œå¦‚æœæ˜¯è¿™æ ·å­çš„åå¤æ“ä½œçš„è¯ï¼Œä¸åˆ©äºæˆ‘ä»¬ç¨‹åºçš„æµç•…æ€§ã€‚\n\n\n\n### 05.è‡ªå®šä¹‰å€’è®¡æ—¶å™¨æ¡ˆä¾‹\n- ä¸ºäº†æ–¹ä¾¿å®ç°å€’è®¡æ—¶å™¨è‡ªç”±çµæ´»è®¾ç½®ï¼Œä¸”ä»£ç ç²¾ç®€ï¼Œèƒ½å¤Ÿé€‚åº”ä¸€ä¸ªé¡µé¢åˆ›å»ºå¤šä¸ªå®šæ—¶å™¨ã€‚æˆ–è€…ç”¨åœ¨åˆ—è¡¨ä¸­ï¼ŒåŒæ—¶å€’è®¡æ—¶å™¨æ”¯æŒæš‚åœï¼Œæ¢å¤å€’è®¡æ—¶ç­‰åŠŸèƒ½ã€‚è¿™ä¸ªå°±éœ€è¦åšç‰¹ä½¿å¤„ç†å‘¢ã€‚\n    ```java\n    public class CountDownTimer {\n\n        /**\n         * æ—¶é—´ï¼Œå³å¼€å§‹çš„æ—¶é—´ï¼Œé€šä¿—æ¥è¯´å°±æ˜¯å€’è®¡æ—¶æ€»æ—¶é—´\n         */\n        private long mMillisInFuture;\n        /**\n         * å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè®¡æ—¶å™¨æ˜¯å¦è¢«å–æ¶ˆ\n         * åªæœ‰è°ƒç”¨cancelæ—¶æ‰è¢«è®¾ç½®ä¸ºtrue\n         */\n        private boolean mCancelled = false;\n        /**\n         * ç”¨æˆ·æ¥æ”¶å›è°ƒçš„æ—¶é—´é—´éš”ï¼Œä¸€èˆ¬æ˜¯1ç§’\n         */\n        private long mCountdownInterval;\n        /**\n         * è®°å½•æš‚åœæ—¶å€™çš„æ—¶é—´\n         */\n        private long mStopTimeInFuture;\n        /**\n         * mas.whatå€¼\n         */\n        private static final int MSG = 520;\n        /**\n         * æš‚åœæ—¶ï¼Œå½“æ—¶å‰©ä½™æ—¶é—´\n         */\n        private long mCurrentMillisLeft;\n        /**\n         * æ˜¯å¦æš‚åœ\n         * åªæœ‰å½“è°ƒç”¨pauseæ—¶ï¼Œæ‰è®¾ç½®ä¸ºtrue\n         */\n        private boolean mPause = false;\n        /**\n         * ç›‘å¬listener\n         */\n        private TimerListener mCountDownListener;\n        /**\n         * æ˜¯å¦åˆ›å»ºå¼€å§‹\n         */\n        private boolean isStart;\n\n        public CountDownTimer(){\n            isStart = true;\n        }\n\n        public CountDownTimer(long millisInFuture, long countdownInterval) {\n            long total = millisInFuture + 20;\n            this.mMillisInFuture = total;\n            //this.mMillisInFuture = millisInFuture;\n            this.mCountdownInterval = countdownInterval;\n            isStart = true;\n        }\n\n        /**\n         * å¼€å§‹å€’è®¡æ—¶ï¼Œæ¯æ¬¡ç‚¹å‡»ï¼Œéƒ½ä¼šé‡æ–°å¼€å§‹\n         */\n        public synchronized final void start() {\n            if (mMillisInFuture <= 0 && mCountdownInterval <= 0) {\n                throw new RuntimeException(\"you must set the millisInFuture > 0 or countdownInterval >0\");\n            }\n            mCancelled = false;\n            long elapsedRealtime = SystemClock.elapsedRealtime();\n            mStopTimeInFuture = elapsedRealtime + mMillisInFuture;\n            CountTimeTools.i(\"start â†’ mMillisInFuture = \" + mMillisInFuture + \", seconds = \" + mMillisInFuture / 1000 );\n            CountTimeTools.i(\"start â†’ elapsedRealtime = \" + elapsedRealtime + \", â†’ mStopTimeInFuture = \" + mStopTimeInFuture);\n            mPause = false;\n            mHandler.sendMessage(mHandler.obtainMessage(MSG));\n            if (mCountDownListener!=null){\n                mCountDownListener.onStart();\n            }\n        }\n\n        /**\n         * å–æ¶ˆè®¡æ—¶å™¨\n         */\n        public synchronized final void cancel() {\n            if (mHandler != null) {\n                //æš‚åœ\n                mPause = false;\n                mHandler.removeMessages(MSG);\n                //å–æ¶ˆ\n                mCancelled = true;\n            }\n        }\n\n        /**\n         * æŒ‰ä¸€ä¸‹æš‚åœï¼Œå†æŒ‰ä¸€ä¸‹ç»§ç»­å€’è®¡æ—¶\n         */\n        public synchronized final void pause() {\n            if (mHandler != null) {\n                if (mCancelled) {\n                    return;\n                }\n                if (mCurrentMillisLeft < mCountdownInterval) {\n                    return;\n                }\n                if (!mPause) {\n                    mHandler.removeMessages(MSG);\n                    mPause = true;\n                }\n            }\n        }\n\n        /**\n         * æ¢å¤æš‚åœï¼Œå¼€å§‹\n         */\n        public synchronized final  void resume() {\n            if (mMillisInFuture <= 0 && mCountdownInterval <= 0) {\n                throw new RuntimeException(\"you must set the millisInFuture > 0 or countdownInterval >0\");\n            }\n            if (mCancelled) {\n                return;\n            }\n            //å‰©ä½™æ—¶é•¿å°‘äº\n            if (mCurrentMillisLeft < mCountdownInterval || !mPause) {\n                return;\n            }\n            mStopTimeInFuture = SystemClock.elapsedRealtime() + mCurrentMillisLeft;\n            mHandler.sendMessage(mHandler.obtainMessage(MSG));\n            mPause = false;\n        }\n\n\n        @SuppressLint(\"HandlerLeak\")\n        private Handler mHandler = new Handler() {\n            @Override\n            public void handleMessage(@NonNull Message msg) {\n                synchronized (CountDownTimer.this) {\n                    if (mCancelled) {\n                        return;\n                    }\n                    //å‰©ä½™æ¯«ç§’æ•°\n                    final long millisLeft = mStopTimeInFuture - SystemClock.elapsedRealtime();\n                    if (millisLeft <= 0) {\n                        mCurrentMillisLeft = 0;\n                        if (mCountDownListener != null) {\n                            mCountDownListener.onFinish();\n                            CountTimeTools.i(\"onFinish â†’ millisLeft = \" + millisLeft);\n                        }\n                    } else if (millisLeft < mCountdownInterval) {\n                        mCurrentMillisLeft = 0;\n                        CountTimeTools.i(\"handleMessage â†’ millisLeft < mCountdownInterval !\");\n                        // å‰©ä½™æ—¶é—´å°äºä¸€æ¬¡æ—¶é—´é—´éš”çš„æ—¶å€™ï¼Œä¸å†é€šçŸ¥ï¼Œåªæ˜¯å»¶è¿Ÿä¸€ä¸‹\n                        sendMessageDelayed(obtainMessage(MSG), millisLeft);\n                    } else {\n                        //æœ‰å¤šä½™çš„æ—¶é—´\n                        long lastTickStart = SystemClock.elapsedRealtime();\n                        CountTimeTools.i(\"before onTick â†’ lastTickStart = \" + lastTickStart);\n                        CountTimeTools.i(\"before onTick â†’ millisLeft = \" + millisLeft + \", seconds = \" + millisLeft / 1000 );\n                        if (mCountDownListener != null) {\n                            mCountDownListener.onTick(millisLeft);\n                            CountTimeTools.i(\"after onTick â†’ elapsedRealtime = \" + SystemClock.elapsedRealtime());\n                        }\n                        mCurrentMillisLeft = millisLeft;\n                        // è€ƒè™‘ç”¨æˆ·çš„onTickéœ€è¦èŠ±è´¹æ—¶é—´,å¤„ç†ç”¨æˆ·onTickæ‰§è¡Œçš„æ—¶é—´\n                        // æ‰“å°è¿™ä¸ªdelayæ—¶é—´ï¼Œå¤§æ¦‚æ˜¯997æ¯«ç§’\n                        long delay = lastTickStart + mCountdownInterval - SystemClock.elapsedRealtime();\n                        CountTimeTools.i(\"after onTick â†’ delay1 = \" + delay);\n                        // ç‰¹æ®Šæƒ…å†µï¼šç”¨æˆ·çš„onTickæ–¹æ³•èŠ±è´¹çš„æ—¶é—´æ¯”intervalé•¿ï¼Œé‚£ä¹ˆç›´æ¥è·³è½¬åˆ°ä¸‹ä¸€æ¬¡interval\n                        // æ³¨æ„ï¼Œåœ¨onTickå›è°ƒçš„æ–¹æ³•ä¸­ï¼Œä¸è¦åšäº›è€—æ—¶çš„æ“ä½œ\n                        boolean isWhile = false;\n                        while (delay < 0){\n                            delay += mCountdownInterval;\n                            isWhile = true;\n                        }\n                        if (isWhile){\n                            CountTimeTools.i(\"after onTickæ‰§è¡Œè¶…æ—¶ â†’ delay2 = \" + delay);\n                        }\n                        sendMessageDelayed(obtainMessage(MSG), delay);\n                    }\n                }\n            }\n        };\n\n        /**\n         * è®¾ç½®å€’è®¡æ—¶æ€»æ—¶é—´\n         * @param millisInFuture                    æ¯«ç§’å€¼\n         */\n        public void setMillisInFuture(long millisInFuture) {\n            long total = millisInFuture + 20;\n            this.mMillisInFuture = total;\n        }\n\n        /**\n         * è®¾ç½®å€’è®¡æ—¶é—´éš”å€¼\n         * @param countdownInterval                 é—´éš”ï¼Œä¸€èˆ¬è®¾ç½®ä¸º1000æ¯«ç§’\n         */\n        public void setCountdownInterval(long countdownInterval) {\n            this.mCountdownInterval = countdownInterval;\n        }\n\n        /**\n         * è®¾ç½®å€’è®¡æ—¶ç›‘å¬\n         * @param countDownListener                 listener\n         */\n        public void setCountDownListener(TimerListener countDownListener) {\n            this.mCountDownListener = countDownListener;\n        }\n\n    }\n    ```\n- å¦‚ä½•ä½¿ç”¨\n    ```\n    //å¼€å§‹\n    mCountDownTimer.start();\n    //ç»“æŸé”€æ¯\n    mCountDownTimer.cancel();\n    //æš‚åœ\n    mCountDownTimer.pause();\n    //æ¢å¤æš‚åœ\n    mCountDownTimer.resume();\n    ```\n\n\n### ä»£ç æ¡ˆä¾‹ï¼šhttps://github.com/yangchong211/YCTimer\n\n\n\n\n\n\n", "user_name": "æ¨å……", "description": "æ¯ä¸ªæ—¶é—´æ®µå®Œæˆä¸€ä¸ªå°ç›®æ ‡", "got_view_count": 218250, "category_name": "Android", "ctime": 1461266353}
{"tag_name": "React.js", "concern_user_count": 199177, "user_id": "2594503172832477", "title": "Reduxï¼ŒReact-Routeræ¥å…¥Hooks", "mark_content": "<section id=\"nice\" data-tool=\"mdniceç¼–è¾‘å™¨\" data-website=\"https://www.mdnice.com\" style=\"font-size: 16px; color: black; line-height: 1.6; word-spacing: 0px; letter-spacing: 0px; word-break: break-word; word-wrap: break-word; text-align: left; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, 'PingFang SC', Cambria, Cochin, Georgia, Times, 'Times New Roman', serif; margin-top: 0; padding: 0;\"><h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding: 0px; color: black; font-weight: bold; font-size: 20px; margin-top: 24px; margin-bottom: 12px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"color: #e7642b; text-align: center; display: block; background-color: #e7642b; color: white; padding: 3px 11px; border-radius: 1px;\">Reduxï¼ŒReact-Routeræ¥å…¥Hooks</span><span class=\"suffix\"></span></h2>\n<blockquote data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"display: block; font-size: 0.9em; overflow: auto; overflow-scrolling: touch; border-left: 3px solid rgba(0, 0, 0, 0.4); color: #6a737d; padding-top: 10px; padding-bottom: 10px; padding-left: 20px; padding-right: 10px; margin-bottom: 20px; margin-top: 20px; margin: 0 8px; border: none; background: #ffffff; box-shadow: 0 1px 2px -2px rgba(0,0,0,.16), 0 3px 6px 0 rgba(0,0,0,.12), 0 5px 12px 4px rgba(0,0,0,.09);\">\n<p style=\"padding-top: 8px; padding-bottom: 8px; word-spacing: 3px; letter-spacing: 1px; margin: 0px; font-size: 14px; color: #424B5D; line-height: 24px;\">éšç€<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; padding-left: 0; padding-right: 0; background: transparent; border-radius: 0; color: #eb6161; border-bottom: 1px solid #eb6161;\">react hooks</code>å‘å¸ƒä¹‹åï¼Œreactç”Ÿæ€ä¹Ÿæ›´æ–°ç›¸å…³å¯¹çš„å‡½æ•°å¼ç»„ä»¶<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; padding-left: 0; padding-right: 0; background: transparent; border-radius: 0; color: #eb6161; border-bottom: 1px solid #eb6161;\">hooks</code>APIs</p>\n</blockquote>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding: 0px; margin-top: 24px; margin-bottom: 12px; font-weight: bold; font-size: 18px; color: #424B5D;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">React-Redux</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; font-size: 16px; line-height: 26px; word-spacing: 3px; letter-spacing: 1px; color: #424B5D;\"><a href=\"https://react-redux.js.org/api/hooks#using-hooks-in-a-react-redux-app\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #eb6161; border-bottom: 1px solid #eb6161;\"><span style=\"margin-right: 6px;\">ğŸ‘‰</span>React-Redux7.1</a> æä¾›äº† <code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; padding-left: 0; padding-right: 0; background: transparent; border-radius: 0; color: #eb6161; border-bottom: 1px solid #eb6161;\">useSelector</code> ã€ <code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; padding-left: 0; padding-right: 0; background: transparent; border-radius: 0; color: #eb6161; border-bottom: 1px solid #eb6161;\">useActions</code> ã€<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; padding-left: 0; padding-right: 0; background: transparent; border-radius: 0; color: #eb6161; border-bottom: 1px solid #eb6161;\">useDispatch</code> ã€<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; padding-left: 0; padding-right: 0; background: transparent; border-radius: 0; color: #eb6161; border-bottom: 1px solid #eb6161;\">useStore</code>ï¼Œå¯ä»£æ›¿<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; padding-left: 0; padding-right: 0; background: transparent; border-radius: 0; color: #eb6161; border-bottom: 1px solid #eb6161;\">connect()</code>é«˜é˜¶ç»„ä»¶</p>\n<h6 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding: 0px; color: black; font-size: 16px; margin-top: 24px; margin-bottom: 12px; font-weight: bold;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">useSelector</span><span class=\"suffix\" style=\"display: none;\"></span></h6>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; margin: 12px auto; border-radius: 5px; box-shadow: 0 1px 2px -2px rgba(0,0,0,.16), 0 3px 6px 0 rgba(0,0,0,.12), 0 5px 12px 4px rgba(0,0,0,.09) !important;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #272822; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #ddd; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #272822; border-radius: 5px;\">const&nbsp;result:&nbsp;any&nbsp;=&nbsp;useSelector(selector:&nbsp;Function,&nbsp;equalityFn?:&nbsp;Function)<br></code></pre>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; font-size: 16px; line-height: 26px; word-spacing: 3px; letter-spacing: 1px; color: #424B5D;\">å…è®¸æ‚¨ä½¿ç”¨é€‰æ‹©å™¨åŠŸèƒ½ä»Reduxå­˜å‚¨çŠ¶æ€æå–æ•°æ®</p>\n<blockquote data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"display: block; font-size: 0.9em; overflow: auto; overflow-scrolling: touch; border-left: 3px solid rgba(0, 0, 0, 0.4); color: #6a737d; padding-top: 10px; padding-bottom: 10px; padding-left: 20px; padding-right: 10px; margin-bottom: 20px; margin-top: 20px; margin: 0 8px; border: none; background: #ffffff; box-shadow: 0 1px 2px -2px rgba(0,0,0,.16), 0 3px 6px 0 rgba(0,0,0,.12), 0 5px 12px 4px rgba(0,0,0,.09);\">\n<p style=\"padding-top: 8px; padding-bottom: 8px; word-spacing: 3px; letter-spacing: 1px; margin: 0px; font-size: 14px; color: #424B5D; line-height: 24px;\">é€‰æ‹©å™¨å‡½æ•°åº”è¯¥æ˜¯çº¯å‡½æ•°ï¼Œå› ä¸ºå®ƒå¯èƒ½åœ¨ä»»æ„æ—¶é—´ç‚¹å¤šæ¬¡æ‰§è¡Œ</p>\n</blockquote>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; font-size: 16px; line-height: 26px; word-spacing: 3px; letter-spacing: 1px; color: #424B5D;\">ä»æ¦‚å¿µä¸Šè®²ï¼Œ<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; padding-left: 0; padding-right: 0; background: transparent; border-radius: 0; color: #eb6161; border-bottom: 1px solid #eb6161;\">selector</code> å‡½æ•°ä¸ <code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; padding-left: 0; padding-right: 0; background: transparent; border-radius: 0; color: #eb6161; border-bottom: 1px solid #eb6161;\">connect</code> çš„ <code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; padding-left: 0; padding-right: 0; background: transparent; border-radius: 0; color: #eb6161; border-bottom: 1px solid #eb6161;\">mapStateToProps</code>çš„å‚æ•°æ˜¯å·®ä¸å¤šä¸€æ ·çš„ã€‚<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; padding-left: 0; padding-right: 0; background: transparent; border-radius: 0; color: #eb6161; border-bottom: 1px solid #eb6161;\">selector</code> å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œå°†ä¼šè¢«ä¼ å…¥<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; padding-left: 0; padding-right: 0; background: transparent; border-radius: 0; color: #eb6161; border-bottom: 1px solid #eb6161;\">Redux store</code>çš„æ•´ä¸ª<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; padding-left: 0; padding-right: 0; background: transparent; border-radius: 0; color: #eb6161; border-bottom: 1px solid #eb6161;\">state</code>ï¼Œä½œä¸ºå”¯ä¸€çš„å‚æ•°ã€‚æ¯æ¬¡å‡½æ•°ç»„ä»¶æ¸²æŸ“æ—¶ï¼Œ selector å‡½æ•°éƒ½ä¼šè¢«è°ƒç”¨ã€‚<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; padding-left: 0; padding-right: 0; background: transparent; border-radius: 0; color: #eb6161; border-bottom: 1px solid #eb6161;\">useSelector()</code>åŒæ ·ä¼šè®¢é˜… <code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; padding-left: 0; padding-right: 0; background: transparent; border-radius: 0; color: #eb6161; border-bottom: 1px solid #eb6161;\">Redux</code> çš„<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; padding-left: 0; padding-right: 0; background: transparent; border-radius: 0; color: #eb6161; border-bottom: 1px solid #eb6161;\">sotre</code>ï¼Œå¹¶ä¸”åœ¨ä½ æ¯ åˆ†å‘(<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; padding-left: 0; padding-right: 0; background: transparent; border-radius: 0; color: #eb6161; border-bottom: 1px solid #eb6161;\">dispatch</code>) ä¸€ä¸ª action æ—¶ï¼Œéƒ½ä¼šè¢«æ‰§è¡Œä¸€æ¬¡</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; font-size: 16px; line-height: 26px; word-spacing: 3px; letter-spacing: 1px; color: #424B5D;\">æ³¨æ„ç‚¹ï¼šå½“ åˆ†å‘(<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; padding-left: 0; padding-right: 0; background: transparent; border-radius: 0; color: #eb6161; border-bottom: 1px solid #eb6161;\">dispatch</code>) äº†ä¸€ä¸ª<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; padding-left: 0; padding-right: 0; background: transparent; border-radius: 0; color: #eb6161; border-bottom: 1px solid #eb6161;\">action</code>æ—¶ï¼Œ<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; padding-left: 0; padding-right: 0; background: transparent; border-radius: 0; color: #eb6161; border-bottom: 1px solid #eb6161;\">useSelector()</code>ä¼šå°†ä¸Šä¸€æ¬¡è°ƒç”¨ <code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; padding-left: 0; padding-right: 0; background: transparent; border-radius: 0; color: #eb6161; border-bottom: 1px solid #eb6161;\">selector</code>å‡½æ•°ç»“æœä¸å½“å‰è°ƒç”¨çš„ç»“æœè¿›è¡Œå¼•ç”¨(<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; padding-left: 0; padding-right: 0; background: transparent; border-radius: 0; color: #eb6161; border-bottom: 1px solid #eb6161;\">===</code>)æ¯”è¾ƒï¼Œå¦‚æœä¸ä¸€æ ·ï¼Œç»„ä»¶ä¼šè¢«å¼ºåˆ¶é‡æ–°æ¸²æŸ“ã€‚å¦‚æœä¸€æ ·ï¼Œå°±ä¸ä¼šè¢«é‡æ–°æ¸²æŸ“</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; font-size: 16px; line-height: 26px; word-spacing: 3px; letter-spacing: 1px; color: #424B5D;\">ä¼˜åŒ–ï¼šè¿›è¡Œæµ…æ¯”è¾ƒ</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; margin: 12px auto; border-radius: 5px; box-shadow: 0 1px 2px -2px rgba(0,0,0,.16), 0 3px 6px 0 rgba(0,0,0,.12), 0 5px 12px 4px rgba(0,0,0,.09) !important;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #272822; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #ddd; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #272822; border-radius: 5px;\">import&nbsp;{&nbsp;useSelector,&nbsp;shallowEqual&nbsp;}&nbsp;from&nbsp;<span class=\"hljs-string\" style=\"color: #a6e22e; line-height: 26px;\">'react-redux'</span><br><br><span class=\"hljs-built_in\" style=\"color: #a6e22e; line-height: 26px;\">export</span>&nbsp;<span class=\"hljs-keyword\" style=\"color: #f92672; font-weight: bold; line-height: 26px;\">function</span>&nbsp;useShallowEqualSelector(selector)&nbsp;{<br>&nbsp;&nbsp;<span class=\"hljs-built_in\" style=\"color: #a6e22e; line-height: 26px;\">return</span>&nbsp;useSelector(selector,&nbsp;shallowEqual)<br>}<br></code></pre>\n<h6 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding: 0px; color: black; font-size: 16px; margin-top: 24px; margin-bottom: 12px; font-weight: bold;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">useActions</span><span class=\"suffix\" style=\"display: none;\"></span></h6>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; font-size: 16px; line-height: 26px; word-spacing: 3px; letter-spacing: 1px; color: #424B5D;\">åºŸå¼ƒï¼Œä¸æ¨èä½¿ç”¨ï¼ˆactionCreaterï¼‰</p>\n<h6 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding: 0px; color: black; font-size: 16px; margin-top: 24px; margin-bottom: 12px; font-weight: bold;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">useDispatch</span><span class=\"suffix\" style=\"display: none;\"></span></h6>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; margin: 12px auto; border-radius: 5px; box-shadow: 0 1px 2px -2px rgba(0,0,0,.16), 0 3px 6px 0 rgba(0,0,0,.12), 0 5px 12px 4px rgba(0,0,0,.09) !important;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #272822; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #ddd; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #272822; border-radius: 5px;\">const&nbsp;dispatch&nbsp;=&nbsp;useDispatch()<br></code></pre>\n<h6 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding: 0px; color: black; font-size: 16px; margin-top: 24px; margin-bottom: 12px; font-weight: bold;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">useStore</span><span class=\"suffix\" style=\"display: none;\"></span></h6>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; margin: 12px auto; border-radius: 5px; box-shadow: 0 1px 2px -2px rgba(0,0,0,.16), 0 3px 6px 0 rgba(0,0,0,.12), 0 5px 12px 4px rgba(0,0,0,.09) !important;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #272822; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #ddd; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #272822; border-radius: 5px;\">const&nbsp;store&nbsp;=&nbsp;useStore()<br></code></pre>\n<h4 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding: 0px; margin-top: 24px; margin-bottom: 12px; font-weight: bold; font-size: 16px; color: #424B5D;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">dvaä¸­ä½¿ç”¨</span><span class=\"suffix\" style=\"display: none;\"></span></h4>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; font-size: 16px; line-height: 26px; word-spacing: 3px; letter-spacing: 1px; color: #424B5D;\"><code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; padding-left: 0; padding-right: 0; background: transparent; border-radius: 0; color: #eb6161; border-bottom: 1px solid #eb6161;\">dva</code>åœ¨<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; padding-left: 0; padding-right: 0; background: transparent; border-radius: 0; color: #eb6161; border-bottom: 1px solid #eb6161;\">2.6.0-beta.6</code>ä¸­å·²æ”¯æŒä»¥ä¸Šå‡ ä¸ª<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; padding-left: 0; padding-right: 0; background: transparent; border-radius: 0; color: #eb6161; border-bottom: 1px solid #eb6161;\">hooks</code>APIï¼Œå¯ç›´æ¥ä½¿ç”¨</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; margin: 12px auto; border-radius: 5px; box-shadow: 0 1px 2px -2px rgba(0,0,0,.16), 0 3px 6px 0 rgba(0,0,0,.12), 0 5px 12px 4px rgba(0,0,0,.09) !important;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #272822; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #ddd; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #272822; border-radius: 5px;\">import&nbsp;{&nbsp;useSelector,&nbsp;useDispatch&nbsp;}&nbsp;from&nbsp;<span class=\"hljs-string\" style=\"color: #a6e22e; line-height: 26px;\">'dva'</span>;<br></code></pre>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding: 0px; margin-top: 24px; margin-bottom: 12px; font-weight: bold; font-size: 18px; color: #424B5D;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">React-Router</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; font-size: 16px; line-height: 26px; word-spacing: 3px; letter-spacing: 1px; color: #424B5D;\"><a href=\"https://reacttraining.com/react-router/\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #eb6161; border-bottom: 1px solid #eb6161;\"><span style=\"margin-right: 6px;\">ğŸ‘‰</span>React-Router</a> æä¾›äº†<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; padding-left: 0; padding-right: 0; background: transparent; border-radius: 0; color: #eb6161; border-bottom: 1px solid #eb6161;\">useHistory</code> ã€<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; padding-left: 0; padding-right: 0; background: transparent; border-radius: 0; color: #eb6161; border-bottom: 1px solid #eb6161;\">useNavigate</code>ã€<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; padding-left: 0; padding-right: 0; background: transparent; border-radius: 0; color: #eb6161; border-bottom: 1px solid #eb6161;\">useLocation</code>ã€<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; padding-left: 0; padding-right: 0; background: transparent; border-radius: 0; color: #eb6161; border-bottom: 1px solid #eb6161;\">useParams</code>ã€<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; padding-left: 0; padding-right: 0; background: transparent; border-radius: 0; color: #eb6161; border-bottom: 1px solid #eb6161;\">useRoutes</code>ã€</p>\n<h5 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding: 0px; margin-top: 24px; margin-bottom: 12px; font-weight: bold; font-size: 16px; color: #424B5D;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">useNavigate</span><span class=\"suffix\" style=\"display: none;\"></span></h5>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; margin: 12px auto; border-radius: 5px; box-shadow: 0 1px 2px -2px rgba(0,0,0,.16), 0 3px 6px 0 rgba(0,0,0,.12), 0 5px 12px 4px rgba(0,0,0,.09) !important;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #272822; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #ddd; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #272822; border-radius: 5px;\"><span class=\"hljs-comment\" style=\"color: #75715e; line-height: 26px;\">//&nbsp;v5</span><br><span class=\"hljs-keyword\" style=\"color: #f92672; font-weight: bold; line-height: 26px;\">import</span>&nbsp;{&nbsp;useHistory&nbsp;}&nbsp;<span class=\"hljs-keyword\" style=\"color: #f92672; font-weight: bold; line-height: 26px;\">from</span>&nbsp;<span class=\"hljs-string\" style=\"color: #a6e22e; line-height: 26px;\">'react-router-dom'</span>;<br><br><span class=\"hljs-function\" style=\"line-height: 26px;\"><span class=\"hljs-keyword\" style=\"color: #f92672; font-weight: bold; line-height: 26px;\">function</span>&nbsp;<span class=\"hljs-title\" style=\"color: #a6e22e; font-weight: bold; line-height: 26px;\">MyButton</span>(<span class=\"hljs-params\" style=\"line-height: 26px;\"></span>)&nbsp;</span>{<br>&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #f92672; font-weight: bold; line-height: 26px;\">let</span>&nbsp;history&nbsp;=&nbsp;useHistory();<br>&nbsp;&nbsp;<span class=\"hljs-function\" style=\"line-height: 26px;\"><span class=\"hljs-keyword\" style=\"color: #f92672; font-weight: bold; line-height: 26px;\">function</span>&nbsp;<span class=\"hljs-title\" style=\"color: #a6e22e; font-weight: bold; line-height: 26px;\">handleClick</span>(<span class=\"hljs-params\" style=\"line-height: 26px;\"></span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;history.push(<span class=\"hljs-string\" style=\"color: #a6e22e; line-height: 26px;\">'/home'</span>);<br>&nbsp;&nbsp;};<br>&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #f92672; font-weight: bold; line-height: 26px;\">return</span>&nbsp;<span class=\"xml\" style=\"line-height: 26px;\"><span class=\"hljs-tag\" style=\"color: #f92672; line-height: 26px;\">&lt;<span class=\"hljs-name\" style=\"color: #f92672; line-height: 26px;\">button</span>&nbsp;<span class=\"hljs-attr\" style=\"line-height: 26px;\">onClick</span>=<span class=\"hljs-string\" style=\"color: #a6e22e; line-height: 26px;\">{handleClick}</span>&gt;</span>Submit<span class=\"hljs-tag\" style=\"color: #f92672; line-height: 26px;\">&lt;/<span class=\"hljs-name\" style=\"color: #f92672; line-height: 26px;\">button</span>&gt;</span></span>;<br>};<br></code></pre>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; margin: 12px auto; border-radius: 5px; box-shadow: 0 1px 2px -2px rgba(0,0,0,.16), 0 3px 6px 0 rgba(0,0,0,.12), 0 5px 12px 4px rgba(0,0,0,.09) !important;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #272822; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #ddd; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #272822; border-radius: 5px;\"><span class=\"hljs-comment\" style=\"color: #75715e; line-height: 26px;\">//&nbsp;v6</span><br><span class=\"hljs-keyword\" style=\"color: #f92672; font-weight: bold; line-height: 26px;\">import</span>&nbsp;{&nbsp;useNavigate&nbsp;}&nbsp;<span class=\"hljs-keyword\" style=\"color: #f92672; font-weight: bold; line-height: 26px;\">from</span>&nbsp;<span class=\"hljs-string\" style=\"color: #a6e22e; line-height: 26px;\">'react-router-dom'</span>;<br><br><span class=\"hljs-function\" style=\"line-height: 26px;\"><span class=\"hljs-keyword\" style=\"color: #f92672; font-weight: bold; line-height: 26px;\">function</span>&nbsp;<span class=\"hljs-title\" style=\"color: #a6e22e; font-weight: bold; line-height: 26px;\">MyButton</span>(<span class=\"hljs-params\" style=\"line-height: 26px;\"></span>)&nbsp;</span>{<br>&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #f92672; font-weight: bold; line-height: 26px;\">let</span>&nbsp;navigate&nbsp;=&nbsp;useNavigate();<br>&nbsp;&nbsp;<span class=\"hljs-function\" style=\"line-height: 26px;\"><span class=\"hljs-keyword\" style=\"color: #f92672; font-weight: bold; line-height: 26px;\">function</span>&nbsp;<span class=\"hljs-title\" style=\"color: #a6e22e; font-weight: bold; line-height: 26px;\">handleClick</span>(<span class=\"hljs-params\" style=\"line-height: 26px;\"></span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;navigate(<span class=\"hljs-string\" style=\"color: #a6e22e; line-height: 26px;\">'/home'</span>);<br>&nbsp;&nbsp;};<br>&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #f92672; font-weight: bold; line-height: 26px;\">return</span>&nbsp;<span class=\"xml\" style=\"line-height: 26px;\"><span class=\"hljs-tag\" style=\"color: #f92672; line-height: 26px;\">&lt;<span class=\"hljs-name\" style=\"color: #f92672; line-height: 26px;\">button</span>&nbsp;<span class=\"hljs-attr\" style=\"line-height: 26px;\">onClick</span>=<span class=\"hljs-string\" style=\"color: #a6e22e; line-height: 26px;\">{handleClick}</span>&gt;</span>Submit<span class=\"hljs-tag\" style=\"color: #f92672; line-height: 26px;\">&lt;/<span class=\"hljs-name\" style=\"color: #f92672; line-height: 26px;\">button</span>&gt;</span></span>;<br>};<br></code></pre>\n<h5 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding: 0px; margin-top: 24px; margin-bottom: 12px; font-weight: bold; font-size: 16px; color: #424B5D;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">useLocation</span><span class=\"suffix\" style=\"display: none;\"></span></h5>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; margin: 12px auto; border-radius: 5px; box-shadow: 0 1px 2px -2px rgba(0,0,0,.16), 0 3px 6px 0 rgba(0,0,0,.12), 0 5px 12px 4px rgba(0,0,0,.09) !important;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #272822; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #ddd; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #272822; border-radius: 5px;\"><span class=\"hljs-built_in\" style=\"color: #a6e22e; line-height: 26px;\">let</span>&nbsp;location&nbsp;=&nbsp;useLocation();<br></code></pre>\n<h5 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding: 0px; margin-top: 24px; margin-bottom: 12px; font-weight: bold; font-size: 16px; color: #424B5D;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">useParams</span><span class=\"suffix\" style=\"display: none;\"></span></h5>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; margin: 12px auto; border-radius: 5px; box-shadow: 0 1px 2px -2px rgba(0,0,0,.16), 0 3px 6px 0 rgba(0,0,0,.12), 0 5px 12px 4px rgba(0,0,0,.09) !important;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #272822; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #ddd; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #272822; border-radius: 5px;\">const&nbsp;{&nbsp;flag&nbsp;}&nbsp;=&nbsp;useParams();<br></code></pre>\n<h5 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding: 0px; margin-top: 24px; margin-bottom: 12px; font-weight: bold; font-size: 16px; color: #424B5D;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">useRoutes</span><span class=\"suffix\" style=\"display: none;\"></span></h5>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; margin: 12px auto; border-radius: 5px; box-shadow: 0 1px 2px -2px rgba(0,0,0,.16), 0 3px 6px 0 rgba(0,0,0,.12), 0 5px 12px 4px rgba(0,0,0,.09) !important;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #272822; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #ddd; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #272822; border-radius: 5px;\">//&nbsp;v6<br><span class=\"hljs-keyword\" style=\"color: #f92672; font-weight: bold; line-height: 26px;\">function</span>&nbsp;<span class=\"hljs-function\" style=\"line-height: 26px;\"><span class=\"hljs-title\" style=\"color: #a6e22e; font-weight: bold; line-height: 26px;\">App</span></span>()&nbsp;{<br>&nbsp;&nbsp;<span class=\"hljs-built_in\" style=\"color: #a6e22e; line-height: 26px;\">let</span>&nbsp;element&nbsp;=&nbsp;useRoutes([<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;path:&nbsp;<span class=\"hljs-string\" style=\"color: #a6e22e; line-height: 26px;\">'/'</span>,&nbsp;element:&nbsp;&lt;Home&nbsp;/&gt;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;path:&nbsp;<span class=\"hljs-string\" style=\"color: #a6e22e; line-height: 26px;\">'dashboard'</span>,&nbsp;element:&nbsp;&lt;Dashboard&nbsp;/&gt;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;path:&nbsp;<span class=\"hljs-string\" style=\"color: #a6e22e; line-height: 26px;\">'invoices'</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;element:&nbsp;&lt;Invoices&nbsp;/&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;children:&nbsp;[<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;path:&nbsp;<span class=\"hljs-string\" style=\"color: #a6e22e; line-height: 26px;\">':id'</span>,&nbsp;element:&nbsp;&lt;Invoice&nbsp;/&gt;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;path:&nbsp;<span class=\"hljs-string\" style=\"color: #a6e22e; line-height: 26px;\">'sent'</span>,&nbsp;element:&nbsp;&lt;SentInvoices&nbsp;/&gt;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]<br>&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;é‡å®šå‘<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;path:&nbsp;<span class=\"hljs-string\" style=\"color: #a6e22e; line-height: 26px;\">'home'</span>,&nbsp;redirectTo:&nbsp;<span class=\"hljs-string\" style=\"color: #a6e22e; line-height: 26px;\">'/'</span>&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;404æ‰¾ä¸åˆ°<br>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;path:&nbsp;<span class=\"hljs-string\" style=\"color: #a6e22e; line-height: 26px;\">'*'</span>,&nbsp;element:&nbsp;&lt;NotFound&nbsp;/&gt;&nbsp;}<br>&nbsp;&nbsp;]);<br>&nbsp;&nbsp;<span class=\"hljs-built_in\" style=\"color: #a6e22e; line-height: 26px;\">return</span>&nbsp;element;<br>}<br></code></pre>\n</section>", "user_name": "Navy", "description": "", "got_view_count": 191, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "ECMAScript 6", "concern_user_count": 156509, "user_id": "325111171779912", "title": "å¸¦ä½ é‡å­¦ES6 | Reflect", "mark_content": "<section id=\"nice\" data-tool=\"mdniceç¼–è¾‘å™¨\" data-website=\"https://www.mdnice.com\" style=\"font-size: 16px; padding: 0 10px; word-spacing: 0px; word-break: break-word; word-wrap: break-word; text-align: left; line-height: 1.75; color: #595959; font-family: Optima-Regular, Optima, PingFangTC-Light, PingFangSC-light, PingFangTC-light; letter-spacing: 2px; background-image: linear-gradient(90deg, rgba(50, 0, 0, 0.05) 3%, rgba(0, 0, 0, 0) 3%), linear-gradient(360deg, rgba(50, 0, 0, 0.05) 3%, rgba(0, 0, 0, 0) 3%); background-size: 20px 20px; background-position: center center;\"><h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; text-align: left; margin: 20px 10px 0px 0px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"font-size: 18px; font-weight: bold; display: inline-block; padding-left: 10px; border-left: 5px solid #DEC6FB; color: #595959;\">å‰è¨€</span><span class=\"suffix\"></span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #595959; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å…¶å®è¯´å®åœ¨çš„ï¼Œåœ¨æ²¡é‡å­¦ ES6 ä¹‹å‰ï¼Œæˆ‘å¯¹ Reflect è¿™ä¸ªå¯¹è±¡å®Œå…¨æ˜¯ç©ºç™½çš„ï¼Œä¸€æ˜¯åœ¨å®é™…å·¥ä½œä¸­ç”¨ä¸åˆ°ï¼ŒäºŒæ˜¯é¢è¯•çš„æ—¶å€™ä¹Ÿæ²¡äººé—®èµ·ã€‚è¿™ä¹Ÿæ˜¯è‡ªå·±çš„ä¸€ä¸ªé—®é¢˜ï¼Œåœ¨é©±åŠ¨å¼å­¦ä¹ ï¼Œè€Œæ²¡æœ‰å»è‡ªä¸»å­¦ä¹ ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #595959; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">é‚£ä»Šå¤©å°±è®²è®² Reflect å¯¹è±¡ã€‚</p>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; text-align: left; margin: 20px 10px 0px 0px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"font-size: 18px; font-weight: bold; display: inline-block; padding-left: 10px; border-left: 5px solid #DEC6FB; color: #595959;\">1ã€æ¦‚è¿°</span><span class=\"suffix\"></span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #595959; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">Reflect å¯¹è±¡ä¸æ˜¯æ„é€ å‡½æ•°ï¼Œæ‰€ä»¥åˆ›å»ºæ—¶ä¸æ˜¯ç”¨ new æ¥è¿›è¡Œåˆ›å»ºã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #595959; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">åœ¨ ES6 ä¸­å¢åŠ è¿™ä¸ªå¯¹è±¡çš„ç›®çš„ï¼š</p>\n<ol data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; list-style-type: decimal; font-size: 15px; color: #595959;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">å°† Object å¯¹è±¡çš„ä¸€äº›æ˜æ˜¾å±äºè¯­è¨€å†…éƒ¨çš„æ–¹æ³•ï¼ˆæ¯”å¦‚ Object.definePropertyï¼‰ï¼Œæ”¾åˆ° Reflect å¯¹è±¡ä¸Šã€‚ç°é˜¶æ®µï¼ŒæŸäº›æ–¹æ³•åŒæ—¶åœ¨ Object å’Œ Reflect å¯¹è±¡ä¸Šéƒ¨ç½²ï¼Œæœªæ¥çš„æ–°æ–¹æ³•å°†åªéƒ¨ç½²åœ¨ Reflect å¯¹è±¡ä¸Šã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä» Reflect å¯¹è±¡ä¸Šå¯ä»¥æ‹¿åˆ°è¯­è¨€å†…éƒ¨çš„æ–¹æ³•ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">ä¿®æ”¹æŸäº› Object æ–¹æ³•çš„è¿”å›ç»“æœï¼Œè®©å…¶å˜å¾—æ›´åˆç†ã€‚æ¯”å¦‚ï¼ŒObject.defineProperty(obj, name, desc)åœ¨æ— æ³•å®šä¹‰å±æ€§æ—¶ï¼Œä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œè€Œ Reflect.defineProperty(obj, name, desc)åˆ™ä¼šè¿”å› falseã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">è®© Object æ“ä½œéƒ½å˜æˆå‡½æ•°è¡Œä¸ºã€‚æŸäº› Object æ“ä½œæ˜¯å‘½ä»¤å¼ï¼Œæ¯”å¦‚ name in obj å’Œ delete obj[name]ï¼Œè€Œ Reflect.has(obj, name)å’Œ Reflect.deleteProperty(obj, name)è®©å®ƒä»¬å˜æˆäº†å‡½æ•°è¡Œä¸ºã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">Reflect å¯¹è±¡çš„æ–¹æ³•ä¸ Proxy å¯¹è±¡çš„æ–¹æ³•ä¸€ä¸€å¯¹åº”ï¼Œåªè¦æ˜¯ Proxy å¯¹è±¡çš„æ–¹æ³•ï¼Œå°±èƒ½åœ¨ Reflect å¯¹è±¡ä¸Šæ‰¾åˆ°å¯¹åº”çš„æ–¹æ³•ã€‚è¿™å°±è®© Proxy å¯¹è±¡å¯ä»¥æ–¹ä¾¿åœ°è°ƒç”¨å¯¹åº”çš„ Reflect æ–¹æ³•ï¼Œå®Œæˆé»˜è®¤è¡Œä¸ºï¼Œä½œä¸ºä¿®æ”¹è¡Œä¸ºçš„åŸºç¡€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ç®¡ Proxy æ€ä¹ˆä¿®æ”¹é»˜è®¤è¡Œä¸ºï¼Œä½ æ€»å¯ä»¥åœ¨ Reflect ä¸Šè·å–é»˜è®¤è¡Œä¸ºã€‚</section></li></ol>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #fafafa; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #383a42; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #fafafa; border-radius: 5px;\"><span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">var</span>&nbsp;loggedObj&nbsp;=&nbsp;<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">new</span>&nbsp;<span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">Proxy</span>(obj,&nbsp;{<br>&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">get</span>(target,&nbsp;name)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">console</span>.log(<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">\"get\"</span>,&nbsp;target,&nbsp;name);<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">return</span>&nbsp;<span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">Reflect</span>.get(target,&nbsp;name);<br>&nbsp;&nbsp;},<br>&nbsp;&nbsp;deleteProperty(target,&nbsp;name)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">console</span>.log(<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">\"delete\"</span>&nbsp;+&nbsp;name);<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">return</span>&nbsp;<span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">Reflect</span>.deleteProperty(target,&nbsp;name);<br>&nbsp;&nbsp;},<br>&nbsp;&nbsp;has(target,&nbsp;name)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">console</span>.log(<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">\"has\"</span>&nbsp;+&nbsp;name);<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">return</span>&nbsp;<span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">Reflect</span>.has(target,&nbsp;name);<br>&nbsp;&nbsp;},<br>});<br></code></pre>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #595959; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ä¸Šé¢ä»£ç ä¸­ï¼Œæ¯ä¸€ä¸ª Proxy å¯¹è±¡çš„æ‹¦æˆªæ“ä½œï¼ˆgetã€deleteã€hasï¼‰ï¼Œå†…éƒ¨éƒ½è°ƒç”¨å¯¹åº”çš„ Reflect æ–¹æ³•ï¼Œä¿è¯åŸç”Ÿè¡Œä¸ºèƒ½å¤Ÿæ­£å¸¸æ‰§è¡Œã€‚æ·»åŠ çš„å·¥ä½œï¼Œå°±æ˜¯å°†æ¯ä¸€ä¸ªæ“ä½œè¾“å‡ºä¸€è¡Œæ—¥å¿—ã€‚</p>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; text-align: left; margin: 20px 10px 0px 0px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"font-size: 18px; font-weight: bold; display: inline-block; padding-left: 10px; border-left: 5px solid #DEC6FB; color: #595959;\">2ã€é™æ€ API</span><span class=\"suffix\"></span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #595959; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">Reflect æ‹¥æœ‰ 13 ä¸ªé™æ€ APIï¼Œå…¶å¤§éƒ¨åˆ†ä¸ Object å¯¹è±¡çš„åŒåæ–¹æ³•çš„ä½œç”¨éƒ½æ˜¯ç›¸åŒçš„ï¼Œè€Œä¸”å®ƒä¸ Proxy å¯¹è±¡çš„æ–¹æ³•æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚</p>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #DEC6FB; color: #595959;\">2.1ã€Reflect.apply()</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #595959; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">é€šè¿‡æŒ‡å®šçš„å‚æ•°åˆ—è¡¨å‘èµ·å¯¹ç›®æ ‡(target)å‡½æ•°çš„è°ƒç”¨ã€‚è¯¥æ–¹æ³•æ¥å—æ˜¯ä¸‰ä¸ªå‚æ•°ï¼Œtargetï¼šç›®æ ‡å‡½æ•°ã€‚thisArgumentï¼štarget å‡½æ•°è°ƒç”¨æ—¶ç»‘å®šçš„ this å¯¹è±¡ã€‚argumentsListï¼štarget å‡½æ•°è°ƒç”¨æ—¶ä¼ å…¥çš„å®å‚åˆ—è¡¨ï¼Œè¯¥å‚æ•°åº”è¯¥æ˜¯ä¸€ä¸ªç±»æ•°ç»„çš„å¯¹è±¡ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #595959; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">è¯¥æ–¹æ³•ä¸ ES5 ä¸­ Function.prototype.apply()æ–¹æ³•ç±»ä¼¼ï¼ŒReflect.apply()å¯ä»¥è®©ä»£ç çœ‹èµ·æ¥æ›´åŠ çš„é€šä¿—æ˜“æ‡‚ã€‚</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #fafafa; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #383a42; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #fafafa; border-radius: 5px;\"><span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">Function</span>.prototype.apply.call(<span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">Math</span>.floor,&nbsp;<span class=\"hljs-literal\" style=\"color: #0184bb; line-height: 26px;\">undefined</span>,&nbsp;[<span class=\"hljs-number\" style=\"color: #986801; line-height: 26px;\">1.75</span>]);<br><span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">Reflect</span>.apply(<span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">Math</span>.floor,&nbsp;<span class=\"hljs-literal\" style=\"color: #0184bb; line-height: 26px;\">undefined</span>,&nbsp;[<span class=\"hljs-number\" style=\"color: #986801; line-height: 26px;\">1.75</span>]);<br></code></pre>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #DEC6FB; color: #595959;\">2.2ã€Reflect.construct()</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #595959; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">è¯¥æ–¹æ³•çš„è¡Œä¸ºæœ‰ç‚¹åƒ new æ“ä½œç¬¦ æ„é€ å‡½æ•° ï¼Œ ç›¸å½“äºè¿è¡Œ new target(...args)ã€‚è¯¥æ–¹æ³•æ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œtargetï¼šè¢«è¿è¡Œçš„ç›®æ ‡æ„é€ å‡½æ•°ã€‚argumentsListï¼šç±»æ•°ç»„ï¼Œç›®æ ‡æ„é€ å‡½æ•°è°ƒç”¨æ—¶çš„å‚æ•°ã€‚newTargetï¼ˆå¯é€‰ï¼‰ï¼šä½œä¸ºæ–°åˆ›å»ºå¯¹è±¡çš„åŸå‹å¯¹è±¡çš„ constructor å±æ€§ï¼Œ å‚è€ƒ new.target æ“ä½œç¬¦ï¼Œé»˜è®¤å€¼ä¸º targetã€‚</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #fafafa; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #383a42; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #fafafa; border-radius: 5px;\"><span class=\"hljs-class\" style=\"line-height: 26px;\"><span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">class</span>&nbsp;<span class=\"hljs-title\" style=\"color: #c18401; line-height: 26px;\">Person</span>&nbsp;</span>{<br>&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">constructor</span>(name)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">this</span>.name&nbsp;=&nbsp;name;<br>&nbsp;&nbsp;}<br>}<br><span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">let</span>&nbsp;person&nbsp;=&nbsp;<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">new</span>&nbsp;Person(<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">\"Jack\"</span>);<br><span class=\"hljs-comment\" style=\"color: #a0a1a7; font-style: italic; line-height: 26px;\">//&nbsp;ç­‰ä»·äº</span><br><span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">let</span>&nbsp;person&nbsp;=&nbsp;<span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">Reflect</span>.construct(Person,&nbsp;[<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">\"Jack\"</span>]);<br></code></pre>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #DEC6FB; color: #595959;\">2.3ã€Reflect.defineProperty()</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #595959; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">åŸºæœ¬ç­‰åŒäº Object.defineProperty() æ–¹æ³•ï¼Œå”¯ä¸€ä¸åŒæ˜¯è¿”å› Boolean å€¼ã€‚è¯¥æ–¹æ³•æ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œtargetï¼šç›®æ ‡å¯¹è±¡ã€‚propertyKeyï¼šè¦å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§çš„åç§°ã€‚attributesï¼šè¦å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§çš„æè¿°ã€‚</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #fafafa; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #383a42; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #fafafa; border-radius: 5px;\"><span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">let</span>&nbsp;obj&nbsp;=&nbsp;{};<br><span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">Object</span>.defineProperty({},&nbsp;<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">\"value\"</span>,&nbsp;{<br>&nbsp;&nbsp;<span class=\"hljs-attr\" style=\"color: #986801; line-height: 26px;\">value</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">\"18\"</span>,<br>});<br><span class=\"hljs-comment\" style=\"color: #a0a1a7; font-style: italic; line-height: 26px;\">//&nbsp;ç­‰ä»·äº</span><br><span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">Reflect</span>.defineProperty({},&nbsp;<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">\"value\"</span>,&nbsp;{<br>&nbsp;&nbsp;<span class=\"hljs-attr\" style=\"color: #986801; line-height: 26px;\">value</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">\"18\"</span>,<br>});<br></code></pre>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #DEC6FB; color: #595959;\">2.4ã€Reflect.deleteProperty()</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #595959; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å…è®¸ç”¨äºåˆ é™¤å±æ€§ã€‚å®ƒå¾ˆåƒ delete operator ï¼Œä½†å®ƒæ˜¯ä¸€ä¸ªå‡½æ•°ã€‚è¯¥æ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œtargetï¼šåˆ é™¤å±æ€§çš„ç›®æ ‡å¯¹è±¡ã€‚propertyKeyï¼šéœ€è¦åˆ é™¤çš„å±æ€§çš„åç§°ã€‚</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #fafafa; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #383a42; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #fafafa; border-radius: 5px;\"><span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">let</span>&nbsp;obj&nbsp;=&nbsp;{<br>&nbsp;&nbsp;<span class=\"hljs-attr\" style=\"color: #986801; line-height: 26px;\">value</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">\"18\"</span>,<br>};<br><span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">delete</span>&nbsp;obj[<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">\"value\"</span>];<br><span class=\"hljs-comment\" style=\"color: #a0a1a7; font-style: italic; line-height: 26px;\">//&nbsp;ç­‰ä»·äº</span><br><span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">Reflect</span>.deleteProperty(obj,&nbsp;<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">\"value\"</span>);<br></code></pre>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #DEC6FB; color: #595959;\">2.5ã€Reflect.get()</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #595959; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">è¯¥æ–¹æ³•ä¸ä» å¯¹è±¡ (target[propertyKey]) ä¸­è¯»å–å±æ€§ç±»ä¼¼ï¼Œä½†å®ƒæ˜¯é€šè¿‡ä¸€ä¸ªå‡½æ•°æ‰§è¡Œæ¥æ“ä½œçš„ã€‚è¯¥æ–¹æ³•æ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œtargetï¼šéœ€è¦å–å€¼çš„ç›®æ ‡å¯¹è±¡ã€‚propertyKeyï¼šéœ€è¦è·å–çš„å€¼çš„é”®å€¼ã€‚receiverï¼šå¦‚æœ target å¯¹è±¡ä¸­æŒ‡å®šäº† getterï¼Œreceiver åˆ™ä¸º getter è°ƒç”¨æ—¶çš„ this å€¼ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯å¦‚æœ target ä¸æ˜¯å¯¹è±¡çš„è¯ï¼Œåˆ™ä¼šæŠ¥é”™ã€‚</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #fafafa; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #383a42; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #fafafa; border-radius: 5px;\"><span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">let</span>&nbsp;obj&nbsp;=&nbsp;{<br>&nbsp;&nbsp;<span class=\"hljs-attr\" style=\"color: #986801; line-height: 26px;\">value</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">\"18\"</span>,<br>};<br><span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">Reflect</span>.get(obj,&nbsp;<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">\"value\"</span>);&nbsp;<span class=\"hljs-comment\" style=\"color: #a0a1a7; font-style: italic; line-height: 26px;\">//&nbsp;18</span><br><span class=\"hljs-comment\" style=\"color: #a0a1a7; font-style: italic; line-height: 26px;\">//&nbsp;å½“æœ‰getterå‡½æ•°æ—¶</span><br><span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">let</span>&nbsp;obj&nbsp;=&nbsp;{<br>&nbsp;&nbsp;<span class=\"hljs-attr\" style=\"color: #986801; line-height: 26px;\">value</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">\"18\"</span>,<br>&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">get</span>&nbsp;foo()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">return</span>&nbsp;<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">this</span>.a&nbsp;+&nbsp;<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">this</span>.b;<br>&nbsp;&nbsp;},<br>};<br><span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">let</span>&nbsp;foo&nbsp;=&nbsp;{<br>&nbsp;&nbsp;<span class=\"hljs-attr\" style=\"color: #986801; line-height: 26px;\">a</span>:&nbsp;<span class=\"hljs-number\" style=\"color: #986801; line-height: 26px;\">2</span>,<br>&nbsp;&nbsp;<span class=\"hljs-attr\" style=\"color: #986801; line-height: 26px;\">b</span>:&nbsp;<span class=\"hljs-number\" style=\"color: #986801; line-height: 26px;\">3</span>,<br>};<br><span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">Reflect</span>.get(obj,&nbsp;<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">\"foo\"</span>,&nbsp;foo);&nbsp;<span class=\"hljs-comment\" style=\"color: #a0a1a7; font-style: italic; line-height: 26px;\">//&nbsp;5</span><br></code></pre>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #DEC6FB; color: #595959;\">2.6ã€Reflect.getOwnPropertyDescriptor()</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #595959; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">è¯¥æ–¹æ³•ä¸ Object.getOwnPropertyDescriptor() æ–¹æ³•ç›¸ä¼¼ã€‚å¦‚æœåœ¨å¯¹è±¡ä¸­å­˜åœ¨ï¼Œåˆ™è¿”å›ç»™å®šçš„å±æ€§çš„å±æ€§æè¿°ç¬¦ã€‚å¦åˆ™è¿”å› undefinedã€‚è¯¥æ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œtargetï¼šéœ€è¦å¯»æ‰¾å±æ€§çš„ç›®æ ‡å¯¹è±¡ã€‚propertyKeyï¼šè·å–è‡ªå·±çš„å±æ€§æè¿°ç¬¦çš„å±æ€§çš„åç§°ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯å¦‚æœ target ä¸æ˜¯å¯¹è±¡çš„è¯ï¼Œä¼šæŠ¥é”™ã€‚</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #fafafa; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #383a42; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #fafafa; border-radius: 5px;\"><span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">var</span>&nbsp;myObject&nbsp;=&nbsp;{};<br><span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">Object</span>.defineProperty(myObject,&nbsp;<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">\"hidden\"</span>,&nbsp;{<br>&nbsp;&nbsp;<span class=\"hljs-attr\" style=\"color: #986801; line-height: 26px;\">value</span>:&nbsp;<span class=\"hljs-literal\" style=\"color: #0184bb; line-height: 26px;\">true</span>,<br>&nbsp;&nbsp;<span class=\"hljs-attr\" style=\"color: #986801; line-height: 26px;\">enumerable</span>:&nbsp;<span class=\"hljs-literal\" style=\"color: #0184bb; line-height: 26px;\">false</span>,<br>});<br><span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">var</span>&nbsp;theDescriptor&nbsp;=&nbsp;<span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">Object</span>.getOwnPropertyDescriptor(myObject,&nbsp;<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">\"hidden\"</span>);<br><span class=\"hljs-comment\" style=\"color: #a0a1a7; font-style: italic; line-height: 26px;\">//&nbsp;ç­‰ä»·äº</span><br><span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">var</span>&nbsp;theDescriptor&nbsp;=&nbsp;<span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">Reflect</span>.getOwnPropertyDescriptor(myObject,&nbsp;<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">\"hidden\"</span>);<br></code></pre>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #DEC6FB; color: #595959;\">2.7ã€Reflect.getPrototypeOf()</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #595959; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">è¯¥æ–¹æ³•ä¸ Object.getPrototypeOf() æ–¹æ³•å‡ ä¹æ˜¯ä¸€æ ·çš„ã€‚éƒ½æ˜¯è¿”å›æŒ‡å®šå¯¹è±¡çš„åŸå‹ï¼ˆå³å†…éƒ¨çš„ [[Prototype]] å±æ€§çš„å€¼ï¼‰ã€‚è¯¥æ–¹æ³•åªèƒ½æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œtargetï¼šè·å–åŸå‹çš„ç›®æ ‡å¯¹è±¡ã€‚æ³¨æ„å¾—æ˜¯å¦‚æœ target ä¸æ˜¯å¯¹è±¡çš„è¯ï¼Œä¼šæŠ¥é”™ã€‚</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #fafafa; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #383a42; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #fafafa; border-radius: 5px;\"><span class=\"hljs-class\" style=\"line-height: 26px;\"><span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">class</span>&nbsp;<span class=\"hljs-title\" style=\"color: #c18401; line-height: 26px;\">MyObj</span>&nbsp;</span>{}<br><span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">let</span>&nbsp;myObj&nbsp;=&nbsp;<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">new</span>&nbsp;MyObj();<br><span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">Object</span>.getPrototypeOf(myObj)&nbsp;===&nbsp;MyObj.prototype;&nbsp;<span class=\"hljs-comment\" style=\"color: #a0a1a7; font-style: italic; line-height: 26px;\">//&nbsp;true</span><br><span class=\"hljs-comment\" style=\"color: #a0a1a7; font-style: italic; line-height: 26px;\">//&nbsp;ç­‰ä»·äº</span><br><span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">Reflect</span>.getPrototypeOf(myObj)&nbsp;===&nbsp;MyObj.prototype;&nbsp;<span class=\"hljs-comment\" style=\"color: #a0a1a7; font-style: italic; line-height: 26px;\">//&nbsp;true</span><br></code></pre>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #DEC6FB; color: #595959;\">2.8ã€Reflect.has()</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #595959; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ä½œç”¨ä¸ in æ“ä½œç¬¦ ç›¸åŒã€‚è¯¥æ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œtargetï¼šç›®æ ‡å¯¹è±¡ã€‚propertyKeyï¼šå±æ€§åï¼Œéœ€è¦æ£€æŸ¥ç›®æ ‡å¯¹è±¡æ˜¯å¦å­˜åœ¨æ­¤å±æ€§ã€‚æ³¨æ„ï¼Œå¦‚æœç›®æ ‡å¯¹è±¡å¹¶é Object ç±»å‹ï¼Œåˆ™ä¼šæŠ¥é”™ã€‚</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #fafafa; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #383a42; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #fafafa; border-radius: 5px;\"><span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">let</span>&nbsp;obj&nbsp;=&nbsp;{<br>&nbsp;&nbsp;<span class=\"hljs-attr\" style=\"color: #986801; line-height: 26px;\">value</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">\"18\"</span>,<br>};<br><span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">\"value\"</span>&nbsp;<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">in</span>&nbsp;obj;&nbsp;<span class=\"hljs-comment\" style=\"color: #a0a1a7; font-style: italic; line-height: 26px;\">//&nbsp;true</span><br><span class=\"hljs-comment\" style=\"color: #a0a1a7; font-style: italic; line-height: 26px;\">//&nbsp;ç­‰ä»·äº</span><br><span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">Reflect</span>.has(obj,&nbsp;<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">\"value\"</span>);&nbsp;<span class=\"hljs-comment\" style=\"color: #a0a1a7; font-style: italic; line-height: 26px;\">//&nbsp;ture</span><br></code></pre>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #DEC6FB; color: #595959;\">2.9ã€Reflect.isExtensible()</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #595959; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å¯æ‰©å±• ï¼ˆå³æ˜¯å¦èƒ½å¤Ÿæ·»åŠ æ–°çš„å±æ€§ï¼‰ã€‚ä¸å®ƒ Object.isExtensible() æ–¹æ³•ç›¸ä¼¼ï¼Œä½†æœ‰ä¸€äº›ä¸åŒï¼Œå¦‚æœè¯¥æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ˆåŸå§‹å€¼ï¼‰ï¼Œé‚£ä¹ˆå°†ä¼šæŠ¥é”™ã€‚å¯¹äº Object.isExtensible()ï¼Œéå¯¹è±¡çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¼šè¢«å¼ºåˆ¶è½¬æ¢ä¸ºä¸€ä¸ªå¯¹è±¡ã€‚è¯¥æ–¹æ³•åªæ¥å—ä¸€ä¸ªå‚æ•°ï¼Œtargetï¼šæ£€æŸ¥æ˜¯å¦å¯æ‰©å±•çš„ç›®æ ‡å¯¹è±¡ã€‚</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #fafafa; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #383a42; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #fafafa; border-radius: 5px;\"><span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">let</span>&nbsp;obj&nbsp;=&nbsp;{};<br><span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">Object</span>.isExtensible(obj);&nbsp;<span class=\"hljs-comment\" style=\"color: #a0a1a7; font-style: italic; line-height: 26px;\">//&nbsp;true</span><br><span class=\"hljs-comment\" style=\"color: #a0a1a7; font-style: italic; line-height: 26px;\">//&nbsp;ç­‰ä»·äº</span><br><span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">Reflect</span>.isExtensible(obj);&nbsp;<span class=\"hljs-comment\" style=\"color: #a0a1a7; font-style: italic; line-height: 26px;\">//&nbsp;true</span><br></code></pre>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #DEC6FB; color: #595959;\">2.10ã€Reflect.ownKeys()</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #595959; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">è¿”å›ä¸€ä¸ªç”±ç›®æ ‡å¯¹è±¡è‡ªèº«çš„å±æ€§é”®ç»„æˆçš„æ•°ç»„ã€‚è¯¥æ–¹æ³•æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œtargetï¼šè·å–è‡ªèº«å±æ€§é”®çš„ç›®æ ‡å¯¹è±¡ã€‚è¿”å›ä¸€ä¸ªç”±ç›®æ ‡å¯¹è±¡çš„è‡ªèº«å±æ€§é”®ç»„æˆçš„ Arrayã€‚è¿”å›å€¼ç­‰åŒäº Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target))ã€‚</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #fafafa; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #383a42; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #fafafa; border-radius: 5px;\"><span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">let</span>&nbsp;myObject&nbsp;=&nbsp;{<br>&nbsp;&nbsp;<span class=\"hljs-attr\" style=\"color: #986801; line-height: 26px;\">foo</span>:&nbsp;<span class=\"hljs-number\" style=\"color: #986801; line-height: 26px;\">1</span>,<br>&nbsp;&nbsp;<span class=\"hljs-attr\" style=\"color: #986801; line-height: 26px;\">bar</span>:&nbsp;<span class=\"hljs-number\" style=\"color: #986801; line-height: 26px;\">2</span>,<br>&nbsp;&nbsp;[<span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">Symbol</span>.for(<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">\"baz\"</span>)]:&nbsp;<span class=\"hljs-number\" style=\"color: #986801; line-height: 26px;\">3</span>,<br>&nbsp;&nbsp;[<span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">Symbol</span>.for(<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">\"bing\"</span>)]:&nbsp;<span class=\"hljs-number\" style=\"color: #986801; line-height: 26px;\">4</span>,<br>};<br><br><span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">Object</span>.getOwnPropertyNames(myObject).concat(<br>&nbsp;&nbsp;<span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">Object</span>.getOwnPropertySymbols(myObject)<br>);<br><span class=\"hljs-comment\" style=\"color: #a0a1a7; font-style: italic; line-height: 26px;\">//&nbsp;ç­‰ä»·äº</span><br><span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">Reflect</span>.ownKeys(myObject);&nbsp;<span class=\"hljs-comment\" style=\"color: #a0a1a7; font-style: italic; line-height: 26px;\">//&nbsp;['foo',&nbsp;'bar',&nbsp;Symbol(baz),&nbsp;Symbol(bing)]</span><br></code></pre>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #DEC6FB; color: #595959;\">2.11ã€Reflect.preventExtensions()</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #595959; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">è¯¥æ–¹æ³•é˜»æ­¢æ–°å±æ€§æ·»åŠ åˆ°å¯¹è±¡ (ä¾‹å¦‚ï¼šé˜²æ­¢å°†æ¥å¯¹å¯¹è±¡çš„æ‰©å±•è¢«æ·»åŠ åˆ°å¯¹è±¡ä¸­)ã€‚è¯¥æ–¹æ³•ä¸ Object.preventExtensions()ç›¸ä¼¼ï¼Œä½†æœ‰ä¸€äº›ä¸åŒç‚¹ã€‚è¯¥æ–¹æ³•æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œtargetï¼šé˜»æ­¢æ‰©å±•çš„ç›®æ ‡å¯¹è±¡ã€‚</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #fafafa; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #383a42; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #fafafa; border-radius: 5px;\"><span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">let</span>&nbsp;obj&nbsp;=&nbsp;{};<br><span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">Object</span>.preventExtensions(obj);&nbsp;<span class=\"hljs-comment\" style=\"color: #a0a1a7; font-style: italic; line-height: 26px;\">//&nbsp;Object&nbsp;{}</span><br><span class=\"hljs-comment\" style=\"color: #a0a1a7; font-style: italic; line-height: 26px;\">//&nbsp;ç­‰ä»·äº</span><br><span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">Reflect</span>.preventExtensions(obj);&nbsp;<span class=\"hljs-comment\" style=\"color: #a0a1a7; font-style: italic; line-height: 26px;\">//&nbsp;true</span><br></code></pre>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #DEC6FB; color: #595959;\">2.12ã€Reflect.set()</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #595959; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">è¯¥æ–¹æ³•è®¾ç½® target å¯¹è±¡çš„ name å±æ€§ç­‰äº valueã€‚è¯¥æ–¹æ³•æ¥å—å››ä¸ªå‚æ•°ï¼Œtargetï¼šè®¾ç½®å±æ€§çš„ç›®æ ‡å¯¹è±¡ã€‚propertyKeyï¼šè®¾ç½®çš„å±æ€§çš„åç§°ã€‚valueï¼šè®¾ç½®çš„å€¼ã€‚receiverï¼šå¦‚æœé‡åˆ° setterï¼Œreceiver åˆ™ä¸º setter è°ƒç”¨æ—¶çš„ this å€¼ã€‚</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #fafafa; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #383a42; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #fafafa; border-radius: 5px;\"><span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">let</span>&nbsp;person&nbsp;=&nbsp;{<br>&nbsp;&nbsp;<span class=\"hljs-attr\" style=\"color: #986801; line-height: 26px;\">name</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">\"Jack\"</span>,<br>};<br>person.name;&nbsp;<span class=\"hljs-comment\" style=\"color: #a0a1a7; font-style: italic; line-height: 26px;\">//&nbsp;'Jack'</span><br><span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">Reflect</span>.set(person,&nbsp;<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">\"name\"</span>,&nbsp;<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">\"Luci\"</span>);<br>person.name;&nbsp;<span class=\"hljs-comment\" style=\"color: #a0a1a7; font-style: italic; line-height: 26px;\">//&nbsp;'Luci'</span><br><span class=\"hljs-comment\" style=\"color: #a0a1a7; font-style: italic; line-height: 26px;\">//&nbsp;å½“æœ‰setterå‡½æ•°æ—¶</span><br><span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">let</span>&nbsp;person&nbsp;=&nbsp;{<br>&nbsp;&nbsp;<span class=\"hljs-attr\" style=\"color: #986801; line-height: 26px;\">name</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">\"Jack\"</span>,<br>&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">set</span>&nbsp;foo(value)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">return</span>&nbsp;(<span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">this</span>.name&nbsp;=&nbsp;value);<br>&nbsp;&nbsp;},<br>};<br><span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">let</span>&nbsp;receiverObject&nbsp;=&nbsp;{<br>&nbsp;&nbsp;<span class=\"hljs-attr\" style=\"color: #986801; line-height: 26px;\">name</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">\"Luci\"</span>,<br>};<br><span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">Reflect</span>.set(person,&nbsp;<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">\"foo\"</span>,&nbsp;<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">\"Jhon\"</span>,&nbsp;receiverObject);<br>receiverObject.name;&nbsp;<span class=\"hljs-comment\" style=\"color: #a0a1a7; font-style: italic; line-height: 26px;\">//&nbsp;Jhon</span><br></code></pre>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #DEC6FB; color: #595959;\">2.13ã€Reflect.setPrototypeOf()</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #595959; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">è¯¥æ–¹æ³•ä¸ Object.setPrototypeOf() æ–¹æ³•æ˜¯ä¸€æ ·çš„ã€‚å®ƒå¯è®¾ç½®å¯¹è±¡çš„åŸå‹ï¼ˆå³å†…éƒ¨çš„ [[Prototype]] å±æ€§ï¼‰ä¸ºå¦ä¸€ä¸ªå¯¹è±¡æˆ– nullï¼Œå¦‚æœæ“ä½œæˆåŠŸè¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚è¯¥æ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œtargetï¼šè®¾ç½®åŸå‹çš„ç›®æ ‡å¯¹è±¡ã€‚prototypeï¼šå¯¹è±¡çš„æ–°åŸå‹ï¼ˆä¸€ä¸ªå¯¹è±¡æˆ– nullï¼‰ã€‚å¦‚æœ target ä¸æ˜¯å¯¹è±¡çš„è¯å°†ä¼šæŠ¥é”™ã€‚</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #fafafa; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #383a42; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #fafafa; border-radius: 5px;\"><span class=\"hljs-keyword\" style=\"color: #a626a4; line-height: 26px;\">const</span>&nbsp;myObj&nbsp;=&nbsp;{};<br><br><span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">Object</span>.setPrototypeOf(myObj,&nbsp;<span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">Array</span>.prototype);<br><span class=\"hljs-comment\" style=\"color: #a0a1a7; font-style: italic; line-height: 26px;\">//&nbsp;ç­‰ä»·äº</span><br><span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">Reflect</span>.setPrototypeOf(myObj,&nbsp;<span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">Array</span>.prototype);<br></code></pre>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; text-align: left; margin: 20px 10px 0px 0px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"font-size: 18px; font-weight: bold; display: inline-block; padding-left: 10px; border-left: 5px solid #DEC6FB; color: #595959;\">å‚è€ƒ</span><span class=\"suffix\"></span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #595959; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\"><a href=\"https://es6.ruanyifeng.com/#docs/reflect\" style=\"text-decoration: none; word-wrap: break-word; color: #664D9D; font-weight: normal; border-bottom: 1px solid #664D9D;\">é˜®ä¸€å³°ï¼šECMAScript 6 å…¥é—¨â€”â€”Reflect</a></p>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; text-align: left; margin: 20px 10px 0px 0px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"font-size: 18px; font-weight: bold; display: inline-block; padding-left: 10px; border-left: 5px solid #DEC6FB; color: #595959;\">åè¯­</span><span class=\"suffix\"></span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #595959; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">è§‰å¾—è¿˜å¯ä»¥çš„ï¼Œéº»çƒ¦èµ°çš„æ—¶å€™èƒ½ç»™ç‚¹ä¸ªèµï¼Œå¤§å®¶ä¸€èµ·å­¦ä¹ å’Œæ¢è®¨ï¼</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #595959; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ç›¸å…³æ–‡ç« ï¼š</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\"><a href=\"https://juejin.im/post/5f09297b5188252e851c5fe9\" style=\"text-decoration: none; word-wrap: break-word; color: #664D9D; font-weight: normal; border-bottom: 1px solid #664D9D;\">å¸¦ä½ é‡å­¦ES6 | varã€letå’Œconstçš„åŒºåˆ«</a></section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\"><a href=\"https://juejin.im/post/5f0c0a0f5188252e8272da31\" style=\"text-decoration: none; word-wrap: break-word; color: #664D9D; font-weight: normal; border-bottom: 1px solid #664D9D;\">å¸¦ä½ é‡å­¦ES6 | Promsie</a></section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\"><a href=\"https://juejin.im/post/5f0d0b2ef265da22f034a0ac\" style=\"text-decoration: none; word-wrap: break-word; color: #664D9D; font-weight: normal; border-bottom: 1px solid #664D9D;\">å¸¦ä½ é‡å­¦ES6 | Generator</a></section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\"><a href=\"https://juejin.im/post/5f11006b5188252e58584b2e\" style=\"text-decoration: none; word-wrap: break-word; color: #664D9D; font-weight: normal; border-bottom: 1px solid #664D9D;\">å¸¦ä½ é‡å­¦ES6 | Asyncå’ŒAwait</a></section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\"><a href=\"https://juejin.im/post/5f1644d2f265da22bc29c159\" style=\"text-decoration: none; word-wrap: break-word; color: #664D9D; font-weight: normal; border-bottom: 1px solid #664D9D;\">å¸¦ä½ é‡å­¦ES6 | Setå’ŒMap</a></section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\"><a href=\"https://juejin.im/post/6854573219320430605\" style=\"text-decoration: none; word-wrap: break-word; color: #664D9D; font-weight: normal; border-bottom: 1px solid #664D9D;\">å¸¦ä½ é‡å­¦ES6 | Symbol(ä¸ä»…ä»…åªæ˜¯ä¸€ä¸ªæ–°çš„æ•°æ®ç±»å‹)</a></section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\"><a href=\"https://juejin.im/post/6855593806818902030\" style=\"text-decoration: none; word-wrap: break-word; color: #664D9D; font-weight: normal; border-bottom: 1px solid #664D9D;\">å¸¦ä½ é‡å­¦ES6 | Export(è°¨è®°è¾“å‡ºçš„éƒ½æ˜¯å˜é‡)</a></section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\"><a href=\"https://juejin.im/post/6857319959774265358\" style=\"text-decoration: none; word-wrap: break-word; color: #664D9D; font-weight: normal; border-bottom: 1px solid #664D9D;\">å¸¦ä½ é‡å­¦ES6 | proxyå’ŒdefineProperty</a></section></li></ul>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #595959; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">è¿˜å¯ä»¥å…³æ³¨æˆ‘çš„<a href=\"https://tomatoesman.github.io/\" style=\"text-decoration: none; word-wrap: break-word; color: #664D9D; font-weight: normal; border-bottom: 1px solid #664D9D;\">åšå®¢</a>å¸Œæœ›èƒ½ç»™<a href=\"https://github.com/TomatoesMan/TomatoesMan.github.io\" style=\"text-decoration: none; word-wrap: break-word; color: #664D9D; font-weight: normal; border-bottom: 1px solid #664D9D;\">æˆ‘çš„github</a>ä¸Šç‚¹ä¸ªStartï¼Œå°ä¼™ä¼´ä»¬ä¸€å®šä¼šå‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘çš„æ‰€æœ‰ç”¨æˆ·åå‡ ä¹éƒ½ä¸ç•ªèŒ„æœ‰å…³ï¼Œå› ä¸ºæˆ‘çœŸçš„å¾ˆå–œæ¬¢åƒç•ªèŒ„â¤ï¸ï¼ï¼ï¼</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #595959; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æƒ³è·Ÿè½¦ä¸è¿·è·¯çš„å°ä¼™è¿˜å¸Œæœ›å¯ä»¥å…³æ³¨å…¬ä¼—å· å‰ç«¯è€ç•ªèŒ„ æˆ–è€…æ‰«ä¸€æ‰«ä¸‹é¢çš„äºŒç»´ç ğŸ‘‡ğŸ‘‡ğŸ‘‡ã€‚\n<img src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d2babd9582ef4cb2b59aac518ca9b266~tplv-k3u1fbpfcp-zoom-1.image\" alt style=\"max-width: 100%; border-radius: 6px; display: block; margin: 20px auto; object-fit: contain;\"></p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #595959; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æˆ‘æ˜¯ä¸€ä¸ªç¼–ç¨‹ç•Œçš„å°å­¦ç”Ÿï¼Œæ‚¨çš„é¼“åŠ±æ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼ŒğŸ˜„å¸Œæœ›èƒ½ä¸€èµ·åŠ æ²¹å‰è¿›ã€‚</p>\n</section>", "user_name": "ç•ªèŒ„å…ˆæ£®", "description": "æ–‡ç« æ±‡æ€»ï¼šhttps://tomatoesman.github.io/", "got_view_count": 4241, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "Java", "concern_user_count": 252044, "user_id": "2796746683483751", "title": "Java8ä¸­ä½ å¯èƒ½ä¸çŸ¥é“çš„ä¸€äº›åœ°æ–¹ä¹‹Streamå®æˆ˜ä¸‰", "mark_content": "<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #40B8FA;\"><span class=\"prefix\" style=\"display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://my-wechat.mdnice.com/fullstack-1.png); margin-bottom: -22px;\"></span><span class=\"content\" style=\"display: flex; color: #40B8FA; font-size: 20px; margin-left: 25px;\">æ±‡æ€»</span><span class=\"suffix\" style=\"display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(64, 184, 250, .5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;\"></span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æ±‡æ€»æ“ä½œåœ¨Streamæµæ“ä½œæ¯”è¾ƒå¸¸è§ï¼Œæ¯”å¦‚è®¡ç®—æ€»æ•°ï¼Œæ±‚å¹³å‡ç­‰æ“ä½œï¼Œå¸¸ç”¨æ–¹æ³•å¦‚ä¸‹:</p>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://cushier.coding.net/p/picture/d/picture/git/raw/master/20200810161926.png\" alt style=\"max-width: 100%; border-radius: 6px; display: block; margin: 20px auto; object-fit: contain; box-shadow: 2px 4px 7px #999;\"></figure>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ç›¸å…³æ“ä½œå¦‚ä¸‹</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">ç­›é€‰æ‰€æœ‰æœ‰æ•ˆè®¢å• è¿”å›è®¢å•æ€»æ•°</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; background: #282c34; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\">System.out.println(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"countç»“æœ:\"</span>+<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ordersList.stream()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.filter((order)&nbsp;-&gt;&nbsp;order.getIsValid()&nbsp;==&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.collect(Collectors.counting())<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<br>System.out.println(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"countç»“æœ:\"</span>+<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ordersList.stream()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.filter((order)&nbsp;-&gt;&nbsp;order.getIsValid()&nbsp;==&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.count()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<br></code></pre>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">è¿”å›è®¢å•æ€»é‡‘é¢</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; background: #282c34; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\">System.out.println(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"è®¢å•æ€»é‡‘é¢:\"</span>+<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ordersList.stream()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.filter((order)&nbsp;-&gt;&nbsp;order.getIsValid()&nbsp;==&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.collect(Collectors.summarizingDouble(Order::getTotal))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<br>System.out.println(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"è®¢å•æ€»é‡‘é¢:\"</span>+<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ordersList.stream()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.filter((order)&nbsp;-&gt;&nbsp;order.getIsValid()&nbsp;==&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.mapToDouble(Order::getTotal)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.sum()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<br>System.out.println(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"è®¢å•æ€»é‡‘é¢:\"</span>+<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ordersList.stream()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.filter((order)&nbsp;-&gt;&nbsp;order.getIsValid()&nbsp;==&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.map(Order::getTotal)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.reduce(Double::sum)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.get()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<br></code></pre>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">è¿”å›ç”¨æˆ·id=20 æœ‰æ•ˆè®¢å•å¹³å‡æ¯ç¬”æ¶ˆè´¹é‡‘é¢</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; background: #282c34; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\">System.out.println(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"ç”¨æˆ·id=20&nbsp;æœ‰æ•ˆè®¢å•å¹³å‡æ¯ç¬”æ¶ˆè´¹é‡‘é¢:\"</span>+<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ordersList.stream()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.filter((order)&nbsp;-&gt;&nbsp;order.getIsValid()&nbsp;==&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.filter((order&nbsp;-&gt;&nbsp;order.getUserId()==<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">20</span>))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.collect(Collectors.averagingDouble(Order::getTotal))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<br>System.out.println(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"ç”¨æˆ·id=20&nbsp;æœ‰æ•ˆè®¢å•å¹³å‡æ¯ç¬”æ¶ˆè´¹é‡‘é¢:\"</span>+<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ordersList.stream()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.filter((order)&nbsp;-&gt;&nbsp;order.getIsValid()&nbsp;==&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.filter((order&nbsp;-&gt;&nbsp;order.getUserId()==<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">20</span>))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.mapToDouble(Order::getTotal)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.average()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.getAsDouble()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<br><br>System.out.println(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"ç”¨æˆ·id=20&nbsp;æœ‰æ•ˆè®¢å•å¹³å‡æ¯ç¬”æ¶ˆè´¹é‡‘é¢:\"</span>+<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ordersList.stream()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.filter((order)&nbsp;-&gt;&nbsp;order.getIsValid()&nbsp;==&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.filter((order&nbsp;-&gt;&nbsp;order.getUserId()==<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">20</span>))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.collect(Collectors.summarizingDouble(Order::getTotal))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.getAverage()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<br></code></pre>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">ç­›é€‰æ‰€æœ‰æœ‰æ•ˆè®¢å• å¹¶è®¡ç®—è®¢å•æ€»é‡‘é¢</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; background: #282c34; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\">System.out.println(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"è®¢å•æ€»é‡‘é¢:\"</span>+<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ordersList.stream()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.filter((order)&nbsp;-&gt;&nbsp;order.getIsValid()&nbsp;==&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.collect(Collectors.summingDouble(Order::getTotal))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<br></code></pre>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #40B8FA;\"><span class=\"prefix\" style=\"display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://my-wechat.mdnice.com/fullstack-1.png); margin-bottom: -22px;\"></span><span class=\"content\" style=\"display: flex; color: #40B8FA; font-size: 20px; margin-left: 25px;\">æœ€å€¼</span><span class=\"suffix\" style=\"display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(64, 184, 250, .5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;\"></span></h2>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">ç­›é€‰æ‰€æœ‰æœ‰æ•ˆè®¢å• å¹¶è®¡ç®—æœ€å°è®¢å•é‡‘é¢</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; background: #282c34; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\">System.out.println(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"æœ€å°è®¢å•é‡‘é¢:\"</span>+<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ordersList.stream()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.filter((order)&nbsp;-&gt;&nbsp;order.getIsValid()&nbsp;==&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.map(Order::getTotal)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.collect(Collectors.minBy(Double::compare))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<br></code></pre>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">ç­›é€‰æ‰€æœ‰æœ‰æ•ˆè®¢å• å¹¶è®¡ç®—æœ€å¤§è®¢å•é‡‘é¢</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; background: #282c34; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\"><span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;ç­›é€‰æ‰€æœ‰æœ‰æ•ˆè®¢å•&nbsp;å¹¶è®¡ç®—æœ€å¤§è®¢å•é‡‘é¢</span><br>System.out.println(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"æœ€å¤§è®¢å•é‡‘é¢:\"</span>+<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ordersList.stream()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.filter((order)&nbsp;-&gt;&nbsp;order.getIsValid()&nbsp;==&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.map(Order::getTotal)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.collect(Collectors.maxBy(Double::compare))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<br></code></pre>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #40B8FA;\"><span class=\"prefix\" style=\"display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://my-wechat.mdnice.com/fullstack-1.png); margin-bottom: -22px;\"></span><span class=\"content\" style=\"display: flex; color: #40B8FA; font-size: 20px; margin-left: 25px;\">åˆ†ç»„&amp;åˆ†åŒº</span><span class=\"suffix\" style=\"display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(64, 184, 250, .5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;\"></span></h2>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding: 0px; color: black; font-size: 17px; font-weight: bold; text-align: center; position: relative; margin-top: 20px; margin-bottom: 20px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid RGBA(79, 177, 249, .65); color: #2b2b2b; padding-bottom: 2px;\"><span style=\"width: 30px; height: 30px; display: block; background-image: url(https://my-wechat.mdnice.com/fullstack-2.png); background-position: center; background-size: 30px; margin: auto; opacity: 1; background-repeat: no-repeat; margin-bottom: -8px;\"></span>1 åˆ†ç»„</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">groupingBy ç”¨äºå°†æ•°æ®åˆ†ç»„ï¼Œæœ€ç»ˆè¿”å›ä¸€ä¸ª Map ç±»å‹ ï¼ŒgroupingBy ç¬¬äºŒå‚æ•°ç”¨äºå®ç°å¤šçº§åˆ†ç»„</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">æ ¹æ®æœ‰æ•ˆè®¢å•æ”¯ä»˜çŠ¶æ€è¿›è¡Œåˆ†ç»„æ“ä½œ</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; background: #282c34; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\">Map&lt;Integer,List&lt;Order&gt;&gt;&nbsp;g01=ordersList.stream()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.filter((order)&nbsp;-&gt;&nbsp;order.getIsValid()&nbsp;==&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.collect(Collectors.groupingBy(Order::getStatus));<br>g01.forEach((status,order)-&gt;{<br>&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"----------------\"</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"è®¢å•çŠ¶æ€:\"</span>+status);<br>&nbsp;&nbsp;&nbsp;&nbsp;order.forEach(System.out::println);<br>});<br></code></pre>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">ç­›é€‰æœ‰æ•ˆè®¢å•ï¼Œæ ¹æ®ç”¨æˆ·id å’Œ æ”¯ä»˜çŠ¶æ€è¿›è¡Œåˆ†ç»„</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; background: #282c34; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\">Map&lt;Integer,Map&lt;String,List&lt;Order&gt;&gt;&gt;&nbsp;g02=&nbsp;ordersList.stream()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.filter((order)&nbsp;-&gt;&nbsp;order.getIsValid()&nbsp;==&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.collect(Collectors.groupingBy(Order::getUserId,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Collectors.groupingBy((o)-&gt;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">if</span>(o.getStatus()==<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">0</span>){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">return</span>&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"æœªæ”¯ä»˜\"</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">else</span>&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">if</span>&nbsp;(o.getStatus()==<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">return</span>&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"å·²æ”¯ä»˜\"</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">else</span>&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">if</span>&nbsp;(o.getStatus()==<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">2</span>){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">return</span>&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"å¾…å‘è´§\"</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">else</span>&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">if</span>&nbsp;(o.getStatus()==<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">3</span>){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">return</span>&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"å·²å‘è´§\"</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">else</span>&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">if</span>&nbsp;(o.getStatus()==<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">4</span>){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">return</span>&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"å·²æ¥æ”¶\"</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">else</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">return</span>&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"å·²å®Œæˆ\"</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<br>g02.forEach((userId,m)-&gt;{<br>&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"ç”¨æˆ·id:\"</span>+userId+<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"--&gt;æœ‰æ•ˆè®¢å•å¦‚ä¸‹:\"</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;m.forEach((status,os)-&gt;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"çŠ¶æ€:\"</span>+status+<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"---è®¢å•åˆ—è¡¨å¦‚ä¸‹:\"</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;os.forEach(System.out::println);<br>&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"-----------------------\"</span>);<br>});<br></code></pre>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding: 0px; color: black; font-size: 17px; font-weight: bold; text-align: center; position: relative; margin-top: 20px; margin-bottom: 20px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid RGBA(79, 177, 249, .65); color: #2b2b2b; padding-bottom: 2px;\"><span style=\"width: 30px; height: 30px; display: block; background-image: url(https://my-wechat.mdnice.com/fullstack-2.png); background-position: center; background-size: 30px; margin: auto; opacity: 1; background-repeat: no-repeat; margin-bottom: -8px;\"></span>2 åˆ†åŒº</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">åˆ†åŒºä¸åˆ†ç»„çš„åŒºåˆ«åœ¨äºï¼Œåˆ†åŒºæ˜¯æŒ‰ç…§ true å’Œ false æ¥åˆ†çš„ï¼Œå› æ­¤partitioningBy æ¥å—çš„å‚æ•°çš„ lambda ä¹Ÿæ˜¯ <code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">T -&gt; boolean</code></p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">åˆ†åŒºæ“ä½œ-ç­›é€‰è®¢å•é‡‘é¢&gt;1000 çš„æœ‰æ•ˆè®¢å•</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; background: #282c34; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\">Map&lt;Boolean,List&lt;Order&gt;&gt;&nbsp;g03=&nbsp;ordersList.stream()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.filter((order)&nbsp;-&gt;&nbsp;order.getIsValid()&nbsp;==&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.collect(Collectors.partitioningBy((o)-&gt;o.getTotal()&gt;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1000</span>));<br>g03.forEach((b,os)-&gt;{<br>&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"åˆ†åŒºç»“æœ:\"</span>+b+<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"--åˆ—è¡¨ç»“æœ:\"</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;os.forEach(System.out::println);<br>});<br></code></pre>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">æ‹¼æ¥æ“ä½œ-ç­›é€‰æœ‰æ•ˆè®¢å•å¹¶è¿›è¡Œæ‹¼æ¥</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; background: #282c34; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\">String&nbsp;orderStr=ordersList.stream()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.filter((order)&nbsp;-&gt;&nbsp;order.getIsValid()&nbsp;==&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.map(Order::getOrderNo)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.collect(Collectors.joining(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\",\"</span>));<br>System.out.println(orderStr);<br></code></pre>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #40B8FA;\"><span class=\"prefix\" style=\"display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://my-wechat.mdnice.com/fullstack-1.png); margin-bottom: -22px;\"></span><span class=\"content\" style=\"display: flex; color: #40B8FA; font-size: 20px; margin-left: 25px;\">æµçš„åº”ç”¨</span><span class=\"suffix\" style=\"display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(64, 184, 250, .5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;\"></span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">Java8å¼•å…¥Streamæµæ“ä½œï¼Œä½¿å¾—å¯¹å…ƒç´ çš„å¤„ç†æ›´åŠ çš„æ–¹ä¾¿å¿«æ·ï¼Œé€šè¿‡Streamæä¾›çš„ç›¸å…³æ–¹æ³•å¾ˆå¥½çš„ç»“åˆLambdaã€å‡½æ•°å¼æ¥å£ã€æ–¹æ³•å¼•ç”¨ç­‰ç›¸å…³å†…å®¹ï¼Œä½¿å¾—æµçš„å¤„ç†ç›¸æ¯”è¾ƒåŸå§‹é›†åˆå¤„ç†ä»£ç æå¤§ç®€åŒ–ï¼ŒStreamæ”¯æŒå‡½æ•°çš„é“¾å¼è°ƒç”¨ï¼Œä»£ç ä¸Šæ›´åŠ ç´§å‡‘åŒæ—¶Streamæ”¯æŒçš„å…ƒç´ çš„å¹¶è¡ŒåŒ–å¤„ç†æé«˜äº†ç¨‹åºçš„æ‰§è¡Œæ€§èƒ½ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å¯¹äºStreamæµçš„åº”ç”¨é€šå¸¸åœ¨é›†åˆå…ƒç´ æ•°æ®å¤„ç†ä¸Šç‰¹åˆ«æ˜¯å¯¹å…ƒç´ éœ€è¦è¿›è¡Œå¤šæ¬¡å¤„ç†çš„æƒ…å†µï¼ŒåŒæ—¶å¯¹äºå‡½æ•°å¼ç¼–ç¨‹çš„å‘³é“æ›´åŠ æµ“é‡ï¼Œä¹Ÿæ˜¯ä»¥åå¼€å‘çš„ä¸€ä¸ªè¶‹åŠ¿ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å¥½äº†ï¼ŒJava8æ ¸å¿ƒç‰¹æ€§ä¹‹Streamæµå°±ä»‹ç»åˆ°è¿™é‡Œäº†ï¼Œåº”è¯¥æ˜¯éå¸¸è¯¦å°½äº†ï¼Œå¸Œæœ›å¤§å®¶å–œæ¬¢ã€‚</p>\n</section>", "user_name": "åŒä¸€ç‰‡è“å¤©ä¸‹", "description": "ä¸€ä¸ªå‘†èŒã®å°å°ç¨‹åºå‘˜", "got_view_count": 2082, "category_name": "åç«¯", "ctime": 1457483880}
{"tag_name": "CSS", "concern_user_count": 258450, "user_id": "325111174662855", "title": "ç²¾è¯»ã€ŠCSSæ­ç§˜ã€‹ä¹‹èƒŒæ™¯ä¸è¾¹æ¡†", "mark_content": "CSSå¯¹äºå‰ç«¯å·¥ç¨‹å¸ˆæ¥è¯´æ˜¯åŸºç¡€ä¸­çš„åŸºç¡€ï¼Œå¦‚æœåŸºç¡€ä¸æ‰å®ï¼Œå°±å¾—æ—¥å¸¸è·ªæ±‚UEDç»™å›¾æ¥å®ç°æ•ˆæœã€‚\n\n>ã€ŠCSSæ­ç§˜ã€‹è¿™æœ¬ä¹¦è¯»æ¥è®©äººæœ‰æ»¡æ»¡çš„å®‰å…¨æ„Ÿï¼ŒLEA VEROU æ˜¯CSSæ–¹é¢çš„ä¸“å®¶ï¼Œå¯¹CSS3çš„è®¾è®¡å’Œæœªæ¥çš„å‘å±•äº†è§£å¾ˆå¤šã€‚æè¿°çš„47ä¸ªcssæŠ€å·§ä¹Ÿå¾ˆæ¥åœ°æ°”ï¼Œå€¼å¾—ä¸€è¯»å†è¯»ã€‚\n\n> æœ¬æ–‡æ˜¯ç²¾è¯»ã€ŠCSSæ­ç§˜ã€‹ç³»åˆ—æ–‡ç« çš„ç¬¬ä¸€ç¯‡ï¼Œé¢„è®¡æœ‰8ç¯‡ï¼Œä»¥ä¸€ï¼ˆkanï¼‰å‘¨ï¼ˆwoï¼‰ä¸€ï¼ˆxinï¼‰ç¯‡ï¼ˆqingï¼‰çš„è¿›åº¦å‘å¸ƒã€‚\n\n> å¦‚æ— ç‰¹æ®Šè¯´æ˜ï¼Œæ ·å¼å¯¹åº”çš„htmlç»“æ„éƒ½æ˜¯ `<div class=\"box\"></div>`\n\n> ç”±äºæ˜é‡‘é™åˆ¶ï¼Œæ— æ³•åµŒå…¥ iframe æ ‡ç­¾ï¼Œæˆ‘æŠŠ codepen çš„ç¤ºä¾‹é“¾æ¥éƒ½é™„åœ¨äº†æ¯ä¸€èŠ‚ï¼Œæ–¹ä¾¿å¤§å®¶è¾¹è¯»è¾¹ç»ƒã€‚\n\n## åŠé€æ˜è¾¹æ¡†\n\n> view demo on [codepen](https://codepen.io/youngjuning/pen/KKzKroB)\n\nCSS èƒŒæ™¯çš„å·¥ä½œåŸç†æ˜¯é»˜è®¤å»¶ä¼¸åˆ°borderåŒºåŸŸçš„ï¼ŒCSS3 ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `background-clip` å±æ€§æ¥è°ƒæ•´è¿™ä¸ªé»˜è®¤è¡Œä¸ºå¸¦æ¥çš„ä¸ä¾¿ã€‚å°†å®ƒè®¾ä¸º `padding-box`ï¼Œä¾¿å¯ä»¥ä¸è®©èƒŒæ™¯ä¾µå…¥è¾¹æ¡†æ‰€åœ¨çš„èŒƒå›´ã€‚\n\n```css\n.box {\n  border: 10px solid rgba(255,255,255,0.5);\n  background: pink;\n  background-clip: padding-box;\n}\n```\n\n<img src=\"https://i.loli.net/2020/08/09/WzDYntbHJx49kaI.png\" style=\"zoom:50%;\" />\n\n## å¤šé‡è¾¹æ¡†\n\n> view demo on [codepen](https://codepen.io/youngjuning/pen/rNeaOob)\n\n### box-shadow æ–¹æ¡ˆ\n\n1. åˆ©ç”¨ `box-shadow` å±æ€§ç¬¬å››ä¸ªå‚æ•°ï¼ˆæ‰©å¼ åŠå¾„ï¼‰æ§åˆ¶æŠ•å½±é¢ç§¯ï¼Œå…¶ä»–ä¸¤ä¸ªåç§»é‡å’Œæ¨¡ç³ŠåŠå¾„éƒ½è®¾ç½®ä¸ºã€‚\n2. åˆ©ç”¨ `box-shadow` æ”¯æŒé€—å·åˆ†éš”çš„è¯­æ³•ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä»»æ„æ•°é‡çš„æŠ•å½±ã€‚\n\n```css\n.box {\n  width: 100px;\n  height: 100px;\n  margin: 15px;\n  background: yellowgreen;\n  border-radius: 5px;\n  box-shadow: 0 0 0 10px #655, 0 0 0 15px deeppink,\n    0 2px 5px 15px rgba(0, 0, 0, 0.6);\n}\n```\n\n![](https://i.loli.net/2020/08/08/PzA4XJSi8eME7UK.png)\n\næ³¨æ„ï¼š\n\n1. æŠ•å½±çš„è¡Œä¸ºè·Ÿå¤–è¾¹æ¡†ä¸å®Œå…¨ä¸€è‡´ï¼Œå› ä¸ºå®ƒä¸ä¼šå½±å“å¸ƒå±€ï¼Œè€Œä¸”ä¹Ÿä¸ä¼šå—åˆ° `box-sizing` å±æ€§çš„å½±å“ã€‚ä¸è¿‡ï¼Œä½ è¿˜æ˜¯å¯ä»¥é€šè¿‡å†…è¾¹è·æˆ–å¤–è¾¹è·ï¼ˆè¿™å–å†³äºæŠ•å½±æ˜¯å†…åµŒè¿˜æ˜¯å¤–æ‰©çš„ï¼‰æ¥é¢å¤–æ¨¡æ‹Ÿå‡ºè¾¹æ¡†\n2. ä¸Šè¿°ä»£ç åˆ›å»ºå‡ºçš„å‡è¾¹æ¡†å‡ºç°åœ¨å…ƒç´ çš„**å¤–åœˆ**ã€‚å®ƒä»¬å¹¶ä¸ä¼šå“åº”é¼ æ ‡äº‹ä»¶ï¼Œæ¯”å¦‚æ‚¬åœæˆ–ç‚¹å‡»ã€‚å¦‚æœè¿™ä¸€ç‚¹éå¸¸é‡è¦ï¼Œä½ å¯ä»¥ç»™ `box-shadow` å±æ€§åŠ ä¸Š `inset` å…³é”®å­—ï¼Œæ¥ä½¿æŠ•å½±ç»˜åˆ¶åœ¨å…ƒç´ çš„**å†…åœˆ**ã€‚è¯·æ³¨æ„ï¼Œæ­¤æ—¶ä½ éœ€è¦å¢åŠ é¢å¤–çš„å†…è¾¹è·æ¥è…¾å‡ºè¶³å¤Ÿçš„ç©ºéš™ã€‚\n\n### outline æ–¹æ¡ˆ\n\nå¦‚æœä½ åªéœ€è¦ä¸¤å±‚è¾¹æ¡†ï¼Œé‚£å°±å¯ä»¥å…ˆè®¾ç½®ä¸€å±‚å¸¸è§„è¾¹æ¡†ï¼Œå†åŠ ä¸Š `outline`ï¼ˆæè¾¹ï¼‰å±æ€§æ¥äº§ç”Ÿå¤–å±‚çš„è¾¹æ¡†ã€‚\n\nè¯¥æ–¹æ¡ˆè¿˜å¯ä»¥åˆ©ç”¨ `outline-offset` å±æ€§æ¥æ§åˆ¶æè¾¹å’Œå…ƒç´ è¾¹ç¼˜ä¹‹é—´çš„è·ç¦»ï¼ˆå¯ä»¥ä¸ºè´Ÿå€¼ï¼‰ï¼Œä¸‹é¢ä»£ç çš„æ•ˆæœå°±æ˜¯ä¸€ä¸ªç¼è¾¹çš„æ•ˆæœã€‚\n\n```css\n.box {\n  width: 100px;\n  height: 100px;\n  margin: 5px;\n  background: yellowgreen;\n  border-radius: 5px;\n  outline: 1px dashed deeppink;\n  outline-offset: -10px;\n}\n```\n\n![](https://i.loli.net/2020/08/08/Orcg4ytVRuKNbGS.png)\n\n## çµæ´»çš„èƒŒæ™¯å®šä½\n\n> view demo on [codepen](https://codepen.io/youngjuning/pen/WNwbmRj)\n\n### background-position çš„æ‰©å±•è¯­æ³•æ–¹æ¡ˆ\n\nåœ¨CSS3ä¸­ï¼Œ`background-position` å±æ€§å·²ç»å¾—åˆ°æ‰©å±•ï¼Œå®ƒå…è®¸æˆ‘ä»¬åˆ¶å®šèƒŒæ™¯å›¾ç‰‡**è·ç¦»ä»»æ„è§’çš„åç§»é‡**ï¼Œåªè¦æˆ‘ä»¬**åœ¨åç§»é‡å‰é¢åŠ ä¸ŠæŒ‡å®šå…³é”®å­—**ï¼š\n\n```css\n.box {\n  background: url(https://i.loli.net/2020/08/08/jWNPK6e3ucf47LV.png) no-repeat\n    right bottom/50px #6a99bf;\n  background-position: right 15px bottom 15px;\n  width: 200px;\n  height: 120px;\n  border-radius: 8px;\n}\n```\n\n![](https://i.loli.net/2020/08/08/yIVnde16BwN3bSk.png)\n\n### background-origin æ–¹æ¡ˆ\n\n`background-origin` æ˜¯ç”¨æ¥æ§åˆ¶èƒŒæ™¯èµ·å§‹ç‚¹çš„å±æ€§ï¼Œé»˜è®¤æ˜¯ä»¥`padding-box` ä¸ºå‡†çš„ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è®©èƒŒæ™¯çš„çš„èµ·ç‚¹ä»¥å†…å®¹åŒºçš„è¾¹ç¼˜ä¸ºåŸºå‡†ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œæ­¤æ—¶èƒŒæ™¯å›¾ç‰‡è·ç¦»è¾¹è§’çš„åç§»é‡å°±è·Ÿå†…è¾¹è·ä¿æŒä¸€è‡´äº†ï¼‰ã€‚\n\nå¦‚æœä½ æƒ³è¦èƒŒæ™¯åç§»é‡ä¸å®¹å™¨çš„å†…è¾¹è·ä¸€è‡´ï¼Œé‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ¡ˆï¼Œä»£ç å®ç°å¦‚ä¸‹ï¼š\n\n```css\n.box {\n  box-sizing: border-box;\n  width: 200px;\n  height: 120px;\n  border-radius: 8px;\n  background: url(https://i.loli.net/2020/08/08/jWNPK6e3ucf47LV.png) no-repeat\n    right bottom/50px #6a99bf;\n  padding: 10px;\n  background-origin: content-box;\n  background-clip: content-box;\n  border: 1px solid #000;\n}\n```\n\n![](https://i.loli.net/2020/08/08/CufS4jGV75qhgJL.png)\n\n### calc() + background-position æ–¹æ¡ˆ\n\ncalc() å‡½æ•°å¯ä»¥ä¼ å…¥å½¢ä¼¼ `100% - 20px` çš„è¡¨è¾¾å¼ï¼ˆæ³¨æ„ï¼Œ`-` ä¸¤è¾¹å¿…é¡»æœ‰ç©ºæ ¼ã€‚ï¼‰ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹æ€§æ¥ç»“åˆ `background-position` ä»¥å³ä¸Šè§’ä¸ºåŸºå‡†å®šä½ï¼š\n\n```css\n.box {\n  width: 200px;\n  height: 120px;\n  border-radius: 8px;\n  background: url(https://i.loli.net/2020/08/08/jWNPK6e3ucf47LV.png) no-repeat\n    right bottom/50px #6a99bf;\n  background-position: calc(100% - 20px) calc(100% - 10px)\n}\n```\n\n![](https://i.loli.net/2020/08/08/yIVnde16BwN3bSk.png)\n\n## è¾¹æ¡†å†…åœ†è§’\n\n> view demo on [codepen](https://codepen.io/youngjuning/pen/ZEWYNxe)\n\næœ‰æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå®¹å™¨ï¼Œåªåœ¨å†…ä¾§æœ‰åœ†è§’ï¼Œè€Œè¾¹æ¡†æˆ–æè¾¹çš„å››ä¸ªè§’åœ¨å¤–éƒ¨ä»ç„¶ä¿æŒç›´è§’çš„å½¢çŠ¶ã€‚\n\n```css\n.box {\n  margin: 20px;\n  width: 100px;\n  height: 100px;\n  background: #d9c2bc;\n  border-radius: 10px;\n  box-shadow: 0 0 0 5px #655;\n  outline: 10px solid #655;\n}\n```\n\n![](https://i.loli.net/2020/08/08/jesrqO2BW1yXuDp.png)\n\nèƒ½å®ç°ä»¥ä¸Šçš„æ•ˆæœï¼Œä¸»è¦å¾—ç›Šäºä¸¤ä¸ªäº‹å®ï¼šæè¾¹ï¼ˆoutlineï¼‰ä¸ä¼šè·Ÿç€å…ƒç´ çš„åœ†è§’èµ°ï¼ˆå› è€Œæ˜¾ç¤ºå‡ºç›´è§’ï¼‰ï¼Œä½†`box-shadow`å´æ˜¯ä¼šçš„ã€‚\n\næˆ‘ä»¬æŠŠè¿™ä¸¤è€…å åŠ åˆ°ä¸€èµ·ï¼Œ`box-shadow` ä¼šåˆšå¥½å¡«è¡¥æè¾¹å’Œå®¹å™¨åœ†è§’ä¹‹é—´çš„ç©ºéš™ï¼Œè¿™ä¸¤è€…çš„ç»„åˆè¾¾æˆäº†æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœã€‚\n\n> æ³¨æ„ï¼š`box-shadow` çš„é¢œè‰²éœ€è¦å’Œ `outline` ä¿æŒä¸€è‡´ï¼Œ`box-shadow` çš„æ‰©å¼ åŠå¾„è®¾ä¸º`outline`çš„ä¸€åŠå³å¯ã€‚\n\n## æ¡çº¹èƒŒæ™¯\n\næ¡çº¹èƒŒæ™¯åœ¨CSSä¸­æ˜¯åŸºäº `linear-gradient`ã€`repeat-linear-gradient` å®ç°çš„ï¼Œæœ¬èŠ‚ä¸ºå¤§å®¶å±•ç¤ºäº†ä¸€äº›å¯å¿«é€Ÿé£Ÿç”¨çš„ä¾‹å­ã€‚\n\n### 1ã€å¾·å›½å›½æ——ğŸ‡©ğŸ‡ª\n\n> view demo on [codepen](https://codepen.io/youngjuning/pen/gOrbVGo)\n\n```css\n.box {\n  width: 130px;\n  height: 78px;\n  background: linear-gradient(\n    #000 0,\n    #000 33.3%,\n    #cc2a1d 33.3%,\n    #cc2a1d 66.6%,\n    #f8cf47 66.6%,\n    #f8cf47 100%\n  );\n  background-size: 100% 100%;\n}\n```\n\n![](https://upload.wikimedia.org/wikipedia/commons/thumb/b/ba/Flag_of_Germany.svg/260px-Flag_of_Germany.svg.png)\n\n### 2ã€æ³•å›½å›½æ——ğŸ‡«ğŸ‡·\n\n> view demo on [codepen](https://codepen.io/youngjuning/pen/gOrbVGo)\n\n```css\n.box {\n  width: 130px;\n  height: 78px;\n  background: linear-gradient(\n    to right,\n    #002590 0,\n    #002590 33.3%,\n    #ffffff 33.3%,\n    #ffffff 66.6%,\n    #db3c3f 66.6%,\n    #db3c3f 100%\n  );\n  background-size: 100% 100%;\n}\n```\n\n![](https://upload.wikimedia.org/wikipedia/commons/thumb/c/c3/Flag_of_France.svg/260px-Flag_of_France.svg.png)\n\n### 3ã€åœ°å€æ çº¢è“åˆ†å‰²çº¿\n\n> view demo on [codepen](https://codepen.io/youngjuning/pen/mdPyZBe)\n\nä»£ç æ¬è¿è‡ªvantçš„è”ç³»äººç»„ä»¶ï¼Œä½¿ç”¨äº†å¾ªç¯å¼çš„åŠ å¼ºç‰ˆ`linear-gradient`ï¼š`repeating-linear-gradient`ï¼Œå®ƒçš„è‰²æ ‡æ˜¯æ— é™å¾ªç¯é‡å¤çš„ï¼Œç›´åˆ°é“ºæ»¡æ•´ä¸ªèƒŒæ™¯ã€‚\n\né‡å¤çº¿æ€§æ¸å˜å®Œç¾é€‚ç”¨äºâ€”â€”æ¡çº¹æ•ˆæœï¼è¿™å¾—ç›Šäºå®ƒä»¬å¯ä»¥æ— é™å¾ªç¯çš„å¤©èµ‹æ˜¯ï¼Œä¸€ä¸ªæ¸å˜å›¾æ¡ˆå°±å¯ä»¥è‡ªåŠ¨é‡å¤å¹¶é“ºæ»¡æ•´ä¸ªèƒŒæ™¯ã€‚\n\n```css\n.box {\n  background: #fff;\n  width: 200px;\n  position: relative;\n}\n.box::before {\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  height: 2px;\n  /* è¿™é‡Œçš„è¯­æ³•åœ¨CSS4ä¸­å¯èƒ½ä¼šè¢«ç®€åŒ– */\n  background: repeating-linear-gradient(\n    -45deg,\n    #ff6c6c 0,\n    #ff6c6c 20%,\n    transparent 0,\n    transparent 25%,\n    #1989fa 0,\n    #1989fa 45%,\n    transparent 0,\n    transparent 50%\n  );\n  background-size: 80px;\n  content: \"\";\n}\n```\n\n![](https://i.loli.net/2020/08/09/d9olAseI1npxgFw.png)\n\n### 4ã€è€å¼ä¿¡å°è¾¹æ¡†æ ·å¼\n\n> view demo on [codepen](https://codepen.io/youngjuning/pen/ZEWGYKN)\n\nä½¿ç”¨ `border-image` + `repeating-linear-gradient` å¾ˆå®¹æ˜“å®ç°ï¼š\n\n```html\n<div class=\"box\">\n  My name is ä¿Šå®\n</div>\n```\n\n```css\n.box {\n  text-align: center;\n  line-height: 70px;\n  box-sizing: padding-box;\n  width: 200px;\n  height: 70px;\n  background: #fff;\n  border: 5px solid transparent;\n  border-image: 5\n    repeating-linear-gradient(\n      -45deg,\n      #ff6c6c 0,\n      #ff6c6c 10%,\n      transparent 0,\n      transparent 15%,\n      #1989fa 0,\n      #1989fa 25%,\n      transparent 0,\n      transparent 30%\n    );\n}\n```\n\n> border-image ç¬¬ä¸€ä¸ªå€¼ä¸èƒ½å¸¦å•ä½ï¼Œå¦åˆ™æ²¡æœ‰æ•ˆæœï¼\n\n![](https://i.loli.net/2020/08/09/IXDHzKROQhyLsxu.png)\n\n### 5ã€ğŸœèš‚èšè¡Œå†›è¾¹æ¡†\n\n> view demo on [codepen](https://codepen.io/youngjuning/pen/BaKNymx)\n\n```css\n.box {\n  width: 100px;\n  height: 100px;\n  border: 1px solid transparent;\n  background: linear-gradient(white, white) padding-box,\n    repeating-linear-gradient(\n        -45deg,\n        black 0,\n        black 25%,\n        transparent 0,\n        transparent 50%\n      )\n      0% 0% / 0.6em 0.6em;\n  animation: ants 10s linear infinite;\n}\n@keyframes ants {\n  to {\n    background-position: 100% 100%;\n  }\n}\n```\n\n- é¦–å…ˆè¦è®¾ç½®å®¹å™¨çš„è¾¹æ¡†å®½åº¦ä¸º1pxï¼Œé¢œè‰²è¦è®¾ç½®æˆé€æ˜ï¼Œä»¥ä¾¿ç¨åè®¾ç½®çš„èƒŒæ™¯èƒ½å¤Ÿæ˜¾ç¤ºå‡ºæ¥ã€‚\n- å¯ä»¥è®¾ç½®å¤šé‡èƒŒæ™¯ï¼Œå¹¶ç”¨é€—å·éš”å¼€ï¼Œè®¾ç½®åœ¨å‰é¢çš„æ€»æ˜¯ä¼šè¦†ç›–åé¢çš„ã€‚è¿™é‡Œè®¾ç½®äº†ä¸¤å±‚èƒŒæ™¯ï¼Œç¬¬ä¸€å±‚èƒŒæ™¯ä½¿ç”¨çº¿æ€§æ¸å˜`linear-gradient`è®¾ç½®äº†ä»ç™½è‰²åˆ°ç™½è‰²çš„æ¸å˜ï¼Œ`padding-box`æ˜¯`background-clip`å±æ€§çš„å€¼ï¼Œè¡¨ç¤ºèƒŒæ™¯å›¾ç‰‡ç»˜åˆ¶åœ¨å†…è¾¹è·æ–¹æ¡†å†…ã€‚å…¶å®å°±æ˜¯ç»˜åˆ¶äº†ä¸€ä¸ªç™½è‰²çš„å—ï¼Œç”¨æ¥é®ç›–ç¬¬äºŒå±‚èƒŒæ™¯çš„ä¸­é—´éƒ¨åˆ†ï¼Œä¿ç•™è¾¹æ¡†éƒ¨åˆ†ã€‚\n- æŠŠ `background-size` æ”¹ä¸ºæŸä¸ªåˆé€‚çš„å€¼ã€‚\n- æœ€åå°†èƒŒæ™¯å›¾ç‰‡çš„ä½ç½®ä»å·¦ä¸Šè§’ï¼ˆ0% 0%ï¼‰é€æ¸è¿‡æ¸¡åˆ°å³ä¸‹è§’ï¼ˆ100% 100%ï¼‰ï¼Œçœ‹èµ·æ¥çš„æ•ˆæœå°±åƒè¾¹æ¡†åŠ¨èµ·æ¥äº†ä¸€æ ·ã€‚\n\n> æœ¬æ–‡é¦–å‘äº[æ¨ä¿Šå®çš„åšå®¢](https://youngjuning.js.org/)ï¼Œåˆ›ä½œä¸æ˜“ï¼Œæ‚¨çš„ç‚¹èµğŸ‘æ˜¯æˆ‘åšæŒçš„åŠ¨åŠ›ï¼ï¼ï¼\n", "user_name": "ä¿Šå®", "description": "æ€•ä»€ä¹ˆçœŸç†æ— ç©·ï¼Œè¿›ä¸€å¯¸æœ‰ä¸€å¯¸çš„æ¬¢å–œ", "got_view_count": 113962, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "RxJava", "concern_user_count": 61697, "user_id": "817692382075102", "title": "RxNetåšç½‘ç»œè¯·æ±‚ï¼Œç®€æ´å¾—æ²¡æ³•äº†", "mark_content": "# RxNet [Github](https://github.com/DonaldDu/RxNet)\n\n# Androidç½‘ç»œè¯·æ±‚ä¸€èˆ¬æ€ä¹ˆå†™ï¼Ÿ\n## Kotlinåç¨‹\nå¾ˆå¤šäººè¯´ç”¨Kotlinåç¨‹ï¼Œçœ‹äº†åå‘ç°ä¸å¤ªå¥½ç”¨ã€‚\n\n- å¤–é¢éœ€è¦ä¸€ä¸ªasyncUI {}ï¼Œçœ‹ç€éƒ½ä¸çˆ½\n- å¦‚æœæ¥å£å‡ºé”™äº†ï¼Œéœ€è¦åœ¨æ¯ä¸ªè°ƒç”¨å¤„ï¼Œå†™é€»è¾‘æ¥å¤„ç†ã€‚ä¸èƒ½å…¨å±€å¤„ç†é”™è¯¯ï¼Œæ¯”å¦‚ç½‘ç»œè¶…æ—¶ã€‚\n- ä»£ç ä¸å®¹æ˜“æ‡‚ï¼Œæ¯”å¦‚ï¼š deferred1.wait(TOAST)è¿™ä¸ªwait(TOAST)æ˜¯ä»€ä¹ˆä¸œè¥¿ã€‚\n- æ²¡æœ‰å…¨å±€è¿›åº¦æ¡†\n\nä»¥ä¸‹ä»£ç å¼•ç”¨äº [ç”¨ Kotlin åç¨‹æŠŠç½‘ç»œè¯·æ±‚ç©å‡ºèŠ±æ¥](https://www.jianshu.com/p/272430328b6e)\n```\nasyncUI {\n    // å‡è®¾è¿™æ˜¯ä¸¤ä¸ªä¸åŒçš„ api è¯·æ±‚\n    val deferred1 = bg {\n        Server.getApiStore().login1(\"173176360\", \"123456\").execute()\n    }\n\n    val deferred2 = bg {\n        Server.getApiStore().login2(\"173176360\", \"123456\").execute()\n    }\n\n    // åå°è¯·æ±‚ç€ apiï¼Œæ­¤æ—¶æˆ‘è¿˜å¯ä»¥åœ¨ UI åç¨‹ä¸­åšæˆ‘æƒ³åšçš„äº‹æƒ…\n    textView.text = \"loading\"\n    delay(5, TimeUnit.SECONDS)\n\n    // ç­‰ UI åç¨‹ä¸­çš„äº‹æƒ…åšå®Œäº†ï¼Œä¸“å¿ƒç­‰å¾… api è¯·æ±‚å®Œæˆï¼ˆå…¶å® api è¯·æ±‚æœ‰å¯èƒ½å·²ç»å®Œæˆäº†ï¼‰\n    // é€šè¿‡æä¾› ExceptionHandleType è¿›è¡Œå¼‚å¸¸çš„è¿‡æ»¤\n    val response = deferred1.wait(TOAST)\n    deferred2.wait(THROUGH) // deferred2 çš„ç»“æœæˆ‘ä¸å…³å¿ƒ\n\n    // æ­¤æ—¶ä¸¤ä¸ªè¯·æ±‚è‚¯å®šéƒ½å®Œæˆäº†ï¼Œå¹¶ä¸” deferred1 æ²¡æœ‰å¼‚å¸¸å‘ç”Ÿ\n    textView.text = response.toString()\n}\n```\n## çº¯OkHttp\n- ä»£ç å†™èµ·æ¥ä¹Ÿæ¯”è¾ƒéº»çƒ¦ï¼Œæ²¡æœ‰æç¤ºåŠŸèƒ½ã€‚\n- ä¸èƒ½å…¨å±€å¤„ç†é”™è¯¯ï¼Œæ¯”å¦‚ç½‘ç»œè¶…æ—¶ã€‚\n- æ²¡æœ‰å…¨å±€è¿›åº¦æ¡†\n- éœ€è¦åˆ‡æ¢çº¿ç¨‹ä»¥æ“ä½œUI\n```\n//ä»£ç åŒæ ·æ¥æºä¸Šé¢å¼•ç”¨çš„æ–‡ç« \ncallback = {\n    onSuccess =  { res ->\n        // TODO\n    }\n\n    onFail =  { error -> \n        // TODO\n    }\n}\nrequest.execute(callback)\n```\n## å°è£…OkHttp\nè¿˜æœ‰äººè‡ªå·±å°è£…OkHttpï¼Œè¿™ä¸ªå°±çœ‹ä¸ªäººäº†ã€‚\n\næˆ‘è§‰å¾—è¿™ä¸ªä¸å¤ªå¥½ç”¨ï¼Œå‡å¦‚æœ‰ä¸ªæ¥å£è°ƒç”¨10æ¬¡ï¼Œå°±è¦å†™10æ¬¡æ¥å£åœ°å€å’Œâ€˜toClass<Response<Student>>()â€™ï¼Œæ˜¾ç„¶è¿™æ ·ä¸å¥½ã€‚\n\n- ä»£ç æœ‰ç‚¹å†—ä½™ï¼ˆæœåŠ¡åœ°å€å’Œè¿”å›å‚å¯¹è±¡ç±»ï¼‰ã€‚\n- ~~ä¸èƒ½å…¨å±€å¤„ç†é”™è¯¯ï¼Œæ¯”å¦‚ç½‘ç»œè¶…æ—¶~~ï¼ˆæ²¡ç”¨è¿‡ï¼Œä¸å¤ªç¡®å®šæœ‰æ²¡æœ‰ï¼‰ã€‚\n- ~~æ²¡æœ‰å…¨å±€è¿›åº¦æ¡†~~ï¼ˆæ²¡ç”¨è¿‡ï¼Œä¸å¤ªç¡®å®šæœ‰æ²¡æœ‰ï¼‰ã€‚\n\nä»¥ä¸‹ä»£ç å¼•ç”¨äº [RxHttp 2000+starï¼Œåç¨‹è¯·æ±‚ï¼Œä»…éœ€ä¸‰æ­¥](https://juejin.im/post/6856550856796897287?utm_source=gold_browser_extension)\n```\nval response = RxHttp.get(\"/service/...\")\n    .toClass<Response<Student>>()\n    .await()\nif (response.code == 200) {\n    //æ‹¿åˆ°dataå­—æ®µ(Student)åˆ·æ–°UI\n} else {\n    //æ‹¿åˆ°msgå­—æ®µç»™å‡ºé”™è¯¯æç¤º\n} \n```\n# å¹²è´§\né‚£ä¹ˆï¼Œæœ‰æ²¡æœ‰ä¸€ç§æ–¹æ³•èƒ½\n- å…¨å±€é»˜è®¤è¿›åº¦æ¡†ï¼ŒåŒæ—¶æ”¯æŒè‡ªå®šä¹‰è¿›åº¦æ¡†ã€‚\n- å…¨å±€é»˜è®¤å¤„ç†é”™è¯¯ï¼ŒåŒæ—¶æ”¯æŒè‡ªå®šä¹‰å¤„ç†é”™è¯¯ã€‚\n- å¤šä¸ªä¾æ¬¡è¯·æ±‚ä¹Ÿèƒ½å‹å¥½æ”¯æŒã€‚\n- é¡µé¢ç»“æŸï¼Œè‡ªåŠ¨å–æ¶ˆè¯·æ±‚ã€‚\n\n## æœ‰çš„ï¼šRxNet=RxJava3+Retrofit2+OkHttp3\n\nä¸‹é¢å°±æ˜¯è°ƒç”¨ç¤ºä¾‹ã€‚è°ƒç”¨è¿”å›çš„å¯¹è±¡æ˜¯æ¥å£ä¸­ç”³æ˜çš„ç±»å‹ï¼Œæœ‰å®Œæ•´çš„ä»£ç æç¤ºï¼ŒIDEä¸­å¯ä»¥çœ‹åˆ°Hint\n```\n    interface API {\n        @GET(\"Simple?net=1&bz=1\")\n        fun simple(): Observable<ResponsePacket<String>>\n    \n        @GET(\"NetError?net=0&bz=1\")\n        fun netError(): Observable<ResponsePacket<String>>\n    \n        @GET(\"BzError?net=1&bz=0\")\n        fun bzError(): Observable<ResponsePacket<String>>\n    \n        @GET(\"authorizeFailed\")\n        fun authorizeFailed(): Observable<ResponsePacket<String>>\n    }\n\n    private fun subscribeX() {\n        //ç®€å•æ¨¡å¼ï¼Œé€šå¸¸éƒ½ç”¨è¿™ä¸ª\n        api.simple().subscribeX(context) {\n            Toast.makeText(context, \"response:\" + it.message, Toast.LENGTH_SHORT).show()\n        }\n        //æ„é€ æ–¹æ³•æ¨¡å¼ï¼Œçœ‹åå­—å°±çŸ¥é“åŠŸèƒ½äº†\n        api.simple().subscribeXBuilder(context)\n                .progress {\n                    null//null means no default and custom progress\n                }.failed {\n                    true//return error handled or not\n                }.successOnly(true)\n                .response {\n                    Toast.makeText(context, \"response:\" + it.message, Toast.LENGTH_SHORT).show()\n                }\n    }\n```\n## å¤šä¸ªè¯·æ±‚ä¾æ¬¡å‘èµ·\néœ€è¦é¢å¤–å¼•ç”¨\n> implementation \"com.github.DonaldDu:XIntent:1.5.3\"//Waterfall\n\n```\n    //å¤šä¸ªè¯·æ±‚ä¾æ¬¡å‘èµ·ï¼Œä¸è°ƒç”¨ next å°±è‡ªåŠ¨ç»“æŸæµç¨‹ã€‚è¯·æ±‚é—´åˆ‡æ¢æ—¶ï¼Œè¿›åº¦æ¡†ä¸ä¼šé—ªçƒ\n    buttonMultReq.setOnClickListener {\n        Waterfall.flow {\n            apiSample.subscribeX(context) {\n                Log.i(\"TAG\", \"apiSample1\")\n                next()//è¿›å…¥ä¸‹ä¸€ä¸ªflowï¼Œå¯ä»¥å¸¦ä»»æ„ç±»å‹çš„æ•°æ®å¦‚ï¼šnext(\"DATA\")\n            }\n        }.flow {\n            apiSample.subscribeX(context) {\n                Log.i(\"TAG\", \"apiSample2\")\n                next()\n            }\n        }.flow {\n            apiSample.subscribeX(context) {\n                Log.i(\"TAG\", \"apiSample3\")\n                Toast.makeText(context, \"response:\" + it.message, Toast.LENGTH_SHORT).show()\n            }\n        }\n    }\n```\n## å»¶æ—¶è¿”å›ç»“æœ\næœ‰æ—¶ï¼Œæƒ³è¯·æ±‚æ…¢ä¸€ç‚¹ï¼ŒåŠ¨ç”»éœ€è¦æ—¶é—´å±•ç¤ºã€‚æ¯”å¦‚æ£€æŸ¥Appæ›´æ–°ï¼Œå¦‚æœå¤ªå¿«ï¼Œå±å¹•ä¼šé—ªä¸€ä¸‹ï¼Œç„¶åæ˜¾ç¤ºæ²¡æœ‰æ›´æ–°çš„ç»“æœã€‚å¦‚æœå»¶æ—¶900mså°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼ˆä¸ªäººæ„Ÿè§‰å¥½äº›ï¼‰ã€‚\n```\n    buttonDelay.setOnClickListener {\n        val start = System.currentTimeMillis()\n        apiSample.delayResponse(5000)\n                .subscribeX(context) {\n                    val cost = System.currentTimeMillis() - start\n                    Log.i(\"TAG\", \"apiSample cost $cost\")\n                }\n    }\n```\n## å®ç°æ–¹å¼\nä¸ºäº†æ”¯æŒé»˜è®¤è¿›åº¦æ¡†å’Œå…¨å±€é”™è¯¯å¤„ç†éœ€è¦å®ç°ä¸¤ä¸ªç±»ï¼ŒStyledProgressGenerator å’Œ IErrorHandlerã€‚å·²ç»æœ‰äº†é»˜è®¤å®ç°ï¼Œéœ€è¦æ ¹æ®å®é™…éœ€è¦ä½œä¸€äº›è°ƒæ•´å°±è¡Œäº†ã€‚\n```\nclass SampleStyledProgressGenerator : StyledProgressGenerator {\n    override fun generate(observer: IObserverX): StyledProgress? {\n        val context = observer.context\n        return if (context is FragmentActivity) {\n            MultListenerDialog.getInstance(context, observer)\n        } else null\n    }\n}\n\nclass SampleErrorHandler : BaseErrorHandler() {\n    override fun showDialog(context: Context, msg: String): Dialog? {\n        return AlertDialog.Builder(context)\n                .setMessage(msg)\n                .setPositiveButton(\"OK\", null).show()\n    }\n\n    override fun isAuthorizeFailed(activity: Activity, error: IError): Boolean {\n        return error.code == 9001\n    }\n\n    override fun onLogout(context: Context) {\n        val msg = \"onLogout\"\n        Toast.makeText(context, msg, Toast.LENGTH_SHORT).show()\n        Log.i(TAG, msg)\n    }\n\n    override fun isDebug(): Boolean = true\n\n    companion object {\n        private val TAG = IErrorHandler::class.java.simpleName\n    }\n}\n```\n## è¿›åº¦æ¡†æ ·å¼è°ƒæ•´\né»˜è®¤å®ç°çš„æ˜¯è¿™ä¸ªç±»MultListenerDialogï¼Œå¯ä»¥å‚è€ƒè¿™ä¸ªè‡ªå·±å®ç°ã€‚å¦‚æœåªæ˜¯è°ƒæ•´æ¯”è¾ƒå°ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åˆ›å»ºä¸€ä¸ªåŒåçš„Layoutï¼ˆR.layout.net_progress_dialogï¼‰è‡ªå·±éšæ„è°ƒæ•´å°±å¥½ã€‚\n## æ‰‹åŠ¨æ§åˆ¶è¿›åº¦æ¡†\nå¦‚æœåœ¨æ¥å£è°ƒç”¨ä»¥å¤–çš„åœ°æ–¹éœ€è¦æ§åˆ¶è¿›åº¦æ¡†ï¼Œå¯ä»¥è°ƒç”¨ä»¥ä¸‹ä¸¤ä¸ªæ–¹æ³•ã€‚\n\næ¯”å¦‚å…ˆå‹ç¼©å›¾ç‰‡ï¼Œå†ä¸Šä¼ ã€‚åœ¨å¯åŠ¨å‹ç¼©å‰æœ€å¥½æ˜¾ç¤ºè¿›åº¦æ¡†ï¼Œä¸Šä¼ å®Œæˆåä¼šè‡ªåŠ¨å…³é—­è¿›åº¦æ¡†ã€‚è¿˜å¯ä»¥å®ç°å‹ç¼©è¿‡ç¨‹ä¸­å–æ¶ˆåï¼Œå°±ä¸ä¸Šä¼ äº†ã€‚\n\n>éœ€è¦ç‰¹åˆ«æ³¨æ„ä¸‹ï¼šå¦‚æœ Activityä¸­ä¹Ÿæœ‰åŒåçš„æ–¹æ³•æ—¶ï¼Œè°ƒç”¨ä»¥ä¸‹æ–¹æ³•æ‰§è¡Œçš„æ˜¯Activityä¸­å®šä¹‰çš„ï¼Œè€Œä¸æ˜¯ä¸‹é¢çš„ã€‚\n\n```\nfun FragmentActivity.showProgress(): MultListenerDialog {\n    val dialog = MultListenerDialog.getInstance(this)\n    dialog.showProgress()\n    return dialog\n}\n\nfun FragmentActivity.dismissProgress(delay: Boolean = true) {\n    MultListenerDialog.getInstance(this).dismissProgress(delay)\n}\n```\n## å¼•å…¥ä¾èµ–\n```\ndependencies {\n    implementation 'com.github.DonaldDu:RxNet:x.x.x'//JitPack version\n}\n```\n# å…¶å®ƒè¯´æ˜\nè¿™ä¸ªé¡¹ç›®æ˜¯ç”±ä»¥å‰çš„[RetrofitRxUtil](https://github.com/SugarAndroid/RetrofitRxUtil)æ”¹åçš„ï¼Œä¸»è¦æ˜¯ä»¥å‰çš„åå­—ä¸å¤ªå®¹æ˜“çœ‹æ‡‚åŠŸèƒ½ï¼Œæ‰€ä»¥ä¿®æ”¹ä¸ºRxNetï¼Œæ„ä¸ºç”¨RxJavaæ¥å¿«æ·å®ç°ç½‘ç»œè¯·æ±‚çš„å·¥å…·ã€‚\n\nä»¥å‰çš„é¡¹ç›®ä¸ç»´æŠ¤ï¼Œè½¬åˆ°æ–°é¡¹ç›®äº†ã€‚\n# ä½œè€…å…¶å®ƒå¼€æºé¡¹ç›®\n[Androidé¡¹ç›®å¤šæœåŠ¡ç«¯æ¥å£é€‚é…(è¶…ç®€å•)](https://juejin.im/post/6858891439540011015/)\n# æœ€å\nå¼€æºä¸æ˜“ï¼Œå†™æ–‡ç« æ›´ä¸æ˜“ï¼ŒåŠ³çƒ¦å¤§å®¶ç»™æœ¬æ–‡ç‚¹ä¸ªèµï¼Œå¯ä»¥çš„è¯ï¼Œå†ç»™ä¸ªstarï¼Œæ„Ÿæ¿€ä¸å°½", "user_name": "DonaldDu", "description": "", "got_view_count": 2660, "category_name": "Android", "ctime": 1461266353}
{"tag_name": "Vue.js", "concern_user_count": 263220, "user_id": "2049145405450056", "title": "ç”¨ï¼ˆNode+MongoDBï¼‰æ­å»ºæœ€ç®€å•çš„å›¾åºŠæˆ–è€…ç½‘ç›˜", "mark_content": "<section id=\"nice\" data-tool=\"mdniceç¼–è¾‘å™¨\" data-website=\"https://www.mdnice.com\" style=\"font-size: 16px; color: black; line-height: 1.6; word-spacing: 0px; letter-spacing: 0px; word-break: break-word; word-wrap: break-word; text-align: left; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, 'PingFang SC', Cambria, Cochin, Georgia, Times, 'Times New Roman', serif; margin-top: 0; padding: 0;\"><figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://timegods.oss-cn-shenzhen.aliyuncs.com/user/pg4.png\" alt style=\"display: block; max-width: 100%; border-radius: 5px; margin: 12px auto;\"></figure>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding: 0px; color: black; font-weight: bold; font-size: 20px; margin-top: 24px; margin-bottom: 12px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"color: #e7642b; text-align: center; display: block; background-color: #e7642b; color: white; padding: 3px 11px; border-radius: 1px;\">1 æ–‡ç« èµ·æº</span><span class=\"suffix\"></span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; font-size: 16px; line-height: 26px; word-spacing: 3px; letter-spacing: 1px; color: #424B5D;\">åœ¨æ˜é‡‘ç™½å«–äº†è¿™ä¹ˆä¹…ï¼Œæ€»è§‰å¾—å¾—æœ‰ä¸ªäº§å‡ºï¼Œå¦åˆ™ç™½å«–çš„æ€ªä¸å¥½æ„æ€çš„ğŸ¤£çœ‹åˆ°ç½‘ä¸Šå„ç§å„æ ·çš„é™„ä»¶ä¸Šä¼ ï¼Œè§‰å¾—å¯¹äºå…¥é—¨çš„äººå¯èƒ½æœ‰äº›éš¾åº¦ï¼Œä»Šå¤©å°±å¸¦æ¥äº†å…³äºNode+Mongodbçš„é™„ä»¶ä¸Šä¼ ä¸‹è½½æ–¹é¢çš„æ–‡ç« ã€‚è¯¥é¡¹ç›®æ¯”è¾ƒç®€å•ï¼Œæ‰€ä»¥ç›®å½•ç®€å•çš„ä¸€æ‰¹ï¼Œå„ä½å­¦åˆ°çš„å¯ä»¥å¿«é€Ÿæ­å»ºä¸€ä¸ªå°ç½‘ç›˜å›¾åºŠå•¥çš„ã€‚æ„Ÿè°¢æ˜é‡‘å„ä½å¤§å¤§çš„æ–‡ç« è®©æˆ‘å‡èŒåŠ è–ªäº†ğŸ˜ï¼ˆä¿ºæ˜¯ç”·å¨ƒï¼‰</p>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding: 0px; color: black; font-weight: bold; font-size: 20px; margin-top: 24px; margin-bottom: 12px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"color: #e7642b; text-align: center; display: block; background-color: #e7642b; color: white; padding: 3px 11px; border-radius: 1px;\">2 èµ·æ‰‹å¼</span><span class=\"suffix\"></span></h2>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding: 0px; margin-top: 24px; margin-bottom: 12px; font-weight: bold; font-size: 18px; color: #424B5D;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">2.1 æ¦‚å¿µ</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; font-size: 16px; line-height: 26px; word-spacing: 3px; letter-spacing: 1px; color: #424B5D;\">é¦–å…ˆæˆ‘ä»¬å¾—å…ˆå»äº†è§£ä¸€ä¸‹<a href=\"https://mongodb.net.cn/manual/core/gridfs/\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #eb6161; border-bottom: 1px solid #eb6161;\"><span style=\"margin-right: 6px;\">ğŸ‘‰</span>Mongodbçš„æ–‡ä»¶å‚¨å­˜ï¼ˆGridFSï¼‰</a>æ˜¯å•¥ï¼Œå› ä¸ºæˆ‘ä»¬éƒ½æ˜¯åŸºäº <strong style=\"font-weight: bold; color: #424B5D;\">GridFS</strong> æ¥è¿›è¡Œæ–‡ä»¶å‚¨å­˜</p>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding: 0px; margin-top: 24px; margin-bottom: 12px; font-weight: bold; font-size: 18px; color: #424B5D;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">2.2 æˆ‘ä»¬éœ€è¦ä»€ä¹ˆ</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; font-size: 16px; line-height: 26px; word-spacing: 3px; letter-spacing: 1px; color: #424B5D;\">äº†è§£äº†å¤§æ¦‚æ¦‚å¿µåå°±å¯ä»¥ç€æ‰‹å®‰è£…æˆ‘ä»¬å¿…é¡»çš„æ’ä»¶äº†</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; list-style-type: disc; font-size: 15px; margin: 0; padding-left: 24px; color: #424B5D;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; text-align: left; font-weight: 500; margin: 4px 0; line-height: 24px; color: #424B5D;\"><a href=\"https://www.npmjs.com/package/express\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #eb6161; border-bottom: 1px solid #eb6161;\"><span style=\"margin-right: 6px;\">ğŸ‘‰</span>express</a> ï¼ˆè¿™æ˜¯å•¥ä¸ç”¨æˆ‘å¤šè¯´ï¼‰</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; text-align: left; font-weight: 500; margin: 4px 0; line-height: 24px; color: #424B5D;\"><a href=\"https://www.npmjs.com/package/body-parser\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #eb6161; border-bottom: 1px solid #eb6161;\"><span style=\"margin-right: 6px;\">ğŸ‘‰</span>body-parser</a> ï¼ˆNodeè§£æbodyçš„ä¸­é—´ä»¶ï¼‰</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; text-align: left; font-weight: 500; margin: 4px 0; line-height: 24px; color: #424B5D;\"><a href=\"https://www.npmjs.com/package/ejs\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #eb6161; border-bottom: 1px solid #eb6161;\"><span style=\"margin-right: 6px;\">ğŸ‘‰</span>ejs</a> ï¼ˆæ¨¡æ¿å¼•æ“ï¼Œå¿«é€Ÿå¼€å‘å°±ä¸æå‰åç«¯åˆ†ç¦»äº†ï¼Œæœ‰å…´è¶£çš„å°ä¼™ä¼´å¯ä»¥ç”¨Vue/Reactæ¥æ­å»ºå°ç½‘ç›˜ï¼‰</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; text-align: left; font-weight: 500; margin: 4px 0; line-height: 24px; color: #424B5D;\"><a href=\"https://www.npmjs.com/package/gridfs-stream\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #eb6161; border-bottom: 1px solid #eb6161;\"><span style=\"margin-right: 6px;\">ğŸ‘‰</span>gridfs-stream</a> ï¼ˆè½»æ¾åœ°ä¸MongoDB GridFSä¹‹é—´ä¼ è¾“æ–‡ä»¶ã€‚ï¼‰</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; text-align: left; font-weight: 500; margin: 4px 0; line-height: 24px; color: #424B5D;\"><a href=\"https://www.npmjs.com/package/method-override\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #eb6161; border-bottom: 1px solid #eb6161;\"><span style=\"margin-right: 6px;\">ğŸ‘‰</span>method-override</a> (æˆ‘ä»¬ç”¨formè¡¨å•ç®€å•ä¸Šä¼ ï¼Œå› ä¸ºformè¡¨å•ä¸æ”¯æŒput/deleteè¯·æ±‚æ–¹å¼ï¼Œæ‰€ä»¥æŠŠå®ƒå®‰æ’ä¸Šäº†ï¼Œå°ä¼™ä¼´å¯è‡ªè¡Œä½¿ç”¨Ajaxï¼Œå°±ä¸éœ€è¦è¿™ä¹ˆéº»çƒ¦äº†)</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; text-align: left; font-weight: 500; margin: 4px 0; line-height: 24px; color: #424B5D;\"><a href=\"https://www.npmjs.com/package/mongoose\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #eb6161; border-bottom: 1px solid #eb6161;\"><span style=\"margin-right: 6px;\">ğŸ‘‰</span>mongoose</a> (ç”¨äºè¿æ¥mongodbå¿…ä¸å¯å°‘çš„æ’ä»¶)</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; text-align: left; font-weight: 500; margin: 4px 0; line-height: 24px; color: #424B5D;\"><a href=\"https://www.npmjs.com/package/multer\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #eb6161; border-bottom: 1px solid #eb6161;\"><span style=\"margin-right: 6px;\">ğŸ‘‰</span>multer</a> (Multeræ˜¯ç”¨äºå¤„ç†å¤šéƒ¨åˆ†/è¡¨å•æ•°æ®çš„node.jsä¸­é—´ä»¶ï¼Œä¸»è¦ç”¨äºä¸Šä¼ æ–‡ä»¶ã€‚ å®ƒè¢«ç¼–å†™åœ¨busboyä¹‹ä¸Šï¼Œä»¥å®ç°æœ€å¤§æ•ˆç‡ã€‚)</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; text-align: left; font-weight: 500; margin: 4px 0; line-height: 24px; color: #424B5D;\"><a href=\"https://www.npmjs.com/package/multer-gridfs-storage\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #eb6161; border-bottom: 1px solid #eb6161;\"><span style=\"margin-right: 6px;\">ğŸ‘‰</span>multer-gridfs-storage</a> (Multerçš„GridFSå­˜å‚¨å¼•æ“å¯å°†ä¸Šä¼ çš„æ–‡ä»¶ç›´æ¥å­˜å‚¨åˆ°MongoDbã€‚)</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; text-align: left; font-weight: 500; margin: 4px 0; line-height: 24px; color: #424B5D;\"><a href=\"https://www.npmjs.com/package/nodemon\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #eb6161; border-bottom: 1px solid #eb6161;\"><span style=\"margin-right: 6px;\">ğŸ‘‰</span>nodemon</a> (çƒ­æ›´æ–°)</section></li></ul>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; font-size: 16px; line-height: 26px; word-spacing: 3px; letter-spacing: 1px; color: #424B5D;\">ä»¥ä¸Šå°±æ˜¯æˆ‘ä»¬éœ€è¦å‡†å¤‡çš„ä¸œè¥¿äº†</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; margin: 12px auto; border-radius: 5px; box-shadow: 0 1px 2px -2px rgba(0,0,0,.16), 0 3px 6px 0 rgba(0,0,0,.12), 0 5px 12px 4px rgba(0,0,0,.09) !important;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #282c34; border-radius: 5px;\">//&nbsp;æ‡’äººå¤åˆ¶åŒºåŸŸ<br><br>npm&nbsp;install&nbsp;express&nbsp;body-parser&nbsp;ejs&nbsp;gridfs-stream&nbsp;method-override&nbsp;mongoose&nbsp;multer&nbsp;multer-gridfs-storage<br>//&nbsp;or<br>yarn&nbsp;add&nbsp;express&nbsp;body-parser&nbsp;ejs&nbsp;gridfs-stream&nbsp;method-override&nbsp;mongoose&nbsp;multer&nbsp;multer-gridfs-storage<br></code></pre>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding: 0px; margin-top: 24px; margin-bottom: 12px; font-weight: bold; font-size: 18px; color: #424B5D;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">2.3 åˆå§‹åŒ–ä¸€ä¸ªé¡¹ç›®</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; margin: 12px auto; border-radius: 5px; box-shadow: 0 1px 2px -2px rgba(0,0,0,.16), 0 3px 6px 0 rgba(0,0,0,.12), 0 5px 12px 4px rgba(0,0,0,.09) !important;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #282c34; border-radius: 5px;\">//&nbsp;å¯è‡ªè¡Œè¡¥å……ä¿¡æ¯<br>//&nbsp;npm&nbsp;init<br></code></pre>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; font-size: 16px; line-height: 26px; word-spacing: 3px; letter-spacing: 1px; color: #424B5D;\">ç„¶ååœ¨æ ¹ç›®å½•æ–°å»ºä¸€ä¸ªå…¥å£æ–‡ä»¶ app.js,å’Œé¡µé¢  views/index.ejs</p>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding: 0px; color: black; font-weight: bold; font-size: 20px; margin-top: 24px; margin-bottom: 12px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"color: #e7642b; text-align: center; display: block; background-color: #e7642b; color: white; padding: 3px 11px; border-radius: 1px;\">3 ç°åœ¨é¡¹ç›®å¼€å§‹äº†</span><span class=\"suffix\"></span></h2>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding: 0px; margin-top: 24px; margin-bottom: 12px; font-weight: bold; font-size: 18px; color: #424B5D;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">3.1 å…ˆå°†åŸºç¡€éƒ¨åˆ†å®Œäº‹</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; font-size: 16px; line-height: 26px; word-spacing: 3px; letter-spacing: 1px; color: #424B5D;\">å°†æˆ‘ä»¬å®‰è£…çš„åŒ…å¼•å…¥ï¼Œå†è·‘è·‘çœ‹çœ‹</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; margin: 12px auto; border-radius: 5px; box-shadow: 0 1px 2px -2px rgba(0,0,0,.16), 0 3px 6px 0 rgba(0,0,0,.12), 0 5px 12px 4px rgba(0,0,0,.09) !important;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #282c34; border-radius: 5px;\">const&nbsp;express&nbsp;=&nbsp;require(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'express'</span>)<br>const&nbsp;path&nbsp;=&nbsp;require(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'path'</span>)<br>const&nbsp;crypto&nbsp;=&nbsp;require(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'crypto'</span>)<br>const&nbsp;mongoose&nbsp;=&nbsp;require(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'mongoose'</span>)<br>const&nbsp;multer&nbsp;=&nbsp;require(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'multer'</span>)<br>const&nbsp;GridFsStorage&nbsp;=&nbsp;require(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'multer-gridfs-storage'</span>)<br>const&nbsp;GridFsStream&nbsp;=&nbsp;require(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'gridfs-stream'</span>)<br>const&nbsp;methodOverride&nbsp;=&nbsp;require(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'method-override'</span>)<br>const&nbsp;bodyParser&nbsp;=&nbsp;require(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'body-parser'</span>)<br><br>const&nbsp;app&nbsp;=&nbsp;express()<br><br>app.set(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'view&nbsp;engine'</span>,&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'ejs'</span>)&nbsp;//&nbsp;è®¾ç½®æ¨¡æ¿å¼•æ“<br><br>app.use(bodyParser.json())&nbsp;<br>app.use(methodOverride(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'_method'</span>))<br><br>app.get(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'/'</span>,&nbsp;(req,&nbsp;res)&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;res.render(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'index'</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;})<br>})<br><br>const&nbsp;port&nbsp;=&nbsp;5000<br>app.listen(port,&nbsp;()&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;console.log(`App&nbsp;listering&nbsp;on&nbsp;port&nbsp;<span class=\"hljs-variable\" style=\"color: #d19a66; line-height: 26px;\">${port}</span>`)<br>})<br></code></pre>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; font-size: 16px; line-height: 26px; word-spacing: 3px; letter-spacing: 1px; color: #424B5D;\">ä¸€èˆ¬æ¥è¯´å¯åŠ¨äº†app.jsçš„è¯æˆ‘ä»¬åœ¨æµè§ˆå™¨è®¿é—® http://localhost:5000 å°±èƒ½çœ‹åˆ° views/index.ejs ä¸­çš„ç•Œé¢äº†ï¼Œå¦‚æœæ²¡æœ‰ï¼Œè‡ªè¡ŒæŸ¥çœ‹æ§åˆ¶å°æ˜¯å¦æŠ¥é”™</p>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding: 0px; margin-top: 24px; margin-bottom: 12px; font-weight: bold; font-size: 18px; color: #424B5D;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">3.2 è¿æ¥æˆ‘ä»¬çš„Mongodbæ•°æ®åº“</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; font-size: 16px; line-height: 26px; word-spacing: 3px; letter-spacing: 1px; color: #424B5D;\">æˆ‘è¿™è¾¹ç”¨çš„æœ¬åœ°mongodbæ•°æ®åº“ï¼Œçº¿ä¸Šä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ <strong style=\"font-weight: bold; color: #424B5D;\">NoSQL manager for mongdb</strong> æ¥æŸ¥çœ‹æˆ‘ä»¬æ•°æ®åº“é‡Œé¢çš„æ•°æ®ï¼Œæˆ‘ä»¬æ–°å»ºä¸€ä¸ªæ–°çš„é›†åˆï¼Œæˆ‘è¿™è¾¹å« grid_uploadsã€‚æ‰€ä»¥è¿æ¥çš„è¯ä¹Ÿæ˜¯è¿æ¥è¿™ä¸ªé›†åˆ</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; margin: 12px auto; border-radius: 5px; box-shadow: 0 1px 2px -2px rgba(0,0,0,.16), 0 3px 6px 0 rgba(0,0,0,.12), 0 5px 12px 4px rgba(0,0,0,.09) !important;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #282c34; border-radius: 5px;\">//&nbsp;æ•°æ®åº“çš„é“¾æ¥<br>const&nbsp;mongoURL&nbsp;=&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'mongodb://localhost:27017/grid_uploads'</span><br><br>const&nbsp;connect&nbsp;=&nbsp;mongoose.createConnection(mongoURL,&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;useNewUrlParser:&nbsp;<span class=\"hljs-literal\" style=\"color: #56b6c2; line-height: 26px;\">true</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;useUnifiedTopology:&nbsp;<span class=\"hljs-literal\" style=\"color: #56b6c2; line-height: 26px;\">true</span><br>})<br></code></pre>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; font-size: 16px; line-height: 26px; word-spacing: 3px; letter-spacing: 1px; color: #424B5D;\">å¯ä»¥å°è¯•åœ¨NoSQLå†™å…¥ä¸€äº›æ•°æ®ï¼Œå…·ä½“ä½¿ç”¨å¯ä»¥å‚è€ƒåšå®¢<a href=\"https://www.cnblogs.com/TurboWay/p/8213656.html\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #eb6161; border-bottom: 1px solid #eb6161;\"><span style=\"margin-right: 6px;\">ğŸ‘‰</span>ã€MongoDBã€‘NoSQL Manager for MongoDB æ•™ç¨‹\n</a></p>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding: 0px; margin-top: 24px; margin-bottom: 12px; font-weight: bold; font-size: 18px; color: #424B5D;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">3.3 ç¾åŒ–ä¸€ä¸‹ç•Œé¢ï¼ˆviews/index.ejsï¼‰</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; font-size: 16px; line-height: 26px; word-spacing: 3px; letter-spacing: 1px; color: #424B5D;\">ä½œä¸ºä¸€ä¸ªå°ä¸¤å¹´çš„å‰ç«¯å·¥ç¨‹å¸ˆï¼Œå·²ç»ç»ƒå°±äº†åƒç´ çœ¼äº†ï¼Œæˆ‘ä»¬è‚¯å®šä¸èƒ½æŠŠç•Œé¢åšçš„è¾£ä¹ˆä¸‘å¯¹å§ï¼Œçœ¼ç›è¿‡ä¸å»å•Šï¼Œæ‰€ä»¥æˆ‘ä»¬ç®€å•çš„ç”¨bootstrap4æ¥åšä¸ªç•Œé¢å¥½äº†</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; margin: 12px auto; border-radius: 5px; box-shadow: 0 1px 2px -2px rgba(0,0,0,.16), 0 3px 6px 0 rgba(0,0,0,.12), 0 5px 12px 4px rgba(0,0,0,.09) !important;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #282c34; border-radius: 5px;\">&lt;!DOCTYPE&nbsp;html&gt;<br>&lt;html&nbsp;lang=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"en\"</span>&gt;<br><br>&lt;head&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;charset=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"UTF-8\"</span>&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;name=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"viewport\"</span>&nbsp;content=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"width=device-width,&nbsp;initial-scale=1.0\"</span>&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;title&gt;æ–‡ä»¶ä¸Šä¼ &lt;/title&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;link&nbsp;rel=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"stylesheet\"</span>&nbsp;href=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css\"</span>&nbsp;integrity=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk\"</span>&nbsp;crossorigin=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"anonymous\"</span>&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;style&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;img&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;width:&nbsp;100%;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/style&gt;<br>&lt;/head&gt;<br><br>&lt;body&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"container\"</span>&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"row\"</span>&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"col-md-6&nbsp;m-auto\"</span>&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;h2&nbsp;class=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"text-center&nbsp;display-4&nbsp;my-4\"</span>&gt;Mongoæ–‡ä»¶ä¸Šä¼ &lt;/h2&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;form&nbsp;action=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"/upload\"</span>&nbsp;method=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"POST\"</span>&nbsp;enctype=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"multipart/form-data\"</span>&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"custom-file&nbsp;mb-3\"</span>&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;input&nbsp;<span class=\"hljs-built_in\" style=\"color: #e6c07b; line-height: 26px;\">type</span>=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"file\"</span>&nbsp;name=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"file\"</span>&nbsp;id=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"file\"</span>&nbsp;class=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"custom-file-input\"</span>&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;label&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">for</span>=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"file\"</span>&nbsp;class=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"custom-file-label\"</span>&gt;é€‰æ‹©æ–‡ä»¶&lt;/label&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;input&nbsp;class=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"btn&nbsp;btn-primary&nbsp;btn-block\"</span>&nbsp;<span class=\"hljs-built_in\" style=\"color: #e6c07b; line-height: 26px;\">type</span>=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"submit\"</span>&nbsp;value=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"æäº¤\"</span>&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/form&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;hr&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>&lt;/body&gt;<br>&lt;script&nbsp;src=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js\"</span>&nbsp;integrity=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj\"</span>&nbsp;crossorigin=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"anonymous\"</span>&gt;&lt;/script&gt;<br>&lt;script&nbsp;src=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js\"</span>&nbsp;integrity=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo\"</span>&nbsp;crossorigin=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"anonymous\"</span>&gt;&lt;/script&gt;<br>&lt;script&nbsp;src=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.min.js\"</span>&nbsp;integrity=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI\"</span>&nbsp;crossorigin=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"anonymous\"</span>&gt;&lt;/script&gt;<br><br>&lt;/html&gt;<br></code></pre>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; font-size: 16px; line-height: 26px; word-spacing: 3px; letter-spacing: 1px; color: #424B5D;\">é‚£ä¹ˆæˆ‘ä»¬è¯·æ±‚ http://localhost:5000 çš„è¯æˆ‘ä»¬çœ‹åˆ°çš„åº”è¯¥æ˜¯è¿™æ ·å­çš„\n<img src=\"https://timegods.oss-cn-shenzhen.aliyuncs.com/markdown/mg01.png\" alt style=\"display: block; max-width: 100%; border-radius: 5px; margin: 12px auto;\"></p>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding: 0px; margin-top: 24px; margin-bottom: 12px; font-weight: bold; font-size: 18px; color: #424B5D;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">3.4 åšä¸€äº›å¿…é¡»çš„å¤„ç†</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; margin: 12px auto; border-radius: 5px; box-shadow: 0 1px 2px -2px rgba(0,0,0,.16), 0 3px 6px 0 rgba(0,0,0,.12), 0 5px 12px 4px rgba(0,0,0,.09) !important;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #282c34; border-radius: 5px;\">//&nbsp;å®šä¹‰gfså˜é‡ï¼Œåç»­æˆ‘ä»¬è¿›è¡Œæ•°æ®åº“æ–‡ä»¶æ“ä½œçš„æ—¶å€™å¯ä¸èƒ½å°‘<br><span class=\"hljs-built_in\" style=\"color: #e6c07b; line-height: 26px;\">let</span>&nbsp;gfs;<br>connect.once(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'open'</span>,&nbsp;()&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;ç›‘å¬æ•°æ®åº“å¼€å¯ï¼Œé€šè¿‡&nbsp;gridfs-stream&nbsp;ä¸­é—´ä»¶å’Œæ•°æ®åº“è¿›è¡Œæ–‡ä»¶çš„å‡ºå…¥æ§åˆ¶<br>&nbsp;&nbsp;&nbsp;&nbsp;gfs&nbsp;=&nbsp;GridFsStream(connect.db,&nbsp;mongoose.mongo)<br>&nbsp;&nbsp;&nbsp;&nbsp;gfs.collection(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'upload'</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;å®ƒä¼šåœ¨æˆ‘ä»¬æ•°æ®åº“ä¸­å»ºç«‹&nbsp;upload.files(è®°å½•æ–‡ä»¶ä¿¡æ¯)&nbsp;&nbsp;upload.chunks(å­˜å‚¨æ–‡ä»¶å—)<br>})<br><br>//&nbsp;ä½¿ç”¨&nbsp;multer-gridfs-storage&nbsp;Multer&nbsp;ä¸­é—´ä»¶æ¥è®²æˆ‘ä»¬ä¸Šä¼ çš„é™„ä»¶ç›´æ¥å­˜å‚¨åˆ°MongoDb<br>const&nbsp;storage&nbsp;=&nbsp;new&nbsp;GridFsStorage({<br>&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;mongoURL,<br>&nbsp;&nbsp;&nbsp;&nbsp;file:&nbsp;(req,&nbsp;file)&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-built_in\" style=\"color: #e6c07b; line-height: 26px;\">return</span>&nbsp;new&nbsp;Promise((resolve,&nbsp;reject)&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;ä¸‹é¢æ³¨é‡Šéƒ¨åˆ†æ˜¯ç»™æ–‡ä»¶è¿›è¡Œé‡å‘½åçš„ï¼Œå¦‚æœæƒ³è¦åŸæ–‡ä»¶åç§°å¯ä»¥è‡ªè¡Œä½¿ç”¨&nbsp;file.originalname&nbsp;è¿”å›ï¼Œ<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;å»ºè®®æœ‰æ—¶é—´çš„å°ä¼™ä¼´å­˜å‚¨ä¸¤ä¸ªæ–‡æ¡£ï¼Œä¸€ä¸ªè®°å½•åŸæ–‡ä»¶åï¼Œä¸€ä¸ªè®°å½•åŠ å¯†æ–‡ä»¶åï¼Œç„¶åè¿”å›åˆ°é¡µé¢çš„æ—¶å€™å¯ä»¥å°†ä¸­æ–‡åè¿”å›å»<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;crypto.randomBytes(16,&nbsp;(err,&nbsp;buf)&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">if</span>&nbsp;(err)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-built_in\" style=\"color: #e6c07b; line-height: 26px;\">return</span>&nbsp;reject(err)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;filename&nbsp;=&nbsp;buf.toString(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'hex'</span>)&nbsp;+&nbsp;path.extname(file.originalname)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;fileinfo&nbsp;=&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filename,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bucketName:&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'upload'</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolve(fileinfo)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;})<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;fileinfo&nbsp;=&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filename:&nbsp;new&nbsp;Date()&nbsp;+&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'-'</span>&nbsp;+&nbsp;file.originalname,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bucketName:&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'upload'</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolve(fileinfo)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>})<br><br>const&nbsp;upload&nbsp;=&nbsp;multer({&nbsp;storage&nbsp;})<br></code></pre>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding: 0px; margin-top: 24px; margin-bottom: 12px; font-weight: bold; font-size: 18px; color: #424B5D;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">3.5 å†™æˆ‘ä»¬ä¸Šä¼ ç¬¬ä¸€ä¸ªæ–‡ä»¶çš„æ¥å£</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; margin: 12px auto; border-radius: 5px; box-shadow: 0 1px 2px -2px rgba(0,0,0,.16), 0 3px 6px 0 rgba(0,0,0,.12), 0 5px 12px 4px rgba(0,0,0,.09) !important;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #282c34; border-radius: 5px;\">app.post(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'/upload'</span>,&nbsp;upload.single(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'file'</span>),&nbsp;(req,&nbsp;res)&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;res.redirect(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'/'</span>)<br>})<br></code></pre>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; font-size: 16px; line-height: 26px; word-spacing: 3px; letter-spacing: 1px; color: #424B5D;\">çœ‹èµ·æ¥ç®€ç®€å•å•ï¼Œè¯·è®°ç€è¿™ä¹ˆå‡ ä»¶äº‹</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; list-style-type: disc; font-size: 15px; margin: 0; padding-left: 24px; color: #424B5D;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; text-align: left; font-weight: 500; margin: 4px 0; line-height: 24px; color: #424B5D;\">åœ¨views/index.ejsä¸­ <strong style=\"font-weight: bold; color: #424B5D;\">ï¼ˆinput type=file</strong> æŒ‡å®šçš„nameå¾—å’Œæ¥å£çš„ <strong style=\"font-weight: bold; color: #424B5D;\">upload.single('file')</strong> ä¸€æ ·</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; text-align: left; font-weight: 500; margin: 4px 0; line-height: 24px; color: #424B5D;\">ä¸Šä¼ å®Œæ–‡ä»¶æˆ‘ä»¬é‡å®šå‘å›æˆ‘ä»¬çš„é¦–é¡µ\næ­¤æ—¶æˆ‘ä»¬å°±å¯ä»¥åœ¨NoSqlçœ‹åˆ°æˆ‘ä»¬çš„ä¸¤ä¸ªæ–‡æ¡£æœ‰æ•°æ®äº†</section></li></ul>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; font-size: 16px; line-height: 26px; word-spacing: 3px; letter-spacing: 1px; color: #424B5D;\">è¿™æ˜¯upload.chunks\n<img src=\"https://timegods.oss-cn-shenzhen.aliyuncs.com/markdown/mg02.png\" alt style=\"display: block; max-width: 100%; border-radius: 5px; margin: 12px auto;\"></p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; font-size: 16px; line-height: 26px; word-spacing: 3px; letter-spacing: 1px; color: #424B5D;\">è¿™æ˜¯upload.files\n<img src=\"https://timegods.oss-cn-shenzhen.aliyuncs.com/markdown/mg03.png\" alt style=\"display: block; max-width: 100%; border-radius: 5px; margin: 12px auto;\"></p>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding: 0px; margin-top: 24px; margin-bottom: 12px; font-weight: bold; font-size: 18px; color: #424B5D;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">3.6 è·å–æˆ‘ä»¬æ‰€æœ‰çš„æ–‡ä»¶ä¿¡æ¯</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; font-size: 16px; line-height: 26px; word-spacing: 3px; letter-spacing: 1px; color: #424B5D;\">è·å–æˆ‘ä»¬æ‰€æœ‰çš„æ–‡ä»¶</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; margin: 12px auto; border-radius: 5px; box-shadow: 0 1px 2px -2px rgba(0,0,0,.16), 0 3px 6px 0 rgba(0,0,0,.12), 0 5px 12px 4px rgba(0,0,0,.09) !important;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #282c34; border-radius: 5px;\">app.get(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'/files'</span>,&nbsp;(req,&nbsp;res)&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;é€šè¿‡æŸ¥æ‰¾è¿”å›ä¸€ä¸ªæ•°ç»„å¯¹è±¡å›å»<br>&nbsp;&nbsp;&nbsp;&nbsp;gfs.files.find().toArray((err,&nbsp;files)&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">if</span>&nbsp;(!files&nbsp;||&nbsp;files.length&nbsp;===&nbsp;0)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-built_in\" style=\"color: #e6c07b; line-height: 26px;\">return</span>&nbsp;res.status(404).json({<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;err:&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'æ–‡ä»¶ä¸å­˜åœ¨ï¼'</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-built_in\" style=\"color: #e6c07b; line-height: 26px;\">return</span>&nbsp;res.json(files)<br>&nbsp;&nbsp;&nbsp;&nbsp;})<br>})<br></code></pre>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; font-size: 16px; line-height: 26px; word-spacing: 3px; letter-spacing: 1px; color: #424B5D;\">æˆ‘ä»¬å¯ä»¥è¿›è¡Œä¸€äº›ç¾åŒ–æ“ä½œï¼Œæ¯”å¦‚æˆ‘ä»¬å¯ä»¥å°†ä¸Šä¼ æ˜¯å›¾ç‰‡çš„ï¼Œè¿”å›åˆ°ç•Œé¢çš„è¯ä»¥å›¾ç‰‡æ˜¾ç¤ºï¼Œå…¶ä»–åˆ™ä»¥ a æ ‡ç­¾çš„æ ¼å¼æ˜¾ç¤ºï¼ˆå¯ç‚¹å‡»ä¸‹è½½ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°† views/index.ejsçš„ç•Œé¢è¿›è¡Œç¾åŒ–æ”¹é€ ï¼ˆejsè¯­æ³•ç”¨èµ·æ¥ç¡®å®è›®éº»çƒ¦çš„ï¼‰ï¼Œè¿›è¡Œé‡æ–°æ’ç‰ˆä»¥åŠæ·»åŠ åˆ é™¤æŒ‰é’®</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; margin: 12px auto; border-radius: 5px; box-shadow: 0 1px 2px -2px rgba(0,0,0,.16), 0 3px 6px 0 rgba(0,0,0,.12), 0 5px 12px 4px rgba(0,0,0,.09) !important;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #282c34; border-radius: 5px;\">&lt;!DOCTYPE&nbsp;html&gt;<br>&lt;html&nbsp;lang=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"en\"</span>&gt;<br><br>&lt;head&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;charset=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"UTF-8\"</span>&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;name=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"viewport\"</span>&nbsp;content=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"width=device-width,&nbsp;initial-scale=1.0\"</span>&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;title&gt;æ–‡ä»¶ä¸Šä¼ &lt;/title&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;link&nbsp;rel=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"stylesheet\"</span>&nbsp;href=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css\"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;integrity=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk\"</span>&nbsp;crossorigin=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"anonymous\"</span>&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;style&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;img&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;width:&nbsp;100%;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/style&gt;<br>&lt;/head&gt;<br><br>&lt;body&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"container\"</span>&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"row\"</span>&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"col-md-6&nbsp;m-auto\"</span>&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;h2&nbsp;class=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"text-center&nbsp;display-4&nbsp;my-4\"</span>&gt;Mongoæ–‡ä»¶ä¸Šä¼ &lt;/h2&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;form&nbsp;action=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"/upload\"</span>&nbsp;method=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"POST\"</span>&nbsp;enctype=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"multipart/form-data\"</span>&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"custom-file&nbsp;mb-3\"</span>&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;input&nbsp;<span class=\"hljs-built_in\" style=\"color: #e6c07b; line-height: 26px;\">type</span>=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"file\"</span>&nbsp;name=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"file\"</span>&nbsp;id=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"file\"</span>&nbsp;class=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"custom-file-input\"</span>&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;label&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">for</span>=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"file\"</span>&nbsp;class=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"custom-file-label\"</span>&gt;é€‰æ‹©æ–‡ä»¶&lt;/label&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;input&nbsp;class=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"btn&nbsp;btn-primary&nbsp;btn-block\"</span>&nbsp;<span class=\"hljs-built_in\" style=\"color: #e6c07b; line-height: 26px;\">type</span>=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"submit\"</span>&nbsp;value=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"æäº¤\"</span>&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/form&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;hr&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"row\"</span>&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;%&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">if</span>(files){&nbsp;%&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;%&nbsp;files.forEach(<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">function</span>(file){&nbsp;%&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"col-sm&nbsp;card&nbsp;card-body&nbsp;m-3&nbsp;&nbsp;col-md-2\"</span>&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;%&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">if</span>(file.isImage){&nbsp;%&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;img&nbsp;src=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"image/&lt;%=&nbsp;file.filename&nbsp;%&gt;\"</span>&nbsp;/&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;%&nbsp;}&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">else</span>&nbsp;{&nbsp;%&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;a&nbsp;href=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"download/&lt;%=&nbsp;file.filename&nbsp;%&gt;\"</span>&gt;&lt;%=&nbsp;file.filename&nbsp;%&gt;&lt;/a&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;%}%&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;form&nbsp;action=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"/files/&lt;%=&nbsp;file._id%&gt;?_method=DELETE\"</span>&nbsp;method=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"POST\"</span>&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;button&nbsp;class=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"btn&nbsp;btn-danger&nbsp;btn-block&nbsp;mt-4\"</span>&gt;åˆ é™¤&lt;/button&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/form&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;%&nbsp;})&nbsp;%&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;%&nbsp;}<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">else</span>&nbsp;{&nbsp;%&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&nbsp;class=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"card&nbsp;card-body&nbsp;text-center&nbsp;display-4&nbsp;my-4\"</span>&gt;æ–‡ä»¶ä¸å­˜åœ¨&lt;/p&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;%&nbsp;}&nbsp;%&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>&lt;/body&gt;<br>&lt;script&nbsp;src=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js\"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;integrity=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj\"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;crossorigin=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"anonymous\"</span>&gt;&lt;/script&gt;<br>&lt;script&nbsp;src=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js\"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;integrity=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo\"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;crossorigin=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"anonymous\"</span>&gt;&lt;/script&gt;<br>&lt;script&nbsp;src=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.min.js\"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;integrity=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI\"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;crossorigin=<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"anonymous\"</span>&gt;&lt;/script&gt;<br><br>&lt;/html&gt;<br></code></pre>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; font-size: 16px; line-height: 26px; word-spacing: 3px; letter-spacing: 1px; color: #424B5D;\">è¦å°† ejs ä¸­çš„fileså˜é‡è·å–åˆ°æˆ‘ä»¬åº”è¯¥é‡å†™ä¸€ä¸‹ get('/')æ¥å£ï¼Œä½¿å…¶åœ¨è®¿é—®localhost:5000çš„æ—¶å€™å…ˆå»è¯»å–ä¸€ä¸‹æ•°æ®åº“æ–‡ä»¶ä¿¡æ¯å¹¶è¾“å‡ºåˆ°é¡µé¢ä¸­å»</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; margin: 12px auto; border-radius: 5px; box-shadow: 0 1px 2px -2px rgba(0,0,0,.16), 0 3px 6px 0 rgba(0,0,0,.12), 0 5px 12px 4px rgba(0,0,0,.09) !important;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #282c34; border-radius: 5px;\">app.get(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'/'</span>,&nbsp;(req,&nbsp;res)&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;gfs.files.find().toArray((err,&nbsp;files)&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">if</span>&nbsp;(!files&nbsp;||&nbsp;files.length&nbsp;===&nbsp;0)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;res.render(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'index'</span>,&nbsp;{&nbsp;files:&nbsp;<span class=\"hljs-literal\" style=\"color: #56b6c2; line-height: 26px;\">false</span>&nbsp;})<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-built_in\" style=\"color: #e6c07b; line-height: 26px;\">return</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;files.map(file&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;å¦‚æœæ˜¯ä»¥ä¸‹å›¾ç‰‡ç±»å‹æˆ‘ä»¬å°±åœ¨å‰ç«¯å±•ç¤ºå‡ºæ¥ï¼Œå…¶ä½™ä¸€å¾‹æŒ‰é™„ä»¶å¤„ç†ï¼Œé€šè¿‡&nbsp;isImage&nbsp;æ¥åŒºåˆ†å›¾ç‰‡å’Œéå›¾ç‰‡<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;imageType&nbsp;=&nbsp;[<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'image/png'</span>,&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'image/jpg'</span>,&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'image/gif'</span>,&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'image/jpeg'</span>]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">if</span>&nbsp;(imageType.includes(file.contentType))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file.isImage&nbsp;=&nbsp;<span class=\"hljs-literal\" style=\"color: #56b6c2; line-height: 26px;\">true</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">else</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file.isImage&nbsp;=&nbsp;<span class=\"hljs-literal\" style=\"color: #56b6c2; line-height: 26px;\">false</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;res.render(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'index'</span>,&nbsp;{&nbsp;files:&nbsp;files&nbsp;})<br>&nbsp;&nbsp;&nbsp;&nbsp;})<br>})<br><br></code></pre>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; font-size: 16px; line-height: 26px; word-spacing: 3px; letter-spacing: 1px; color: #424B5D;\">å®Œæˆä¸Šè¿°çš„æƒ…å†µæˆ‘ä»¬è®¿é—®é¦–é¡µçš„è¯å°±è¡Œè¯¥æ˜¯å¦‚ä¸‹æƒ…å†µ\n<img src=\"https://timegods.oss-cn-shenzhen.aliyuncs.com/markdown/mg04.png\" alt style=\"display: block; max-width: 100%; border-radius: 5px; margin: 12px auto;\"></p>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding: 0px; margin-top: 24px; margin-bottom: 12px; font-weight: bold; font-size: 18px; color: #424B5D;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">3.7 å•ä¸ªæ–‡ä»¶ä¸‹è½½</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; font-size: 16px; line-height: 26px; word-spacing: 3px; letter-spacing: 1px; color: #424B5D;\">åœ¨è¿™é‡Œæˆ‘ä»¬é€šè¿‡aæ ‡ç­¾è®¿é—® /download/:filename æ¥å£ï¼Œfilenameæ˜¯æ–‡ä»¶åï¼Œå½“ç„¶å¯ä»¥ç”¨å…¶ä»–çš„æ¯”å¦‚_idï¼Œå½“æŸ¥æ‰¾åˆ°æœ‰è¯¥é™„ä»¶çš„æ—¶å€™å°±å°†å®ƒåˆå¹¶æˆå¯è¯»ç•™ï¼Œé€šè¿‡ç®¡é“è¿”å›ï¼Œè¿™æ ·åœ¨å‰ç«¯ç•Œé¢ä¸Šç‚¹å‡»æ–‡ä»¶æ ‡é¢˜å°±å¯ä»¥ç›´æ¥ä¸‹è½½äº†</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; margin: 12px auto; border-radius: 5px; box-shadow: 0 1px 2px -2px rgba(0,0,0,.16), 0 3px 6px 0 rgba(0,0,0,.12), 0 5px 12px 4px rgba(0,0,0,.09) !important;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #282c34; border-radius: 5px;\">app.get(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'/download/:filename'</span>,&nbsp;(req,&nbsp;res)&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;gfs.files.findOne({&nbsp;filename:&nbsp;req.params.filename&nbsp;},&nbsp;(err,&nbsp;file)&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">if</span>&nbsp;(!file)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-built_in\" style=\"color: #e6c07b; line-height: 26px;\">return</span>&nbsp;res.status(404).json({<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;err:&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'æ–‡ä»¶ä¸å­˜åœ¨ï¼'</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;readstream&nbsp;=&nbsp;gfs.createReadStream(file.filename)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;readstream.pipe(res)<br>&nbsp;&nbsp;&nbsp;&nbsp;})<br>})<br></code></pre>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding: 0px; margin-top: 24px; margin-bottom: 12px; font-weight: bold; font-size: 18px; color: #424B5D;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">3.8 å•ä¸ªæ–‡ä»¶åˆ é™¤</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; font-size: 16px; line-height: 26px; word-spacing: 3px; letter-spacing: 1px; color: #424B5D;\">åœ¨è¿™é‡Œæˆ‘ä»¬é€šè¿‡aæ ‡ç­¾è®¿é—® /files/:id æ¥å£ï¼Œidå¯¹åº”ï¼Œç‚¹å‡»åˆ é™¤æŒ‰é’®ï¼Œå°±ç›´æ¥åˆ é™¤äº†ï¼Œå¹¶é‡å®šå‘åˆ°é¦–é¡µ</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; margin: 12px auto; border-radius: 5px; box-shadow: 0 1px 2px -2px rgba(0,0,0,.16), 0 3px 6px 0 rgba(0,0,0,.12), 0 5px 12px 4px rgba(0,0,0,.09) !important;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #282c34; border-radius: 5px;\">app.delete(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'/files/:id'</span>,&nbsp;(req,&nbsp;res)&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;gfs.remove({&nbsp;_id:&nbsp;req.params.id,&nbsp;root:&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'upload'</span>&nbsp;},&nbsp;(err)&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">if</span>&nbsp;(err)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-built_in\" style=\"color: #e6c07b; line-height: 26px;\">return</span>&nbsp;res.status(404).json({<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;err:&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'åˆ é™¤çš„æ–‡ä»¶ä¸å­˜åœ¨ï¼'</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;res.redirect(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'/'</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;})<br>})<br></code></pre>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; font-size: 16px; line-height: 26px; word-spacing: 3px; letter-spacing: 1px; color: #424B5D;\">ç”±äºæˆ‘ä»¬ä¸€ç›´ç”¨formåšè¯·æ±‚ï¼Œä½†æ˜¯formè¡¨å•æ²¡æœ‰deleteè¯·æ±‚æ–¹å¼ï¼Œæ‰€ä»¥æˆ‘ä»¬ç”¨åˆ°äº†<strong style=\"font-weight: bold; color: #424B5D;\">method-override</strong>æ’ä»¶ï¼Œå½“ç„¶è¦æ˜¯ç”¨Ajaxå°±æ²¡å…³ç³»äº†ï¼Œæˆ‘ä»¬é¡¹ç›®æ¯•ç«Ÿé€Ÿæˆå˜›ï¼Œä¸»è¦çœ‹æ•ˆæœå’Œè¿‡ç¨‹</p>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding: 0px; color: black; font-weight: bold; font-size: 20px; margin-top: 24px; margin-bottom: 12px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"color: #e7642b; text-align: center; display: block; background-color: #e7642b; color: white; padding: 3px 11px; border-radius: 1px;\">4 å®Œç»“æ’’èŠ±äº†</span><span class=\"suffix\"></span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; font-size: 16px; line-height: 26px; word-spacing: 3px; letter-spacing: 1px; color: #424B5D;\">ç®€ç®€å•å•çš„å‘Šä¸€æ®µè½äº†ï¼Œå­¦äº†çš„å°ä¼™ä¼´ä»¬å¯ä»¥å°è¯•æ›´åŠ æ·±å…¥çš„æ“ä½œï¼Œæ‰€ä»¥æˆ‘ä»¬å°±å¯ä»¥ç”¨æ­¤é¡¹ç›®æ¥åšä¸€ä¸ªå›¾åºŠæˆ–è€…å°ç½‘ç›˜ç›˜ï¼Œè¿˜æ˜¯ç®€ç®€å•å•æ»´ã€‚å½“ç„¶è¯¥é™„ä»¶ä¸Šä¼ ä¹Ÿæœ‰ä¸€å®šçš„é™åˆ¶é—®é¢˜ï¼Œæ¯”å¦‚å¤§æ–‡ä»¶å¯èƒ½ä¸Šä¼ æ—¶é—´æ›´ä¹…ï¼Œæˆ‘ä»¬å°±éœ€è¦é‡‡ç”¨æ–‡ä»¶åˆ†ç‰‡æ–¹å¼ä¸Šä¼ äº†ï¼Œå¯ä»¥çœ‹æ˜é‡‘çš„<a href=\"https://juejin.im/post/6850037258863673357\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #eb6161; border-bottom: 1px solid #eb6161;\"><span style=\"margin-right: 6px;\">ğŸ‘‰</span>æ–‡ä»¶åˆ†ç‰‡</a>çš„æ¡ˆä¾‹ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; font-size: 16px; line-height: 26px; word-spacing: 3px; letter-spacing: 1px; color: #424B5D;\">æœ€åæ„Ÿè°¢å„ä½å°ä¼™ä¼´çš„å“å°ï¼Œå¦‚æœ‰æ–°çš„å¥½ç©çš„ä¸œè¥¿ï¼Œæˆ‘å†æ¥åˆ†äº«ä¸€ä¸‹</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; list-style-type: disc; font-size: 15px; margin: 0; padding-left: 24px; color: #424B5D;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; text-align: left; font-weight: 500; margin: 4px 0; line-height: 24px; color: #424B5D;\"><a href=\"https://gitee.com/caohuiboss/girdfs_uploads\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #eb6161; border-bottom: 1px solid #eb6161;\"><span style=\"margin-right: 6px;\">ğŸ‘‰</span><strong style=\"font-weight: bold; color: #424B5D;\">é¡¹ç›®åœ°å€</strong></a></section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; text-align: left; font-weight: 500; margin: 4px 0; line-height: 24px; color: #424B5D;\"><a href=\"http://www.chmc.xyz:1314/\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #eb6161; border-bottom: 1px solid #eb6161;\"><span style=\"margin-right: 6px;\">ğŸ‘‰</span><strong style=\"font-weight: bold; color: #424B5D;\">åœ¨çº¿ä½“éªŒåœ°å€</strong></a> æœ¬äººçš„åœŸè±†æœåŠ¡å™¨ï¼Œå„ä½å°ä¼™ä¼´ä¸è¦ä¸‹æ‰‹å¤ªç‹ å“ˆğŸ˜…ï¼Œä½“éªŒä½“éªŒå°±å¥½</section></li></ul>\n<blockquote data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"display: block; font-size: 0.9em; overflow: auto; overflow-scrolling: touch; border-left: 3px solid rgba(0, 0, 0, 0.4); color: #6a737d; padding-top: 10px; padding-bottom: 10px; padding-left: 20px; padding-right: 10px; margin-bottom: 20px; margin-top: 20px; margin: 0 8px; border: none; background: #ffffff; box-shadow: 0 1px 2px -2px rgba(0,0,0,.16), 0 3px 6px 0 rgba(0,0,0,.12), 0 5px 12px 4px rgba(0,0,0,.09);\">\n<p style=\"padding-top: 8px; padding-bottom: 8px; word-spacing: 3px; letter-spacing: 1px; margin: 0px; font-size: 14px; color: #424B5D; line-height: 24px;\">è¯»ä¸€æœ¬å¥½ä¹¦ï¼Œå°±æ˜¯åœ¨å’Œé«˜å°šçš„äººè°ˆè¯ã€‚ â€”â€”æ­Œå¾·ï¼ˆæˆ‘çœŸè¯´è¿‡ï¼‰</p>\n</blockquote>\n</section>", "user_name": "æŸ æª¬ğŸ’«ä¸é…¸", "description": "æœ€å¥½å­¦çš„å‰ç«¯å´½å´½", "got_view_count": 2382, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "Node.js", "concern_user_count": 245462, "user_id": "289926798645575", "title": "2019å¹´çš„6ä¸ªJavaScriptç”¨æˆ·è®¤è¯åº“", "mark_content": "â€œä¸¤å‘¨å†…ç»™æˆ‘å»ºä¸€ä¸ªç”¨æˆ·è®¤è¯ç³»ç»Ÿâ€æ˜¯ç°åœ¨ç ”å‘å›¢é˜Ÿä¸­å¸¸è§çš„ä¸€å¥è¯ã€‚ç”±äºç§ç§åŸå› ï¼Œè¿™ä¸ªä»»åŠ¡ä¸€ç›´æ˜¯ç•™ç»™å›¢é˜Ÿä¸­çš„ä¸€ä¸ªå¼€å‘äººå‘˜å»è§£å†³çš„ã€‚\n\nä¸€æ–¹é¢ï¼Œä½ ç¡®å®ä¸æƒ³æµªè´¹å¾ˆå¤šæ—¶é—´ã€‚å¦ä¸€æ–¹é¢ï¼Œä½ æ‹…å¿ƒè¿™ç§ä¿¡æ¯å¯èƒ½æœ€å¥½ç”±è‡ªå·±å†…éƒ¨ç¼–å†™çš„æœåŠ¡æ¥å¤„ç†ï¼Œä»¥ä¾¿ä»¥åæ›´å¥½çš„æ‰©å±•ã€‚\n\néšç€ç½‘ç»œä¸Šå‡ºç°æ–°çš„æ•™ç¨‹ï¼ˆæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å¼€å§‹ï¼‰ï¼Œè¶Šæ¥è¶Šå¤šçš„å›¢é˜Ÿè¯•å›¾äº†è§£å®ç°è‡ªå·±çš„è§£å†³æ–¹æ¡ˆä¸ä½¿ç”¨åº“æˆ–æœåŠ¡çš„æˆæœ¬æ•ˆç›Šç­‰å¼ï¼Œå¸Œæœ›è¿™å¯ä»¥èŠ‚çœä¸€äº›æ—¶é—´ï¼Œå¹¶åšå‡ºæ›´æ˜æ™ºçš„å†³å®šã€‚\n\n## 1. Passport JS\n\n![https://github.com/jaredhanson/passport](http://weixin-storage.oss-cn-shanghai.aliyuncs.com/202007/authentication-libraries/1.png)\n\nPassportä¸ä»…ä»…æ˜¯ä¸€ä¸ª15kæ˜Ÿç”¨æˆ·èº«ä»½éªŒè¯åº“ï¼Œå®ƒå¯èƒ½æ˜¯JSå¼€å‘äººå‘˜ä½¿ç”¨å¤–éƒ¨åº“è¿›è¡Œç”¨æˆ·è®¤è¯çš„æœ€å¸¸è§æ–¹å¼ã€‚è¯¥åº“åŸºæœ¬ä¸Šä¸ºNode.jsæä¾›äº†ç›¸å¯¹çµæ´»å’Œæ¨¡å—åŒ–çš„ä¸­é—´ä»¶ï¼Œå¯ä»¥å°†å…¶é›†æˆåˆ°ä»»ä½•åŸºäºExpressçš„Webåº”ç”¨ç¨‹åºä¸­ã€‚å®ƒä¹Ÿæ˜¯ä¸€ä¸ªç¤¾åŒºå¹³å°ï¼Œæ”¯æŒå„ç§å¸¸è§çš„èº«ä»½éªŒè¯ï¼Œä¾‹å¦‚ç”¨æˆ·åå’Œå¯†ç ï¼ŒFacebookï¼ŒTwitterç­‰ã€‚å¦‚æœä½ ä¸æƒ³å®æ–½è‡ªå·±çš„è§£å†³æ–¹æ¡ˆï¼Œåˆ™å¯èƒ½æ˜¯ç¬¬ä¸€ä¸ªé€‰æ‹©ã€‚\n\n## 2. Auth0\n\n![https://auth0.com/](http://weixin-storage.oss-cn-shanghai.aliyuncs.com/202007/authentication-libraries/2.png)\n\nè™½ç„¶è¿™ä¸æ˜¯åº“ï¼Œè€Œæ˜¯æœåŠ¡ï¼Œä½†è¿™æ˜¯å®Œæˆå·¥ä½œçš„å¯é è€Œå¿«é€Ÿçš„æ–¹æ³•ã€‚Auth0æ˜¯ä¸€å®¶ï¼ˆé¢‡å…·è§„æ¨¡çš„ï¼‰æ–°å…´å…¬å¸ï¼Œä¸ºWebï¼Œç§»åŠ¨å’Œæ—§ç‰ˆåº”ç”¨ç¨‹åºæä¾›å¹¿æ³›çš„é€šç”¨èº«ä»½éªŒè¯å’Œæˆæƒå¹³å°ã€‚æœ‰äººè¯´è¿™æ˜¯ä¸Plataformatecçš„Ruby on Rails Deviseæœ€æ¥è¿‘çš„è§£å†³æ–¹æ¡ˆï¼Œé™¤äº†ä½ å¯ä»¥ä½¿ç”¨ä»»ä½•è¯­è¨€è¿æ¥ä»»ä½•åº”ç”¨ç¨‹åºæˆ–APIã€‚å·²æœ‰è¶…è¿‡100ä¸ªé¢„å…ˆå»ºç«‹çš„é›†æˆã€‚\n\n## 3. Permit\n\n![https://github.com/ianstormtaylor/permit](http://weixin-storage.oss-cn-shanghai.aliyuncs.com/202007/authentication-libraries/3.png)\n\nPermitæ˜¯ä¸€ä¸ª1åƒé¢—æ˜Ÿçš„é¡¹ç›®ï¼Œæ—¨åœ¨ä¸ºæ„å»ºNode.js APIæä¾›ä¸€ä¸ªâ€œä¸å—é™åˆ¶çš„â€èº«ä»½éªŒè¯åº“ã€‚Permitå…è®¸ä½ å‘ä»»ä½•Node.js APIæ·»åŠ èº«ä»½éªŒè¯å±‚ï¼Œå¹¶ä¸”å¯ä»¥ä¸Expressï¼ŒKoaï¼ŒHapiå’ŒFastifyç­‰æ¡†æ¶ä¸€èµ·ä½¿ç”¨ã€‚å®ƒå¯ä»¥ä¸ä»RESTåˆ°GraphQLçš„å¤šç§ç±»å‹çš„APIä¸€èµ·ä½¿ç”¨ï¼Œå› æ­¤æ˜¯â€œéè§„èŒƒåŒ–â€çš„è®¾è®¡ã€‚Permitæ—¨åœ¨ä¸“æ³¨äºAPIï¼ˆæ— çŠ¶æ€è¯·æ±‚ï¼‰å’ŒExpressä»¥å¤–çš„æ”¯æŒæ¡†æ¶ã€‚å®ƒä¹Ÿåœ¨ç§¯æå¼€å‘ä¸­ï¼Œè¿™ä½¿â€œPermitâ€æˆä¸ºä¸€ä¸ªå€¼å¾—è€ƒè™‘çš„æœ‰è¶£é€‰æ‹©ã€‚\n\n## 4. Grant\n\n![https://github.com/simov/grant](http://weixin-storage.oss-cn-shanghai.aliyuncs.com/202007/authentication-libraries/4.jpeg)\n\nä¸€ä¸ªç›¸å½“æ–°çš„ï¼Œå¾ˆæœ‰å‰é€”çš„åº“ï¼Œä¸ºExpressï¼ŒKoaå’ŒHapiæä¾›OAuthä¸­é—´ä»¶ï¼Œå¹¶æä¾›180å¤šå®¶å—æ”¯æŒçš„æä¾›å•†å’Œä¸€ä¸ªå®æ—¶æ¸¸ä¹åœºã€‚å¦‚æœä½ æƒ³å°†å…¶ä¸è‡ªå·±çš„ç§æœ‰OAuthæä¾›ç¨‹åºä¸€èµ·ä½¿ç”¨ï¼Œåˆ™å¯ä»¥è‡ªå·±æŒ‡å®šæ‰€éœ€çš„å¯†é’¥ã€‚å°½ç®¡è¯¥åº“å·²ç»å¼€å§‹å—åˆ°å…³æ³¨ï¼ˆè¶…è¿‡1Kæ˜Ÿï¼‰ï¼Œä½†æ˜¯èµ„æºç›¸å¯¹ç¨€ç¼ºï¼Œå› æ­¤è¯·è°¨æ…å°è¯•ã€‚\n\n## 5. Feathers è®¤è¯ç®¡ç†\n\n![https://github.com/feathers-plus/feathers-authentication-management](http://weixin-storage.oss-cn-shanghai.aliyuncs.com/202007/authentication-libraries/5.png)\n\nFeathersæ˜¯ä¸€ä¸ªå¼€æºï¼ˆ11Kæ˜Ÿï¼‰çš„NodeJSå®æ—¶å¾®æœåŠ¡Webæ¡†æ¶ï¼Œé€šè¿‡RESTfulèµ„æºã€å¥—æ¥å­—å’Œçµæ´»çš„æ’ä»¶è®©ä½ æ§åˆ¶æ•°æ®ã€‚\n\nFeathersè¿˜æä¾›äº†è®¤è¯å’Œè®¤è¯ç®¡ç†æ¨¡å—ï¼Œè®©ä½ åœ¨æœ¬åœ°Feathersè®¤è¯ä¸­å¢åŠ æ³¨å†ŒéªŒè¯ã€é—å¿˜å¯†ç é‡ç½®ç­‰åŠŸèƒ½ã€‚è¿™ä¸ªæƒ³æ³•æ˜¯åœ¨ä¸€ä¸ªçµæ´»çš„åŸºç¡€è®¾æ–½ä¸­ï¼Œå°†ä¸åŒçš„è®¤è¯æ–¹æ³•ç»“åˆåœ¨ä¸€èµ·ã€‚\n\n## 6. åªéœ€ä½¿ç”¨Firebaseèº«ä»½éªŒè¯ï¼ˆé€‚ç”¨äºå°å‹åº”ç”¨ç¨‹åºï¼‰\n\n![https://blog.bitsrc.io/react-oauth-authentication-with-firebase-dfe0e8c5d0d4](http://weixin-storage.oss-cn-shanghai.aliyuncs.com/202007/authentication-libraries/6.jpeg)\n\nè¿™å¯èƒ½ä¸ä¸€å®šæ˜¯åœ¨ä½ çš„æ‰©å±•å¹³å°ä¸­ç®¡ç†ç”¨æˆ·æˆæƒçš„é•¿æœŸè§£å†³æ–¹æ¡ˆï¼ˆæˆ–è€…æ˜¯å—ï¼Ÿ)ï¼Œä½†æ˜¯ï¼Œå¯¹äºé€šè¿‡Firebaseéƒ¨ç½²çš„åº”ç”¨ç¨‹åºæ¥è¯´ï¼Œè¿™æ˜¯ä¸€ç§éå¸¸æœ‰ç”¨çš„æ–¹æ³•ï¼Œå¯ä»¥å¿«é€Ÿï¼Œè½»æ¾åœ°å®Œæˆå·¥ä½œã€‚\n\nFirebaseèº«ä»½éªŒè¯æä¾›åç«¯æœåŠ¡ï¼Œæ˜“äºä½¿ç”¨çš„SDKå’Œç°æˆçš„UIåº“ï¼Œä»¥å¯¹ä½ çš„åº”ç”¨ç¨‹åºçš„ç”¨æˆ·è¿›è¡Œèº«ä»½éªŒè¯ã€‚å®ƒæ”¯æŒä½¿ç”¨å¯†ç ã€ç”µè¯å·ç ã€æµè¡Œçš„è”é‚¦èº«ä»½æä¾›å•†(å¦‚è°·æ­Œã€Facebookå’ŒTwitter)è¿›è¡Œèº«ä»½éªŒè¯ã€‚\n\n****\n\næ¥æºï¼š[https://blog.bitsrc.io](https://blog.bitsrc.io/6-javascript-user-authentication-libraries-for-2019-6c7c45fbe458)ï¼Œä½œè€…ï¼šJonathan Saringï¼Œç¿»è¯‘ï¼šå…¬ä¼—å·ã€Šå‰ç«¯å…¨æ ˆå¼€å‘è€…ã€‹", "user_name": "æœå°¼åœ", "description": "Webå…¨æ ˆå¼€å‘ã€æŒç»­å­¦ä¹ è€…ï¼Œå…³æ³¨å…¬ä¼—å·ç¬¬ä¸€æ—¶é—´æ¥æ”¶æœ€æ–°æ–‡ç« ", "got_view_count": 281912, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "PHP", "concern_user_count": 86819, "user_id": "1266229795106455", "title": "è®©ä½ æ·±åˆ»äº†è§£yii2çš„ä¹ä¸ªæ¦‚å¿µ", "mark_content": "<div>\n\n> ä¸ laravel ç›¸è¾ƒï¼ŒYii2 å°†é…ç½®ï¼ˆä¾èµ–å…³ç³»å®šä¹‰ï¼‰å¤–åŒ–ï¼Œç”¨è¡Œä¸ºï¼ˆæ›´ç±»ä¼¼äº python ä¸­çš„ç»‡å…¥ï¼‰ç±»ï¼Œå¼¥è¡¥`Trait`çš„ä¸€äº›ä¸è¶³ï¼Œå¥½å¤„æ˜¯å¯ä»¥åŠ¨æ€æ‰©å±•åŠ¨ä½œã€‚è‡³äºäº‹ä»¶å¤„ç†åˆ™å¤§åŒå°å¼‚ï¼Œæœ‰è¶£çš„æ˜¯åœ¨å‘½åä¸Šï¼Œyii2 å€Ÿç”¨äº†`jquery`äº‹ä»¶ç³»ç»Ÿçš„é‚£ä¸€å¥—ï¼Œ`on,off,trigger`ã€‚å½“ç„¶ä¹Ÿç›¸åŒä¹‹å¤„ï¼Œæ¯”å¦‚åº”ç”¨éƒ½æ˜¯å»ºç«‹åœ¨å®¹å™¨ä¹‹ä¸Šã€‚ç›¸æ¯”å…¶å®ƒçš„é¢å‘é¢†åŸŸï¼Œé¢å‘æ¥å£ç¼–ç¨‹ï¼ŒYii2 ä½¿ç”¨æ¨¡å—ï¼Œæ¥åˆ†å±‚ï¼Œåˆ†ä¸­å¿ƒå°åº”ç”¨ï¼Œç»†åŒ–å¤§æ¶æ„ã€‚è€Œ`getter/setter`ï¼ŒåŠè¿‡æ»¤å™¨ï¼Œjava ç—•è¿¹å¤ªæ˜æ˜¾ã€‚\n\n</div>\n\n<div>\n\n## ç»„ä»¶ Component\n\n</div>\n\n<div>\n\n*   Yii åº”ç”¨çš„ä¸»è¦åŸºçŸ³ã€‚æ˜¯`yii\\base\\Component`ç±»æˆ–å…¶å­ç±»çš„å®ä¾‹\n    *   ä¸»è¦ç”± å±æ€§ï¼ˆProperty)ï¼Œäº‹ä»¶ï¼ˆEventï¼‰ï¼Œè¡Œä¸ºï¼ˆBehaviorï¼‰ä¸‰ä¸ªåŠŸèƒ½ç»„æˆ\n    *   æ¯”å¸¸è§„çš„å¯¹è±¡ï¼ˆObjectï¼‰ç¨å¾®é‡é‡çº§ï¼Œè¦ä½¿ç”¨é¢å¤–çš„å†…å­˜å’Œ CPU æ—¶é—´æ¥å¤„ç† äº‹ä»¶ å’Œ è¡Œä¸º\n    *   ä¸éœ€è¦ä½¿ç”¨äº‹ä»¶å’Œè¡Œä¸ºæ—¶ï¼Œç»§æ‰¿`yii\\base\\Object`, æ”¯æŒå±æ€§ï¼ˆPropertyï¼‰åŠŸèƒ½\n*   é‡å†™ Component æˆ– Object\n    *   æ°¸è¿œåœ¨é‡å†™çš„æ„é€ æ–¹æ³•ç»“å°¾å¤„è°ƒç”¨ä¸€ä¸‹çˆ¶ç±»çš„æ„é€ æ–¹æ³•\n    *   ä¼ å…¥ $config ä½œä¸ºæ„é€ å™¨æ–¹æ³•æœ€åä¸€ä¸ªå‚æ•°ï¼Œç”±çˆ¶æ„é€ æ–¹è°ƒç”¨ï¼Œåœ¨åº”ç”¨é…ç½®ä¹‹å‰åˆå§‹åŒ–\n    *   è‹¥é‡å†™äº† BaseObject::init () æ–¹æ³•ï¼Œç¡®ä¿åœ¨ init æ–¹æ³•çš„å¼€å¤´å¤„è°ƒç”¨äº†çˆ¶ç±»çš„ init æ–¹æ³•\n*   ç»„ä»¶å®ä¾‹åŒ– 2 ç§æ–¹å¼\n    *   å®ä¾‹åŒ–ç»„ä»¶ç±»ï¼Œnew ç»„ä»¶ç±»ï¼Œ ç»„ä»¶æ™®é€šå‚æ•° +ã€€ç»„ä»¶é…ç½®å±æ€§å‚æ•°\n    *   é€šè¿‡`\\Yii::createObject`é™æ€æ–¹æ³•ï¼Œåˆ›å»ºç»„ä»¶å®ä¾‹\n        *   ç¬¬ä¸€ä¸ªæ•°ç»„å‚æ•° class å…³è”ç»„ä»¶ç±»åï¼Œåç»­å…³è”å…ƒç´ ä¾æ¬¡ä¸ºç»„ä»¶å®ä¾‹å±æ€§åŠå€¼\n        *   ç¬¬äºŒæ•°ç»„å‚æ•° ç»„ä»¶çš„æ™®é€šå‚æ•°\n\n</div>\n\n<div>\n\n> `Yii::createObject()`åŸºäºä¾èµ–æ³¨å…¥å®¹å™¨å®ç°\n\n</div>\n\n<div>\n\n*   `yii\\base\\BaseObject` ç±»æ‰§è¡Œæ—¶çš„ç”Ÿå‘½å‘¨æœŸ\n    *   æ„é€ æ–¹æ³•å†…çš„é¢„åˆå§‹åŒ–è¿‡ç¨‹\n    *   é€šè¿‡ $config é…ç½®å¯¹è±¡\n    *   åœ¨ init () æ–¹æ³•å†…è¿›è¡Œåˆå§‹åŒ–åçš„æ”¶å°¾å·¥ä½œ\n    *   å¯¹è±¡æ–¹æ³•è°ƒç”¨ï¼Œä¸Šè¿°æ­¥éª¤çš†åœ¨å¯¹è±¡çš„æ„é€ æ–¹æ³•å†…å®Œæˆï¼Œå³è·å¾—å®ä¾‹å°±å·²ç»åˆå§‹åŒ–ï¼Œå¯ä¾›ä½¿ç”¨\n\n</div>\n\n<div>\n\n## å±æ€§ Property\n\n</div>\n\n<div>\n\n*   `Yii`å¼•å…¥`yii\\base\\Object`çš„åŸºç±»ï¼Œ æ”¯æŒåŸºäºç±»å†…çš„`getter`å’Œ `setter`ï¼ˆè¯»å–å™¨å’Œè®¾å®šå™¨ï¼‰æ–¹æ³•æ¥å®šä¹‰å±æ€§\n*   getter å’Œ setter å®šä¹‰å±æ€§è§„åˆ™å’Œé™åˆ¶\n    *   è¿™ç±»å±æ€§çš„åå­—æ˜¯ä¸åŒºåˆ†å¤§å°å†™ï¼Œæºäº PHP æ–¹æ³•åæ˜¯ä¸åŒºåˆ†å¤§å°å†™\n    *   è‹¥æ­¤ç±»å±æ€§åå’Œç±»æˆå‘˜å˜é‡ç›¸åŒï¼Œä»¥åè€…ä¸ºå‡†\n    *   è¯¥ç±»å±æ€§ä¸æ”¯æŒå¯è§æ€§ï¼ˆè®¿é—®é™åˆ¶ï¼‰\n    *   è¿™ç±»å±æ€§çš„ getter å’Œ setter æ–¹æ³•åªèƒ½å®šä¹‰ä¸ºéé™æ€çš„\n    *   å¯¹ä¸ç¡®å®šæœ‰æ— é­”æœ¯æ–¹æ³•`ï¼ˆgetter æˆ– setter` çš„å±æ€§æ­£å¸¸è°ƒç”¨ `property_exists()`å°†ä¸ä¼šç”Ÿæ•ˆ\n        *   è‹¥çœŸæœ‰æ­¤éœ€æ±‚ï¼Œåº”ç”¨`canGetProperty()`æˆ–`canSetProperty()`\n\n</div>\n\n<div>\n\n## äº‹ä»¶ Events\n\n</div>\n\n<div>\n\n*   äº‹ä»¶å¯ä»¥å°†è‡ªå®šä¹‰ä»£ç  â€œæ³¨å…¥â€ åˆ°ç°æœ‰ä»£ç ä¸­çš„ç‰¹å®šæ‰§è¡Œç‚¹\n\n    *   é™„åŠ è‡ªå®šä¹‰ä»£ç åˆ°æŸä¸ªäº‹ä»¶ï¼Œå½“è¿™ä¸ªäº‹ä»¶è¢«è§¦å‘æ—¶ï¼Œè¿™äº›ä»£ç å°±ä¼šè‡ªåŠ¨æ‰§è¡Œ\n*   äº‹ä»¶å¤„ç†å™¨`Event Handlers`\n\n    *   äº‹ä»¶å¤„ç†å™¨æ˜¯ä¸€ä¸ª PHP å›è°ƒå‡½æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡\n    *   å­—ç¬¦ä¸²å½¢å¼æŒ‡å®šçš„ PHP å…¨å±€å‡½æ•° ï¼Œå¦‚`'trim'`\n    *   å¯¹è±¡åå’Œæ–¹æ³•åæ•°ç»„å½¢å¼æŒ‡å®šçš„å¯¹è±¡æ–¹æ³•ï¼Œ`[$object, $method]`\n    *   ç±»åå’Œæ–¹æ³•åæ•°ç»„å½¢å¼æŒ‡å®šçš„é™æ€ç±»æ–¹æ³•ï¼Œå¦‚`[$class, $method]`\n    *   åŒ¿åå‡½æ•°ï¼Œå¦‚`function ($event) { ... }`\n*   äº‹ä»¶å¯¹è±¡ $event\n\n    *   `event name`ï¼šäº‹ä»¶å\n    *   `event sender`ï¼šè°ƒç”¨ trigger () æ–¹æ³•çš„å¯¹è±¡\n    *   `custom data` é™„åŠ äº‹ä»¶å¤„ç†å™¨æ—¶ä¼ å…¥çš„æ•°æ®ï¼Œé»˜è®¤ä¸ºç©º\n*   é™„åŠ äº‹ä»¶å¤„ç†å™¨\n\n    *   è°ƒç”¨ç»„ä»¶ç±»çš„ on æ–¹æ³•ï¼Œè¯¸å¦‚ \\yii\\base\\Component::on ()\n    *   `public void on ( $name, $handler, $data = null, $append = true )`\n*   äº‹ä»¶å¤„ç†å™¨é¡ºåºï¼ˆEvent Handler Orderï¼‰\n\n    *   å½“äº‹ä»¶è¢«è§¦å‘ï¼Œå·²é™„åŠ çš„å¤„ç†å™¨å°†æŒ‰é™„åŠ æ¬¡åºä¾æ¬¡è°ƒç”¨\n    *   è‹¥éœ€è¦åœæ­¢åŒä¸€äº‹ä»¶çš„åç»­å¤„ç†å™¨çš„è°ƒç”¨ï¼Œå¯è®¾ç½® event å‚æ•°çš„`yii\\base\\Event::eventå‚æ•°çš„â€˜yii\\base\\Event::handled`å±æ€§ä¸ºçœŸ\n    *   ç¬¬å››ä¸ªå‚æ•° $append ä¸ºå‡æ—¶ï¼Œå¯åœ¨å¤„ç†å™¨é˜Ÿåˆ—æœ€å‰é¢æ’å…¥æ–°å¤„ç†å™¨\n*   è§¦å‘äº‹ä»¶ï¼ˆTriggering Eventsï¼‰\n\n    *   äº‹ä»¶é€šè¿‡è°ƒç”¨`yii\\base\\Component::trigger()`æ–¹æ³•è§¦å‘\n        *   `public void trigger ( $name, yii\\base\\Event $event = null )`\n    *   æ¨èä½¿ç”¨ç±»å¸¸é‡æ¥è¡¨ç¤ºäº‹ä»¶åï¼Œäº‹ä»¶å¯¹è±¡å¿…é¡»æ˜¯ `yii\\base\\Event`ç±»æˆ–å…¶å­ç±»çš„å®ä¾‹\n*   ç§»é™¤äº‹ä»¶å¤„ç†å™¨ï¼ˆDetaching Event Handlersï¼‰\n\n    *   `public boolean off ( $name, $handler = null )`\n*   ç±»çº§åˆ«çš„äº‹ä»¶å¤„ç†å™¨\n\n    *   åº”ç”¨åœºæ™¯ æƒ³è¦ä¸€ä¸ªç±»çš„æ‰€æœ‰å®ä¾‹éƒ½å“åº”ä¸€ä¸ªè¢«è§¦å‘çš„äº‹ä»¶\n    *   è°ƒç”¨é™æ€æ–¹æ³•`yii\\base\\Event::on()` åœ¨ç±»çº§åˆ«é™„åŠ å¤„ç†å™¨\n        *   åœ¨äº‹ä»¶å¤„ç†å™¨å†…ï¼Œé€šè¿‡ $event->sender è·å–è§¦å‘äº‹ä»¶çš„å¯¹è±¡\n        *   å½“å¯¹è±¡è§¦å‘äº‹ä»¶æ—¶ï¼Œå®ƒé¦–å…ˆè°ƒç”¨å®ä¾‹çº§åˆ«çš„å¤„ç†å™¨ï¼Œç„¶åæ‰ä¼šè°ƒç”¨ç±»çº§åˆ«å¤„ç†å™¨\n    *   é™æ€æ–¹æ³• yii\\base\\Event::trigger () æ¥è§¦å‘ä¸€ä¸ªç±»çº§åˆ«äº‹ä»¶ï¼Œç§»é™¤ç”¨ off\n    *   ç§»é™¤ç­¾å`public static boolean off ( $class, $name, $handler = null )`\n*   æ¥å£äº‹ä»¶\n\n    *   è°ƒç”¨`Event::on()`å¹¶å°†æ¥å£ç±»åä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°\n    *   å¯åœ¨å®ç°æ¥å£äº‹ä»¶ç±»ä¸­è§¦å‘è¿™ä¸ªäº‹ä»¶ï¼Œä½†ä¸èƒ½è®©æ‰€æœ‰å®ç°è¿™ä¸ªæ¥å£çš„ç±»éƒ½è§¦å‘äº‹ä»¶\n*   å…¨å±€äº‹ä»¶\n\n    *   éœ€è¦ä¸€ä¸ªå…¨å±€å¯è®¿é—®çš„å•ä¾‹ï¼Œå¦‚åº”ç”¨å®ä¾‹\n    *   äº‹ä»¶è§¦å‘è€…ä¸è°ƒç”¨å…¶è‡ªèº«çš„ trigger () æ–¹æ³•ï¼Œè€Œæ˜¯è°ƒç”¨å•ä¾‹çš„ trigger () æ–¹æ³•æ¥è§¦å‘å…¨å±€äº‹ä»¶\n    *   ä¼˜ç‚¹ æ˜¯å½“é™„åŠ å¤„ç†å™¨åˆ°ä¸€ä¸ªå¯¹è±¡è¦è§¦å‘çš„äº‹ä»¶æ—¶ï¼Œ ä¸éœ€è¦äº§ç”Ÿè¯¥å¯¹è±¡\n*   é€šé…ç¬¦äº‹ä»¶ Wildcard Events\n\n    *   foo.event.* , é€šé…ç¬¦æ¨¡å¼æ”¯æŒå®ä¾‹ æˆ–ç±»çº§åˆ«çš„äº‹ä»¶\n\n</div>\n\n<div>\n\n## è¡Œä¸º\n\n</div>\n\n<div>\n\n*   è¡Œä¸ºæ˜¯`yii\\base\\Behavior`æˆ–å…¶å­ç±»çš„å®ä¾‹ï¼Œä¹Ÿç§°ä¸º mixins, ç±»ä¼¼äºåŸç”Ÿçš„ Trait\n\n    *   ä½œç”¨ æ— é¡»æ”¹å˜ç±»ç»§æ‰¿å…³ç³»å³å¯å¢å¼ºä¸€ä¸ªå·²æœ‰çš„ ç»„ä»¶ ç±»åŠŸèƒ½\n    *   å½“è¡Œä¸ºé™„åŠ åˆ°ç»„ä»¶åï¼Œå®ƒå°† â€œæ³¨å…¥â€ å®ƒçš„æ–¹æ³•å’Œå±æ€§åˆ°ç»„ä»¶\n    *   è¡Œä¸ºé€šè¿‡ç»„ä»¶èƒ½å“åº”è¢«è§¦å‘çš„äº‹ä»¶ï¼Œä»è€Œè‡ªå®šä¹‰æˆ–è°ƒæ•´ç»„ä»¶æ­£å¸¸æ‰§è¡Œçš„ä»£ç \n*   å¤„ç†äº‹ä»¶\n\n    *   è®©è¡Œä¸ºå“åº”å¯¹åº”ç»„ä»¶çš„äº‹ä»¶è§¦å‘ï¼Œ åº”è¦†å†™ `yii\\base\\Behavior::events()`æ–¹æ³•\n        *   è¡Œä¸ºçš„ events () æ–¹æ³•è¿”å›äº‹ä»¶åˆ—è¡¨å’Œç›¸åº”çš„å¤„ç†å™¨ï¼ŒæŒ‡å®šäº‹ä»¶å¤„ç†å™¨æ ¼å¼å¦‚ä¸‹\n            *   æŒ‡å‘è¡Œä¸ºç±»çš„æ–¹æ³•åçš„å­—ç¬¦ä¸²\n            *   å¯¹è±¡æˆ–ç±»åå’Œæ–¹æ³•åçš„æ•°ç»„ï¼Œå¦‚ [$object, â€˜methodNameâ€™]ï¼›\n            *   åŒ¿åæ–¹æ³•\n*   é™„åŠ è¡Œä¸º\n\n    *   é™æ€é™„åŠ è¡Œä¸º\n        *   è¦†å†™è¡Œä¸ºè¦é™„åŠ çš„ç»„ä»¶ç±»çš„ behaviors () æ–¹æ³•å³å¯\n        *   behaviors () æ–¹æ³•è¿”å›è¡Œä¸ºé…ç½®åˆ—è¡¨ï¼Œæ¯ä¸ªè¡Œä¸ºé…ç½®å¯ä»¥æ˜¯è¡Œä¸ºç±»åä¹Ÿå¯ä»¥æ˜¯é…ç½®æ•°ç»„\n        *   è¿‡æŒ‡å®šè¡Œä¸ºé…ç½®æ•°ç»„ç›¸åº”çš„é”®å¯ä»¥ç»™è¡Œä¸ºå…³è”ä¸€ä¸ªåç§°ï¼Œè¿™ç§è¡Œä¸ºç§°ä¸ºå‘½åè¡Œä¸ºï¼Œåä¹‹åŒ¿åè¡Œä¸ºæˆ–å‘½åè¡Œä¸º\n    *   åŠ¨æ€é™„åŠ è¡Œä¸º\n        *   åœ¨å¯¹åº”ç»„ä»¶é‡Œè°ƒç”¨`yii\\base\\Component::attachBehavior()`æ–¹æ³•\n        *   æˆ–`yii\\base\\Component::attachBehaviors()`æ–¹æ³•ä¸€æ¬¡é™„åŠ å¤šä¸ªè¡Œä¸º\n            *   `public void attachBehaviors (array $behaviors )`\n        *   é€šè¿‡é…ç½®é™„åŠ è¡Œä¸º\n            *   [â€˜as myBehavior2â€™ => MyBehavior::className()]\n*   ä½¿ç”¨è¡Œä¸º\n\n    *   å¿…é¡»å…ˆå°†ä¸ºé™„åŠ åˆ° component ç±»æˆ–å…¶å­ç±»ç»„ä»¶ï¼Œç„¶åå¯é€šè¿‡è®¿é—®ç»„ä»¶è®¿é—®è¡Œä¸ºçš„å…¬å…±æˆå‘˜å˜é‡\n    *   è‹¥ä¸¤ä¸ªè¡Œä¸ºéƒ½å®šä¹‰äº†ä¸€æ ·çš„å±æ€§æˆ–æ–¹æ³•ï¼Œå¹¶ä¸”å®ƒä»¬éƒ½é™„åŠ åˆ°åŒä¸€ä¸ªç»„ä»¶ï¼Œå…ˆé™„åŠ è€…æœ‰ä¼˜å…ˆæƒ\n    *   é™„åŠ è¡Œä¸ºåˆ°ç»„ä»¶æ—¶çš„å‘½åè¡Œä¸ºï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªåç§°æ¥è®¿é—®è¡Œä¸ºå¯¹è±¡ï¼Œ`$component->getBehavior('myBehavior');`\n    *   è·å–é™„åŠ åˆ°è¿™ä¸ªç»„ä»¶çš„æ‰€æœ‰è¡Œä¸º `getBehaviors()`\n*   ç§»é™¤è¡Œä¸º\n\n    *   å¯ä»¥è°ƒç”¨`yii\\base\\Component::detachBehavior()`æ–¹æ³•ç”¨è¡Œä¸ºç›¸å…³è”çš„åå­—å®ç°\n*   Yii2 å†…ç½®è¡Œä¸ºç±»\n\n    *   `yii\\behaviors\\TimestampBehavior`åœ¨ Active Record å­˜å‚¨æ—¶è‡ªåŠ¨æ›´æ–°å®ƒçš„æ—¶é—´æˆ³å±æ€§\n    *   `yii\\behaviors\\BlameableBehavior`ä½¿ç”¨å½“å‰ç”¨æˆ· ID è‡ªåŠ¨å¡«å……æŒ‡å®šçš„å±æ€§\n    *   `yii\\behaviors\\SluggableBehavior`è‡ªåŠ¨å¡«å……æŒ‡å®šçš„å±æ€§ï¼Œå…¶å€¼å¯ä»¥åœ¨ URL ä¸­ç”¨ä½œ slug\n    *   `yii\\behaviors\\AttributeBehavior`åœ¨å‘ç”Ÿç‰¹å®šäº‹ä»¶æ—¶è‡ªåŠ¨ä¸º ActiveRecord å¯¹è±¡çš„ä¸€ä¸ªæˆ–å¤šä¸ªå±æ€§ æŒ‡å®šä¸€ä¸ªæŒ‡å®šçš„å€¼\n    *   `yii2tech\\ar\\softdelete\\SoftDeleteBehavior`æä¾›è½¯åˆ é™¤å’Œè½¯æ¢å¤ ActiveRecord çš„ æ–¹æ³•\n    *   `yii2tech\\ar\\position\\PositionBehavior`å…è®¸é€šè¿‡æä¾›é‡æ–°æ’åºæ–¹æ³•æ¥ ç®¡ç†æ•´æ•°å­—æ®µä¸­çš„è®°å½•é¡ºåº\n*   è¡Œä¸º VS Traits\n\n    *   éƒ½å°†è‡ªå·±çš„å±æ€§å’Œæ–¹æ³• â€œæ³¨å…¥â€ åˆ°ä¸»ç±»ä¸­ï¼ŒäºŒè€…ç±»ä¼¼äº’è¡¥ç±»è€Œéæ›¿ä»£ç±»\n    *   è¡Œä¸ºç±»ä¼˜ç‚¹\n        *   è¡Œä¸ºç±»åƒæ™®é€šç±»æ”¯æŒç»§æ‰¿\n        *   è¡Œä¸ºæ— é¡»ä¿®æ”¹ç»„ä»¶ç±»å°±å¯åŠ¨æ€é™„åŠ åˆ°ç»„ä»¶æˆ–ç§»é™¤\n        *   è¡Œä¸ºæ˜¯å¯é…ç½®çš„ï¼Œè€Œ traits åˆ™ä¸å¯è¡Œ\n        *   è¡Œä¸ºå¯ä»¥é€šè¿‡å“åº”äº‹ä»¶æ¥å®šåˆ¶ç»„ä»¶çš„ä»£ç æ‰§è¡Œ\n    *   traits çš„åŸå› \n        *   Traits æ¯”è¡Œä¸ºæ›´æœ‰æ•ˆï¼Œå› ä¸ºè¡Œä¸ºæ˜¯æ—¢éœ€è¦æ—¶é—´åˆéœ€è¦å†…å­˜çš„å¯¹è±¡\n    *   åç§°å†²çªè§£å†³æ–¹æ¡ˆ\n        *   å½“é™„å±äºåŒä¸€ç»„ä»¶çš„ä¸åŒè¡Œä¸ºä¹‹é—´å¯èƒ½å­˜åœ¨åç§°å†²çªæ—¶ï¼Œ é€šè¿‡ä¼˜å…ˆè€ƒè™‘é™„åŠ åˆ°è¯¥ç»„ä»¶çš„è¡Œä¸º\n        *   ä¸åŒ traits å¼•èµ·çš„åç§°å†²çªéœ€è¦é€šè¿‡ é‡å‘½åå—å½±å“çš„å±æ€§æˆ–æ–¹æ³•è¿›è¡Œæ‰‹åŠ¨è§£å†³\n\n</div>\n\n<div>\n\n## é…ç½® Configurations\n\n</div>\n\n<div>\n\n*   æ¦‚è¿°\n\n    *   åœ¨åˆ›å»ºæ–°å¯¹è±¡å’Œåˆå§‹åŒ–å·²å­˜åœ¨å¯¹è±¡æ—¶ä½¿ç”¨é…ç½®\n    *   é…ç½®é€šå¸¸åŒ…å«è¢«åˆ›å»ºå¯¹è±¡çš„ç±»åå’Œä¸€ç»„å°†è¦èµ‹å€¼ç»™å¯¹è±¡ å±æ€§çš„åˆå§‹å€¼\n    *   äº¦å¯åŒ…å«ä¸€ç»„å°†è¢«é™„åŠ åˆ°å¯¹è±¡äº‹ä»¶ä¸Šçš„å¥æŸ„ï¼Œå’Œä¸€ç»„å°†è¢«é™„åŠ åˆ°å¯¹è±¡ä¸Šçš„è¡Œä¸º\n*   ä½¿ç”¨\n\n    *   Yii::createObject () æ–¹æ³•æ¥å—ä¸€ä¸ªé…ç½®æ•°ç»„å¹¶æ ¹æ®æ•°ç»„ä¸­æŒ‡å®šçš„ç±»ååˆ›å»ºå¯¹è±¡\n    *   å¯¹äºå·²å­˜åœ¨çš„å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨ `Yii::configure()`æ–¹æ³•æ ¹æ®é…ç½®å»åˆå§‹åŒ–å…¶å±æ€§\n        *   `Yii::configure($object, $config)`\n        *   æ³¨è‹¥é…ç½®ä¸€ä¸ªå·²å­˜åœ¨çš„å¯¹è±¡ï¼Œé‚£ä¹ˆé…ç½®æ•°ç»„ä¸­ä¸åº”è¯¥åŒ…å«æŒ‡å®šç±»åçš„ class å…ƒç´ \n*   é…ç½®çš„æ ¼å¼\n\n    *   `class`å…ƒç´ æŒ‡å®šäº†å°†è¦åˆ›å»ºçš„å¯¹è±¡çš„å®Œå…¨é™å®šç±»å\n    *   `propertyName`å…ƒç´ æŒ‡å®šäº†å¯¹è±¡å±æ€§çš„åˆå§‹å€¼ï¼Œé”®åæ˜¯å±æ€§åï¼Œå€¼æ˜¯è¯¥å±æ€§å¯¹åº”çš„åˆå§‹å€¼\n        *   åªæœ‰å…¬å…±æˆå‘˜å˜é‡ä»¥åŠé€šè¿‡ getter/setter å®šä¹‰çš„ å±æ€§å¯ä»¥è¢«é…ç½®\n    *   `on eventName`å…ƒç´ æŒ‡å®šäº†é™„åŠ åˆ°å¯¹è±¡äº‹ä»¶ä¸Šçš„å¥æŸ„ï¼Œæ•°ç»„çš„é”®åç”± on å‰ç¼€åŠ äº‹ä»¶åç»„æˆ\n    *   `as behaviorName` å…ƒç´ æŒ‡å®šäº†é™„åŠ åˆ°å¯¹è±¡çš„è¡Œä¸ºï¼Œå€¼è¡¨ç¤ºåˆ›å»ºè¡Œä¸ºçš„é…ç½®ä¿¡æ¯\n*   åº”ç”¨çš„é…ç½®\n\n    *   application ç±»æ‹¥æœ‰å¾ˆå¤šå¯é…ç½®çš„å±æ€§å’Œäº‹ä»¶\n    *   components å±æ€§å¯ä»¥æ¥æ”¶é…ç½®æ•°ç»„å¹¶é€šè¿‡åº”ç”¨æ³¨å†Œä¸ºç»„ä»¶\n    *   yii2.0.11+ ç³»ç»Ÿé…ç½®æ”¯æŒä½¿ç”¨ container å±æ€§æ¥é…ç½®ä¾èµ–æ³¨å…¥å®¹å™¨\n*   å°éƒ¨ä»¶çš„é…ç½®\n\n    *   `yii\\base\\Widget::widget()` å’Œ`yii\\base\\Widget::begin()`æ–¹æ³•éƒ½å¯ä»¥ç”¨æ¥åˆ›å»ºå°éƒ¨ä»¶\n    *   é€šè¿‡ç”¨é…ç½®æ¥è‡ªå®šä¹‰å…¶å±æ€§ï¼Œæ³¨æ„ ç»™å‡ºç±»åçš„æƒ…å†µä¸‹ï¼Œé…ç½®æ•°ç»„ä¸éœ€è¦å†åŒ…å« class é”®\n*   é»˜è®¤é…ç½®\n\n    *   `Yii::createObject()`æ–¹æ³•åŸºäºä¾èµ–æ³¨å…¥å®¹å™¨å®ç°\n    *   ä½¿ç”¨`Yii::creatObject()`åˆ›å»ºå¯¹è±¡æ—¶ï¼Œå¯ä»¥é™„åŠ ä¸€ç³»åˆ—é»˜è®¤é…ç½®åˆ°æŒ‡å®šç±»çš„ä»»ä½•å®ä¾‹\n    *   é»˜è®¤é…ç½®å¯ä»¥åœ¨å…¥å£è„šæœ¬ ä¸­è°ƒç”¨`Yii::$container->set()`æ¥å®šä¹‰\n\n</div>\n\n<div>\n\n## åˆ«å\n\n</div>\n\n<div>\n\n*   è®¾ç½®ä¸è§£æ\n    *   ä½¿ç”¨`Yii::setAlias()`æ¥ç»™æ–‡ä»¶è·¯å¾„æˆ– URL å®šä¹‰åˆ«å\n    *   è°ƒç”¨`Yii::getAlias()`å‘½ä»¤æ¥è§£ææ ¹åˆ«ååˆ°å¯¹åº”çš„æ–‡ä»¶è·¯å¾„æˆ– URL\n*   åº”ç”¨æä¾›äº†ä¸€ä¸ªåä¸º aliases çš„å¯å†™å±æ€§ï¼Œ å¯åœ¨åº”ç”¨é…ç½®ä¸­è®¾ç½®å®ƒ\n*   ä½¿ç”¨åˆ«å Yii å†…è·¯å¾„å±æ€§æ¥å—åˆ«å\n*   Yii2 é¢„å®šä¹‰åˆ«å\n*   æ‰©å±•çš„åˆ«å\n    *   ä¸€ä¸ªé€šè¿‡ Composer å®‰è£…çš„ æ‰©å±• éƒ½è‡ªåŠ¨æ·»åŠ äº†ä¸€ä¸ªåˆ«åï¼Œå®šä¹‰äºå¼•å¯¼å¯åŠ¨é˜¶æ®µ\n\n</div>\n\n<div>\n\n## ç±»çš„è‡ªåŠ¨åŠ è½½\n\n</div>\n\n<div>\n\n*   Yii è‡ªåŠ¨åŠ è½½å™¨\n    *   æ¯ä¸ªç±»éƒ½å¿…é¡»ç½®äºå‘½åç©ºé—´ä¹‹ä¸‹\n    *   æ¯ä¸ªç±»éƒ½å¿…é¡»ä¿å­˜ä¸ºå•ç‹¬æ–‡ä»¶\n    *   è¦å°†è‡ªå®šä¹‰å‘½åç©ºé—´æ·»åŠ åˆ°è‡ªåŠ¨åŠ è½½å™¨ï¼Œéœ€è¦ä½¿ç”¨ Yii::setAlias () ä¸ºå‘½åç©ºé—´çš„æ ¹ç›®å½•å®šä¹‰åˆ«å\n*   ç±»æ˜ å°„è¡¨\n    *   ç±»æ˜ å°„è¡¨åŠŸèƒ½ï¼Œå»ºç«‹ä¸€ä¸ªä»ç±»çš„åå­—åˆ°ç±»æ–‡ä»¶è·¯å¾„çš„æ˜ å°„\n    *   å½“è‡ªåŠ¨åŠ è½½å™¨åŠ è½½ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œä»–é¦–å…ˆæ£€æŸ¥æ˜ å°„è¡¨é‡Œæœ‰æ²¡æœ‰è¯¥ç±»\n    *   å¯ä»¥ç”¨`Yii::$classMap`æ–¹æ³•å‘æ˜ å°„è¡¨ä¸­æ·»åŠ ç±»\n*   å…¶ä»–è‡ªåŠ¨åŠ è½½å™¨\n    *   åœ¨å…¶ä»–è‡ªåŠ¨åŠ è½½å™¨å®‰è£…æˆåŠŸä¹‹åï¼Œ å†åŒ…å« Yii.php (yii çš„è‡ªåŠ¨åŠ è½½å™¨)\n    *   ç›®çš„ä½¿ Yii æˆä¸ºç¬¬ä¸€ä¸ªå“åº”ä»»ä½•ç±»è‡ªåŠ¨åŠ è½½è¯·æ±‚çš„è‡ªåŠ¨åŠ è½½å™¨\n*   Yii è‡ªåŠ¨åŠ è½½å™¨æ”¯æŒè‡ªåŠ¨åŠ è½½æ‰©å±•çš„ç±»ï¼Œéœ€è¦åœ¨ composer.json æ–‡ä»¶é‡Œæ­£ç¡®åœ°å®šä¹‰ autoload éƒ¨åˆ†\n\n</div>\n\n<div>\n\n## æœåŠ¡å®šä½å™¨ï¼ˆService Locatorï¼‰\n\n</div>\n\n<div>\n\n*   å®šä¹‰\n    *   æä¾›å„ç§åº”ç”¨æ‰€éœ€çš„æœåŠ¡ï¼ˆæˆ–ç»„ä»¶ï¼‰çš„å¯¹è±¡\n    *   åœ¨æœåŠ¡å®šä½å™¨ä¸­ï¼Œ æ¯ä¸ªç»„ä»¶éƒ½åªæœ‰ä¸€ä¸ªå•ç‹¬çš„å®ä¾‹ï¼Œå¹¶é€šè¿‡ ID å”¯ä¸€åœ°æ ‡è¯†\n    *   åœ¨ Yii ä¸­ï¼ŒæœåŠ¡å®šä½å™¨æ˜¯`yii\\di\\ServiceLocator`æˆ–å…¶å­ç±»çš„ä¸€ä¸ªå®ä¾‹\n*   åº”ç”¨åœºæ™¯\n    *   æœ€å¸¸ç”¨çš„æœåŠ¡å®šä½å™¨æ˜¯ applicationï¼ˆåº”ç”¨ï¼‰å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡ \\Yii::$app è®¿é—®\n    *   æ¯ä¸ªæ¨¡å—å¯¹è±¡æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªæœåŠ¡å®šä½å™¨ï¼Œæ¨¡æ¿å¯è§†ä¸ºä¸€ä¸ªå­åº”ç”¨\n*   ä½¿ç”¨æœåŠ¡å®šä½å™¨\n    *   æ³¨å†Œç›¸å…³ç»„ä»¶\n        *   é€šè¿‡`yii\\di\\ServiceLocator::set()`æ–¹æ³•è¿›è¡Œç›¸å…³ç»„ä»¶æ³¨å†Œã€‚\n        *   `public void set ( $id, $definition )`\n        *   `$definition`å¯ä»¥æ˜¯ç±»åï¼Œé…ç½®æ•°ç»„ï¼Œphp å¯è°ƒç”¨å¯¹è±¡ï¼Œæˆ–è€…æœ¬èº«å°±æ˜¯ä¸€ä¸ªå¯¹è±¡å®ä¾‹\n    *   å…è®¸é€šè¿‡ç»„ä»¶ ID åƒè®¿é—®ä¸€ä¸ªå±æ€§å€¼é‚£æ ·è®¿é—®ä¸€ä¸ªç»„ä»¶\n        *   æœåŠ¡å®šä½å™¨ä¼šè¿”å›åŒä¸€ä¸ªç»„ä»¶çš„å•ä¾‹\n        *   `yii\\di\\ServiceLocator::has()`æ£€æŸ¥æŸç»„ä»¶ ID æ˜¯å¦è¢«æ³¨å†Œ\n        *   `yii\\di\\ServiceLocator::get()`\n*   éå†æ ‘ï¼ˆTree traversalï¼‰\n    *   æ¨¡å—å…è®¸ä»»æ„åµŒå¥—ï¼›Yii åº”ç”¨ç¨‹åºæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ¨¡å—æ ‘\n*   æ¨¡å—ä¸­ç»„ä»¶çš„é…ç½®å†³ä¸ä¼šä¸æ¥è‡ªçˆ¶æ¨¡å—ä¸­ç»„ä»¶çš„é…ç½®åˆå¹¶\n\n</div>\n\n<div>\n\n## ä¾èµ–æ³¨å…¥å®¹å™¨\n\n</div>\n\n<div>\n\n*   ä¾èµ–æ³¨å…¥å®¹å™¨æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒçŸ¥é“æ€æ ·åˆå§‹åŒ–å¹¶é…ç½®å¯¹è±¡åŠå…¶ä¾èµ–çš„æ‰€æœ‰å¯¹è±¡\n*   `Yii é€šè¿‡ yii\\di\\Container`ç±»æä¾› DI å®¹å™¨ç‰¹æ€§\n    *   æ„é€ æ–¹æ³•æ³¨å…¥\n        *   å®¹å™¨ä¼šå°è¯•è·å–å®ƒæ‰€ä¾èµ–çš„ç±»æˆ–æ¥å£çš„å®ä¾‹ï¼Œç„¶åé€šè¿‡æ„é€ å™¨å°†å…¶æ³¨å…¥æ–°çš„å¯¹è±¡\n    *   æ–¹æ³•æ³¨å…¥\n        *   å¯ä»¥æä¾›ä»…ç”±ç±»çš„å•ä¸ªæ–¹æ³•éœ€è¦çš„ä¾èµ–å…³ç³»\n    *   Setter å’Œå±æ€§æ³¨å…¥\n        *   Setter å’Œå±æ€§æ³¨å…¥æ˜¯é€šè¿‡é…ç½®æä¾›ï¼Œè¯¥é…ç½®ä¼šæä¾›ç»™å®¹å™¨ç”¨äºé€šè¿‡ç›¸åº”çš„ Setter æˆ–å±æ€§æ³¨å…¥ä¾èµ–\n    *   PHP å›è°ƒæ³¨å…¥ (PHP Callable Injection)\n        *   å®¹å™¨å°†ä½¿ç”¨å·²æ³¨å†Œçš„ PHP å›è°ƒæ¥æ„å»ºç±»çš„æ–°å®ä¾‹\n\n</div>\n\n<div>\n\n> `yii\\di\\Container::get()`æ–¹æ³•å°†å…¶ç¬¬ä¸‰ä¸ªå‚æ•°ä½œä¸ºé…ç½®æ•°ç»„åº”ç”¨äºæ­£åœ¨åˆ›å»ºçš„å¯¹è±¡ å¦‚æœè¯¥ç±»å®ç°`yii\\base\\Configurable`æ¥å£ï¼ˆä¾‹å¦‚ yii\\base\\BaseObjectï¼‰ï¼Œåˆ™é…ç½®æ•°ç»„å°†ä½œä¸ºæœ€åä¸€ä¸ªå‚æ•°ä¼ é€’ç»™ç±»æ„é€ å‡½æ•°\n\n</div>\n\n<div>\n\n*   æ³¨å†Œä¾èµ–å…³ç³»\n    *   ç”¨`yii\\di\\Container::set()`æ³¨å†Œä¾èµ–å…³ç³»\n    *   æ³¨å†Œä¼šç”¨åˆ°ä¸€ä¸ªä¾èµ–å…³ç³»åç§°å’Œä¸€ä¸ªä¾èµ–å…³ç³»çš„å®šä¹‰ï¼Œ é”®å€¼å¯¹å¯é€’å½’ï¼Œæ–¹ä¾¿å®¹å™¨ç®¡ç†å®ä¾‹ï¼Œç±»ä¼¼ laravel çš„åˆ«åç³»ç»Ÿ\n    *   ä¾èµ–å…³ç³»åç§°å¯ä¸ºç±»åï¼Œæ¥å£åæˆ–ä¸€ä¸ªåˆ«åï¼Œä¾èµ–å…³ç³»çš„å®šä¹‰å¯ä»¥æ˜¯ç±»åï¼Œé…ç½®æ•°ç»„ï¼Œä¸€ä¸ª PHP å›è°ƒ\n    *   é€šè¿‡`set()`æ³¨å†Œçš„ä¾èµ–å…³ç³»ï¼Œåœ¨æ¯æ¬¡ä½¿ç”¨æ—¶éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°å®ä¾‹\n    *   ä½¿ç”¨`yii\\di\\Container::setSingleton()`æ³¨å†Œä¸€ä¸ªå•ä¾‹çš„ä¾èµ–å…³ç³»\n*   è§£æä¾èµ–å…³ç³»\n    *   ä¾èµ–å…³ç³»è§£ææ˜¯é€’å½’å¼è¿›è¡Œ\n    *   æ³¨å†Œä¾èµ–å…³ç³»åï¼Œå®¹å™¨ä¼šè‡ªåŠ¨è§£æä¾èµ–å…³ç³»ï¼Œ å°†ä¾èµ–å®ä¾‹åŒ–å¹¶æ³¨å…¥æ–°åˆ›å»ºçš„å¯¹è±¡\n    *   ä¾èµ–å…³ç³»åï¼Œå¯ä»¥æ˜¯é€šè¿‡`set()`æˆ– `setSingleton()`æ³¨å†Œçš„ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªç±»æ„é€ å™¨å‚æ•°åˆ—è¡¨å’Œä¸€ä¸ª`configuration`ç”¨äºé…ç½®æ–°åˆ›å»ºçš„å¯¹è±¡\n*   ä½¿ç”¨ä¾èµ–æ³¨å…¥\n    *   åœ¨åº”ç”¨ç¨‹åºçš„å…¥å£è„šæœ¬ä¸­å¼•å…¥`Yii.php`æ–‡ä»¶æ—¶ï¼Œ`Yii`å°±åˆ›å»ºäº†ä¸€ä¸ª DI å®¹å™¨\n    *   è¯¥ DI å®¹å™¨å¯ä»¥é€šè¿‡`Yii::$container`è®¿é—®\n    *   å½“è°ƒç”¨`Yii::createObject()` æ—¶ï¼Œæ­¤æ–¹æ³•å®é™…ä¸Šä¼šè°ƒç”¨è¿™ä¸ªå®¹å™¨çš„ get () æ–¹æ³•åˆ›å»ºæ–°å¯¹è±¡\n    *   åœ¨éƒ¨ä»¶è°ƒç”¨ä¸­ç»™å‡ºçš„å±æ€§å°†å§‹ç»ˆè¦†ç›– DI å®¹å™¨ä¸­çš„å®šä¹‰ï¼Œè‹¥æŠ¥é”™æ— æ³•è¢«å®ä¾‹åŒ–ï¼Œéœ€è¦å‘ŠçŸ¥å®¹å™¨å¦‚ä½•å¤„ç†ä¾èµ–å…³ç³»\n*   é«˜çº§å®ç”¨æ€§\n    *   å¯ä¸€æ¬¡é…ç½®å¤šä¸ªå®šä¹‰ , å°†é…ç½®æ•°ç»„ä¼ é€’ç»™`setDefinitions()`æˆ– `setSingletons()`æ–¹æ³•\n    *   é…ç½®æ•°ç»„æ ¼å¼\n        *   `key`ï¼šç±»åç§°ï¼Œæ¥å£åç§°æˆ–åˆ«å\n        *   `value`ï¼šä¸ class å…³è”çš„å®šä¹‰ï¼Œ`classå…³è”çš„å®šä¹‰ï¼Œâ€˜identifies`å‚æ•°å€¼å°†ä¼ é€’ç»™ set () æ–¹æ³•\n        *   å¯ä»¥é€‰æ‹©å°†ä¾èµ–é¡¹çš„æ„é€ å‡½æ•°å‚æ•°ä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°\n        *   `Instance::of('tempFileStorage')`ç¬¦å·ï¼Œ`Container` å°†éšå«åœ°æä¾›ä¸€ä¸ªç”¨`tempFileStorage`åç§°æ³¨å†Œçš„ä¾èµ–é¡¹\n            *   åº”ç”¨åœºæ™¯ å†…éƒ¨é…ç½®ä¾èµ–é¡¹\n    *   é€šè¿‡ set () æ³¨å†Œçš„ä¾èµ–é¡¹å°†åœ¨æ¯æ¬¡éœ€è¦æ—¶å®ä¾‹åŒ–\n*   ä¾èµ–å…³ç³»æ³¨å†Œä½¿ç”¨\n    *   åº”ç”¨å¼€å‘åœ¨å…¥å£æ³¨å†Œä¾èµ–å…³ç³»\n    *   æ‰©å±•å¼€å‘ï¼Œåˆ™åœ¨æ‰©å±•å¼•å¯¼ç±»ä¸­æ³¨å†Œä¾èµ–å…³ç³»\n*   å°ç»“\n    *   Yii åœ¨ä¾èµ–ä½å…¥ï¼ˆDIï¼‰å®¹å™¨ä¹‹ä¸Šå®ç°äº†å®ƒçš„æœåŠ¡å®šä½å™¨\n    *   å½“ä¸€ä¸ªæœåŠ¡å®šä½å™¨å°è¯•åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡å®ä¾‹æ—¶ï¼Œå®ƒä¼šæŠŠè°ƒç”¨è½¬å‘åˆ° DI å®¹å™¨\n\n</div>\n\næ›´å¤šå­¦ä¹ å†…å®¹å¯ä»¥è®¿é—®[ã€å¯¹æ ‡å¤§å‚ã€‘ç²¾å“PHPæ¶æ„å¸ˆæ•™ç¨‹ç›®å½•å¤§å…¨ï¼Œåªè¦ä½ èƒ½çœ‹å®Œä¿è¯è–ªèµ„ä¸Šå‡ä¸€ä¸ªå°é˜¶ï¼ˆæŒç»­æ›´æ–°ï¼‰](https://zhuanlan.zhihu.com/p/165932664)\n\n**ä»¥ä¸Šå†…å®¹å¸Œæœ›å¸®åŠ©åˆ°å¤§å®¶**ï¼Œå¾ˆå¤šPHPeråœ¨è¿›é˜¶çš„æ—¶å€™æ€»ä¼šé‡åˆ°ä¸€äº›é—®é¢˜å’Œç“¶é¢ˆï¼Œä¸šåŠ¡ä»£ç å†™å¤šäº†æ²¡æœ‰æ–¹å‘æ„Ÿï¼Œä¸çŸ¥é“è¯¥ä»é‚£é‡Œå…¥æ‰‹å»æå‡ï¼Œå¯¹æ­¤æˆ‘æ•´ç†äº†ä¸€äº›èµ„æ–™ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š**åˆ†å¸ƒå¼æ¶æ„ã€é«˜å¯æ‰©å±•ã€é«˜æ€§èƒ½ã€é«˜å¹¶å‘ã€æœåŠ¡å™¨æ€§èƒ½è°ƒä¼˜ã€TP6ï¼Œlaravelï¼ŒYII2ï¼ŒRedisï¼ŒSwooleã€Swoftã€Kafkaã€Mysqlä¼˜åŒ–ã€shellè„šæœ¬ã€Dockerã€å¾®æœåŠ¡ã€Nginx**ç­‰å¤šä¸ªçŸ¥è¯†ç‚¹é«˜çº§è¿›é˜¶å¹²è´§éœ€è¦çš„å¯ä»¥å…è´¹åˆ†äº«ç»™å¤§å®¶ï¼Œéœ€è¦çš„å¯ä»¥åŠ å…¥æˆ‘çš„PHPæŠ€æœ¯äº¤æµç¾¤[953224940](https://jq.qq.com/?_wv=1027&k=VlP8r6aS)\n\n[è¿›é˜¶PHPæœˆè–ª30k>>>æ¶æ„å¸ˆæˆé•¿è·¯çº¿ã€è§†é¢‘ã€é¢è¯•æ–‡æ¡£å…è´¹è·å–ã€‘](https://shimo.im/docs/Jky8td8RTvHTG6k9)\n\n![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/307b8bb481ef43ca97f8212845db2626~tplv-k3u1fbpfcp-zoom-1.image)", "user_name": "é˜¿å¸ƒé˜¿å¸ƒ", "description": "", "got_view_count": 652, "category_name": "é˜…è¯»", "ctime": 1457483895}
{"tag_name": "Java", "concern_user_count": 252044, "user_id": "325111173878983", "title": "åˆšä½“éªŒå®ŒRabbitMQï¼Ÿä¸€æ–‡å¸¦ä½ SpringBoot+RabbitMQæ–¹å¼æ”¶å‘æ¶ˆæ¯", "mark_content": ">äººç”Ÿç»ˆå°†æ˜¯åœºå•äººæ—…é€”ï¼Œå­¤ç‹¬ä¹‹å‰æ˜¯è¿·èŒ«ï¼Œå­¤ç‹¬è¿‡åæ˜¯æˆé•¿ã€‚\n\n## æ¥”å­\n \næœ¬ç¯‡æ˜¯æ¶ˆæ¯é˜Ÿåˆ—RabbitMQçš„ç¬¬äºŒå¼¹ã€‚\n\n[ä¸Šä¸€ç¯‡](https://juejin.im/post/6856571028496351239)çš„ç»“å°¾æˆ‘ä¹Ÿé¢„å‘Šäº†æœ¬ç¯‡çš„å†…å®¹ï¼šåˆ©ç”¨RabbitTemplateå’Œæ³¨è§£è¿›è¡Œæ”¶å‘æ¶ˆæ¯ï¼Œè¿˜æœ‰ä¸€ä¸ªæˆ‘ä¸´æ—¶åŠ ä¸Šçš„å†…å®¹ï¼šæ¶ˆæ¯çš„åºåˆ—åŒ–è½¬æ¢ã€‚\n\næœ¬ç¯‡ä¼šå’ŒSpringBootåšæ•´åˆï¼Œé‡‡ç”¨è‡ªåŠ¨é…ç½®çš„æ–¹å¼è¿›è¡Œå¼€å‘ï¼Œæˆ‘ä»¬åªéœ€è¦å£°æ˜RabbitMQåœ°å€å°±å¯ä»¥äº†ï¼Œå…³äºå„ç§åˆ›å»ºè¿æ¥å…³é—­è¿æ¥çš„äº‹éƒ½ç”±Springå¸®æˆ‘ä»¬äº†~\n\näº¤ç»™Springå¸®æˆ‘ä»¬ç®¡ç†è¿æ¥å¯ä»¥è®©æˆ‘ä»¬ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘ï¼Œå°±åƒå£°æ˜å¼äº‹åŠ¡ä¸€æ ·æ˜“ç”¨ï¼Œæ–¹ä¾¿åˆé«˜æ•ˆã€‚\n\n---\n\n[ç¥æœ‰å¥½æ”¶è·ï¼Œå…ˆèµåçœ‹ï¼Œå¿«ä¹æ— é™ã€‚](https://juejin.im/user/5cc53c8251882524f72ccef6/posts)\n\n**æœ¬æ–‡ä»£ç ï¼š** [ç äº‘åœ°å€](https://gitee.com/he-erduo/spring-boot-learning-demo)&emsp;[GitHubåœ°å€](https://github.com/he-erduo/spring-boot-learning-demo)\n\n**Tip**ï¼šä¸Šä¸€ç¯‡çš„ä»£ç éƒ½æ”¾åœ¨`prototype`åŒ…ä¸‹ï¼Œæœ¬ç¯‡çš„ä»£ç éƒ½æ”¾åœ¨`auto`åŒ…ä¸‹é¢ã€‚\n\n## 1. ğŸ”ç¯å¢ƒé…ç½®\n\nç¬¬ä¸€èŠ‚æˆ‘ä»¬å…ˆæ¥æä¸€ä¸‹ç¯å¢ƒçš„é…ç½®ï¼Œä¸Šä¸€ç¯‡ä¸­æˆ‘ä»¬å·²ç»å¼•å…¥äº†è‡ªåŠ¨é…ç½®çš„åŒ…ï¼Œæˆ‘ä»¬æ—¢ç„¶ä½¿ç”¨äº†è‡ªåŠ¨é…ç½®çš„æ–¹å¼ï¼Œé‚£`RabbitMQ`çš„è¿æ¥ä¿¡æ¯æˆ‘ä»¬ç›´æ¥æ”¾åœ¨é…ç½®æ–‡ä»¶ä¸­å°±è¡Œäº†ï¼Œå°±åƒæˆ‘ä»¬éœ€è¦ç”¨åˆ°JDBCè¿æ¥çš„æ—¶å€™å»é…ç½®ä¸€ä¸‹`DataSource`ä¸€æ ·ã€‚\n\n![rabbitmq-ymlé…ç½®](https://gitee.com/he-erduo/Home/raw/master/picture/rabbitmq/rabbitmq%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6.png)\n\nå¦‚å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬åªéœ€è¦æŒ‡æ˜ä¸€ä¸‹è¿æ¥çš„IP+ç«¯å£å·å’Œç”¨æˆ·åå¯†ç å°±è¡Œäº†ï¼Œè¿™é‡Œæˆ‘ç”¨çš„æ˜¯é»˜è®¤çš„ç”¨æˆ·åä¸å¯†ç ï¼Œä¸å†™çš„è¯é»˜è®¤ä¹Ÿéƒ½æ˜¯guestï¼Œç«¯å£å·ä¹Ÿæ˜¯é»˜è®¤5672ã€‚\n\nä¸»è¦æˆ‘ä»¬éœ€è¦çœ‹ä¸€ä¸‹æ‰‹åŠ¨ç¡®è®¤æ¶ˆæ¯çš„é…ç½®ï¼Œéœ€è¦é…ç½®æˆ`manual`æ‰æ˜¯æ‰‹åŠ¨ç¡®è®¤ï¼Œæ—¥åè¿˜ä¼šæœ‰å…¶ä»–çš„é…ç½®é¡¹ï¼Œçœ¼ä¸‹æˆ‘ä»¬é…ç½®è¿™ä¸€ä¸ªå°±å¯ä»¥äº†ã€‚\n\n---\n\næ¥ä¸‹æ¥æˆ‘ä»¬è¦é…ç½®ä¸€ä¸ª`Queue`ï¼Œä¸Šä¸€ç¯‡ä¸­æˆ‘ä»¬å¾€ä¸€ä¸ªåå«`erduo`çš„é˜Ÿåˆ—ä¸­å‘é€æ¶ˆæ¯ï¼Œå½“æ—¶æ˜¯æˆ‘ä»¬æ‰‹åŠ¨å®šä¹‰çš„æ­¤é˜Ÿåˆ—ï¼Œè¿™é‡Œæˆ‘ä»¬ä¹Ÿéœ€è¦æ‰‹åŠ¨é…ç½®ï¼Œå£°æ˜ä¸€ä¸ª`Bean`å°±å¯ä»¥äº†ã€‚\n\n```java\n@Configuration\npublic class RabbitmqConfig {\n    @Bean\n    public Queue erduo() {\n        // å…¶ä¸‰ä¸ªå‚æ•°ï¼šdurable exclusive autoDelete\n        // ä¸€èˆ¬åªè®¾ç½®ä¸€ä¸‹æŒä¹…åŒ–å³å¯\n        return new Queue(\"erduo\",true);\n    }\n\n}\n```\n\nå°±è¿™ä¹ˆç®€å•å£°æ˜ä¸€ä¸‹å°±å¯ä»¥äº†ï¼Œå½“ç„¶äº†`RabbitMQ`æ¯•ç«Ÿæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç»„ä»¶ï¼Œå¦‚æœä½ åœ¨`RabbitMQ`ä¸­é€šè¿‡å…¶ä»–æ–¹å¼å·²ç»åˆ›å»ºè¿‡ä¸€ä¸ªåå«`erduo`çš„é˜Ÿåˆ—äº†ï¼Œä½ è¿™é‡Œä¹Ÿå¯ä»¥ä¸å£°æ˜ï¼Œè¿™é‡Œèµ·åˆ°çš„ä¸€ä¸ªæ•ˆæœå°±æ˜¯å¦‚æœä½ æ²¡æœ‰è¿™ä¸ªé˜Ÿåˆ—ï¼Œä¼šæŒ‰ç…§ä½ å£°æ˜çš„æ–¹å¼å¸®ä½ åˆ›å»ºè¿™ä¸ªé˜Ÿåˆ—ã€‚\n\né…ç½®å®Œç¯å¢ƒä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥ä»¥SpringBootçš„æ–¹å¼æ¥ç¼–å†™ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…äº†ã€‚\n\n## 2. ğŸ“•ç”Ÿäº§è€…ä¸RabbitTemplate\n\nå’Œä¸Šä¸€ç¯‡çš„èŠ‚å¥ä¸€æ ·ï¼Œæˆ‘ä»¬å…ˆæ¥ç¼–å†™ç”Ÿäº§è€…ï¼Œä¸è¿‡è¿™æ¬¡æˆ‘è¦å¼•å…¥ä¸€ä¸ªæ–°çš„å·¥å…·ï¼š`RabbitTemplate`ã€‚\n\nå¬å®ƒçš„è¿™ä¸ªåå­—å°±çŸ¥é“ï¼Œåˆæ˜¯ä¸€ä¸ªæ‹¿æ¥å³ç”¨çš„å·¥å…·ç±»ï¼ŒSpringå®¶æ—è¿™ç‚¹å°±å¾ˆèˆ’æœï¼Œä»€ä¹ˆä¸œè¥¿éƒ½ç»™ä½ å°è£…ä¸€éï¼Œè®©ä½ ç”¨èµ·æ¥æ›´æ–¹ä¾¿æ›´é¡ºæ‰‹ã€‚\n\n`RabbitTemplate`å®ç°äº†æ ‡å‡†AmqpTemplateæ¥å£ï¼ŒåŠŸèƒ½å¤§è‡´å¯ä»¥åˆ†ä¸ºå‘é€æ¶ˆæ¯å’Œæ¥å—æ¶ˆæ¯ã€‚\n\næˆ‘ä»¬è¿™é‡Œæ˜¯åœ¨ç”Ÿäº§è€…ä¸­æ¥ç”¨ï¼Œä¸»è¦å°±æ˜¯ä½¿ç”¨å®ƒçš„å‘é€æ¶ˆæ¯åŠŸèƒ½ï¼š`send`å’Œ`convertAndSend`æ–¹æ³•ã€‚\n\n```java\n// å‘é€æ¶ˆæ¯åˆ°é»˜è®¤çš„Exchangeï¼Œä½¿ç”¨é»˜è®¤çš„routing key\nvoid send(Message message) throws AmqpException;\n\n// ä½¿ç”¨æŒ‡å®šçš„routing keyå‘é€æ¶ˆæ¯åˆ°é»˜è®¤çš„exchange\nvoid send(String routingKey, Message message) throws AmqpException;\n\n// ä½¿ç”¨æŒ‡å®šçš„routing keyå‘é€æ¶ˆæ¯åˆ°æŒ‡å®šçš„exchange\nvoid send(String exchange, String routingKey, Message message) throws AmqpException;\n```\n\n`send`æ–¹æ³•æ˜¯å‘é€byteæ•°ç»„çš„æ•°æ®çš„æ¨¡å¼ï¼Œè¿™é‡Œä»£è¡¨æ¶ˆæ¯å†…å®¹çš„å¯¹è±¡æ˜¯`Message`å¯¹è±¡ï¼Œå®ƒçš„æ„é€ æ–¹æ³•å°±æ˜¯ä¼ å…¥byteæ•°ç»„æ•°æ®ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æŠŠæˆ‘ä»¬çš„æ•°æ®è½¬æˆbyteæ•°ç»„ç„¶åæ„é€ æˆä¸€ä¸ª`Message`å¯¹è±¡å†è¿›è¡Œå‘é€ã€‚\n\n```java\n// Objectç±»å‹ï¼Œå¯ä»¥ä¼ å…¥POJO\nvoid convertAndSend(Object message) throws AmqpException;\n\nvoid convertAndSend(String routingKey, Object message) throws AmqpException;\n\nvoid convertAndSend(String exchange, String routingKey, Object message) throws AmqpException;\n```\n\n`convertAndSend`æ–¹æ³•æ˜¯å¯ä»¥ä¼ å…¥POJOå¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œåº•å±‚æ˜¯æœ‰ä¸€ä¸ª`MessageConverter`å¸®æˆ‘ä»¬è‡ªåŠ¨å°†æ•°æ®è½¬æ¢æˆbyteç±»å‹æˆ–Stringæˆ–åºåˆ—åŒ–ç±»å‹ã€‚\n\næ‰€ä»¥è¿™é‡Œæ”¯æŒçš„ä¼ å…¥å¯¹è±¡ä¹Ÿåªæœ‰ä¸‰ç§ï¼šbyteç±»å‹ï¼ŒStringç±»å‹å’Œå®ç°äº†`Serializable`æ¥å£çš„POJOã€‚\n\n---\n\nä»‹ç»å®Œäº†ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸‹ä»£ç ï¼š\n\n```java\n@Slf4j\n@Component(\"rabbitProduce\")\npublic class RabbitProduce {\n    @Autowired\n    private RabbitTemplate rabbitTemplate;\n\n    public void send() {\n        String message = \"Hello æˆ‘æ˜¯ä½œè€…å’Œè€³æœµï¼Œæ¬¢è¿å…³æ³¨æˆ‘ã€‚\" + LocalDateTime.now().toString();\n\n        System.out.println(\"Message content : \" + message);\n\n        // æŒ‡å®šæ¶ˆæ¯ç±»å‹\n        MessageProperties props = MessagePropertiesBuilder.newInstance()\n                .setContentType(MessageProperties.CONTENT_TYPE_TEXT_PLAIN).build();\n\n        rabbitTemplate.send(Producer.QUEUE_NAME,new Message(message.getBytes(StandardCharsets.UTF_8),props));\n        System.out.println(\"æ¶ˆæ¯å‘é€å®Œæ¯•ã€‚\");\n    }\n\n    public void convertAndSend() {\n        User user = new User();\n\n        System.out.println(\"Message content : \" + user);\n\n        rabbitTemplate.convertAndSend(Producer.QUEUE_NAME,user);\n        System.out.println(\"æ¶ˆæ¯å‘é€å®Œæ¯•ã€‚\");\n    }\n\n}\n```\n\nè¿™é‡Œæˆ‘ç‰¹æ„å†™æ˜äº†ä¸¤ä¸ªä¾‹å­ï¼Œä¸€ä¸ªç”¨æ¥æµ‹è¯•sendï¼Œå¦ä¸€ä¸ªç”¨æ¥æµ‹è¯•convertAndSendã€‚\n\n`send`æ–¹æ³•é‡Œæˆ‘ä»¬çœ‹ä¸‹æ¥å’Œä¹‹å‰çš„ä»£ç æ˜¯å‡ ä¹ä¸€æ ·çš„ï¼Œå®šä¹‰ä¸€ä¸ªæ¶ˆæ¯ï¼Œç„¶åç›´æ¥sendï¼Œä½†æ˜¯è¿™ä¸ªæ„é€ æ¶ˆæ¯çš„æ„é€ æ–¹æ³•å¯èƒ½æ¯”æˆ‘ä»¬æƒ³çš„è¦å¤šä¸€ä¸ªå‚æ•°ï¼Œæˆ‘ä»¬åŸæ¥è¯´çš„åªè¦æŠŠæ•°æ®è½¬æˆäºŒè¿›åˆ¶æ•°ç»„æ”¾è¿›å»å³å¯ï¼Œç°åœ¨çœ‹æ¥è¿˜è¦å¤šæ”¾ä¸€ä¸ªå‚æ•°äº†ã€‚\n\n`MessageProperties`ï¼Œæ˜¯çš„æˆ‘ä»¬éœ€è¦å¤šæ”¾ä¸€ä¸ª`MessageProperties`å¯¹è±¡ï¼Œä»ä»–çš„åå­—æˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹å‡ºå®ƒçš„åŠŸèƒ½å°±æ˜¯é™„å¸¦ä¸€äº›å‚æ•°ï¼Œä½†æ˜¯æŸäº›å‚æ•°æ˜¯å°‘ä¸äº†çš„ï¼Œä¸å¸¦ä¸è¡Œã€‚\n\næ¯”å¦‚æˆ‘çš„ä»£ç è¿™é‡Œå°±æ˜¯è®¾ç½®äº†ä¸€ä¸‹æ¶ˆæ¯çš„ç±»å‹ï¼Œæ¶ˆæ¯çš„ç±»å‹æœ‰å¾ˆå¤šç§å¯ä»¥æ˜¯äºŒè¿›åˆ¶ç±»å‹ï¼Œæ–‡æœ¬ç±»å‹ï¼Œæˆ–è€…åºåˆ—åŒ–ç±»å‹ï¼ŒJSONç±»å‹ï¼Œæˆ‘è¿™é‡Œè®¾ç½®çš„å°±æ˜¯æ–‡æœ¬ç±»å‹ï¼ŒæŒ‡å®šç±»å‹æ˜¯å¿…é¡»çš„ï¼Œä¹Ÿå¯ä»¥ä¸ºæˆ‘ä»¬æ‹¿åˆ°æ¶ˆæ¯ä¹‹åè¦å°†æ¶ˆæ¯è½¬æ¢æˆä»€ä¹ˆæ ·çš„å¯¹è±¡æä¾›ä¸€ä¸ªå‚è€ƒã€‚\n\n`convertAndSend`æ–¹æ³•å°±è¦ç®€å•å¤ªå¤šï¼Œè¿™é‡Œæˆ‘æ”¾äº†ä¸€ä¸ªUserå¯¹è±¡æ‹¿æ¥æµ‹è¯•ç”¨ï¼Œç›´æ¥æŒ‡å®šé˜Ÿåˆ—ç„¶åæ”¾å…¥è¿™ä¸ªå¯¹è±¡å³å¯ã€‚\n\n**Tips**ï¼šUserå¿…é¡»å®ç°`Serializable`æ¥å£ï¼Œä¸ç„¶çš„è¯è°ƒç”¨æ­¤æ–¹æ³•çš„æ—¶å€™ä¼šæŠ›å‡º`IllegalArgumentException`å¼‚å¸¸ã€‚\n\n---\n\nä»£ç å®Œæˆä¹‹åæˆ‘ä»¬å°±å¯ä»¥è°ƒç”¨äº†ï¼Œè¿™é‡Œæˆ‘å†™ä¸€ä¸ªæµ‹è¯•ç±»è¿›è¡Œè°ƒç”¨ï¼š\n\n```java\n@SpringBootTest\npublic class RabbitProduceTest {\n    @Autowired\n    private RabbitProduce rabbitProduce;\n\n    @Test\n    public void sendSimpleMessage() {\n        rabbitProduce.send();\n        rabbitProduce.convertAndSend();\n    }\n}\n```\n\næ•ˆæœå¦‚ä¸‹å›¾~\n\n![ç”Ÿäº§è€…æµ‹è¯•](https://gitee.com/he-erduo/Home/raw/master/picture/rabbitmq/%E7%94%9F%E4%BA%A7%E8%80%85test02.png)\n\nåŒæ—¶åœ¨æ§åˆ¶å°ä½¿ç”¨å‘½ä»¤`rabbitmqctl.bat list_queues`æŸ¥çœ‹é˜Ÿåˆ—-`erduo`ç°åœ¨çš„æƒ…å†µï¼š\n\n![æŸ¥çœ‹é˜Ÿåˆ—æƒ…å†µ](https://gitee.com/he-erduo/Home/raw/master/picture/rabbitmq/%E6%9F%A5%E7%9C%8B%E9%98%9F%E5%88%9703.png)\n\nå¦‚æ­¤ä¸€æ¥ï¼Œæˆ‘ä»¬çš„ç”Ÿäº§è€…æµ‹è¯•å°±ç®—å®Œæˆäº†ï¼Œç°åœ¨æ¶ˆæ¯é˜Ÿåˆ—é‡Œä¸¤æ¡æ¶ˆæ¯äº†ï¼Œè€Œä¸”æ¶ˆæ¯ç±»å‹è‚¯å®šä¸ä¸€æ ·ï¼Œä¸€ä¸ªæ˜¯æˆ‘ä»¬è®¾ç½®çš„æ–‡æœ¬ç±»å‹ï¼Œä¸€ä¸ªæ˜¯è‡ªåŠ¨è®¾ç½®çš„åºåˆ—åŒ–ç±»å‹ã€‚\n\n## 3. ğŸ“—æ¶ˆè´¹è€…ä¸RabbitListener\n\næ—¢ç„¶é˜Ÿåˆ—é‡Œé¢å·²ç»æœ‰æ¶ˆæ¯äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±è¦çœ‹æˆ‘ä»¬è¯¥å¦‚ä½•é€šè¿‡æ–°çš„æ–¹å¼æ‹¿åˆ°æ¶ˆæ¯å¹¶æ¶ˆè´¹ä¸ç¡®è®¤äº†ã€‚\n\næ¶ˆè´¹è€…è¿™é‡Œæˆ‘ä»¬è¦ç”¨åˆ°`@RabbitListener`æ¥å¸®æˆ‘ä»¬æ‹¿åˆ°æŒ‡å®šé˜Ÿåˆ—æ¶ˆæ¯ï¼Œå®ƒçš„ç”¨æ³•å¾ˆç®€å•ä¹Ÿå¾ˆå¤æ‚ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæ¥è¯´ç®€å•çš„æ–¹å¼ï¼Œç›´æ¥æ”¾åˆ°æ–¹æ³•ä¸Šï¼ŒæŒ‡å®šç›‘å¬çš„é˜Ÿåˆ—å°±è¡Œäº†ã€‚\n\n```java\n@Slf4j\n@Component(\"rabbitConsumer\")\npublic class RabbitConsumer {\n\n    @RabbitListener(queues = Producer.QUEUE_NAME)\n    public void onMessage(Message message, Channel channel) throws Exception {\n        System.out.println(\"Message content : \" + message);\n        channel.basicAck(message.getMessageProperties().getDeliveryTag(),false);\n        System.out.println(\"æ¶ˆæ¯å·²ç¡®è®¤\");\n    }\n\n}\n```\n\nè¿™æ®µä»£ç å°±ä»£è¡¨`onMessage`æ–¹æ³•ä¼šå¤„ç†`erduo`(Producer.QUEUE_NAMEæ˜¯å¸¸é‡å­—ç¬¦ä¸²\"erduo\")é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ã€‚\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™ä¸ªæ–¹æ³•é‡Œé¢æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œ`Message`å’Œ`Channel`ï¼Œå¦‚æœç”¨ä¸åˆ°`Channel`å¯ä»¥ä¸å†™æ­¤å‚æ•°ï¼Œä½†æ˜¯`Message`æ¶ˆæ¯ä¸€å®šæ˜¯è¦çš„ï¼Œå®ƒä»£è¡¨äº†æ¶ˆæ¯æœ¬èº«ã€‚\n\næˆ‘ä»¬å¯ä»¥æƒ³æƒ³ï¼Œæˆ‘ä»¬çš„ç¨‹åºä»`RabbitMQ`ä¹‹ä¸­æ‹‰å›ä¸€æ¡æ¡æ¶ˆæ¯ä¹‹åï¼Œè¦ä»¥æ€ä¹ˆæ ·çš„æ–¹å¼å±•ç¤ºç»™æˆ‘ä»¬å‘¢ï¼Ÿ\n\næ²¡é”™ï¼Œå°±æ˜¯å°è£…ä¸ºä¸€ä¸ªä¸ª`Message`å¯¹è±¡ï¼Œè¿™é‡Œé¢æ”¾å…¥äº†ä¸€æ¡æ¶ˆæ¯çš„æ‰€æœ‰ä¿¡æ¯ï¼Œæ•°æ®ç»“æ„æ˜¯ä»€ä¹ˆæ ·ä¸€ä¼šæˆ‘ä¸€runä½ å°±èƒ½çœ‹åˆ°äº†ã€‚\n\nåŒæ—¶è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨`Channel`åšä¸€ä¸ªæ¶ˆæ¯ç¡®è®¤çš„æ“ä½œï¼Œè¿™é‡Œçš„DeliveryTagä»£è¡¨çš„æ˜¯è¿™ä¸ªæ¶ˆæ¯åœ¨é˜Ÿåˆ—ä¸­çš„åºå·ï¼Œè¿™ä¸ªä¿¡æ¯å­˜æ”¾åœ¨`MessageProperties`ä¸­ã€‚\n\n## 4. ğŸ“–SpringBoot å¯åŠ¨ï¼\n\nç¼–å†™å®Œç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ï¼ŒåŒæ—¶å·²ç»è¿è¡Œè¿‡ç”Ÿäº§è€…å¾€æ¶ˆæ¯é˜Ÿåˆ—é‡Œé¢æ”¾äº†ä¸¤æ¡ä¿¡æ¯ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥ç›´æ¥å¯åŠ¨æ¶ˆæ¯ï¼ŒæŸ¥çœ‹æ¶ˆè´¹æƒ…å†µï¼š\n\n![SpringBootå¯åŠ¨æŸ¥çœ‹æ¶ˆè´¹è€…](https://gitee.com/he-erduo/Home/raw/master/picture/rabbitmq/rabbitmq%E5%90%AF%E5%8A%A8%E6%B6%88%E8%B4%B9%E8%80%85.png)\n\nåœ¨æˆ‘çº¢è‰²æ¡†çº¿æ ‡è®°çš„åœ°æ–¹å¯ä»¥çœ‹åˆ°ï¼Œå› ä¸ºæˆ‘ä»¬æœ‰äº†æ¶ˆè´¹è€…æ‰€ä»¥é¡¹ç›®å¯åŠ¨åå…ˆå’ŒRabbitMQå»ºç«‹äº†ä¸€ä¸ªè¿æ¥è¿›è¡Œç›‘å¬é˜Ÿåˆ—ã€‚\n\néšåå°±å¼€å§‹æ¶ˆè´¹æˆ‘ä»¬é˜Ÿåˆ—ä¸­çš„ä¸¤æ¡æ¶ˆæ¯ï¼š\n\nç¬¬ä¸€æ¡ä¿¡æ¯æ˜¯`contentType=text/plain`ç±»å‹ï¼Œæ‰€ä»¥ç›´æ¥å°±åœ¨æ§åˆ¶å°ä¸Šæ‰“å°å‡ºäº†å…·ä½“å†…å®¹ã€‚\n\nç¬¬äºŒæ¡ä¿¡æ¯æ˜¯`contentType=application/x-java-serialized-object`ï¼Œåœ¨æ‰“å°çš„æ—¶å€™åªæ‰“å°äº†ä¸€ä¸ªå†…å­˜åœ°å€+å­—èŠ‚å¤§å°ã€‚\n\nä¸ç®¡æ€ä¹ˆè¯´ï¼Œæ•°æ®æˆ‘ä»¬æ˜¯æ‹¿åˆ°äº†ï¼Œä¹Ÿå°±æ˜¯ä»£è¡¨æˆ‘ä»¬çš„æ¶ˆè´¹æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼ŒåŒæ—¶ä¹Ÿéƒ½è¿›è¡Œäº†æ¶ˆæ¯ç¡®è®¤æ“ä½œï¼Œä»æ•°æ®ä¸Šçœ‹ï¼Œæ•´ä¸ªæ¶ˆæ¯å¯ä»¥åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š`body`å’Œ`MessageProperties`ã€‚\n\næˆ‘ä»¬å¯ä»¥å•ç‹¬ä½¿ç”¨ä¸€ä¸ªæ³¨è§£æ‹¿åˆ°è¿™ä¸ªbodyçš„å†…å®¹ - `@Payload`\n\n```java\n@RabbitListener(queues = Producer.QUEUE_NAME)\npublic void onMessage(@Payload String body, Channel channel) throws Exception {\n    System.out.println(\"Message content : \" + body);\n}\n```\n\nä¹Ÿå¯ä»¥å•ç‹¬ä½¿ç”¨ä¸€ä¸ªæ³¨è§£æ‹¿åˆ°`MessageProperties`çš„headerså±æ€§ï¼Œheaderså±æ€§åœ¨æˆªå›¾é‡Œä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œåªä¸è¿‡æ˜¯ä¸ªç©ºçš„ - @Headersã€‚\n\n```java\n@RabbitListener(queues = Producer.QUEUE_NAME)\npublic void onMessage(@Payload String body, @Headers Map<String,Object> headers) throws Exception {\n    System.out.println(\"Message content : \" + body);\n    System.out.println(\"Message headers : \" + headers);\n}\n```\n\nè¿™ä¸¤ä¸ªæ³¨è§£éƒ½ç®—æ˜¯æ‰©å±•çŸ¥è¯†ï¼Œæˆ‘è¿˜æ˜¯æ›´å–œæ¬¢ç›´æ¥æ‹¿åˆ°å…¨éƒ¨ï¼Œå…¨éƒ½è¦ï¼ï¼ï¼\n\nä¸Šé¢æˆ‘ä»¬å·²ç»å®Œæˆäº†æ¶ˆæ¯çš„å‘é€ä¸æ¶ˆè´¹ï¼Œæ•´ä¸ªè¿‡ç¨‹æˆ‘ä»¬å¯ä»¥å†æ¬¡å›æƒ³ä¸€ä¸‹ï¼Œä¸€åˆ‡éƒ½å’Œæˆ‘ç”»çš„è¿™å¼ å›¾ä¸Šä¸€æ ·çš„è½¨è¿¹ï¼š\n\n![rabbitæ¶æ„å›¾](https://gitee.com/he-erduo/Home/raw/master/picture/rabbitmq/RabbitMQ%E6%9E%B6%E6%9E%84%E5%9B%BE.png)\n\nåªä¸è¿‡æˆ‘ä»¬ä¸€ç›´æ²¡æœ‰æŒ‡å®š`Exchage`ä¸€ç›´ä½¿ç”¨çš„é»˜è®¤è·¯ç”±ï¼Œå¸Œæœ›å¤§å®¶å¥½å¥½è®°ä½è¿™å¼ å›¾ã€‚\n\n## 5. ğŸ“˜@RabbitListenerä¸@RabbitHandler\n\nä¸‹é¢å†æ¥è¡¥ä¸€äº›çŸ¥è¯†ç‚¹ï¼Œæœ‰å…³`@RabbitListener`ä¸`@RabbitHandler`ã€‚\n\n`@RabbitListener`ä¸Šé¢æˆ‘ä»¬å·²ç»ç®€å•çš„è¿›è¡Œäº†ä½¿ç”¨ï¼Œç¨å¾®æ‰©å±•ä¸€ä¸‹å®ƒå…¶å®æ˜¯å¯ä»¥ç›‘å¬å¤šä¸ªé˜Ÿåˆ—çš„ï¼Œå°±åƒè¿™æ ·ï¼š\n\n```\n@RabbitListener(queues = { \"queue1\", \"queue2\" })\npublic void onMessage(Message message, Channel channel) throws Exception {\n    System.out.println(\"Message content : \" + message);\n    channel.basicAck(message.getMessageProperties().getDeliveryTag(),false);\n    System.out.println(\"æ¶ˆæ¯å·²ç¡®è®¤\");\n}\n```\n\nè¿˜æœ‰ä¸€äº›å…¶ä»–çš„ç‰¹æ€§å¦‚ç»‘å®šä¹‹ç±»çš„ï¼Œè¿™é‡Œä¸å†èµ˜è¿°å› ä¸ºå¤ªç¡¬ç¼–ç äº†ä¸€èˆ¬ç”¨ä¸ä¸Šã€‚\n\nä¸‹é¢æ¥è¯´è¯´è¿™èŠ‚è¦ä¸»è¦è®²çš„ä¸€ä¸ªç‰¹æ€§ï¼š@RabbitListenerå’Œ@RabbitHandlerçš„æ­é…ä½¿ç”¨ã€‚\n\nå‰é¢æˆ‘ä»¬æ²¡æœ‰æåˆ°ï¼Œ`@RabbitListener`æ³¨è§£å…¶å®æ˜¯å¯ä»¥æ³¨è§£åœ¨ç±»ä¸Šçš„ï¼Œè¿™ä¸ªæ³¨è§£åœ¨ç±»ä¸Šæ ‡å¿—ç€è¿™ä¸ªç±»ç›‘å¬æŸä¸ªé˜Ÿåˆ—æˆ–æŸäº›é˜Ÿåˆ—ã€‚\n\nè¿™ä¸¤ä¸ªæ³¨è§£çš„æ­é…ä½¿ç”¨å°±è¦è®©`@RabbitListener`æ³¨è§£åœ¨ç±»ä¸Šï¼Œç„¶åç”¨`@RabbitHandler`æ³¨è§£åœ¨æ–¹æ³•ä¸Šï¼Œæ ¹æ®æ–¹æ³•å‚æ•°çš„ä¸åŒè‡ªåŠ¨è¯†åˆ«å¹¶å»æ¶ˆè´¹ï¼Œå†™ä¸ªä¾‹å­ç»™å¤§å®¶çœ‹ä¸€çœ‹æ›´ç›´è§‚ä¸€äº›ã€‚\n\n```java\n@Slf4j\n@Component(\"rabbitConsumer\")\n@RabbitListener(queues = Producer.QUEUE_NAME)\npublic class RabbitConsumer {\n\n    @RabbitHandler\n    public void onMessage(@Payload String message){\n        System.out.println(\"Message content : \" + message);\n    }\n\n    @RabbitHandler\n    public void onMessage(@Payload User user) {\n        System.out.println(\"Message content : \" + user);\n    }\n}\n```\n\nå¤§å®¶å¯ä»¥çœ‹çœ‹è¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å…ˆç”¨`@RabbitListener`ç›‘å¬`erduo`é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ï¼Œç„¶åä½¿ç”¨`@RabbitHandler`æ³¨è§£äº†ä¸¤ä¸ªæ–¹æ³•ã€‚\n\n* **ç¬¬ä¸€ä¸ª**æ–¹æ³•çš„bodyç±»å‹æ˜¯Stringç±»å‹ï¼Œè¿™å°±ä»£è¡¨ç€è¿™ä¸ªæ–¹æ³•åªèƒ½å¤„ç†æ–‡æœ¬ç±»å‹çš„æ¶ˆæ¯ã€‚\n\n* **ç¬¬äºŒä¸ªæ–¹æ³•**çš„bodyç±»å‹æ˜¯Userç±»å‹ï¼Œè¿™å°±ä»£è¡¨ç€è¿™ä¸ªæ–¹æ³•åªèƒ½å¤„ç†åºåˆ—åŒ–ç±»å‹ä¸”ä¸ºUserç±»å‹çš„æ¶ˆæ¯ã€‚\n\nè¿™ä¸¤ä¸ªæ–¹æ³•æ­£å¥½å¯¹åº”ç€æˆ‘ä»¬ç¬¬äºŒèŠ‚ä¸­æµ‹è¯•ç±»ä¼šå‘é€çš„ä¸¤ç§æ¶ˆæ¯ï¼Œæ‰€ä»¥æˆ‘ä»¬å¾€RabbitMQä¸­å‘é€ä¸¤æ¡æµ‹è¯•æ¶ˆæ¯ï¼Œç”¨æ¥æµ‹è¯•è¿™æ®µä»£ç ï¼Œçœ‹çœ‹æ•ˆæœï¼š\n\n![RabbitHandleræ•ˆæœ](https://gitee.com/he-erduo/Home/raw/master/picture/rabbitmq/rabbitHandle%E6%95%88%E6%9E%9C.png)\n\néƒ½åœ¨æ§åˆ¶å°ä¸Šå¦‚å¸¸æ‰“å°äº†ï¼Œå¦‚æœ`@RabbitHandler`æ³¨è§£çš„æ–¹æ³•ä¸­æ²¡æœ‰ä¸€ä¸ªçš„ç±»å‹å¯ä»¥å’Œä½ æ¶ˆæ¯çš„ç±»å‹å¯¹çš„ä¸Šï¼Œæ¯”å¦‚æ¶ˆæ¯éƒ½æ˜¯byteæ•°ç»„ç±»å‹ï¼Œè¿™é‡Œæ²¡æœ‰å¯¹åº”çš„æ–¹æ³•å»æ¥æ”¶ï¼Œç³»ç»Ÿå°±ä¼šåœ¨æ§åˆ¶å°ä¸æ–­çš„æŠ¥é”™ï¼Œå¦‚æœä½ å‡ºç°è¿™ä¸ªæƒ…å†µå°±è¯æ˜ä½ ç±»å‹å†™çš„ä¸æ­£ç¡®ã€‚\n\nå‡è®¾ä½ çš„`erduo`é˜Ÿåˆ—ä¸­ä¼šå‡ºç°ä¸‰ç§ç±»å‹çš„æ¶ˆæ¯ï¼šbyteï¼Œæ–‡æœ¬å’Œåºåˆ—åŒ–ï¼Œé‚£ä½ å°±å¿…é¡»è¦æœ‰å¯¹åº”çš„å¤„ç†è¿™ä¸‰ç§æ¶ˆæ¯çš„æ–¹æ³•ï¼Œä¸ç„¶æ¶ˆæ¯å‘è¿‡æ¥çš„æ—¶å€™å°±ä¼šå› ä¸ºæ— æ³•æ­£ç¡®è½¬æ¢è€ŒæŠ¥é”™ã€‚\n\nè€Œä¸”ä½¿ç”¨äº†`@RabbitHandler`æ³¨è§£ä¹‹åå°±ä¸èƒ½å†å’Œä¹‹å‰ä¸€æ ·ä½¿ç”¨`Message`åšæ¥æ”¶ç±»å‹ã€‚\n\n```java\n@RabbitHandler\npublic void onMessage(Message message, Channel channel) throws Exception {\n    System.out.println(\"Message content : \" + message);\n    channel.basicAck(message.getMessageProperties().getDeliveryTag(),false);\n    System.out.println(\"æ¶ˆæ¯å·²ç¡®è®¤\");\n}\n```\n\nè¿™æ ·å†™çš„è¯ä¼šæŠ¥ç±»å‹è½¬æ¢å¼‚å¸¸çš„ï¼Œæ‰€ä»¥äºŒè€…é€‰å…¶ä¸€ã€‚\n\nåŒæ—¶ä¸Šæ–‡æˆ‘çš„`@RabbitHandler`æ²¡æœ‰è¿›è¡Œæ¶ˆæ¯ç¡®è®¤ï¼Œå¤§å®¶å¯ä»¥è‡ªå·±è¯•ä¸€ä¸‹è¿›è¡Œæ¶ˆæ¯ç¡®è®¤ã€‚\n\n## 6. ğŸ“™æ¶ˆæ¯çš„åºåˆ—åŒ–è½¬æ¢\n\né€šè¿‡ä¸Šæ–‡æˆ‘ä»¬å·²ç»çŸ¥é“ï¼Œèƒ½è¢«è‡ªåŠ¨è½¬æ¢çš„å¯¹è±¡åªæœ‰`byte[]`ã€`String`ã€`javaåºåˆ—åŒ–å¯¹è±¡`(å®ç°äº†Serializableæ¥å£çš„å¯¹è±¡)ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯æ‰€æœ‰çš„Javaå¯¹è±¡éƒ½ä¼šå»å®ç°Serializableæ¥å£ï¼Œè€Œä¸”åºåˆ—åŒ–çš„è¿‡ç¨‹ä¸­ä½¿ç”¨çš„æ˜¯JDKè‡ªå¸¦çš„åºåˆ—åŒ–æ–¹æ³•ï¼Œæ•ˆç‡ä½ä¸‹ã€‚\n\næ‰€ä»¥æˆ‘ä»¬æ›´æ™®éçš„åšæ³•æ˜¯ï¼šä½¿ç”¨Jacksonå…ˆå°†æ•°æ®è½¬æ¢æˆJSONæ ¼å¼å‘é€ç»™`RabbitMQ`ï¼Œå†æ¥æ”¶æ¶ˆæ¯çš„æ—¶å€™å†ç”¨Jacksonå°†æ•°æ®ååºåˆ—åŒ–å‡ºæ¥ã€‚\n\nè¿™æ ·åšå¯ä»¥å®Œç¾è§£å†³ä¸Šé¢çš„ç—›ç‚¹ï¼šæ¶ˆæ¯å¯¹è±¡æ—¢ä¸å¿…å†å»å®ç°Serializableæ¥å£ï¼Œä¹Ÿæœ‰æ¯”è¾ƒé«˜çš„æ•ˆç‡(Jacksonåºåˆ—åŒ–æ•ˆç‡ä¸šç•Œåº”è¯¥æ˜¯æœ€å¥½çš„äº†)ã€‚\n\né»˜è®¤çš„æ¶ˆæ¯è½¬æ¢æ–¹æ¡ˆæ˜¯æ¶ˆæ¯è½¬æ¢é¡¶å±‚æ¥å£-`MessageConverter`çš„ä¸€ä¸ªå­ç±»ï¼š`SimpleMessageConverter`ï¼Œæˆ‘ä»¬å¦‚æœè¦æ¢åˆ°å¦ä¸€ä¸ªæ¶ˆæ¯è½¬æ¢å™¨åªéœ€è¦æ›¿æ¢æ‰è¿™ä¸ªè½¬æ¢å™¨å°±è¡Œäº†ã€‚\n\n![MessageConverterç»“æ„æ ‘](https://gitee.com/he-erduo/Home/raw/master/picture/rabbitmq/MessageConvert%E7%BB%93%E6%9E%84%E6%A0%91.png)\n\nä¸Šå›¾æ˜¯`MessageConverter`ç»“æ„æ ‘çš„ç»“æ„æ ‘ï¼Œå¯ä»¥çœ‹åˆ°é™¤äº†`SimpleMessageConverter`ä¹‹å¤–è¿˜æœ‰ä¸€ä¸ª`Jackson2JsonMessageConverter`ï¼Œæˆ‘ä»¬åªéœ€è¦å°†å®ƒå®šä¹‰ä¸ºBeanï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ä¸ªè½¬æ¢å™¨äº†ã€‚\n\n```java\n@Bean\n    public MessageConverter jackson2JsonMessageConverter() {\n        return new Jackson2JsonMessageConverter(jacksonObjectMapper);\n    }\n```\n\nè¿™æ ·å°±å¯ä»¥äº†ï¼Œè¿™é‡Œçš„`jacksonObjectMapper`å¯ä»¥ä¸ä¼ å…¥ï¼Œä½†æ˜¯é»˜è®¤çš„`ObjectMapper`æ–¹æ¡ˆå¯¹JDK8çš„æ—¶é—´æ—¥æœŸåºåˆ—åŒ–ä¼šä¸å¤ªå‹å¥½ï¼Œå…·ä½“å¯ä»¥å‚è€ƒæˆ‘çš„ä¸Šä¸€ç¯‡æ–‡ç« ï¼š[ä»LocalDateTimeåºåˆ—åŒ–æ¢è®¨å…¨å±€ä¸€è‡´æ€§åºåˆ—åŒ–](https://juejin.im/post/6854573211528249357)ï¼Œæ€»çš„æ¥è¯´å°±æ˜¯å®šä¹‰äº†è‡ªå·±çš„`ObjectMapper`ã€‚\n\nåŒæ—¶ä¸ºäº†æ¥ä¸‹æ¥æµ‹è¯•æ–¹ä¾¿ï¼Œæˆ‘åˆå®šä¹‰äº†ä¸€ä¸ªä¸“é—¨æµ‹è¯•JSONåºåˆ—åŒ–çš„é˜Ÿåˆ—ï¼š\n\n```java\n@Bean\npublic Queue erduoJson() {\n    // å…¶ä¸‰ä¸ªå‚æ•°ï¼šdurable exclusive autoDelete\n    // ä¸€èˆ¬åªè®¾ç½®ä¸€ä¸‹æŒä¹…åŒ–å³å¯\n    return new Queue(\"erduo_json\",true);\n}\n```\n\n---\n\nå¦‚æ­¤ä¹‹åå°±å¯ä»¥è¿›è¡Œæµ‹è¯•äº†ï¼Œå…ˆæ˜¯**ç”Ÿäº§è€…ä»£ç **ï¼š\n\n```java\npublic void sendObject() {\n        Client client = new Client();\n\n        System.out.println(\"Message content : \" + client);\n\n        rabbitTemplate.convertAndSend(RabbitJsonConsumer.JSON_QUEUE,client);\n        System.out.println(\"æ¶ˆæ¯å‘é€å®Œæ¯•ã€‚\");\n    }\n```\n\næˆ‘åˆé‡æ–°å®šä¹‰äº†ä¸€ä¸ª`Client`å¯¹è±¡ï¼Œå®ƒå’Œä¹‹å‰æµ‹è¯•ä½¿ç”¨çš„Userå¯¹è±¡æˆå‘˜å˜é‡éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä¸ä¸€æ ·çš„æ˜¯å®ƒæ²¡æœ‰å®ç°Serializableæ¥å£ã€‚\n\nåŒæ—¶ä¸ºäº†ä¿ç•™ä¹‹å‰çš„æµ‹è¯•ä»£ç ï¼Œæˆ‘åˆæ–°å»ºäº†ä¸€ä¸ª`RabbitJsonConsumer`ï¼Œç”¨äºæµ‹è¯•JSONåºåˆ—åŒ–çš„ç›¸å…³æ¶ˆè´¹ä»£ç ï¼Œé‡Œé¢å®šä¹‰äº†ä¸€ä¸ªé™æ€å˜é‡ï¼š`JSON_QUEUE = \"erduo_json\"`;\n\næ‰€ä»¥è¿™æ®µä»£ç æ˜¯å°†`Client`å¯¹è±¡ä½œä¸ºæ¶ˆæ¯å‘é€åˆ°`\"erduo_json\"`é˜Ÿåˆ—ä¸­å»ï¼Œéšåæˆ‘ä»¬åœ¨æµ‹è¯•ç±»ä¸­runä¸€ä¸‹è¿›è¡Œä¸€æ¬¡å‘é€ã€‚\n\nç´§ç€æ˜¯**æ¶ˆè´¹è€…ä»£ç **ï¼š\n\n```java\n@Slf4j\n@Component(\"rabbitJsonConsumer\")\n@RabbitListener(queues = RabbitJsonConsumer.JSON_QUEUE)\npublic class RabbitJsonConsumer {\n    public static final String JSON_QUEUE = \"erduo_json\";\n\n    @RabbitHandler\n    public void onMessage(Client client, @Headers Map<String,Object> headers, Channel channel) throws Exception {\n        System.out.println(\"Message content : \" + client);\n        System.out.println(\"Message headers : \" + headers);\n        channel.basicAck((Long) headers.get(AmqpHeaders.DELIVERY_TAG),false);\n        System.out.println(\"æ¶ˆæ¯å·²ç¡®è®¤\");\n    }\n\n}\n```\n\næœ‰äº†ä¸Šæ–‡çš„ç»éªŒä¹‹åï¼Œè¿™æ®µä»£ç ç†è§£èµ·æ¥ä¹Ÿæ˜¯å¾ˆç®€å•äº†å§ï¼ŒåŒæ—¶ç»™å‡ºäº†ä¸Šä¸€èŠ‚æ²¡å†™çš„å¦‚ä½•åœ¨`@RabbitHandler`æ¨¡å¼ä¸‹è¿›è¡Œæ¶ˆæ¯ç­¾æ”¶ã€‚\n\næˆ‘ä»¬ç›´æ¥æ¥çœ‹çœ‹æ•ˆæœï¼š\n\n![jsonæ¨¡å¼æ¶ˆæ¯å‘é€](https://gitee.com/he-erduo/Home/raw/master/picture/rabbitmq/JSON%E5%AF%B9%E8%B1%A1%E5%8F%91%E9%80%81.png)\n\n![jsonæ¨¡å¼æ¶ˆæ¯æ¶ˆè´¹](https://gitee.com/he-erduo/Home/raw/master/picture/rabbitmq/JSON%E5%AF%B9%E8%B1%A1%E6%B6%88%E8%B4%B9.png)\n\nåœ¨æ‰“å°çš„Headersé‡Œé¢ï¼Œå¾€åç¿»å¯ä»¥çœ‹åˆ°`contentType=application/json`ï¼Œè¿™ä¸ª`contentType`æ˜¯è¡¨æ˜äº†æ¶ˆæ¯çš„ç±»å‹ï¼Œè¿™é‡Œæ­£æ˜¯è¯´æ˜æˆ‘ä»¬æ–°çš„æ¶ˆæ¯è½¬æ¢å™¨ç”Ÿæ•ˆäº†ï¼Œå°†æ‰€æœ‰æ¶ˆæ¯éƒ½è½¬æ¢æˆäº†JSONç±»å‹ã€‚\n\n## åè®°\n\nè¿™ä¸¤ç¯‡è®²å®Œäº†`RabbitMQ`çš„åŸºæœ¬æ”¶å‘æ¶ˆæ¯ï¼ŒåŒ…æ‹¬æ‰‹åŠ¨é…ç½®å’Œè‡ªåŠ¨é…ç½®çš„ä¸¤ç§æ–¹å¼ï¼Œè¿™äº›å¤§å®¶ä»”ç»†ç ”è¯»ä¹‹ååº”è¯¥ä¼šå¯¹`RabbitMQ`æ”¶å‘æ¶ˆæ¯æ²¡ä»€ä¹ˆç–‘é—®äº†~\n\nä¸è¿‡æˆ‘ä»¬ä¸€ç›´ä»¥æ¥å‘æ¶ˆæ¯æ—¶éƒ½æ˜¯ä½¿ç”¨é»˜è®¤çš„äº¤æ¢æœºï¼Œä¸‹ç¯‡å°†ä¼šè®²è¿°ä¸€ä¸‹`RabbitMQ`çš„å‡ ç§äº¤æ¢æœºç±»å‹ï¼Œä»¥åŠå…¶ä½¿ç”¨æ–¹å¼ã€‚\n\nè®²å®Œäº†äº¤æ¢æœºä¹‹åï¼Œè¿™äº›`RabbitMQ`çš„å¸¸ç”¨æ¦‚å¿µåŸºæœ¬å°±å®Œå–„äº†ã€‚\n\n---\n\næœ€è¿‘è¿™æ®µæ—¶é—´å‹åŠ›æŒºå¤§ï¼Œä¼˜ç‹ä»¤æˆ‘å…«æœˆåº•ä¹‹å‰å‡çº§åˆ°ä¸‰çº§ï¼Œæ‰€ä»¥å„ä½è¯»è€…çš„èµå¯¹æˆ‘å¾ˆé‡è¦ï¼Œå¸Œæœ›å¤§å®¶èƒ½å¤Ÿé«˜æŠ¬è´µæ‰‹ï¼Œå¸®æˆ‘ä¸€å“ˆ~\n\nå¥½äº†ï¼Œä»¥ä¸Šå°±æ˜¯æœ¬æœŸçš„å…¨éƒ¨å†…å®¹ï¼Œæ„Ÿè°¢ä½ èƒ½çœ‹åˆ°è¿™é‡Œï¼Œæ¬¢è¿å¯¹æœ¬æ–‡ç‚¹èµæ”¶è—ä¸è¯„è®ºï¼ŒğŸ‘ä½ ä»¬çš„æ¯ä¸ªç‚¹èµéƒ½æ˜¯æˆ‘åˆ›ä½œçš„æœ€å¤§åŠ¨åŠ›ã€‚\n\næˆ‘æ˜¯è€³æœµï¼Œä¸€ä¸ªä¸€ç›´æƒ³åšçŸ¥è¯†è¾“å‡ºçš„ä¼ªæ–‡è‰ºç¨‹åºå‘˜ï¼Œæˆ‘ä»¬ä¸‹æœŸè§ã€‚\n\n**æœ¬æ–‡ä»£ç ï¼š**[ç äº‘åœ°å€](https://gitee.com/he-erduo/spring-boot-learning-demo)&emsp;[GitHubåœ°å€](https://github.com/he-erduo/spring-boot-learning-demo)\n\n\n\n", "user_name": "å’Œè€³æœµ", "description": "çº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç»çŸ¥æ­¤äº‹è¦èº¬è¡Œã€‚", "got_view_count": 18082, "category_name": "åç«¯", "ctime": 1457483880}
{"tag_name": "Spring Cloud", "concern_user_count": 6078, "user_id": "3702810892045095", "title": "å¾®æœåŠ¡ç³»åˆ—ä¹‹ZooKeeperæ³¨å†Œä¸­å¿ƒ02ï¼šCAP åŸåˆ™ä¸ BASE ç†è®º", "mark_content": "ä¸Šç¯‡æˆ‘ä»¬è¯´äº†[ä»€ä¹ˆæ˜¯æ³¨å†Œä¸­å¿ƒå’Œå¸¸è§çš„æ³¨å†Œä¸­å¿ƒ](https://blog.csdn.net/shsxt_c0m/article/details/107885625)ï¼Œæœ¬æ–‡å°†è®²è¿°CAP åŸåˆ™ä¸ BASE ç†è®ºã€‚ä½œè€…æ˜¯å…¬ä¼—å·ï¼šå“ˆå–½æ²ƒå¾·å…ˆç”Ÿï¼Œè¯·å¤šå…³æ³¨ã€‚\n\n# ä¸€ã€CAP åŸåˆ™\n\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200810113612798.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Noc3h0X2MwbQ==,size_16,color_FFFFFF,t_70)  \nCAP åŸåˆ™åˆç§° CAP å®šç†ï¼ŒæŒ‡çš„æ˜¯åœ¨ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œ Consistencyï¼ˆä¸€è‡´æ€§ï¼‰ã€ Availabilityï¼ˆå¯ç”¨æ€§ï¼‰ã€Partition toleranceï¼ˆåˆ†åŒºå®¹é”™æ€§ï¼‰ï¼Œä¸‰è€…ä¸å¯å¾—å…¼ã€‚\n\nCAP ç”± Eric Brewer åœ¨ 2000 å¹´ PODC ä¼šè®®ä¸Šæå‡ºã€‚è¯¥çŒœæƒ³åœ¨æå‡ºä¸¤å¹´åè¢«è¯æ˜æˆç«‹ï¼Œæˆä¸ºæˆ‘ä»¬ç†ŸçŸ¥çš„ CAP å®šç†ã€‚CAP ä¸‰è€…ä¸å¯å…¼å¾—ã€‚\n\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200810113709573.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Noc3h0X2MwbQ==,size_16,color_FFFFFF,t_70)\n\n## 1ã€å–èˆç­–ç•¥\n\nCAP ä¸‰ä¸ªç‰¹æ€§åªèƒ½æ»¡è¶³å…¶ä¸­ä¸¤ä¸ªï¼Œé‚£ä¹ˆå–èˆçš„ç­–ç•¥å°±å…±æœ‰ä¸‰ç§ï¼š\n\n*   **ã€ŒCA without Pã€**ï¼šå¦‚æœä¸è¦æ±‚Pï¼ˆä¸å…è®¸åˆ†åŒºï¼‰ï¼Œåˆ™Cï¼ˆå¼ºä¸€è‡´æ€§ï¼‰å’ŒAï¼ˆå¯ç”¨æ€§ï¼‰æ˜¯å¯ä»¥ä¿è¯çš„ã€‚ä½†æ”¾å¼ƒ P çš„åŒæ—¶ä¹Ÿå°±æ„å‘³ç€æ”¾å¼ƒäº†ç³»ç»Ÿçš„æ‰©å±•æ€§ï¼Œä¹Ÿå°±æ˜¯åˆ†å¸ƒå¼èŠ‚ç‚¹å—é™ï¼Œæ²¡åŠæ³•éƒ¨ç½²å­èŠ‚ç‚¹ï¼Œè¿™æ˜¯è¿èƒŒåˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡çš„åˆè¡·çš„ã€‚\n*   **ã€ŒCP without Aã€**ï¼šå¦‚æœä¸è¦æ±‚Aï¼ˆå¯ç”¨ï¼‰ï¼Œç›¸å½“äºæ¯ä¸ªè¯·æ±‚éƒ½éœ€è¦åœ¨æœåŠ¡å™¨ä¹‹é—´ä¿æŒå¼ºä¸€è‡´ï¼Œè€ŒPï¼ˆåˆ†åŒºï¼‰ä¼šå¯¼è‡´åŒæ­¥æ—¶é—´æ— é™å»¶é•¿ï¼ˆä¹Ÿå°±æ˜¯ç­‰å¾…æ•°æ®åŒæ­¥å®Œæ‰èƒ½æ­£å¸¸è®¿é—®æœåŠ¡ï¼‰ï¼Œä¸€æ—¦å‘ç”Ÿç½‘ç»œæ•…éšœæˆ–è€…æ¶ˆæ¯ä¸¢å¤±ç­‰æƒ…å†µï¼Œå°±è¦ç‰ºç‰²ç”¨æˆ·çš„ä½“éªŒï¼Œç­‰å¾…æ‰€æœ‰æ•°æ®å…¨éƒ¨ä¸€è‡´äº†ä¹‹åå†è®©ç”¨æˆ·è®¿é—®ç³»ç»Ÿã€‚è®¾è®¡æˆ CP çš„ç³»ç»Ÿå…¶å®ä¸å°‘ï¼Œæœ€å…¸å‹çš„å°±æ˜¯åˆ†å¸ƒå¼æ•°æ®åº“ï¼Œå¦‚ Redisã€HBaseç­‰ã€‚å¯¹äºè¿™äº›åˆ†å¸ƒå¼æ•°æ®åº“æ¥è¯´ï¼Œæ•°æ®çš„ä¸€è‡´æ€§æ˜¯æœ€åŸºæœ¬çš„è¦æ±‚ï¼Œå› ä¸ºå¦‚æœè¿è¿™ä¸ªæ ‡å‡†éƒ½è¾¾ä¸åˆ°ï¼Œé‚£ä¹ˆç›´æ¥é‡‡ç”¨å…³ç³»å‹æ•°æ®åº“å°±å¥½ï¼Œæ²¡å¿…è¦å†æµªè´¹èµ„æºæ¥éƒ¨ç½²åˆ†å¸ƒå¼æ•°æ®åº“ã€‚\n*   **ã€ŒAP without Cã€**ï¼šè¦é«˜å¯ç”¨å¹¶å…è®¸åˆ†åŒºï¼Œåˆ™éœ€æ”¾å¼ƒä¸€è‡´æ€§ã€‚ä¸€æ—¦åˆ†åŒºå‘ç”Ÿï¼ŒèŠ‚ç‚¹ä¹‹é—´å¯èƒ½ä¼šå¤±å»è”ç³»ï¼Œä¸ºäº†é«˜å¯ç”¨ï¼Œæ¯ä¸ªèŠ‚ç‚¹åªèƒ½ç”¨æœ¬åœ°æ•°æ®æä¾›æœåŠ¡ï¼Œè€Œè¿™æ ·ä¼šå¯¼è‡´å…¨å±€æ•°æ®çš„ä¸ä¸€è‡´æ€§ã€‚å…¸å‹çš„åº”ç”¨å°±å¦‚æŸç±³çš„æŠ¢è´­æ‰‹æœºåœºæ™¯ï¼Œå¯èƒ½å‰å‡ ç§’ä½ æµè§ˆå•†å“çš„æ—¶å€™é¡µé¢æç¤ºæ˜¯æœ‰åº“å­˜çš„ï¼Œå½“ä½ é€‰æ‹©å®Œå•†å“å‡†å¤‡ä¸‹å•çš„æ—¶å€™ï¼Œç³»ç»Ÿæç¤ºä½ ä¸‹å•å¤±è´¥ï¼Œå•†å“å·²å”®å®Œã€‚è¿™å…¶å®å°±æ˜¯å…ˆåœ¨Aï¼ˆå¯ç”¨æ€§ï¼‰æ–¹é¢ä¿è¯ç³»ç»Ÿå¯ä»¥æ­£å¸¸çš„æœåŠ¡ï¼Œç„¶ååœ¨æ•°æ®çš„ä¸€è‡´æ€§æ–¹é¢åšäº†äº›ç‰ºç‰²ï¼Œè™½ç„¶å¤šå°‘ä¼šå½±å“ä¸€äº›ç”¨æˆ·ä½“éªŒï¼Œä½†ä¹Ÿä¸è‡³äºé€ æˆç”¨æˆ·è´­ç‰©æµç¨‹çš„ä¸¥é‡é˜»å¡ã€‚\n\n## 2ã€æ€»ç»“\n\nç°å¦‚ä»Šï¼Œå¯¹äºå¤šæ•°å¤§å‹äº’è”ç½‘åº”ç”¨çš„åœºæ™¯ï¼Œä¸»æœºä¼—å¤šã€éƒ¨ç½²åˆ†æ•£ï¼Œè€Œä¸”ç°åœ¨çš„é›†ç¾¤è§„æ¨¡è¶Šæ¥è¶Šå¤§ï¼ŒèŠ‚ç‚¹åªä¼šè¶Šæ¥è¶Šå¤šï¼Œæ‰€ä»¥èŠ‚ç‚¹æ•…éšœã€ç½‘ç»œæ•…éšœæ˜¯å¸¸æ€ï¼Œå› æ­¤åˆ†åŒºå®¹é”™æ€§ä¹Ÿå°±æˆä¸ºäº†ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿå¿…ç„¶è¦é¢å¯¹çš„é—®é¢˜ã€‚é‚£ä¹ˆå°±åªèƒ½åœ¨ C å’Œ A ä¹‹é—´è¿›è¡Œå–èˆã€‚ä½†å¯¹äºä¼ ç»Ÿçš„é¡¹ç›®å°±å¯èƒ½æœ‰æ‰€ä¸åŒï¼Œæ‹¿é“¶è¡Œçš„è½¬è´¦ç³»ç»Ÿæ¥è¯´ï¼Œæ¶‰åŠåˆ°é‡‘é’±çš„å¯¹äºæ•°æ®ä¸€è‡´æ€§ä¸èƒ½åšå‡ºä¸€ä¸çš„è®©æ­¥ï¼ŒC å¿…é¡»ä¿è¯ï¼Œå‡ºç°ç½‘ç»œæ•…éšœçš„è¯ï¼Œå®å¯åœæ­¢æœåŠ¡ï¼Œå¯ä»¥åœ¨ A å’Œ P ä¹‹é—´åšå–èˆã€‚\n\næ€»è€Œè¨€ä¹‹ï¼Œæ²¡æœ‰æœ€å¥½çš„ç­–ç•¥ï¼Œå¥½çš„ç³»ç»Ÿåº”è¯¥æ˜¯æ ¹æ®ä¸šåŠ¡åœºæ™¯æ¥è¿›è¡Œæ¶æ„è®¾è®¡çš„ï¼Œåªæœ‰é€‚åˆçš„æ‰æ˜¯æœ€å¥½çš„ã€‚\n\n## äºŒã€BASE ç†è®º\n\nCAP ç†è®ºå·²ç»æå‡ºå¥½å¤šå¹´äº†ï¼Œéš¾é“çœŸçš„æ²¡æœ‰åŠæ³•è§£å†³è¿™ä¸ªé—®é¢˜å—ï¼Ÿä¹Ÿè®¸å¯ä»¥åšäº›æ”¹å˜ã€‚æ¯”å¦‚ C ä¸å¿…ä½¿ç”¨é‚£ä¹ˆå¼ºçš„ä¸€è‡´æ€§ï¼Œå¯ä»¥å…ˆå°†æ•°æ®å­˜èµ·æ¥ï¼Œç¨åå†æ›´æ–°ï¼Œå®ç°æ‰€è°“çš„ â€œæœ€ç»ˆä¸€è‡´æ€§â€ã€‚\n\nè¿™ä¸ªæ€è·¯åˆæ˜¯ä¸€ä¸ªåºå¤§çš„é—®é¢˜ï¼ŒåŒæ—¶ä¹Ÿå¼•å‡ºäº†ç¬¬äºŒä¸ªç†è®º BASE ç†è®ºã€‚\n\n> BASEï¼šå…¨ç§° Basically Availableï¼ˆåŸºæœ¬å¯ç”¨ï¼‰ï¼ŒSoft stateï¼ˆè½¯çŠ¶æ€ï¼‰ï¼Œå’Œ Eventually  \n> consistentï¼ˆæœ€ç»ˆä¸€è‡´æ€§ï¼‰ä¸‰ä¸ªçŸ­è¯­çš„ç¼©å†™ï¼Œæ¥è‡ª ebay çš„æ¶æ„å¸ˆæå‡ºã€‚\n\nBASE ç†è®ºæ˜¯å¯¹ CAP ä¸­ä¸€è‡´æ€§å’Œå¯ç”¨æ€§æƒè¡¡çš„ç»“æœï¼Œå…¶æ¥æºäºå¯¹å¤§å‹äº’è”ç½‘åˆ†å¸ƒå¼å®è·µçš„æ€»ç»“ï¼Œæ˜¯åŸºäº CAP å®šç†é€æ­¥æ¼”åŒ–è€Œæ¥çš„ã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š\n\n> æ—¢ç„¶æ— æ³•åšåˆ°å¼ºä¸€è‡´æ€§ï¼ˆStrong consistencyï¼‰ï¼Œä½†æ¯ä¸ªåº”ç”¨éƒ½å¯ä»¥æ ¹æ®è‡ªèº«çš„ä¸šåŠ¡ç‰¹ç‚¹ï¼Œé‡‡ç”¨é€‚å½“çš„æ–¹å¼æ¥ä½¿ç³»ç»Ÿè¾¾åˆ°æœ€ç»ˆä¸€è‡´æ€§ï¼ˆEventual consistencyï¼‰ã€‚\n\n## 1ã€Basically Availableï¼ˆåŸºæœ¬å¯ç”¨ï¼‰\n\nåŸºæœ¬å¯ç”¨æ˜¯æŒ‡åˆ†å¸ƒå¼ç³»ç»Ÿåœ¨å‡ºç°æ•…éšœçš„æ—¶å€™ï¼Œå…è®¸æŸå¤±éƒ¨åˆ†å¯ç”¨æ€§ï¼ˆä¾‹å¦‚å“åº”æ—¶é—´ã€åŠŸèƒ½ä¸Šçš„å¯ç”¨æ€§ï¼‰ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒåŸºæœ¬å¯ç”¨ç»ä¸ç­‰ä»·äºç³»ç»Ÿä¸å¯ç”¨ã€‚\n\nå“åº”æ—¶é—´ä¸Šçš„æŸå¤±ï¼šæ­£å¸¸æƒ…å†µä¸‹æœç´¢å¼•æ“éœ€è¦åœ¨ 0.5 ç§’ä¹‹å†…è¿”å›ç»™ç”¨æˆ·ç›¸åº”çš„æŸ¥è¯¢ç»“æœï¼Œä½†ç”±äºå‡ºç°æ•…éšœï¼ˆæ¯”å¦‚ç³»ç»Ÿéƒ¨åˆ†æœºæˆ¿å‘ç”Ÿæ–­ç”µæˆ–æ–­ç½‘æ•…éšœï¼‰ï¼ŒæŸ¥è¯¢ç»“æœçš„å“åº”æ—¶é—´å¢åŠ åˆ°äº† 1~2 ç§’ã€‚  \nåŠŸèƒ½ä¸Šçš„æŸå¤±ï¼šè´­ç‰©ç½‘ç«™åœ¨è´­ç‰©é«˜å³°ï¼ˆå¦‚åŒåä¸€ï¼‰æ—¶ï¼Œä¸ºäº†ä¿æŠ¤ç³»ç»Ÿçš„ç¨³å®šæ€§ï¼Œéƒ¨åˆ†æ¶ˆè´¹è€…å¯èƒ½ä¼šè¢«å¼•å¯¼åˆ°ä¸€ä¸ªé™çº§é¡µé¢ã€‚\n\n## 2ã€Soft stateï¼ˆè½¯çŠ¶æ€ï¼‰\n\nä»€ä¹ˆæ˜¯è½¯çŠ¶æ€å‘¢ï¼Ÿç›¸å¯¹äºåŸå­æ€§è€Œè¨€ï¼Œè¦æ±‚å¤šä¸ªèŠ‚ç‚¹çš„æ•°æ®å‰¯æœ¬éƒ½æ˜¯ä¸€è‡´çš„ï¼Œè¿™æ˜¯ä¸€ç§ â€œç¡¬çŠ¶æ€â€ã€‚\n\nè½¯çŠ¶æ€æ˜¯æŒ‡å…è®¸ç³»ç»Ÿå­˜åœ¨ä¸­é—´çŠ¶æ€ï¼Œè€Œè¯¥ä¸­é—´çŠ¶æ€ä¸ä¼šå½±å“ç³»ç»Ÿæ•´ä½“å¯ç”¨æ€§ã€‚åˆ†å¸ƒå¼å­˜å‚¨ä¸­ä¸€èˆ¬ä¸€ä»½æ•°æ®ä¼šæœ‰å¤šä¸ªå‰¯æœ¬ï¼Œå…è®¸ä¸åŒå‰¯æœ¬æ•°æ®åŒæ­¥çš„å»¶æ—¶å°±æ˜¯è½¯çŠ¶æ€çš„ä½“ç°ã€‚\n\n## 3ã€Eventually consistentï¼ˆæœ€ç»ˆä¸€è‡´æ€§ï¼‰\n\nç³»ç»Ÿä¸å¯èƒ½ä¸€ç›´æ˜¯è½¯çŠ¶æ€ï¼Œå¿…é¡»æœ‰ä¸ªæ—¶é—´æœŸé™ã€‚åœ¨æœŸé™è¿‡åï¼Œåº”å½“ä¿è¯æ‰€æœ‰å‰¯æœ¬ä¿æŒæ•°æ®ä¸€è‡´æ€§ã€‚ä»è€Œè¾¾åˆ°æ•°æ®çš„æœ€ç»ˆä¸€è‡´æ€§ã€‚è¿™ä¸ªæ—¶é—´æœŸé™å–å†³äºç½‘ç»œå»¶æ—¶ï¼Œç³»ç»Ÿè´Ÿè½½ï¼Œæ•°æ®å¤åˆ¶æ–¹æ¡ˆè®¾è®¡ç­‰ç­‰å› ç´ ã€‚\n\nå®é™…ä¸Šï¼Œä¸åªæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿä½¿ç”¨æœ€ç»ˆä¸€è‡´æ€§ï¼Œå…³ç³»å‹æ•°æ®åº“åœ¨æŸä¸ªåŠŸèƒ½ä¸Šï¼Œä¹Ÿæ˜¯ä½¿ç”¨æœ€ç»ˆä¸€è‡´æ€§çš„ï¼Œæ¯”å¦‚å¤‡ä»½ï¼Œæ•°æ®åº“çš„å¤åˆ¶éƒ½æ˜¯éœ€è¦æ—¶é—´çš„ï¼Œè¿™ä¸ªå¤åˆ¶è¿‡ç¨‹ä¸­ï¼Œä¸šåŠ¡è¯»å–åˆ°çš„å€¼å°±æ˜¯æ—§å€¼ã€‚å½“ç„¶ï¼Œæœ€ç»ˆè¿˜æ˜¯è¾¾æˆäº†æ•°æ®ä¸€è‡´æ€§ã€‚è¿™ä¹Ÿç®—æ˜¯ä¸€ä¸ªæœ€ç»ˆä¸€è‡´æ€§çš„ç»å…¸æ¡ˆä¾‹ã€‚\n\n## 4ã€æ€»ç»“\n\næ€»çš„æ¥è¯´ï¼ŒBASE ç†è®ºé¢å‘çš„æ˜¯å¤§å‹é«˜å¯ç”¨å¯æ‰©å±•çš„åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå’Œä¼ ç»Ÿäº‹åŠ¡çš„ ACID æ˜¯ç›¸åçš„ï¼Œå®ƒå®Œå…¨ä¸åŒäº ACID çš„å¼ºä¸€è‡´æ€§æ¨¡å‹ï¼Œè€Œæ˜¯é€šè¿‡ç‰ºç‰²å¼ºä¸€è‡´æ€§æ¥è·å¾—å¯ç”¨æ€§ï¼Œå¹¶å…è®¸æ•°æ®åœ¨ä¸€æ®µæ—¶é—´æ˜¯ä¸ä¸€è‡´çš„ã€‚æ›´å¤š[Javaå¾®æœåŠ¡æ¶æ„](https://item.taobao.com/item.htm?spm=a2oq0.12575281.0.0.4edf1deb3a71zS&ft=t&id=618747445832)ï¼Œ[springå…¨å®¶æ¡¶æ•™ç¨‹](https://item.taobao.com/item.htm?spm=a2oq0.12575281.0.0.4edf1deb3a71zS&ft=t&id=623869400668) æ¬¢è¿ç‚¹å‡»è·å–ã€‚", "user_name": "æ˜æœˆåŠæ—¶æœ‰", "description": "ç½‘ç»œï¼Œç¼–ç¨‹ï¼ŒåŸ¹è®­ï¼Œæ¸¸å±±ç©æ°´", "got_view_count": 14699, "category_name": "åç«¯", "ctime": 1457483880}
{"tag_name": "Webpack", "concern_user_count": 181325, "user_id": "4142615543688120", "title": "è‡ªå®šä¹‰ webpack é…ç½®ï¼šåŸºç¡€é…ç½®", "mark_content": "> å‚è€ƒ webpackæ•™ç¨‹ã€create-react-appï¼ˆejectåï¼‰é…ç½®ï¼Œè‡ªå®šä¹‰ä¸€ä¸ªé€‚åˆçš„ã€å¯ç»´æŠ¤çš„webpacké…ç½®\n\n## 1.åˆå§‹åŒ–\n\n```\nyarn init\n```\n\nåˆå§‹åŒ–æˆåŠŸ\n```\nyarn init v1.17.3\nquestion name (my-webpack-config): \nquestion version (1.0.0): \nquestion description: \nquestion entry point (index.js): \nquestion repository url (https://github.com/1071942338/my-webpack-config.git): \nquestion author (å¼ æ–‡æ—— <1071942338@qq.com>): \nquestion license (MIT): \nquestion private: \nsuccess Saved package.json\nâœ¨  Done in 10.97s.\n```\n\n## 2.å®‰è£… webpack webpack-cli\n\n```\nyarn add webpack webpack-cli -D\n```\n\n## 3. package.json æ·»åŠ  build è„šæœ¬\n### 3.1 æ·»åŠ  index.js æ–‡ä»¶\n1. æ–°å»º src æ–‡ä»¶å¤¹\n2. æ–°å»º index.js æ–‡ä»¶\n\n```\nconsole.log(\"Hello Webpack !\");\n\n```\n\n### 3.2 æ·»åŠ  webpack.config.js æ–‡ä»¶\n1. æ–°å»º config æ–‡ä»¶å¤¹\n2. æ–°å»º webpack.config.js æ–‡ä»¶\n\n```\nmodule.exports = {\n  //æŒ‡å®šå…¥å£æ–‡ä»¶\n  entry: \"./src/index.js\",\n  output: {\n    //è¾“å…¥æ–‡ä»¶å¤¹åç§°\n    filename: \"main.js\",\n  },\n  //æš‚æ—¶æŒ‡å®šå¼€å‘æ¨¡å¼\n  mode: \"development\",\n};\n\n```\n\n### 3.3 package.json æ·»åŠ  scripts:build\n\n```\n  \"scripts\": {\n    \"build\": \"webpack --config ./config/webpack.config.js\"\n  },\n```\n\n### 3.4 æ‰§è¡Œæ„å»ºè„šæœ¬\n\n```\nyarn build\n```\n\n```\nyarn run v1.17.3\n$ webpack --config ./config/webpack.config.js\nHash: 33226b34c0395d779dc7\nVersion: webpack 4.44.1\nTime: 47ms\nBuilt at: 2020/08/10 ä¸‹åˆ2:31:51\n  Asset     Size  Chunks             Chunk Names\nmain.js  3.8 KiB    main  [emitted]  main\nEntrypoint main = main.js\n[./src/index.js] 32 bytes {main} [built]\nâœ¨  Done in 0.60s.\n```\n### 3.5 æ‰§è¡Œç»“æœ\n1. ç”Ÿæˆ dist æ–‡ä»¶å¤¹\n2. dist ç›®å½•ä¸‹ç”Ÿæˆ main.js æ–‡ä»¶\n3. dist ç›®å½•æ·»åŠ  index.html æ–‡ä»¶å¹¶ä½¿ç”¨ main.js ï¼Œå¯åœ¨æ§åˆ¶å°çœ‹åˆ°æ‰“å°å†…å®¹ï¼šHello Webpack !\n\n## 4. æ‹†åˆ† webpack.config.js\n\n### 4.1 æ‹†åˆ†ç›®çš„\n- å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒéœ€æ±‚ä¸åŒï¼Œä¾‹å¦‚å¼€å‘éœ€è¦çƒ­æ›´æ–°åŠæ—¶æŸ¥çœ‹ä»£ç æ•ˆæœï¼Œç”Ÿæˆéœ€è¦å‹ç¼©ä»£ç \n- ä¾¿äºç»´æŠ¤\n\n\n### 4.2 æ‹†åˆ†ç»“æœ\n\n- webpack.base.js å…¬å…±é…ç½®\n- webpack.dev.js å¼€å‘å¼€å‘é…ç½®\n- webpack.prod.js ç”Ÿæˆç¯å¢ƒé…ç½®\n\n\n### 4.3 æ‹†åˆ†å·¥å…·\néœ€è¦ç”¨åˆ°webpack-merge\n\n```\nyarn add webpack-merge -D\n```\n### 4.3 ç„¶åä¿®æ”¹æ–‡ä»¶å†…å®¹\n\n```\n<!-- webpack.base.js -->\nmodule.exports = {\n  //æŒ‡å®šå…¥å£æ–‡ä»¶\n  entry: \"./src/index.js\",\n  output: {\n    //è¾“å…¥æ–‡ä»¶å¤¹åç§°\n    filename: \"main.js\",\n  },\n};\n\n<!-- webpack.dev.js -->\nconst { merge } = require(\"webpack-merge\");\nconst baseConfig = require(\"./webpack.base\");\nmodule.exports = merge(baseConfig, {\n  mode: \"development\",\n});\n\n<!-- webpack.prod.js -->\nconst { merge } = require(\"webpack-merge\");\nconst baseConfig = require(\"./webpack.base\");\nmodule.exports = merge(baseConfig, {\n  mode: \"production\",\n});\n```\n\n### 4.3 ä¿®æ”¹ package.json æ–‡ä»¶å†…å®¹\n\n\n```\n  \"scripts\": {\n    \"dev\": \"webpack --config ./config/webpack.dev.js\",\n    \"build\": \"webpack --config ./config/webpack.prod.js\"\n  },\n```\n\n### 4.4 åˆ†åˆ«æ‰§è¡ŒæŒ‡ä»¤\n\n\n```\nyarn dev\n<!-- æˆ– -->\nyarn build\n```\néƒ½å¯ä»¥ç”Ÿæˆ`dist/main.js`æ–‡ä»¶ï¼ŒåŒºåˆ«å°±æ˜¯devä¸º develpotment æ¨¡å¼ä»£ç æœªå‹ç¼©ã€‚\n\n## 5. ä½¿ç”¨ html æ¨¡æ¿\n\n```\nyarn add html-webpack-plugin -D\n```\n### 5.1 æ·»åŠ  index.html æ–‡ä»¶\n\n1. æ–°å»º public æ–‡ä»¶å¤¹\n2. æ–°å»º index.html æ–‡ä»¶\n\n```\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"utf-8\" />\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\n    <title>my-webpack-config</title>\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n  </head>\n  <body></body>\n</html>\n\n```\n\n### 5.2 ä¿®æ”¹ webpack.base.js æ–‡ä»¶\n\n```\nconst pathsUtil = require(\"./pathsUtil\");\nconst HtmlWebpackPlugin = require(\"html-webpack-plugin\");\n\nmodule.exports = {\n  //æŒ‡å®šå…¥å£æ–‡ä»¶\n  entry: pathsUtil.appIndexJs,\n  output: {\n    //è¾“å…¥æ–‡ä»¶å¤¹åç§°\n    filename: \"main.js\",\n  },\n  plugins: [\n    new HtmlWebpackPlugin({\n      template: pathsUtil.appHtml,\n      inject: true,\n    }),\n  ],\n};\n\n\n```\n### 5.3 ç„¶åæ‰§è¡Œæ„å»ºå‘½ä»¤å³å¯çœ‹åˆ°è‡ªåŠ¨ç”Ÿæˆçš„index.htmlæ–‡ä»¶\n\n```\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"utf-8\" />\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\n    <title>my-webpack-config</title>\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n  </head>\n  <body><script src=\"main.js\"></script></body>\n</html>\n\n```\n\n\n## 6.æ·»åŠ  CSS æ”¯æŒ\n\n```\nyarn add style-loader css-loader -D\n```\n### 6.1 æ·»åŠ index.cssæ–‡ä»¶\n\n```\n.color {\n  color: rebeccapurple;\n}\n```\n\n### 6.2 ä¿®æ”¹index.jsæ–‡ä»¶\n\n```\nimport \"./index.css\";\n\nconst colorElement = document.createElement(\"div\");\ncolorElement.setAttribute(\"class\", \"color\");\ncolorElement.innerText = \"my-webpack-config\";\ndocument.body.appendChild(colorElement);\n```\n\n### 6.3 ä¿®æ”¹ webpack.base.js æ–‡ä»¶\n```\nconst pathsUtil = require(\"./pathsUtil\");\nconst HtmlWebpackPlugin = require(\"html-webpack-plugin\");\n\nmodule.exports = {\n  //æŒ‡å®šå…¥å£æ–‡ä»¶\n  entry: pathsUtil.appIndexJs,\n  output: {\n    //è¾“å…¥æ–‡ä»¶å¤¹åç§°\n    filename: \"main.js\",\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.css$/,\n        use: [\"style-loader\", \"css-loader\"],\n      },\n    ],\n  },\n  plugins: [\n    new HtmlWebpackPlugin({\n      template: pathsUtil.appHtml,\n      inject: true,\n    }),\n  ],\n};\n\n```\n\n\n## 7.æ·»åŠ å›¾ç‰‡æ”¯æŒ\n```\nyarn add url-loader file-loader -D\n```\n\n### 7.1 æ·»åŠ å°ºå¯¸ä¸åŒçš„å›¾ç‰‡\n- small 47K\n- big 4.4M\n\n\n### 7.2 ä¿®æ”¹ webpack.base.js æ–‡ä»¶\n\n```\nconst pathsUtil = require(\"./pathsUtil\");\nconst HtmlWebpackPlugin = require(\"html-webpack-plugin\");\n\nmodule.exports = {\n  //æŒ‡å®šå…¥å£æ–‡ä»¶\n  entry: pathsUtil.appIndexJs,\n  output: {\n    //è¾“å…¥æ–‡ä»¶å¤¹åç§°\n    filename: \"main.js\",\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.css$/,\n        use: [\"style-loader\", \"css-loader\"],\n      },\n      {\n        test: [/\\.bmp$/, /\\.gif$/, /\\.jpe?g$/, /\\.png$/],\n        use: [\n          {\n            loader: \"url-loader\",\n            options: {\n              limit: 51200,//50k\n            },\n          },\n        ],\n      },\n    ],\n  },\n  plugins: [\n    new HtmlWebpackPlugin({\n      template: pathsUtil.appHtml,\n      inject: true,\n    }),\n  ],\n};\n\n```\n### 7.3 ä¿®æ”¹ index.js æ–‡ä»¶\n\n```\nimport \"./index.css\";\nimport smallImage from \"./image/small.png\";\nimport bigImage from \"./image/big.png\";\n\nconst colorElement = document.createElement(\"div\");\ncolorElement.setAttribute(\"class\", \"color\");\ncolorElement.innerText = \"my-webpack-config\";\ndocument.body.appendChild(colorElement);\n\nconst smallImageElement = document.createElement(\"img\");\nsmallImageElement.setAttribute(\"src\", smallImage);\ndocument.body.appendChild(smallImageElement);\n\nconst bigImageElement = document.createElement(\"img\");\nbigImageElement.setAttribute(\"src\", bigImage);\ndocument.body.appendChild(bigImageElement);\n\n```\n\n### 7.4 æ‰§è¡Œæ„å»ºæ‰“åŒ…ååœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹\n- small ä»¥ base64å­—ç¬¦ä¸²æ˜¾ç¤º\n- big 4.4M ä»¥è·¯å¾„åŠ è½½å›¾ç‰‡æ˜¾ç¤º\n\n## 8.æ·»åŠ å­—ä½“è§£æ\n\n```\nyarn add file-loader -D\n```\n\n### 8.1 ä¿®æ”¹ index.css\n\n```\n.color {\n  color: rebeccapurple;\n}\n@font-face {\n  font-family: myFirstFont;\n  src: url(\"./font/font.ttf\");\n}\n.font {\n  font-family: myFirstFont;\n}\n\n```\n\n### 8.2 ä¿®æ”¹ index.js\n\n\n```\nimport \"./index.css\";\nimport smallImage from \"./image/small.png\";\nimport bigImage from \"./image/big.png\";\n\nconst colorElement = document.createElement(\"div\");\ncolorElement.setAttribute(\"class\", \"color\");\ncolorElement.innerText = \"my-webpack-config\";\ndocument.body.appendChild(colorElement);\n\nconst fontElement = document.createElement(\"div\");\nfontElement.setAttribute(\"class\", \"color font\");\nfontElement.innerText = \"my-webpack-config\";\ndocument.body.appendChild(fontElement);\n\nconst smallImageElement = document.createElement(\"img\");\nsmallImageElement.setAttribute(\"src\", smallImage);\ndocument.body.appendChild(smallImageElement);\n\nconst bigImageElement = document.createElement(\"img\");\nbigImageElement.setAttribute(\"src\", bigImage);\ndocument.body.appendChild(bigImageElement);\n\n```\n### 8.3 ä¿®æ”¹ webpack.base.js\n\n\n```\nconst pathsUtil = require(\"./pathsUtil\");\nconst HtmlWebpackPlugin = require(\"html-webpack-plugin\");\n\nmodule.exports = {\n  //æŒ‡å®šå…¥å£æ–‡ä»¶\n  entry: pathsUtil.appIndexJs,\n  output: {\n    //è¾“å…¥æ–‡ä»¶å¤¹åç§°\n    filename: \"main.js\",\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.css$/,\n        use: [\"style-loader\", \"css-loader\"],\n      },\n      {\n        test: [/\\.bmp$/, /\\.gif$/, /\\.jpe?g$/, /\\.png$/],\n        use: [\n          {\n            loader: \"url-loader\",\n            options: {\n              limit: 51200, //50k\n            },\n          },\n        ],\n      },\n      {\n        test: /\\.(woff|woff2|eot|ttf|otf)$/,\n        use: [\"file-loader\"],\n      },\n    ],\n  },\n  plugins: [\n    new HtmlWebpackPlugin({\n      template: pathsUtil.appHtml,\n      inject: true,\n    }),\n  ],\n};\n\n```\n\n### 8.4 æ„å»ºæ‰“åŒ… æŸ¥çœ‹æ•ˆæœ\n\n## 9. æ·»åŠ  React æ”¯æŒ\n\n### 9.1 æ·»åŠ  babel æ”¯æŒ\n\n```\nyarn add @babel/core @babel/preset-env @babel/preset-react -D\n```\n\n### 9.2 æ·»åŠ  babel-loader æ”¯æŒ\n\n```\nyarn add babel-loader -D\n```\n\n### 9.3 æ·»åŠ  React æ”¯æŒ\n```\nyarn add react react-dom \n```\n### 9.4 ä¿®æ”¹ webpack.base.js\n\n```\nyarn add react react-dom \n```\n\n### 9.5 ä¿®æ”¹ index.html\n\n```\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"utf-8\" />\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\n    <title>my-webpack-config</title>\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n  </head>\n  <body>\n    <div id=\"root\"></div>\n  </body>\n</html>\n\n\n```\n### 9.6 ä¿®æ”¹ index.js\n\n```\nimport React from \"react\";\nimport ReactDom from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App.jsx\";\n\nReactDom.render(<App />, document.getElementById(\"root\"));\n\n```\n\n\n### 9.7 æ–°å¢ App.jsx\n\n```\nimport React from \"react\";\nimport smallImage from \"./image/small.png\";\nimport bigImage from \"./image/big.png\";\nexport default class App extends React.Component {\n  render() {\n    return (\n      <div>\n        <div className=\"color\">my-webpack-config</div>\n        <div className=\"color font\">my-webpack-config</div>\n        <img src={smallImage} alt=\"\"></img>\n        <img src={bigImage} alt=\"\"></img>\n      </div>\n    );\n  }\n}\n\n```\n\n\n### 9.9 æ‰§è¡Œæ„å»ºè„šæœ¬ï¼ŒæŸ¥çœ‹æ•ˆæœ\n\n## 10. è‡ªåŠ¨ç¼–è¯‘ä»£ç \n```\nyarn add webpack-dev-server -D\n\n```\n### 10.1 æ·»åŠ  scripts æ–‡ä»¶å¤¹\n- æ–°å¢ dev.js\n- æ–°å¢ build.js\n### 10.2 ç¼–è¾‘ dev.js\n\n```\n\"use strict\";\nconst webpack = require(\"webpack\");\nconst prodConfig = require(\"../config/webpack.dev.js\");\nconst webpackDevServer = require(\"webpack-dev-server\");\n\nconst compiler = webpack(prodConfig);\nconst devServerOptions = Object.assign({}, prodConfig.devServer, {\n  open: true,\n  stats: {\n    colors: true,\n  },\n});\nconst server = new webpackDevServer(compiler, devServerOptions);\n\nserver.listen(3000, \"127.0.0.1\", () => {\n  console.log(\"Starting server on http://localhost:3000\");\n});\n\n```\n\n### 10.3 ç¼–è¾‘ build.js\n```\n\"use strict\";\nconst webpack = require(\"webpack\");\nconst prodConfig = require(\"../config/webpack.prod.js\");\nwebpack(prodConfig, (err, stats) => {\n  if (err || stats.hasErrors()) {\n    // åœ¨è¿™é‡Œå¤„ç†é”™è¯¯\n    console.log(\"err:\", err);\n    console.log(\"stats:\", stats);\n  }\n  // å¤„ç†å®Œæˆ\n  console.log(\"å¤„ç†å®Œæˆ\");\n});\n\n```\n### 10.4 ç¼–è¾‘ package.json æ–‡ä»¶\n\n```\n  \"scripts\": {\n    \"dev\": \"node ./scripts/dev.js\",\n    \"build\": \"node ./scripts/build.js\"\n  },\n```\n\n### 10.5 æ‰§è¡Œæ„å»ºè„šæœ¬ï¼ŒæŸ¥çœ‹æ•ˆæœ\n\n```\nyarn dev\n```\nç„¶åè‡ªåŠ¨æ‰“å¼€ http://localhost:3000 é¡µé¢ï¼Œç¼–è¾‘é¡µé¢ä¿å­˜åï¼Œé¡µé¢è‡ªåŠ¨åˆ·æ–°\n\n\n---\n> ä»£ç ä»“åº“\n\n- [my-webpack-config](https://github.com/1071942338/my-webpack-config)\n\n> å‚è€ƒé“¾æ¥\n- [å®‰è£…](https://www.webpackjs.com/guides/installation/)\n- [èµ·æ­¥](https://www.webpackjs.com/guides/getting-started/)\n- [ç®¡ç†èµ„æº](https://www.webpackjs.com/guides/asset-management/)\n- [å¼€å‘](https://www.webpackjs.com/guides/development/)\n- [å¼€å‘ä¸­ Server(devServer)](https://www.webpackjs.com/configuration/dev-server/)\n- [webpack webpack-dev-server](https://github.com/webpack/webpack-dev-server/blob/master/examples/api/simple/server.js)\n- [url-loader](https://github.com/webpack/url-loader)\n- [file-loader](https://github.com/webpack/file-loader)\n- [css-loader](https://github.com/webpack/css-loader)\n- [style-loader](https://github.com/webpack/style-loader)\n- [css-loader](https://github.com/webpack/css-loader)\n- [babel-loader](https://github.com/babel/babel-loader)\n- [Babel Usage Guide](https://www.babeljs.cn/docs/usage)\n- [babel-preset-react](https://www.babeljs.cn/docs/babel-preset-react)\n- [html-webpack-plugin](https://github.com/ampedandwired/html-webpack-plugin)\n\n", "user_name": "å¥½_å¿«", "description": "iOS React Vue", "got_view_count": 6516, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "å¼ºåŒ–å­¦ä¹ ", "concern_user_count": 3017, "user_id": "3421335916914791", "title": "å¼ºåŒ–å­¦ä¹  8 â€”â€” DQN ä»£ç  Tensorflow 2.0 å®ç°", "mark_content": "\n\nåœ¨ä¸Šä¸€ç¯‡æ–‡ç« [å¼ºåŒ–å­¦ä¹ â€”â€”DQNä»‹ç»](https://blog.csdn.net/november_chopin/article/details/107912720) ä¸­æˆ‘ä»¬è¯¦ç»†ä»‹ç»äº†DQN çš„æ¥æºï¼Œä»¥åŠå¯¹äºå¼ºåŒ–å­¦ä¹ éš¾ä»¥æ”¶æ•›çš„é—®é¢˜DQNç®—æ³•æå‡ºçš„ä¸¤ä¸ªå¤„ç†æ–¹æ³•ï¼šç»éªŒå›æ”¾å’Œå›ºå®šç›®æ ‡å€¼ã€‚è¿™ç¯‡æ–‡ç« æˆ‘ä»¬å°±ç”¨ä»£ç æ¥å®ç° DQN ç®—æ³•\n\n## ä¸€ã€ç¯å¢ƒä»‹ç»\n\n### 1ã€Gym ä»‹ç»\n\næœ¬ç®—æ³•ä»¥åŠä»¥åæ–‡ç« è¦ä»‹ç»çš„ç®—æ³•éƒ½ä¼šä½¿ç”¨ ç”± $OpenAI$ æ¨å‡ºçš„[$Gym$](http://gym.openai.com/)ä»¿çœŸç¯å¢ƒï¼Œ $Gym$ æ˜¯ä¸€ä¸ªç ”ç©¶å’Œå¼€å‘å¼ºåŒ–å­¦ä¹ ç›¸å…³ç®—æ³•çš„ä»¿çœŸå¹³å°ï¼Œäº†è®¸å¤šé—®é¢˜å’Œç¯å¢ƒï¼ˆæˆ–æ¸¸æˆï¼‰çš„æ¥å£ï¼Œè€Œç”¨æˆ·æ— éœ€è¿‡å¤šäº†è§£æ¸¸æˆçš„å†…éƒ¨å®ç°ï¼Œé€šè¿‡ç®€å•åœ°è°ƒç”¨å°±å¯ä»¥ç”¨æ¥æµ‹è¯•å’Œä»¿çœŸï¼Œå¹¶å…¼å®¹å¸¸è§çš„æ•°å€¼è¿ç®—åº“å¦‚ $TensorFlow$ ã€‚\n\n```python\nimport gym\nenv = gym.make('CartPole-v1')\nenv.reset()\nfor _ in range(1000):\n    env.render()\n    env.step(env.action_space.sample()) # take a random action\nenv.close()\n```\n\nè¿è¡Œç»“æœå¦‚ä¸‹ï¼š\n\n<img src=\"https://s1.ax1x.com/2020/07/31/aMXZ7Q.gif\" alt=\"aMXZ7Q.gif\" style=\"zoom:80%;\" />\n\nä»¥ä¸Šä»£ç ä¸­å¯ä»¥çœ‹å‡ºï¼Œ`gym`çš„æ ¸å¿ƒæ¥å£æ˜¯`Env`ã€‚ä½œä¸ºç»Ÿä¸€çš„ç¯å¢ƒæ¥å£ï¼Œ`Env`åŒ…å«ä¸‹é¢å‡ ä¸ªæ ¸å¿ƒæ–¹æ³•ï¼š\n\n- `reset(self)`ï¼šé‡ç½®ç¯å¢ƒçš„çŠ¶æ€ï¼Œè¿”å›è§‚å¯Ÿã€‚å¦‚æœå›åˆç»“æŸï¼Œå°±è¦è°ƒç”¨æ­¤å‡½æ•°ï¼Œé‡ç½®ç¯å¢ƒä¿¡æ¯\n- `step(self, action)`ï¼šæ‰§è¡ŒåŠ¨ä½œ `action` æ¨è¿›ä¸€ä¸ªæ—¶é—´æ­¥é•¿ï¼Œè¿”å›`observation`,` reward`, `done`, `info`ã€‚\n  - `observation`è¡¨ç¤ºç¯å¢ƒè§‚æµ‹ï¼Œä¹Ÿå°±æ˜¯`state`\n  - `reward` è¡¨ç¤ºè·å¾—çš„å¥–åŠ±\n  - `done`è¡¨ç¤ºå½“å‰å›ä¸ªæ˜¯å¦ç»“æŸ\n  - `info` è¿”å›ä¸€äº›è¯Šæ–­ä¿¡æ¯ï¼Œä¸€èˆ¬ä¸ç»å¸¸ç”¨\n- `render(self, mode=â€˜humanâ€™, close=False)`ï¼šé‡æ–°ç»˜åˆ¶ç¯å¢ƒçš„ä¸€å¸§ã€‚\n- `close(self)`ï¼šå…³é—­ç¯å¢ƒï¼Œå¹¶æ¸…é™¤å†…å­˜ã€‚\n\nä»¥ä¸Šä»£ç é¦–å…ˆå¯¼å…¥`gym`åº“ï¼Œç¬¬2è¡Œåˆ›å»º`CartPole-v01`ç¯å¢ƒï¼Œå¹¶åœ¨ç¬¬3è¡Œé‡ç½®ç¯å¢ƒçŠ¶æ€ã€‚åœ¨  for å¾ªç¯ä¸­è¿›è¡Œ*1000*ä¸ªæ—¶é—´æ­¥é•¿(*timestep)çš„æ§åˆ¶ï¼Œç¬¬5è¡Œåˆ·æ–°æ¯ä¸ªæ—¶é—´æ­¥é•¿ç¯å¢ƒç”»é¢ï¼Œç¬¬6è¡Œå¯¹å½“å‰ç¯å¢ƒçŠ¶æ€é‡‡å–ä¸€ä¸ªéšæœºåŠ¨ä½œï¼ˆ0æˆ–1ï¼‰ï¼Œæœ€åç¬¬7è¡Œå¾ªç¯ç»“æŸåå…³é—­ä»¿çœŸç¯å¢ƒã€‚\n\n### 2ã€CartPole-v1 ç¯å¢ƒä»‹ç»\n\nCartPole æ˜¯gymæä¾›çš„ä¸€ä¸ªåŸºç¡€çš„ç¯å¢ƒï¼Œå³è½¦æ†æ¸¸æˆï¼Œæ¸¸æˆé‡Œé¢æœ‰ä¸€ä¸ªå°è½¦ï¼Œä¸Šæœ‰ç«–ç€ä¸€æ ¹æ†å­ï¼Œæ¯æ¬¡é‡ç½®åçš„åˆå§‹çŠ¶æ€ä¼šæœ‰æ‰€ä¸åŒã€‚å°è½¦éœ€è¦å·¦å³ç§»åŠ¨æ¥ä¿æŒæ†å­ç«–ç›´ï¼Œä¸ºäº†ä¿è¯æ¸¸æˆç»§ç»­è¿›è¡Œéœ€è¦æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶ï¼š\n\n- æ†å­å€¾æ–œçš„è§’åº¦ $\\theta$ ä¸èƒ½å¤§äº15Â°\n- å°è½¦ç§»åŠ¨çš„ä½ç½® x éœ€ä¿æŒåœ¨ä¸€å®šèŒƒå›´ï¼ˆä¸­é—´åˆ°ä¸¤è¾¹å„2.4ä¸ªå•ä½é•¿åº¦ï¼‰\n\nå¯¹äº `CartPole-v1` ç¯å¢ƒï¼Œå…¶åŠ¨ä½œæ˜¯ä¸¤ä¸ªç¦»æ•£çš„åŠ¨ä½œå·¦ç§»ï¼ˆ0ï¼‰å’Œå³ç§»ï¼ˆ1ï¼‰ï¼Œç¯å¢ƒåŒ…æ‹¬å°è½¦ä½ç½®ã€å°è½¦é€Ÿåº¦ã€æ†å­å¤¹è§’åŠè§’å˜åŒ–ç‡å››ä¸ªå˜é‡ã€‚å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š\n\n```python\nimport gym\nenv = gym.make('CartPole-v0')\nprint(env.action_space)  # Discrete(2)\nobservation = env.reset()\nprint(observation)  # [-0.0390601  -0.04725411  0.0466889   0.02129675]\n```\n\nä¸‹é¢ä»¥`CartPole-v1` ç¯å¢ƒä¸ºä¾‹ï¼Œæ¥ä»‹ç» DQN çš„å®ç°\n\n## äºŒã€ä»£ç å®ç°\n\n### 1ã€ç»éªŒå›æ”¾æ± çš„å®ç°\n\n```python\nclass ReplayBuffer:\n    def __init__(self, capacity=10000):\n        self.capacity = capacity\n        self.buffer = []\n        self.position = 0\n\n    def push(self, state, action, reward, next_state, done):\n        if len(self.buffer) < self.capacity:\n            self.buffer.append(None)\n        self.buffer[self.position] = (state, action, reward, next_state, done)\n        self.position = int((self.position + 1) % self.capacity)\n\n    def sample(self, batch_size = args.batch_size):\n        batch = random.sample(self.buffer, batch_size)\n        state, action, reward, next_state, done = map(np.stack, zip(*batch))\n        return state, action, reward, next_state, done\n```\n\né¦–å…ˆå®šä¹‰ä¸€ä¸ªç»éªŒå›æ”¾æ± ï¼Œå…¶å®¹é‡ä¸º 10000ï¼Œå‡½æ•° `push` å°±æ˜¯æŠŠæ™ºèƒ½ä½“ä¸ç¯å¢ƒäº¤äº’çš„åˆ°çš„ä¿¡æ¯æ·»åŠ åˆ°ç»éªŒæ± ä¸­ï¼Œè¿™é‡Œä½¿ç”¨çš„å¾ªç¯é˜Ÿåˆ—çš„å®ç°æ–¹å¼ï¼Œæ³¨æ„ `position` æŒ‡é’ˆçš„è¿ç®—ã€‚å½“éœ€è¦ç”¨æ•°æ®æ¥æ›´æ–°ç®—æ³• æ—¶ï¼Œä½¿ç”¨ `sample` ä»ç»éªŒé˜Ÿåˆ—ä¸­éšæœºæŒ‘é€‰ ä¸€ä¸ª `batch_size` çš„æ•°æ®ï¼Œä½¿ç”¨ zip å‡½æ•°æŠŠæ¯ä¸€æ¡æ•°æ®æ‰“åŒ…åˆ°ä¸€èµ·ï¼š\n\n```python\nzip: a=[1,2], b=[2,3], zip(a,b) => [(1, 2), (2, 3)]\n```\n\nç„¶åå¯¹æ¯ä¸€åˆ—æ•°æ®ä½¿ç”¨ stack å‡½æ•°è½¬åŒ–ä¸ºåˆ—è¡¨åè¿”å›\n\n### 2ã€ç½‘ç»œæ„é€ \n\næœ¬ç³»åˆ—å¼ºåŒ–å­¦ä¹ çš„ä»£ç ï¼Œéƒ½æ˜¯ä½¿ç”¨çš„ `tensorlayer` ï¼Œå°±æ˜¯å¯¹ `tensorflow` åšäº†ä¸€äº›å°è£…ï¼Œä½¿å…¶æ›´åŠ æ˜“ç”¨ï¼Œé‡ç‚¹æ˜¯è¿˜**ä¸“é—¨ä¸ºå¼ºåŒ–å­¦ä¹ **å†…ç½®äº†ä¸€äº›æ¥å£ï¼Œä¸‹é¢æ˜¯[å®˜ç½‘](https://tensorlayercn.readthedocs.io/zh/latest/)ä»‹ç»ï¼š\n\n> TensorLayer æ˜¯ä¸ºç ”ç©¶äººå‘˜å’Œå·¥ç¨‹å¸ˆè®¾è®¡çš„ä¸€æ¬¾åŸºäºGoogle TensorFlowå¼€å‘çš„æ·±åº¦å­¦ä¹ ä¸å¼ºåŒ–å­¦ä¹ åº“ã€‚ å®ƒæä¾›é«˜çº§åˆ«çš„ï¼ˆHigher-Levelï¼‰æ·±åº¦å­¦ä¹ APIï¼Œè¿™æ ·ä¸ä»…å¯ä»¥åŠ å¿«ç ”ç©¶äººå‘˜çš„å®éªŒé€Ÿåº¦ï¼Œä¹Ÿèƒ½å¤Ÿå‡å°‘å·¥ç¨‹å¸ˆåœ¨å®é™…å¼€å‘å½“ä¸­çš„é‡å¤å·¥ä½œã€‚ TensorLayeréå¸¸æ˜“äºä¿®æ”¹å’Œæ‰©å±•ï¼Œè¿™ä½¿å®ƒå¯ä»¥åŒæ—¶ç”¨äºæœºå™¨å­¦ä¹ çš„ç ”ç©¶ä¸åº”ç”¨ã€‚\n\nå®šä¹‰ç½‘ç»œæ¨¡å‹ï¼š\n\n```python\ndef create_model(input_state_shape):\n    input_layer = tl.layers.Input(input_state_shape)\n    layer_1 = tl.layers.Dense(n_units=32, act=tf.nn.relu)(input_layer)\n    layer_2 = tl.layers.Dense(n_units=16, act=tf.nn.relu)(layer_1)\n    output_layer = tl.layers.Dense(n_units=self.action_dim)(layer_2)\n    return tl.models.Model(inputs=input_layer, outputs=output_layer)\n\nself.model = create_model([None, self.state_dim])\nself.target_model = create_model([None, self.state_dim])\nself.model.train()\nself.target_model.eval()\n```\n\nå¯ä»¥çœ‹åˆ°`tensorlayer` ä½¿ç”¨èµ·æ¥ä¸`tensorflow` å¤§åŒå°å¼‚ï¼Œåªè¦æœ‰`tensorflow`åŸºç¡€ä¸€çœ¼å°±èƒ½æ˜ç™½ï¼Œåœ¨ä¸Šé¢ä»£ç ä¸­æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå‡½æ•°ç”¨æ¥ç”Ÿæˆç½‘ç»œæ¨¡å‹ã€‚ç„¶ååˆ›å»ºä¸€ä¸ªå½“å‰ç½‘ç»œ`model`å’Œä¸€ä¸ªç›®æ ‡ç½‘ç»œ`target_model` ï¼Œæˆ‘ä»¬çŸ¥é“DQNä¸­çš„ç›®æ ‡ç½‘ç»œæ˜¯èµ·åˆ°ä¸€ä¸ªâ€œé¶å­â€çš„ä½œç”¨ï¼Œç”¨æ¥è¯„ä¼°å½“å‰çš„ target å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠå®ƒè®¾ç½®ä¸ºè¯„ä¼°æ¨¡å¼ï¼Œè°ƒç”¨ `eval()` å‡½æ•°å³å¯ã€‚è€Œ `model` ç½‘ç»œæ˜¯æˆ‘ä»¬è¦è®­ç»ƒçš„ç½‘ç»œï¼Œè°ƒç”¨å‡½æ•° `train()` è®¾ç½®ä¸ºè®­ç»ƒæ¨¡å¼ã€‚\n\n### 3ã€ç®—æ³•æ§åˆ¶æµç¨‹\n\n```python\nfor episode in range(train_episodes):\n    total_reward, done = 0, False\n    while not done:\n        action = self.choose_action(state)\n        next_state, reward, done, _ = self.env.step(action)\n        self.buffer.push(state, action, reward, next_state, done)\n        total_reward += reward\n        state = next_state\n        # self.render()\n    if len(self.buffer.buffer) > args.batch_size:\n        self.replay()\n        self.target_update()\n```\n\nå…³äºä¸ç¯å¢ƒäº¤äº’è¿‡ç¨‹åœ¨ä¸Šé¢å·²ç»ä»‹ç»è¿‡äº†ï¼Œè¿™é‡Œé‡ç‚¹çœ‹ ç¬¬ 10 è¡Œçš„ if è¯­å¥ï¼Œå½“ç»éªŒæ± çš„é•¿åº¦å¤§äºä¸€ä¸ª`batch_size` æ—¶ï¼Œå°±å¼€å§‹è°ƒç”¨`replay()` å‡½æ•°æ¥æ›´æ–°ç½‘ç»œ `model` çš„ç½‘ç»œå‚æ•°ï¼Œç„¶åè°ƒç”¨`target_update()` å‡½æ•°æŠŠ `model` ç½‘ç»œå‚æ•°å¤åˆ¶ç»™ `target_model` ç½‘ç»œã€‚\n\n### 4ã€ç½‘ç»œå‚æ•°æ›´æ–°\n\n```python\ndef replay(self):\n    for _ in range(10):\n        states, actions, rewards, next_states, done = self.buffer.sample()\n        # compute the target value for the sample tuple\n        # target [batch_size, action_dim]\n        # target represents the current fitting level\n        target = self.target_model(states).numpy()\n        next_q_value = tf.reduce_max(self.target_model(next_states), axis=1)\n        target_q = rewards + (1 - done) * args.gamma * next_q_value\n        target[range(args.batch_size), actions] = target_q\n\n        with tf.GradientTape() as tape:\n            q_pred = self.model(states)\n            loss = tf.losses.mean_squared_error(target, q_pred)\n        grads = tape.gradient(loss, self.model.trainable_weights)\n        self.model_optim.apply_gradients(zip(grads, self.model.trainable_weights))\n```\n\nè¿™éƒ¨åˆ†åº”è¯¥å°±æ˜¯ DQN çš„æ ¸å¿ƒä»£ç äº†ï¼Œåœ¨`replay()` å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å¾ªç¯æ›´æ–°æ›´æ–°å½“å‰ç½‘ç»œåæ¬¡ï¼Œç›®çš„å°±æ˜¯æ”¹å˜ä¸¤ä¸ªç½‘ç»œçš„æ›´æ–°é¢‘ç‡ï¼Œæœ‰åˆ©äºç½‘ç»œæ”¶æ•›ã€‚\n\nå…·ä½“çš„æ›´æ–°éƒ¨åˆ†ï¼šæˆ‘ä»¬çŸ¥é“ï¼ŒDQNå°±æ˜¯æŠŠQ-Learningä¸­çš„Qè¡¨æ ¼æ¢æˆäº†ç¥ç»ç½‘ç»œï¼Œä¸¤è€…ä¹‹é—´æœ‰å¾ˆå¤š ç›¸ä¼¼ä¹‹å¤„ï¼Œæˆ‘ä»¬å¯ä»¥ç±»æ¯”Q-Learning çš„æ›´æ–°æ–¹å¼ã€‚å¯¹äºQè¡¨æ ¼å½¢å¼ï¼Œæˆ‘ä»¬è·å–æŸä¸€ä¸ªçŠ¶æ€çš„åŠ¨ä½œä»·å€¼Qæ˜¯ç›´æ¥é€šè¿‡ä¸‹æ ‡å¾—åˆ°çš„ï¼Œé‚£ä¹ˆåœ¨ç¥ç»ç½‘ç»œä¸­å°±éœ€è¦æŠŠçŠ¶æ€è¾“å…¥ç¥ç»ç½‘ç»œï¼Œç»è¿‡å‰å‘è®¡ç®—å¾—åˆ°ã€‚\n$$\n\\Delta w = \\alpha (r + \\gamma\\;max_{a'}\\; \\hat{Q}(s', a', w) - \\hat{Q}{(s, a, w)})\\cdot \\nabla_w\\hat{Q}{(s, a, w)}\n$$\nç¬¬ä¸‰è¡Œé¦–å…ˆè·å–ä¸€ä¸ª`batch_size`çš„æ•°æ®ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸º `sample` ã€‚ç¬¬7è¡Œæˆ‘ä»¬é¦–å…ˆè·å–å½“å‰çš„åŠ¨ä½œä»·å€¼ï¼Œtarget è¡¨ç¤ºçš„æ˜¯æ ¹æ®å½“å‰çš„ç½‘ç»œå‚æ•°è®¡ç®—å¾—åˆ°çš„åŠ¨ä½œä»·å€¼ã€‚ç„¶åç¬¬8è¡Œå…ˆè·å–å½“å‰ç½‘ç»œå‚æ•°ä¸‹ çš„ä¸‹ä¸€ä¸ªçŠ¶æ€çš„æ‰€æœ‰åŠ¨ä½œï¼Œç„¶åä½¿ç”¨`reduce_max()` å‡½æ•°æ‰¾å‡ºæœ€å¤§çš„åŠ¨ä½œä»·å€¼ã€‚ç„¶åç¬¬9è¡Œå’Œç¬¬10è¡Œåˆ©ç”¨ä¸‹ä¸€ä¸ªçŠ¶æ€æœ€å¤§çš„åŠ¨ä½œä»·å€¼æ¥è®¡ç®—å‡º `target_q` ï¼Œä¹Ÿå°±æ˜¯ $r + \\gamma\\;max_{a'}\\; \\hat{Q}(s', a', w)$ éƒ¨åˆ†ï¼Œç„¶åæ›´æ–°`target` ã€‚æ³¨æ„ä¸Šé¢æˆ‘ä»¬è®¡ç®—targetæ—¶ä¸€ç›´åœ¨ä½¿ç”¨ `target_model` ç½‘ç»œï¼Œtargetç½‘ç»œåªæœ‰åœ¨è¯„ä¼°ç½‘ç»œçŠ¶æ€æ—¶æ‰ä½¿ç”¨ã€‚\n\næ¥ç€æˆ‘ä»¬ä½¿ç”¨ `q_pred = self.model(states)` ç½‘ç»œè·å–å½“å‰ ç½‘ç»œçš„çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯ å…¬å¼ä¸­çš„ $\\hat{Q}{(s, a, w)}$ ï¼Œåˆ©ç”¨MSEå‡½æ•°è®¡ç®—å…¶æŸå¤±å‡½æ•°ï¼Œæœ€åæ›´æ–° `model` ç½‘ç»œã€‚\n\nå®Œæ•´ä»£ç è¯·å‚è€ƒ[å¼ºåŒ–å­¦ä¹ â€”â€”DQNä»£ç åœ°å€](https://github.com/NovemberChopin/RL_Tutorial/blob/master/code/DQN.py) è¿˜è¯·ç»™ä¸ª `star` ï¼Œè°¢è°¢å„ä½äº†\n\n## ä¸‰ã€DQN å°ç»“\n\nè™½ç„¶ DQN æå‡ºçš„è¿™ä¸¤ä¸ªè§£å†³æ–¹æ¡ˆä¸é”™ï¼Œä½†æ˜¯ä»ç„¶è¿˜æœ‰é—®é¢˜æ²¡æœ‰è§£å†³ï¼Œæ¯”å¦‚ï¼š\n\n-  ç›®æ ‡ Q å€¼ï¼ˆQ Target ï¼‰è®¡ç®—æ˜¯å¦å‡†ç¡®ï¼Ÿå…¨éƒ¨é€šè¿‡ $max\\;Q$ æ¥è®¡ç®—æœ‰æ²¡æœ‰é—®é¢˜ï¼Ÿ\n-  Q å€¼ä»£è¡¨åŠ¨ä½œä»·å€¼ï¼Œé‚£ä¹ˆå•çº¯çš„åŠ¨ä½œä»·å€¼è¯„ä¼°ä¼šä¸ä¼šä¸å‡†ç¡®ï¼Ÿ\n\nå¯¹åº”ç¬¬ä¸€ä¸ªé—®é¢˜çš„æ”¹è¿›å°±æ˜¯ Double DQN ï¼Œç¬¬äºŒä¸ªé—®é¢˜çš„æ”¹è¿›æ˜¯ Dueling DQNã€‚ä»–ä»¬éƒ½å±ä¸DQNçš„æ”¹è¿›ç‰ˆï¼Œæˆ‘ä»¬ä¸‹ç¯‡æ–‡ç« ä»‹ç»ã€‚", "user_name": "ç›çš„ç”œ", "description": "ä¿®ä¹‹äºèº«ï¼Œå…¶å¾·ä¹ƒçœŸ", "got_view_count": 3224, "category_name": "äººå·¥æ™ºèƒ½", "ctime": 1500876664}
{"tag_name": "Vue.js", "concern_user_count": 263220, "user_id": "1521379822544157", "title": "vue3.x reactiveã€effectã€computedã€watchä¾èµ–å…³ç³»åŠå®ç°åŸç†", "mark_content": "é¦–å…ˆæ¥äº†è§£2ä¸ªå…¨å±€å˜é‡å’Œ1ä¸ªå˜é‡ã€‚\n\n- **targetMap [new WeakMap]** : åœ¨track()ã€trigger()çš„æ—¶å€™ï¼Œå†²å½“ä¸­é—´å…³è”å®¹å™¨\n- **effectStack [Array]** : é¡¾åæ€ä¹‰å°±æ˜¯å­˜æ”¾effectçš„å®¹å™¨\n- **activeEffect** : åœ¨track()çš„æ—¶å€™ä½œä¸ºTargetçš„æ”¶é›†å¯¹è±¡,å¯ä»¥å½“ä½œä¸€ä¸ªä¸´æ—¶ä½œç”¨çš„å˜é‡\n\n## 1ã€reactive(target)\n\nreactiveå®ç°åŸç†ï¼Œä¸åºŸè¯(bb)ç›´æ¥ä¸Šå›¾\n![reactiveå®ç°åŸç†](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8a7c52ce676a433287f6524e44ae2884~tplv-k3u1fbpfcp-zoom-1.image)\n\n- åŸç†å¤§è‡´å°±æ˜¯é€šè¿‡ [new Proxy()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy) é‡å†™getterã€setteræ–¹æ³•æ¥å®ç°è‡ªå·±éœ€è¦çš„é€»è¾‘\n- é‡å†™getterå®ç°trackæ”¶é›†effect\n- é‡å†™setterç°å®triggerè§¦å‘effect\n\n## 2ã€effect(fn,options)\n\n![effectå®ç°åŸç†](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d9ec21bfa0594376851cddbb976f754f~tplv-k3u1fbpfcp-zoom-1.image)\n\neffectæ˜¯ä½œä¸ºtrack()è¿‡ç¨‹ä¸­æœ€é‡è¦çš„ç¯èŠ‚ï¼Œæ˜¯å”¯ä¸€æä¾›activeEffectçš„åœ°æ–¹\n\n## 3ã€computed(getterOrOptions)\n\n![computedå®ç°åŸç†](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/230c39f0175b4c778ce48609085c665d~tplv-k3u1fbpfcp-zoom-1.image)\n\né€šè¿‡ä¸Šé¢æµç¨‹å›¾ä¸éš¾çœ‹å‡ºcomputedçš„å®ç°æœ¬è´¨æ˜¯effect.\n- 1.é€šè¿‡å¤„ç†getterOrOptionså‚æ•°å¾—åˆ°ä¸€ä¸ªåŒ¿åå‡½æ•° getter\n- 2.æŠŠgetterä½œä¸º **effect()** å‚æ•°å¾—åˆ°ä¸€ä¸ªå»¶è¿Ÿæ‰§è¡Œçš„runnerå‡½æ•°\n- 3.æŠŠrunnerå°è£…æˆä¸€ä¸ª **ref** å¯¹è±¡å¹¶ä¸”è¿”å›ã€‚\n\n## 4ã€watch(source,cb,options)\n\n![watchå®ç°åŸç†](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f32f8c07a03c4bf6b0b34b6ff9313363~tplv-k3u1fbpfcp-zoom-1.image)\n\nç›¸æ¯” **computed** ï¼Œwatchçš„å®ç°é€»è¾‘ç›¸å¯¹å¤æ‚ä¸€äº›ã€‚è¿™é‡Œåªè®²è§£å¤§è‡´å®ç°åŸç†ã€‚é€šè¿‡åˆ†ææºç å‘ç°ï¼Œwatchçš„å¤§è‡´åŸç†ä¹Ÿæ˜¯å»ºç«‹åœ¨ **effect** çš„å®ç°ä¸Šã€‚\n\n- 1.é¦–å…ˆä¸€äº›åˆ—å¤„ç†æŠŠsource å°è£…æˆä¸º effectçš„fnå‚æ•°ï¼Œä¾‹å¦‚ï¼šconst getter = ()=> source;\n- 2.é€šè¿‡effectå¾—åˆ°ä¸€ä¸ªå»¶è¿Ÿçš„runnerå‡½æ•°\n- 3.é¦–æ¬¡æ‰§è¡Œrunnerå®Œæˆtrack()\n- 4.è¿”å›ä¸€ä¸ªåœæ­¢ç›‘å¬çš„åŒ¿åå‡½æ•°\n\n\n## 5ã€ç®€å•å®ç°\n**é‡ç‚¹è¯´æ˜ï¼š** ä»¥ä¸‹ä»£ç ( *çœç•¥äº†å¾ˆå¤šé€»è¾‘* )çš„å®ç°ä»…ä¾›åŸç†ç†è§£ï¼Œå…·ä½“å®ç°è¯·ç§»æ­¥[vue-next](https://github.com/vuejs/vue-next)æºç ã€‚\n\n### 5.1ã€reactive\n\né€šè¿‡1ã€reactive(target)çš„åˆ†æå’Œç†è§£ï¼Œreactiveå¤§è‡´å®ç°å°±æ˜¯è¿™æ ·ï¼š\n```javascript\nfunction reactive(obj) {\n    return new Proxy(obj, {\n        get: function(target, key, receiver) {\n        \t// getter\n            track(target, key); // æ”¶é›†effectå‡½æ•°\n            return Reflect.get(target, key, receiver);\n        },\n        set: function(target, key, value, receiver) {\n        \t// setter\n            let oldValue = target[key]; // åŸå§‹å€¼\n            if (oldValue === value) {\n                return;\n            }\n            let res = Reflect.set(target, key, value, receiver);\n            trigger(target, key); // è§¦å‘effectå‡½æ•°\n            return res;\n        },\n    });\n}\n```\nä¸äº†è§£[Reflect](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect)çš„åŒå­¦è‡ªè¡Œç™¾åº¦ï¼Œè¿™é‡Œä¸è®²è¿°ã€‚æ¥ä¸‹æ¥å®ç°trackã€triggerå‡½æ•°\n```javascript\n//...\nconst targetMap = new WeakMap();\nconst effectStack = [];\nlet activeEffect = null;\n\nfunction track(target, key) {\n    if (!activeEffect) {\n        return;\n    }\n\n    // æ”¶é›†\n    let depsMap = targetMap.get(target);\n    if (!depsMap) {\n        targetMap.set(target, (depsMap = new Map()));\n    }\n    let dep = depsMap.get(key);\n    if (!dep) {\n        depsMap.set(key, (dep = new Set()));\n    }\n    if (!dep.has(activeEffect)) {\n        dep.add(activeEffect);\n    }\n}\n\nfunction trigger(target, key) {\n    // è§¦å‘\n    const depsMap = targetMap.get(target);\n    if (!depsMap) {\n        return;\n    }\n\n    let dep = depsMap.get(key);\n\n    let effects = new Set();\n    dep && dep.forEach((effect) => effects.add(effect));\n\n    // æ‰§è¡Œ\n    effects.forEach((effect) => {\n        if (effect.options.scheduler) {\n            effect.options.scheduler(effect);\n        } else {\n            effect();\n        }\n    });\n}\n```\nä¸Šé¢å°±æ˜¯æ•´ä¸ªreactiveå®ç°çš„å¤§è‡´ä»£ç ã€‚è™½ç„¶ä¸å¤Ÿå®Œæ•´ï¼Œä½†æ˜¯å¤Ÿç†è§£äº†ã€‚æƒ³è¦æ·±å…¥äº†è§£çš„åŒå­¦å¯ä»¥ç›´æ¥ç§»æ­¥[vue-next](https://github.com/vuejs/vue-next)æºç ã€‚\n\n### 5.2ã€effect\n\næ¥ä¸‹æ¥å°±æ˜¯ **effect(fn,options)** çš„å®ç°ã€‚ä»£ç å¦‚ä¸‹ï¼š\n```javascript\nconst effectStack = [];\nlet activeEffect = null;\n//...\nfunction effect(fn, options = {}) {\n    let effect = createEffect(fn, options);\n    if (!options.lazy) {\n        effect();\n    }\n    return effect;\n}\n\nlet uid = 0;\nfunction createEffect(fn, options) {\n    const effect = () => {\n        if (!effectStack.includes(effect)) {\n            try {\n                effectStack.push(effect);\n                activeEffect = effect;\n                // é»˜è®¤æ‰§è¡Œæ”¶é›†\n                return fn();\n            } finally {\n                // å¤„ç†å®Œæˆ\n                effectStack.pop();\n                activeEffect = effectStack[effectStack.length - 1];\n            }\n        }\n    };\n    effect.raw = fn;\n    effect.id = uid++;\n    effect.options = options;\n    //...\n    return effect;\n}\n```\n\né€šè¿‡ **effect(fn,options)** å¯ä»¥åˆ†æå‡ºeffectçš„æ‰§è¡Œè¿”å›çš„æ˜¯fn()çš„ç»“æœã€‚å¦‚æœå§reactiveã€effectæ”¾åœ¨ä¸€èµ·ä½ å›å‘ç°ä»–ä»¬çš„ä¾èµ–å…³ç³»ã€‚Proxy é€šè¿‡getteræ”¶é›†activeEffectã€setterè§¦å‘activeEffectã€‚çœ‹ä¼¼ä¸¤ä¸ªå®Œæˆç‹¬ç«‹çš„æ–¹æ³•ï¼Œä¸­é—´é€šè¿‡å…¨å±€å˜é‡activeEffectè”ç³»åœ¨ä¸€èµ·ã€‚\n\n\n### 5.3ã€computed\nreactiveå’Œeffectçš„å®ç°ä¹‹åcomputedå°±ç›¸å¯¹ç®€å•å¤šäº†ã€‚computedçš„å®ç°ä»£ç ï¼š\n\n```javascript\n//...\nfunction computed(fn) {\n    let runner = effect(fn, {\n        lazy: true,\n    });\n\n    return {\n        get value() {\n            // æ‰§è¡Œæ”¶é›†\n            return runner();\n        },\n        set value(value) {},\n    };\n}\n\n// ä½¿ç”¨\nlet data = reactive({ count : 0 })\n\nlet text = computed(() => {\n    return `count:${data.count}`;\n});\n\nconsole.log(text.value) // count:0\n```\n\nå¯¹ï¼Œæ²¡é”™ã€‚computedçš„å®ç°å°±æ˜¯è¿™ä¹ˆç®€å•ã€‚ç›¸æ¯”computedã€watchçš„å®ç°å°±å¤æ‚å¤šäº†ã€‚\n\n### 5.3ã€watch\n\n```javascript\n// è¿™é‡Œåªæ˜¯ç®€å•çš„å®ç°watchä»¥ä¾›ç†è§£\n\nfunction watch(source, cb) {\n    let getter = () => {};\n    if (isFunction(source)) {\n        getter = source;\n    }\n    // æ”¶é›†ä¿¡æ¯\n    let runner = effect(getter, {\n        lazy: true,\n        scheduler: () => {\n            // æ‰§è¡Œå›è°ƒ\n            let value = runner();\n            if (value !== oldValue) {\n                cb(oldValue, value);\n            }\n            oldValue = value;\n        },\n    });\n    // ç¬¬ä¸€æ¬¡æ‰§è¡Œæ”¶é›†\n    let oldValue = runner();\n    //åœæ­¢ç›‘å¬\n    return ()=>{\n    \tstop(runner)\n        //...\n    }\n}\n\n// ä½¿ç”¨\nlet stopWatcher = watch(\n    () => data.count,\n    (oldValue, value) => {\n        // æ‰§è¡Œ\n        console.log(\"========watch========\", oldValue, value);\n    }\n);\n\n// å¯ä»¥åœæ­¢watch\n// stopWatcher()\n\ndata.count = 100;\n// ========watch======== 0 100\n\n```\n### 5.4ã€å®Œæ•´çš„ä»£ç \n\n```javascript\n// reactive\nfunction reactive(obj) {\n    return new Proxy(obj, {\n        get: function(target, key, receiver) {\n            track(target, key);\n            // getter\n            return Reflect.get(target, key, receiver);\n        },\n        set: function(target, key, value, receiver) {\n            let oldValue = target[key]; // åŸå§‹å€¼\n            if (oldValue === value) {\n                return;\n            }\n\n            // setter\n            let res = Reflect.set(target, key, value, receiver);\n            trigger(target, key);\n            return res;\n        },\n    });\n}\n\nconst targetMap = new WeakMap();\nconst effectStack = [];\nlet activeEffect = null;\n// track\nfunction track(target, key) {\n    if (!activeEffect) {\n        return;\n    }\n\n    // æ”¶é›†\n    let depsMap = targetMap.get(target);\n    if (!depsMap) {\n        targetMap.set(target, (depsMap = new Map()));\n    }\n    let dep = depsMap.get(key);\n    if (!dep) {\n        depsMap.set(key, (dep = new Set()));\n    }\n    if (!dep.has(activeEffect)) {\n        dep.add(activeEffect);\n    }\n}\n// trigger\nfunction trigger(target, key) {\n    // è§¦å‘\n    const depsMap = targetMap.get(target);\n    if (!depsMap) {\n        return;\n    }\n\n    let dep = depsMap.get(key);\n\n    let effects = new Set();\n    dep && dep.forEach((effect) => effects.add(effect));\n\n    // æ‰§è¡Œ\n    effects.forEach((effect) => {\n        if (effect.options.scheduler) {\n            effect.options.scheduler(effect);\n        } else {\n            effect();\n        }\n    });\n}\n// effect\nfunction effect(fn, options = {}) {\n    let effect = createEffect(fn, options);\n    if (!options.lazy) {\n        // æ‰§è¡Œæ‰‹æœº\n        effect();\n    }\n\n    return effect;\n}\n\nlet uid = 0;\nfunction createEffect(fn, options) {\n    const effect = () => {\n        if (!effectStack.includes(effect)) {\n            try {\n                effectStack.push(effect);\n                activeEffect = effect;\n                // é¦–æ¬¡æ‰§è¡Œæ”¶é›†\n                return fn();\n            } finally {\n                // å¤„ç†å®Œæˆ\n                effectStack.pop();\n                activeEffect = effectStack[effectStack.length - 1];\n            }\n        }\n    };\n    effect.raw = fn;\n    effect.id = uid++;\n    effect.options = options;\n    return effect;\n}\n// computed\nfunction computed(fn) {\n    let runner = effect(fn, {\n        lazy: true,\n    });\n\n    return {\n        get value() {\n            // æ‰§è¡Œæ”¶é›†\n            return runner();\n        },\n        set value(value) {},\n    };\n}\n// watch\nfunction watch(source, cb) {\n    let getter = () => {};\n    if (typeof source === \"function\") {\n        getter = source;\n    }\n    // æ”¶é›†ä¿¡æ¯\n    let runner = effect(getter, {\n        lazy: true,\n        scheduler: () => {\n            // æ‰§è¡Œå›è°ƒ\n            let value = runner();\n            if (value !== oldValue) {\n                cb(oldValue, value);\n            }\n            oldValue = value\n        },\n    });\n    // ç¬¬ä¸€æ¬¡æ‰§è¡Œæ”¶é›†\n    let oldValue = runner();\n}\n```\n\n## 6ã€æ€»ç»“\n\né€šè¿‡ç®€å•çš„å®ç°å¯ä»¥æ€»ç»“å‡ºä¸€ä¸‹å‡ ç‚¹:\n- vueæ ¸å¿ƒæ˜¯é‡å†™new Proxy()çš„getterã€setteræ¥å®ç°æ•°æ®é©±åŠ¨çš„æ ¸å¿ƒ\n- computedå’Œwatchçš„å®ç°å¯ä»¥çœ‹å‡ºå®é™…åŸç†éƒ½ä¾èµ–effect()å·¥å‚\n- activeEffectå¯ä»¥çœ‹ä½œæ˜¯new Proxy()å’Œeffec()çš„äº¤é€šæ¢çº½\n\n\n**å†æ¬¡å£°æ˜**ï¼šä¸Šè¿°å®ç°ä»£ç ä»…ä¾›ç†è§£å®ç°åŸç†ï¼Œå…·ä½“è¯¦ç»†å®ç°è¯·ç§»æ­¥[vue-next](https://github.com/vuejs/vue-next)æºç ã€‚\n\n\n\nèŒæ–°ï¼Œå¦‚æœ‰é”™è¯¯æ¬¢è¿æŒ‡æ­£ (à¸‡ â€¢_â€¢)à¸‡\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n", "user_name": "__æ­¤é—´å°‘å¹´", "description": "", "got_view_count": 114, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "å‰ç«¯æ¡†æ¶", "concern_user_count": 218926, "user_id": "1398234520230989", "title": "å‰ç«¯é¡µé¢å¯è§†åŒ–æ­å»ºå·¥å…·ä¸šç•Œçš„è½®å­", "mark_content": "<section id=\"nice\" data-tool=\"mdniceç¼–è¾‘å™¨\" data-website=\"https://www.mdnice.com\" style=\"padding: 0 10px; line-height: 1.6; word-spacing: 0px; word-break: break-word; word-wrap: break-word; text-align: left; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, 'PingFang SC', Cambria, Cochin, Georgia, Times, 'Times New Roman', serif; font-size: 15px; letter-spacing: 0.05em; color: #595959;\"><h1 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; font-size: 24px; margin: 1.2em 0 1em; padding: 0; font-weight: bold; color: #35b378;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">é¡µé¢å¯è§†åŒ–æ­å»ºå·¥å…·ä¸šç•Œçš„è½®å­</span><span class=\"suffix\"></span></h1>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 1em 4px;\">æ— è®ºå¤§å…¬å¸è¿˜æ˜¯å°å…¬å¸ï¼Œæˆ‘ä»¬å¼€å‘å‰ç«¯å·¥ç¨‹æ—¶å€™ï¼Œé¡¹ç›®å·¥ç¨‹åˆå¾ˆå¤šç±»ä¼¼çš„åŠŸèƒ½æˆ–è€…é¡µé¢ï¼Œå¼€å‘ç»å¸¸æ˜¯åŠ ç­åŠ ç‚¹æ¬ç –å»åšä¸€äº›æ— æˆé•¿åå¤æ“ä½œçš„å·¥ä½œï¼Œçœ‹é”®ç›˜ä¸Š Ctrl é”®å·²ç»è¢«ç£¨æ‰äº†æ¼†ï¼ŒC å’Œ V ä¹Ÿé©¬ä¸Šç£¨ç™½äº†ï¼Œé‚£å¯¹äºå¼€å‘å¦‚ä½•æŠŠè¿™äº›é‡å¤çš„å·¥ä½œç”¨æœºå™¨å»è§£å†³ï¼Ÿåœ¨å‰ç«¯èµ„æºç´§ç¼ºçš„æƒ…å†µä¸‹ï¼Œæ˜¯å¦å¯ç›´æ¥æœ‰å·¥å…·ç›´æ¥å°±å¯ä»¥æ­å»ºå‡ºæˆ‘æƒ³è¦çš„å‰ç«¯é¡µé¢ï¼Ÿäºæ˜¯ä¸šç•Œçš„é¡µé¢å¯è§†åŒ–æ­å»ºå·¥å…·å°±å‡ºç°äº†ï¼Œæœ¬æ–‡ä¼šä»‹ç»ç›®å‰æœ€æµè¡Œçš„é¡µé¢å¯è§†åŒ–æ­å»ºå·¥å…·ï¼Œä¹Ÿä¼šæä¾›ä¸€äº›ä¸šç•Œå¼€æºçš„å¯è§†åŒ–æ­å»ºé¡¹ç›®ä¾›å¤§å®¶å‚è€ƒï¼ˆCopyï¼‰ã€‚</p>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; bmin-height: 32px; line-height: 32px; border-bottom: solid 1px #000000; color: #35b378; display: inline-block; border-bottom-width: 0px; border-bottom-style: solid; border-color: #35b378; padding-top: 5px; padding-right: 0.5em; padding-left: 0.5em; font-size: 23px; margin: 1em 0 0rem 0; padding: 0.5em 0; text-align: leftt; font-weight: bold;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">1 é¡µé¢å¯è§†åŒ–æ­å»º ç®€ä»‹</span><span class=\"suffix\"></span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 1em 4px;\"><strong style=\"font-weight: bold; color: #35b378;\">ç¼–ç¨‹å¼€å‘é¡µé¢</strong>ï¼šåŠ¨æ€é€»è¾‘é¡µé¢åˆ†è§£ä¸º HTML Tree, Data å’Œ Dynamic Logic. å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆå¼€å‘å‰ç«¯é¡µé¢çš„è¿‡ç¨‹, æœ¬è´¨ä¸Šæ˜¯ç”¨ç¼–ç¨‹å·¥å…·(IDE)å¯¹é¡µé¢çš„ HTML Tree, Data å’Œ Dynamic Logic è¿›è¡Œå¢åˆ å’Œä¿®æ”¹.</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 1em 4px;\"><strong style=\"font-weight: bold; color: #35b378;\">é¡µé¢å¯è§†åŒ–æ­å»º</strong>ï¼šæ˜¯ç”¨å¯è§†åŒ–äº¤äº’çš„æ–¹å¼å¯¹é¡µé¢çš„ HTML Tree, Data å’Œ Dynamic Logic è¿›è¡Œå¢åˆ å’Œä¿®æ”¹, ä»è€Œå®ç°é¡µé¢çš„ç”Ÿæˆ. é¡µé¢å¯è§†åŒ–æ­å»ºå·¥å…·æ˜¯å®ç°é¡µé¢å¯è§†åŒ–ç¼–è¾‘çš„è½¯ä»¶å·¥å…·</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 1em 4px;\"><strong style=\"font-weight: bold; color: #35b378;\">ç›®çš„</strong>ï¼šä»»ä½•å·¥å…·çš„å­˜åœ¨éƒ½æ˜¯æ›´é«˜æ•ˆåœ°è§£å†³é—®é¢˜. é¡µé¢å¯è§†åŒ–æ­å»ºå·¥å…·, ç”¨äºè§£å†³é¡µé¢ç”Ÿæˆçš„æ•ˆç‡é—®é¢˜.\nå¯èƒ½å‰ç«¯å·¥ç¨‹å¸ˆä¼šè§‰å¾—æœ€æœ‰æ•ˆç‡çš„é¡µé¢ç”Ÿæˆæ–¹å¼æ˜¯æ‰“ä»£ç , ä½†æœ‰æ­å»ºé¡µé¢éœ€æ±‚çš„ä¸åªæ˜¯å‰ç«¯å·¥ç¨‹å¸ˆ. è€Œå¯è§†åŒ–é¡µé¢æ­å»ºå·¥å…·, æ°æ°æ˜¯é¢å‘\"å°±ç¼ºä¸€ä¸ªå‰ç«¯å·¥ç¨‹å¸ˆ\"çš„äººå‘˜, ç”¨äºæå‡ä»–ä»¬ç”Ÿæˆé¡µé¢çš„æ•ˆç‡.</p>\n<section class=\"table-container\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"overflow-x: auto;\"><table style=\"display: table; text-align: left;\">\n<thead>\n<tr style=\"border: 0; border-top: 1px solid #ccc; background-color: white;\">\n<th style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; font-weight: bold; background-color: #f0f0f0; min-width: 85px;\">å·®å¼‚ç‚¹</th>\n<th style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; font-weight: bold; background-color: #f0f0f0; min-width: 85px;\">ç¼–ç¨‹å¼€å‘é¡µé¢</th>\n<th style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; font-weight: bold; background-color: #f0f0f0; min-width: 85px;\">å¯è§†åŒ–æ­å»ºé¡µé¢</th>\n</tr>\n</thead>\n<tbody style=\"border: 0;\">\n<tr style=\"border: 0; border-top: 1px solid #ccc; background-color: white;\">\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">æŠ€èƒ½è¦æ±‚</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">éœ€è¦ç¼–ç¨‹åŸºç¡€</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">å¯ä»¥æ²¡æœ‰ç¼–ç¨‹åŸºç¡€</td>\n</tr>\n<tr style=\"border: 0; border-top: 1px solid #ccc; background-color: #F8F8F8;\">\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">æ“ä½œæ–¹å¼</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">åœ¨ä»£ç ç¼–è¾‘å™¨ä¸­ç¼–å†™ä»£ç </td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">åœ¨å¯è§†åŒ–æ­å»ºå·¥å…·ä¸­æ‹–æ‹‰/å¡«è¡¨/ç¼–å†™ä»£ç </td>\n</tr>\n</tbody>\n</table>\n</section><h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; bmin-height: 32px; line-height: 32px; border-bottom: solid 1px #000000; color: #35b378; display: inline-block; border-bottom-width: 0px; border-bottom-style: solid; border-color: #35b378; padding-top: 5px; padding-right: 0.5em; padding-left: 0.5em; font-size: 23px; margin: 1em 0 0rem 0; padding: 0.5em 0; text-align: leftt; font-weight: bold;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">2 ä¸šç•Œè°ƒç ”ï¼ˆ20+ï¼‰</span><span class=\"suffix\"></span></h2>\n<section class=\"table-container\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"overflow-x: auto;\"><table style=\"display: table; text-align: left;\">\n<thead>\n<tr style=\"border: 0; border-top: 1px solid #ccc; background-color: white;\">\n<th style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; font-weight: bold; background-color: #f0f0f0; min-width: 85px;\">é¡¹ç›®åç§°</th>\n<th style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; font-weight: bold; background-color: #f0f0f0; min-width: 85px;\">é¡¹ç›®ç®€ä»‹</th>\n<th style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; font-weight: bold; background-color: #f0f0f0; min-width: 85px;\">èƒ½è§£å†³ä»€ä¹ˆ</th>\n</tr>\n</thead>\n<tbody style=\"border: 0;\">\n<tr style=\"border: 0; border-top: 1px solid #ccc; background-color: white;\">\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\"><a href=\"https://github.com/baidu/amis\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">ç™¾åº¦amis</a>ï¼ˆå¼€æºï¼‰</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">å‰ç«¯ä½ä»£ç æ¡†æ¶ï¼Œé€šè¿‡ JSON é…ç½®å°±èƒ½ç”Ÿæˆå„ç§åå°é¡µé¢ï¼Œæå¤§å‡å°‘å¼€å‘æˆæœ¬ï¼Œç”šè‡³å¯ä»¥ä¸éœ€è¦äº†è§£å‰ç«¯</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">ä¸éœ€è¦æ‡‚å‰ç«¯å°±èƒ½åšå‡ºä¸“ä¸šä¸”å¤æ‚çš„åå°ç•Œé¢ï¼Œä¸å—å‰ç«¯æŠ€æœ¯æ›´æ–°çš„å½±å“ï¼Œå¯ä»¥å®Œå…¨ä½¿ç”¨å¯è§†åŒ–é¡µé¢ç¼–è¾‘å™¨æ¥åˆ¶ä½œé¡µé¢</td>\n</tr>\n<tr style=\"border: 0; border-top: 1px solid #ccc; background-color: #F8F8F8;\">\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\"><a href=\"https://juejin.im/post/5d8774bff265da03ae78b2a1\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">æ”¿é‡‡äº‘-é²ç­</a>ï¼ˆæœªå¼€æºï¼‰</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">é²ç­æ˜¯ä¸€ä¸ªåŸºäºä¸šåŠ¡ç»„ä»¶å¿«é€Ÿç”Ÿæˆé¡µé¢çš„æ­å»ºç³»ç»Ÿï¼ˆç«™ç‚¹ã€é¡µé¢ã€ç»„ä»¶ã€æ•°æ®ã€æƒé™ï¼‰ ï¼ŒJSON Schemaå°†ä¸šåŠ¡è½¬æˆæ•°æ®â†’å°†æ•°æ®è½¬ä¸ºå®šä¹‰â†’å°†å®šä¹‰è§„èŒƒæˆç»“æ„</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">æå‡ç”¨æˆ·ä½“éªŒï¼šé¡µé¢é‡‡ç”¨é™æ€åŒ–æ–¹æ¡ˆï¼Œæ¸²æŸ“åŠè®¿é—®é€Ÿåº¦æ›´å¿«ï¼›æé«˜ç¨³å®šæ€§ï¼šé‡‡ç”¨ Nginx ç›´æ¥è½¬å‘çš„æ–¹æ¡ˆï¼Œé¡µé¢è·¯ç”±å¯ç”¨æ€§ä¿éšœåŠå“åº”æ€§èƒ½æ›´å…·ä¼˜åŠ¿ï¼ŒåŒæ—¶æ”¯æŒæ›´å¥å£®çš„å®¹ç¾æ–¹æ¡ˆï¼Œæ”¯æŒå¿«é€Ÿå‘ç‰ˆã€å›æ»šã€‚ï¼›å¿«é€Ÿå“åº”ä¸šåŠ¡éœ€æ±‚ï¼šé€šè¿‡ç»„ä»¶åŒ–å¤ç”¨ï¼Œèƒ½å¤Ÿå¿«é€Ÿå“åº”ä¸šåŠ¡éœ€æ±‚ã€æé«˜ç ”å‘äººæ•ˆï¼›æ›´å¥½çš„ä¸šåŠ¡èµ‹èƒ½ï¼šä½¿å¾—äº§å“ã€è¿è¥ç­‰åŒå­¦ä¹Ÿèƒ½å‚ä¸é¡µé¢çš„æ­å»ºï¼Œæå‡ä¸šåŠ¡è¿­ä»£æ•ˆç‡å’Œæ•°æ®å¯ç”¨æ€§ã€‚ï¼›æ›´å¥½çš„ç³»ç»ŸåŒ–èƒ½åŠ›ï¼šåŸºäºæ­å»ºç³»ç»Ÿï¼Œä¾¿äºæ¨ªå‘å’Œæ€§èƒ½æ£€æµ‹ç³»ç»Ÿã€ç¨³å®šæ€§ä¿éšœç³»ç»Ÿã€è¿ç»´éƒ¨ç½²ç³»ç»Ÿã€çº¿ä¸Šç›‘æ§ç³»ç»Ÿè¿›è¡Œæ‰“é€šï¼Œå½¢æˆç³»ç»Ÿçº§åˆåŠ›ã€å¤åˆ©ã€‚</td>\n</tr>\n<tr style=\"border: 0; border-top: 1px solid #ccc; background-color: white;\">\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\"><a href=\"https://imgcook.taobao.org/\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">æ·˜å®-imgcook</a>ï¼ˆæœªå¼€æºï¼‰</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">ç”±è®¾è®¡ç¨¿ä¸€é”®æ™ºèƒ½ç”Ÿæˆä»£ç Skecherã€psã€å›¾ç‰‡ã€åŸå‹å›¾é€šè¿‡ç®—æ³•UIæ™ºèƒ½è¯†åˆ«è¡¨è¾¾å¼è½¬æˆDSLï¼Œå†è§£æDSLä¸ºå‰ç«¯é¡µé¢</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">è¿˜åŸè®¾è®¡ç¨¿ï¼›Skecherã€psã€å›¾ç‰‡ã€åŸå‹å›¾ç›´æ¥ç”Ÿæˆä»£ç ï¼›ç²¾å‡†è¿˜åŸï¼›æ‰€è§æ‰€å¾—ç”Ÿï¼›æˆä»£ç å¯ç»´æŠ¤å¼ºï¼›æœºå™¨æ™ºèƒ½è¯†åˆ«ç†è§£ï¼›DSL / Pluginå¯è‡ªå®šä¹‰</td>\n</tr>\n<tr style=\"border: 0; border-top: 1px solid #ccc; background-color: #F8F8F8;\">\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\"><a href=\"http://note.youdao.com/s/EDn5RopC\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">é˜¿é‡Œ-icelunaã€Paas  </a></td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">é…ç½®ç”Ÿæˆæ­å»ºæè¿°åè®® - æ ‡å‡†è§„èŒƒ - Schemaå†ç”Ÿæˆé¡µé¢åŠé€»è¾‘ã€ä½ä»£ç ç¼–è¾‘å™¨ - å¼€å‘ç”Ÿæ€</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">æ”¹å˜ç”Ÿäº§å…³ç³»ï¼Œæå‡ç”Ÿäº§åŠ›ï¼ˆèµ‹èƒ½ï¼‰- ä¸­åå°é€šç”¨æ­å»ºäº§å“--æ‰€æœ‰äººï¼›é™ä½ç ”å‘æˆæœ¬ï¼ˆææ•ˆï¼‰- ä½ä»£ç å¼€å‘å¹³å°--å¼€å‘äººå‘˜ï¼ˆå·¥ç¨‹åˆ›å»ºã€å¼€å‘ã€è°ƒè¯•ã€å‘å¸ƒå…¨é“¾è·¯ï¼‰ï¼›å­µåŒ–é¢†åŸŸäº§å“ï¼ˆæ­å»ºç”Ÿæ€ï¼‰- PaaSå¹³å°--å¼€å‘äººå‘˜ï¼ˆåŸºç¡€è®¾æ–½ï¼ŒåŸºäºæ ‡å‡†æ­å»ºåè®®ç”Ÿäº§æ­å»ºç‰©æ–™ï¼Œä¸ºå„ä¸šåŠ¡åœºæ™¯æä¾›æ­å»ºæœåŠ¡çš„è¿è¡Œå’Œå¼€å‘ç¯å¢ƒï¼‰</td>\n</tr>\n<tr style=\"border: 0; border-top: 1px solid #ccc; background-color: white;\">\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\"><a href=\"https://www.yunfengdie.com/intro\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">é˜¿é‡Œ-äº‘å‡¤è¶</a>ï¼ˆæœªå¼€æºï¼‰/<a href=\"https://github.com/page-pipepline/pipeline-editor\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">pipeline</a> ï¼ˆç±»ä¼¼å¼€æºï¼‰</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">åƒåšPPTä¸€æ ·å»åšwebå‰ï¼›é¡µé¢&nbsp;Data&nbsp;ç¼–è¾‘</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">æ”¯æŒé¡µé¢ Data ç¼–è¾‘, é¢å‘è¿è¥ã€äº§å“äººå‘˜, ç¼–è¾‘è‡ªç”±åº¦ä¸ºæ— åµŒå¥—çš„ç»„ä»¶.ï¼›ç›®å‰åˆ¶ä½œè¿è¥ã€æ´»åŠ¨é¡µé¢åŠŸèƒ½ä¸Šæœ€å¥½çš„å·¥å…·.ï¼›æä¾›é¡µé¢æ­å»ºçš„æ¨¡æ¿, å¹¶æ”¯æŒè‡ªå®šä¹‰æ¨¡æ¿.ï¼›é…ç½®è¡¨å•åŸºäº Schema ç”Ÿæˆ, é…ç½®è¡¨å•æ“ä½œåŠŸèƒ½å®Œå–„.</td>\n</tr>\n<tr style=\"border: 0; border-top: 1px solid #ccc; background-color: #F8F8F8;\">\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\"><a href=\"https://ice.work/docs/guide/about\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">é˜¿é‡Œ-é£å†°</a>ï¼ˆæœªå¼€æºï¼‰/<a href=\"https://github.com/jaweii/Vue-Layout\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">vue-layout</a>ï¼ˆç±»ä¼¼å¼€æºï¼‰</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">Component Tree&nbsp;ç¼–è¾‘ï¼›é’ˆå¯¹ä¸­åå°å¼€å‘äººå‘˜ï¼›é’ˆå¯¹ç»„ä»¶åŒ–çš„é¡µé¢, ä¸»è¦å®ç° Component Tree çš„å¯è§†åŒ–ç¼–è¾‘. å…¶æ ¸å¿ƒåŠŸèƒ½åœ¨äºé¡µé¢å¸ƒå±€è®¾è®¡: åœ¨ UI ç»„ä»¶åˆ—è¡¨ä¸­é€‰æ‹©åˆé€‚çš„ç»„ä»¶, é€šè¿‡æ‹–æ‹‰çš„æ–¹å¼å°†ç»„ä»¶åµŒå…¥åˆ°é¡µé¢ä¸­, ç”Ÿæˆå¸¦å¸ƒå±€å’Œæ ·å¼çš„é¡µé¢.</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">æ”¯æŒ Component Tree ç¼–è¾‘, é¢å‘ä¸­åå°å¼€å‘äººå‘˜, ç¼–è¾‘è‡ªç”±åº¦ä¸ºæ— åµŒå¥—çš„ç»„ä»¶ï¼›ä½¿ç”¨\"ç‰©æ–™-åŒºå—\", éå‰ç«¯å¼€å‘äººå‘˜å¯ä»¥å¿«é€Ÿæ­å»ºå‡ºå¯ç”¨ã€ç¬¦åˆè§„èŒƒçš„é¡µé¢.ï¼›é¡µé¢ä»¥æºç æ–¹å¼è¾“å‡º.ï¼›å‰ç«¯æœåŠ¡åŒ–çš„ä¸€ç§æ–¹å¼.</td>\n</tr>\n<tr style=\"border: 0; border-top: 1px solid #ccc; background-color: white;\">\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\"><a href=\"https://zhuanlan.zhihu.com/p/137470317\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">æ·˜å®-å¤©é©¬</a>ï¼ˆæœªå¼€æºï¼‰</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">è·¨ç«¯é¡µé¢æ­å»º</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">è·¨ç»ˆç«¯æ­å»ºé¡µé¢ï¼›é¢å‘æ ‡å‡†æ•°æ®ç ”å‘schema.jsonï¼›å¯¹æ¨¡å—çš„propså…¥å‚æè¿°ï¼›æ•°æ®æ ‡å‡†åŒ–ï¼›æ•°æ®é©±åŠ¨å±•ç¤ºï¼›ç¼–å†™æ¨¡å—ä»£ç ï¼ˆè§£è€¦ã€æ¨¡å—æ—¢ä»£ç ï¼‰ï¼›æ‰“åŒ…æ¯ä¸ªæ¨¡å—å•ç‹¬æ‰“åŒ…ï¼›ä»é¡µé¢è§†è§’seedåŠ¨æ€åŠ è½½ï¼›è·¨ç»ˆç«¯çš„ç¼“å­˜æ–¹æ¡ˆï¼ˆphone tm tbç¼“å­˜å‰¯æœ¬ã€å¯¹åº”è®¿é—®ã€ä»£ç æ ‡è¯†ï¼‰ï¼›æœåŠ¡ç«¯æ¸²æŸ“SSR</td>\n</tr>\n<tr style=\"border: 0; border-top: 1px solid #ccc; background-color: #F8F8F8;\">\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">æ·˜å®-æ–¹èˆŸ</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">è®¾è®¡å®ç°toCè¥é”€æ­å»º</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">ç»ˆç«¯ç§’å¼€ï¼›é‡‡ç”¨å‰ç«¯ä¼˜åŒ–æ‰‹æ®µå®ç°ç»ˆç«¯ç§’å¼€</td>\n</tr>\n<tr style=\"border: 0; border-top: 1px solid #ccc; background-color: white;\">\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\"><a href=\"https://chuangyi.taobao.com/pages/teemo?spm=a2esx.12365734.kbheader00.15.d7134f2aS4e0tW\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">é˜¿é‡Œå¦ˆå¦ˆ-æ·˜ç§¯æœ¨</a>ï¼ˆæœªå¼€æºï¼‰</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">ä»åŸºç¡€ç»„ä»¶æ­å»ºå®Œæ•´çš„è¥é”€é¡µé¢çš„æ–¹æ¡ˆè®¾è®¡</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\"></td>\n</tr>\n<tr style=\"border: 0; border-top: 1px solid #ccc; background-color: #F8F8F8;\">\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\"><a href=\"https://mp.weixin.qq.com/s/faL4y2N7lqMi4ldrMJBaPg\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">é˜¿é‡Œ@ç»´å¥‡</a></td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">æ–‡æ¡£å³ä»£ç ;æ–‡æ¡£è½¬æ¢æˆéƒ¨åˆ†ä»£ç </td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\"></td>\n</tr>\n<tr style=\"border: 0; border-top: 1px solid #ccc; background-color: white;\">\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\"><a href=\"https://github.com/alibaba/alist\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">é˜¿é‡Œalist</a> /<a href=\"https://github.com/alibaba/formily\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">Formily</a>ï¼ˆå¼€æºï¼‰</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">Formily&nbsp;è¡¨å•æ–¹æ¡ˆä½œä¸ºæœç´¢åŒºåŸŸçš„ä¸äºŒä¹‹é€‰æ—¶ï¼Œé€šè¿‡å¯¹è¿™äº›æ–¹æ¡ˆçš„æ•´åˆï¼Œå¯ä»¥å¿«é€Ÿå®ç°æ ‡å‡†åŒ–çš„åˆ—è¡¨åœºæ™¯ã€‚;åŒæ—¶AListæ”¯æŒ&nbsp;JSON Schema&nbsp;åè®®æ¸²æŸ“ï¼Œå¯é€šè¿‡æ•°æ®é©±åŠ¨å¿«é€Ÿå¼€å‘ã€‚</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">å†…ç½®Formilyä½œä¸ºæœç´¢åŒºåŸŸæ–¹æ¡ˆï¼Œæ€§èƒ½åŠåŠŸèƒ½å¼ºå¤§;æ”¯æŒ Ant Design/Fusion Next ç»„ä»¶ä½“ç³»;æ”¯æŒJSON Schema æ•°æ®é©±åŠ¨æ–¹æ¡ˆ;å‰¯ä½œç”¨é€»è¾‘ç‹¬ç«‹ç®¡ç†ï¼Œæ¶µç›–å„ç§å¤æ‚è”åŠ¨æ ¡éªŒé€»è¾‘;æ”¯æŒå„ç§å¤æ‚å¸ƒå±€æ–¹æ¡ˆ</td>\n</tr>\n<tr style=\"border: 0; border-top: 1px solid #ccc; background-color: #F8F8F8;\">\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\"><a href style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">äº¬ä¸œ-MPM</a>ï¼ˆæœªå¼€æºï¼‰</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">é‡‡ç”¨ComDataçš„æ•°æ®é…ç½®æ–¹å¼è§£ææˆå‰ç«¯é¡µé¢ï¼Œæ˜¯æœ¬ç³»ç»Ÿçš„æ ¸å¿ƒï¼Œ7PageData æ˜¯â»šâ¾¯çš„æŠ½è±¡æè¿°å±‚</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">æ­å»ºç‰©æ–™ä¸°å¯Œ:MPM ç°æœ‰ 30+ ä¸ªç»„ä»¶ã€500+ ä¸ªæ¨¡æ¿ï¼Œä¸šåŠ¡èƒ½â¼’è¦†ç›–å•†å“ã€å¯¼è´­ã€è¥é”€ç­‰å¤šä¸ªåœºæ™¯ã€‚é…ç½®åŠŸèƒ½å¼ºâ¼¤:ä¸‰ç«¯æ¸²æŸ“æ˜¯ MPM çš„å¼ºâ¼¤èƒ½â¼’ï¼Œé™¤æ­¤ä¹‹å¤–ï¼ŒMPM è¿˜â½€æŒâ»šâ¾¯é…ç½® BI æ’åºã€â¾ƒåŠ¨åŒ–åŸ‹ç‚¹ã€â¾ƒåŠ¨åŒ–æµ‹è¯•ã€â»šâ¾¯æµ‹é€Ÿç­‰ã€‚ç³»ç»Ÿèƒ½â¼’å…¨â¾¯:MPM ä¸ºâ»šâ¾¯ä¿é©¾æŠ¤èˆªï¼Œä¸ä½†é…å¤‡äº†æµç•…çš„æ‹–æ‹½ç¼–è¾‘å™¨ã€å®æ—¶é¢„è§ˆå’Œâ»šâ¾¯å¥åº·è¯Šæ–­èƒ½â¼’ï¼Œè¿˜å¯¹ç³»ç»Ÿå’Œâ»šâ¾¯åšäº†å…¨â½…â¾¯çš„ç›‘æ§å’Œå®¹ç¾é™çº§â½…æ¡ˆã€‚</td>\n</tr>\n<tr style=\"border: 0; border-top: 1px solid #ccc; background-color: white;\">\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\"><a href=\"https://cube.sankuai.com/#/admin/team/list/all\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">ç¾å›¢é­”æ–¹</a>ï¼ˆæœªå¼€æºï¼‰</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">ä»åŸºç¡€ç»„ä»¶æ­å»ºå®Œæ•´çš„è¥é”€é¡µé¢çš„æ–¹æ¡ˆè®¾è®¡</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\"></td>\n</tr>\n<tr style=\"border: 0; border-top: 1px solid #ccc; background-color: #F8F8F8;\">\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\"><a href=\"http://lego.waimai.sankuai.com/template\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">ç¾å›¢ä¹é«˜</a>ï¼ˆæœªå¼€æºï¼‰</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">ä»åŸºç¡€ç»„ä»¶æ­å»ºå®Œæ•´çš„è¥é”€é¡µé¢çš„æ–¹æ¡ˆè®¾è®¡</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\"></td>\n</tr>\n<tr style=\"border: 0; border-top: 1px solid #ccc; background-color: white;\">\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\"><a href=\"https://chuangyi.taobao.com/pages/teemo?spm=a2esx.12365734.kbheader00.15.d7134f2aS4e0tW\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">esview</a>(æ¨¡ä»¿ä¹é«˜å¼€æºï¼‰</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">Drag vue dynamic components to build your pageï¼Œgenerate vue code.</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">esviewå¼€æºé¡¹ç›®, æ¨¡ä»¿ç¾å›¢ç‚¹è¯„çš„ä¹é«˜.å®Œæ•´çš„å¯è§†åŒ–é¡µé¢æ­å»ºæ¡†æ¶, é¢å‘ä¸­åå°å¼€å‘äººå‘˜.é¡µé¢å¸ƒå±€ç»“æœçœ‹èµ·æ¥æ¯”è¾ƒä¹±, è‡ªå®šä¹‰ç»„ä»¶å†™æ³•æ¯”è¾ƒè¯¡å¼‚; æ²¡æœ‰èåˆä¸šåŠ¡é€»è¾‘, ä¸æ”¯æŒåœ¨æ¡†æ¶ä¸­å†™é¡µé¢çš„ä»£ç é€»è¾‘.</td>\n</tr>\n<tr style=\"border: 0; border-top: 1px solid #ccc; background-color: #F8F8F8;\">\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\"><a href=\"https://github.com/JakHuang/form-generator\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">Element UIè¡¨å•è®¾è®¡åŠä»£ç ç”Ÿæˆå™¨</a>ï¼ˆå¼€æºï¼‰</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">Element UIè¡¨å•è®¾è®¡åŠä»£ç ç”Ÿæˆå™¨ï¼Œå¯å°†ç”Ÿæˆçš„ä»£ç ç›´æ¥è¿è¡Œåœ¨åŸºäºElementçš„vueé¡¹ç›®ä¸­ï¼›ä¹Ÿå¯å¯¼å‡ºJSONè¡¨å•ï¼Œä½¿ç”¨é…å¥—çš„è§£æå™¨å°†JSONè§£ææˆçœŸå®çš„è¡¨å•ã€‚</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\"></td>\n</tr>\n<tr style=\"border: 0; border-top: 1px solid #ccc; background-color: white;\">\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\"><a href=\"https://github.com/jaweii/Vue-Layout\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">Vue-Layout</a>ï¼ˆå¼€æºï¼‰</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">ä»åŸºç¡€ç»„ä»¶æ­å»ºå®Œæ•´çš„è¥é”€é¡µé¢çš„æ–¹æ¡ˆè®¾è®¡ åŸºäºUIç»„ä»¶çš„Vueå¯è§†åŒ–å¸ƒå±€ã€ç”Ÿæˆ.vueä»£ç çš„å·¥å…·ã€‚https://github.com/JakHuang/form-generator</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">æ”¯æŒ Component Tree ç¼–è¾‘, é¢å‘ä¸­åå°å¼€å‘äººå‘˜, ç¼–è¾‘è‡ªç”±åº¦ä¸ºå¯åµŒå¥—çš„ç»„ä»¶.é¡µé¢çš„æ‹–æ‹‰ç”Ÿæˆ, å®ç°å¾—å¾ˆå®Œæ•´.ç”¨äºé¡µé¢è®¾è®¡, æ‰€ä»¥åå‘é¡µé¢å…ƒç´ çš„æ ·å¼æ§åˆ¶.æŠ€æœ¯æ–‡ç« å¯¹å¯è§†åŒ–æ­å»ºå·¥å…·æ•°æ®æµæœ‰æ·±åˆ»ç†è§£: å¯è§†åŒ–åœ¨çº¿ç¼–è¾‘å™¨æ¶æ„è®¾è®¡.</td>\n</tr>\n<tr style=\"border: 0; border-top: 1px solid #ccc; background-color: #F8F8F8;\">\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\"><a href=\"https://github.com/ascoders/gaea-editor\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">gaea-editor</a>ï¼ˆå¼€æºï¼‰</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">å¼€æºé¡¹ç›®.æ”¯æŒ Component Tree ç¼–è¾‘, é¢å‘ä¸­åå°å¼€å‘äººå‘˜, ç¼–è¾‘è‡ªç”±åº¦ä¸ºå¯åµŒå¥—çš„ç»„ä»¶.é¡µé¢çš„æ‹–æ‹‰ç”Ÿæˆ, å®ç°å¾—å¾ˆå®Œæ•´.ç”¨äºé¡µé¢è®¾è®¡, æ‰€ä»¥åå‘é¡µé¢å…ƒç´ çš„æ ·å¼æ§åˆ¶.æŠ€æœ¯æ–‡ç« å¯¹å¯è§†åŒ–æ­å»ºå·¥å…·æ•°æ®æµæœ‰æ·±åˆ»ç†è§£: å¯è§†åŒ–åœ¨çº¿ç¼–è¾‘å™¨æ¶æ„è®¾è®¡.</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\"></td>\n</tr>\n<tr style=\"border: 0; border-top: 1px solid #ccc; background-color: white;\">\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\"><a href=\"https://page-pipepline.github.io/pipeline-editor/dist/#/\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">pipeline</a>ï¼ˆå¼€æºï¼‰</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">è¿è¥/äº§å“æ´»åŠ¨é¡µé¢</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\"></td>\n</tr>\n<tr style=\"border: 0; border-top: 1px solid #ccc; background-color: #F8F8F8;\">\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\"><a href=\"https://github.com/daycool/gen\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">gen</a>genï¼ˆå¼€æºï¼‰</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">æ ¹æ®æ¥å£ç”Ÿæˆé¡µé¢ï¼Œå‡å°‘é‡å¤æ€§å·¥ä½œ</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\"></td>\n</tr>\n<tr style=\"border: 0; border-top: 1px solid #ccc; background-color: white;\">\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\"><a href=\"https://www.ih5.cn/not-logged-in\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">H5.cn</a></td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">https://www.ih5.cn/not-logged-in</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\"></td>\n</tr>\n<tr style=\"border: 0; border-top: 1px solid #ccc; background-color: #F8F8F8;\">\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\"><a href=\"https://anye931123.gitee.io/react-visual-editor/\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">Brick Design</a>ï¼ˆå¼€æºï¼‰</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">æ‹–æ‹½åŒºå—å†…å¯ç›´æ¥ç¼–è¾‘,ç”Ÿæˆå‰ç«¯é¡µé¢å¹¶é¢„è§ˆ</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\"></td>\n</tr>\n<tr style=\"border: 0; border-top: 1px solid #ccc; background-color: white;\">\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\"><a href=\"https://h5.baidu.com/\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">ç™¾åº¦H5</a>ï¼ˆæœªå¼€æºï¼‰</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">https://h5.bce.baidu.com/docs/introè¥é”€æ´»åŠ¨é¡µé¢æ­å»º</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\"></td>\n</tr>\n<tr style=\"border: 0; border-top: 1px solid #ccc; background-color: #F8F8F8;\">\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">å…¶ä»–ï¼ˆå¼€æºï¼‰</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">1.<a href=\"https://github.com/topics/website-builder\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">website-builder</a> 2.<a href=\"https://github.com/topics/site-builder\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">site-builder</a> 3.<a href=\"https://github.com/givanz/VvvebJs\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">VvvebJs</a> 4.<a href=\"https://github.com/artf/grapesjs\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">grapesjs</a> 5.<a href=\"http://maka.im/store\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">Maha</a> 6.<a href=\"https://www.youzan.com/\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">æœ‰èµå¾®é¡µé¢</a> 7.<a href=\"https://github.com/OXOYO/X-Page-Editor-Vue\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">X-Page-Editor-Vue</a></td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\"></td>\n</tr>\n</tbody>\n</table>\n</section><h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; bmin-height: 32px; line-height: 32px; border-bottom: solid 1px #000000; color: #35b378; display: inline-block; border-bottom-width: 0px; border-bottom-style: solid; border-color: #35b378; padding-top: 5px; padding-right: 0.5em; padding-left: 0.5em; font-size: 23px; margin: 1em 0 0rem 0; padding: 0.5em 0; text-align: leftt; font-weight: bold;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">3 ä¸šç•Œè°ƒç ”è¦ç‚¹æ€»ç»“</span><span class=\"suffix\"></span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 1em 4px;\">åŸºäºå¯¹ä»¥ä¸Šé¡µé¢å¯è§†åŒ–æ­å»ºå·¥å…·è°ƒç ”ï¼Œä¸šç•Œæœ‰å¾ˆå¤šçœ‹æ³•ï¼Œæ‹¿å‡ºä¸¤ä¸ªæ¯”è¾ƒæœ‰ä»£è¡¨æ€§çš„æ–‡ç« ä¾›å¤§å®¶å‚è€ƒï¼š</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: disc;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500; margin: 10px 0;\"><a href=\"https://www.zhihu.com/question/338929219\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">åŸºäºç°ä»£çš„å‰ç«¯æ¡†æ¶ï¼Œä¸ºä»€ä¹ˆæ²¡æœ‰æˆç†Ÿçš„æ”¯æŒæ§ä»¶æ‹–æ‹½å¸ƒå±€ï¼Œå¹¶å¯ä»¥è‡ªåŠ¨ç”Ÿæˆå‰ç«¯ä»£ç çš„è®¾è®¡å™¨å‡ºç°ï¼Ÿ</a></section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500; margin: 10px 0;\"><a href=\"https://www.cnblogs.com/sskyy/p/6496287.html\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">å‰ç«¯æœåŠ¡åŒ–â€”â€”é¡µé¢æ­å»ºå·¥å…·çš„æ­»ä¸ç”Ÿ</a></section></li></ul>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 1em 4px;\">ä»¥ä¸Šè°ƒç ”äº†é‚£ä¹ˆå¤šä¸šç•Œæ¯”è¾ƒç‰›çš„å‰ç«¯å¯è§†åŒ–çš„æ¡†æ¶å·¥ç¨‹ï¼Œå¤§è‡´æ€è·¯æ˜¯ç±»ä¼¼çš„ï¼Œç™¾å®¶äº‰é¸£ï¼Œå°½ç®¡é˜¿é‡Œçš„é£å†°äº‘å‡¤è¶å¾ˆå®Œå–„äº†ä½†è¿˜æ˜¯å­˜åœ¨ä»¥ä¸‹ä¸¤ç‚¹é—®é¢˜ï¼š</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: disc;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500; margin: 10px 0;\">æ— æ³•è‡ªåŠ¨ç”Ÿæˆäº¤äº’é€»è¾‘</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500; margin: 10px 0;\">åªèƒ½åœ¨å—é™ã€å…·ä½“çš„ä¸šåŠ¡åœºæ™¯ä¸‹å‘æŒ¥ä½œç”¨</section></li></ul>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 1em 4px;\">è¿™ä¸¤ä¸ªé—®é¢˜å­˜åœ¨å°±ä¼šå¯¼è‡´æˆ‘ä»¬ç”Ÿäº§è®¾è®¡å‡ºæ¥çš„ä¸œè¥¿éœ€è¦low codeï¼Œå¦‚æœæ˜¯low codeå¼€å‘äººå‘˜ä¸æ„¿æ„ç”¨ï¼Œå› ä¸ºç”Ÿæˆçš„ä»£ç ä¸æ˜“ç»´æŠ¤ä¸”è‡ƒè‚¿ï¼›å¦‚æœç»™éå¼€å‘äººå‘˜ç”¨ï¼Œä»–ä»¬åˆä¸ä¼šå†™ä»£ç ï¼Œä¸€ç‚¹ä»£ç éƒ½ä¸æƒ³å†™ï¼Œæ‰€ä»¥ä»–ä»¬ä¹Ÿä¸æ„¿æ„ç”¨ï¼›</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 1em 4px;\">è€Œæˆ‘ä»¬ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šï¼Œèƒ½å¦æŠŠä¸Šé¢ä¸¤ä¸ªé—®é¢˜è§£å†³å‘¢ï¼Ÿç›®å‰æˆ‘æ²¡æœ‰ä»€ä¹ˆå¥½çš„åŠæ³•ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥å…ˆå»æŠŠä»–ä»¬å®ç°æ€è·¯ç ”ç©¶æ˜ç™½ï¼Œæ‰æœ‰å¯èƒ½å»å¤„ä¸Šé¢çš„æœ€éš¾ä»¥è§£å†³çš„é—®é¢˜ã€‚</p>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; font-size: 20px; margin: 1.2em 0 1em; padding: 0; font-weight: bold; color: #35b378;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">3.1 ä¸šç•Œçš„å·¥å…·æ€»ç»“è¦ç‚¹</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<section class=\"table-container\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"overflow-x: auto;\"><table style=\"display: table; text-align: left;\">\n<thead>\n<tr style=\"border: 0; border-top: 1px solid #ccc; background-color: white;\">\n<th style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; font-weight: bold; background-color: #f0f0f0; min-width: 85px;\">ç›¸é€šä¹‹å¤„</th>\n<th style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; font-weight: bold; background-color: #f0f0f0; min-width: 85px;\">ä¸åŒä¹‹å¤„</th>\n<th style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; font-weight: bold; background-color: #f0f0f0; min-width: 85px;\">å¯å€Ÿé‰´ä¹‹å¤„</th>\n<th style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; font-weight: bold; background-color: #f0f0f0; min-width: 85px;\">åº”è¯¥é¿å…é—®é¢˜</th>\n<th style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; font-weight: bold; background-color: #f0f0f0; min-width: 85px;\">å¼€æºä»£ç å¯å€Ÿé‰´</th>\n</tr>\n</thead>\n<tbody style=\"border: 0;\">\n<tr style=\"border: 0; border-top: 1px solid #ccc; background-color: white;\">\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">1ã€DSLæ–¹å¼è§£ææ‹–æ‹½æˆ–è€…é…ç½®å¥½çš„ä¼ªä»£ç ç”Ÿæˆæ‰€éœ€å‰ç«¯é¡µé¢ï¼Œå¤§éƒ¨åˆ†ä½¿ç”¨çš„æ˜¯JSON Schemaå½¢å¼ï¼›2ã€ä»é…ç½®è¦ç”Ÿæˆé¡µé¢æ•´ä¸ªå¤„ç†æ­¥éª¤ç±»ä¼¼</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">1ã€å¤„ç†æ–¹æ³•ä¸åŒï¼›2ã€å®šä¹‰çš„DSLå­—æ®µä¸åŒï¼›3ã€ä¼˜åŒ–ç¨‹åº¦ä¸åŒï¼›4ã€é’ˆå¯¹çš„ä¸šåŠ¡åœºæ™¯ä¸åŒ</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">1ã€ä»é…ç½®åˆ°ç”ŸæˆDSLæ–¹å¼çš„ä¼ªä»£ç å†åˆ°å¦‚ä½•è§£ææœ€åç”Ÿæˆå‰ç«¯é¡µé¢çš„æ•´ä½“æ¶æ„è®¾è®¡åŠæ€æƒ³å¯å€Ÿé‰´ï¼›2ã€å¦‚ä½•å®šæ—¶DSLå­—æ®µschemaçš„æ¨¡å¼ï¼Œå¦‚ä½•å¤„ç†è½¬ç§»ç¼–è¯‘æ‰“åŒ…ä¸Šçº¿åŠä¼˜åŒ–</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">1ã€å®šä½å‡†ç”¨æˆ·ç¾¤ï¼›2ã€åæœŸç»´æŠ¤é—®é¢˜</td>\n<td style=\"font-size: 16px; border: 1px solid #ccc; padding: 5px 10px; text-align: left; min-width: 85px;\">1ã€<a href=\"https://github.com/baidu/amis\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">ç™¾åº¦amis</a>ï¼ˆå¼€æºå¯å€Ÿé‰´ reactï¼‰2ã€<a href=\"https://github.com/jaweii/Vue-Layout\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">vue-layout</a>ï¼ˆç±»ä¼¼é£å†°å¼€æº vueï¼‰ 3ã€<a href=\"https://github.com/page-pipepline/pipeline-editor\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">pipeline</a> ï¼ˆç±»ä¼¼é£å†°å¼€æº reactï¼‰4ã€<a href=\"http://lego.waimai.sankuai.com/template\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">ç¾å›¢ä¹é«˜</a>ï¼ˆå¯å‚è€ƒ vueï¼‰5ã€<a href=\"https://cube.sankuai.com/#/admin/team/list/all\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">ç¾å›¢é­”æ–¹</a>ï¼ˆå¯å‚è€ƒreact 6ã€<a href=\"https://github.com/furioussoul/esview\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">esview</a>(æ¨¡ä»¿ä¹é«˜å¼€æº) 7ã€<a href=\"https://anye931123.gitee.io/react-visual-editor/\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">Brick Design</a>ï¼ˆå¼€æºå¯å€Ÿé‰´ reactï¼‰ 8ã€<a href=\"https://github.com/daycool/gen\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">gen</a>ï¼ˆå¼€æºï¼‰9ã€<a href=\"https://github.com/ascoders/gaea-editor\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">gaea-editor</a>ï¼ˆå¼€æºï¼‰ 10ã€<a href=\"https://github.com/alibaba/alist\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">é˜¿é‡Œalist</a>/<a href=\"https://github.com/alibaba/formily\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">Formily</a>ï¼ˆå¼€æºï¼‰11ã€<a href=\"https://github.com/ly525/luban-h5\" style=\"text-decoration: none; word-wrap: break-word; font-weight: bold; color: #35b378; border-bottom: 1px solid #35b378;\">é²ç­H5</a>(å¼€æº)</td>\n</tr>\n</tbody>\n</table>\n</section><h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; font-size: 20px; margin: 1.2em 0 1em; padding: 0; font-weight: bold; color: #35b378;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">3.2 DSLæ–¹å¼</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 1em 4px;\">JSON Schemæ•°æ®ç»“æ„ç‰¹ç‚¹ï¼š</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: disc;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500; margin: 10px 0;\">æ‰å¹³åŒ–</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500; margin: 10px 0;\">æ ‘çŠ¶åŒ–</section></li></ul>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 1em 4px;\">demo1ï¼š</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #333; background: #f8f8f8; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch;\">{<br>&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"type\"</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"object\"</span>,<br>&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"properties\"</span>:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"<span class=\"hljs-variable\" style=\"color: #008080; line-height: 26px;\">$attr</span>\"</span>:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"type\"</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"object\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"properties\"</span>:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"hidden\"</span>:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"type\"</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"boolean\"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"<span class=\"hljs-variable\" style=\"color: #008080; line-height: 26px;\">$theme</span>\"</span>:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"type\"</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"object\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"properties\"</span>:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"themeColor\"</span>:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"type\"</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"string\"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"items\"</span>:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"type\"</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"array\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"items\"</span>:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"type\"</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"object\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"properties\"</span>:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;â€œitemIdâ€:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"type\"</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"string\"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;}<br>}<br></code></pre>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 1em 4px;\">demo2ï¼š</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #333; background: #f8f8f8; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch;\">{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"type\"</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"page\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"body\"</span>:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"title\"</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"type\"</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"form\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"autoFocus\"</span>:&nbsp;<span class=\"hljs-literal\" style=\"color: #008080; line-height: 26px;\">false</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"api\"</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"https://houtai.baidu.com/api/mock2/saveForm?waitSeconds=1\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"mode\"</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"horizontal\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"controls\"</span>:&nbsp;[<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"type\"</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"fieldSet\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"title\"</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"åŸºæœ¬é…ç½®\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"controls\"</span>:&nbsp;[<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"name\"</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"a\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"type\"</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"text\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"label\"</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"æ–‡æœ¬1\"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"name\"</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"a\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"type\"</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"text\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"label\"</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"æ–‡æœ¬2\"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"type\"</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"fieldSet\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"title\"</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"å…¶ä»–é…ç½®\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"collapsable\"</span>:&nbsp;<span class=\"hljs-literal\" style=\"color: #008080; line-height: 26px;\">true</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"collapsed\"</span>:&nbsp;<span class=\"hljs-literal\" style=\"color: #008080; line-height: 26px;\">true</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"controls\"</span>:&nbsp;[<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"name\"</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"c\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"type\"</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"text\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"label\"</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"æ–‡æœ¬3\"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"name\"</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"d\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"type\"</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"text\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"label\"</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"æ–‡æœ¬4\"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"submitText\"</span>:&nbsp;null,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"actions\"</span>:&nbsp;[]<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br></code></pre>\n<hr data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"height: 1px; margin-top: 10px; margin-bottom: 10px; border-top: 1px solid black; border: 1px solid #35b378; margin: 1.5em auto;\">\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; bmin-height: 32px; line-height: 32px; border-bottom: solid 1px #000000; color: #35b378; display: inline-block; border-bottom-width: 0px; border-bottom-style: solid; border-color: #35b378; padding-top: 5px; padding-right: 0.5em; padding-left: 0.5em; font-size: 23px; margin: 1em 0 0rem 0; padding: 0.5em 0; text-align: leftt; font-weight: bold;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">4. è¯´æ˜</span><span class=\"suffix\"></span></h2>\n<blockquote data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"display: block; font-size: 0.9em; overflow: auto; overflow-scrolling: touch; padding-top: 10px; padding-bottom: 10px; padding-left: 20px; padding-right: 10px; margin-bottom: 20px; margin-top: 20px; margin: 10px 5px; border-left: 3px solid #35b378; border-right: 0px solid #35b378; color: #616161; quotes: none; background: #FBF9FD;\">\n<p style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0px; color: black; line-height: 26px;\">è¯´æ˜ï¼šä¸šç•Œè°ƒç ”ä¸­æ¯ä¸ªé¡¹ç›®ç‚¹å‡»æ ‡é¢˜éƒ½å¯æŸ¥çœ‹é¡¹ç›®è¯¦æƒ…ï¼ŒmarkDownæ–‡æ¡£æ’å…¥å›¾ç‰‡å¤ªéº»çƒ¦äº†ï¼Œäºæ˜¯å°åœ†è„¸å„¿åŒå­¦æ”¾å¼ƒäº†å›¾ç‰‡ä»‹ç»ï¼Œæœ‰éœ€è¦äº†è§£çš„åŒå­¦æˆ‘åé¢å†æ¥è¡¥ï¼ˆcopyè¿‡æ¥ï¼‰å„ä¸ªæˆ‘çŸ¥é“çš„è®¾è®¡æ¶æ„åŠè¯¦è®¾çš„å›¾ï¼Œå“ˆå“ˆå“ˆã€‚</p>\n</blockquote>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 1em 4px;\">æ›´å¤šå‰ç«¯æ–‡æ¡£è¯·å‚è€ƒ <span class=\"footnote-word\" style=\"font-weight: bold; color: #35b378;\">å°åœ†è„¸å„¿</span><sup class=\"footnote-ref\" style=\"line-height: 0; font-weight: bold; color: #35b378;\">[1]</sup></p>\n<h3 class=\"footnotes-sep\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; font-size: 20px; margin: 1.2em 0 1em; padding: 0; font-weight: bold; color: #35b378;\"><span style=\"display: block;\">å‚è€ƒèµ„æ–™</span></h3>\n<section class=\"footnotes\" data-tool=\"mdniceç¼–è¾‘å™¨\">\n<span id=\"fn1\" class=\"footnote-item\" style=\"display: flex;\"><span class=\"footnote-num\" style=\"display: inline; width: 10%; background: none; font-size: 80%; opacity: 0.6; line-height: 26px; font-family: ptima-Regular, Optima, PingFangSC-light, PingFangTC-light, 'PingFang SC', Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;\">[1] </span><p style=\"padding-top: 8px; padding-bottom: 8px; display: inline; font-size: 14px; width: 90%; padding: 0px; margin: 0; line-height: 26px; color: black; word-break: break-all; width: calc(100%-50);\">æ›´å¤šæ–‡æ¡£: <em style=\"font-style: italic; color: black;\">https://juejin.im/user/1398234520230989/posts</em></p>\n</span>\n</section>\n</section>", "user_name": "å°åœ†è„¸å„¿", "description": "ç¨‹åºåª›", "got_view_count": 5087, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "Redis", "concern_user_count": 125718, "user_id": "3051900007890648", "title": "ã€Œæœ€å¼ºã€Lettuce å·²æ”¯æŒ Redis6 å®¢æˆ·ç«¯ç¼“å­˜", "mark_content": "<section id=\"nice\" data-tool=\"mdniceç¼–è¾‘å™¨\" data-website=\"https://www.mdnice.com\" style=\"font-size: 16px; padding: 0 10px; word-spacing: 0px; word-break: break-word; word-wrap: break-word; text-align: left; line-height: 1.25; color: #2b2b2b; font-family: Optima-Regular, Optima, PingFangTC-Light, PingFangSC-light, PingFangTC-light; letter-spacing: 2px; background-image: linear-gradient(90deg, rgba(50, 0, 0, 0.04) 3%, rgba(0, 0, 0, 0) 3%), linear-gradient(360deg, rgba(50, 0, 0, 0.04) 3%, rgba(0, 0, 0, 0) 3%); background-size: 20px 20px; background-position: center center;\"><h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #40B8FA;\"><span class=\"prefix\" style=\"display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://my-wechat.mdnice.com/fullstack-1.png); margin-bottom: -22px;\"></span><span class=\"content\" style=\"display: flex; color: #40B8FA; font-size: 20px; margin-left: 25px;\">Redis å®¢æˆ·ç«¯ç¼“å­˜</span><span class=\"suffix\" style=\"display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(64, 184, 250, .5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;\"></span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ç¼“å­˜çš„è§£å†³æ–¹æ¡ˆä¸€èˆ¬æœ‰ä¸¤ç§ï¼š</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ã€L1ã€‘ å†…å­˜ç¼“å­˜ï¼ˆå¦‚ Caffeineã€Ehcacheï¼‰ â€”â€” é€Ÿåº¦å¿«ï¼Œè¿›ç¨‹å†…å¯ç”¨ï¼Œä½†é‡å¯ç¼“å­˜ä¸¢å¤±ï¼Œå‡ºç°ç¼“å­˜é›ªå´©çš„é—®é¢˜ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ã€L2ã€‘é›†ä¸­å¼ç¼“å­˜ï¼ˆå¦‚ Redisï¼‰â€”â€” å¯åŒæ—¶ä¸ºå¤šèŠ‚ç‚¹æä¾›æœåŠ¡ï¼Œä½†é«˜å¹¶å‘ä¸‹ï¼Œå¸¦å®½æˆä¸ºç“¶é¢ˆã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ä¸šå†…æœ‰å¾ˆå¤šå¼€æºæ¡†æ¶æ¥è§£å†³ä»¥ä¸Šé—®é¢˜ï¼Œæ—¢èƒ½æœ‰ L1 é€Ÿåº¦ï¼Œå¹¶ä¸”æ‹¥æœ‰ L2 é›†ç¾¤æ€ã€‚å¦‚ä¸‹</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\"><a href=\"https://gitee.com/ld/J2Cache\" style=\"text-decoration: none; word-wrap: break-word; color: #40B8FA; font-weight: normal; border-bottom: 1px solid #3BAAFA;\">J2Cache ä¸¤çº§ç¼“å­˜æ¡†æ¶</a></p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\"><a href=\"https://gitee.com/jd-platform-opensource/hotkey\" style=\"text-decoration: none; word-wrap: break-word; color: #40B8FA; font-weight: normal; border-bottom: 1px solid #3BAAFA;\">hotkey çƒ­ç‚¹æ•°æ®å®æ—¶åŒæ­¥</a></p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">åœ¨ <strong style=\"color: #3594F7; font-weight: bold;\"><span>ã€Œ</span>redis 6.0<span>ã€</span></strong> ç‰ˆæœ¬ä¸­ï¼Œå·²ç»é»˜è®¤æ”¯æŒäº†å®¢æˆ·ç«¯ç¼“å­˜åŠŸèƒ½ï¼ŒJava ä¸­ä¸»æµçš„è¿æ¥å®¢æˆ·ç«¯ <strong style=\"color: #3594F7; font-weight: bold;\"><span>ã€Œ</span>lettuce<span>ã€</span></strong> åœ¨æœ€æ–°çš„å¿«ç…§ç‰ˆæœ¬ (6.0.0.BUILD-SNAPSHOT) å·²ç»æä¾›æ”¯æŒã€‚ ä¸‹è¾¹å°±é€šè¿‡ä»£ç æ¥ä½“éªŒä¸€ä¸‹å®¢æˆ·ç«¯ç¼“å­˜çš„ç¥å¥‡åŠŸèƒ½ã€‚</p>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #40B8FA;\"><span class=\"prefix\" style=\"display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://my-wechat.mdnice.com/fullstack-1.png); margin-bottom: -22px;\"></span><span class=\"content\" style=\"display: flex; color: #40B8FA; font-size: 20px; margin-left: 25px;\">Redis 6.0 å®‰è£…</span><span class=\"suffix\" style=\"display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(64, 184, 250, .5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;\"></span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å®‰è£… <code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">redis 6</code>,è¿™é‡Œé€šè¿‡ Docker å®‰è£…å‘½ä»¤å¦‚ä¸‹</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #333; background: #f8f8f8; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\">docker&nbsp;run&nbsp;--name&nbsp;redis6&nbsp;-p&nbsp;6379:6379&nbsp;--restart=always&nbsp;-d&nbsp;redis:6.0.6<br></code></pre>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #40B8FA;\"><span class=\"prefix\" style=\"display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://my-wechat.mdnice.com/fullstack-1.png); margin-bottom: -22px;\"></span><span class=\"content\" style=\"display: flex; color: #40B8FA; font-size: 20px; margin-left: 25px;\">Jar ä¾èµ–</span><span class=\"suffix\" style=\"display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(64, 184, 250, .5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;\"></span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æ³¨æ„ï¼š è¿™é‡Œä½¿ç”¨ lettuce å®¢æˆ·ç«¯ï¼Œæ³¨æ„å½“å‰ä½¿ç”¨ 6.0 çš„å¿«ç…§ç‰ˆæœ¬ ï¼Œéœ€è¦åœ¨ pom å¢åŠ  lettuce å¿«ç…§ä»“åº“</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">1.lettuce 6.0 å¿«ç…§ä¾èµ–</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #333; background: #f8f8f8; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\"><span class=\"hljs-tag\" style=\"color: #000080; font-weight: normal; line-height: 26px;\">&lt;<span class=\"hljs-name\" style=\"color: #000080; font-weight: normal; line-height: 26px;\">dependency</span>&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-tag\" style=\"color: #000080; font-weight: normal; line-height: 26px;\">&lt;<span class=\"hljs-name\" style=\"color: #000080; font-weight: normal; line-height: 26px;\">groupId</span>&gt;</span>io.lettuce<span class=\"hljs-tag\" style=\"color: #000080; font-weight: normal; line-height: 26px;\">&lt;/<span class=\"hljs-name\" style=\"color: #000080; font-weight: normal; line-height: 26px;\">groupId</span>&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-tag\" style=\"color: #000080; font-weight: normal; line-height: 26px;\">&lt;<span class=\"hljs-name\" style=\"color: #000080; font-weight: normal; line-height: 26px;\">artifactId</span>&gt;</span>lettuce-core<span class=\"hljs-tag\" style=\"color: #000080; font-weight: normal; line-height: 26px;\">&lt;/<span class=\"hljs-name\" style=\"color: #000080; font-weight: normal; line-height: 26px;\">artifactId</span>&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-tag\" style=\"color: #000080; font-weight: normal; line-height: 26px;\">&lt;<span class=\"hljs-name\" style=\"color: #000080; font-weight: normal; line-height: 26px;\">version</span>&gt;</span>6.0.0.BUILD-SNAPSHOT<span class=\"hljs-tag\" style=\"color: #000080; font-weight: normal; line-height: 26px;\">&lt;/<span class=\"hljs-name\" style=\"color: #000080; font-weight: normal; line-height: 26px;\">version</span>&gt;</span><br><span class=\"hljs-tag\" style=\"color: #000080; font-weight: normal; line-height: 26px;\">&lt;/<span class=\"hljs-name\" style=\"color: #000080; font-weight: normal; line-height: 26px;\">dependency</span>&gt;</span><br></code></pre>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\"><ol start=\"2\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; list-style-type: decimal; font-size: 15px; color: #595959;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">é…ç½®å¿«ç…§ä»“åº“</section></li></ol>\n</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #333; background: #f8f8f8; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\"><span class=\"hljs-tag\" style=\"color: #000080; font-weight: normal; line-height: 26px;\">&lt;<span class=\"hljs-name\" style=\"color: #000080; font-weight: normal; line-height: 26px;\">repositories</span>&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-tag\" style=\"color: #000080; font-weight: normal; line-height: 26px;\">&lt;<span class=\"hljs-name\" style=\"color: #000080; font-weight: normal; line-height: 26px;\">repository</span>&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-tag\" style=\"color: #000080; font-weight: normal; line-height: 26px;\">&lt;<span class=\"hljs-name\" style=\"color: #000080; font-weight: normal; line-height: 26px;\">id</span>&gt;</span>sonatype-snapshots<span class=\"hljs-tag\" style=\"color: #000080; font-weight: normal; line-height: 26px;\">&lt;/<span class=\"hljs-name\" style=\"color: #000080; font-weight: normal; line-height: 26px;\">id</span>&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-tag\" style=\"color: #000080; font-weight: normal; line-height: 26px;\">&lt;<span class=\"hljs-name\" style=\"color: #000080; font-weight: normal; line-height: 26px;\">name</span>&gt;</span>Sonatype&nbsp;Snapshot&nbsp;Repository<span class=\"hljs-tag\" style=\"color: #000080; font-weight: normal; line-height: 26px;\">&lt;/<span class=\"hljs-name\" style=\"color: #000080; font-weight: normal; line-height: 26px;\">name</span>&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-tag\" style=\"color: #000080; font-weight: normal; line-height: 26px;\">&lt;<span class=\"hljs-name\" style=\"color: #000080; font-weight: normal; line-height: 26px;\">url</span>&gt;</span>https://oss.sonatype.org/content/repositories/snapshots/<span class=\"hljs-tag\" style=\"color: #000080; font-weight: normal; line-height: 26px;\">&lt;/<span class=\"hljs-name\" style=\"color: #000080; font-weight: normal; line-height: 26px;\">url</span>&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-tag\" style=\"color: #000080; font-weight: normal; line-height: 26px;\">&lt;<span class=\"hljs-name\" style=\"color: #000080; font-weight: normal; line-height: 26px;\">snapshots</span>&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-tag\" style=\"color: #000080; font-weight: normal; line-height: 26px;\">&lt;<span class=\"hljs-name\" style=\"color: #000080; font-weight: normal; line-height: 26px;\">enabled</span>&gt;</span>true<span class=\"hljs-tag\" style=\"color: #000080; font-weight: normal; line-height: 26px;\">&lt;/<span class=\"hljs-name\" style=\"color: #000080; font-weight: normal; line-height: 26px;\">enabled</span>&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-tag\" style=\"color: #000080; font-weight: normal; line-height: 26px;\">&lt;/<span class=\"hljs-name\" style=\"color: #000080; font-weight: normal; line-height: 26px;\">snapshots</span>&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-tag\" style=\"color: #000080; font-weight: normal; line-height: 26px;\">&lt;/<span class=\"hljs-name\" style=\"color: #000080; font-weight: normal; line-height: 26px;\">repository</span>&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-tag\" style=\"color: #000080; font-weight: normal; line-height: 26px;\">&lt;/<span class=\"hljs-name\" style=\"color: #000080; font-weight: normal; line-height: 26px;\">repositories</span>&gt;</span><br></code></pre>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #40B8FA;\"><span class=\"prefix\" style=\"display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://my-wechat.mdnice.com/fullstack-1.png); margin-bottom: -22px;\"></span><span class=\"content\" style=\"display: flex; color: #40B8FA; font-size: 20px; margin-left: 25px;\">ä»£ç æ“ä½œ</span><span class=\"suffix\" style=\"display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(64, 184, 250, .5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;\"></span></h2>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">ä½¿ç”¨ lettuce è¿æ¥ redis ï¼Œå¹¶å¾ªç¯æŸ¥çœ‹ k1 çš„å€¼</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #333; background: #f8f8f8; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\"><span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">//&nbsp;&lt;1&gt;&nbsp;åˆ›å»ºå•æœºè¿æ¥çš„è¿æ¥ä¿¡æ¯</span><br>RedisURI&nbsp;redisUri&nbsp;=&nbsp;RedisURI.builder()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">//</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.withHost(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"127.0.0.1\"</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.withPort(<span class=\"hljs-number\" style=\"color: #008080; line-height: 26px;\">6379</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.build();<br>RedisClient&nbsp;redisClient&nbsp;=&nbsp;RedisClient.create(redisUri);<br>StatefulRedisConnection&lt;String,&nbsp;String&gt;&nbsp;otherParty&nbsp;=&nbsp;redisClient.connect();<br>RedisCommands&lt;String,&nbsp;String&gt;&nbsp;commands&nbsp;=&nbsp;otherParty.sync();<br>StatefulRedisConnection&lt;String,&nbsp;String&gt;&nbsp;connection&nbsp;=&nbsp;redisClient.connect();<br><span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">//&nbsp;&lt;2&gt;&nbsp;åˆ›å»ºç¼“å­˜è®¿é—®å™¨</span><br>Map&lt;String,&nbsp;String&gt;&nbsp;clientCache&nbsp;=&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">new</span>&nbsp;ConcurrentHashMap&lt;&gt;();&nbsp;<span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">//map&nbsp;è‡ªåŠ¨ä¿å­˜æ‰€æœ‰æ“ä½œkeyçš„&nbsp;key=value</span><br>CacheFrontend&lt;String,&nbsp;String&gt;&nbsp;frontend&nbsp;=&nbsp;ClientSideCaching.enable(CacheAccessor.forMap(clientCache),&nbsp;connection,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TrackingArgs.Builder.enabled());<br><br><span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">//&nbsp;&lt;3&gt;&nbsp;å®¢æˆ·ç«¯æ­£å¸¸å†™å…¥æµ‹è¯•æ•°æ®&nbsp;k1&nbsp;v1</span><br>String&nbsp;key&nbsp;=&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"k1\"</span>;<br>commands.set(key,&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"v1\"</span>);<br><span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">//&nbsp;&lt;4&gt;&nbsp;å¾ªç¯è¯»å–</span><br><span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">while</span>&nbsp;(<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">true</span>)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">//&nbsp;&lt;4.1&gt;&nbsp;ç¼“å­˜è®¿é—®å™¨ä¸­çš„å€¼ï¼ŒæŸ¥çœ‹æ˜¯å¦å’Œ&nbsp;Redis&nbsp;æœåŠ¡ç«¯åŒæ­¥</span><br>&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;cachedValue&nbsp;=&nbsp;frontend.get(key);<br>&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"å½“å‰&nbsp;k1&nbsp;çš„å€¼ä¸º:---&gt;\"</span>&nbsp;+&nbsp;cachedValue);<br>&nbsp;&nbsp;&nbsp;&nbsp;Thread.sleep(<span class=\"hljs-number\" style=\"color: #008080; line-height: 26px;\">3000</span>);<br>}<br></code></pre>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">redis-cli å®¢æˆ·ç«¯åŒæ—¶æ“ä½œ k1 ä¿®æ”¹ k1 çš„å€¼</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #333; background: #f8f8f8; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\"><br>./redis-cli&nbsp;-h&nbsp;127.0.0.1&nbsp;-p&nbsp;6379<br><span class=\"hljs-meta\" style=\"color: #999; font-weight: bold; line-height: 26px;\"><br>&gt;</span><span class=\"bash\" style=\"line-height: 26px;\">&nbsp;<span class=\"hljs-built_in\" style=\"color: #0086b3; line-height: 26px;\">set</span>&nbsp;k1&nbsp;v2</span><br></code></pre>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">æ³¨æ„æŸ¥çœ‹ æ§åˆ¶å°æ—¥å¿—</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #333; background: #f8f8f8; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\">...<br>å½“å‰&nbsp;k1&nbsp;çš„å€¼ä¸º:---&gt;v1<br>å½“å‰&nbsp;k1&nbsp;çš„å€¼ä¸º:---&gt;v1<br>å½“å‰&nbsp;k1&nbsp;çš„å€¼ä¸º:---&gt;v1<br>å½“å‰&nbsp;k1&nbsp;çš„å€¼ä¸º:---&gt;v2<br>å½“å‰&nbsp;k1&nbsp;çš„å€¼ä¸º:---&gt;v2<br>å½“å‰&nbsp;k1&nbsp;çš„å€¼ä¸º:---&gt;v2<br>....<br></code></pre>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å¦‚ä¸Šï¼š k1 çš„å€¼åœ¨å…¶ä»–å®¢æˆ·ç«¯ï¼ˆredis-cliï¼‰ä¿®æ”¹ï¼Œlettuce å®¢æˆ·ç«¯ç¡®å®æ„ŸçŸ¥åˆ°äº†æ•°æ®å˜åŒ–ã€‚ ä½† lettuce åˆ°åº• <code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">CacheFrontend.get</code> åˆ°åº•æœ‰æ²¡æœ‰æŸ¥è¯¢ redis å‘¢ï¼Ÿ</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹ç›‘æ§çœ‹ä¸‹å®¢æˆ·ç«¯å…·ä½“çš„æ“ä½œç»†èŠ‚</p>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #40B8FA;\"><span class=\"prefix\" style=\"display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://my-wechat.mdnice.com/fullstack-1.png); margin-bottom: -22px;\"></span><span class=\"content\" style=\"display: flex; color: #40B8FA; font-size: 20px; margin-left: 25px;\">ç›‘æ§</span><span class=\"suffix\" style=\"display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(64, 184, 250, .5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;\"></span></h2>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #333; background: #f8f8f8; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\"><br>./redis-cli&nbsp;-h&nbsp;127.0.0.1&nbsp;-p&nbsp;6379<br><span class=\"hljs-meta\" style=\"color: #999; font-weight: bold; line-height: 26px;\"><br>&gt;</span><span class=\"bash\" style=\"line-height: 26px;\">&nbsp;MONITOR</span><br>OK<br>1595922453.165088&nbsp;[0&nbsp;172.16.1.96:57482]&nbsp;\"SET\"&nbsp;\"k1\"&nbsp;\"v1\"&nbsp;&nbsp;&nbsp;#&nbsp;å¯¹åº”&nbsp;&lt;3&gt;&nbsp;å†™å…¥æµ‹è¯•æ•°æ®<br>1595922453.168238&nbsp;[0&nbsp;172.16.1.96:57483]&nbsp;\"GET\"&nbsp;\"k1\"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&lt;4.1&gt;&nbsp;ç¼“å­˜è®¿é—®å™¨ä¸­çš„å€¼ï¼Œç”±äºç¬¬ä¸€æ¬¡æŸ¥è¯¢ä¸ºç©ºéœ€è¦ç©¿é€å»æŸ¥è¯¢&nbsp;redis-server<br>1595922466.525942&nbsp;[0&nbsp;172.16.1.96:57498]&nbsp;\"COMMAND\"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;å…¶ä»–å®¢æˆ·ç«¯&nbsp;redis-cli&nbsp;æ¥å…¥&nbsp;æé†’<br>1595922472.046488&nbsp;[0&nbsp;172.16.1.96:57498]&nbsp;\"set\"&nbsp;\"k1\"&nbsp;\"v2\"&nbsp;&nbsp;&nbsp;#&nbsp;å…¶ä»–å®¢æˆ·ç«¯&nbsp;æ“ä½œ&nbsp;k1<br>1595922474.208214&nbsp;[0&nbsp;172.16.1.96:57483]&nbsp;\"GET\"&nbsp;\"k1\"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;ç”±äºk1&nbsp;å€¼å‘ç”Ÿå˜åŒ–ï¼Œå¾ªç¯&nbsp;&lt;4.1&gt;&nbsp;ä¼šé‡æ–°æŸ¥è¯¢redis-server<br></code></pre>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å¦‚ä¸Šï¼š è™½ç„¶æ˜¯ä¸ªæ­»å¾ªç¯ï¼Œä½†æ˜¯å…³äº redis æ“ä½œåªæœ‰ä»¥ä¸Šæ³¨é‡Šçš„å‡ æ¡ï¼Œè¯´æ˜å®¢æˆ·ç«¯ç¼“å­˜ç”Ÿæ•ˆã€‚</p>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #40B8FA;\"><span class=\"prefix\" style=\"display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://my-wechat.mdnice.com/fullstack-1.png); margin-bottom: -22px;\"></span><span class=\"content\" style=\"display: flex; color: #40B8FA; font-size: 20px; margin-left: 25px;\">æ€»ç»“</span><span class=\"suffix\" style=\"display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(64, 184, 250, .5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;\"></span></h2>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">å½“å‰ä»…æœ‰ lettuce æ”¯æŒæ­¤åŠŸèƒ½ï¼Œjedis è¿˜æœªæ”¯æŒ</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">spring-boot-data-redis æš‚æœªæ”¯æŒæ­¤åŠŸèƒ½ï¼Œä¼°è®¡éœ€è¦ spring boot 2.5 ç‰ˆæœ¬</section></li></ul>\n</section>\n\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d7624c14879a4d96ad07e0d8189230dd~tplv-k3u1fbpfcp-zoom-1.image)", "user_name": "å†·å†·zz", "description": "Javaer | Spring Boot Committer | Spring Cloud Commiter", "got_view_count": 210410, "category_name": "åç«¯", "ctime": 1457483880}
{"tag_name": "Java", "concern_user_count": 252044, "user_id": "3509296845313741", "title": "æ–°ä¸€ä»£åƒåœ¾å›æ”¶å™¨ZGCçš„æ¢ç´¢ä¸å®è·µ", "mark_content": "> å¾ˆå¤šä½å»¶è¿Ÿé«˜å¯ç”¨JavaæœåŠ¡çš„ç³»ç»Ÿå¯ç”¨æ€§ç»å¸¸å—GCåœé¡¿çš„å›°æ‰°ï¼Œä½œä¸ºæ–°ä¸€ä»£çš„ä½å»¶è¿Ÿåƒåœ¾å›æ”¶å™¨ï¼ŒZGCåœ¨å¤§å†…å­˜ä½å»¶è¿ŸæœåŠ¡çš„å†…å­˜ç®¡ç†å’Œå›æ”¶æ–¹é¢ï¼Œæœ‰ç€éå¸¸ä¸é”™çš„è¡¨ç°ã€‚æœ¬æ–‡ä»GCä¹‹ç—›ã€ZGCåŸç†ã€ZGCè°ƒä¼˜å®è·µã€å‡çº§ZGCæ•ˆæœç­‰ç»´åº¦å±•å¼€ï¼Œè¯¦è¿°äº†ZGCåœ¨ç¾å›¢ä½å»¶æ—¶åœºæ™¯ä¸­çš„åº”ç”¨ï¼Œä»¥åŠåœ¨ç”Ÿäº§ç¯å¢ƒä¸­å–å¾—çš„ä¸€äº›æˆæœã€‚å¸Œæœ›è¿™äº›å®è·µå¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©æˆ–è€…å¯å‘ã€‚\n\n[ZGC](https://wiki.openjdk.java.net/display/zgc/Main)ï¼ˆThe Z Garbage Collectorï¼‰æ˜¯JDK 11ä¸­æ¨å‡ºçš„ä¸€æ¬¾ä½å»¶è¿Ÿåƒåœ¾å›æ”¶å™¨ï¼Œå®ƒçš„è®¾è®¡ç›®æ ‡åŒ…æ‹¬ï¼š\n\n* åœé¡¿æ—¶é—´ä¸è¶…è¿‡10msï¼›\n* åœé¡¿æ—¶é—´ä¸ä¼šéšç€å †çš„å¤§å°ï¼Œæˆ–è€…æ´»è·ƒå¯¹è±¡çš„å¤§å°è€Œå¢åŠ ï¼›\n* æ”¯æŒ8MB~4TBçº§åˆ«çš„å †ï¼ˆæœªæ¥æ”¯æŒ16TBï¼‰ã€‚\n\nä»è®¾è®¡ç›®æ ‡æ¥çœ‹ï¼Œæˆ‘ä»¬çŸ¥é“ZGCé€‚ç”¨äºå¤§å†…å­˜ä½å»¶è¿ŸæœåŠ¡çš„å†…å­˜ç®¡ç†å’Œå›æ”¶ã€‚æœ¬æ–‡ä¸»è¦ä»‹ç»ZGCåœ¨ä½å»¶æ—¶åœºæ™¯ä¸­çš„åº”ç”¨å’Œå“è¶Šè¡¨ç°ï¼Œæ–‡ç« å†…å®¹ä¸»è¦åˆ†ä¸ºå››éƒ¨åˆ†ï¼š\n\n* **GCä¹‹ç—›**ï¼šä»‹ç»å®é™…ä¸šåŠ¡ä¸­é‡åˆ°çš„GCç—›ç‚¹ï¼Œå¹¶åˆ†æCMSæ”¶é›†å™¨å’ŒG1æ”¶é›†å™¨åœé¡¿æ—¶é—´ç“¶é¢ˆï¼›\n* **ZGCåŸç†**ï¼šåˆ†æZGCåœé¡¿æ—¶é—´æ¯”G1æˆ–CMSæ›´çŸ­çš„æœ¬è´¨åŸå› ï¼Œä»¥åŠèƒŒåçš„æŠ€æœ¯åŸç†ï¼›\n* **ZGCè°ƒä¼˜å®è·µ**ï¼šé‡ç‚¹åˆ†äº«å¯¹ZGCè°ƒä¼˜çš„ç†è§£ï¼Œå¹¶åˆ†æè‹¥å¹²ä¸ªå®é™…è°ƒä¼˜æ¡ˆä¾‹ï¼›\n* **å‡çº§ZGCæ•ˆæœ**ï¼šå±•ç¤ºåœ¨ç”Ÿäº§ç¯å¢ƒåº”ç”¨ZGCå–å¾—çš„æ•ˆæœã€‚\n\n## GCä¹‹ç—›\n\nå¾ˆå¤šä½å»¶è¿Ÿé«˜å¯ç”¨JavaæœåŠ¡çš„ç³»ç»Ÿå¯ç”¨æ€§ç»å¸¸å—GCåœé¡¿çš„å›°æ‰°ã€‚GCåœé¡¿æŒ‡åƒåœ¾å›æ”¶æœŸé—´STWï¼ˆStop The Worldï¼‰ï¼Œå½“STWæ—¶ï¼Œæ‰€æœ‰åº”ç”¨çº¿ç¨‹åœæ­¢æ´»åŠ¨ï¼Œç­‰å¾…GCåœé¡¿ç»“æŸã€‚ä»¥ç¾å›¢é£æ§æœåŠ¡ä¸ºä¾‹ï¼Œéƒ¨åˆ†ä¸Šæ¸¸ä¸šåŠ¡è¦æ±‚é£æ§æœåŠ¡65mså†…è¿”å›ç»“æœï¼Œå¹¶ä¸”å¯ç”¨æ€§è¦è¾¾åˆ°99.99%ã€‚ä½†å› ä¸ºGCåœé¡¿ï¼Œæˆ‘ä»¬æœªèƒ½è¾¾åˆ°ä¸Šè¿°å¯ç”¨æ€§ç›®æ ‡ã€‚å½“æ—¶ä½¿ç”¨çš„æ˜¯CMSåƒåœ¾å›æ”¶å™¨ï¼Œå•æ¬¡Young GC 40msï¼Œä¸€åˆ†é’Ÿ10æ¬¡ï¼Œæ¥å£å¹³å‡å“åº”æ—¶é—´30msã€‚é€šè¿‡è®¡ç®—å¯çŸ¥ï¼Œæœ‰ï¼ˆ40ms + 30ms) * 10æ¬¡ / 60000ms = 1.12%çš„è¯·æ±‚çš„å“åº”æ—¶é—´ä¼šå¢åŠ 0 ~ 40msä¸ç­‰ï¼Œå…¶ä¸­30ms * 10æ¬¡ / 60000ms = 0.5%çš„è¯·æ±‚å“åº”æ—¶é—´ä¼šå¢åŠ 40msã€‚å¯è§ï¼ŒGCåœé¡¿å¯¹å“åº”æ—¶é—´çš„å½±å“è¾ƒå¤§ã€‚ä¸ºäº†é™ä½GCåœé¡¿å¯¹ç³»ç»Ÿå¯ç”¨æ€§çš„å½±å“ï¼Œæˆ‘ä»¬ä»é™ä½å•æ¬¡GCæ—¶é—´å’Œé™ä½GCé¢‘ç‡ä¸¤ä¸ªè§’åº¦å‡ºå‘è¿›è¡Œäº†è°ƒä¼˜ï¼Œè¿˜æµ‹è¯•è¿‡G1åƒåœ¾å›æ”¶å™¨ï¼Œä½†è¿™ä¸‰é¡¹æªæ–½å‡æœªèƒ½é™ä½GCå¯¹æœåŠ¡å¯ç”¨æ€§çš„å½±å“ã€‚\n\n### CMSä¸G1åœé¡¿æ—¶é—´ç“¶é¢ˆ\n\nåœ¨ä»‹ç»ZGCä¹‹å‰ï¼Œé¦–å…ˆå›é¡¾ä¸€ä¸‹CMSå’ŒG1çš„GCè¿‡ç¨‹ä»¥åŠåœé¡¿æ—¶é—´çš„ç“¶é¢ˆã€‚CMSæ–°ç”Ÿä»£çš„Young GCã€G1å’ŒZGCéƒ½åŸºäºæ ‡è®°-å¤åˆ¶ç®—æ³•ï¼Œä½†ç®—æ³•å…·ä½“å®ç°çš„ä¸åŒå°±å¯¼è‡´äº†å·¨å¤§çš„æ€§èƒ½å·®å¼‚ã€‚\n\næ ‡è®°-å¤åˆ¶ç®—æ³•åº”ç”¨åœ¨CMSæ–°ç”Ÿä»£ï¼ˆParNewæ˜¯CMSé»˜è®¤çš„æ–°ç”Ÿä»£åƒåœ¾å›æ”¶å™¨ï¼‰å’ŒG1åƒåœ¾å›æ”¶å™¨ä¸­ã€‚æ ‡è®°-å¤åˆ¶ç®—æ³•å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š\n\n* æ ‡è®°é˜¶æ®µï¼Œå³ä»GC Rootsé›†åˆå¼€å§‹ï¼Œæ ‡è®°æ´»è·ƒå¯¹è±¡ï¼›\n* è½¬ç§»é˜¶æ®µï¼Œå³æŠŠæ´»è·ƒå¯¹è±¡å¤åˆ¶åˆ°æ–°çš„å†…å­˜åœ°å€ä¸Šï¼›\n* é‡å®šä½é˜¶æ®µï¼Œå› ä¸ºè½¬ç§»å¯¼è‡´å¯¹è±¡çš„åœ°å€å‘ç”Ÿäº†å˜åŒ–ï¼Œåœ¨é‡å®šä½é˜¶æ®µï¼Œæ‰€æœ‰æŒ‡å‘å¯¹è±¡æ—§åœ°å€çš„æŒ‡é’ˆéƒ½è¦è°ƒæ•´åˆ°å¯¹è±¡æ–°çš„åœ°å€ä¸Šã€‚\n\nä¸‹é¢ä»¥G1ä¸ºä¾‹ï¼Œé€šè¿‡G1ä¸­æ ‡è®°-å¤åˆ¶ç®—æ³•è¿‡ç¨‹ï¼ˆG1çš„Young GCå’ŒMixed GCå‡é‡‡ç”¨è¯¥ç®—æ³•ï¼‰ï¼Œåˆ†æG1åœé¡¿è€—æ—¶çš„ä¸»è¦ç“¶é¢ˆã€‚G1åƒåœ¾å›æ”¶å‘¨æœŸå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n![](https://p0.meituan.net/travelcube/2f56a9a249bc8d74f4f455782abce6be147997.png@1832w_848h_80q)\n\nG1çš„æ··åˆå›æ”¶è¿‡ç¨‹å¯ä»¥åˆ†ä¸ºæ ‡è®°é˜¶æ®µã€æ¸…ç†é˜¶æ®µå’Œå¤åˆ¶é˜¶æ®µã€‚\n\n**æ ‡è®°é˜¶æ®µåœé¡¿åˆ†æ**\n\n* åˆå§‹æ ‡è®°é˜¶æ®µï¼šåˆå§‹æ ‡è®°é˜¶æ®µæ˜¯æŒ‡ä»GC Rootså‡ºå‘æ ‡è®°å…¨éƒ¨ç›´æ¥å­èŠ‚ç‚¹çš„è¿‡ç¨‹ï¼Œè¯¥é˜¶æ®µæ˜¯STWçš„ã€‚ç”±äºGC Rootsæ•°é‡ä¸å¤šï¼Œé€šå¸¸è¯¥é˜¶æ®µè€—æ—¶éå¸¸çŸ­ã€‚\n* å¹¶å‘æ ‡è®°é˜¶æ®µï¼šå¹¶å‘æ ‡è®°é˜¶æ®µæ˜¯æŒ‡ä»GC Rootså¼€å§‹å¯¹å †ä¸­å¯¹è±¡è¿›è¡Œå¯è¾¾æ€§åˆ†æï¼Œæ‰¾å‡ºå­˜æ´»å¯¹è±¡ã€‚è¯¥é˜¶æ®µæ˜¯å¹¶å‘çš„ï¼Œå³åº”ç”¨çº¿ç¨‹å’ŒGCçº¿ç¨‹å¯ä»¥åŒæ—¶æ´»åŠ¨ã€‚å¹¶å‘æ ‡è®°è€—æ—¶ç›¸å¯¹é•¿å¾ˆå¤šï¼Œä½†å› ä¸ºä¸æ˜¯STWï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸å¤ªå…³å¿ƒè¯¥é˜¶æ®µè€—æ—¶çš„é•¿çŸ­ã€‚\n* å†æ ‡è®°é˜¶æ®µï¼šé‡æ–°æ ‡è®°é‚£äº›åœ¨å¹¶å‘æ ‡è®°é˜¶æ®µå‘ç”Ÿå˜åŒ–çš„å¯¹è±¡ã€‚è¯¥é˜¶æ®µæ˜¯STWçš„ã€‚\n\n**æ¸…ç†é˜¶æ®µåœé¡¿åˆ†æ**\n\n* æ¸…ç†é˜¶æ®µæ¸…ç‚¹å‡ºæœ‰å­˜æ´»å¯¹è±¡çš„åˆ†åŒºå’Œæ²¡æœ‰å­˜æ´»å¯¹è±¡çš„åˆ†åŒºï¼Œè¯¥é˜¶æ®µä¸ä¼šæ¸…ç†åƒåœ¾å¯¹è±¡ï¼Œä¹Ÿä¸ä¼šæ‰§è¡Œå­˜æ´»å¯¹è±¡çš„å¤åˆ¶ã€‚è¯¥é˜¶æ®µæ˜¯STWçš„ã€‚\n\n**å¤åˆ¶é˜¶æ®µåœé¡¿åˆ†æ**\n\n* å¤åˆ¶ç®—æ³•ä¸­çš„è½¬ç§»é˜¶æ®µéœ€è¦åˆ†é…æ–°å†…å­˜å’Œå¤åˆ¶å¯¹è±¡çš„æˆå‘˜å˜é‡ã€‚è½¬ç§»é˜¶æ®µæ˜¯STWçš„ï¼Œå…¶ä¸­å†…å­˜åˆ†é…é€šå¸¸è€—æ—¶éå¸¸çŸ­ï¼Œä½†å¯¹è±¡æˆå‘˜å˜é‡çš„å¤åˆ¶è€—æ—¶æœ‰å¯èƒ½è¾ƒé•¿ï¼Œè¿™æ˜¯å› ä¸ºå¤åˆ¶è€—æ—¶ä¸å­˜æ´»å¯¹è±¡æ•°é‡ä¸å¯¹è±¡å¤æ‚åº¦æˆæ­£æ¯”ã€‚å¯¹è±¡è¶Šå¤æ‚ï¼Œå¤åˆ¶è€—æ—¶è¶Šé•¿ã€‚\n\nå››ä¸ªSTWè¿‡ç¨‹ä¸­ï¼Œåˆå§‹æ ‡è®°å› ä¸ºåªæ ‡è®°GC Rootsï¼Œè€—æ—¶è¾ƒçŸ­ã€‚å†æ ‡è®°å› ä¸ºå¯¹è±¡æ•°å°‘ï¼Œè€—æ—¶ä¹Ÿè¾ƒçŸ­ã€‚æ¸…ç†é˜¶æ®µå› ä¸ºå†…å­˜åˆ†åŒºæ•°é‡å°‘ï¼Œè€—æ—¶ä¹Ÿè¾ƒçŸ­ã€‚è½¬ç§»é˜¶æ®µè¦å¤„ç†æ‰€æœ‰å­˜æ´»çš„å¯¹è±¡ï¼Œè€—æ—¶ä¼šè¾ƒé•¿ã€‚å› æ­¤ï¼ŒG1åœé¡¿æ—¶é—´çš„ç“¶é¢ˆä¸»è¦æ˜¯æ ‡è®°-å¤åˆ¶ä¸­çš„è½¬ç§»é˜¶æ®µSTWã€‚ä¸ºä»€ä¹ˆè½¬ç§»é˜¶æ®µä¸èƒ½å’Œæ ‡è®°é˜¶æ®µä¸€æ ·å¹¶å‘æ‰§è¡Œå‘¢ï¼Ÿä¸»è¦æ˜¯G1æœªèƒ½è§£å†³è½¬ç§»è¿‡ç¨‹ä¸­å‡†ç¡®å®šä½å¯¹è±¡åœ°å€çš„é—®é¢˜ã€‚\n\nG1çš„Young GCå’ŒCMSçš„Young GCï¼Œå…¶æ ‡è®°-å¤åˆ¶å…¨è¿‡ç¨‹STWï¼Œè¿™é‡Œä¸å†è¯¦ç»†é˜è¿°ã€‚\n\n## ZGCåŸç†\n\n### å…¨å¹¶å‘çš„ZGC\n\nä¸CMSä¸­çš„ParNewå’ŒG1ç±»ä¼¼ï¼ŒZGCä¹Ÿé‡‡ç”¨æ ‡è®°-å¤åˆ¶ç®—æ³•ï¼Œä¸è¿‡ZGCå¯¹è¯¥ç®—æ³•åšäº†é‡å¤§æ”¹è¿›ï¼šZGCåœ¨æ ‡è®°ã€è½¬ç§»å’Œé‡å®šä½é˜¶æ®µå‡ ä¹éƒ½æ˜¯å¹¶å‘çš„ï¼Œè¿™æ˜¯ZGCå®ç°åœé¡¿æ—¶é—´å°äº10msç›®æ ‡çš„æœ€å…³é”®åŸå› ã€‚\n\nZGCåƒåœ¾å›æ”¶å‘¨æœŸå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n![](https://p0.meituan.net/travelcube/40838f01e4c29cfe5423171f08771ef8156393.png@1812w_940h_80q)\n\nZGCåªæœ‰ä¸‰ä¸ªSTWé˜¶æ®µï¼š**åˆå§‹æ ‡è®°**ï¼Œ**å†æ ‡è®°**ï¼Œ**åˆå§‹è½¬ç§»**ã€‚å…¶ä¸­ï¼Œåˆå§‹æ ‡è®°å’Œåˆå§‹è½¬ç§»åˆ†åˆ«éƒ½åªéœ€è¦æ‰«ææ‰€æœ‰GC Rootsï¼Œå…¶å¤„ç†æ—¶é—´å’ŒGC Rootsçš„æ•°é‡æˆæ­£æ¯”ï¼Œä¸€èˆ¬æƒ…å†µè€—æ—¶éå¸¸çŸ­ï¼›å†æ ‡è®°é˜¶æ®µSTWæ—¶é—´å¾ˆçŸ­ï¼Œæœ€å¤š1msï¼Œè¶…è¿‡1msåˆ™å†æ¬¡è¿›å…¥å¹¶å‘æ ‡è®°é˜¶æ®µã€‚å³ï¼ŒZGCå‡ ä¹æ‰€æœ‰æš‚åœéƒ½åªä¾èµ–äºGC Rootsé›†åˆå¤§å°ï¼Œåœé¡¿æ—¶é—´ä¸ä¼šéšç€å †çš„å¤§å°æˆ–è€…æ´»è·ƒå¯¹è±¡çš„å¤§å°è€Œå¢åŠ ã€‚ä¸ZGCå¯¹æ¯”ï¼ŒG1çš„è½¬ç§»é˜¶æ®µå®Œå…¨STWçš„ï¼Œä¸”åœé¡¿æ—¶é—´éšå­˜æ´»å¯¹è±¡çš„å¤§å°å¢åŠ è€Œå¢åŠ ã€‚\n\n### ZGCå…³é”®æŠ€æœ¯\n\nZGCé€šè¿‡ç€è‰²æŒ‡é’ˆå’Œè¯»å±éšœæŠ€æœ¯ï¼Œè§£å†³äº†è½¬ç§»è¿‡ç¨‹ä¸­å‡†ç¡®è®¿é—®å¯¹è±¡çš„é—®é¢˜ï¼Œå®ç°äº†å¹¶å‘è½¬ç§»ã€‚å¤§è‡´åŸç†æè¿°å¦‚ä¸‹ï¼šå¹¶å‘è½¬ç§»ä¸­â€œå¹¶å‘â€æ„å‘³ç€GCçº¿ç¨‹åœ¨è½¬ç§»å¯¹è±¡çš„è¿‡ç¨‹ä¸­ï¼Œåº”ç”¨çº¿ç¨‹ä¹Ÿåœ¨ä¸åœåœ°è®¿é—®å¯¹è±¡ã€‚å‡è®¾å¯¹è±¡å‘ç”Ÿè½¬ç§»ï¼Œä½†å¯¹è±¡åœ°å€æœªåŠæ—¶æ›´æ–°ï¼Œé‚£ä¹ˆåº”ç”¨çº¿ç¨‹å¯èƒ½è®¿é—®åˆ°æ—§åœ°å€ï¼Œä»è€Œé€ æˆé”™è¯¯ã€‚è€Œåœ¨ZGCä¸­ï¼Œåº”ç”¨çº¿ç¨‹è®¿é—®å¯¹è±¡å°†è§¦å‘â€œè¯»å±éšœâ€ï¼Œå¦‚æœå‘ç°å¯¹è±¡è¢«ç§»åŠ¨äº†ï¼Œé‚£ä¹ˆâ€œè¯»å±éšœâ€ä¼šæŠŠè¯»å‡ºæ¥çš„æŒ‡é’ˆæ›´æ–°åˆ°å¯¹è±¡çš„æ–°åœ°å€ä¸Šï¼Œè¿™æ ·åº”ç”¨çº¿ç¨‹å§‹ç»ˆè®¿é—®çš„éƒ½æ˜¯å¯¹è±¡çš„æ–°åœ°å€ã€‚é‚£ä¹ˆï¼ŒJVMæ˜¯å¦‚ä½•åˆ¤æ–­å¯¹è±¡è¢«ç§»åŠ¨è¿‡å‘¢ï¼Ÿå°±æ˜¯åˆ©ç”¨å¯¹è±¡å¼•ç”¨çš„åœ°å€ï¼Œå³ç€è‰²æŒ‡é’ˆã€‚ä¸‹é¢ä»‹ç»ç€è‰²æŒ‡é’ˆå’Œè¯»å±éšœæŠ€æœ¯ç»†èŠ‚ã€‚\n\n**ç€è‰²æŒ‡é’ˆ**\n\n> ç€è‰²æŒ‡é’ˆæ˜¯ä¸€ç§å°†ä¿¡æ¯å­˜å‚¨åœ¨æŒ‡é’ˆä¸­çš„æŠ€æœ¯ã€‚\n\nZGCä»…æ”¯æŒ64ä½ç³»ç»Ÿï¼Œå®ƒæŠŠ64ä½è™šæ‹Ÿåœ°å€ç©ºé—´åˆ’åˆ†ä¸ºå¤šä¸ªå­ç©ºé—´ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n![](https://p0.meituan.net/travelcube/f620aa44eb0a756467889e64e13ee86338446.png@1568w_322h_80q)\n\nå…¶ä¸­ï¼Œ[0~4TB) å¯¹åº”Javaå †ï¼Œ[4TB ~ 8TB) ç§°ä¸ºM0åœ°å€ç©ºé—´ï¼Œ[8TB ~ 12TB) ç§°ä¸ºM1åœ°å€ç©ºé—´ï¼Œ[12TB ~ 16TB) é¢„ç•™æœªä½¿ç”¨ï¼Œ[16TB ~ 20TB) ç§°ä¸ºRemappedç©ºé—´ã€‚\n\nå½“åº”ç”¨ç¨‹åºåˆ›å»ºå¯¹è±¡æ—¶ï¼Œé¦–å…ˆåœ¨å †ç©ºé—´ç”³è¯·ä¸€ä¸ªè™šæ‹Ÿåœ°å€ï¼Œä½†è¯¥è™šæ‹Ÿåœ°å€å¹¶ä¸ä¼šæ˜ å°„åˆ°çœŸæ­£çš„ç‰©ç†åœ°å€ã€‚ZGCåŒæ—¶ä¼šä¸ºè¯¥å¯¹è±¡åœ¨M0ã€M1å’ŒRemappedåœ°å€ç©ºé—´åˆ†åˆ«ç”³è¯·ä¸€ä¸ªè™šæ‹Ÿåœ°å€ï¼Œä¸”è¿™ä¸‰ä¸ªè™šæ‹Ÿåœ°å€å¯¹åº”åŒä¸€ä¸ªç‰©ç†åœ°å€ï¼Œä½†è¿™ä¸‰ä¸ªç©ºé—´åœ¨åŒä¸€æ—¶é—´æœ‰ä¸”åªæœ‰ä¸€ä¸ªç©ºé—´æœ‰æ•ˆã€‚ZGCä¹‹æ‰€ä»¥è®¾ç½®ä¸‰ä¸ªè™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œæ˜¯å› ä¸ºå®ƒä½¿ç”¨â€œç©ºé—´æ¢æ—¶é—´â€æ€æƒ³ï¼Œå»é™ä½GCåœé¡¿æ—¶é—´ã€‚â€œç©ºé—´æ¢æ—¶é—´â€ä¸­çš„ç©ºé—´æ˜¯è™šæ‹Ÿç©ºé—´ï¼Œè€Œä¸æ˜¯çœŸæ­£çš„ç‰©ç†ç©ºé—´ã€‚åç»­ç« èŠ‚å°†è¯¦ç»†ä»‹ç»è¿™ä¸‰ä¸ªç©ºé—´çš„åˆ‡æ¢è¿‡ç¨‹ã€‚           \n\nä¸ä¸Šè¿°åœ°å€ç©ºé—´åˆ’åˆ†ç›¸å¯¹åº”ï¼ŒZGCå®é™…ä»…ä½¿ç”¨64ä½åœ°å€ç©ºé—´çš„ç¬¬0~41ä½ï¼Œè€Œç¬¬42~45ä½å­˜å‚¨å…ƒæ•°æ®ï¼Œç¬¬47~63ä½å›ºå®šä¸º0ã€‚\n\n![](https://p0.meituan.net/travelcube/507f599016eafffa0b98de7585a1c80b338346.png@2080w_624h_80q)\n\nZGCå°†å¯¹è±¡å­˜æ´»ä¿¡æ¯å­˜å‚¨åœ¨42~45ä½ä¸­ï¼Œè¿™ä¸ä¼ ç»Ÿçš„åƒåœ¾å›æ”¶å¹¶å°†å¯¹è±¡å­˜æ´»ä¿¡æ¯æ”¾åœ¨å¯¹è±¡å¤´ä¸­å®Œå…¨ä¸åŒã€‚\n\n**è¯»å±éšœ** \n\n> è¯»å±éšœæ˜¯JVMå‘åº”ç”¨ä»£ç æ’å…¥ä¸€å°æ®µä»£ç çš„æŠ€æœ¯ã€‚å½“åº”ç”¨çº¿ç¨‹ä»å †ä¸­è¯»å–å¯¹è±¡å¼•ç”¨æ—¶ï¼Œå°±ä¼šæ‰§è¡Œè¿™æ®µä»£ç ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä»…â€œä»å †ä¸­è¯»å–å¯¹è±¡å¼•ç”¨â€æ‰ä¼šè§¦å‘è¿™æ®µä»£ç ã€‚\n\nè¯»å±éšœç¤ºä¾‹ï¼š\n\n```Java\nObject o = obj.FieldA   // ä»å †ä¸­è¯»å–å¼•ç”¨ï¼Œéœ€è¦åŠ å…¥å±éšœ\n<Load barrier>\nObject p = o  // æ— éœ€åŠ å…¥å±éšœï¼Œå› ä¸ºä¸æ˜¯ä»å †ä¸­è¯»å–å¼•ç”¨\no.dosomething() // æ— éœ€åŠ å…¥å±éšœï¼Œå› ä¸ºä¸æ˜¯ä»å †ä¸­è¯»å–å¼•ç”¨\nint i =  obj.FieldB  //æ— éœ€åŠ å…¥å±éšœï¼Œå› ä¸ºä¸æ˜¯å¯¹è±¡å¼•ç”¨\n```\n\nZGCä¸­è¯»å±éšœçš„ä»£ç ä½œç”¨ï¼šåœ¨å¯¹è±¡æ ‡è®°å’Œè½¬ç§»è¿‡ç¨‹ä¸­ï¼Œç”¨äºç¡®å®šå¯¹è±¡çš„å¼•ç”¨åœ°å€æ˜¯å¦æ»¡è¶³æ¡ä»¶ï¼Œå¹¶ä½œå‡ºç›¸åº”åŠ¨ä½œã€‚\n\n### ZGCå¹¶å‘å¤„ç†æ¼”ç¤º \n\næ¥ä¸‹æ¥è¯¦ç»†ä»‹ç»ZGCä¸€æ¬¡åƒåœ¾å›æ”¶å‘¨æœŸä¸­åœ°å€è§†å›¾çš„åˆ‡æ¢è¿‡ç¨‹ï¼š\n\n* **åˆå§‹åŒ–**ï¼šZGCåˆå§‹åŒ–ä¹‹åï¼Œæ•´ä¸ªå†…å­˜ç©ºé—´çš„åœ°å€è§†å›¾è¢«è®¾ç½®ä¸ºRemappedã€‚ç¨‹åºæ­£å¸¸è¿è¡Œï¼Œåœ¨å†…å­˜ä¸­åˆ†é…å¯¹è±¡ï¼Œæ»¡è¶³ä¸€å®šæ¡ä»¶ååƒåœ¾å›æ”¶å¯åŠ¨ï¼Œæ­¤æ—¶è¿›å…¥æ ‡è®°é˜¶æ®µã€‚\n* **å¹¶å‘æ ‡è®°é˜¶æ®µ**ï¼šç¬¬ä¸€æ¬¡è¿›å…¥æ ‡è®°é˜¶æ®µæ—¶è§†å›¾ä¸ºM0ï¼Œå¦‚æœå¯¹è±¡è¢«GCæ ‡è®°çº¿ç¨‹æˆ–è€…åº”ç”¨çº¿ç¨‹è®¿é—®è¿‡ï¼Œé‚£ä¹ˆå°±å°†å¯¹è±¡çš„åœ°å€è§†å›¾ä»Remappedè°ƒæ•´ä¸ºM0ã€‚æ‰€ä»¥ï¼Œåœ¨æ ‡è®°é˜¶æ®µç»“æŸä¹‹åï¼Œå¯¹è±¡çš„åœ°å€è¦ä¹ˆæ˜¯M0è§†å›¾ï¼Œè¦ä¹ˆæ˜¯Remappedã€‚å¦‚æœå¯¹è±¡çš„åœ°å€æ˜¯M0è§†å›¾ï¼Œé‚£ä¹ˆè¯´æ˜å¯¹è±¡æ˜¯æ´»è·ƒçš„ï¼›å¦‚æœå¯¹è±¡çš„åœ°å€æ˜¯Remappedè§†å›¾ï¼Œè¯´æ˜å¯¹è±¡æ˜¯ä¸æ´»è·ƒçš„ã€‚\n* **å¹¶å‘è½¬ç§»é˜¶æ®µ**ï¼šæ ‡è®°ç»“æŸåå°±è¿›å…¥è½¬ç§»é˜¶æ®µï¼Œæ­¤æ—¶åœ°å€è§†å›¾å†æ¬¡è¢«è®¾ç½®ä¸ºRemappedã€‚å¦‚æœå¯¹è±¡è¢«GCè½¬ç§»çº¿ç¨‹æˆ–è€…åº”ç”¨çº¿ç¨‹è®¿é—®è¿‡ï¼Œé‚£ä¹ˆå°±å°†å¯¹è±¡çš„åœ°å€è§†å›¾ä»M0è°ƒæ•´ä¸ºRemappedã€‚\n\nå…¶å®ï¼Œåœ¨æ ‡è®°é˜¶æ®µå­˜åœ¨ä¸¤ä¸ªåœ°å€è§†å›¾M0å’ŒM1ï¼Œä¸Šé¢çš„è¿‡ç¨‹æ˜¾ç¤ºåªç”¨äº†ä¸€ä¸ªåœ°å€è§†å›¾ã€‚ä¹‹æ‰€ä»¥è®¾è®¡æˆä¸¤ä¸ªï¼Œæ˜¯ä¸ºäº†åŒºåˆ«å‰ä¸€æ¬¡æ ‡è®°å’Œå½“å‰æ ‡è®°ã€‚ä¹Ÿå³ï¼Œç¬¬äºŒæ¬¡è¿›å…¥å¹¶å‘æ ‡è®°é˜¶æ®µåï¼Œåœ°å€è§†å›¾è°ƒæ•´ä¸ºM1ï¼Œè€ŒéM0ã€‚\n\nç€è‰²æŒ‡é’ˆå’Œè¯»å±éšœæŠ€æœ¯ä¸ä»…åº”ç”¨åœ¨å¹¶å‘è½¬ç§»é˜¶æ®µï¼Œè¿˜åº”ç”¨åœ¨å¹¶å‘æ ‡è®°é˜¶æ®µï¼šå°†å¯¹è±¡è®¾ç½®ä¸ºå·²æ ‡è®°ï¼Œä¼ ç»Ÿçš„åƒåœ¾å›æ”¶å™¨éœ€è¦è¿›è¡Œä¸€æ¬¡å†…å­˜è®¿é—®ï¼Œå¹¶å°†å¯¹è±¡å­˜æ´»ä¿¡æ¯æ”¾åœ¨å¯¹è±¡å¤´ä¸­ï¼›è€Œåœ¨ZGCä¸­ï¼Œåªéœ€è¦è®¾ç½®æŒ‡é’ˆåœ°å€çš„ç¬¬42~45ä½å³å¯ï¼Œå¹¶ä¸”å› ä¸ºæ˜¯å¯„å­˜å™¨è®¿é—®ï¼Œæ‰€ä»¥é€Ÿåº¦æ¯”è®¿é—®å†…å­˜æ›´å¿«ã€‚\n\n![](https://p0.meituan.net/travelcube/a621733099b8fda2a0f38a8859e6a114213563.png@2070w_806h_80q)\n\n## ZGCè°ƒä¼˜å®è·µ\n\nZGCä¸æ˜¯â€œé“¶å¼¹â€ï¼Œéœ€è¦æ ¹æ®æœåŠ¡çš„å…·ä½“ç‰¹ç‚¹è¿›è¡Œè°ƒä¼˜ã€‚ç½‘ç»œä¸Šèƒ½æœç´¢åˆ°å®æˆ˜ç»éªŒè¾ƒå°‘ï¼Œè°ƒä¼˜ç†è®ºéœ€è‡ªè¡Œæ‘¸ç´¢ï¼Œæˆ‘ä»¬åœ¨æ­¤é˜¶æ®µä¹Ÿè€—è´¹äº†ä¸å°‘æ—¶é—´ï¼Œæœ€ç»ˆæ‰è¾¾åˆ°ç†æƒ³çš„æ€§èƒ½ã€‚æœ¬æ–‡çš„ä¸€ä¸ªç›®çš„æ˜¯åˆ—ä¸¾ä¸€äº›ä½¿ç”¨ZGCæ—¶å¸¸è§çš„é—®é¢˜ï¼Œå¸®åŠ©å¤§å®¶ä½¿ç”¨ZGCæé«˜æœåŠ¡å¯ç”¨æ€§ã€‚\n\n### è°ƒä¼˜åŸºç¡€çŸ¥è¯†\n\n**ç†è§£ZGCé‡è¦é…ç½®å‚æ•°**\n\nä»¥æˆ‘ä»¬æœåŠ¡åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ZGCå‚æ•°é…ç½®ä¸ºä¾‹ï¼Œè¯´æ˜å„ä¸ªå‚æ•°çš„ä½œç”¨ï¼š\n\né‡è¦å‚æ•°é…ç½®æ ·ä¾‹ï¼š\n\n```Shell\n-Xms10G -Xmx10G \n-XX:ReservedCodeCacheSize=256m -XX:InitialCodeCacheSize=256m \n-XX:+UnlockExperimentalVMOptions -XX:+UseZGC \n-XX:ConcGCThreads=2 -XX:ParallelGCThreads=6 \n-XX:ZCollectionInterval=120 -XX:ZAllocationSpikeTolerance=5 \n-XX:+UnlockDiagnosticVMOptions -XX:-ZProactive \n-Xlog:safepoint,classhisto*=trace,age*,gc*=info:file=/opt/logs/logs/gc-%t.log:time,tid,tags:filecount=5,filesize=50m \n```\n\n**-Xms -Xmx**ï¼šå †çš„æœ€å¤§å†…å­˜å’Œæœ€å°å†…å­˜ï¼Œè¿™é‡Œéƒ½è®¾ç½®ä¸º10Gï¼Œç¨‹åºçš„å †å†…å­˜å°†ä¿æŒ10Gä¸å˜ã€‚\n**-XX:ReservedCodeCacheSize -XX:InitialCodeCacheSize**ï¼šè®¾ç½®CodeCacheçš„å¤§å°ï¼Œ JITç¼–è¯‘çš„ä»£ç éƒ½æ”¾åœ¨CodeCacheä¸­ï¼Œä¸€èˆ¬æœåŠ¡64mæˆ–128må°±å·²ç»è¶³å¤Ÿã€‚æˆ‘ä»¬çš„æœåŠ¡å› ä¸ºæœ‰ä¸€å®šç‰¹æ®Šæ€§ï¼Œæ‰€ä»¥è®¾ç½®çš„è¾ƒå¤§ï¼Œåé¢ä¼šè¯¦ç»†ä»‹ç»ã€‚\n**-XX:+UnlockExperimentalVMOptions -XX:+UseZGC**ï¼šå¯ç”¨ZGCçš„é…ç½®ã€‚\n**-XX:ConcGCThreads**ï¼šå¹¶å‘å›æ”¶åƒåœ¾çš„çº¿ç¨‹ã€‚é»˜è®¤æ˜¯æ€»æ ¸æ•°çš„12.5%ï¼Œ8æ ¸CPUé»˜è®¤æ˜¯1ã€‚è°ƒå¤§åGCå˜å¿«ï¼Œä½†ä¼šå ç”¨ç¨‹åºè¿è¡Œæ—¶çš„CPUèµ„æºï¼Œååä¼šå—åˆ°å½±å“ã€‚\n**-XX:ParallelGCThreads**ï¼šSTWé˜¶æ®µä½¿ç”¨çº¿ç¨‹æ•°ï¼Œé»˜è®¤æ˜¯æ€»æ ¸æ•°çš„60%ã€‚\n**-XX:ZCollectionInterval**ï¼šZGCå‘ç”Ÿçš„æœ€å°æ—¶é—´é—´éš”ï¼Œå•ä½ç§’ã€‚\n**-XX:ZAllocationSpikeTolerance**ï¼šZGCè§¦å‘è‡ªé€‚åº”ç®—æ³•çš„ä¿®æ­£ç³»æ•°ï¼Œé»˜è®¤2ï¼Œæ•°å€¼è¶Šå¤§ï¼Œè¶Šæ—©çš„è§¦å‘ZGCã€‚\n**-XX:+UnlockDiagnosticVMOptions -XX:-ZProactive**ï¼šæ˜¯å¦å¯ç”¨ä¸»åŠ¨å›æ”¶ï¼Œé»˜è®¤å¼€å¯ï¼Œè¿™é‡Œçš„é…ç½®è¡¨ç¤ºå…³é—­ã€‚\n**-Xlog**ï¼šè®¾ç½®GCæ—¥å¿—ä¸­çš„å†…å®¹ã€æ ¼å¼ã€ä½ç½®ä»¥åŠæ¯ä¸ªæ—¥å¿—çš„å¤§å°ã€‚\n\n**ç†è§£ZGCè§¦å‘æ—¶æœº**\n\nç›¸æ¯”äºCMSå’ŒG1çš„GCè§¦å‘æœºåˆ¶ï¼ŒZGCçš„GCè§¦å‘æœºåˆ¶æœ‰å¾ˆå¤§ä¸åŒã€‚ZGCçš„æ ¸å¿ƒç‰¹ç‚¹æ˜¯å¹¶å‘ï¼ŒGCè¿‡ç¨‹ä¸­ä¸€ç›´æœ‰æ–°çš„å¯¹è±¡äº§ç”Ÿã€‚å¦‚ä½•ä¿è¯åœ¨GCå®Œæˆä¹‹å‰ï¼Œæ–°äº§ç”Ÿçš„å¯¹è±¡ä¸ä¼šå°†å †å æ»¡ï¼Œæ˜¯ZGCå‚æ•°è°ƒä¼˜çš„ç¬¬ä¸€å¤§ç›®æ ‡ã€‚å› ä¸ºåœ¨ZGCä¸­ï¼Œå½“åƒåœ¾æ¥ä¸åŠå›æ”¶å°†å †å æ»¡æ—¶ï¼Œä¼šå¯¼è‡´æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹åœé¡¿ï¼ŒæŒç»­æ—¶é—´å¯èƒ½é•¿è¾¾ç§’çº§ä¹‹ä¹…ã€‚\n\nZGCæœ‰å¤šç§GCè§¦å‘æœºåˆ¶ï¼Œæ€»ç»“å¦‚ä¸‹ï¼š\n\n* é˜»å¡å†…å­˜åˆ†é…è¯·æ±‚è§¦å‘ï¼šå½“åƒåœ¾æ¥ä¸åŠå›æ”¶ï¼Œåƒåœ¾å°†å †å æ»¡æ—¶ï¼Œä¼šå¯¼è‡´éƒ¨åˆ†çº¿ç¨‹é˜»å¡ã€‚æˆ‘ä»¬åº”å½“é¿å…å‡ºç°è¿™ç§è§¦å‘æ–¹å¼ã€‚æ—¥å¿—ä¸­å…³é”®å­—æ˜¯â€œAllocation Stallâ€ã€‚\n* åŸºäºåˆ†é…é€Ÿç‡çš„è‡ªé€‚åº”ç®—æ³•ï¼šæœ€ä¸»è¦çš„GCè§¦å‘æ–¹å¼ï¼Œå…¶ç®—æ³•åŸç†å¯ç®€å•æè¿°ä¸ºâ€ZGCæ ¹æ®è¿‘æœŸçš„å¯¹è±¡åˆ†é…é€Ÿç‡ä»¥åŠGCæ—¶é—´ï¼Œè®¡ç®—å‡ºå½“å†…å­˜å ç”¨è¾¾åˆ°ä»€ä¹ˆé˜ˆå€¼æ—¶è§¦å‘ä¸‹ä¸€æ¬¡GCâ€ã€‚è‡ªé€‚åº”ç®—æ³•çš„è¯¦ç»†ç†è®ºå¯å‚è€ƒå½­æˆå¯’ã€Šæ–°ä¸€ä»£åƒåœ¾å›æ”¶å™¨ZGCè®¾è®¡ä¸å®ç°ã€‹ä¸€ä¹¦ä¸­çš„å†…å®¹ã€‚é€šè¿‡ZAllocationSpikeToleranceå‚æ•°æ§åˆ¶é˜ˆå€¼å¤§å°ï¼Œè¯¥å‚æ•°é»˜è®¤2ï¼Œæ•°å€¼è¶Šå¤§ï¼Œè¶Šæ—©çš„è§¦å‘GCã€‚æˆ‘ä»¬é€šè¿‡è°ƒæ•´æ­¤å‚æ•°è§£å†³äº†ä¸€äº›é—®é¢˜ã€‚æ—¥å¿—ä¸­å…³é”®å­—æ˜¯â€œAllocation Rateâ€ã€‚\n* åŸºäºå›ºå®šæ—¶é—´é—´éš”ï¼šé€šè¿‡ZCollectionIntervalæ§åˆ¶ï¼Œé€‚åˆåº”å¯¹çªå¢æµé‡åœºæ™¯ã€‚æµé‡å¹³ç¨³å˜åŒ–æ—¶ï¼Œè‡ªé€‚åº”ç®—æ³•å¯èƒ½åœ¨å †ä½¿ç”¨ç‡è¾¾åˆ°95%ä»¥ä¸Šæ‰è§¦å‘GCã€‚æµé‡çªå¢æ—¶ï¼Œè‡ªé€‚åº”ç®—æ³•è§¦å‘çš„æ—¶æœºå¯èƒ½ä¼šè¿‡æ™šï¼Œå¯¼è‡´éƒ¨åˆ†çº¿ç¨‹é˜»å¡ã€‚æˆ‘ä»¬é€šè¿‡è°ƒæ•´æ­¤å‚æ•°è§£å†³æµé‡çªå¢åœºæ™¯çš„é—®é¢˜ï¼Œæ¯”å¦‚å®šæ—¶æ´»åŠ¨ã€ç§’æ€ç­‰åœºæ™¯ã€‚æ—¥å¿—ä¸­å…³é”®å­—æ˜¯â€œTimerâ€ã€‚\n* ä¸»åŠ¨è§¦å‘è§„åˆ™ï¼šç±»ä¼¼äºå›ºå®šé—´éš”è§„åˆ™ï¼Œä½†æ—¶é—´é—´éš”ä¸å›ºå®šï¼Œæ˜¯ZGCè‡ªè¡Œç®—å‡ºæ¥çš„æ—¶æœºï¼Œæˆ‘ä»¬çš„æœåŠ¡å› ä¸ºå·²ç»åŠ äº†åŸºäºå›ºå®šæ—¶é—´é—´éš”çš„è§¦å‘æœºåˆ¶ï¼Œæ‰€ä»¥é€šè¿‡-ZProactiveå‚æ•°å°†è¯¥åŠŸèƒ½å…³é—­ï¼Œä»¥å…GCé¢‘ç¹ï¼Œå½±å“æœåŠ¡å¯ç”¨æ€§ã€‚ æ—¥å¿—ä¸­å…³é”®å­—æ˜¯â€œProactiveâ€ã€‚\n* é¢„çƒ­è§„åˆ™ï¼šæœåŠ¡åˆšå¯åŠ¨æ—¶å‡ºç°ï¼Œä¸€èˆ¬ä¸éœ€è¦å…³æ³¨ã€‚æ—¥å¿—ä¸­å…³é”®å­—æ˜¯â€œWarmupâ€ã€‚\n* å¤–éƒ¨è§¦å‘ï¼šä»£ç ä¸­æ˜¾å¼è°ƒç”¨System.gc()è§¦å‘ã€‚ æ—¥å¿—ä¸­å…³é”®å­—æ˜¯â€œSystem.gc()â€ã€‚\n* å…ƒæ•°æ®åˆ†é…è§¦å‘ï¼šå…ƒæ•°æ®åŒºä¸è¶³æ—¶å¯¼è‡´ï¼Œä¸€èˆ¬ä¸éœ€è¦å…³æ³¨ã€‚ æ—¥å¿—ä¸­å…³é”®å­—æ˜¯â€œMetadata GC Thresholdâ€ã€‚\n\n**ç†è§£ZGCæ—¥å¿—**\n\nä¸€æ¬¡å®Œæ•´çš„GCè¿‡ç¨‹ï¼Œéœ€è¦æ³¨æ„çš„ç‚¹å·²åœ¨å›¾ä¸­æ ‡å‡ºã€‚\n\n![](https://p0.meituan.net/travelcube/33b1feaa5a9fdd44fa6c53a4704d2fc7362864.png@2146w_783h_80q)\n\næ³¨æ„ï¼šè¯¥æ—¥å¿—è¿‡æ»¤äº†è¿›å…¥å®‰å…¨ç‚¹çš„ä¿¡æ¯ã€‚æ­£å¸¸æƒ…å†µï¼Œåœ¨ä¸€æ¬¡GCè¿‡ç¨‹ä¸­è¿˜ç©¿æ’ç€è¿›å…¥å®‰å…¨ç‚¹çš„æ“ä½œã€‚\n\nGCæ—¥å¿—ä¸­æ¯ä¸€è¡Œéƒ½æ³¨æ˜äº†GCè¿‡ç¨‹ä¸­çš„ä¿¡æ¯ï¼Œå…³é”®ä¿¡æ¯å¦‚ä¸‹ï¼š\n\n* **Start**ï¼šå¼€å§‹GCï¼Œå¹¶æ ‡æ˜çš„GCè§¦å‘çš„åŸå› ã€‚ä¸Šå›¾ä¸­è§¦å‘åŸå› æ˜¯è‡ªé€‚åº”ç®—æ³•ã€‚\n* **Phase-Pause Mark Start**ï¼šåˆå§‹æ ‡è®°ï¼Œä¼šSTWã€‚\n* **Phase-Pause Mark End**ï¼šå†æ¬¡æ ‡è®°ï¼Œä¼šSTWã€‚\n* **Phase-Pause Relocate Start**ï¼šåˆå§‹è½¬ç§»ï¼Œä¼šSTWã€‚\n* **Heapä¿¡æ¯**ï¼šè®°å½•äº†GCè¿‡ç¨‹ä¸­Markã€Relocateå‰åçš„å †å¤§å°å˜åŒ–çŠ¶å†µã€‚Highå’ŒLowè®°å½•äº†å…¶ä¸­çš„æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼Œæˆ‘ä»¬ä¸€èˆ¬å…³æ³¨Highä¸­Usedçš„å€¼ï¼Œå¦‚æœè¾¾åˆ°100%ï¼Œåœ¨GCè¿‡ç¨‹ä¸­ä¸€å®šå­˜åœ¨å†…å­˜åˆ†é…ä¸è¶³çš„æƒ…å†µï¼Œéœ€è¦è°ƒæ•´GCçš„è§¦å‘æ—¶æœºï¼Œæ›´æ—©æˆ–è€…æ›´å¿«åœ°è¿›è¡ŒGCã€‚\n* **GCä¿¡æ¯ç»Ÿè®¡**ï¼šå¯ä»¥å®šæ—¶çš„æ‰“å°åƒåœ¾æ”¶é›†ä¿¡æ¯ï¼Œè§‚å¯Ÿ10ç§’å†…ã€10åˆ†é’Ÿå†…ã€10ä¸ªå°æ—¶å†…ï¼Œä»å¯åŠ¨åˆ°ç°åœ¨çš„æ‰€æœ‰ç»Ÿè®¡ä¿¡æ¯ã€‚åˆ©ç”¨è¿™äº›ç»Ÿè®¡ä¿¡æ¯ï¼Œå¯ä»¥æ’æŸ¥å®šä½ä¸€äº›å¼‚å¸¸ç‚¹ã€‚\n\næ—¥å¿—ä¸­å†…å®¹è¾ƒå¤šï¼Œå…³é”®ç‚¹å·²ç”¨çº¢çº¿æ ‡å‡ºï¼Œå«ä¹‰è¾ƒå¥½ç†è§£ï¼Œæ›´è¯¦ç»†çš„è§£é‡Šå¤§å®¶å¯ä»¥è‡ªè¡Œåœ¨ç½‘ä¸ŠæŸ¥é˜…èµ„æ–™ã€‚\n\n![](https://p1.meituan.net/travelcube/af918165262afd59ee8331c014953f381190232.png@2771w_2500h_80q)\n\n**ç†è§£ZGCåœé¡¿åŸå› **\n\næˆ‘ä»¬åœ¨å®æˆ˜è¿‡ç¨‹ä¸­å…±å‘ç°äº†6ç§ä½¿ç¨‹åºåœé¡¿çš„åœºæ™¯ï¼Œåˆ†åˆ«å¦‚ä¸‹ï¼š\n\n- **GCæ—¶ï¼Œåˆå§‹æ ‡è®°**ï¼šæ—¥å¿—ä¸­Pause Mark Startã€‚\n- **GCæ—¶ï¼Œå†æ ‡è®°**ï¼šæ—¥å¿—ä¸­Pause Mark Endã€‚\n- **GCæ—¶ï¼Œåˆå§‹è½¬ç§»**ï¼šæ—¥å¿—ä¸­Pause Relocate Startã€‚\n- **å†…å­˜åˆ†é…é˜»å¡**ï¼šå½“å†…å­˜ä¸è¶³æ—¶çº¿ç¨‹ä¼šé˜»å¡ç­‰å¾…GCå®Œæˆï¼Œå…³é”®å­—æ˜¯\"Allocation Stall\"ã€‚\n\n![](https://p0.meituan.net/travelcube/85c67c1ed8e8ab789760df164d62475181355.png@1188w_260h_80q)\n\n- **å®‰å…¨ç‚¹**ï¼šæ‰€æœ‰çº¿ç¨‹è¿›å…¥åˆ°å®‰å…¨ç‚¹åæ‰èƒ½è¿›è¡ŒGCï¼ŒZGCå®šæœŸè¿›å…¥å®‰å…¨ç‚¹åˆ¤æ–­æ˜¯å¦éœ€è¦GCã€‚å…ˆè¿›å…¥å®‰å…¨ç‚¹çš„çº¿ç¨‹éœ€è¦ç­‰å¾…åè¿›å…¥å®‰å…¨ç‚¹çš„çº¿ç¨‹ç›´åˆ°æ‰€æœ‰çº¿ç¨‹æŒ‚èµ·ã€‚\n- **dumpçº¿ç¨‹ã€å†…å­˜**ï¼šæ¯”å¦‚jstackã€jmapå‘½ä»¤ã€‚\n\n![](https://p0.meituan.net/travelcube/b9ad0cb5bc55c3d5796f3bb347b3989166875.png@1926w_114h_80q)\n![](https://p0.meituan.net/travelcube/a837e745bb412074b550bfcd5d596fc020071.png@1050w_87h_80q)\n\n### è°ƒä¼˜æ¡ˆä¾‹\n\næˆ‘ä»¬ç»´æŠ¤çš„æœåŠ¡åå«Zeusï¼Œå®ƒæ˜¯ç¾å›¢çš„è§„åˆ™å¹³å°ï¼Œå¸¸ç”¨äºé£æ§åœºæ™¯ä¸­çš„è§„åˆ™ç®¡ç†ã€‚è§„åˆ™è¿è¡Œæ˜¯åŸºäºå¼€æºçš„è¡¨è¾¾å¼æ‰§è¡Œå¼•æ“[Aviator](https://github.com/killme2008/aviator)ã€‚Aviatorå†…éƒ¨å°†æ¯ä¸€æ¡è¡¨è¾¾å¼è½¬åŒ–æˆJavaçš„ä¸€ä¸ªç±»ï¼Œé€šè¿‡è°ƒç”¨è¯¥ç±»çš„æ¥å£å®ç°è¡¨è¾¾å¼é€»è¾‘ã€‚\n\nZeusæœåŠ¡å†…çš„è§„åˆ™æ•°é‡è¶…è¿‡ä¸‡æ¡ï¼Œä¸”æ¯å°æœºå™¨æ¯å¤©çš„è¯·æ±‚é‡å‡ ç™¾ä¸‡ã€‚è¿™äº›å®¢è§‚æ¡ä»¶å¯¼è‡´Aviatorç”Ÿæˆçš„ç±»å’Œæ–¹æ³•ä¼šäº§ç”Ÿå¾ˆå¤šçš„ClassLoaderå’ŒCodeCacheï¼Œè¿™äº›åœ¨ä½¿ç”¨ZGCæ—¶éƒ½æˆä¸ºè¿‡GCçš„æ€§èƒ½ç“¶é¢ˆã€‚æ¥ä¸‹æ¥ä»‹ç»ä¸¤ç±»è°ƒä¼˜æ¡ˆä¾‹ã€‚\n\n**å†…å­˜åˆ†é…é˜»å¡ï¼Œç³»ç»Ÿåœé¡¿å¯è¾¾åˆ°ç§’çº§**\n\n**æ¡ˆä¾‹ä¸€ï¼šç§’æ€æ´»åŠ¨ä¸­æµé‡çªå¢ï¼Œå‡ºç°æ€§èƒ½æ¯›åˆº**\n\n**æ—¥å¿—ä¿¡æ¯**ï¼šå¯¹æ¯”å‡ºç°æ€§èƒ½æ¯›åˆºæ—¶é—´ç‚¹çš„GCæ—¥å¿—å’Œä¸šåŠ¡æ—¥å¿—ï¼Œå‘ç°JVMåœé¡¿äº†è¾ƒé•¿æ—¶é—´ï¼Œä¸”åœé¡¿æ—¶GCæ—¥å¿—ä¸­æœ‰å¤§é‡çš„â€œAllocation Stallâ€æ—¥å¿—ã€‚\n\n**åˆ†æ**ï¼šè¿™ç§æ¡ˆä¾‹å¤šå‡ºç°åœ¨â€œè‡ªé€‚åº”ç®—æ³•â€ä¸ºä¸»è¦GCè§¦å‘æœºåˆ¶çš„åœºæ™¯ä¸­ã€‚ZGCæ˜¯ä¸€æ¬¾å¹¶å‘çš„åƒåœ¾å›æ”¶å™¨ï¼ŒGCçº¿ç¨‹å’Œåº”ç”¨çº¿ç¨‹åŒæ—¶æ´»åŠ¨ï¼Œåœ¨GCè¿‡ç¨‹ä¸­ï¼Œè¿˜ä¼šäº§ç”Ÿæ–°çš„å¯¹è±¡ã€‚GCå®Œæˆä¹‹å‰ï¼Œæ–°äº§ç”Ÿçš„å¯¹è±¡å°†å †å æ»¡ï¼Œé‚£ä¹ˆåº”ç”¨çº¿ç¨‹å¯èƒ½å› ä¸ºç”³è¯·å†…å­˜å¤±è´¥è€Œå¯¼è‡´çº¿ç¨‹é˜»å¡ã€‚å½“ç§’æ€æ´»åŠ¨å¼€å§‹ï¼Œå¤§é‡è¯·æ±‚æ‰“å…¥ç³»ç»Ÿï¼Œä½†è‡ªé€‚åº”ç®—æ³•è®¡ç®—çš„GCè§¦å‘é—´éš”è¾ƒé•¿ï¼Œå¯¼è‡´GCè§¦å‘ä¸åŠæ—¶ï¼Œå¼•èµ·äº†å†…å­˜åˆ†é…é˜»å¡ï¼Œå¯¼è‡´åœé¡¿ã€‚\n\n**è§£å†³æ–¹æ³•ï¼š**\n\nï¼ˆ1ï¼‰å¼€å¯â€åŸºäºå›ºå®šæ—¶é—´é—´éš”â€œçš„GCè§¦å‘æœºåˆ¶ï¼š-XX:ZCollectionIntervalã€‚æ¯”å¦‚è°ƒæ•´ä¸º5ç§’ï¼Œç”šè‡³æ›´çŸ­ã€‚  \nï¼ˆ2ï¼‰å¢å¤§ä¿®æ­£ç³»æ•°-XX:ZAllocationSpikeToleranceï¼Œæ›´æ—©è§¦å‘GCã€‚ZGCé‡‡ç”¨æ­£æ€åˆ†å¸ƒæ¨¡å‹é¢„æµ‹å†…å­˜åˆ†é…é€Ÿç‡ï¼Œæ¨¡å‹ä¿®æ­£ç³»æ•°ZAllocationSpikeToleranceé»˜è®¤å€¼ä¸º2ï¼Œå€¼è¶Šå¤§ï¼Œè¶Šæ—©çš„è§¦å‘GCï¼ŒZeusä¸­æ‰€æœ‰é›†ç¾¤è®¾ç½®çš„æ˜¯5ã€‚\n\n**æ¡ˆä¾‹äºŒï¼šå‹æµ‹æ—¶ï¼Œæµé‡é€æ¸å¢å¤§åˆ°ä¸€å®šç¨‹åº¦åï¼Œå‡ºç°æ€§èƒ½æ¯›åˆº**\n\n**æ—¥å¿—ä¿¡æ¯**ï¼šå¹³å‡1ç§’GCä¸€æ¬¡ï¼Œä¸¤æ¬¡GCä¹‹é—´å‡ ä¹æ²¡æœ‰é—´éš”ã€‚\n\n**åˆ†æ**ï¼šGCè§¦å‘åŠæ—¶ï¼Œä½†å†…å­˜æ ‡è®°å’Œå›æ”¶é€Ÿåº¦è¿‡æ…¢ï¼Œå¼•èµ·å†…å­˜åˆ†é…é˜»å¡ï¼Œå¯¼è‡´åœé¡¿ã€‚\n\n**è§£å†³æ–¹æ³•**ï¼šå¢å¤§-XX:ConcGCThreadsï¼Œ åŠ å¿«å¹¶å‘æ ‡è®°å’Œå›æ”¶é€Ÿåº¦ã€‚ConcGCThreadsé»˜è®¤å€¼æ˜¯æ ¸æ•°çš„1/8ï¼Œ8æ ¸æœºå™¨ï¼Œé»˜è®¤å€¼æ˜¯1ã€‚è¯¥å‚æ•°å½±å“ç³»ç»Ÿååï¼Œå¦‚æœGCé—´éš”æ—¶é—´å¤§äºGCå‘¨æœŸï¼Œä¸å»ºè®®è°ƒæ•´è¯¥å‚æ•°ã€‚\n\n**GC Roots æ•°é‡å¤§ï¼Œå•æ¬¡GCåœé¡¿æ—¶é—´é•¿**\n\n**æ¡ˆä¾‹ä¸‰ï¼š å•æ¬¡GCåœé¡¿æ—¶é—´30msï¼Œä¸é¢„æœŸåœé¡¿10mså·¦å³æœ‰è¾ƒå¤§å·®è·**\n\n**æ—¥å¿—ä¿¡æ¯**ï¼šè§‚å¯ŸZGCæ—¥å¿—ä¿¡æ¯ç»Ÿè®¡ï¼Œâ€œPause Roots ClassLoaderDataGraphâ€ä¸€é¡¹è€—æ—¶è¾ƒé•¿ã€‚\n\n**åˆ†æ**ï¼šdumpå†…å­˜æ–‡ä»¶ï¼Œå‘ç°ç³»ç»Ÿä¸­æœ‰ä¸Šä¸‡ä¸ªClassLoaderå®ä¾‹ã€‚æˆ‘ä»¬çŸ¥é“ClassLoaderå±äºGC Rootsä¸€éƒ¨åˆ†ï¼Œä¸”ZGCåœé¡¿æ—¶é—´ä¸GC Rootsæˆæ­£æ¯”ï¼ŒGC Rootsæ•°é‡è¶Šå¤§ï¼Œåœé¡¿æ—¶é—´è¶Šä¹…ã€‚å†è¿›ä¸€æ­¥åˆ†æï¼ŒClassLoaderçš„ç±»åè¡¨æ˜ï¼Œè¿™äº›ClassLoaderå‡ç”±Aviatorç»„ä»¶ç”Ÿæˆã€‚åˆ†æAviatoræºç ï¼Œå‘ç°Aviatorå¯¹æ¯ä¸€ä¸ªè¡¨è¾¾å¼æ–°ç”Ÿæˆç±»æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªClassLoaderï¼Œè¿™å¯¼è‡´äº†ClassLoaderæ•°é‡å·¨å¤§çš„é—®é¢˜ã€‚åœ¨æ›´é«˜Aviatorç‰ˆæœ¬ä¸­ï¼Œè¯¥é—®é¢˜å·²ç»è¢«ä¿®å¤ï¼Œå³ä»…åˆ›å»ºä¸€ä¸ªClassLoaderä¸ºæ‰€æœ‰è¡¨è¾¾å¼ç”Ÿæˆç±»ã€‚\n\n**è§£å†³æ–¹æ³•**ï¼šå‡çº§Aviatorç»„ä»¶ç‰ˆæœ¬ï¼Œé¿å…ç”Ÿæˆå¤šä½™çš„ClassLoaderã€‚\n\n**æ¡ˆä¾‹å››ï¼šæœåŠ¡å¯åŠ¨åï¼Œè¿è¡Œæ—¶é—´è¶Šé•¿ï¼Œå•æ¬¡GCæ—¶é—´è¶Šé•¿ï¼Œé‡å¯åæ¢å¤**\n\n**æ—¥å¿—ä¿¡æ¯**ï¼šè§‚å¯ŸZGCæ—¥å¿—ä¿¡æ¯ç»Ÿè®¡ï¼Œâ€œPause Roots CodeCacheâ€çš„è€—æ—¶ä¼šéšç€æœåŠ¡è¿è¡Œæ—¶é—´é€æ¸å¢é•¿ã€‚\n\n**åˆ†æ**ï¼šCodeCacheç©ºé—´ç”¨äºå­˜æ”¾Javaçƒ­ç‚¹ä»£ç çš„JITç¼–è¯‘ç»“æœï¼Œè€ŒCodeCacheä¹Ÿå±äºGC Rootsä¸€éƒ¨åˆ†ã€‚é€šè¿‡æ·»åŠ -XX:+PrintCodeCacheOnCompilationå‚æ•°ï¼Œæ‰“å°CodeCacheä¸­çš„è¢«ä¼˜åŒ–çš„æ–¹æ³•ï¼Œå‘ç°å¤§é‡çš„Aviatorè¡¨è¾¾å¼ä»£ç ã€‚å®šä½åˆ°æ ¹æœ¬åŸå› ï¼Œæ¯ä¸ªè¡¨è¾¾å¼éƒ½æ˜¯ä¸€ä¸ªç±»ä¸­ä¸€ä¸ªæ–¹æ³•ã€‚éšç€è¿è¡Œæ—¶é—´è¶Šé•¿ï¼Œæ‰§è¡Œæ¬¡æ•°å¢åŠ ï¼Œè¿™äº›æ–¹æ³•ä¼šè¢«JITä¼˜åŒ–ç¼–è¯‘è¿›å…¥åˆ°Code Cacheä¸­ï¼Œå¯¼è‡´CodeCacheè¶Šæ¥è¶Šå¤§ã€‚\n\n**è§£å†³æ–¹æ³•**ï¼šJITæœ‰ä¸€äº›å‚æ•°é…ç½®å¯ä»¥è°ƒæ•´JITç¼–è¯‘çš„æ¡ä»¶ï¼Œä½†å¯¹äºæˆ‘ä»¬çš„é—®é¢˜éƒ½ä¸å¤ªé€‚ç”¨ã€‚æˆ‘ä»¬æœ€ç»ˆé€šè¿‡ä¸šåŠ¡ä¼˜åŒ–è§£å†³ï¼Œåˆ é™¤ä¸éœ€è¦æ‰§è¡Œçš„Aviatorè¡¨è¾¾å¼ï¼Œä»è€Œé¿å…äº†å¤§é‡Aviatoræ–¹æ³•è¿›å…¥CodeCacheä¸­ã€‚\n\nå€¼å¾—ä¸€æçš„æ˜¯ï¼Œæˆ‘ä»¬å¹¶ä¸æ˜¯åœ¨æ‰€æœ‰è¿™äº›é—®é¢˜éƒ½è§£å†³åæ‰å…¨é‡éƒ¨ç½²æ‰€æœ‰é›†ç¾¤ã€‚å³ä½¿å¼€å§‹æœ‰å„ç§å„æ ·çš„æ¯›åˆºï¼Œä½†è®¡ç®—åå‘ç°ï¼Œæœ‰å„ç§é—®é¢˜çš„ZGCä¹Ÿæ¯”ä¹‹å‰çš„CMSå¯¹æœåŠ¡å¯ç”¨æ€§å½±å“å°ã€‚æ‰€ä»¥ä»å¼€å§‹å‡†å¤‡ä½¿ç”¨ZGCåˆ°å…¨é‡éƒ¨ç½²ï¼Œå¤§æ¦‚ç”¨äº†2å‘¨çš„æ—¶é—´ã€‚åœ¨ä¹‹åçš„3ä¸ªæœˆæ—¶é—´é‡Œï¼Œæˆ‘ä»¬è¾¹åšä¸šåŠ¡éœ€æ±‚ï¼Œè¾¹è·Ÿè¿›è¿™äº›é—®é¢˜ï¼Œæœ€ç»ˆé€ä¸ªè§£å†³äº†ä¸Šè¿°é—®é¢˜ï¼Œä»è€Œä½¿ZGCåœ¨å„ä¸ªé›†ç¾¤ä¸Šè¾¾åˆ°äº†ä¸€ä¸ªæ›´å¥½è¡¨ç°ã€‚\n\n## å‡çº§ZGCæ•ˆæœ\n\n### å»¶è¿Ÿé™ä½\n\n> TP(Top Percentile)æ˜¯ä¸€é¡¹è¡¡é‡ç³»ç»Ÿå»¶è¿Ÿçš„æŒ‡æ ‡ï¼šTP999è¡¨ç¤º99.9%è¯·æ±‚éƒ½èƒ½è¢«å“åº”çš„æœ€å°è€—æ—¶ï¼›TP99è¡¨ç¤º99%è¯·æ±‚éƒ½èƒ½è¢«å“åº”çš„æœ€å°è€—æ—¶ã€‚\n\nåœ¨ZeusæœåŠ¡ä¸åŒé›†ç¾¤ä¸­ï¼ŒZGCåœ¨ä½å»¶è¿Ÿï¼ˆTP999 < 200msï¼‰åœºæ™¯ä¸­æ”¶ç›Šè¾ƒå¤§ï¼š\n\n- **TP999**ï¼šä¸‹é™12~142msï¼Œä¸‹é™å¹…åº¦18%~74%ã€‚\n- **TP99**ï¼šä¸‹é™5~28msï¼Œä¸‹é™å¹…åº¦10%~47%ã€‚\n\nè¶…ä½å»¶è¿Ÿï¼ˆTP999 < 20msï¼‰å’Œé«˜å»¶è¿Ÿï¼ˆTP999 > 200msï¼‰æœåŠ¡æ”¶ç›Šä¸å¤§ï¼ŒåŸå› æ˜¯è¿™äº›æœåŠ¡çš„å“åº”æ—¶é—´ç“¶é¢ˆä¸æ˜¯GCï¼Œè€Œæ˜¯å¤–éƒ¨ä¾èµ–çš„æ€§èƒ½ã€‚\n\n### ååä¸‹é™\n\nå¯¹ååé‡ä¼˜å…ˆçš„åœºæ™¯ï¼ŒZGCå¯èƒ½å¹¶ä¸é€‚åˆã€‚ä¾‹å¦‚ï¼ŒZeusæŸç¦»çº¿é›†ç¾¤åŸå…ˆä½¿ç”¨CMSï¼Œå‡çº§ZGCåï¼Œç³»ç»Ÿååé‡æ˜æ˜¾é™ä½ã€‚ç©¶å…¶åŸå› æœ‰äºŒï¼šç¬¬ä¸€ï¼ŒZGCæ˜¯å•ä»£åƒåœ¾å›æ”¶å™¨ï¼Œè€ŒCMSæ˜¯åˆ†ä»£åƒåœ¾å›æ”¶å™¨ã€‚å•ä»£åƒåœ¾å›æ”¶å™¨æ¯æ¬¡å¤„ç†çš„å¯¹è±¡æ›´å¤šï¼Œæ›´è€—è´¹CPUèµ„æºï¼›ç¬¬äºŒï¼ŒZGCä½¿ç”¨è¯»å±éšœï¼Œè¯»å±éšœæ“ä½œéœ€è€—è´¹é¢å¤–çš„è®¡ç®—èµ„æºã€‚\n\n## æ€»ç»“\n\nZGCä½œä¸ºä¸‹ä¸€ä»£åƒåœ¾å›æ”¶å™¨ï¼Œæ€§èƒ½éå¸¸ä¼˜ç§€ã€‚ZGCåƒåœ¾å›æ”¶è¿‡ç¨‹å‡ ä¹å…¨éƒ¨æ˜¯å¹¶å‘ï¼Œå®é™…STWåœé¡¿æ—¶é—´æçŸ­ï¼Œä¸åˆ°10msã€‚è¿™å¾—ç›Šäºå…¶é‡‡ç”¨çš„ç€è‰²æŒ‡é’ˆå’Œè¯»å±éšœæŠ€æœ¯ã€‚\n\nZeusåœ¨å‡çº§JDK 11+ZGCä¸­ï¼Œé€šè¿‡å°†é£é™©å’Œé—®é¢˜åˆ†ç±»ï¼Œç„¶åå„ä¸ªå‡»ç ´ï¼Œæœ€ç»ˆé¡ºåˆ©å®ç°äº†å‡çº§ç›®æ ‡ï¼ŒGCåœé¡¿ä¹Ÿå‡ ä¹ä¸å†å½±å“ç³»ç»Ÿå¯ç”¨æ€§ã€‚\n\næœ€åæ¨èå¤§å®¶å‡çº§ZGCï¼ŒZeusç³»ç»Ÿå› ä¸ºä¸šåŠ¡ç‰¹ç‚¹ï¼Œé‡åˆ°äº†è¾ƒå¤šé—®é¢˜ï¼Œè€Œé£æ§å…¶ä»–å›¢é˜Ÿåœ¨å‡çº§æ—¶éƒ½éå¸¸é¡ºåˆ©ã€‚æ¬¢è¿å¤§å®¶åŠ å…¥â€œZGCä½¿ç”¨äº¤æµâ€ç¾¤ã€‚\n\n\n## å‚è€ƒæ–‡çŒ®\n\n* [ZGCå®˜ç½‘](https://wiki.openjdk.java.net/display/zgc/Main)\n* å½­æˆå¯’.ã€Šæ–°ä¸€ä»£åƒåœ¾å›æ”¶å™¨ZGCè®¾è®¡ä¸å®ç°ã€‹. æœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾, 2019.\n* [ä»å®é™…æ¡ˆä¾‹èŠèŠJavaåº”ç”¨çš„GCä¼˜åŒ–](https://tech.meituan.com/2017/12/29/jvm-optimize.html)\n* [Java Hotspot G1 GCçš„ä¸€äº›å…³é”®æŠ€æœ¯](https://tech.meituan.com/2016/09/23/g1.html)\n\n## é™„å½•\n\n### å¦‚ä½•ä½¿ç”¨æ–°æŠ€æœ¯\n\nåœ¨ç”Ÿäº§ç¯å¢ƒå‡çº§JDK 11ï¼Œä½¿ç”¨ZGCï¼Œå¤§å®¶æœ€å…³å¿ƒçš„å¯èƒ½ä¸æ˜¯æ•ˆæœæ€ä¹ˆæ ·ï¼Œè€Œæ˜¯è¿™ä¸ªæ–°ç‰ˆæœ¬ç”¨çš„äººå°‘ï¼Œç½‘ä¸Šå®è·µä¹Ÿå°‘ï¼Œé ä¸é è°±ï¼Œç¨³ä¸ç¨³å®šã€‚å…¶æ¬¡æ˜¯å‡çº§æˆæœ¬ä¼šä¸ä¼šå¾ˆå¤§ï¼Œä¸‡ä¸€ä¸æˆåŠŸå²‚ä¸æ˜¯ç™½ç™½æµªè´¹æ—¶é—´ã€‚æ‰€ä»¥ï¼Œåœ¨ä½¿ç”¨æ–°æŠ€æœ¯å‰ï¼Œé¦–å…ˆè¦åšçš„æ˜¯è¯„ä¼°æ”¶ç›Šã€æˆæœ¬å’Œé£é™©ã€‚\n\n**è¯„ä¼°æ”¶ç›Š**\n\nå¯¹äºJDKè¿™ç§ä¸–ç•Œå…³æ³¨çš„ç¨‹åºï¼Œå¤§ç‰ˆæœ¬å‡çº§æ‰€å¼•å…¥çš„æ–°æŠ€æœ¯ä¸€èˆ¬å·²ç»åœ¨ç†è®ºä¸Šç»è¿‡éªŒè¯ã€‚æˆ‘ä»¬è¦åšçš„äº‹æƒ…å°±æ˜¯ç¡®å®šå½“å‰ç³»ç»Ÿçš„ç“¶é¢ˆæ˜¯å¦æ˜¯æ–°ç‰ˆæœ¬JDKå¯è§£å†³çš„é—®é¢˜ï¼Œåˆ‡å¿Œé—®é¢˜æœªè¯Šæ–­æ¸…æ¥šå°±é‡‡å–æªæ–½ã€‚è¯„ä¼°å®Œæ”¶ç›Šä¹‹åå†è¯„ä¼°æˆæœ¬å’Œé£é™©ï¼Œæ”¶ç›Šè¿‡å¤§æˆ–è€…è¿‡å°ï¼Œå…¶ä»–ä¸¤é¡¹å½±å“æƒé‡å°±ä¼šå°å¾ˆå¤šã€‚\n\nä»¥æœ¬æ–‡å¼€å¤´æåˆ°çš„æ¡ˆä¾‹ä¸ºä¾‹ï¼Œå‡è®¾GCæ¬¡æ•°ä¸å˜ï¼ˆ10æ¬¡/åˆ†é’Ÿ)ï¼Œä¸”å•æ¬¡GCæ—¶é—´ä»40msé™ä½10msã€‚é€šè¿‡è®¡ç®—ï¼Œä¸€åˆ†é’Ÿå†…æœ‰100/60000 = 0.17%çš„æ—¶é—´åœ¨è¿›è¡ŒGCï¼Œä¸”æœŸé—´æ‰€æœ‰è¯·æ±‚ä»…åœé¡¿10msï¼ŒGCæœŸé—´å½±å“çš„è¯·æ±‚æ•°å’Œå› GCå¢åŠ çš„å»¶è¿Ÿéƒ½æœ‰æ‰€å‡å°‘ã€‚\n\n**è¯„ä¼°æˆæœ¬**\n\nè¿™é‡Œä¸»è¦æŒ‡å‡çº§æ‰€éœ€è¦çš„äººåŠ›æˆæœ¬ã€‚æ­¤é¡¹ç›¸å¯¹æ¯”è¾ƒæˆç†Ÿï¼Œæ ¹æ®æ–°æŠ€æœ¯çš„ä½¿ç”¨æ‰‹å†Œåˆ¤æ–­æ”¹åŠ¨ç‚¹ã€‚è·Ÿåšå…¶ä»–é¡¹ç›®åŒºåˆ«ä¸å¤§ï¼Œä¸å†å…·ä½“ç»†è¯´ã€‚\n\nåœ¨æˆ‘ä»¬çš„å®è·µä¸­ï¼Œä¸¤å‘¨æ—¶é—´å®Œæˆçº¿ä¸Šéƒ¨ç½²ï¼Œè¾¾åˆ°å®‰å…¨ç¨³å®šè¿è¡Œçš„çŠ¶æ€ã€‚åç»­æŒç»­è¿­ä»£3ä¸ªæœˆï¼Œæ ¹æ®ä¸šåŠ¡åœºæ™¯å¯¹ZGCè¿›è¡Œäº†æ›´å¥‘åˆçš„ä¼˜åŒ–é€‚é…ã€‚\n\n**è¯„ä¼°é£é™©**\n\nå‡çº§JDKçš„é£é™©å¯ä»¥åˆ†ä¸ºä¸‰ç±»ï¼š\n\n- **å…¼å®¹æ€§é£é™©**ï¼šJavaç¨‹åºJARåŒ…ä¾èµ–å¾ˆå¤šï¼Œå‡çº§JDKç‰ˆæœ¬åç¨‹åºæ˜¯å¦èƒ½è¿è¡Œèµ·æ¥ã€‚ä¾‹å¦‚æˆ‘ä»¬çš„æœåŠ¡æ˜¯ä»JDK 7å‡çº§åˆ°JDK 11ï¼Œéœ€è¦è§£å†³è¾ƒå¤šJARåŒ…ä¸å…¼å®¹çš„é—®é¢˜ã€‚\n- **åŠŸèƒ½é£é™©**ï¼šè¿è¡Œèµ·æ¥åï¼Œæ˜¯å¦ä¼šæœ‰ä¸€äº›ç»„ä»¶é€»è¾‘å˜æ›´ï¼Œå½±å“ç°æœ‰åŠŸèƒ½çš„é€»è¾‘ã€‚\n- **æ€§èƒ½é£é™©**ï¼šåŠŸèƒ½å¦‚æœæ²¡æœ‰é—®é¢˜ï¼Œæ€§èƒ½æ˜¯å¦ç¨³å®šï¼Œèƒ½ç¨³å®šçš„åœ¨çº¿ä¸Šè¿è¡Œã€‚\n\nç»è¿‡åˆ†ç±»åï¼Œæ¯ç±»é£é™©çš„åº”å¯¹è½¬åŒ–æˆäº†å¸¸è§çš„æµ‹è¯•é—®é¢˜ï¼Œä¸å†å±äºæœªçŸ¥é£é™©ã€‚é£é™©æ˜¯æŒ‡ä¸ç¡®å®šçš„äº‹æƒ…ï¼Œå¦‚æœä¸ç¡®å®šçš„äº‹æƒ…éƒ½èƒ½è½¬åŒ–æˆå¯ç¡®å®šçš„äº‹æƒ…ï¼Œæ„å‘³ç€é£é™©å·²æ¶ˆé™¤ã€‚\n\n### å‡çº§JDK 11\n\né€‰æ‹©JDK 11ï¼Œæ˜¯å› ä¸ºåœ¨JDK 11ä¸­é¦–æ¬¡æ”¯æŒZGCï¼Œè€Œä¸”JDK 11å±äºé•¿æœŸæ”¯æŒï¼ˆLong Term Supportï¼ŒLTSï¼‰ç‰ˆæœ¬ï¼Œè‡³å°‘ä¼šè¢«ç»´æŠ¤ä¸‰å¹´ï¼Œæ™®é€šç‰ˆæœ¬ï¼ˆå¦‚JDK 12ã€JDK 13å’ŒJDK 14ï¼‰åªæœ‰6ä¸ªæœˆçš„ç»´æŠ¤å‘¨æœŸï¼Œä¸å»ºè®®ä½¿ç”¨ã€‚\n\n**æœ¬åœ°æµ‹è¯•ç¯å¢ƒå®‰è£…**\n\nä»ä¸¤ä¸ªæº[OpenJDK](https://jdk.java.net/archive/)å’Œ[OracleJDK](https://www.oracle.com/java/technologies/javase-jdk11-downloads.html) ä¸‹è½½JDK 11ï¼ŒäºŒä¸ªç‰ˆæœ¬çš„JDKä¸»è¦åŒºåˆ«æ˜¯é•¿æ—¶æœŸçš„å…è´¹å’Œä»˜è´¹ï¼ŒçŸ­æœŸå†…éƒ½å…è´¹ã€‚æ³¨æ„JDK 11ç‰ˆæœ¬ä¸­çš„ZGCä¸æ”¯æŒMac OSç³»ç»Ÿï¼Œåœ¨Mac OSç³»ç»Ÿä¸Šä½¿ç”¨JDK 11åªèƒ½ç”¨å…¶ä»–åƒåœ¾å›æ”¶å™¨ï¼Œå¦‚G1ã€‚\n\n**ç”Ÿäº§ç¯å¢ƒå®‰è£…**\n\nå‡çº§JDK 11ä¸ä»…ä»…æ˜¯å‡çº§è‡ªå·±é¡¹ç›®çš„JDKç‰ˆæœ¬ï¼Œè¿˜éœ€è¦ç¼–è¯‘ã€å‘å¸ƒéƒ¨ç½²ã€è¿è¡Œã€ç›‘æ§ã€æ€§èƒ½å†…å­˜åˆ†æå·¥å…·ç­‰é¡¹ç›®æ”¯æŒã€‚ç¾å›¢å†…éƒ¨çš„å®è·µï¼š\n\n**ç¼–è¯‘æ‰“åŒ…**ï¼šç¾å›¢å‘å¸ƒç³»ç»Ÿæ”¯æŒé€‰æ‹©JDK 11è¿›è¡Œç¼–è¯‘æ‰“åŒ…ã€‚\n**çº¿ä¸Šè¿è¡Œ & å…¨é‡éƒ¨ç½²**ï¼šè¦æ±‚çº¿ä¸Šæœºå™¨å·²å®‰è£…JDK11ï¼Œæœ‰3ç§æ–¹å¼ï¼š\n\n1.æ–°ç”³è¯·é»˜è®¤å®‰è£…JDK 11çš„è™šæ‹Ÿæœºï¼šè¯•ç”¨JDK 11æ—¶å¯ç”¨è¿™ç§æ–¹å¼ï¼›å…¨é‡éƒ¨ç½²æ—¶ï¼Œå¦‚æœæ–°ç”³è¯·æœºå™¨æ•°é‡è¿‡å¤šï¼Œå¯èƒ½æ²¡æœ‰è¶³å¤Ÿæœºå™¨èµ„æºã€‚\n2.é€šè¿‡æ‰‹å†™è„šæœ¬ç»™å­˜é‡è™šæ‹Ÿæœºå®‰è£…JDK 11ï¼šä¸æ¨èï¼Œä¸šåŠ¡åŒå­¦è¿‡å¤šå‚ä¸åˆ°è¿ç»´å½“ä¸­ã€‚\n3.ä½¿ç”¨å®¹å™¨æä¾›çš„é•œåƒéƒ¨ç½²åŠŸèƒ½ï¼Œåœ¨æ‰“åŒ…é•œåƒæ—¶å®‰è£…JDK 11ï¼šæ¨èæ–¹å¼ï¼Œä¸éœ€è¦æ–°ç”³è¯·èµ„æºã€‚\n\n**ç›‘æ§æŒ‡æ ‡**ï¼šä¸»è¦æ˜¯GCçš„æ—¶é—´å’Œé¢‘ç‡ï¼Œæˆ‘ä»¬é€šè¿‡ç¾å›¢çš„CATç›‘æ§ç³»ç»Ÿæ”¯æŒZGCæ•°æ®çš„æ”¶é›†ï¼ˆ[CATå·²å¼€æº](https://tech.meituan.com/2018/11/01/cat-in-depth-java-application-monitoring.html)ï¼‰ã€‚\n**æ€§èƒ½å†…å­˜åˆ†æ**ï¼šçº¿ä¸Šé‡åˆ°æ€§èƒ½é—®é¢˜æ—¶ï¼Œè¿˜éœ€è¦å€ŸåŠ©Profilingå·¥å…·ï¼Œç¾å›¢çš„æ€§èƒ½è¯Šæ–­ä¼˜åŒ–å¹³å°Scalpelå·²æ”¯æŒJDK 11çš„æ€§èƒ½å†…å­˜åˆ†æã€‚å¦‚æœä½ çš„å…¬å¸æ²¡æœ‰ç›¸å…³å·¥å…·ï¼Œæ¨èä½¿ç”¨JProfierã€‚\n\n**è§£å†³ç»„ä»¶å…¼å®¹æ€§**\n\næˆ‘ä»¬çš„é¡¹ç›®åŒ…å«äºŒåå¤šä¸‡è¡Œä»£ç ï¼Œéœ€è¦ä»JDK 7å‡çº§åˆ°JDK 11ï¼Œä¾èµ–ç»„ä»¶ä¼—å¤šã€‚è™½ç„¶çœ‹èµ·æ¥å‡çº§ä¼šæ¯”è¾ƒå¤æ‚ï¼Œä½†å®é™…åªèŠ±äº†ä¸¤å¤©æ—¶é—´å³è§£å†³äº†å…¼å®¹æ€§é—®é¢˜ã€‚å…·ä½“è¿‡ç¨‹å¦‚ä¸‹ï¼š\n\n1.ç¼–è¯‘ï¼Œéœ€è¦ä¿®æ”¹pomæ–‡ä»¶ä¸­çš„buildé…ç½®ï¼Œæ ¹æ®æŠ¥é”™ä½œä¿®æ”¹ï¼Œä¸»è¦æœ‰ä¸¤ç±»ï¼š\n\na.ä¸€äº›ç±»è¢«åˆ é™¤ï¼šæ¯”å¦‚â€œsun.misc.BASE64Encoderâ€ï¼Œæ‰¾åˆ°æ›¿æ¢ç±»java.util.Base64å³å¯ã€‚\n\nb.ç»„ä»¶ä¾èµ–ç‰ˆæœ¬ä¸å…¼å®¹JDK 11é—®é¢˜ï¼šæ‰¾åˆ°å¯¹åº”ä¾èµ–ç»„ä»¶ï¼Œæœç´¢æœ€æ–°ç‰ˆæœ¬ï¼Œä¸€èˆ¬éƒ½æ”¯æŒJDK 11ã€‚\n\n2.ç¼–è¯‘æˆåŠŸåï¼Œå¯åŠ¨è¿è¡Œï¼Œæ­¤æ—¶ä»æœ‰å¯èƒ½ç»„ä»¶ä¾èµ–ç‰ˆæœ¬é—®é¢˜ï¼ŒæŒ‰ç…§ç¼–è¯‘æ—¶çš„æ–¹å¼å¤„ç†å³å¯ã€‚\n\nå‡çº§æ‰€ä¿®æ”¹çš„ä¾èµ–ï¼š\n\n```XML\n<dependency>\n    <groupId>javax.annotation</groupId>\n    <artifactId>javax.annotation-api</artifactId>\n    <version>1.3.2</version>\n</dependency>\n<dependency>\n    <groupId>javax.validation</groupId>\n    <artifactId>validation-api</artifactId>\n    <version>2.0.1.Final</version>\n</dependency>\n<dependency>\n    <groupId>org.projectlombok</groupId>\n    <artifactId>lombok</artifactId>\n    <version>1.18.4</version>\n</dependency>\n<dependency>\n    <groupId>org.hibernate.validator</groupId>\n    <artifactId>hibernate-validator-parent</artifactId>\n    <version>6.0.16.Final</version>\n</dependency>\n<dependency>\n    <groupId>com.sankuai.inf</groupId>\n    <artifactId>patriot-sdk</artifactId>\n    <version>1.2.1</version>\n</dependency>\n<dependency>\n    <groupId>org.apache.commons</groupId>\n    <artifactId>commons-lang3</artifactId>\n    <version>3.9</version>\n</dependency>\n<dependency>\n    <groupId>commons-lang</groupId>\n    <artifactId>commons-lang</artifactId>\n    <version>2.6</version>\n</dependency>\n<dependency>\n    <groupId>io.netty</groupId>\n    <artifactId>netty-all</artifactId>\n    <version>4.1.39.Final</version>\n</dependency>\n<dependency>\n    <groupId>junit</groupId>\n    <artifactId>junit</artifactId>\n    <version>4.12</version>\n</dependency>\n```\n\nJDK 11å·²ç»å‡ºæ¥ä¸¤å¹´ï¼Œå¸¸è§çš„ä¾èµ–ç»„ä»¶éƒ½æœ‰å…¼å®¹æ€§ç‰ˆæœ¬ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ˜¯å…¬å¸å†…éƒ¨æä¾›çš„å…¬å¸çº§ç»„ä»¶ï¼Œå¯èƒ½ä¼šä¸å…¼å®¹JDK 11ï¼Œéœ€è¦æ¨åŠ¨ç›¸å…³ç»„ä»¶è¿›è¡Œå‡çº§ã€‚å¦‚æœå¯¹æ–¹å‡çº§è¾ƒä¸ºå›°éš¾ï¼Œå¯ä»¥è€ƒè™‘æ‹†åˆ†åŠŸèƒ½ï¼Œå°†ä¾èµ–è¿™äº›ç»„ä»¶çš„åŠŸèƒ½å•ç‹¬éƒ¨ç½²ï¼Œç»§ç»­ä½¿ç”¨ä½ç‰ˆæœ¬JDKã€‚éšç€JDK11çš„å“è¶Šæ€§èƒ½è¢«å¤§å®¶æ‚‰çŸ¥ï¼Œç›¸ä¿¡ä¼šæœ‰æ›´å¤šå›¢é˜Ÿä¼šç”¨JDK 11è§£å†³GCé—®é¢˜ï¼Œä½¿ç”¨è€…è¶Šå¤šï¼Œå„ä¸ªç»„ä»¶å‡çº§çš„åŠ¨åŠ›ä¹Ÿä¼šè¶Šå¤§ã€‚\n\n**éªŒè¯åŠŸèƒ½æ­£ç¡®æ€§**\n\né€šè¿‡å®Œå¤‡çš„å•æµ‹ã€é›†æˆå’Œå›å½’æµ‹è¯•ï¼Œä¿è¯åŠŸèƒ½æ­£ç¡®æ€§ã€‚\n\n## ä½œè€…ç®€ä»‹\n\n- ç‹ä¸œï¼Œç¾å›¢ä¿¡æ¯å®‰å…¨èµ„æ·±å·¥ç¨‹å¸ˆã€‚\n- ç‹ä¼Ÿï¼Œç¾å›¢ä¿¡æ¯å®‰å…¨æŠ€æœ¯ä¸“å®¶ã€‚\n\n**é˜…è¯»æ›´å¤šæŠ€æœ¯æ–‡ç« ï¼Œè¯·æ‰«ç å…³æ³¨å¾®ä¿¡å…¬ä¼—å·-ç¾å›¢æŠ€æœ¯å›¢é˜Ÿï¼**\n\n![](https://p0.meituan.net/travelcube/98e7c3ecacb37a88560b8d87bd79dba3414591.png)", "user_name": "ç¾å›¢æŠ€æœ¯å›¢é˜Ÿ", "description": "åœ¨ç¾å›¢ï¼Œæˆ‘ä»¬ä¿¡ä»°è€å¿ƒå’ŒåšæŒçš„åŠ›é‡ï¼Œæ„¿æ„æŒç»­å»åšä¸€äº›æ­£ç¡®ã€æœ‰ç§¯ç´¯ã€å¯", "got_view_count": 396830, "category_name": "åç«¯", "ctime": 1457483880}
{"tag_name": "Webpack", "concern_user_count": 181325, "user_id": "2717648473034823", "title": "Webpacké…ç½®å…¨è§£æï¼ˆä¼˜åŒ–ç¯‡ï¼‰", "mark_content": "\nã€€ã€€åœ¨ä¸Šä¸€ç¯‡æ–‡ç« [Webpacké…ç½®å…¨è§£æ](http://xieyufei.com/2020/06/06/Webpack-Learned.html)ä»‹ç»äº†Webpackä¸­loaderå’Œpluginsçš„ä¸€äº›åŸºæœ¬ç”¨æ³•ï¼Œå½“loaderå’Œpluginsä½¿ç”¨è¾ƒå¤šåé¡¹ç›®ä¹Ÿä¼šè¶Šæ¥è¶Šè€—æ—¶ï¼Œå› æ­¤è¿™æ¬¡æˆ‘ä»¬ç»§ç»­å­¦ä¹ å¦‚ä½•ä¼˜åŒ–webpackçš„é…ç½®æ¥è®©æˆ‘ä»¬çš„é¡¹ç›®è¿è¡Œçš„æ›´å¿«è€—æ—¶æ›´çŸ­ã€‚\n\nã€€ã€€æœ¬æ–‡å°†ä»ç¼©å°æ–‡ä»¶æœç´¢èŒƒå›´ã€å‡å°‘æ‰“åŒ…æ–‡ä»¶ã€ç¼“å­˜å’Œå¤šè¿›ç¨‹å››ä¸ªæ–¹é¢æ¥äº†è§£Webpackçš„ä¼˜åŒ–é…ç½®ã€‚\n\n\n# ç¼©å°æ–‡ä»¶æœç´¢èŒƒå›´\n\nã€€ã€€Webpackä¼šä»Entryå…¥å£å‡ºå‘ï¼Œè§£ææ–‡ä»¶ä¸­çš„å¯¼å…¥æ¨¡å—è¯­å¥ï¼Œå†é€’å½’è§£æï¼›æ¯æ¬¡é‡åˆ°å¯¼å…¥è¯­æ³•æ—¶ä¼šåšä¸¤ä»¶äº‹æƒ…ï¼š\n\n1. æŸ¥æ‰¾å¯¼å…¥æ¨¡å—çš„ä½ç½®ï¼Œæ¯”å¦‚``require('vue')``å°±å»å¼•å…¥``/node_modules/vue/dist/vue.runtime.common.js``æ–‡ä»¶\n2. é€šè¿‡ç›¸åº”çš„loaderæ¥è§£æå¯¼å…¥çš„æ¨¡å—ï¼Œæ¯”å¦‚å¼•å…¥çš„jså°±è°ƒç”¨babel-loaderæ¥è½¬æ¢ä»£ç \n\nã€€ã€€å½“é¡¹ç›®åªæœ‰å‡ ä¸ªæ–‡ä»¶æ—¶ï¼Œè§£ææ–‡ä»¶æµç¨‹åªæœ‰å‡ ç™¾æ¯«ç§’ï¼Œç„¶è€Œéšç€é¡¹ç›®è§„æ¨¡çš„å¢å¤§ï¼Œè§£ææ–‡ä»¶ä¼šè¶Šæ¥è¶Šè€—æ—¶ï¼Œå› æ­¤æˆ‘ä»¬é€šè¿‡webpackçš„é…ç½®æ¥ç¼©å°æˆ‘ä»¬æœç´¢æ¨¡å—çš„èŒƒå›´\n\n\n## ä¼˜åŒ–loaderé…ç½®\n\nã€€ã€€åœ¨ä¸Šä¸€ç¯‡ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†ä½¿ç”¨``include/exclude``å°†node_modulesä¸­çš„æ–‡ä»¶è¿›è¡ŒåŒ…æ‹¬/æ’é™¤ã€‚\n\n```js\n{\n    rules: [{\n        test: /\\.js$/,\n        use: {\n            loader: 'babel-loader'\n        },\n        // exclude: /node_modules/,\n        include: [path.resolve(__dirname, 'src')]\n    }]\n}\n```\n\nã€€ã€€``include``è¡¨ç¤ºå“ªäº›ç›®å½•ä¸­çš„æ–‡ä»¶éœ€è¦è¿›è¡Œbabel-loaderï¼Œ``exclude``è¡¨ç¤ºå“ªäº›ç›®å½•ä¸­çš„æ–‡ä»¶ä¸è¦è¿›è¡Œbabel-loaderã€‚è¿™æ˜¯å› ä¸ºåœ¨å¼•å…¥ç¬¬ä¸‰æ–¹æ¨¡å—çš„æ—¶å€™ï¼Œå¾ˆå¤šæ¨¡å—å·²ç»æ˜¯æ‰“åŒ…åçš„ï¼Œä¸éœ€è¦å†è¢«å¤„ç†ï¼Œæ¯”å¦‚vueã€jQueryç­‰ï¼›å¦‚æœä¸è®¾ç½®``include/exclude``å°±ä¼šè¢«loaderå¤„ç†ï¼Œå¢åŠ æ‰“åŒ…æ—¶é—´ã€‚\n\n\n## ä¼˜åŒ–module.noParseé…ç½®\n\n\nã€€ã€€å¦‚æœä¸€äº›ç¬¬ä¸‰æ–¹æ¨¡å—æ²¡æœ‰ä½¿ç”¨AMD/CommonJsè§„èŒƒï¼Œå¯ä»¥ä½¿ç”¨``noParse``æ¥æ ‡è®°è¿™ä¸ªæ¨¡å—ï¼Œè¿™æ ·Webpackåœ¨å¯¼å…¥æ¨¡å—æ—¶ï¼Œå°±ä¸è¿›è¡Œè§£æå’Œè½¬æ¢ï¼Œæå‡Webpackçš„æ„å»ºé€Ÿåº¦ï¼›noParseå¯ä»¥æ¥å—ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼æˆ–è€…ä¸€ä¸ªå‡½æ•°ï¼š\n\n```js\n{\n    module: {\n        //noParse: /jquery|lodash|chartjs/,\n        noParse: function(content){\n            return /jquery|lodash|chartjs/.test(content)\n        }\n    }\n}\n```\n\n\nã€€ã€€å¯¹äºjQueryã€lodashã€chartjsç­‰ä¸€äº›åº“ï¼Œåºå¤§ä¸”æ²¡æœ‰é‡‡ç”¨æ¨¡å—åŒ–æ ‡å‡†ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¸è§£æä»–ä»¬ã€‚\n\n> æ³¨ï¼šè¢«ä¸è§£æçš„æ¨¡å—æ–‡ä»¶ä¸­ä¸åº”è¯¥åŒ…å«``require``ã€``import``ç­‰æ¨¡å—è¯­å¥\n\n![noParse.png](https://xieyufei.com/images/Webpack-Optimize/noParse.png)\n\nã€€ã€€ç»è¿‡å¤šæ¬¡æ‰“åŒ…å°è¯•ï¼Œæ‰“åŒ…æ€§èƒ½å¤§æ¦‚èƒ½æå‡10%~20%ï¼›æœ¬å®ä¾‹å®Œæ•´ä»£ç [demo](https://github.com/acexyf/WebpackDemo/tree/master/demo13)ï¼Œ\n\n\n## ä¼˜åŒ–resolve.modulesé…ç½®\n\nã€€ã€€modulesç”¨äºå‘Šè¯‰webpackå»å“ªäº›ç›®å½•ä¸‹æŸ¥æ‰¾å¼•ç”¨çš„æ¨¡å—ï¼Œé»˜è®¤å€¼æ˜¯``[\"node_modules\"]``ï¼Œæ„æ€æ˜¯åœ¨``./node_modules``æŸ¥æ‰¾æ¨¡å—ï¼Œæ‰¾ä¸åˆ°å†å»``../node_modules``ï¼Œä»¥æ­¤ç±»æ¨ã€‚\n\nã€€ã€€æˆ‘ä»¬ä»£ç ä¸­ä¹Ÿä¼šæœ‰å¤§é‡çš„æ¨¡å—è¢«å…¶ä»–æ¨¡å—ä¾èµ–å’Œå¼•å…¥ï¼Œç”±äºè¿™äº›æ¨¡å—ä½ç½®åˆ†å¸ƒä¸å›ºå®šï¼Œè·¯å¾„æœ‰æ—¶å€™ä¼šå¾ˆé•¿ï¼Œæ¯”å¦‚``import '../../src/components/button'``ã€``import '../../src/utils'``ï¼›è¿™æ—¶æˆ‘ä»¬å¯ä»¥åˆ©ç”¨modulesè¿›è¡Œä¼˜åŒ–\n\n```js\n{\n  resolve: {\n    modules: [\n      path.resolve(__dirname, \"src\"),\n      path.resolve(__dirname, \"node_modules\"),\n      \"node_modules\",\n    ],\n  },\n}\n```\n\nã€€ã€€è¿™æ ·æˆ‘ä»¬å¯ä»¥ç®€å•çš„é€šè¿‡``import 'components/button'``ã€``import 'utils'``è¿›è¡Œå¯¼å…¥ï¼Œwebpackä¼šä¼šä¼˜å…ˆä»``src``ç›®å½•ä¸‹è¿›è¡ŒæŸ¥æ‰¾\n\n\n## ä¼˜åŒ–resolve.aliasé…ç½®\n\n\nã€€ã€€aliasé€šè¿‡åˆ›å»ºimportæˆ–è€…requireçš„åˆ«åï¼ŒæŠŠåŸæ¥å¯¼å…¥æ¨¡å—çš„è·¯å¾„æ˜ å°„æˆä¸€ä¸ªæ–°çš„å¯¼å…¥è·¯å¾„ï¼›å®ƒå’Œ``resolve.modules``ä¸åŒçš„çš„æ˜¯ï¼Œå®ƒçš„ä½œç”¨æ˜¯ç”¨åˆ«åä»£æ›¿å‰é¢çš„è·¯å¾„ï¼Œä¸æ˜¯çœç•¥ï¼›è¿™æ ·çš„å¥½å¤„å°±æ˜¯webpackç›´æ¥ä¼šå»å¯¹åº”åˆ«åçš„ç›®å½•æŸ¥æ‰¾æ¨¡å—ï¼Œå‡å°‘äº†æœç´¢æ—¶é—´ã€‚\n\n```js\n{\n  resolve: {\n    alias: {\n      '@': path.resolve(__dirname, 'src'),\n    },\n  },\n}\n```\n\nã€€ã€€è¿™æ ·æˆ‘ä»¬å°±èƒ½é€šè¿‡``import Buttom from '@/Button'``æ¥å¼•å…¥ç»„ä»¶äº†ï¼›æˆ‘ä»¬ä¸å…‰å¯ä»¥ç»™è‡ªå·±å†™çš„æ¨¡å—è®¾ç½®åˆ«åï¼Œè¿˜å¯ä»¥ç»™ç¬¬ä¸‰æ–¹æ¨¡å—è®¾ç½®åˆ«åï¼š\n\n```js\n{\n  resolve: {\n    alias: {\n      'vue$': isDev ? 'vue/dist/vue.runtime.js' : 'vue/dist/vue.runtime.min.js',\n    },\n  },\n}\n```\n\nã€€ã€€æˆ‘ä»¬åœ¨``import Vue from 'vue'``æ—¶ï¼Œwebpackå°±ä¼šå¸®æˆ‘ä»¬å»vueä¾èµ–åŒ…çš„distæ–‡ä»¶ä¸‹é¢å¼•å…¥å¯¹åº”çš„æ–‡ä»¶ï¼Œå‡å°‘äº†æœç´¢package.jsonçš„æ—¶é—´ã€‚\n\n\n## ä¼˜åŒ–resolve.mainFieldsé…ç½®\n\nã€€ã€€mainFieldsç”¨æ¥å‘Šè¯‰webpackä½¿ç”¨ç¬¬ä¸‰æ–¹æ¨¡å—ä¸­çš„å“ªä¸ªå­—æ®µæ¥å¯¼å…¥æ¨¡å—ï¼›ç¬¬ä¸‰æ–¹æ¨¡å—ä¸­éƒ½ä¼šæœ‰ä¸€ä¸ª``package.json``æ–‡ä»¶ç”¨æ¥æè¿°è¿™ä¸ªæ¨¡å—çš„ä¸€äº›å±æ€§ï¼Œæ¯”å¦‚æ¨¡å—å(name)ã€ç‰ˆæœ¬å·(version)ã€ä½œè€…(auth)ç­‰ç­‰ï¼›å…¶ä¸­æœ€é‡è¦çš„å°±æ˜¯æœ‰å¤šä¸ªç‰¹æ®Šçš„å­—æ®µç”¨æ¥å‘Šè¯‰webpackå¯¼å…¥æ–‡ä»¶çš„ä½ç½®ï¼Œæœ‰å¤šä¸ªå­—æ®µçš„åŸå› æ˜¯å› ä¸ºæœ‰äº›æ¨¡å—å¯ä»¥åŒæ—¶ç”¨äºå¤šä¸ªç¯å¢ƒï¼Œè€Œæ¯ä¸ªç¯å¢ƒå¯ä»¥ä½¿ç”¨ä¸åŒçš„æ–‡ä»¶ã€‚\n\n\nã€€ã€€mainFieldsçš„é»˜è®¤å€¼å’Œå½“å‰webpacké…ç½®çš„``target``å±æ€§æœ‰å…³ï¼š\n\n* å¦‚æœtargetä¸º``webworker``æˆ–``web``ï¼ˆé»˜è®¤ï¼‰ï¼ŒmainFieldsé»˜è®¤å€¼ä¸º``[\"browser\", \"module\", \"main\"]``\n* å¦‚æœtargetä¸ºå…¶ä»–ï¼ˆåŒ…æ‹¬nodeï¼‰ï¼ŒmainFieldsé»˜è®¤å€¼ä¸º``[\"module\", \"main\"]``\n\n\nã€€ã€€è¿™å°±æ˜¯è¯´å½“æˆ‘ä»¬``require('vue')``çš„æ—¶å€™ï¼Œwebpackå…ˆå»vueä¸‹é¢æœç´¢browserå­—æ®µï¼Œæ²¡æœ‰æ‰¾åˆ°å†å»æœç´¢moduleå­—æ®µï¼Œæœ€åæœç´¢mainå­—æ®µã€‚\n\nã€€ã€€ä¸ºäº†å‡å°‘æœç´¢çš„æ­¥éª¤ï¼Œåœ¨æ˜ç¡®ç¬¬ä¸‰æ–¹æ¨¡å—å…¥å£æ–‡ä»¶æè¿°å­—æ®µæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªå­—æ®µè®¾ç½®å°½é‡å°‘ï¼›ä¸€èˆ¬ç¬¬ä¸‰æ–¹æ¨¡å—éƒ½é‡‡ç”¨``main``å­—æ®µï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥è¿™æ ·é…ç½®ï¼š\n\n```js\n{\n    resolve: {\n        mainFields: [\"main\"],\n    }\n}\n```\n\n\n## ä¼˜åŒ–resolve.extensionsé…ç½®\n\nã€€ã€€extensionså­—æ®µç”¨æ¥åœ¨å¯¼å…¥æ¨¡å—æ—¶ï¼Œè‡ªåŠ¨å¸¦å…¥åç¼€å°è¯•å»åŒ¹é…å¯¹åº”çš„æ–‡ä»¶ï¼Œå®ƒçš„é»˜è®¤å€¼æ˜¯ï¼š\n\n```js\n{\n    resolve: {\n        extensions: ['.js', '.json']\n    }\n}\n```\n\nã€€ã€€ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åœ¨``require('./utils')``æ—¶ï¼ŒWebpackå…ˆåŒ¹é…``utils.js``ï¼ŒåŒ¹é…ä¸åˆ°å†å»åŒ¹é…``utils.json``ï¼Œå¦‚æœè¿˜æ‰¾ä¸åˆ°å°±æŠ¥é”™ã€‚\n\nã€€ã€€å› æ­¤``extensions``æ•°ç»„è¶Šé•¿ï¼Œæˆ–è€…æ­£ç¡®åç¼€çš„æ–‡ä»¶è¶Šé åï¼ŒåŒ¹é…çš„æ¬¡æ•°è¶Šå¤šä¹Ÿå°±è¶Šè€—æ—¶ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä»ä»¥ä¸‹å‡ ç‚¹æ¥ä¼˜åŒ–ï¼š\n\n\n1. extensionsæ•°ç»„å°½é‡å°‘ï¼Œé¡¹ç›®ä¸­ä¸å­˜åœ¨çš„æ–‡ä»¶åç¼€ä¸è¦åˆ—è¿›å»\n2. å‡ºç°é¢‘ç‡æ¯”è¾ƒé«˜çš„æ–‡ä»¶åç¼€ä¼˜å…ˆæ”¾åˆ°æœ€å‰é¢\n3. åœ¨ä»£ç ä¸­å¯¼å…¥æ–‡ä»¶çš„æ—¶å€™ï¼Œè¦å°½é‡æŠŠåç¼€åå¸¦ä¸Šï¼Œé¿å…æŸ¥æ‰¾\n\nã€€ã€€ä»¥ä¸Šå®ä¾‹å®Œæ•´ä»£ç [demo](https://github.com/acexyf/WebpackDemo/tree/master/demo9)ã€‚\n\n\n\n\n# å‡å°‘æ‰“åŒ…æ–‡ä»¶\n\nã€€ã€€åœ¨æˆ‘ä»¬é¡¹ç›®ä¸­ä¸å¯é¿å…ä¼šå¼•å…¥ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œwebpackæ‰“åŒ…æ—¶ä¹Ÿä¼šå°†ç¬¬ä¸‰æ–¹æ¨¡å—ä½œä¸ºä¾èµ–æ‰“åŒ…è¿›bundleä¸­ï¼Œè¿™æ ·å°±ä¼šå¢åŠ æ‰“åŒ…æ–‡ä»¶å°ºå¯¸å’Œå¢åŠ è€—æ—¶ï¼Œå¦‚æœèƒ½åˆç†å¾—å¤„ç†è¿™äº›æ¨¡å—å°±èƒ½æå‡ä¸å°‘webpackçš„æ€§èƒ½ã€‚\n\n\n## æå–å…¬å…±ä»£ç \n\nã€€ã€€æˆ‘ä»¬çš„é¡¹ç›®é€šå¸¸æœ‰å¤šä¸ªé¡µé¢æˆ–è€…å¤šä¸ªé¡µé¢æ¨¡å—ï¼ˆå•é¡µé¢ï¼‰ï¼Œå¤šä¸ªé¡µé¢ä¹‹é—´é€šå¸¸éƒ½æœ‰å…¬ç”¨çš„å‡½æ•°æˆ–è€…ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œåœ¨æ¯ä¸ªé¡µé¢ä¸­éƒ½æ‰“åŒ…è¿™äº›æ¨¡å—ä¼šé€ æˆä»¥ä¸‹é—®é¢˜ï¼š\n\n* èµ„æºé‡å¤åŠ è½½ï¼Œæµªè´¹ç”¨æˆ·æµé‡\n* æ¯ä¸ªé¡µé¢åŠ è½½èµ„æºå¤šï¼Œé¦–å±å±•ç¤ºæ…¢\n\nã€€ã€€åœ¨Webpack4ä¹‹å‰ï¼Œéƒ½æ˜¯é€šè¿‡CommonsChunkPluginæ’ä»¶æ¥æå–å…¬å…±ä»£ç ï¼Œç„¶è€Œå­˜åœ¨ç€ä»¥ä¸‹é—®é¢˜\n\n* äº§å‡ºçš„chunkåœ¨å¼•å…¥çš„æ—¶å€™ï¼Œä¼šåŒ…å«é‡å¤çš„ä»£ç \n* æ— æ³•ä¼˜åŒ–å¼‚æ­¥chunk\n\nã€€ã€€Webpack4å¼•å…¥äº†``SplitChunksPlugin``æ’ä»¶è¿›è¡Œå…¬å…±æ¨¡å—çš„æŠ½å–ï¼›ç”±äºwebpack4å¼€ç®±å³ç”¨çš„ç‰¹æ€§ï¼Œå®ƒä¸ç”¨å•ç‹¬å®‰è£…ï¼Œé€šè¿‡``optimization.splitChunks``è¿›è¡Œé…ç½®å³å¯ï¼Œå®˜æ–¹ç»™çš„é»˜è®¤é…ç½®å‚æ•°å¦‚ä¸‹ï¼š\n\n```js\nmodule.exports = {\n  optimization: {\n    splitChunks: {\n      // ä»£ç åˆ†å‰²æ—¶é»˜è®¤å¯¹å¼‚æ­¥ä»£ç ç”Ÿæ•ˆï¼Œallï¼šæ‰€æœ‰ä»£ç æœ‰æ•ˆï¼Œinitalï¼šåŒæ­¥ä»£ç æœ‰æ•ˆ\n      chunks: 'async',\n      // ä»£ç åˆ†å‰²æœ€å°çš„æ¨¡å—å¤§å°ï¼Œå¼•å…¥çš„æ¨¡å—å¤§äº 20000B æ‰åšä»£ç åˆ†å‰²\n      minSize: 20000,\n      // ä»£ç åˆ†å‰²æœ€å¤§çš„æ¨¡å—å¤§å°ï¼Œå¤§äºè¿™ä¸ªå€¼è¦è¿›è¡Œä»£ç åˆ†å‰²ï¼Œä¸€èˆ¬ä½¿ç”¨é»˜è®¤å€¼\n      maxSize: 0, \n      // å¼•å…¥çš„æ¬¡æ•°å¤§äºç­‰äº1æ—¶æ‰è¿›è¡Œä»£ç åˆ†å‰²\n      minChunks: 1,\n      // æœ€å¤§çš„å¼‚æ­¥è¯·æ±‚æ•°é‡,ä¹Ÿå°±æ˜¯åŒæ—¶åŠ è½½çš„æ¨¡å—æœ€å¤§æ¨¡å—æ•°é‡\n      maxAsyncRequests: 30,\n      // å…¥å£æ–‡ä»¶åšä»£ç åˆ†å‰²æœ€å¤šåˆ†æˆ 30 ä¸ª js æ–‡ä»¶\n      maxInitialRequests: 30, \n      // æ–‡ä»¶ç”Ÿæˆæ—¶çš„è¿æ¥ç¬¦\n      automaticNameDelimiter: '~', \n      enforceSizeThreshold: 5000,\n      cacheGroups: {\n        vendors: {\n          // ä½äºnode_modulesä¸­çš„æ¨¡å—åšä»£ç åˆ†å‰²\n          test: /[\\\\/]node_modules[\\\\/]/, \n          // æ ¹æ®ä¼˜å…ˆçº§å†³å®šæ‰“åŒ…åˆ°å“ªä¸ªç»„é‡Œï¼Œä¾‹å¦‚ä¸€ä¸ª node_modules ä¸­çš„æ¨¡å—è¿›è¡Œä»£ç \n          priority: -10 \n        }, \n        // æ—¢æ»¡è¶³ vendorsï¼Œåˆæ»¡è¶³ defaultï¼Œé‚£ä¹ˆæ ¹æ®ä¼˜å…ˆçº§ä¼šæ‰“åŒ…åˆ° vendors ç»„ä¸­ã€‚\n        default: { \n          // æ²¡æœ‰ test è¡¨æ˜æ‰€æœ‰çš„æ¨¡å—éƒ½èƒ½è¿›å…¥ default ç»„ï¼Œä½†æ˜¯æ³¨æ„å®ƒçš„ä¼˜å…ˆçº§è¾ƒä½ã€‚\n          //  æ ¹æ®ä¼˜å…ˆçº§å†³å®šæ‰“åŒ…åˆ°å“ªä¸ªç»„é‡Œ,æ‰“åŒ…åˆ°ä¼˜å…ˆçº§é«˜çš„ç»„é‡Œã€‚\n          priority: -20, \n           //å¦‚æœä¸€ä¸ªæ¨¡å—å·²ç»è¢«æ‰“åŒ…è¿‡äº†,é‚£ä¹ˆå†æ‰“åŒ…æ—¶å°±å¿½ç•¥è¿™ä¸ªä¸Šæ¨¡å—\n          reuseExistingChunk: true \n        }\n      }\n    }\n  }\n};\n```\n\n\nã€€ã€€æˆ‘ä»¬åœ¨homeã€listã€detailä¸‰ä¸ªé¡µé¢åˆ†åˆ«å¼•å…¥äº†vue.jsã€axios.jså’Œå…¬ç”¨çš„å·¥å…·å‡½æ•°æ¨¡å—utils.jsï¼›æˆ‘ä»¬é¦–å…ˆå°†ä½¿ç”¨åˆ°çš„ç¬¬ä¸‰æ–¹æ¨¡å—æå–åˆ°ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶åŒ…å«äº†é¡¹ç›®çš„åŸºç¡€è¿è¡Œç¯å¢ƒï¼Œä¸€èˆ¬ç§°ä¸º``vendors.js``ï¼›åœ¨æŠ½ç¦»ç¬¬ä¸‰æ–¹æ¨¡å—åæˆ‘ä»¬å°†æ¯ä¸ªé¡µé¢éƒ½ä¾èµ–çš„å…¬å…±ä»£ç æå–å‡ºæ¥ï¼Œæ”¾åˆ°``common.js``ä¸­ã€‚\n\n\n```js\nmodule.exports = {\n  optimization: {\n    splitChunks: {\n      chunks: 'initial',\n      cacheGroups: {\n        vendors: {\n          test: /[\\\\/]node_modules[\\\\/]/,\n          priority: 10,\n          name: 'vendors'\n        },\n        common: {\n          test: /[\\\\/]src[\\\\/]/,\n          priority: 5,\n          name: 'common'\n        }\n      }\n    }\n  }\n}\n```\n\n\nã€€ã€€æœ‰æ—¶å€™é¡¹ç›®ä¾èµ–æ¨¡å—æ¯”è¾ƒå¤šï¼Œ``vendors.js``æ–‡ä»¶ä¼šç‰¹åˆ«å¤§ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å¯¹å®ƒè¿›ä¸€æ­¥æ‹†åˆ†ï¼ŒæŒ‰ç…§æ¨¡å—åˆ’åˆ†ï¼š\n\n```js\n\n{\n  //çœç•¥å…¶ä»–é…ç½®\n  cacheGroups: {\n    //æ¶‰åŠvueçš„æ¨¡å—\n    vue: {\n      test: /[\\\\/]node_modules[\\\\/](vue|vuex|vue-router)/,\n      priority: 10,\n      name: 'vue'\n    },\n    //å…¶ä»–æ¨¡å—\n    vendors: {\n      test: /[\\\\/]node_modules[\\\\/]/,\n      priority: 9,\n      name: 'vendors'\n    },\n    common: {\n      test: /[\\\\/]src[\\\\/]/,\n      priority: 5,\n      name: 'common'\n    }\n  }\n}\n```\n\n\n## åŠ¨æ€é“¾æ¥DllPlugin\n\nã€€ã€€DLLå³åŠ¨æ€é“¾æ¥åº“ï¼ˆDynamic-Link Libraryï¼‰çš„ç¼©å†™ï¼Œç†Ÿæ‚‰Windowsç³»ç»Ÿçš„ç«¥é‹åœ¨ç”µè„‘ä¸­ä¹Ÿç»å¸¸èƒ½çœ‹åˆ°åç¼€æ˜¯dllçš„æ–‡ä»¶ï¼Œå¶å°”ç”µè„‘å¼¹æ¡†è­¦å‘Šä¹Ÿæ˜¯å› ä¸ºç”µè„‘ä¸­ç¼ºå¤±äº†æŸäº›dllæ–‡ä»¶ï¼›DLLæœ€åˆç”¨äºèŠ‚çº¦åº”ç”¨ç¨‹åºæ‰€éœ€çš„ç£ç›˜å’Œå†…å­˜ç©ºé—´ï¼Œå½“å¤šä¸ªç¨‹åºä½¿ç”¨åŒä¸€ä¸ªå‡½æ•°åº“æ—¶ï¼ŒDLLå¯ä»¥å‡å°‘åœ¨ç£ç›˜å’Œå†…å­˜ä¸­åŠ è½½ä»£ç çš„é‡å¤é‡ï¼Œæœ‰åŠ©äºä»£ç çš„å¤ç”¨ã€‚\n\nã€€ã€€åœ¨Webpackä¸­ä¹Ÿå¼•å…¥äº†DLLçš„æ€æƒ³ï¼ŒæŠŠæˆ‘ä»¬ç”¨åˆ°çš„æ¨¡å—æŠ½ç¦»å‡ºæ¥ï¼Œæ‰“åŒ…åˆ°å•ç‹¬çš„åŠ¨æ€é“¾æ¥åº“ä¸­å»ï¼Œä¸€ä¸ªåŠ¨æ€é“¾æ¥åº“ä¸­å¯ä»¥æœ‰å¤šä¸ªæ¨¡å—ï¼›å½“æˆ‘ä»¬åœ¨å¤šä¸ªé¡µé¢ä¸­ç”¨åˆ°æŸä¸€ä¸ªæ¨¡å—æ—¶ï¼Œä¸å†é‡å¤æ‰“åŒ…ï¼Œè€Œæ˜¯ç›´æ¥å»å¼•å…¥åŠ¨æ€é“¾æ¥åº“ä¸­çš„æ¨¡å—ã€‚\n\nã€€ã€€Webpackä¸­é›†æˆäº†å¯¹åŠ¨æ€é“¾æ¥åº“çš„æ”¯æŒï¼Œä¸»è¦ç”¨åˆ°çš„ä¸¤ä¸ªæ’ä»¶ï¼š\n\n* DllPluginï¼šåˆ›å»ºåŠ¨æ€é“¾æ¥åº“æ–‡ä»¶\n* DllReferencePluginï¼šåœ¨ä¸»é…ç½®ä¸­å¼•å…¥æ‰“åŒ…å¥½çš„åŠ¨æ€é“¾æ¥åº“æ–‡ä»¶\n\n\nã€€ã€€æˆ‘ä»¬é¦–å…ˆä½¿ç”¨DllPluginæ¥åˆ›å»ºåŠ¨æ€é“¾æ¥åº“æ–‡ä»¶ï¼Œåœ¨é¡¹ç›®ä¸‹æ–°å»º``webpack.dll.js``æ–‡ä»¶ï¼š\n\n```js\nconst path = require(\"path\");\nconst webpack = require(\"webpack\");\n\nmodule.exports = {\n  mode: \"production\",\n  entry: {\n    vue: [\"vue\", \"vuex\", \"vue-router\"],\n    vendor: [\"dayjs\", \"axios\", \"mint-ui\"],\n  },\n  output: {\n    path: path.resolve(__dirname, \"public/vendor\"),\n    // æŒ‡å®šæ–‡ä»¶å\n    filename: \"[name].dll.js\",\n    //æš´éœ²å…¨å±€å˜é‡çš„åç§°\n    library: \"[name]_dll_lib\",\n  },\n  plugins: [\n    new webpack.DllPlugin({\n      path: path.join(__dirname, \"public\", \"vendor\", \"[name].manifest.json\"),\n      name: \"[name]_dll_lib\",\n    }),\n  ],\n};\n```\n\nã€€ã€€è¿™é‡Œ``entry``è®¾ç½®äº†å¤šä¸ªå…¥å£ï¼Œæ¯ä¸ªå…¥å£ä¹Ÿæœ‰å¤šä¸ªæ¨¡å—æ–‡ä»¶ï¼›ç„¶ååœ¨``package.json``æ·»åŠ æ‰“åŒ…å‘½ä»¤\n\n```json\n{\n    \"scripts\":{\n        \"build:dll\": \"webpack --config=webpack.dll.js\"\n    }\n}\n```\n\n\nã€€ã€€æ‰§è¡Œ``npm run build:dll``åï¼Œæˆ‘ä»¬åœ¨``/public/vendor``ç›®å½•ä¸‹å¾—åˆ°äº†æˆ‘ä»¬æ‰“åŒ…åçš„åŠ¨æ€é“¾æ¥åº“çš„æ–‡ä»¶ï¼š\n\n```\nâ”œâ”€â”€ vendor.dll.js\nâ”œâ”€â”€ vendor.manifest.json\nâ”œâ”€â”€ vue.dll.js\nâ””â”€â”€ vue.manifest.json\n```\n\n\nã€€ã€€ç”Ÿæˆå‡ºæ¥çš„æ‰“åŒ…æ–‡ä»¶æ­£å¥½æ˜¯ä»¥ä¸¤ä¸ªå…¥å£åæ¥å‘½åçš„ï¼Œä»¥vueä¸ºä¾‹ï¼Œçœ‹ä¸€ä¸‹``vue.dll.js``çš„å†…å®¹ï¼š\n\n\n```js\nvar vue_dll_lib =\n/******/ (function(modules) { \n    // çœç•¥webpackBootstrapä»£ç \n/******/ })\n/******/ ({\n\n/***/ \"./node_modules/vue-router/dist/vue-router.esm.js\":\n/***/ (function(module, exports, __webpack_require__) {\n    //çœç•¥vue-routeræ¨¡å—ä»£ç \n/***/ }),\n\n/***/ \"./node_modules/vue/dist/vue.runtime.esm.js\":\n/***/ (function(module, exports, __webpack_require__) {\n    //çœç•¥vueæ¨¡å—ä»£ç \n/***/ }),\n\n/***/ \"./node_modules/vuex/dist/vuex.esm.js\":\n/***/ (function(module, exports, __webpack_require__) {\n    //çœç•¥vuexæ¨¡å—ä»£ç \n/***/ }),\n\n/******/ });\n```\n\n\nã€€ã€€å¯ä»¥çœ‹å‡ºï¼ŒåŠ¨æ€é“¾æ¥åº“ä¸­åŒ…å«äº†å¼•å…¥æ¨¡å—çš„æ‰€æœ‰ä»£ç ï¼Œè¿™äº›ä»£ç å­˜åœ¨ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œé€šè¿‡æ¨¡å—è·¯å¾„ä½œä¸ºé”®åæ¥è¿›è¡Œå¼•ç”¨ï¼›å¹¶ä¸”é€šè¿‡vue_dll_libæš´éœ²åˆ°å…¨å±€ï¼›vue.manifest.jsonåˆ™æ˜¯ç”¨æ¥æè¿°åŠ¨æ€é“¾æ¥åº“æ–‡ä»¶ä¸­åŒ…å«äº†å“ªäº›æ¨¡å—ï¼š\n\n\n```json\n{\n    \"name\": \"vue_dll_lib\",\n    \"content\": {\n        \"./node_modules/vue-router/dist/vue-router.esm.js\": {\n            \"id\": \"./node_modules/vue-router/dist/vue-router.esm.js\",\n            \"buildMeta\": {}\n        },\n        \"./node_modules/vue/dist/vue.runtime.esm.js\": {\n            \"id\": \"./node_modules/vue/dist/vue.runtime.esm.js\",\n            \"buildMeta\": {}\n        },\n        \"./node_modules/vuex/dist/vuex.esm.js\": {\n            \"id\": \"./node_modules/vuex/dist/vuex.esm.js\",\n            \"buildMeta\": {}\n        },\n    }\n}\n```\n\nã€€ã€€manifest.jsonæè¿°äº†å¯¹åº”jsæ–‡ä»¶åŒ…å«å“ªäº›æ¨¡å—ï¼Œä»¥åŠå¯¹åº”æ¨¡å—çš„é”®åï¼ˆidï¼‰ï¼Œè¿™æ ·æˆ‘ä»¬åœ¨æ¨¡æ¿é¡µé¢ä¸­å°±å¯ä»¥å°†åŠ¨æ€é“¾æ¥åº“ä½œä¸ºå¤–é“¾å¼•å…¥ï¼Œå½“Webpackè§£æåˆ°å¯¹åº”æ¨¡å—æ—¶å°±é€šè¿‡å…¨å±€å˜é‡æ¥è·å–æ¨¡å—ï¼š\n\n\n```html\n<!-- public/index.html -->\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Document</title>\n</head>\n<body>\n    <div id=\"app\"></div>\n    <!-- å¼•å…¥åŠ¨æ€é“¾æ¥åº“ -->\n    <script src=\"./vendor/vendor.dll.js\"></script>\n    <script src=\"./vendor/vue.dll.js\"></script>\n</body>\n</html>\n```\n\nã€€ã€€æœ€åæˆ‘ä»¬åœ¨æ‰“åŒ…æ—¶ï¼Œé€šè¿‡``DllReferencePlugin``å°†åŠ¨æ€é“¾æ¥åº“å¼•å…¥åˆ°ä¸»é…ç½®ä¸­ï¼š\n\n```js\n//webpack.config.js\n{\n    plugins: [\n        new webpack.DllReferencePlugin({\n            context: path.join(__dirname),\n            manifest: require('./public/vendor/vendor.manifest.json')\n        }),\n        new webpack.DllReferencePlugin({\n            context: path.join(__dirname),\n            manifest: require('./public/vendor/vue.manifest.json')\n        }),\n    ]\n}\n```\n\n> æ³¨ï¼šåŠ¨æ€é“¾æ¥åº“æ‰“åŒ…åˆ°``/public/vendor``ç›®å½•ä¸‹ï¼Œè¿˜éœ€è¦é€šè¿‡``CopyWebpackPlugin``æ’ä»¶å°†å®ƒæ‹·è´åˆ°ç”Ÿæˆåçš„ç›®å½•ä¸­ï¼Œå¦åˆ™ä¼šå‡ºç°å¼•ç”¨å¤±è´¥çš„æŠ¥é”™ï¼›æ‰“åŒ…åŠ¨æ€é“¾æ¥åº“æ–‡ä»¶åªéœ€è¦æ‰§è¡Œä¸€æ¬¡ï¼Œé™¤éä»¥åæ¨¡å—å‡çº§æˆ–è€…å¼•å…¥æ–°çš„æ¨¡å—ã€‚\n\n\nã€€ã€€å¼•å…¥åŠ¨æ€é“¾æ¥åº“å¯ä»¥å°†é¡¹ç›®ä¸­ä¸€äº›ä¸ç»å¸¸æ›´æ–°çš„æ¨¡å—æ”¾åˆ°å¤–éƒ¨æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å†æ¬¡æ‰“åŒ…é¡µé¢é€»è¾‘ä»£ç æ—¶ä¼šå‘ç°æ„å»ºé€Ÿåº¦æœ‰äº†æ¯”è¾ƒå¤§çš„æå‡ï¼Œå¤§æ¦‚30%~40%ï¼Œç›¸å…³ä»£ç åœ¨[demo10](https://github.com/acexyf/WebpackDemo/tree/master/demo10)ã€‚\n\n## externals\n\n\nã€€ã€€æˆ‘ä»¬åœ¨é¡¹ç›®æ‰“åŒ…æ—¶ï¼Œæœ‰ä¸€äº›ç¬¬ä¸‰æ–¹çš„åº“ä¼šä»CDNå¼•å…¥ï¼ˆæ¯”å¦‚jQueryç­‰ï¼‰ï¼Œå¦‚æœåœ¨bundleä¸­å†æ¬¡æ‰“åŒ…é¡¹ç›®å°±è¿‡äºè‡ƒè‚¿ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡é…ç½®``externals``å°†è¿™äº›åº“åœ¨æ‰“åŒ…çš„æ—¶å€™æ’é™¤åœ¨å¤–ã€‚\n\n\n```js\n{\n  externals: {\n    'jquery': \"jQuery\",\n    'react': 'React',\n    'react-dom': 'ReactDOM',\n    'vue': 'Vue'\n  }\n}\n```\n\nã€€ã€€è¿™æ ·å°±è¡¨ç¤ºå½“æˆ‘ä»¬é‡åˆ°``require('jquery')``æ—¶ï¼Œä»å…¨å±€å˜é‡å»å¼•ç”¨``jQuery``ï¼Œå…¶ä»–å‡ ä¸ªåŒ…ä¹ŸåŒç†ï¼›è¿™æ ·æ‰“åŒ…æ—¶å°±æŠŠjqueryã€reactã€vueå’Œreact-domä»bundleä¸­å‰”é™¤äº†ï¼Œæœ¬å®ä¾‹å®Œæ•´ä»£ç [demo](https://github.com/acexyf/WebpackDemo/tree/master/demo15)ã€‚\n\n\n\n## Tree Shaking\n\nã€€ã€€Tree Shakingæœ€æ—©ç”±rollupå®ç°ï¼Œåæ¥webpack2é¡µå®ç°äº†è¿™é¡¹åŠŸèƒ½ï¼›Tree Shakingçš„å­—é¢æ„æ€æ˜¯æ‘‡æ ‘ï¼Œä¸€æ£µæ ‘ä¸Šæœ‰ä¸€äº›æ ‘å¶è™½ç„¶è¿˜æŒ‚ç€ï¼Œä½†æ˜¯å®ƒå¯èƒ½å·²ç»æ­»æ‰äº†ï¼Œé€šè¿‡æ‘‡æ ‘æ–¹å¼æŠŠè¿™äº›æ­»æ‰çš„æ ‘å¶å»é™¤ã€‚\n\n![tree_shake.gif](https://xieyufei.com/images/Webpack-Optimize/tree_shake.gif)\n\n\nã€€ã€€æˆ‘ä»¬é¡¹ç›®ä¸­ä¹Ÿæ˜¯åŒæ ·çš„ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰ç”¨åˆ°æ–‡ä»¶çš„æ‰€æœ‰æ¨¡å—ï¼Œä½†æ˜¯webpackä»ä¼šå°†æ•´ä¸ªæ–‡ä»¶æ‰“åŒ…è¿›æ¥ï¼Œæ–‡ä»¶ä¸­ä¸€ç›´ç”¨ä¸åˆ°çš„ä»£ç å°±æ˜¯â€œæ­»ä»£ç â€ï¼›è¿™ç§æƒ…å†µå°±ç”¨ç”¨åˆ°``Tree Shaking``å¸®æˆ‘ä»¬å‰”é™¤è¿™äº›ç”¨ä¸åˆ°çš„ä»£ç æ¨¡å—ã€‚\n\n\nã€€ã€€æ¯”å¦‚æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª``utils.js``æ–‡ä»¶å¯¼å‡ºäº†å¾ˆå¤šå·¥å…·æ¨¡å—ï¼Œç„¶ååœ¨``index.js``ä¸­åªå¼•ç”¨äº†æŸäº›æ¨¡å—ï¼š\n\n```js\n//utils.js\nvar toString = Object.prototype.toString;\n\nexport function isArray(val) {\n  return toString.call(val) === '[object Array]';\n}\nexport function isFunction(val) {\n  return toString.call(val) === '[object Function]';\n}\nexport function isDate(val) {\n  return toString.call(val) === '[object Date]';\n}\n//index.js\nimport { isArray } from './utils'\nisArray()\n```\n\nã€€ã€€æˆ‘ä»¬å¸Œæœ›åœ¨ä»£ç ä¸­åªæ‰“åŒ…``isArray``å‡½æ•°åˆ°bundleä¸­ï¼›éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸ºäº†è®©Tree Shakingç”Ÿæ•ˆï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ES6æ¨¡å—åŒ–çš„è¯­æ³•ï¼Œå› ä¸ºES6æ¨¡å—è¯­æ³•æ˜¯é™æ€åŒ–åŠ è½½æ¨¡å—ï¼Œå®ƒæœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š\n\n1. é™æ€åŠ è½½æ¨¡å—ï¼Œæ•ˆç‡æ¯”CommonJS æ¨¡å—çš„åŠ è½½æ–¹å¼é«˜\n2. ES6 æ¨¡å—æ˜¯ç¼–è¯‘æ—¶åŠ è½½ï¼Œä½¿å¾—é™æ€åˆ†ææˆä¸ºå¯èƒ½è¿›ä¸€æ­¥æ‹“å®½JSçš„è¯­æ³•\n\nã€€ã€€å¦‚æœæ˜¯``require``ï¼Œåœ¨è¿è¡Œæ—¶ç¡®å®šæ¨¡å—ï¼Œé‚£ä¹ˆå°†æ— æ³•å»åˆ†ææ¨¡å—æ˜¯å¦å¯ç”¨ï¼Œåªæœ‰åœ¨ç¼–è¯‘æ—¶åˆ†æï¼Œæ‰ä¸ä¼šå½±å“è¿è¡Œæ—¶çš„çŠ¶æ€ã€‚\n\n\nã€€ã€€ä½¿ç”¨ES6æ¨¡å—åè¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå› ä¸ºæˆ‘ä»¬çš„ä»£ç ä¸€èˆ¬éƒ½é‡‡ç”¨babelè¿›è¡Œç¼–è¯‘ï¼Œè€Œbabelçš„preseté»˜è®¤ä¼šå°†ä»»ä½•æ¨¡å—ç±»å‹ç¼–è¯‘æˆCommonjsï¼Œå› æ­¤æˆ‘ä»¬è¿˜éœ€è¦ä¿®æ”¹``.babelrc``é…ç½®æ–‡ä»¶ï¼š\n\n```js\n{\n  \"presets\": [\n    [\n      \"@babel/preset-env\",\n      {\n        //æ·»åŠ modulesï¼šfalse\n        \"modules\": false\n      }\n    ]\n  ]\n}\n```\n\nã€€ã€€é…ç½®å¥½babelåæˆ‘ä»¬éœ€è¦è®©webpackå…ˆå°†â€œæ­»ä»£ç â€æ ‡è¯†å‡ºæ¥ï¼š\n\n```js\n{\n  //å…¶ä»–é…ç½®\n  optimization: {\n    usedExports: true,\n    sideEffects: true,\n  }\n}\n```\n\nã€€ã€€è¿è¡Œæ‰“åŒ…å‘½ä»¤åï¼Œå½“æˆ‘ä»¬æ‰“å¼€è¾“å‡ºçš„bundleæ–‡ä»¶æ—¶ï¼Œæˆ‘ä»¬å‘ç°è™½ç„¶ä¸€äº›â€œæ­»ä»£ç â€è¿˜å­˜åœ¨é‡Œé¢ï¼Œä½†æ˜¯åŠ ä¸Šäº†ä¸€ä¸ª``unused harmony export``çš„æ ‡è¯†\n\n\n```js\n/* unused harmony export isFunction */\n/* unused harmony export isDate */\nvar toString = Object.prototype.toString;\nfunction isFunction(val) {\n  return toString.call(val) === '[object Function]';\n}\nfunction isDate(val) {\n  return toString.call(val) === '[object Date]';\n}\n```\n\nã€€ã€€è™½ç„¶webpackç»™æˆ‘ä»¬æŒ‡å‡ºäº†å“ªäº›å‡½æ•°ç”¨ä¸ä¸Šï¼Œä½†æ˜¯è¿˜éœ€è¦æˆ‘ä»¬é€šè¿‡æ’ä»¶æ¥å‰”é™¤ï¼›ç”±äº``uglifyjs-webpack-plugin``ä¸æ”¯æŒES6è¯­æ³•ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨``terser-webpack-plugin``çš„æ’ä»¶æ¥ä»£æ›¿å®ƒï¼š\n\n```js\nconst TerserJSPlugin = require(\"terser-webpack-plugin\");\nmodule.exports = {\n  optimization: {\n    usedExports: true,\n    sideEffects: true,\n    minimize: true,\n    minimizer: [\n      new TerserJSPlugin({\n        cache: true,\n        parallel: true, \n        sourceMap: false,\n      }),\n    ],\n  }\n}\n```\n\nã€€ã€€è¿™æ ·æˆ‘ä»¬å‘ç°æ‰“åŒ…å‡ºæ¥çš„æ–‡ä»¶å°±æ²¡æœ‰å¤šä½™çš„ä»£ç äº†ã€‚\n\n> æ³¨ï¼š Tree Shakingåœ¨ç”Ÿäº§ç¯å¢ƒï¼ˆproductionï¼‰æ˜¯é»˜è®¤å¼€å¯çš„\n\nã€€ã€€å¯¹äºæˆ‘ä»¬å¸¸ç”¨çš„ä¸€äº›ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å®ç°Tree Shakingï¼›ä»¥``lodash``ä¸ºä¾‹ï¼Œå®ƒæ•´ä¸ªåŒ…æœ‰éå¸¸å¤šçš„å‡½æ•°ï¼Œä½†å¹¶ä¸æ˜¯æ‰€æœ‰çš„å‡½æ•°éƒ½æ˜¯æˆ‘ä»¬æ‰€ç”¨åˆ°çš„ï¼Œå› æ­¤æˆ‘ä»¬ä¹Ÿéœ€è¦å¯¹å®ƒæ²¡æœ‰ç”¨åˆ°çš„ä»£ç è¿›è¡Œå‰”é™¤ã€‚\n\n\n```js\n//index.js\nimport { chunk } from 'lodash'\nconsole.log(chunk([1,2,3,4], 2))\n```\n\nã€€ã€€æ‰“åŒ…å‡ºæ¥å‘ç°åŒ…çš„å¤§å°è¿˜æ˜¯èƒ½è¾¾åˆ°70+kbï¼Œå¦‚æœåªå¼•ç”¨äº†chunkä¸åº”è¯¥æœ‰è¿™ä¹ˆå¤§ï¼›æˆ‘ä»¬æ‰“å¼€``/node_modules/lodash/index.js``å‘ç°ä»–è¿˜æ˜¯ä½¿ç”¨äº†requireçš„æ¨¡å¼å¯¼å…¥å¯¼å‡ºæ¨¡å—ï¼Œå› æ­¤å¯¼è‡´Tree Shakingå¤±è´¥ï¼›æˆ‘ä»¬å…ˆå®‰è£…ä½¿ç”¨ES6æ¨¡å—ç‰ˆæœ¬çš„lodashï¼š``npm i -S lodash-es``ï¼Œç„¶åä¿®æ”¹å¼•å…¥åŒ…ï¼š\n\n```js\n//index.js\nimport { chunk } from 'lodash-es'\nconsole.log(chunk([1,2,3,4], 2))\n```\n\nã€€ã€€è¿™æ ·æˆ‘ä»¬ç”Ÿæˆçš„bundleåŒ…å°±å°å¾ˆå¤šï¼›æœ¬å®ä¾‹å®Œæ•´ä»£ç [demo](https://github.com/acexyf/WebpackDemo/tree/master/demo12)ã€‚\n\n# ç¼“å­˜\n\n\nã€€ã€€æˆ‘ä»¬çŸ¥é“webpackä¼šå¯¹ä¸åŒçš„æ–‡ä»¶è°ƒç”¨ä¸åŒçš„loaderè¿›è¡Œè§£æå¤„ç†ï¼Œè§£æçš„è¿‡ç¨‹ä¹Ÿæ˜¯æœ€è€—æ€§èƒ½çš„è¿‡ç¨‹ï¼›æˆ‘ä»¬æ¯æ¬¡æ”¹ä»£ç ä¹Ÿåªæ˜¯ä¿®æ”¹é¡¹ç›®ä¸­çš„å°‘æ•°æ–‡ä»¶ï¼Œé¡¹ç›®ä¸­çš„å¤§éƒ¨åˆ†æ–‡ä»¶æ”¹åŠ¨çš„æ¬¡æ•°ä¸æ˜¯é‚£ä¹ˆé¢‘ç¹ï¼›é‚£ä¹ˆå¦‚æœæˆ‘ä»¬å°†è§£ææ–‡ä»¶çš„ç»“æœç¼“å­˜ä¸‹æ¥ï¼Œä¸‹æ¬¡å‘ç°åŒæ ·çš„æ–‡ä»¶åªéœ€è¦è¯»å–ç¼“å­˜å°±èƒ½æå¤§çš„æå‡è§£æçš„æ€§èƒ½ã€‚\n\n\n## cache-loader\n\nã€€ã€€cache-loaderå¯ä»¥å°†ä¸€äº›å¯¹æ€§èƒ½æ¶ˆè€—æ¯”è¾ƒå¤§çš„loaderç”Ÿäº§çš„ç»“æœç¼“å­˜åœ¨ç£ç›˜ä¸­ï¼Œç­‰ä¸‹æ¬¡å†æ¬¡æ‰“åŒ…æ—¶å¦‚æœæ˜¯ç›¸åŒçš„ä»£ç å°±å¯ä»¥ç›´æ¥è¯»å–ç¼“å­˜ï¼Œå‡å°‘æ€§èƒ½æ¶ˆè€—ã€‚\n\n> æ³¨ï¼šä¿å­˜å’Œè¯»å–ç¼“å­˜ä¹Ÿä¼šäº§ç”Ÿé¢å¤–çš„æ€§èƒ½å¼€é”€ï¼Œå› æ­¤cache-loaderé€‚åˆç”¨äºå¯¹æ€§èƒ½æ¶ˆè€—è¾ƒå¤§çš„loaderï¼Œå¦åˆ™åè€Œä¼šå¢åŠ æ€§èƒ½æ¶ˆè€—\n\nã€€ã€€cache-loaderçš„ä½¿ç”¨ä¹Ÿéå¸¸ç®€å•ï¼Œå®‰è£…ååœ¨æ‰€éœ€è¦ç¼“å­˜çš„loaderå‰é¢æ·»åŠ å³å¯ï¼ˆå› ä¸ºloaderåŠ è½½çš„é¡ºåºæ˜¯åå‘çš„ï¼‰ï¼Œæ¯”å¦‚æˆ‘ä»¬éœ€è¦ç»™``babel-loader``æ·»åŠ ç¼“å­˜ï¼š\n\n```js\n{\n  //çœç•¥å…¶ä»–ä»£ç \n  rules: [\n    {\n      test: /\\.js/,\n      use: [\n        {\n          loader: 'cache-loader'\n        },\n        {\n          loader: \"babel-loader\",\n        },\n      ],\n    },\n  ],\n}\n```\n\nã€€ã€€ç„¶è€Œæˆ‘ä»¬å‘ç°ç¬¬ä¸€æ¬¡æ‰“åŒ…çš„é€Ÿåº¦å¹¶æ²¡æœ‰å‘ç”Ÿæ˜æ˜¾å˜åŒ–ï¼Œç”šè‡³å¯èƒ½è¿˜æ¯”åŸæ¥æ‰“åŒ…çš„æ›´æ…¢äº†ï¼›åŒæ—¶è¿˜å¤šäº†``/node_modules/.cache/cache-loader/``è¿™ä¸ªç›®å½•ï¼Œçœ‹åå­—å°±æ˜¯ä¸€ä¸ªç¼“å­˜æ–‡ä»¶ï¼›æˆ‘ä»¬ç»§ç»­æ‰“åŒ…ï¼Œä¸‹é¢å›¾è¡¨è®°å½•äº†æˆ‘å‡ æ¬¡æ‰“åŒ…çš„è€—æ—¶ï¼š\n\n![cache-loader-time.png](https://xieyufei.com/images/Webpack-Optimize/cache-loader-time.png)\n\n\nã€€ã€€æˆ‘ä»¬å‘ç°ç¬¬ä¸€æ¬¡æ‰“åŒ…æ—¶é—´éƒ½å·®ä¸å¤šï¼Œä½†æ˜¯ç¬¬äºŒæ¬¡å¼€å§‹ç¼“å­˜æ–‡ä»¶å°±å¼€å§‹å‘æŒ¥äº†é‡è¦çš„ä½œç”¨äº†ï¼Œç›´æ¥å‡å°‘äº†75%çš„è€—æ—¶ã€‚\n\n\nã€€ã€€é™¤äº†ä½¿ç”¨cache-loaderï¼Œbabel-loaderä¹Ÿæä¾›ç¼“å­˜åŠŸèƒ½ï¼Œé€šè¿‡``cacheDirectory``è¿›è¡Œé…ç½®ï¼š\n\n```js\n{\n  rules: [\n    {\n      test: /\\.js/,\n      use: [\n        {\n          loader: \"babel-loader\",\n          options: {\n            cacheDirectory: true\n          }\n        },\n      ],\n    },\n  ],\n}\n```\n\n\nã€€ã€€åœ¨``/node_modules/.cache/babel-loader``ä¹Ÿå¤šäº†ç¼“å­˜æ–‡ä»¶ã€‚ç»è¿‡ä¸¤ä¸ªä½¿ç”¨ç»“æœçš„å¯¹æ¯”ï¼Œcache-loaderçš„æ€§èƒ½æå‡æ›´åŠ å‡ºè‰²ä¸€äº›ï¼›æœ¬å®ä¾‹å®Œæ•´ä»£ç [demo](https://github.com/acexyf/WebpackDemo/tree/master/demo16)ã€‚\n\n\n## HardSourceWebpackPlugin\n\nã€€ã€€HardSourceWebpackPluginä¹Ÿå¯ä»¥ä¸ºæ¨¡å—æä¾›ç¼“å­˜åŠŸèƒ½ï¼ŒåŒæ„ä¹Ÿæ˜¯å°†æ–‡ä»¶ç¼“å­˜åœ¨ç£ç›˜ä¸­\n\nã€€ã€€é¦–å…ˆé€šè¿‡``npm i -D hard-source-webpack-plugin``æ¥å®‰è£…æ’ä»¶ï¼Œå¹¶ä¸”åœ¨é…ç½®ä¸­æ·»åŠ æ’ä»¶ï¼š\n\n\n```js\nvar HardSourceWebpackPlugin = \n    require('hard-source-webpack-plugin');\nmodule.exports = {\n  plugins: [\n    new HardSourceWebpackPlugin()\n  ]\n}\n```\n\nã€€ã€€ä¸€èˆ¬HardSourceWebpackPluginé»˜è®¤ç¼“å­˜æ˜¯åœ¨``/node_modules/.cache/hard-source/[hash]``ç›®å½•ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®å®ƒçš„ç¼“å­˜ç›®å½•å’Œä½•æ—¶åˆ›å»ºæ–°çš„ç¼“å­˜å“ˆå¸Œå€¼ã€‚\n\n```js\nmodule.exports = {\n  plugins: [\n    new HardSourceWebpackPlugin({\n      //è®¾ç½®ç¼“å­˜ç›®å½•çš„è·¯å¾„\n      //ç›¸å¯¹è·¯å¾„æˆ–è€…ç»å¯¹è·¯å¾„\n      cacheDirectory: 'node_modules/.cache/hard-source/[confighash]',\n      //æ„å»ºä¸åŒçš„ç¼“å­˜ç›®å½•åç§°\n      //ä¹Ÿå°±æ˜¯cacheDirectoryä¸­çš„[confighash]å€¼\n      configHash: function(webpackConfig) {\n        return require('node-object-hash')({sort: false}).hash(webpackConfig);\n      },\n      //ç¯å¢ƒhash\n      //å½“loaderã€pluginæˆ–è€…å…¶ä»–npmä¾èµ–æ”¹å˜æ—¶è¿›è¡Œæ›¿æ¢ç¼“å­˜\n      environmentHash: {\n        root: process.cwd(),\n        directories: [],\n        files: ['package-lock.json', 'yarn.lock'],\n      },\n      //è‡ªåŠ¨æ¸…é™¤ç¼“å­˜\n      cachePrune: {\n        //ç¼“å­˜æœ€é•¿æ—¶é—´ï¼ˆé»˜è®¤2å¤©ï¼‰\n        maxAge: 2 * 24 * 60 * 60 * 1000,\n        //æ‰€æœ‰çš„ç¼“å­˜å¤§å°è¶…è¿‡sizeå€¼å°†ä¼šè¢«æ¸…é™¤\n        //é»˜è®¤50MB\n        sizeThreshold: 50 * 1024 * 1024\n      },\n    })\n  ]\n}\n```\n\n![hard-source.png](https://xieyufei.com/images/Webpack-Optimize/hard-source.png)\n\nã€€ã€€é€šè¿‡å°è¯•å¤šæ¬¡æ‰“åŒ…ï¼Œå‘ç°èƒ½èŠ‚çœå¤§æ¦‚90%çš„æ—¶é—´ï¼›æœ¬å®ä¾‹å®Œæ•´ä»£ç [demo](https://github.com/acexyf/WebpackDemo/tree/master/demo17)ã€‚\n\n\n\n# å¤šè¿›ç¨‹\n\nã€€ã€€æˆ‘ä»¬åœ¨[äº‹ä»¶å¾ªç¯ä¸­](http://xieyufei.com/2019/12/30/Quiz-Eventloop.html)è®²åˆ°è¿‡ï¼Œjsæ˜¯ä¸€é—¨å•çº¿ç¨‹çš„è¯­è¨€ï¼Œåœ¨åŒä¸€äº‹ä»¶çº¿ä¸Šåªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨å¤„ç†ä»»åŠ¡ï¼›å› æ­¤åœ¨webpackè§£æåˆ°JSã€CSSã€å›¾ç‰‡æˆ–è€…å­—ä½“æ–‡ä»¶æ—¶ï¼Œå®ƒéœ€è¦ä¸€ä¸ªä¸ªçš„å»è§£æç¼–è¯‘ï¼Œä¸èƒ½åŒæ—¶å¤„ç†å¤šä¸ªä»»åŠ¡ï¼›æˆ‘ä»¬å¯ä»¥é€šè¿‡æ’ä»¶æ¥å°†ä»»åŠ¡åˆ†ç»™å¤šä¸ªå­è¿›ç¨‹å»å¹¶å‘æ‰§è¡Œï¼Œå­è¿›ç¨‹å¤„ç†å®Œæˆåå†å°†ç»“æœå‘é€ç»™ä¸»è¿›ç¨‹ã€‚\n\n\n## happypack\n\nã€€ã€€happypackä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬åˆ†è§£ä»»åŠ¡å’Œç®¡ç†è¿›ç¨‹ï¼Œé€šè¿‡åå­—æˆ‘ä»¬ä¹Ÿèƒ½çœ‹å‡ºæ¥ï¼Œè¿™æ˜¯ä¸€æ¬¾èƒ½å¤Ÿå¸¦æ¥å¿«ä¹çš„æ’ä»¶ã€‚\n\n![enough.gif](https://xieyufei.com/images/Webpack-Optimize/enough.gif)\n\nã€€ã€€æˆ‘ä»¬é€šè¿‡``npm i -D happypack``åå°±èƒ½åœ¨webpackä¸­è¿›è¡Œé…ç½®äº†ï¼š\n\n```js\nconst happypack = require(\"happypack\");\nmodule.exports = {\n  module: {\n    rules: [\n      {\n        test: /\\.js/,\n        exclude: /node_modules/,\n        //å°†jsæ–‡ä»¶å¤„ç†ç»™idä¸ºjsçš„happypackå®ä¾‹\n        use: \"happypack/loader?id=js\",\n      }\n    ],\n  },\n  plugins: [\n    //é€šè¿‡idæ ‡è¯†å½“å‰happypackæ˜¯å¤„ç†ä»€ä¹ˆæ–‡ä»¶çš„\n    new happypack({\n      id: \"js\",\n      //è°ƒç”¨å¤„ç†æ–‡ä»¶çš„loaderï¼Œç”¨æ³•å’Œrulesä¸­ä¸€è‡´\n      loaders: [{\n          loader: \"babel-loader\",\n        },\n        {\n          loader: \"eslint-loader\",\n        },\n      ],\n    }),\n  ],\n}\n```\n\nã€€ã€€æˆ‘ä»¬å°†``rules/loader``çš„å¤„ç†å…¨éƒ¨äº¤ç»™äº†happypackè¿›è¡Œå¤„ç†ï¼Œå¹¶ä¸”é€šè¿‡idæ¥è°ƒç”¨å…·ä½“çš„å®ä¾‹ï¼Œç„¶ååœ¨å®ä¾‹ä¸­é…ç½®å…·ä½“çš„loaderè¿›è¡Œå¤„ç†ï¼›åœ¨happypackçš„å®ä¾‹ä¸­é™¤äº†idå’Œloadersæˆ‘ä»¬è¿˜å¯ä»¥é…ç½®è¿›ç¨‹æ•°é‡ï¼š\n\n\n```js\n//å…±äº«è¿›ç¨‹æ± ï¼Œè¿›ç¨‹æ± ä¸­åŒ…å«5ä¸ªå­è¿›ç¨‹\nvar happyThreadPool = happypack.ThreadPool({\n  size: 5\n});\n{\n  plugins: [\n    new happypack({\n      id: \"js\",\n      //å¼€å¯å‡ ä¸ªå­è¿›ç¨‹ï¼Œé»˜è®¤3ä¸ª\n      threads: 3,\n      //å…±äº«è¿›ç¨‹æ± \n      threadPool: happyThreadPool,\n      //æ˜¯å¦å…è®¸ HappyPack è¾“å‡ºæ—¥å¿—\n      verbose: true,\n      loaders: [{\n          loader: \"babel-loader\",\n        },\n        {\n          loader: \"eslint-loader\",\n        },\n      ],\n    }),\n  ],\n}\n```\n\n> æ³¨ï¼šthreadså’ŒthreadPoolå­—æ®µåªéœ€è¦é…ç½®ä¸€ä¸ªå³å¯ã€‚\n\n\nã€€ã€€æˆ‘ä»¬é€šè¿‡``happypack.ThreadPool``åˆ›å»ºäº†ä¸€ä¸ªåŒ…å«5ä¸ªå­è¿›ç¨‹çš„å…±äº«è¿›ç¨‹æ± ï¼Œæ¯ä¸ªhappypackå®ä¾‹å¯ä»¥é€šè¿‡å…±äº«è¿›ç¨‹æ± æ¥å¤„ç†æ–‡ä»¶ï¼›ç›¸å¯¹äºç»™æ¯ä¸ªhappypackå®ä¾‹åˆ†é…è¿›ç¨‹ï¼Œè¿™æ ·å¯ä»¥é˜²æ­¢å ç”¨è¿‡å¤šæ— ç”¨çš„è¿›ç¨‹ï¼›æˆ‘ä»¬æ‰“åŒ…çœ‹ä¸€ä¸‹æ‰€è€—æ—¶é—´ï¼š\n\n\n\n![happypack.png](https://xieyufei.com/images/Webpack-Optimize/happypack.png)\n\n\nã€€ã€€æˆ‘ä»¬å‘ç°æœ‰äº†happypackè€—æ—¶å±…ç„¶è¿˜å¢åŠ äº†20%~30%ï¼Œè¯´å¥½çš„å¤šè¿›ç¨‹å¸¦æ¥å¿«ä¹å‘¢ã€‚\n\n![catch_up.png](https://xieyufei.com/images/Webpack-Optimize/catch_up.png)\n\nã€€ã€€ç”±äºæˆ‘ä»¬çš„é¡¹ç›®ä¸å¤Ÿåºå¤§ï¼Œè€ŒåŠ è½½å¤šè¿›ç¨‹ä¹Ÿéœ€è¦è€—è´¹æ—¶é—´å’Œæ€§èƒ½ï¼Œå› æ­¤æˆ‘ä»¬æ‰ä¼šå‡ºç°ä½¿ç”¨äº†happypackåè€Œå¢åŠ è€—æ—¶çš„æƒ…å†µï¼›æ‰€ä»¥ä¸€èˆ¬happypacké€‚ç”¨äºæ¯”è¾ƒå¤§çš„é¡¹ç›®ä¸­ï¼›æœ¬å®ä¾‹å®Œæ•´ä»£ç [demo](https://github.com/acexyf/WebpackDemo/tree/master/demo11)ã€‚\n\n\n\n## thread-loader\n\n\nã€€ã€€æŠŠthread-loaderæ”¾ç½®åœ¨å…¶ä»–loaderä¹‹å‰ï¼Œåœ¨å®ƒä¹‹åçš„loaderå°±ä¼šåœ¨ä¸€ä¸ªå•ç‹¬çš„è¿›ç¨‹æ± ä¸­è¿è¡Œï¼Œä½†æ˜¯åœ¨è¿›ç¨‹æ± ä¸­è¿è¡Œçš„loaderæœ‰ä»¥ä¸‹é™åˆ¶ï¼š\n\n\n* è¿™äº› loader ä¸èƒ½äº§ç”Ÿæ–°çš„æ–‡ä»¶ã€‚\n* è¿™äº› loader ä¸èƒ½ä½¿ç”¨å®šåˆ¶çš„ loader APIï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œé€šè¿‡æ’ä»¶ï¼‰ã€‚\n* è¿™äº› loader æ— æ³•è·å– webpack çš„é€‰é¡¹è®¾ç½®ã€‚\n\n\nã€€ã€€å› æ­¤ï¼Œä¹Ÿå°±æ˜¯è¯´åƒ``MiniCssExtractPlugin.loader``ç­‰ä¸€äº›æå–cssçš„loaderæ˜¯ä¸èƒ½ä½¿ç”¨thread-loaderçš„ï¼›è·Ÿhappypackä¸€æ ·ï¼Œå®ƒä¹Ÿåªé€‚åˆç”¨äºæ–‡ä»¶è¾ƒå¤šçš„å¤§é¡¹ç›®ï¼š\n\n```js\nmodule.exports = {\n  module: {\n    rules: [\n      {\n        test: /\\.js$/,\n        use: [\n          \"thread-loader\",\n          \"babel-loader\"\n        ]\n      }\n    ]\n  }\n}\n```\n\nã€€ã€€æœ¬å®ä¾‹å®Œæ•´ä»£ç [demo](https://github.com/acexyf/WebpackDemo/tree/master/demo18)ã€‚\n\nä½œè€…å¥½æ–‡æ¨èï¼š\n\n[Webpacké…ç½®å…¨è§£æï¼ˆåŸºç¡€ç¯‡ï¼‰](https://xieyufei.com/2020/06/06/Webpack-Learned.html)\n\n[ä»é›¶å¼€å§‹æ‰‹å†™Promise](https://xieyufei.com/2020/05/20/Handwrite-Promise.html)\n\n[é¢è¯•å®Œ50ä¸ªäººåæˆ‘å†™ä¸‹è¿™ç¯‡æ€»ç»“](https://xieyufei.com/2019/11/08/Front-Summary.html)\n\næ›´å¤šå‰ç«¯èµ„æ–™è¯·å…³æ³¨å…¬ä¼—å·``ã€å‰ç«¯å£¹è¯»ã€‘``ã€‚\n\n<img src=\"https://user-gold-cdn.xitu.io/2019/12/12/16ef8eedca3f7ac8?w=820&h=1148&f=png&s=207033\" style=\"width:50%;margin:0 auto;\" class=\"follow_img\" />\n\nå¦‚æœè§‰å¾—å†™å¾—è¿˜ä¸é”™ï¼Œè¯·å…³æ³¨æˆ‘çš„<a href=\"//juejin.im/user/580038cebf22ec0064bd0b2d\" style=\"color:#f63;text-decoration:none;\">æ˜é‡‘ä¸»é¡µ</a>ã€‚æ›´å¤šæ–‡ç« è¯·è®¿é—®<a href=\"http://xieyufei.com\" style=\"color:#f63;text-decoration:none;\">è°¢å°é£çš„åšå®¢</a>\n\n\n\n", "user_name": "è°¢å°é£", "description": "æ²¡äº‹å–œæ¬¢å†™å†™ä»£ç çœ‹çœ‹ä¹¦", "got_view_count": 209183, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "LeakCanary", "concern_user_count": 1250, "user_id": "4441682709326958", "title": "LeakCanaryæºç åˆ†æä»¥åŠContentProviderçš„ä¼˜åŒ–æ–¹æ¡ˆ", "mark_content": "#### 1.ä½¿ç”¨\n\nLeakCancary 2.0ä½¿ç”¨ï¼Œåªéœ€è¦é…ç½®å¦‚ä¸‹ä»£ç ï¼Œä¾¿å¯ä»¥è¿›è¡Œä½¿ç”¨ï¼Œæ¯”LeakCanary1.0ä¸çŸ¥é“é«˜åˆ°å“ªé‡Œå»äº†~\n\n```Java\ndebugImplementation 'com.squareup.leakcanary:leakcanary-android:2.0-alpha-2'\n```\n\n#### 2.æºç åˆ†æ\n\né˜…è¯»æºç åå¯ä»¥çœ‹åˆ°leakcancary-leaksentryæ¨¡å—çš„Androidmanifestæ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°ä¸‹é¢çš„å†…å®¹ï¼š\n\n```java\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<manifest\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    package=\"com.squareup.leakcanary.leaksentry\"\n    >\n\n  <application>\n    <provider\n        android:name=\"leakcanary.internal.LeakSentryInstaller\"\n        android:authorities=\"${applicationId}.leak-sentry-installer\"\n        android:exported=\"false\"/>\n  </application>\n</manifest>\n```\n\nç„¶åæˆ‘ä»¬å¯ä»¥çœ‹åˆ°LeakSentryInstallerè¿™ä¸ªç±»åˆ°åº•åšäº†ä»€ä¹ˆ\n\n```java\ninternal class LeakSentryInstaller : ContentProvider() {\n\n  override fun onCreate(): Boolean {\n    CanaryLog.logger = DefaultCanaryLog()\n    val application = context!!.applicationContext as Application\n    //åˆ©ç”¨ç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨ContentProviderçš„onCreateæ¥è¿›è¡Œå®‰è£…\n    InternalLeakSentry.install(application)\n    return true\n  }\n  ...\n```\n\nè‡³äºä¸ºä»€ä¹ˆç³»ç»Ÿä¼šè°ƒç”¨ContentProviderçš„onCreateæ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹çœ‹æºç ï¼Œåœ¨ActivityThreadä¸­çš„Hä¸­çš„handleMessageå¯ä»¥çœ‹åˆ°\n\n```Java\npublic void handleMessage(Message msg) {\n    if (DEBUG_MESSAGES) Slog.v(TAG, \">>> handling: \" + codeToString(msg.what));\n    switch (msg.what) {\n        case BIND_APPLICATION:\n            Trace.traceBegin(Trace.TRACE_TAG_ACTIVITY_MANAGER, \"bindApplication\");\n            AppBindData data = (AppBindData)msg.obj;\n            //å…³é”®æ–¹æ³•\n            handleBindApplication(data);\n            Trace.traceEnd(Trace.TRACE_TAG_ACTIVITY_MANAGER);\n            break;\n```\n\nç„¶ååœ¨handleBindApplicationä¸­å¯ä»¥çœ‹åˆ°\n\n```java\n// don't bring up providers in restricted mode; they may depend on the\n// app's custom Application class\nif (!data.restrictedBackupMode) {\n    if (!ArrayUtils.isEmpty(data.providers)) {\n        //contentprovideråˆå§‹åŒ–ï¼Œé‡Œé¢ä¼šè°ƒç”¨onCreateæ–¹æ³•\n        installContentProviders(app, data.providers);\n    }\n}\n\n// Do this after providers, since instrumentation tests generally start their\n// test thread at this point, and we don't want that racing.\ntry {\n    mInstrumentation.onCreate(data.instrumentationArgs);\n}\ncatch (Exception e) {\n    throw new RuntimeException(\n        \"Exception thrown in onCreate() of \"\n        + data.instrumentationName + \": \" + e.toString(), e);\n}\ntry {\n    //appçš„onCreateæ–¹æ³•è°ƒç”¨\n    mInstrumentation.callApplicationOnCreate(app);\n} catch (Exception e) {\n```\n\nå…·ä½“è°ƒç”¨contentproviderçš„onCreateä»£ç é€»è¾‘å¦‚ä¸‹\n\n```java\n@UnsupportedAppUsage\nprivate void installContentProviders(\n        Context context, List<ProviderInfo> providers) {\n    final ArrayList<ContentProviderHolder> results = new ArrayList<>();\n\n    for (ProviderInfo cpi : providers) {\n        Â·Â·Â·\n        //installProvideræ–¹æ³•\n        ContentProviderHolder cph = installProvider(context, null, cpi,\n                false /*noisy*/, true /*noReleaseNeeded*/, true /*stable*/);\n        if (cph != null) {\n            cph.noReleaseNeeded = true;\n            results.add(cph);\n        }\n    }\n  //installProvideræ–¹æ³•ï¼Œç„¶åä¸€æ­¥æ­¥è·Ÿè¿›\n  //1\n  //XXX Need to create the correct context for this provider.\n  localProvider.attachInfo(c, info);\n  //2\n\tpublic void attachInfo(Context context, ProviderInfo info) {\n        attachInfo(context, info, false);\n   }\n  //3\n  private void attachInfo(Context context, ProviderInfo info, boolean testing) {\n        mNoPerms = testing;\n        mCallingPackage = new ThreadLocal<>();\n        if (mContext == null) {\n            Â·Â·Â·\n            ContentProvider.this.onCreate();\n        }\n    }\n```\n\né€šè¿‡ä¸Šé¢çš„åˆ†æï¼Œå¯ä»¥çŸ¥é“åœ¨æˆ‘ä»¬å¼•å…¥ä¾èµ–åï¼Œä¾èµ–åŒ…ä¸­çš„AndroidMainfest.xmlæ–‡ä»¶ä¾¿ä¼šä¸»åŠ¨åˆå¹¶åˆ°ä¸»AndroidManifest.xmlæ–‡ä»¶ä¸­ï¼Œç„¶ååœ¨ç¨‹åºå¯åŠ¨è¿‡ç¨‹ä¸­ä¾¿ä¼šè‡ªåŠ¨åˆ›å»ºContentProviderï¼Œç„¶åè¿›è¡ŒInternalLeakSentry.install(application)ï¼Œæ¥ä¸‹æ¥è¿›è¡Œä¸€äº›åˆ—çš„ç›‘æ§å’Œdumpæ“ä½œç­‰ã€‚\n\n##### 2.1 InternalLeakSentry.install(application)\n\nä¸‹é¢æ¥åˆ†æInternalLeakSentry.install(application)é‡Œé¢éƒ½åšäº†ä¸€äº›ä»€ä¹ˆï¼Œå¯ä»¥çœ‹åˆ°\n\n```java\nfun install(application: Application) {\n    CanaryLog.d(\"Installing LeakSentry\")\n    checkMainThread()\n    if (this::application.isInitialized) {\n      return\n    }\n    InternalLeakSentry.application = application\n\n    val configProvider = { LeakSentry.config }\n    // 1.ç›‘å¬ Activity.onDestroy()\n    ActivityDestroyWatcher.install(\n        application, refWatcher, configProvider\n    )\n    // 2.ç›‘å¬ Fragment.onDestroy()\n    FragmentDestroyWatcher.install(\n        application, refWatcher, configProvider\n    )\n    // 3.ç›‘å¬å®Œæˆåè¿›è¡Œä¸€äº›åˆå§‹åŒ–å·¥ä½œ\n    listener.onLeakSentryInstalled(application)\n  }\n```\n\nä»å‘½åä¸Šå¯ä»¥çœ‹åˆ°åœ¨Activityå’ŒFragmentè¿›è¡Œdestoryçš„æ—¶å€™è¿›è¡Œwatch\n\n1. ActivityDestroyWatcher\n\n```java\ninternal class ActivityDestroyWatcher private constructor(\n  private val refWatcher: RefWatcher,\n  private val configProvider: () -> Config\n) {\n\n  private val lifecycleCallbacks = object : ActivityLifecycleCallbacksAdapter() {\n    override fun onActivityDestroyed(activity: Activity) {\n      if (configProvider().watchActivities) {\n        // ç›‘å¬åˆ° onDestroy() ä¹‹åï¼Œé€šè¿‡ refWatcher ç›‘æµ‹ Activity\n        refWatcher.watch(activity)\n      }\n    }\n  }\n\n  companion object {\n    fun install(\n      application: Application,\n      refWatcher: RefWatcher,\n      configProvider: () -> Config\n    ) {\n      val activityDestroyWatcher =\n        ActivityDestroyWatcher(refWatcher, configProvider)\n      application.registerActivityLifecycleCallbacks(activityDestroyWatcher.lifecycleCallbacks)\n    }\n  }\n}\n```\n\n2. FragmentDestroyWatcher\n\n```java\ninternal interface FragmentDestroyWatcher {\n\n  fun watchFragments(activity: Activity)\n\n  companion object {\n\n    private const val SUPPORT_FRAGMENT_CLASS_NAME = \"androidx.fragment.app.Fragment\"\n\n    fun install(\n      application: Application,\n      refWatcher: RefWatcher,\n      configProvider: () -> LeakSentry.Config\n    ) {\n      val fragmentDestroyWatchers = mutableListOf<FragmentDestroyWatcher>()\n\n      //å¤§äºç­‰äºandroid O  \n      if (SDK_INT >= O) {\n        fragmentDestroyWatchers.add(\n            AndroidOFragmentDestroyWatcher(refWatcher, configProvider)\n        )\n      }\n\n      if (classAvailable(\n              SUPPORT_FRAGMENT_CLASS_NAME\n          )\n      ) {\n        // androidx ä½¿ç”¨ SupportFragmentDestroyWatcher\n        fragmentDestroyWatchers.add(\n            SupportFragmentDestroyWatcher(refWatcher, configProvider)\n        )\n      }\n\n      if (fragmentDestroyWatchers.size == 0) {\n        return\n      }\n\n      application.registerActivityLifecycleCallbacks(object : ActivityLifecycleCallbacksAdapter() {\n        override fun onActivityCreated(\n          activity: Activity,\n          savedInstanceState: Bundle?\n        ) {\n          for (watcher in fragmentDestroyWatchers) {\n            watcher.watchFragments(activity)\n          }\n        }\n      })\n    }\n\n    private fun classAvailable(className: String): Boolean {\n      return try {\n        Class.forName(className)\n        true\n      } catch (e: ClassNotFoundException) {\n        false\n      }\n    }\n  }\n}\n```\n\nAndroid O åŠä»¥åï¼Œandroidx éƒ½å…·å¤‡å¯¹ Fragment ç”Ÿå‘½å‘¨æœŸçš„ç›‘å¬åŠŸèƒ½ã€‚ä¸ºä»€ä¹ˆä¸ç›‘å¬Android Oä¹‹å‰çš„å‘¢ï¼Ÿï¼Ÿï¼Ÿï¼ˆå¾…è§£å†³ï¼‰\nåœ¨ç‰ˆæœ¬ä¸º1.5.4ä¹‹å‰æ˜¯ä¸æ”¯æŒFragmentå†…å­˜æ³„æ¼ç›‘å¬çš„ï¼Œåé¢ç‰ˆæœ¬æ‰åŠ äº†è¿›æ¥ã€‚\n\n3. listener.onLeakSentryInstalled(application)\n\nè¯¥listenerçš„æœ€ç»ˆå®ç°ç±»æ˜¯leakcanary-android-coreä¸­çš„InternalLeakCanaryç±»\n\n```java\noverride fun onLeakSentryInstalled(application: Application) {\n    this.application = application\n\n    val heapDumper = AndroidHeapDumper(application, leakDirectoryProvider)\n\t\t//ç”¨äºå‘ç°å¯èƒ½çš„å†…å­˜æ³„æ¼ä¹‹åæ‰‹åŠ¨è°ƒç”¨ GC ç¡®è®¤æ˜¯å¦çœŸçš„ä¸ºå†…å­˜æ³„éœ²\n    val gcTrigger = GcTrigger.Default\n\n    val configProvider = { LeakCanary.config }\n\n    val handlerThread = HandlerThread(HeapDumpTrigger.LEAK_CANARY_THREAD_NAME)\n    handlerThread.start()\n    val backgroundHandler = Handler(handlerThread.looper)\n\t\t//ç”¨äºç¡®è®¤å†…å­˜æ³„æ¼ä¹‹åè¿›è¡Œ heap dump å·¥ä½œã€‚\n    heapDumpTrigger = HeapDumpTrigger(\n        application, backgroundHandler, LeakSentry.refWatcher, gcTrigger, heapDumper, configProvider\n    )\n    application.registerVisibilityListener { applicationVisible ->\n      this.applicationVisible = applicationVisible\n      heapDumpTrigger.onApplicationVisibilityChanged(applicationVisible)\n    }\n    addDynamicShortcut(application)\n  }\n```\n\nè¿™é‡Œæœ‰ä¸ªå…³äºGCå›æ”¶çš„çŸ¥è¯†ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹çœ‹ä¼˜ç§€çš„ç¬¬ä¸‰æ–¹æ¡†æ¶éƒ½æ˜¯æ€ä¹ˆå†™çš„\n\n```java\ninterface GcTrigger {\n  fun runGc()\n  object Default : GcTrigger {\n    override fun runGc() {\n      // Code taken from AOSP FinalizationTest:\n      // https://android.googlesource.com/platform/libcore/+/master/support/src/test/java/libcore/\n      // java/lang/ref/FinalizationTester.java\n      // System.gc() does not garbage collect every time. Runtime.gc() is\n      // more likely to perform a gc.\n      Runtime.getRuntime()\n          .gc()\n      enqueueReferences()\n      System.runFinalization()\n    }\n    private fun enqueueReferences() {\n      // Hack. We don't have a programmatic way to wait for the reference queue daemon to move\n      // references to the appropriate queues.\n      try {\n        Thread.sleep(100)\n      } catch (e: InterruptedException) {\n        throw AssertionError()\n      }\n    }\n  }\n}\n```\n\nå¯ä»¥çœ‹åˆ°ï¼Œå®ƒä½¿ç”¨äº†Runtime.getRuntime().gc()è€Œä¸æ˜¯System.gc()ï¼Œè¿›å…¥System.gcæºç ä¸€çœ‹\n\n```java\npublic static void gc() {\n    boolean shouldRunGC;\n    synchronized (LOCK) {\n        shouldRunGC = justRanFinalization;\n        if (shouldRunGC) {\n            justRanFinalization = false;\n        } else {\n            runGC = true;\n        }\n    }\n    if (shouldRunGC) {\n        Runtime.getRuntime().gc();\n    }\n}\n```\n\nå¯ä»¥çœ‹åˆ°System.gcæºç çš„è¿˜æ˜¯æœ€ç»ˆå®ç°æ˜¯Runtime.getRuntime().gc()ï¼›ä½†æ˜¯éœ€è¦ä¸€ç³»åˆ—çš„åˆ¤æ–­æ¡ä»¶ï¼Œæˆ‘ä»¬æ‰‹åŠ¨è°ƒç”¨System.runFinalization()å¯ä»¥ä½¿gcæ–¹æ³•ä¸­çš„justRanFinalizationwä¸ºtrueï¼Œä»è€Œä¿è¯Runtime.getRuntime().gc()ä¼šè¢«æ‰§è¡Œã€‚\n\n\n\n#### 3.å¦‚ä½•åˆ¤æ–­å¯¹è±¡å¯èƒ½æ³„éœ²ï¼šReferenceQueueå«ä¹‰åŠä½œç”¨\n\nåœ¨Activity/Fragmenté”€æ¯åï¼Œä¼šè¿›è¡Œä¸€ç³»åˆ—çš„å¯¹è±¡å›æ”¶ï¼Œæˆ‘ä»¬æŠŠè¿™äº›å¯¹è±¡åˆ†åˆ«å’Œå¼•ç”¨é˜Ÿåˆ—è¿›è¡Œå…³è”ï¼Œå½“æŸä¸ªå¯¹è±¡è¢«å›æ”¶æ—¶ï¼Œ**ï¼ˆå¼±å¼•ç”¨ä¸€æ—¦å˜æˆå¼±å¯è¾¾(å¯è¾¾æ€§ç®—æ³•åˆ†æ)ï¼Œå¼•ç”¨å°±ä¼šåŠ åˆ°å¼•ç”¨é˜Ÿåˆ—ä¸­ï¼Œç„¶åå†è¿›è¡Œå›æ”¶ï¼‰**æˆ‘ä»¬å¯¹è±¡çš„å¼•ç”¨å°±ä¼šè¢«åŠ å…¥åˆ°å¼•ç”¨é˜Ÿåˆ—ä¸­ã€‚æ ¹æ®è¯¥åŸç†è¿›è¡Œä¸€ç³»åˆ—çš„æ“ä½œï¼Œæœ€ç»ˆåˆ¤æ–­æ˜¯å¦å†…å­˜æ³„æ¼ã€‚\n\n##### 3.1 å¼•ç”¨é˜Ÿåˆ—\n\né€šå¸¸æˆ‘ä»¬å°†å…¶ReferenceQueueç¿»è¯‘ä¸ºå¼•ç”¨é˜Ÿåˆ—ï¼Œæ¢è¨€ä¹‹å°±æ˜¯å­˜æ”¾å¼•ç”¨çš„é˜Ÿåˆ—ï¼Œä¿å­˜çš„æ˜¯Referenceå¯¹è±¡ã€‚å…¶ä½œç”¨åœ¨äºReferenceå¯¹è±¡æ‰€å¼•ç”¨çš„å¯¹è±¡è¢«GCå›æ”¶æ—¶ï¼Œè¯¥Referenceå¯¹è±¡å°†ä¼šè¢«åŠ å…¥å¼•ç”¨é˜Ÿåˆ—ä¸­ï¼ˆReferenceQueueï¼‰çš„é˜Ÿåˆ—æœ«å°¾ã€‚\n\nReferenceQueueå¸¸ç”¨çš„æ–¹æ³•ï¼š\n\npublic Reference poll()ï¼šä»é˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªå…ƒç´ ï¼Œé˜Ÿåˆ—ä¸ºç©ºåˆ™è¿”å›nullï¼›\n\npublic Reference remove()ï¼šä»é˜Ÿåˆ—ä¸­å‡ºå¯¹ä¸€ä¸ªå…ƒç´ ï¼Œè‹¥æ²¡æœ‰åˆ™é˜»å¡è‡³æœ‰å¯å‡ºé˜Ÿå…ƒç´ ï¼›\n\npublic Reference remove(long timeout)ï¼šä»é˜Ÿåˆ—ä¸­å‡ºå¯¹ä¸€ä¸ªå…ƒç´ ï¼Œè‹¥æ²¡æœ‰åˆ™é˜»å¡è‡³æœ‰å¯å‡ºå¯¹å…ƒç´ æˆ–é˜»å¡è‡³è¶…è¿‡timeoutæ¯«ç§’ï¼›\n\n1. å¼ºå¼•ç”¨\n\n2. è½¯å¼•ç”¨\n\n3. å¼±å¼•ç”¨\n\n4. è™šå¼•ç”¨ï¼ˆPhantom Referenceï¼‰\n\n   è™šå¼•ç­‰åŒäºæ²¡æœ‰å¼•ç”¨ï¼Œè¿™æ„å‘³ç€åœ¨ä»»ä½•æ—¶å€™éƒ½å¯èƒ½è¢«GCå›æ”¶ï¼Œè®¾ç½®è™šå¼•ç”¨çš„ç›®çš„æ˜¯ä¸ºäº†è¢«è™šå¼•ç”¨å…³è”çš„å¯¹è±¡åœ¨è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶æ—¶ï¼Œèƒ½å¤Ÿæ”¶åˆ°ä¸€ä¸ªç³»ç»Ÿé€šçŸ¥ã€‚ï¼ˆè¢«ç”¨æ¥è·Ÿè¸ªå¯¹è±¡è¢«GCå›æ”¶çš„æ´»åŠ¨ï¼‰è™šå¼•ç”¨å’Œå¼±å¼•ç”¨çš„åŒºåˆ«åœ¨äºï¼šè™šå¼•ç”¨åœ¨ä½¿ç”¨æ—¶å¿…é¡»å’Œå¼•ç”¨é˜Ÿåˆ—ï¼ˆReferenceQueueï¼‰è”åˆä½¿ç”¨ï¼Œå…¶åœ¨GCå›æ”¶æœŸé—´çš„æ´»åŠ¨å¦‚ä¸‹ï¼š\n\n   ReferenceQueue queue=new ReferenceQueue();\n\n   PhantomReference pr=new PhantomReference(object,queue);\n\n   ä¹Ÿå³æ˜¯GCåœ¨å›æ”¶ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå¦‚æœå‘ç°è¯¥å¯¹è±¡å…·æœ‰è™šå¼•ç”¨ï¼Œé‚£ä¹ˆåœ¨å›æ”¶ä¹‹å‰ä¼šé¦–å…ˆè¯¥å¯¹è±¡çš„è™šå¼•ç”¨åŠ å…¥åˆ°ä¸ä¹‹å…³è”çš„å¼•ç”¨é˜Ÿåˆ—ä¸­ã€‚ç¨‹åºå¯ä»¥é€šè¿‡åˆ¤æ–­å¼•ç”¨é˜Ÿåˆ—ä¸­æ˜¯å¦å·²ç»åŠ å…¥è™šå¼•ç”¨æ¥äº†è§£è¢«å¼•ç”¨çš„å¯¹è±¡æ˜¯å¦è¢«GCå›æ”¶ã€‚\n\n##### 3.2 GC Rootå¯¹è±¡\n\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9d85a9e294634be0b95ffff8e3b6bd4b~tplv-k3u1fbpfcp-zoom-1.image)\n\n##### 3.3 å†…å­˜æ˜¯å¦æ³„æ¼\n\nçŸ¥é“å¼•ç”¨é˜Ÿåˆ—çš„åŸç†åï¼Œå…ˆå¤§æ¦‚æè¿°ä¸€ä¸‹å¦‚ä½•åˆ¤æ–­æ˜¯å¦æ³„æ¼ï¼Œé¦–å…ˆåˆ›å»ºä¸‰ä¸ªé˜Ÿåˆ—\n\n```java\n  /**\n   * References passed to [watch] that haven't made it to [retainedReferences] yet.\n   * watch() æ–¹æ³•ä¼ è¿›æ¥çš„å¼•ç”¨ï¼Œå°šæœªåˆ¤å®šä¸ºæ³„éœ²\n   */\n  private val watchedReferences = mutableMapOf<String, KeyedWeakReference>()\n  /**\n   * References passed to [watch] that we have determined to be retained longer than they should\n   * have been.\n   * watch() æ–¹æ³•ä¼ è¿›æ¥çš„å¼•ç”¨ï¼Œå·²ç»è¢«åˆ¤å®šä¸ºæ³„éœ²\n   */\n  private val retainedReferences = mutableMapOf<String, KeyedWeakReference>()\n  private val queue = ReferenceQueue<Any>() // å¼•ç”¨é˜Ÿåˆ—ï¼Œé…åˆå¼±å¼•ç”¨ä½¿ç”¨\n    \n//KeyedWeakReferenceï¼Œå¯¹è±¡å’Œå¼•ç”¨é˜Ÿåˆ—è¿›è¡Œå¼±å¼•ç”¨å…³è”ï¼Œæ‰€ä»¥è¿™ä¸ªå¯¹è±¡ä¸€å®šä¼šè¢«å›æ”¶    \nclass KeyedWeakReference(\n  referent: Any,\n  val key: String,\n  val name: String,\n  val watchUptimeMillis: Long,\n  referenceQueue: ReferenceQueue<Any>\n) : WeakReference<Any>(\n    referent, referenceQueue\n) {\n  @Volatile\n  var retainedUptimeMillis = -1L\n\n  companion object {\n    @Volatile\n    @JvmStatic var heapDumpUptimeMillis = 0L\n  }\n\n}    \n```\n\nå¦‚æœä¸€ä¸ªobjå¯¹è±¡ï¼Œå®ƒå’Œé˜Ÿåˆ—queueè¿›è¡Œå¼±å¼•ç”¨å…³è”ï¼Œåœ¨è¿›è¡Œåƒåœ¾æ”¶é›†æ—¶ï¼Œå‘ç°è¯¥å¯¹è±¡å…·æœ‰å¼±å¼•ç”¨ï¼Œä¼šæŠŠå¼•ç”¨åŠ å…¥åˆ°å¼•ç”¨é˜Ÿåˆ—ä¸­ï¼Œæˆ‘ä»¬å¦‚æœåœ¨è¯¥é˜Ÿåˆ—ä¸­æ‹¿åˆ°å¼•ç”¨ï¼Œåˆ™è¯´æ˜è¯¥å¯¹è±¡è¢«å›æ”¶äº†ï¼Œ**å¦‚æœæ‹¿ä¸åˆ°ï¼Œåˆ™è¯´æ˜è¯¥å¯¹è±¡è¿˜æœ‰å¼º/è½¯å¼•ç”¨æœªé‡Šæ”¾ï¼Œé‚£ä¹ˆå°±è¯´æ˜å¯¹è±¡è¿˜æœªå›æ”¶ï¼Œå‘ç”Ÿå†…å­˜æ³„æ¼äº†ï¼Œç„¶ådumpå†…å­˜å¿«ç…§ï¼Œä½¿ç”¨ç¬¬ä¸‰æ–¹åº“è¿›è¡Œå¼•ç”¨é“¾åˆ†æ**ã€‚\n\nè¿™é‡Œé‡ç‚¹å¼ºè°ƒä¸€ç‚¹**ä¸€ä¸ªå¯¹è±¡å¯èƒ½è¢«å¤šä¸ªå¼•ç”¨æŒæœ‰ï¼Œæ¯”å¦‚å¼ºå¼•ç”¨ï¼Œè½¯å¼•ç”¨ï¼Œå¼±å¼•ç”¨ï¼Œåªè¦è¿™ä¸ªå¯¹è±¡è¿˜æœ‰å¼ºå¼•ç”¨/è½¯å¼•ç”¨ï¼Œä¸è¿™ä¸ªå¯¹è±¡å…³è”çš„ä»»æ„å¼•ç”¨é˜Ÿåˆ—å°±æ‹¿ä¸åˆ°å¼•ç”¨ï¼Œå¼•ç”¨é˜Ÿåˆ—å°±ç›¸å½“äºä¸€ä¸ªé€šçŸ¥ï¼Œå¤šä¸ªå¼•ç”¨é˜Ÿåˆ—å’Œä¸€ä¸ªå¯¹è±¡å…³è”ï¼Œå¯¹è±¡è¢«å›æ”¶æ—¶ï¼Œå¤šä¸ªé˜Ÿåˆ—éƒ½ä¼šå—åˆ°é€šçŸ¥**ã€‚\n\n##### 3.4 watch()\n\n```java\n@Synchronized fun watch(\n  watchedReference: Any,\n  referenceName: String\n) {\n  if (!isEnabled()) {\n    return\n  }\n  //ç§»é™¤é˜Ÿåˆ—ä¸­å°†è¦è¢« GC çš„å¼•ç”¨\n  removeWeaklyReachableReferences()\n  val key = UUID.randomUUID()\n      .toString()\n  val watchUptimeMillis = clock.uptimeMillis()\n  val reference = // æ„å»ºå½“å‰å¼•ç”¨çš„å¼±å¼•ç”¨å¯¹è±¡ï¼Œå¹¶å…³è”å¼•ç”¨é˜Ÿåˆ— queue\n    KeyedWeakReference(watchedReference, key, referenceName, watchUptimeMillis, queue)\n  if (referenceName != \"\") {\n    CanaryLog.d(\n        \"Watching instance of %s named %s with key %s\", reference.className,\n        referenceName, key\n    )\n  } else {\n    CanaryLog.d(\n        \"Watching instance of %s with key %s\", reference.className, key\n    )\n  }\n\n  watchedReferences[key] = reference\n  checkRetainedExecutor.execute {\n    //å¦‚æœå¼•ç”¨æœªè¢«ç§»é™¤ï¼Œåˆ™å¯èƒ½å­˜åœ¨å†…å­˜æ³„æ¼\n    moveToRetained(key)\n  }\n}\n```\n\nremoveWeaklyReachableReferences()\n\n```java\n  private fun removeWeaklyReachableReferences() {\n    // WeakReferences are enqueued as soon as the object to which they point to becomes weakly\n    // reachable. This is before finalization or garbage collection has actually happened.\n    // å¼±å¼•ç”¨ä¸€æ—¦å˜å¾—å¼±å¯è¾¾ï¼Œå°±ä¼šç«‹å³å…¥é˜Ÿã€‚è¿™å°†åœ¨ finalization æˆ–è€… GC ä¹‹å‰å‘ç”Ÿã€‚\n    var ref: KeyedWeakReference?\n    do {\n      ref = queue.poll() as KeyedWeakReference? // é˜Ÿåˆ— queue ä¸­çš„å¯¹è±¡éƒ½æ˜¯ä¼šè¢« GC çš„\n      if (ref != null) {\n        val removedRef = watchedReferences.remove(ref.key)\n        if (removedRef == null) {\n          retainedReferences.remove(ref.key)\n        }\n        // ç§»é™¤ watchedReferences é˜Ÿåˆ—ä¸­çš„ä¼šè¢« GC çš„ ref å¯¹è±¡ï¼Œå‰©ä¸‹çš„å°±æ˜¯å¯èƒ½æ³„éœ²çš„å¯¹è±¡\n      }\n    } while (ref != null)\n  }\n\n```\n\nmoveToRetained()\n\n```java\n  @Synchronized private fun moveToRetained(key: String) {\n    removeWeaklyReachableReferences() // å†æ¬¡è°ƒç”¨ï¼Œé˜²æ­¢é—æ¼\n    val retainedRef = watchedReferences.remove(key)\n    if (retainedRef != null) {\n      retainedReferences[key] = retainedRef\n      onReferenceRetained()\n    }\n  }\n\n```\n\næœ€åä¼šå›è°ƒåˆ°InternalLeakCanaryçš„onReferenceRetained()æ–¹æ³•\n\n```java\noverride fun onReferenceRetained() {\n  if (this::heapDumpTrigger.isInitialized) {\n    heapDumpTrigger.onReferenceRetained()\n  }\n}\n\n//1.HeapDumpTrigger çš„ onReferenceRetained()\nfun onReferenceRetained() {\n  scheduleRetainedInstanceCheck(\"found new instance retained\")\n}\n\n//2.scheduleRetainedInstanceCheck\nprivate fun scheduleRetainedInstanceCheck(reason: String) {\n  backgroundHandler.post {\n    checkRetainedInstances(reason)\n  }\n}\n  \n//3.checkRetainedInstances\nprivate fun checkRetainedInstances(reason: String) {\n  CanaryLog.d(\"Checking retained instances because %s\", reason)\n    val config = configProvider()\n    // A tick will be rescheduled when this is turned back on.\n    if (!config.dumpHeap) {\n      return\n    }\n\n  var retainedKeys = refWatcher.retainedKeys\n\t\t//å½“å‰æ³„éœ²å®ä¾‹ä¸ªæ•°å°äº 5 ä¸ªï¼Œä¸è¿›è¡Œ heap dump\n    if (checkRetainedCount(retainedKeys, config.retainedVisibleThreshold)) return\n\n      if (!config.dumpHeapWhenDebugging && DebuggerControl.isDebuggerAttached) {\n        showRetainedCountWithDebuggerAttached(retainedKeys.size)\n          scheduleRetainedInstanceCheck(\"debugger was attached\", WAIT_FOR_DEBUG_MILLIS)\n          CanaryLog.d(\n          \"Not checking for leaks while the debugger is attached, will retry in %d ms\",\n          WAIT_FOR_DEBUG_MILLIS\n        )\n          return\n      }\n\t\t// å¯èƒ½å­˜åœ¨è¢«è§‚å¯Ÿçš„å¼•ç”¨å°†è¦å˜å¾—å¼±å¯è¾¾ï¼Œä½†æ˜¯è¿˜æœªå…¥é˜Ÿå¼•ç”¨é˜Ÿåˆ—ã€‚\n    // è¿™æ—¶å€™åº”è¯¥ä¸»åŠ¨è°ƒç”¨ä¸€æ¬¡ GCï¼Œå¯èƒ½å¯ä»¥é¿å…ä¸€æ¬¡ heap dump\n  gcTrigger.runGc()\n\n    retainedKeys = refWatcher.retainedKeys\n\n    if (checkRetainedCount(retainedKeys, config.retainedVisibleThreshold)) return\n\n      HeapDumpMemoryStore.setRetainedKeysForHeapDump(retainedKeys)\n\n      CanaryLog.d(\"Found %d retained references, dumping the heap\", retainedKeys.size)\n      HeapDumpMemoryStore.heapDumpUptimeMillis = SystemClock.uptimeMillis()\n      dismissNotification()\n      val heapDumpFile = heapDumper.dumpHeap()\n      if (heapDumpFile == null) {\n        CanaryLog.d(\"Failed to dump heap, will retry in %d ms\", WAIT_AFTER_DUMP_FAILED_MILLIS)\n          scheduleRetainedInstanceCheck(\"failed to dump heap\", WAIT_AFTER_DUMP_FAILED_MILLIS)\n          showRetainedCountWithHeapDumpFailed(retainedKeys.size)\n          return\n      }\n\n  refWatcher.removeRetainedKeys(retainedKeys)\n\n    HeapAnalyzerService.runAnalysis(application, heapDumpFile)\n}\n```\n\nä¸€äº›ç»†èŠ‚å¯ä»¥çœ‹çœ‹ä»£ç æ³¨é‡Šï¼ŒcheckRetainedCountæ»¡è¶³ä¸ªæ•°çš„è¯ï¼Œå°±è¦å‘èµ·head dumpï¼Œå…·ä½“çš„é€»è¾‘åœ¨AndroidHeapDumper.dumpHeap()ä¸­ï¼š\n\n```java\n  override fun dumpHeap(): File? {\n    val heapDumpFile = leakDirectoryProvider.newHeapDumpFile() ?: return null\n\t\tÂ·Â·Â·\n    return try {\n     //Dumpå‡ºæ–‡ä»¶\n      Debug.dumpHprofData(heapDumpFile.absolutePath)\n      heapDumpFile\n    } catch (e: Exception) {\n      CanaryLog.d(e, \"Could not dump heap\")\n      // Abort heap dump\n      null\n    } finally {\n      cancelToast(toast)\n      notificationManager.cancel(R.id.leak_canary_notification_dumping_heap)\n    }\n  }\n```\n\næœ€åå¯åŠ¨ä¸€ä¸ªå‰å°æœåŠ¡ `HeapAnalyzerService` æ¥åˆ†æ heap dump æ–‡ä»¶ã€‚è€ç‰ˆæœ¬ä¸­æ˜¯ä½¿ç”¨ Square è‡ªå·±çš„ haha åº“æ¥è§£æçš„ï¼Œè¿™ä¸ªåº“å·²ç»åºŸå¼ƒäº†ï¼ŒSquare å®Œå…¨é‡å†™äº†è§£æåº“ï¼Œä¸»è¦é€»è¾‘éƒ½åœ¨ moudle `leakcanary-analyzer` ä¸­ã€‚è¿™éƒ¨åˆ†æˆ‘è¿˜æ²¡æœ‰é˜…è¯»ï¼Œå°±ä¸åœ¨è¿™é‡Œåˆ†æäº†ã€‚å¯¹äºæ–°çš„è§£æå™¨ï¼Œå®˜ç½‘æ˜¯è¿™æ ·ä»‹ç»çš„ï¼š\n\n> Uses 90% less memory and 6 times faster than the prior heap parser.\n\nå‡å°‘äº† 90% çš„å†…å­˜å ç”¨ï¼Œè€Œä¸”æ¯”åŸæ¥å¿«äº† 6 å€ã€‚åé¢æœ‰æ—¶é—´å•ç‹¬æ¥åˆ†æä¸€ä¸‹è¿™ä¸ªè§£æåº“ã€‚\n\nåé¢çš„è¿‡ç¨‹å°±ä¸å†èµ˜è¿°äº†ï¼Œé€šè¿‡è§£æåº“æ‰¾åˆ°æœ€çŸ­ GC Roots å¼•ç”¨è·¯å¾„ï¼Œç„¶åå±•ç¤ºç»™ç”¨æˆ·ã€‚\n\n#### 4.æ‰‹åŠ¨å†™å†…å­˜æ³„æ¼æ£€æµ‹\n\nä¸‹é¢æ˜¯å‚è€ƒZeroçš„Demoå†™çš„å†…å­˜æ³„æ¼æ£€æµ‹çš„ä¸€ä¸ªä¾‹å­ï¼Œæ€è·¯å’ŒLeakCanaryä¸€æ ·\n\n```kotlin\nfun main() {\n\n    class MyKeyedWeakReference(\n            referent: Any,\n            val key: String,\n            val name: String,\n            referenceQueue: ReferenceQueue<Any>\n    ) : WeakReference<Any>(\n            referent, referenceQueue\n    ) {\n        val className: String = referent.javaClass.name\n        override fun toString(): String {\n            return \"{key=$key,className=$className}\"\n        }\n    }\n    //éœ€è¦è§‚å¯Ÿçš„å¯¹è±¡\n    val watchedReferences = mutableMapOf<String,MyKeyedWeakReference>()\n    //å¦‚æœæœ€åretainedReferencesè¿˜å­˜åœ¨å¼•ç”¨ï¼Œè¯´æ˜æ³„æ¼äº†\n    val retainedReferences = mutableMapOf<String,MyKeyedWeakReference>()\n    //å½“ä¸ä¹‹å…³è”çš„å¼±å¼•ç”¨ä¸­çš„å®ä¾‹è¢«å›æ”¶ï¼Œåˆ™ä¼šåŠ å…¥åˆ°queue\n    val gcQueue = ReferenceQueue<Any>()\n\n    fun sleep(mills: Long){\n        try {\n            Thread.sleep(mills)\n        }catch (e: Exception){\n            e.printStackTrace()\n        }\n    }\n\n    fun gc(){\n        println(\"æ‰§è¡Œgc...\")\n        Runtime.getRuntime().gc()\n        sleep(100)\n        System.runFinalization()\n    }\n\n    fun removeWeaklyReachableReferences(){\n        println(\"removeWeaklyReachableReferences\")\n        var ref: MyKeyedWeakReference?\n        do {\n            ref = gcQueue.poll() as MyKeyedWeakReference? //é˜Ÿåˆ—queueä¸­çš„å¯¹è±¡éƒ½æ˜¯ä¼šè¢«GCçš„\n            println(\"ref=$ref,å¦‚æœrefä¸ºnull,è¯´æ˜å¯¹è±¡è¿˜æœ‰å¼ºå¼•ç”¨\")\n            if (ref != null){ //è¯´æ˜è¢«é‡Šæ”¾äº†\n                println(\"ref=$ref, å¯¹è±¡è¢«é‡Šæ”¾äº†,key=${ref.key}\")\n                val removedRef = watchedReferences.remove(ref.key)\n                println(\"removedRef=$removedRef, å¦‚æœremovedRefä¸ºnull,è¯´æ˜å·²ç»ä¸åœ¨watchedReferencesäº†,key=${ref.key}\")\n                if (removedRef == null){\n                    //ä¸åœ¨watchedReferencesåˆ™è¯´æ˜åœ¨retainedReferences\n                    retainedReferences.remove(ref.key)\n                }\n            }\n        }while (ref != null)\n    }\n\n    @Synchronized\n    fun moveToRetained(key: String){\n        println(\"5.moveToRetained,key=$key\")\n        removeWeaklyReachableReferences()\n        val retainedRef = watchedReferences.remove(key)\n        println(\"retainedRef =$retainedRef å¦‚æœè¿˜æœ‰å€¼è¯´æ˜æ²¡æœ‰è¢«é‡Šæ”¾\")\n        if (retainedRef != null){ //æ·»åŠ åˆ°retainedReferences\n            retainedReferences[key] = retainedRef\n        }\n\n    }\n\n    fun watch(\n            obj: Any,\n            referenceName: String = \"\"){\n        println(\"2.watch...\")\n        removeWeaklyReachableReferences()\n        val key = UUID.randomUUID().toString()\n        println(\"3.key=$key\")\n        val reference = MyKeyedWeakReference(obj,key,referenceName,gcQueue)\n        println(\"4.reference=$reference\")\n        //åŠ å…¥è§‚å¯Ÿåˆ—è¡¨\n        watchedReferences[key] = reference\n        //è¿‡æ®µæ—¶é—´æŸ¥çœ‹æ˜¯å¦é‡Šæ”¾\n        thread(start = true){\n            sleep(5000)\n            moveToRetained(key)\n        }\n\n    }\n\n    var obj : Any? = Object()\n    println(\"1.åˆ›å»ºä¸€ä¸ªå¯¹è±¡obj=$obj\")\n    watch(obj!!,\"\")\n    sleep(2000)\n    obj = null\n    if (obj == null){\n        println(\"obj=$obj é‡Šæ”¾äº†\")\n    }\n    gc()\n    sleep(5000)\n    println(\"watchedReferences=$watchedReferences\")\n    println(\"retainedReferences=$retainedReferences\")\n    println(\"æ‰§è¡Œå®Œæ¯•\")\n```\n\n#### 5. ContentProviderçš„ä¼˜åŒ–\n\n##### 5.1 Contentçš„åˆå§‹åŒ–é¡ºåº\n\nâ€‹\té€šè¿‡ContentProvideræ¥è¿›è¡Œåˆå§‹åŒ–ç¡®å®èƒ½ç»™ä½¿ç”¨è€…å¸¦æ¥ä¾¿åˆ©ï¼Œä½†æ˜¯ä¼šå½±å“å¯åŠ¨é€Ÿåº¦ï¼Œå¦‚æœæœ‰å¤šä¸ªContentProviderï¼Œå¦‚ä½•æ§åˆ¶è¿™äº›ContentProvideråˆå§‹åŒ–çš„é¡ºåºå‘¢ï¼Œå¯ä»¥å‚è€ƒä¸‹é¢è¿™ç¯‡æ–‡ç« [https://sivanliu.github.io/2017/12/16/provider%E5%88%9D%E5%A7%8B%E5%8C%96/](https://sivanliu.github.io/2017/12/16/provideråˆå§‹åŒ–/)ï¼Œå¦‚æœä¸€äº›ç¬¬ä¸‰æ–¹å€¼åªæä¾›ContentProviderçš„åˆå§‹åŒ–æ–¹å¼ï¼Œæˆ‘ä»¬åˆä¸æƒ³å½±å“æˆ‘ä»¬APPçš„å¯åŠ¨æ—¶é—´ï¼Œè¯¥å¦‚ä½•å¤„ç†å‘¢ï¼Ÿ\n\n##### 5.2 \n\nâ€‹\tå¦‚æœä¸€äº›ç¬¬ä¸‰æ–¹åº“åªæä¾›ContentProviderçš„åˆå§‹åŒ–æ–¹å¼ï¼Œæˆ‘ä»¬åˆä¸æƒ³å½±å“æˆ‘ä»¬APPçš„å¯åŠ¨æ—¶é—´ï¼Œè¯¥å¦‚ä½•å¤„ç†å‘¢ï¼Ÿ**æˆ‘ä»¬å¯ä»¥ä½¿ç”¨AOPæ–¹å¼è¿›è¡Œæ’æ¡©ï¼Œé€šè¿‡Gradle+Transform+ASMè¿›è¡Œä¿®æ”¹ContentProviderçš„onCreateæ–¹æ³•ï¼Œæå‰è¿”å›ï¼Œç„¶åæ‰‹åŠ¨å»è°ƒç”¨åˆå§‹åŒ–ä»£ç **ï¼Œå¦‚æœè¿™äº›åˆå§‹åŒ–ä»£ç æ˜¯ç§æœ‰çš„æˆ–è€…åªé™åˆ¶åŒ…å†…ä½¿ç”¨çš„ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ASMå»ä¿®æ”¹è®¿é—®æƒé™ï¼Œç„¶ååœ¨æˆ‘ä»¬æƒ³åˆå§‹åŒ–çš„åœ°æ–¹å†è¿›è¡Œåˆå§‹åŒ–ï¼Œè¿™å¯èƒ½æ¶‰åŠåˆ°ä¸€ä¸ªå…ˆåçš„é—®é¢˜ï¼Œéœ€è¦å…ˆä¿®æ”¹å®Œç„¶åå†åœ¨æŸä¸ªåœ°æ–¹åˆå§‹åŒ–ï¼Œè¿™é‡Œåªæ˜¯æä¾›ä¸€ä¸ªæ€è·¯ã€‚å¦‚æœä¸€ä¸ªåº“åˆå§‹åŒ–è€—æ—¶å¾ˆé•¿ï¼Œåˆåœ¨ContentProviderä¸­è¿›è¡Œåˆå§‹åŒ–ï¼ŒContentProviderä¸­åˆå§‹åŒ–çš„ä»£ç åˆè‡­åˆé•¿ï¼Œåˆæ²¡æœ‰æä¾›å…¶ä»–åˆå§‹åŒ–æ–¹æ³•ï¼Œè¿™æ ·çš„åƒåœ¾åº“ä½ è¦å®ƒå¹²å˜›ï¼\n\n#### 6.æ€»ç»“\n\n1. åˆ©ç”¨ContentProviderè‡ªåŠ¨åˆå§‹åŒ–ï¼Œæ— éœ€ç”¨æˆ·æ‰‹åŠ¨åˆå§‹åŒ–\n\n2. GCå›æ”¶ï¼Œå¼•ç”¨é˜Ÿåˆ—\n\n3. 1.5.4ä¹‹åæ”¯æŒfragmentï¼Œæ”¯æŒandroidx\n\n4. å½“æ³„éœ²å¼•ç”¨åˆ°è¾¾ 5 ä¸ªæ—¶æ‰ä¼šå‘èµ· heap dump\n\n5. å…¨æ–°çš„ heap parserï¼Œå‡å°‘ 90% å†…å­˜å ç”¨ï¼Œæå‡ 6 å€é€Ÿåº¦\n\n6. ContentProviderçš„ä¼˜åŠ£ï¼Œä»¥åŠä¼˜åŒ–æ–¹æ¡ˆ\n\n    \n\nå‚è€ƒæ–‡ç« \n\n[https://sivanliu.github.io/2017/12/16/provider%E5%88%9D%E5%A7%8B%E5%8C%96/](https://sivanliu.github.io/2017/12/16/provideråˆå§‹åŒ–/)\n\nhttps://juejin.im/post/5d1225546fb9a07ecd3d6b71\n\n\n\n\n\n", "user_name": "ä¼¤å¿ƒçš„çŒªå¤§è‚ ", "description": "çƒ­çˆ±ç¼–ç ï¼Œå°çƒï¼Œçœ‹ä¹¦ï¼Œæ—…æ¸¸", "got_view_count": 1720, "category_name": "Android", "ctime": 1461266353}
{"tag_name": "Go", "concern_user_count": 75376, "user_id": "2471357868680376", "title": "Goçš„ä¸¤çº§çº¿ç¨‹æ¨¡å‹", "mark_content": "***\n# çº¿ç¨‹å®ç°æ¨¡å‹\n- ç”¨æˆ·çº§çº¿ç¨‹æ¨¡å‹\n- å†…æ ¸çº§çº¿ç¨‹æ¨¡å‹\n- ä¸¤çº§çº¿ç¨‹æ¨¡å‹\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2c346d7cdccc4fbaaeae3c9aa818abca~tplv-k3u1fbpfcp-zoom-1.image)\n\n***\n\n\n# Goçº¿ç¨‹æ¨¡å‹æ ¸å¿ƒå…ƒç´  MPG\nåœ¨æ“ä½œç³»ç»Ÿæä¾›çš„å†…æ ¸çº¿ç¨‹ä¹‹ä¸Šï¼ŒGoæ­å»ºäº†ä¸€ä¸ªç‰¹æœ‰çš„ä¸¤çº§çº¿ç¨‹æ¨¡å‹ã€‚\n\nä¸€ä¸ªGçš„æ‰§è¡Œéœ€è¦På’ŒMçš„æ”¯æŒã€‚På’ŒMå…³è”ä¹‹åï¼Œå°±å½¢æˆäº†ä¸€ä¸ªæœ‰æ•ˆçš„Gè¿è¡Œç¯å¢ƒï¼ˆå†…æ ¸çº¿ç¨‹+ä¸Šä¸‹æ–‡ç¯å¢ƒï¼‰ã€‚  \næ¯ä¸ªPéƒ½ä¼šåŒ…å«ä¸€ä¸ªå¯è¿è¡Œçš„Gçš„é˜Ÿåˆ—ï¼Œè¯¥é˜Ÿåˆ—ä¸­çš„Gä¼šè¢«ä¾æ¬¡ä¼ é€’ç»™æœ¬åœ°På…³è”çš„å½“å‰M,å¹¶è·å¾—è¿è¡Œæ—¶æœºã€‚  \n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9c4de4056a1745f7988e402f6774152f~tplv-k3u1fbpfcp-zoom-1.image)\n\n- M  \n>1. machineçš„ç¼©å†™ï¼Œä¸€ä¸ªMä»£è¡¨ä¸€ä¸ªç”¨æˆ·ç©ºé—´çš„å†…æ ¸çº¿ç¨‹ï¼Œä¸å†…æ ¸çº¿ç¨‹ï¼ˆKSEï¼‰æ€»æ˜¯ä¸€ä¸€å¯¹åº”,åœ¨Mçš„å£°æ˜å‘¨æœŸå†…ï¼Œä¼šä¸”ä»…ä¼šä¸ä¸€ä¸ªKSEäº§ç”Ÿå…³è”ã€‚ \n>2. Måˆšåˆ›å»ºä¹‹åˆï¼Œå°±ä¼šè¢«åŠ å…¥åˆ°**å…¨å±€Måˆ—è¡¨**ã€‚  \n>3. æœ‰äº›æ—¶å€™ï¼ŒMä¼šè¢«åœæ­¢ï¼ˆæ¯”å¦‚æ‰¾ä¸åˆ°å¯è¿è¡ŒGæ—¶ç­‰ï¼‰ï¼ŒMä¼šè¢«åŠ å…¥åˆ°**è°ƒåº¦å™¨çš„ç©ºé—²Måˆ—è¡¨**ï¼Œåœ¨éœ€è¦ä¸€ä¸ªæœªè¢«ä½¿ç”¨çš„Mæ—¶ï¼Œè°ƒåº¦å™¨ä¼šå…ˆå°è¯•ä»è¯¥åˆ—è¡¨ä¸­è·å–ã€‚\n>4. å•ä¸ªGoç¨‹åºæ‰€ä½¿ç”¨çš„Mçš„æœ€å¤§å€¼å¯ä»¥è®¾ç½®ï¼Œåˆå§‹å€¼æ˜¯10000\n>5. Mçš„å¯åŠ¨å’Œåœæ­¢ï¼š  \n å½“Mçš„å› ç³»ç»Ÿè°ƒç”¨è€Œé˜»å¡ï¼ˆæ›´ç¡®åˆ‡çš„è¯´ï¼Œæ˜¯ä»–è¿è¡Œçš„Gè¿›å…¥äº†ç³»ç»Ÿè°ƒç”¨ï¼‰,è¿è¡Œæ—¶ç³»ç»Ÿä¼šæŠŠMå’Œå…³è”çš„Påˆ†ç¦»å¼€æ¥ï¼Œå¦‚æœè¿™ä¸ªPçš„å¯è¿è¡Œé˜Ÿåˆ—ä¸­è¿˜æœ‰æœªè¢«è¿è¡Œçš„Gï¼Œé‚£ä¹ˆè¿è¡Œæ—¶ç³»ç»Ÿä¼šå»**è°ƒåº¦å™¨çš„ç©ºé—²Måˆ—è¡¨**ä¸­æ‰¾ä¸€ä¸ªç©ºé—²çš„M,å¦‚æœæ‰¾ä¸åˆ°å°±æ–°å»ºï¼Œç„¶åè¿™ä¸ªpå…³è”èµ·æ¥ï¼Œä½¿å¾—å‰©ä¸‹çš„è¿™äº›Gå¾—ä»¥è¿è¡Œã€‚\n \n ![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/39cf0f1b0ab44bfe95c1e60bc3f845b0~tplv-k3u1fbpfcp-zoom-1.image)\n- p  \n>1. processorçš„ç¼©å†™ï¼Œä¸€ä¸ªPä»£è¡¨æ‰§è¡Œä¸€ä¸ªGoä»£ç ç‰‡æ®µæ‰€å¿…éœ€çš„èµ„æºï¼ˆä¸Šä¸‹æ–‡ç¯å¢ƒï¼‰\n>2. è°ƒåº¦å™¨ä¼šé€‚æ—¶çš„è®©Pä¸ä¸åŒçš„Må»ºç«‹æˆ–æ–­å¼€å…³è”ï¼Œä½¿å¾—Pä¸­çš„å¯è¿è¡ŒGèƒ½å¤ŸåŠæ—¶è·å¾—è¿è¡Œæ—¶æœºã€‚\n>3. Pçš„æ•°é‡é»˜è®¤ç­‰äºå½“å‰cpuæ ¸æ•°,å¯ä»¥åˆ©ç”¨å‡½æ•°runtime.GOMAXPROCSæ¥æ”¹å˜Pçš„æ•°é‡ã€‚Pçš„æ•°é‡å³ä¸ºå¯è¿è¡ŒGé˜Ÿåˆ—çš„æ•°é‡ã€‚\n>4. å½“ä¸€ä¸ªPä¸å†ä¸ä»»ä½•Må…³è”æ—¶ï¼Œä¸”å®ƒçš„å¯è¿è¡ŒGé˜Ÿåˆ—ä¸ºç©ºï¼Œä¼šè¢«æ”¾å…¥**è°ƒåº¦å™¨çš„ç©ºé—²Påˆ—è¡¨**ï¼Œåœ¨éœ€è¦ä¸€ä¸ªç©ºé—²çš„På…³è”Mæ—¶ï¼Œä¼šä»æ­¤åˆ—è¡¨å–å‡ºã€‚\n>5. Pçš„åŒ…å«ä¸€ä¸ªè‡ªç”±Gåˆ—è¡¨ï¼Œå­˜æ”¾ä¸€äº›å·²ç»è¿è¡Œå®Œæˆçš„Gã€‚å½“å¢é•¿åˆ°ä¸€å®šç¨‹åº¦ï¼Œè¿è¡Œæ—¶ç³»ç»Ÿä¼šæŠŠå…¶ä¸­çš„éƒ¨åˆ†Gè½¬ç§»åˆ°**è°ƒåº¦å™¨çš„è‡ªç”±Gåˆ—è¡¨**ä¸­ã€‚\n>5. Pçš„çŠ¶æ€ï¼š\n    - Pidelï¼šåˆå§‹åŒ–å®Œæˆï¼Œå½“å‰pæœªä¸må…³è”ï¼Œæ”¾å…¥**è°ƒåº¦å™¨çš„ç©ºé—²Påˆ—è¡¨**é‡Œã€‚  \n    - Prunningï¼šå½“å‰på·²ç»å’ŒæŸä¸ªmå…³è”ï¼Œmåœ¨æ‰§è¡ŒæŸä¸ªgã€‚  \n    - Psyscall:å½“å‰pä¸­çš„è¢«è¿è¡Œçš„gæ­£åœ¨è¢«ç³»ç»Ÿè°ƒç”¨  \n    - Pgcstop:è°ƒåº¦å™¨åœæ­¢è°ƒåº¦ã€‚runtimeæ­£åœ¨è¿›è¡ŒGC(runtimeä¼šåœ¨gcæ—¶è¯•å›¾æŠŠå…¨å±€Påˆ—è¡¨ä¸­çš„Péƒ½å¤„äºæ­¤ç§çŠ¶æ€)ï¼›æœ‰ä¸²è¡Œè¿è¡Œæ—¶ä»»åŠ¡æ­£åœ¨ç­‰æ‰§è¡Œ-->åœæ­¢å½“å‰M-->é‡Šæ”¾æœ¬åœ°P-->pä¸ºpgcstop  \n    - Pdeadï¼šå½“å‰Pä¸å†è¢«ä½¿ç”¨ï¼ˆåœ¨è°ƒç”¨runtime.GOMAXPROCSå‡å°‘Pæ•°é‡æ—¶ï¼Œå¤šä½™çš„På°±å¤„äºè¿™ç§çŠ¶æ€ï¼‰  \n> - ä»»ä½•éPdeadçŠ¶æ€çš„péƒ½ä¼šåœ¨è¿è¡Œæ—¶ç³»ç»Ÿæ¬²åœæ­¢è°ƒåº¦å®¤è¢«ç½®äºPgcstopï¼Œå…¶åœ¨å¯ç”¨è°ƒåº¦çš„æ—¶å€™å¹¶ä¸ä¼šæ¢å¤åˆ°åŸæœ‰çŠ¶æ€ï¼Œè€Œæ˜¯å¤„åœ¨Pidleï¼ˆåŒä¸€èµ·è·‘çº¿ä¸Šï¼‰  \n> - ä»»ä½•éPgcstopçš„Péƒ½å¯èƒ½å› ä¸ºå…¨å±€Påˆ—è¡¨çš„ç¼©å°è€Œè¢«è®¤ä¸ºæ˜¯å¤šä½™çš„ï¼Œè¢«ç½®äºPdeadçŠ¶æ€ï¼Œå…¶å¯è¿è¡ŒGé˜Ÿåˆ—éƒ½ä¼šè¢«è½¬ç§»åˆ°**è°ƒåº¦å™¨çš„å¯è¿è¡ŒGé˜Ÿåˆ—**ï¼Œå®ƒçš„è‡ªç”±Gåˆ—è¡¨ä¸­çš„Gä¹Ÿä¼šè¢«è½¬ç§»åˆ°**è°ƒåº¦å™¨çš„è‡ªç”±Gé˜Ÿåˆ—**ä¸­ã€‚\n\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/87119807c78f4265b6e7d1c050738bff~tplv-k3u1fbpfcp-zoom-1.image)\n    \n- G  \n>1. goroutineçš„ç¼©å†™ï¼Œä¸€ä¸ªGä»£è¡¨ä¸€ä¸ªgoä»£ç ç‰‡æ®µï¼ŒGæ˜¯å¯¹goä»£ç çš„ä¸€ç§å°è£….Goçš„ç¼–è¯‘å™¨ä¼šæŠŠgoè¯­å¥å˜æˆå¯¹å†…éƒ¨å‡½æ•°newprocçš„è°ƒç”¨ï¼Œå¹¶æŠŠgoå‡½æ•°åŠå…¶å‚æ•°éƒ½ä½œä¸ºå‚æ•°ä¼ é€’ç»™è¿™ä¸ªå‡½æ•°ã€‚\n>2. æ–°å»ºçš„Gä¼šè¢«é¦–å…ˆåŠ å…¥**å…¨å±€Gåˆ—è¡¨**ï¼Œåˆå§‹åŒ–ä¹‹åï¼Œä¼šè¢«åŠ å…¥åˆ°æœ¬åœ°Pçš„å¯è¿è¡Œé˜Ÿåˆ—ï¼Œè¿˜ä¼šè¢«å­˜å‚¨åˆ°æœ¬åœ°Pçš„runnextå­—æ®µï¼Œè¯¥å­—æ®µç”¨æˆ·å­˜æ”¾æ–°é²œå‡ºç‚‰çš„Gï¼Œä»¥ä¾¿æ›´æ—©çš„è¿è¡Œå®ƒã€‚å¦‚æœrunnextå·²ç»æœ‰ä¸€ä¸ªGï¼Œé‚£ä¹ˆè¿™ä¸ªå·²æœ‰Gä¼šè¢«è¸¢åˆ°**è¯¥Pçš„å¯è¿è¡ŒGé˜Ÿåˆ—**çš„æœ«å°¾ã€‚å¦‚æœè¯¥é˜Ÿåˆ—å·²æ»¡ï¼Œé‚£ä¹ˆè¿™ä¸ªGå°±åªèƒ½è¿½åŠ åˆ°**è°ƒåº¦å™¨çš„å¯è¿è¡ŒGé˜Ÿåˆ—**ä¸­ã€‚\n>2. å½“goè¯­å¥æ¬²å¯ç”¨ä¸€ä¸ªGçš„æ—¶å€™ï¼Œè¿è¡Œæ—¶ç³»ç»Ÿä¼šå…ˆè¯•å›¾ä»ç›¸åº”çš„**Pçš„è‡ªç”±Gåˆ—è¡¨**ä¸­è·å–ä¸€ä¸ªç°æˆçš„Gï¼Œæ¥å°è£…è¿™ä¸ªgoå‡½æ•°ã€‚ä»…å½“è·å–ä¸åˆ°Gæ‰æœ‰å¯èƒ½åˆ›å»ºä¸€ä¸ªæ–°Gã€‚\n>2. è¿è¡Œæ—¶ç³»ç»Ÿä¼šåœ¨å‘ç°æœ¬åœ°Pè‡ªç”±Gå¤ªå°‘ï¼Œä¼šå°è¯•ä»è°ƒåº¦å™¨çš„è‡ªç”±Gåˆ—è¡¨ä¸­è½¬ç§»ä¸€äº›è¿‡æ¥ã€‚å¦‚æœå‘ç°æœ¬åœ°Pçš„è‡ªç”±Gé˜Ÿåˆ—æ»¡äº†ï¼Œä¼šè½¬ç§»ä¸€äº›åˆ°**è°ƒåº¦å™¨çš„è‡ªç”±Gåˆ—è¡¨**ã€‚\n>2. æ‰€æœ‰çš„**è‡ªç”±Gåˆ—è¡¨** éƒ½æ˜¯å…ˆè¿›åå‡ºçš„ã€‚\n>2. ä¸€ä¸ªGåœ¨è¢«å¯ç”¨ä¹‹åï¼Œä¼šå…ˆè¢«è¿½åŠ åˆ°æŸä¸ªPçš„å¯è¿è¡ŒGé˜Ÿåˆ—ä¸­ï¼Œä»¥ç­‰å¾…è¿è¡Œæ—¶æœºã€‚\n>2. Gçš„çŠ¶æ€ï¼š\n    - Gidleï¼ˆåˆšè¢«åˆ†é…ï¼Œè¿˜æœªåˆå§‹åŒ–ï¼‰\n    - Grunnable(åˆå§‹åŒ–ä¹‹åï¼Œä¸€èˆ¬åœ¨åœ¨pæœ¬åœ°çš„å¯è¿è¡Œé˜Ÿåˆ—ä¸­ç­‰å¾…è¿è¡Œï¼›å¦‚æœæ˜¯é€€å‡ºç³»ç»Ÿè°ƒç”¨ä¸”èƒ½è¿è¡Œçš„ï¼Œæ”¾å…¥**è°ƒåº¦å™¨çš„å¯è¿è¡ŒGé˜Ÿåˆ—**ï¼Œä¸èƒ½ç›´æ¥è¿è¡Œçš„Gï¼Œåˆ™æ”¾å…¥**è°ƒåº¦å™¨çš„è‡ªç”±Gåˆ—è¡¨**ç­‰å¾…è¢«è¿è¡Œ)\n    - Grunning(æ­£åœ¨è¿è¡Œ)\n    - Gsyscall(æ­£åœ¨æ‰§è¡Œç³»ç»Ÿè°ƒç”¨ï¼Œè½¬å‡ºç³»ç»Ÿè°ƒç”¨çŠ¶æ€ä¸”èƒ½è¿è¡Œçš„ï¼Œæ”¾å…¥**è°ƒåº¦å™¨çš„å¯è¿è¡ŒGé˜Ÿåˆ—**ï¼›ä¸èƒ½ç›´æ¥è¿è¡Œçš„Gï¼Œåˆ™æ”¾å…¥**è°ƒåº¦å™¨çš„è‡ªç”±Gåˆ—è¡¨**ç­‰å¾…è¢«è¿è¡Œ)\n    - Gwaitingï¼ˆæ­£åœ¨é˜»å¡,è¢« channelã€IOæ“ä½œã€å®šæ—¶å™¨(time.Timer)ã€time.Sleepç­‰é˜»å¡ï¼‰,åœ¨äº‹ä»¶åˆ°æ¥ä¹‹åï¼ŒGè¢«å”¤é†’ï¼Œè¿›å…¥       - Grunnableï¼Œç­‰å¾…è¢«è°ƒç”¨ï¼Œæœ‰äº›è¢«æ”¾å…¥**æœ¬åœ°pçš„å¯è¿è¡ŒGé˜Ÿåˆ—**ï¼Œæœ‰äº›è¢«æ”¾å…¥**è°ƒåº¦å™¨çš„æœ¬åœ°å¯è¿è¡ŒGé˜Ÿåˆ—**ï¼Œè¿˜æœ‰äº›è¢«ç›´æ¥è¿è¡Œï¼ˆå¦‚åˆšè¿›è¡Œç½‘ç»œI/Oï¼‰ã€‚\n    - Gdeadï¼ˆæ­£åœ¨é—²ç½®ï¼Œè¢«æ”¾å…¥**æœ¬åœ°pçš„è‡ªç”±Gé˜Ÿåˆ—**ï¼‰\n    - Gcopystack(è¡¨ç¤ºGçš„æ ˆæ­£è¢«ç§»åŠ¨ï¼Œä¸ºå•¥ç§»åŠ¨ï¼Ÿå› ä¸ºæ ˆçš„æ‰©å±•æˆ–æ”¶ç¼©)\n    - Gscan(è¯¥çŠ¶æ€ä¸èƒ½å•ç‹¬å­˜åœ¨ï¼Œå’Œå…¶ä»–çŠ¶æ€ç»„åˆåœ¨ä¸€èµ·å½¢æˆä¸€ä¸ªæ–°çŠ¶æ€ï¼Œåœ¨GCæ‰«ææ—¶å‘ç”Ÿ)\n\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1b2bddff42584b6991591f7fe4d97718~tplv-k3u1fbpfcp-zoom-1.image)\n\n\n\n\n\n# å®¹å™¨å…ƒç´   \n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ad50beb8e85449a8bc8451b1c9ddfebe~tplv-k3u1fbpfcp-zoom-1.image)\n\næ²¡ç‰¹åˆ«æ ‡æ³¨çš„åˆ—è¡¨éƒ½æ˜¯å•å‘é“¾è¡¨  \n\n| ä½œç”¨åŸŸ |Måˆ—è¡¨ | Påˆ—è¡¨ |Gé˜Ÿåˆ—/åˆ—è¡¨|\n| :----: |:----: | :----: | :----: |\n| è¿è¡Œæ—¶ç³»ç»Ÿ | å…¨å±€Måˆ—è¡¨ | å…¨å±€Påˆ—è¡¨ï¼ˆä¸€ä¸ªæ•°ç»„ï¼‰ | å…¨å±€Gåˆ—è¡¨ï¼ˆä¸€ä¸ªåˆ‡ç‰‡ï¼‰ |\n| è°ƒåº¦å™¨ | ç©ºé—²Måˆ—è¡¨ | ç©ºé—²Påˆ—è¡¨ | å¯è¿è¡ŒGé˜Ÿåˆ—ã€è‡ªç”±Gåˆ—è¡¨ï¼ˆ2ä¸ªï¼‰ |\n| æœ¬åœ°p ||   |å¯è¿è¡ŒGé˜Ÿåˆ—ã€ è‡ªç”±Gåˆ—è¡¨(1ä¸ª)  |\n \n\n# è°ƒåº¦å™¨çš„ä¸€è½®è°ƒåº¦\nä¸¤çº§çº¿ç¨‹æ¨¡å‹ä¸­çš„ä¸€éƒ¨åˆ†è°ƒåº¦ä»»åŠ¡ä¼šç”±æ“ä½œç³»ç»Ÿå†…æ ¸ä¹‹å¤–çš„ç¨‹åºæ‰¿æ‹…ï¼Œåœ¨Goä¸­ï¼Œè°ƒåº¦å™¨å°±è´Ÿè´£è¿™ä¸€éƒ¨åˆ†çš„è°ƒåº¦ä»»åŠ¡ï¼Œè°ƒåº¦çš„å¯¹è±¡å°±æ˜¯MPGã€‚  \nä¸€è½®è°ƒåº¦æ˜¯Goè°ƒåº¦å™¨æœ€æ ¸å¿ƒçš„æµç¨‹ï¼Œåœ¨å¾ˆå¤šæƒ…å†µä¸‹éƒ½ä¼šè¢«è§¦å‘ï¼Œåœ¨ç”¨æˆ·ç¨‹åºå¯åŠ¨æ—¶çš„ä¸€ç³»åˆ—åˆå§‹åŒ–å·¥ä½œä¹‹åï¼Œä¸€è½®è°ƒåº¦ä¼šé¦–æ¬¡å¯åŠ¨å¹¶ä½¿å°è£…mainçš„é‚£ä¸ªGè¢«è°ƒåº¦è¿è¡Œã€‚æŸä¸ªGçš„è¿è¡Œçš„é˜»å¡ã€ç»“æŸã€é€€å‡ºç³»ç»Ÿè°ƒç”¨ï¼Œéƒ½ä¼šè¿›è¡Œä¸€è½®è°ƒåº¦ã€‚\n\n> 1. è°ƒåº¦å™¨ä¼šåˆ¤æ–­å½“å‰Mæ˜¯å¦å·²è¢«é”å®šï¼Œå¦‚æœæ˜¯ï¼Œå°±ä¼šç«‹å³åœæ­¢è°ƒåº¦å¹¶åœæ­¢å½“å‰M,ä¹Ÿä¸ä¼šä¸ºå½“å‰Må¯»æ‰¾å¯è¿è¡Œçš„Gã€‚å½“ä¸å®ƒé”å®šçš„Gå¤„äºå¯è¿è¡ŒçŠ¶æ€ï¼ŒMå°±ä¼šè¢«å”¤é†’å¹¶ç»§ç»­æ‰§è¡ŒGã€‚\n> 2. å¦‚æœæœªä¸ä»»åŠ¡Gé”å®šï¼Œæ£€æŸ¥æ˜¯å¦æœ‰è¿è¡Œæ—¶ä¸²è¡Œä»»åŠ¡ï¼ˆéœ€è¦åœæ­¢Goè°ƒåº¦å™¨ï¼‰æ­£åœ¨ç­‰å¾…æ‰§è¡Œï¼Œåœæ­¢å½“å‰M-ç­‰å¾…è¿è¡Œæ—¶ä¸²è¡Œä»»åŠ¡æ‰§è¡Œå®Œæˆã€‚ä¸€ä½†ä¸²è¡Œä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œè¯¥Mä¼šè¢«å”¤é†’ï¼Œå†æ¬¡è¿›è¡Œä¸€è½®è°ƒåº¦ã€‚\n> 3. æ— é”å®šã€æ— è¿è¡Œæ—¶ä¸²è¡Œä»»åŠ¡ï¼Œå¼€å§‹å¯»æ‰¾G,ä¸€æ—¦æ‰¾åˆ°Gï¼Œå°±åˆ¤æ–­è¯¥Gæ˜¯å¦æœ‰ä¸å…¶ä»–Mé”å®šï¼Œæœ‰çš„è¯ï¼Œä¼šç„¶ä¸å…¶é”å®šçš„Mè¿è¡ŒGï¼›æ²¡æœ‰çš„è¯ï¼Œç›´æ¥è¿è¡ŒGã€‚\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2764d2eb8b214a568a09ff54546af5f8~tplv-k3u1fbpfcp-zoom-1.image)\n\n## æŸ¥æ‰¾G\n### ç¬¬ä¸€é˜¶æ®µ\n#### å…¨åŠ›æŸ¥æ‰¾å¯è¿è¡Œçš„Gï¼šruntime.findrunnableå‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªå¤„äºGrunnableçŠ¶æ€çš„Gã€‚æµç¨‹åˆ†ä¸º2ä¸ªé˜¶æ®µï¼Œ10ä¸ªæ­¥éª¤\n>+ step1ï¼š\nè·å–æ‰§è¡Œç»ˆç»“å™¨çš„Gï¼Œæ”¾å…¥æœ¬åœ°Pçš„å¯è¿è¡ŒGé˜Ÿåˆ—\nç»ˆç»“å™¨æ˜¯ä¸€ä¸ªå…¶å…³è”çš„å¯¹è±¡å‘—åƒåœ¾å›æ”¶å™¨æ”¶é›†ä¹‹å‰ä¼šæ‰§è¡Œçš„ä¸€ä¸ªç»ˆç»“å‡½æ•°ï¼Œè¯¥å‡½æ•°çš„æ‰§è¡Œä¼šæœ‰ä¸ªä¸“é—¨çš„Gè´Ÿè´£ã€‚\nè°ƒåº¦å™¨ä¼šåˆ¤æ–­è¯¥Gå·²ç»å®Œæˆä»»åŠ¡ä¹‹åè·å–å®ƒï¼ŒæŠŠå®ƒç½®ä¸ºGrunableçŠ¶æ€å¹¶æ”¾å…¥æœ¬åœ°Pçš„å¯è¿è¡ŒGé˜Ÿåˆ—ã€‚  \n>+ step2ï¼š\nä»æœ¬åœ°Pçš„å¯æ‰§è¡ŒGé˜Ÿåˆ—è·å–Gï¼Œè¿”å›è¯¥G\n>+ step3ï¼š\nä»è°ƒåº¦å™¨çš„å¯æ‰§è¡ŒGé˜Ÿåˆ—è·å–G,è¿”å›è¯¥G\n>+ step4ï¼š\nä»ç½‘ç»œI/Oè½®è¯¢å™¨ï¼ˆnetpollerï¼‰å¤„è·å–Gï¼Œè¿”å›è¯¥G\nè°ƒåº¦å™¨ä»netpolleré‚£é‡Œè·å–ä¸€ä¸ªGåˆ—è¡¨ï¼ŒæŠŠè¡¨å¤´Gè¿”å›ï¼ŒæŠŠå…¶ä½™çš„Géƒ½æ”¾å…¥è°ƒåº¦å™¨çš„å¯è¿è¡ŒGé˜Ÿåˆ—é‡Œã€‚\nå½“ä¸€ä¸ªGè¯•å›¾åœ¨ä¸€ä¸ªç½‘ç»œè¿æ¥ä¸Šè¿›è¡Œè¯»å†™æ“ä½œæ—¶ï¼Œåº•å±‚ç¨‹åºä¼šä¸ºæ­¤åšå‡†å¤‡ï¼Œå¹¶æŠŠè¯¥Gè½¬ä¸ºGwaitingçŠ¶æ€ã€‚\nä¸€æ—¦å‡†å¤‡å°±ç»ªï¼Œåº•å±‚ç¨‹åºå°±ä¼šè¿”å›ç›¸åº”çš„äº‹ä»¶ï¼Œè¿™ä¼šè®©netpollerç«‹å³é€šçŸ¥ä¸ºæ­¤ç­‰å¾…çš„Gã€‚ä»netpollerè·å–Gçš„æ„æ€å°±æ˜¯è·å–é‚£äº›å·²ç»æ¥æ”¶åˆ°é€šçŸ¥çš„Gï¼Œè®©ä»–ä»¬è½¬å…¥GrunnableçŠ¶æ€å¹¶ç­‰å¾…è¿è¡Œã€‚\nè¿™ç±»å‹çš„Gæ˜¯ä¸ä¼šè¢«æ”¾å…¥æŸä¸ªPçš„å¯è¿è¡ŒGé˜Ÿåˆ—\n>+ step5ï¼š\nä»å…¶ä»–Pçš„å¯è¿è¡ŒGé˜Ÿåˆ—ä¸­è·å–Gï¼Œè¿”å›G\nåˆ©ç”¨ä¸€ç§ä¼ªéšæœºç®—æ³•ä»å…¨å±€Påˆ—è¡¨ä¸­é€‰å–P,ç„¶åä»å®ƒçš„å¯è¿è¡ŒGé˜Ÿåˆ—ä¸­ç›—å–ä¸€åŠçš„Gåˆ°æœ¬åœ°Pçš„å¯è¿è¡ŒGé˜Ÿåˆ—ã€‚å¹¶æŠŠç›—å–çš„ç¬¬ä¸€ä¸ªGä½œä¸ºç»“æœè¿”å›ã€‚\né€‰å–På’Œç›—å–Gçš„è¿‡ç¨‹ä¼šé‡å¤å¤šæ¬¡ã€‚\nå‰ææ¡ä»¶ï¼šé™¤äº†æœ¬åœ°Pè¿˜æœ‰éç©ºé—²çš„P\n\nç¬¬ä¸€é˜¶æ®µç»“æŸ\n ![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/513c3955d65d42bebdcb0478707e35b8~tplv-k3u1fbpfcp-zoom-1.image)\n \n ### ç¬¬äºŒé˜¶æ®µ\n>+ step6ï¼š\nè·å–æœ¬åœ°Pä¸­çš„å¯æ‰§è¡ŒGCæ ‡è®°ä»»åŠ¡çš„G:è¿”å›è¯¥G\nå¦‚æœç³»ç»Ÿæ˜¯æ­£å¤„åœ¨GCæ ‡è®°é˜¶æ®µï¼Œä¸”æœ¬åœ°På¯ç”¨äºGCæ ‡è®°ä»»åŠ¡ï¼Œå°±ä¼šæŠŠæœ¬åœ°PæŒæœ‰çš„GCæ ‡è®°ä¸“ç”¨çš„Gç½®ä¸ºGrunnableå¹¶è¿”å›è¯¥G\n>+ step7ï¼š\nä»è°ƒåº¦å™¨çš„å¯è¿è¡ŒGé˜Ÿåˆ—ä¸­è·å–Gï¼Œè¿”å›è¯¥G\n(ä¸ºä»€ä¹ˆè¿˜è¦æ‰¾ä¸€æ¬¡ï¼Ÿstep3ã€4ä¸æ˜¯å·²ç»æ‰¾ä¸åˆ°äº†å˜›ï¼Œæ˜¯3ã€4ä¹‹åè¿˜æœ‰ä»€ä¹ˆæƒ…å†µä¼šæœ‰Gæ–°å¢åˆ°è°ƒåº¦å™¨çš„å¯è¿è¡ŒGé˜Ÿåˆ—é‡Œå—ï¼Ÿ)\nå¦‚æœä¾ç„¶æ‰¾ä¸åˆ°å¯è¿è¡ŒGï¼Œå°±ä¼šè§£é™¤æœ¬åœ°Pä¸å½“å‰Mçš„å…³è”ï¼Œå¹¶æŠŠPæ”¾å…¥è°ƒåº¦å™¨çš„ç©ºé—²Påˆ—è¡¨é‡Œã€‚\n>+ step8ï¼š\nä»å…¨å±€Påˆ—è¡¨ä¸­çš„æ¯ä¸ªPçš„å¯è¿è¡ŒGé˜Ÿåˆ—è·å–Gï¼Œè¿”å›è¯¥G\néå†å…¨å±€Påˆ—è¡¨ï¼Œåªè¦å‘ç°æŸä¸ªPçš„å¯è¿è¡ŒGé˜Ÿåˆ—ä¸æ˜¯ç©ºçš„ï¼Œå°±ä»è°ƒåº¦å™¨çš„ç©ºé—²påˆ—è¡¨ä¸­å–å‡ºä¸€ä¸ªP,å¹¶ä¸å½“å‰Må…³è”åœ¨ä¸€èµ·ï¼Œç„¶åè¿”å›ç¬¬ä¸€é˜¶æ®µå»æœç´¢Gã€‚\n>+ step9ï¼š\nè·å–æ‰§è¡ŒGCæ ‡è®°ä»»åŠ¡çš„Gï¼Œå…³è”æŒæœ‰GCæ ‡è®°ä¸“ç”¨Gçš„Påˆ°å½“å‰M\nå¦‚æœç³»ç»Ÿæ­£å¤„äºGCæ ‡è®°é˜¶æ®µï¼Œä¸GCæ ‡è®°ä»»åŠ¡ç›¸å…³çš„å…¨å±€èµ„æºå¯ç”¨ï¼Œè°ƒåº¦å™¨ä»å…¶ç©ºé—²Påˆ—è¡¨æ‹¿å‡ºä¸€ä¸ªP,å¦‚æœè¿™ä¸ªPæŒæœ‰ä¸€ä¸ªGCæ ‡è®°ä¸“ç”¨Gï¼Œå…³è”è¯¥Pä¸å½“å‰M,ç„¶åå†å…¶æ¬¡æ”¯æŒç¬¬äºŒé˜¶æ®µ\n>+ step10ï¼š\nä»ç½‘ç»œI/O(netpoller)å¤„è·å–Gï¼Œå¹¶è¿”å›\nè°ƒå–å™¨ä»netpolleré‚£è·å–ä¸€ä¸ªGåˆ—è¡¨ï¼Œä¸step4ä¸åŒçš„æ˜¯ï¼Œnetpollerå·²è¢«åˆå§‹åŒ–ï¼Œå¹¶ä¸”æœ‰I/Oæ“ä½œè¿‡ï¼Œä¼šé˜»å¡ç­‰åˆ°æœ‰å¯ç”¨Gå‡ºç°ã€‚ä½†æ˜¯å¦‚æœnetpollerè¿˜æœªåˆå§‹åŒ–ï¼Œæˆ–è€…æ²¡æœ‰è¿‡I/Oæ“ä½œï¼Œè¿™ä¸€æ­¥å°±ä¼šè·³è¿‡ã€‚\n\n ![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/91911a9abfc54ed0be063d8b7c613c83~tplv-k3u1fbpfcp-zoom-1.image)\n \n\n \n # åè¯ç®€è§£\n- KSE: æ ¸è°ƒåº¦å®ä½“ï¼Œå¯ä»¥è¢«å†…æ ¸çš„è°ƒåº¦å™¨è°ƒåº¦å¯¹è±¡ï¼Œä¹Ÿç§°ä¸ºå†…æ ¸çº§çº¿ç¨‹ï¼Œæ˜¯æ“ä½œç³»ç»Ÿå†…æ ¸æœ€å°è°ƒåº¦å•å…ƒã€‚  \n- ç³»ç»Ÿè°ƒç”¨ï¼šæ˜¯æ“ä½œç³»ç»Ÿå†…æ ¸æä¾›ç»™ç”¨æˆ·ç©ºé—´ç¨‹åºçš„ä¸€å¥—æ ‡å‡†æ¥å£ã€‚é€šè¿‡è¿™å¥—æ¥å£ï¼Œç”¨æˆ·æ€ç¨‹åºå¯ä»¥å—é™åœ°è®¿é—®ç¡¬ä»¶è®¾å¤‡ï¼Œä»è€Œå®ç°ç”³è¯·ç³»ç»Ÿèµ„æºï¼Œè¯»å†™è®¾å¤‡ï¼Œåˆ›å»ºæ–°è¿›ç¨‹ç­‰æ“ä½œ\n \n ", "user_name": "slpond", "description": "", "got_view_count": 89, "category_name": "åç«¯", "ctime": 1457483880}
{"tag_name": "Java", "concern_user_count": 252044, "user_id": "465848661449693", "title": "Javaå¼€æºæ¡†æ¶ä¸­çš„è®¾è®¡æ¨¡å¼ä»¥åŠåº”ç”¨åœºæ™¯", "mark_content": "## å‰è¨€\n\nè®¾è®¡æ¨¡å¼æ˜¯è½¯ä»¶è®¾è®¡ä¸­å¸¸è§é—®é¢˜çš„å…¸å‹è§£å†³æ–¹æ¡ˆï¼Œä½ å¯ä»¥é€šè¿‡å¯¹å…¶è¿›è¡Œå®šåˆ¶æ¥è§£å†³ä»£ç ä¸­çš„ç‰¹å®šè®¾è®¡é—®é¢˜ã€‚\n\nå…³äºè®¾è®¡æ¨¡å¼ï¼Œç½‘ä¸Šæœ‰å¾ˆå¤šè®²è§£ã€‚ä½†å¤§éƒ¨åˆ†éƒ½æ˜¯Demoç¤ºä¾‹ï¼Œçœ‹å®Œæœ‰å¯èƒ½è¿˜æ˜¯ä¸çŸ¥é“æ€ä¹ˆç”¨ã€‚\n\næœ¬æ–‡ç¬”è€…å°†ä»è®¾è®¡æ¨¡å¼å…¥æ‰‹ï¼Œçœ‹ä¸€çœ‹åœ¨ä¼˜ç§€çš„Javaæ¡†æ¶/ä¸­é—´ä»¶äº§å“ä¸­ï¼Œä¸åŒçš„è®¾è®¡æ¨¡å¼åº”ç”¨åœºæ™¯åœ¨å“ªé‡Œã€‚\n\n\n## ä¸€ã€å•ä¾‹æ¨¡å¼\n\nå•ä¾‹æ¨¡å¼æ˜¯ Java ä¸­æœ€ç®€å•çš„è®¾è®¡æ¨¡å¼ä¹‹ä¸€ï¼Œå®ƒæä¾›äº†ä¸€ç§åˆ›å»ºå¯¹è±¡çš„æœ€ä½³æ–¹å¼ã€‚è¿™ç§æ¨¡å¼æ¶‰åŠåˆ°ä¸€ä¸ªå•ä¸€çš„ç±»ï¼Œè¯¥ç±»è´Ÿè´£åˆ›å»ºè‡ªå·±çš„å¯¹è±¡ï¼ŒåŒæ—¶ç¡®ä¿åªæœ‰å•ä¸ªå¯¹è±¡è¢«åˆ›å»ºã€‚è¿™ä¸ªç±»æä¾›äº†ä¸€ç§è®¿é—®å…¶å”¯ä¸€çš„å¯¹è±¡çš„æ–¹å¼ï¼Œå¯ä»¥ç›´æ¥è®¿é—®ï¼Œä¸éœ€è¦å®ä¾‹åŒ–è¯¥ç±»çš„å¯¹è±¡ã€‚\n\nå•ä¾‹æ¨¡å¼è™½ç„¶å¾ˆç®€å•ï¼Œä½†å®ƒçš„èŠ±æ ·ä¸€ç‚¹éƒ½ä¸å°‘ï¼Œæˆ‘ä»¬ä¸€ä¸€æ¥çœ‹ã€‚\n\n#### 1ã€é¥¿æ±‰å¼\n\né¥¿æ±‰å¼ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯æˆ‘å¾ˆé¥¿ï¼Œè¿«ä¸åŠå¾…ã€‚ä¸ç®¡æœ‰æ²¡æœ‰äººç”¨ï¼Œæˆ‘å…ˆåˆ›å»ºäº†å†è¯´ã€‚\n\næ¯”å¦‚åœ¨Dubboä¸­çš„è¿™æ®µä»£ç ï¼Œåˆ›å»ºä¸€ä¸ªé…ç½®ç®¡ç†å™¨ã€‚\n```\npublic class ConfigManager {\n    private static final ConfigManager configManager = new ConfigManager();\t\n    private ConfigManager() {}\n    public static ConfigManager getInstance() {\n        return configManager;\n    }\n}\n```\nåˆæˆ–è€…åœ¨RocketMQä¸­ï¼Œåˆ›å»ºä¸€ä¸ªMQå®¢æˆ·ç«¯å®ä¾‹çš„æ—¶å€™ã€‚\n```\npublic class MQClientManager {\n\n    private static MQClientManager instance = new MQClientManager();\n    private MQClientManager() {}\n    public static MQClientManager getInstance() {\n        return instance;\n    }\n}\n```\n\n#### 2ã€æ‡’æ±‰å¼\n\næ‡’æ±‰å¼æ˜¯å¯¹åº”é¥¿æ±‰å¼è€Œè¨€çš„ã€‚å®ƒæ—¨åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨æ‰åˆå§‹åŒ–ï¼Œé¿å…å†…å­˜æµªè´¹ã€‚ä½†ä¸ºäº†çº¿ç¨‹å®‰å…¨å’Œæ€§èƒ½ï¼Œä¸€èˆ¬éƒ½ä¼šä½¿ç”¨åŒé‡æ£€æŸ¥é”çš„æ–¹å¼æ¥åˆ›å»ºã€‚\n\næˆ‘ä»¬æ¥çœ‹Seataæ¡†æ¶ä¸­ï¼Œé€šè¿‡è¿™ç§æ–¹å¼æ¥åˆ›å»ºä¸€ä¸ªé…ç½®ç±»ã€‚\n```\npublic class ConfigurationFactory{\n\n    private static volatile Configuration CONFIG_INSTANCE = null;\n    public static Configuration getInstance() {\n        if (CONFIG_INSTANCE == null) {\n            synchronized (Configuration.class) {\n                if (CONFIG_INSTANCE == null) {\n                    CONFIG_INSTANCE = buildConfiguration();\n                }\n            }\n        }\n        return CONFIG_INSTANCE;\n    }\n}\n```\n\n#### 3ã€é™æ€å†…éƒ¨ç±»\n\nå¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡åŒé‡æ£€æŸ¥é”çš„æ–¹å¼æ¥åˆ›å»ºå•ä¾‹å¯¹è±¡ï¼Œè¿˜æ˜¯æ¯”è¾ƒå¤æ‚çš„ã€‚åˆæ˜¯åŠ é”ï¼Œåˆæ˜¯åˆ¤æ–­ä¸¤æ¬¡ï¼Œè¿˜éœ€è¦åŠ volatileä¿®é¥°çš„ã€‚\n\nä½¿ç”¨é™æ€å†…éƒ¨ç±»çš„æ–¹å¼ï¼Œå¯ä»¥è¾¾åˆ°åŒé‡æ£€æŸ¥é”ç›¸åŒçš„åŠŸæ•ˆï¼Œä½†å®ç°ä¸Šç®€å•äº†ã€‚\n\nåœ¨Seataæ¡†æ¶ä¸­ï¼Œåˆ›å»ºRMäº‹ä»¶å¤„ç†ç¨‹åºå™¨çš„æ—¶å€™ï¼Œå°±ä½¿ç”¨äº†é™æ€å†…éƒ¨ç±»çš„æ–¹å¼æ¥åˆ›å»ºå•ä¾‹å¯¹è±¡ã€‚\n```\npublic class DefaultRMHandler extends AbstractRMHandler{\n\n    protected DefaultRMHandler() {\n        initRMHandlers();\n    }\n    private static class SingletonHolder {\n        private static AbstractRMHandler INSTANCE = new DefaultRMHandler();\n    }\n    public static AbstractRMHandler get() {\n        return DefaultRMHandler.SingletonHolder.INSTANCE;\n    }\n}\n```\n\nè¿˜æœ‰å¯ä»¥é€šè¿‡æšä¸¾çš„æ–¹å¼æ¥åˆ›å»ºå•ä¾‹å¯¹è±¡ï¼Œä½†è¿™ç§æ–¹å¼å¹¶æ²¡æœ‰è¢«å¹¿æ³›é‡‡ç”¨ï¼Œè‡³å°‘ç¬”è€…åœ¨å¸¸è§çš„å¼€æºæ¡†æ¶ä¸­æ²¡è§è¿‡ï¼Œæ‰€ä»¥å°±ä¸å†åˆ—ä¸¾ã€‚\n\næœ‰äººè¯´ï¼Œé¥¿æ±‰å¼çš„å•ä¾‹æ¨¡å¼ä¸å¥½ï¼Œä¸èƒ½åšåˆ°å»¶è¿ŸåŠ è½½ï¼Œæµªè´¹å†…å­˜ã€‚ä½†ç¬”è€…è®¤ä¸ºä¼¼ä¹è¿‡äºå¹æ¯›æ±‚ç–µï¼Œäº‹å®ä¸Šå¾ˆå¤šå¼€æºæ¡†æ¶ä¸­ï¼Œç”¨çš„æœ€å¤šçš„å°±æ˜¯è¿™ç§æ–¹å¼ã€‚\n\nå¦‚æœæ˜ç¡®å¸Œæœ›å®ç°æ‡’åŠ è½½æ•ˆæœæ—¶ï¼Œå¯ä»¥è€ƒè™‘ç”¨é™æ€å†…éƒ¨ç±»çš„æ–¹å¼ï¼›å¦‚æœè¿˜æœ‰å…¶ä»–ç‰¹æ®Šçš„éœ€æ±‚ï¼Œæ¯”å¦‚åˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹æ¯”è¾ƒç¹çï¼Œå¯ä»¥ç”¨åŒé‡æ£€æŸ¥é”çš„æ–¹å¼ã€‚\n\n## äºŒã€å·¥å‚æ¨¡å¼\n\nå·¥å‚æ¨¡å¼æ˜¯ Java ä¸­æœ€å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ä¹‹ä¸€ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºåˆ›å»ºå‹æ¨¡å¼ï¼Œå®ƒæä¾›äº†ä¸€ç§åˆ›å»ºå¯¹è±¡çš„æœ€ä½³æ–¹å¼ã€‚\n\nç®€å•æ¥è¯´ï¼Œåœ¨å·¥å‚æ¨¡å¼ä¸­ï¼Œå°±æ˜¯ä»£æ›¿newå®ä¾‹åŒ–å…·ä½“ç±»çš„ä¸€ç§æ¨¡å¼ã€‚\n\n#### 1ã€ç®€å•å·¥å‚\n\nç®€å•å·¥å‚ï¼Œçš„ç¡®æ¯”è¾ƒç®€å•ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯æŠŠå¯¹è±¡çš„åˆ›å»ºæ”¾åˆ°ä¸€ä¸ªå·¥å‚ç±»ä¸­ï¼Œé€šè¿‡å‚æ•°æ¥åˆ›å»ºä¸åŒçš„å¯¹è±¡ã€‚\n\nåœ¨åˆ†å¸ƒå¼äº‹åŠ¡æ¡†æ¶Seataä¸­ï¼Œå¦‚æœå‘ç”Ÿå¼‚å¸¸ï¼Œåˆ™éœ€è¦è¿›è¡ŒäºŒé˜¶æ®µå›æ»šã€‚\n\nå®ƒçš„è¿‡ç¨‹æ˜¯ï¼Œé€šè¿‡äº‹åŠ¡idæ‰¾åˆ°undoLogè®°å½•ï¼Œç„¶åè§£æé‡Œé¢çš„æ•°æ®ç”ŸæˆSQLï¼Œå°†ä¸€é˜¶æ®µæ‰§è¡Œçš„SQLç»™æ’¤é”€æ‰ã€‚\n\né—®é¢˜æ˜¯SQLçš„ç§ç±»åŒ…å«äº†æ¯”å¦‚``INSERTã€UPDATEã€DELETE``ï¼Œæ‰€ä»¥å®ƒä»¬åè§£æçš„è¿‡ç¨‹ä¹Ÿä¸ä¸€æ ·ï¼Œå°±éœ€è¦ä¸åŒçš„æ‰§è¡Œå™¨å»è§£æã€‚\n\nåœ¨Seataä¸­ï¼Œæœ‰ä¸€ä¸ªæŠ½è±¡çš„æ’¤é”€æ‰§è¡Œå™¨ï¼Œå¯ä»¥ç”Ÿæˆä¸€æ¡SQLã€‚\n```\npublic abstract class AbstractUndoExecutor{\n    //ç”Ÿæˆæ’¤é”€SQL\n    protected abstract String buildUndoSQL();\n}\n```\n\nç„¶åæœ‰ä¸€ä¸ªè·å–æ’¤é”€æ‰§è¡Œå™¨çš„å·¥å‚ï¼Œæ ¹æ®SQLçš„ç±»å‹ï¼Œåˆ›å»ºä¸åŒç±»å‹çš„æ‰§è¡Œå™¨å¹¶è¿”å›ã€‚\n```\npublic class UndoExecutorFactory {\n\n    public static AbstractUndoExecutor getUndoExecutor(String dbType, SQLUndoLog sqlUndoLog) {\n        switch (sqlUndoLog.getSqlType()) {\n            case INSERT:\n                return new MySQLUndoInsertExecutor(sqlUndoLog);\n            case UPDATE:\n                return new MySQLUndoUpdateExecutor(sqlUndoLog);\n            case DELETE:\n                return new MySQLUndoDeleteExecutor(sqlUndoLog);\n            default:\n                throw new ShouldNeverHappenException();\n        }\n    }\n}\t\n```\n\nä½¿ç”¨çš„æ—¶å€™ï¼Œç›´æ¥é€šè¿‡å·¥å‚ç±»è·å–æ‰§è¡Œå™¨ã€‚\n```\nAbstractUndoExecutor undoExecutor = UndoExecutorFactory.getUndoExecutor(dataSourceProxy.getDbType(),sqlUndoLog);\nundoExecutor.executeOn(conn);\n```\n\nç®€å•å·¥å‚æ¨¡å¼çš„ä¼˜ç‚¹ï¼Œæƒ³å¿…å„ä½éƒ½èƒ½é¢†ä¼šï¼Œæˆ‘ä»¬ä¸å†èµ˜è¿°ã€‚ä½†å®ƒè¿˜æœ‰ä¸ªå°å°çš„ç¼ºç‚¹ï¼š\n\nä¸€æ—¦æœ‰äº†æ–°çš„å®ç°ç±»ï¼Œå°±éœ€è¦ä¿®æ”¹å·¥å‚å®ç°ï¼Œæœ‰å¯èƒ½é€ æˆå·¥å‚é€»è¾‘è¿‡äºå¤æ‚ï¼Œä¸åˆ©äºç³»ç»Ÿçš„æ‰©å±•å’Œç»´æŠ¤ã€‚\n\n#### 2ã€å·¥å‚æ–¹æ³•\n\nå·¥å‚æ–¹æ³•æ¨¡å¼è§£å†³äº†ä¸Šé¢é‚£ä¸ªé—®é¢˜ã€‚å®ƒå¯ä»¥åˆ›å»ºä¸€ä¸ªå·¥å‚æ¥å£å’Œå¤šä¸ªå·¥å‚å®ç°ç±»ï¼Œè¿™æ ·å¦‚æœå¢åŠ æ–°çš„åŠŸèƒ½ï¼Œåªéœ€è¦æ·»åŠ æ–°çš„å·¥å‚ç±»å°±å¯ä»¥ï¼Œä¸éœ€è¦ä¿®æ”¹ä¹‹å‰çš„ä»£ç ã€‚\n\nå¦å¤–ï¼Œå·¥å‚æ–¹æ³•æ¨¡å¼è¿˜å¯ä»¥å’Œæ¨¡æ¿æ–¹æ³•æ¨¡å¼ç»“åˆä¸€èµ·ï¼Œå°†ä»–ä»¬å…±åŒçš„åŸºç¡€é€»è¾‘æŠ½å–åˆ°çˆ¶ç±»ä¸­ï¼Œå…¶å®ƒçš„äº¤ç»™å­ç±»å»å®ç°ã€‚\n\nåœ¨Dubboä¸­ï¼Œæœ‰ä¸€ä¸ªå…³äºç¼“å­˜çš„è®¾è®¡å®Œç¾çš„ä½“ç°äº†å·¥å‚æ–¹æ³•æ¨¡å¼+æ¨¡æ¿æ–¹æ³•æ¨¡å¼ã€‚\n\né¦–å…ˆï¼Œæœ‰ä¸€ä¸ªç¼“å­˜çš„æ¥å£ï¼Œå®ƒæä¾›äº†è®¾ç½®ç¼“å­˜å’Œè·å–ç¼“å­˜ä¸¤ä¸ªæ–¹æ³•ã€‚\n```\npublic interface Cache {\n    void put(Object key, Object value);\n    Object get(Object key);\n}\n```\n\nç„¶åå‘¢ï¼Œè¿˜æœ‰ä¸€ä¸ªç¼“å­˜å·¥å‚ï¼Œå®ƒè¿”å›ä¸€ä¸ªç¼“å­˜çš„å®ç°ã€‚\n```\npublic interface CacheFactory {\n    Cache getCache(URL url, Invocation invocation);\n}\n```\n\nç”±äºç»“åˆäº†æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼Œæ‰€ä»¥Dubboåˆæäº†ä¸ªæŠ½è±¡çš„ç¼“å­˜å·¥å‚ç±»ï¼Œå®ƒå®ç°äº†ç¼“å­˜å·¥å‚çš„æ¥å£ã€‚\n\n```\npublic abstract class AbstractCacheFactory implements CacheFactory {\n    \n    //å…·ä½“çš„ç¼“å­˜å®ç°ç±»\n    private final ConcurrentMap<String, Cache> caches = new ConcurrentHashMap<String, Cache>();\n    \n    @Override\n    public Cache getCache(URL url, Invocation invocation) {\n        url = url.addParameter(Constants.METHOD_KEY, invocation.getMethodName());\n        String key = url.toFullString();\n        Cache cache = caches.get(key);\n        if (cache == null) {\n            //åˆ›å»ºç¼“å­˜å®ç°ç±»ï¼Œäº¤ç»™å­ç±»å®ç°\n            caches.put(key, createCache(url));\n            cache = caches.get(key);\n        }\n        return cache;\n    }\n    //æŠ½è±¡æ–¹æ³•ï¼Œäº¤ç»™å­ç±»å®ç°\n    protected abstract Cache createCache(URL url);\n}\n```\n\nåœ¨è¿™é‡Œï¼Œå…¬å…±çš„é€»è¾‘å°±æ˜¯é€šè¿‡getCahce()åˆ›å»ºç¼“å­˜å®ç°ç±»ï¼Œé‚£å…·ä½“åˆ›å»ºä»€ä¹ˆæ ·çš„ç¼“å­˜å®ç°ç±»ï¼Œå°±ç”±å­ç±»å»å†³å®šã€‚\n\næ‰€ä»¥ï¼Œæ¯ä¸ªå­ç±»éƒ½æ˜¯ä¸€ä¸ªä¸ªå…·ä½“çš„ç¼“å­˜å·¥å‚ç±»ï¼Œæ¯”å¦‚åŒ…æ‹¬ï¼š\n\nExpiringCacheFactoryã€JCacheFactoryã€LruCacheFactoryã€ThreadLocalCacheFactoryã€‚\n\nè¿™äº›å·¥å‚ç±»ï¼Œåªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œå°±æ˜¯åˆ›å»ºå…·ä½“çš„ç¼“å­˜å®ç°ç±»ã€‚\n\n```\npublic class ThreadLocalCacheFactory extends AbstractCacheFactory {\n    @Override\n    protected Cache createCache(URL url) {\n        return new ThreadLocalCache(url);\n    }\n}\n```\n\nè¿™é‡Œçš„ThreadLocalCacheå°±æ˜¯å…·ä½“çš„ç¼“å­˜å®ç°ç±»ï¼Œæ¯”å¦‚å®ƒæ˜¯é€šè¿‡ThreadLocalæ¥å®ç°ç¼“å­˜åŠŸèƒ½ã€‚\n```\npublic class ThreadLocalCache implements Cache {\n\n    private final ThreadLocal<Map<Object, Object>> store;\n\n    public ThreadLocalCache(URL url) {\n        this.store = new ThreadLocal<Map<Object, Object>>() {\n            @Override\n            protected Map<Object, Object> initialValue() {\n                return new HashMap<Object, Object>();\n            }\n        };\n    }\n    @Override\n    public void put(Object key, Object value) {\n        store.get().put(key, value);\n    }\n    @Override\n    public Object get(Object key) {\n        return store.get().get(key);\n    }\n}\n```\n\né‚£åœ¨å®¢æˆ·ç«¯ä½¿ç”¨çš„æ—¶å€™ï¼Œè¿˜æ˜¯é€šè¿‡å·¥å‚æ¥è·å–ç¼“å­˜å¯¹è±¡ã€‚\n```\npublic static void main(String[] args) {\n    URL url = URL.valueOf(\"http://localhost:8080/cache=jacache&.cache.write.expire=1\");\n    Invocation invocation = new RpcInvocation();\n    CacheFactory cacheFactory = new ThreadLocalCacheFactory();\n    Cache cache = cacheFactory.getCache(url, invocation);\n    cache.put(\"java\",\"java\");\n    System.out.println(cache.get(\"java\"));\n}\n```\n\nè¿™æ ·åšçš„å¥½å¤„æœ‰ä¸¤ç‚¹ã€‚\n\nç¬¬ä¸€ï¼Œå¦‚æœå¢åŠ æ–°çš„ç¼“å­˜å®ç°ï¼Œåªè¦æ·»åŠ ä¸€ä¸ªæ–°çš„ç¼“å­˜å·¥å‚ç±»å°±å¯ä»¥ï¼Œåˆ«çš„éƒ½æ— éœ€æ”¹åŠ¨ã€‚\n\nç¬¬äºŒï¼Œé€šè¿‡æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼Œå°è£…ä¸å˜éƒ¨åˆ†ï¼Œæ‰©å±•å¯å˜éƒ¨åˆ†ã€‚ æå–å…¬å…±ä»£ç ï¼Œä¾¿äºç»´æŠ¤ã€‚\n\nå¦å¤–ï¼Œåœ¨Dubboä¸­ï¼Œæ³¨å†Œä¸­å¿ƒçš„è·å–ä¹Ÿæ˜¯é€šè¿‡å·¥å‚æ–¹æ³•æ¥å®ç°çš„ã€‚\n\n#### 3ã€æŠ½è±¡å·¥å‚\n\næŠ½è±¡å·¥å‚æ¨¡å¼ï¼Œå®ƒèƒ½åˆ›å»ºä¸€ç³»åˆ—ç›¸å…³çš„å¯¹è±¡ï¼Œ è€Œæ— éœ€æŒ‡å®šå…¶å…·ä½“ç±»ã€‚\n\nå·¥å‚æ–¹æ³•æ¨¡å¼å’ŒæŠ½è±¡å·¥å‚æ¨¡å¼ï¼Œå®ƒä»¬ä¹‹é—´æœ€å¤§çš„åŒºåˆ«åœ¨äºï¼š\n\n- å·¥å‚æ–¹æ³•æ¨¡å¼åªæœ‰ä¸€ä¸ªæŠ½è±¡äº§å“ç±»ï¼Œå…·ä½“å·¥å‚ç±»åªèƒ½åˆ›å»ºä¸€ä¸ªå…·ä½“äº§å“ç±»çš„å®ä¾‹ï¼›\n- æŠ½è±¡å·¥å‚æ¨¡å¼æœ‰å¤šä¸ªæŠ½è±¡äº§å“ç±»ï¼Œå…·ä½“å·¥å‚ç±»å¯ä»¥åˆ›å»ºå¤šä¸ªå…·ä½“äº§å“ç±»çš„å®ä¾‹ã€‚\n\n\næˆ‘ä»¬æ‹¿ä¸Šé¢ç¼“å­˜çš„ä¾‹å­æ¥ç»§ç»­å¾€ä¸‹è¯´ã€‚\n\nå¦‚æœæˆ‘ä»¬ç°åœ¨æœ‰ä¸€ä¸ªæ•°æ®è®¿é—®ç¨‹åºï¼Œéœ€è¦åŒæ—¶æ“ä½œç¼“å­˜å’Œæ•°æ®åº“ï¼Œé‚£å°±éœ€è¦å¤šä¸ªæŠ½è±¡äº§å“å’Œå¤šä¸ªå…·ä½“äº§å“å®ç°ã€‚\n\nç¼“å­˜ç›¸å…³çš„äº§å“ç±»éƒ½å·²ç»æœ‰äº†ï¼Œæˆ‘ä»¬æ¥ç€æ¥åˆ›å»ºæ•°æ®åº“ç›¸å…³çš„äº§å“å®ç°ã€‚\n\né¦–å…ˆï¼Œæœ‰ä¸€ä¸ªæ•°æ®åº“æ¥å£ï¼Œå®ƒæ˜¯æŠ½è±¡äº§å“ç±»ã€‚\n```\npublic interface DataBase {\n    void insert(Object tableName, Object record);\n    Object select(Object tableName);\n}\n```\n\nç„¶åï¼Œæˆ‘ä»¬åˆ›å»ºä¸¤ä¸ªå…·ä½“äº§å“ç±»MysqlDataBaseå’ŒOracleDataBaseã€‚\n```\npublic class MysqlDataBase implements DataBase{\n    Map<Object,Object> mysqlDb = new HashMap<>();\n    @Override\n    public void insert(Object tableName, Object record) {\n        mysqlDb.put(tableName,record);\n    }\n    @Override\n    public Object select(Object tableName) {\n        return mysqlDb.get(tableName);\n    }\n}\n\npublic class OracleDataBase implements DataBase {\n    Map<Object,Object> oracleDb = new HashMap<>();\n    @Override\n    public void insert(Object tableName, Object record) {\n        oracleDb.put(tableName,record);\n    }\n    @Override\n    public Object select(Object tableName) {\n        return oracleDb.get(tableName);\n    }\n}\n```\n\nå…¶æ¬¡ï¼Œåˆ›å»ºæŠ½è±¡çš„å·¥å‚ç±»ï¼Œå®ƒå¯ä»¥è¿”å›ä¸€ä¸ªç¼“å­˜å¯¹è±¡å’Œæ•°æ®åº“å¯¹è±¡ã€‚\n```\npublic interface DataAccessFactory {\n    Cache getCache(URL url);\n    DataBase getDb();\n}\n```\n\næœ€åæ˜¯å…·ä½“çš„å·¥å‚ç±»ï¼Œå¯ä»¥æ ¹æ®å®é™…çš„éœ€æ±‚ï¼Œä»»æ„ç»„åˆæ¯ä¸€ä¸ªå…·ä½“çš„äº§å“ã€‚\n\næ¯”å¦‚æˆ‘ä»¬éœ€è¦ä¸€ä¸ªåŸºäºThreadLocalçš„ç¼“å­˜å®ç°å’ŒåŸºäºMysqlçš„æ•°æ®åº“å¯¹è±¡ã€‚\n```\npublic class DataAccessFactory1 implements DataAccessFactory {\n    @Override\n    public Cache getCache(URL url) {\n        return new ThreadLocalCache(url);\n    }\n    @Override\n    public DataBase getDb() {\n        return new MysqlDataBase();\n    }\n}\n```\n\nå¦‚æœéœ€è¦ä¸€ä¸ªåŸºäºLruçš„ç¼“å­˜å®ç°å’ŒåŸºäºOracleçš„æ•°æ®åº“å¯¹è±¡ã€‚\n```\n\npublic class DataAccessFactory2 implements DataAccessFactory {\n    @Override\n    public Cache getCache(URL url) {\n        return new LruCache(url);\n    }\n    @Override\n    public DataBase getDb() {\n        return new OracleDataBase();\n    }\n}\n```\n\nå¯ä»¥çœ‹åˆ°ï¼ŒæŠ½è±¡å·¥å‚æ¨¡å¼éš”ç¦»äº†å…·ä½“ç±»çš„ç”Ÿæˆï¼Œä½¿å¾—å®¢æˆ·å¹¶ä¸éœ€è¦çŸ¥é“ä»€ä¹ˆè¢«åˆ›å»ºã€‚ç”±äºè¿™ç§éš”ç¦»ï¼Œæ›´æ¢ä¸€ä¸ªå…·ä½“å·¥å‚å°±å˜å¾—ç›¸å¯¹å®¹æ˜“ï¼Œæ‰€æœ‰çš„å…·ä½“å·¥å‚éƒ½å®ç°äº†æŠ½è±¡å·¥å‚ä¸­å®šä¹‰çš„é‚£äº›å…¬å…±æ¥å£ï¼Œå› æ­¤åªéœ€æ”¹å˜å…·ä½“å·¥å‚çš„å®ä¾‹ï¼Œå°±å¯ä»¥åœ¨æŸç§ç¨‹åº¦ä¸Šæ”¹å˜æ•´ä¸ªè½¯ä»¶ç³»ç»Ÿçš„è¡Œä¸ºã€‚\n\n## ä¸‰ã€æ¨¡æ¿æ–¹æ³•æ¨¡å¼\n\nåœ¨æ¨¡æ¿æ¨¡å¼ä¸­ï¼Œä¸€ä¸ªæŠ½è±¡ç±»å…¬å¼€å®šä¹‰äº†æ‰§è¡Œå®ƒçš„æ–¹æ³•çš„æ–¹å¼/æ¨¡æ¿ã€‚å®ƒçš„å­ç±»å¯ä»¥æŒ‰éœ€è¦é‡å†™æ–¹æ³•å®ç°ï¼Œä½†è°ƒç”¨å°†ä»¥æŠ½è±¡ç±»ä¸­å®šä¹‰çš„æ–¹å¼è¿›è¡Œã€‚\n\nç®€å•æ¥è¯´ï¼Œæœ‰å¤šä¸ªå­ç±»å…±æœ‰çš„æ–¹æ³•ï¼Œä¸”é€»è¾‘ç›¸åŒï¼Œå¯ä»¥è€ƒè™‘ä½œä¸ºæ¨¡æ¿æ–¹æ³•ã€‚\n\nåœ¨ä¸Šé¢Dubboç¼“å­˜çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å·²ç»çœ‹åˆ°äº†æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„åº”ç”¨ã€‚ä½†é‚£ä¸ªæ˜¯å’Œå·¥å‚æ–¹æ³•æ¨¡å¼ç»“åˆåœ¨ä¸€å—çš„ï¼Œæˆ‘ä»¬å†å•ç‹¬æ‰¾æ‰¾æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„åº”ç”¨ã€‚\n\næˆ‘ä»¬çŸ¥é“ï¼Œå½“æˆ‘ä»¬çš„Dubboåº”ç”¨å‡ºç°å¤šä¸ªæœåŠ¡æä¾›è€…æ—¶ï¼ŒæœåŠ¡æ¶ˆè´¹è€…éœ€è¦é€šè¿‡è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œé€‰æ‹©å…¶ä¸­ä¸€ä¸ªæœåŠ¡æ¥è¿›è¡Œè°ƒç”¨ã€‚\n\né¦–å…ˆï¼Œæœ‰ä¸€ä¸ªLoadBalanceæ¥å£ï¼Œè¿”å›ä¸€ä¸ªInvokerã€‚\n```\npublic interface LoadBalance {\n    <T> Invoker<T> select(List<Invoker<T>> invokers, URL url, Invocation invocation) throws RpcException;\n}\n```\n\nç„¶åå®šä¹‰ä¸€ä¸ªæŠ½è±¡ç±»ï¼ŒAbstractLoadBalanceï¼Œå®ç°LoadBalanceæ¥å£ã€‚\n```\npublic abstract class AbstractLoadBalance implements LoadBalance {\n\n    @Override\n    public <T> Invoker<T> select(List<Invoker<T>> invokers, URL url, Invocation invocation) {\n        if (invokers == null || invokers.isEmpty()) {\n            return null;\n        }\n        if (invokers.size() == 1) {\n            return invokers.get(0);\n        }\n        return doSelect(invokers, url, invocation);\n    }\n    //æŠ½è±¡æ–¹æ³•ï¼Œç”±å­ç±»é€‰æ‹©ä¸€ä¸ªInvoker\n    protected abstract <T> Invoker<T> doSelect(List<Invoker<T>> invokers, URL url, Invocation invocation);\n}\n```\n\nè¿™é‡Œçš„å…¬å…±é€»è¾‘å°±æ˜¯ä¸¤ä¸ªåˆ¤æ–­ï¼Œåˆ¤æ–­invokersé›†åˆæ˜¯å¦ä¸ºç©ºæˆ–è€…æ˜¯å¦åªæœ‰ä¸€ä¸ªå®ä¾‹ã€‚å¦‚æœæ˜¯çš„è¯ï¼Œå°±æ— éœ€è°ƒç”¨å­ç±»ï¼Œç›´æ¥è¿”å›å°±å¥½äº†ã€‚\n\nå…·ä½“çš„è´Ÿè½½å‡è¡¡å®ç°æœ‰å››ä¸ªï¼š\n\n- åŸºäºæƒé‡éšæœºç®—æ³•çš„ RandomLoadBalance\n- åŸºäºæœ€å°‘æ´»è·ƒè°ƒç”¨æ•°ç®—æ³•çš„ LeastActiveLoadBalance\n- åŸºäº hash ä¸€è‡´æ€§çš„ ConsistentHashLoadBalance\n- åŸºäºåŠ æƒè½®è¯¢ç®—æ³•çš„ RoundRobinLoadBalance\n\n\n```\npublic class RandomLoadBalance extends AbstractLoadBalance {\n    @Override\n    protected <T> Invoker<T> doSelect(List<Invoker<T>> invokers, URL url, Invocation invocation) {\n        //çœç•¥é€»è¾‘....\n        return invokers.get(ThreadLocalRandom.current().nextInt(length));\n    }\n}\n```\n\nå®ƒä»¬æ ¹æ®ä¸åŒçš„ç®—æ³•å®ç°ï¼Œæ¥è¿”å›ä¸€ä¸ªå…·ä½“çš„Invokerå¯¹è±¡ã€‚\n\n\n## å››ã€æ„é€ å™¨æ¨¡å¼\n\næ„é€ å™¨æ¨¡å¼ä½¿ç”¨å¤šä¸ªç®€å•çš„å¯¹è±¡ä¸€æ­¥ä¸€æ­¥æ„å»ºæˆä¸€ä¸ªå¤æ‚çš„å¯¹è±¡ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºåˆ›å»ºå‹æ¨¡å¼ï¼Œå®ƒæä¾›äº†ä¸€ç§åˆ›å»ºå¯¹è±¡çš„æœ€ä½³æ–¹å¼ã€‚\n\nè¿™ç§æ¨¡å¼ï¼Œå¸¸è§äºåœ¨æ„å»ºä¸€ä¸ªå¤æ‚çš„å¯¹è±¡ï¼Œé‡Œé¢å¯èƒ½åŒ…å«ä¸€äº›ä¸šåŠ¡é€»è¾‘ï¼Œæ¯”å¦‚æ£€æŸ¥ï¼Œå±æ€§è½¬æ¢ç­‰ã€‚å¦‚æœéƒ½åœ¨å®¢æˆ·ç«¯æ‰‹åŠ¨å»è®¾ç½®ï¼Œé‚£ä¹ˆä¼šäº§ç”Ÿå¤§é‡çš„å†—ä½™ä»£ç ã€‚é‚£ä¹ˆè¿™æ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥è€ƒè™‘ä½¿ç”¨æ„é€ å™¨æ¨¡å¼ã€‚\n\næ¯”å¦‚ï¼Œåœ¨Mybatisä¸­ï¼ŒMappedStatementçš„åˆ›å»ºè¿‡ç¨‹å°±ä½¿ç”¨äº†æ„é€ å™¨æ¨¡å¼ã€‚\n\næˆ‘ä»¬çŸ¥é“ï¼ŒXMLæ–‡ä»¶ä¸­çš„æ¯ä¸€ä¸ªSQLæ ‡ç­¾å°±è¦ç”Ÿæˆä¸€ä¸ªMappedStatementå¯¹è±¡ï¼Œå®ƒé‡Œé¢åŒ…å«å¾ˆå¤šä¸ªå±æ€§ï¼Œæˆ‘ä»¬è¦æ„é€ çš„å¯¹è±¡ä¹Ÿæ˜¯å®ƒã€‚\n```\npublic final class MappedStatement {\n    private String resource;\n    private Configuration configuration;\n    private String id;\n    private SqlSource sqlSource;\n    private ParameterMap parameterMap;\n    private List<ResultMap> resultMaps;\n    //.....çœç•¥å¤§éƒ¨åˆ†å±æ€§\n}\n```\n\nç„¶åæœ‰ä¸€ä¸ªå†…éƒ¨ç±»Builderï¼Œå®ƒè´Ÿè´£å®ŒæˆMappedStatementå¯¹è±¡çš„æ„é€ ã€‚\n\né¦–å…ˆï¼Œè¿™ä¸ªBuilderç±»ï¼Œé€šè¿‡é»˜è®¤çš„æ„é€ å‡½æ•°ï¼Œå…ˆå®Œæˆå¯¹MappedStatementå¯¹è±¡ï¼Œéƒ¨åˆ†çš„æ„é€ ã€‚\n```\npublic static class Builder {\n\n    private MappedStatement mappedStatement = new MappedStatement();\n    \n    public Builder(Configuration configuration, String id, SqlSource sqlSource, SqlCommandType sqlCommandType) {\n        mappedStatement.configuration = configuration;\n        mappedStatement.id = id;\n        mappedStatement.sqlSource = sqlSource;\n        mappedStatement.statementType = StatementType.PREPARED;\n        mappedStatement.resultSetType = ResultSetType.DEFAULT;\n        //.....çœç•¥å¤§éƒ¨åˆ†è¿‡ç¨‹\n    }\n}\n```\n\nç„¶åï¼Œé€šè¿‡ä¸€ç³»åˆ—æ–¹æ³•ï¼Œå¯ä»¥è®¾ç½®ç‰¹å®šçš„å±æ€§ï¼Œå¹¶è¿”å›è¿™ä¸ªBuilderç±»ï¼Œè¿™é‡Œçš„æ–¹æ³•é€‚åˆå¤„ç†ä¸€äº›ä¸šåŠ¡é€»è¾‘ã€‚\n```\npublic static class Builder {\n\n    public Builder parameterMap(ParameterMap parameterMap) {\n      mappedStatement.parameterMap = parameterMap;\n      return this;\n    }\n    \n    public Builder resultMaps(List<ResultMap> resultMaps) {\n      mappedStatement.resultMaps = resultMaps;\n      for (ResultMap resultMap : resultMaps) {\n        mappedStatement.hasNestedResultMaps = mappedStatement.hasNestedResultMaps || resultMap.hasNestedResultMaps();\n      }\n      return this;\n    }\n    \n    public Builder statementType(StatementType statementType) {\n      mappedStatement.statementType = statementType;\n      return this;\n    }\n\n    public Builder resultSetType(ResultSetType resultSetType) {\n      mappedStatement.resultSetType = resultSetType == null ? ResultSetType.DEFAULT : resultSetType;\n      return this;\n    }\n}\n```\n\næœ€åå‘¢ï¼Œå°±æ˜¯æä¾›ä¸€ä¸ªbuildæ–¹æ³•ï¼Œè¿”å›æ„å»ºå®Œæˆçš„å¯¹è±¡å°±å¥½äº†ã€‚\n```\npublic MappedStatement build() {\n    assert mappedStatement.configuration != null;\n    assert mappedStatement.id != null;\n    assert mappedStatement.sqlSource != null;\n    assert mappedStatement.lang != null;\n    mappedStatement.resultMaps = Collections.unmodifiableList(mappedStatement.resultMaps);\n    return mappedStatement;\n}\n```\n\nåœ¨å®¢æˆ·ç«¯ä½¿ç”¨çš„æ—¶å€™ï¼Œå…ˆåˆ›å»ºä¸€ä¸ª Builderï¼Œç„¶åé“¾å¼çš„è°ƒç”¨ä¸€å †æ–¹æ³•ï¼Œæœ€åå†è°ƒç”¨ä¸€æ¬¡ build() æ–¹æ³•ï¼Œæˆ‘ä»¬éœ€è¦çš„å¯¹è±¡å°±æœ‰äº†ï¼Œè¿™å°±æ˜¯æ„é€ å™¨æ¨¡å¼çš„åº”ç”¨ã€‚\n```\nMappedStatement.Builder statementBuilder = new MappedStatement.Builder(configuration, id, sqlSource, sqlCommandType)\n\t.resource(resource)\n\t.fetchSize(fetchSize)\n\t.timeout(timeout)\n\t.statementType(statementType)\n\t.keyGenerator(keyGenerator)\n\t.keyProperty(keyProperty)\n\t.keyColumn(keyColumn)\n\t.databaseId(databaseId)\n\t.lang(lang)\n\t.resultOrdered(resultOrdered)\n\t.resultSets(resultSets)\n\t.resultMaps(getStatementResultMaps(resultMap, resultType, id))\n\t.resultSetType(resultSetType)\n\t.flushCacheRequired(valueOrDefault(flushCache, !isSelect))\n\t.useCache(valueOrDefault(useCache, isSelect))\n\t.cache(currentCache);\n\nParameterMap statementParameterMap = getStatementParameterMap(parameterMap, parameterType, id);\nMappedStatement statement = statementBuilder.build();\nconfiguration.addMappedStatement(statement);\nreturn statement;\n```\n\n\n## äº”ã€é€‚é…å™¨æ¨¡å¼\n\né€‚é…å™¨æ¨¡å¼æ˜¯ä½œä¸ºä¸¤ä¸ªä¸å…¼å®¹çš„æ¥å£ä¹‹é—´çš„æ¡¥æ¢ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºç»“æ„å‹æ¨¡å¼ï¼Œå®ƒç»“åˆäº†ä¸¤ä¸ªç‹¬ç«‹æ¥å£çš„åŠŸèƒ½ã€‚\n\né€‚é…å™¨æ¨¡å¼ä¸€èˆ¬ç”¨äºå±è”½ä¸šåŠ¡é€»è¾‘ä¸ç¬¬ä¸‰æ–¹æœåŠ¡çš„äº¤äº’ï¼Œæˆ–è€…æ˜¯æ–°è€æ¥å£ä¹‹é—´çš„å·®å¼‚ã€‚\n\næˆ‘ä»¬çŸ¥é“ï¼Œåœ¨Dubboä¸­ï¼Œæ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯é€šè¿‡Nettyæ¥è´Ÿè´£ä¼ è¾“çš„ï¼Œç„¶åè¿™å°±æ¶‰åŠäº†æ¶ˆæ¯ç¼–è§£ç çš„é—®é¢˜ã€‚\n\næ‰€ä»¥ï¼Œé¦–å…ˆå®ƒæœ‰ä¸€ä¸ªç¼–è§£ç å™¨çš„æ¥å£ï¼Œè´Ÿè´£ç¼–ç å’Œè§£ç ã€‚\n```\n@SPI\npublic interface Codec2 {\n\n    @Adaptive({Constants.CODEC_KEY})\n    void encode(Channel channel, ChannelBuffer buffer, Object message) throws IOException;\n    \n    @Adaptive({Constants.CODEC_KEY})\n    Object decode(Channel channel, ChannelBuffer buffer) throws IOException;\n    \n    enum DecodeResult {\n        NEED_MORE_INPUT, SKIP_SOME_INPUT\n    }\n}\n```\n\nç„¶åï¼Œæœ‰å‡ ä¸ªå®ç°ç±»ï¼Œæ¯”å¦‚DubboCountCodecã€DubboCodecã€ExchangeCodecç­‰ã€‚\n\nä½†æ˜¯ï¼Œå½“æˆ‘ä»¬æ‰“å¼€è¿™äº›ç±»çš„æ—¶å€™ï¼Œå°±ä¼šå‘ç°ï¼Œä»–ä»¬éƒ½æ˜¯Dubboä¸­æ™®é€šçš„ç±»ï¼Œåªæ˜¯å®ç°äº†Codec2æ¥å£ï¼Œå…¶å®ä¸èƒ½ç›´æ¥ä½œç”¨äºNettyç¼–è§£ç ã€‚\n\nè¿™æ˜¯å› ä¸ºï¼ŒNettyç¼–è§£ç éœ€è¦å®ç°ChannelHandleræ¥å£ï¼Œè¿™æ ·æ‰ä¼šè¢«å£°æ˜æˆNettyçš„å¤„ç†ç»„ä»¶ã€‚æ¯”å¦‚åƒMessageToByteEncoderã€ByteToMessageDecoderé‚£æ ·ã€‚\n\né‰´äºæ­¤ï¼ŒDubboæäº†ä¸€ä¸ªé€‚é…å™¨ï¼Œä¸“é—¨æ¥é€‚é…ç¼–è§£ç å™¨æ¥å£ã€‚\n\n```\nfinal public class NettyCodecAdapter {\n\n    private final ChannelHandler encoder = new InternalEncoder();\n    private final ChannelHandler decoder = new InternalDecoder();\n    private final Codec2 codec;\n    private final URL url;\n    private final org.apache.dubbo.remoting.ChannelHandler handler;\n    \n    public NettyCodecAdapter(Codec2 codec, URL url, org.apache.dubbo.remoting.ChannelHandler handler) {\n        this.codec = codec;\n        this.url = url;\n        this.handler = handler;\n    }\n    public ChannelHandler getEncoder() {\n        return encoder;\n    }\n    public ChannelHandler getDecoder() {\n        return decoder;\n    }\n    \n    private class InternalEncoder extends MessageToByteEncoder {\n        @Override\n        protected void encode(ChannelHandlerContext ctx, Object msg, ByteBuf out) throws Exception {\n            org.apache.dubbo.remoting.buffer.ChannelBuffer buffer = new NettyBackedChannelBuffer(out);\n            Channel ch = ctx.channel();\n            NettyChannel channel = NettyChannel.getOrAddChannel(ch, url, handler);\n            codec.encode(channel, buffer, msg);\n        }\n    }\n    private class InternalDecoder extends ByteToMessageDecoder {\n        @Override\n        protected void decode(ChannelHandlerContext ctx, ByteBuf input, List<Object> out) throws Exception {\n            ChannelBuffer message = new NettyBackedChannelBuffer(input);\n            NettyChannel channel = NettyChannel.getOrAddChannel(ctx.channel(), url, handler);\n            //è§£ç å¯¹è±¡\n            codec.decode(channel, message);\n            //çœç•¥éƒ¨åˆ†ä»£ç ...\n        }\n    }\n}\n```\n\nä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°ï¼ŒNettyCodecAdapterç±»é€‚é…çš„æ˜¯Codec2æ¥å£ï¼Œé€šè¿‡æ„é€ å‡½æ•°ä¼ é€’å®ç°ç±»ï¼Œç„¶åå®šä¹‰äº†å†…éƒ¨çš„ç¼–ç å™¨å®ç°å’Œè§£ç å™¨å®ç°ï¼ŒåŒæ—¶å®ƒä»¬éƒ½æ˜¯ChannelHandlerã€‚\n\nè¿™æ ·çš„è¯ï¼Œåœ¨å†…éƒ¨ç±»é‡Œé¢çš„ç¼–ç å’Œè§£ç é€»è¾‘ï¼ŒçœŸæ­£è°ƒç”¨çš„è¿˜æ˜¯Codec2æ¥å£ã€‚\n\næœ€åæˆ‘ä»¬å†æ¥çœ‹çœ‹ï¼Œè¯¥é€‚é…å™¨çš„è°ƒç”¨æ–¹å¼ã€‚\n\n```\n//é€šè¿‡SPIæ–¹å¼è·å–ç¼–è§£ç å™¨çš„å®ç°ç±»ï¼Œæ¯”å¦‚è¿™é‡Œæ˜¯DubboCountCodec\nCodec2 codec = ExtensionLoader.getExtensionLoader(Codec2.class).getExtension(\"dubbo\");\nURL url = new URL(\"dubbo\", \"localhost\", 22226);\n//åˆ›å»ºé€‚é…å™¨\nNettyCodecAdapter adapter = new NettyCodecAdapter(codec, url, NettyClient.this);\n//å‘ChannelPipelineä¸­æ·»åŠ ç¼–è§£ç å¤„ç†å™¨\nch.pipeline()\n    .addLast(\"decoder\", adapter.getDecoder())\n    .addLast(\"encoder\", adapter.getEncoder())\n```\n\nä»¥ä¸Šï¼Œå°±æ˜¯Dubboä¸­å…³äºç¼–è§£ç å™¨å¯¹äºé€‚é…å™¨æ¨¡å¼çš„åº”ç”¨ã€‚\n\n\n## å…­ã€è´£ä»»é“¾æ¨¡å¼\n\nè´£ä»»é“¾æ¨¡å¼ä¸ºè¯·æ±‚åˆ›å»ºäº†ä¸€ä¸ªæ¥æ”¶è€…å¯¹è±¡çš„é“¾ã€‚å…è®¸ä½ å°†è¯·æ±‚æ²¿ç€å¤„ç†è€…é“¾è¿›è¡Œå‘é€ã€‚æ”¶åˆ°è¯·æ±‚åï¼Œæ¯ä¸ªå¤„ç†è€…å‡å¯å¯¹è¯·æ±‚è¿›è¡Œå¤„ç†ï¼Œ æˆ–å°†å…¶ä¼ é€’ç»™é“¾ä¸Šçš„ä¸‹ä¸ªå¤„ç†è€…ã€‚\n\næˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªNettyä¸­çš„ä¾‹å­ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨Nettyä¸­æœåŠ¡ç«¯å¤„ç†æ¶ˆæ¯ï¼Œå°±è¦æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªChannelHandlerã€‚é‚£ä¹ˆï¼Œæ‰¿è½½è¿™äº›ChannelHandlerçš„å°±æ˜¯ChannelPipelineï¼Œå®ƒçš„å®ç°è¿‡ç¨‹å°±ä½“ç°äº†è´£ä»»é“¾æ¨¡å¼çš„åº”ç”¨ã€‚\n\n```\nServerBootstrap serverBootstrap = new ServerBootstrap();\nserverBootstrap.childHandler(new ChannelInitializer<NioSocketChannel>() {\n    protected void initChannel(NioSocketChannel channel) {\n        channel.pipeline()\n            .addLast(new ChannelHandler1())\n            .addLast(new ChannelHandler2())\n            .addLast(new ChannelHandler3());\n    }\n});\n```\néœ€è¦çŸ¥é“çš„æ˜¯ï¼Œåœ¨ Netty æ•´ä¸ªæ¡†æ¶é‡Œé¢ï¼Œä¸€æ¡è¿æ¥å¯¹åº”ç€ä¸€ä¸ª Channelï¼Œæ¯ä¸€ä¸ªæ–°åˆ›å»ºçš„ Channel éƒ½å°†ä¼šè¢«åˆ†é…ä¸€ä¸ªæ–°çš„ ChannelPipelineã€‚\n\nChannelPipelineé‡Œé¢ä¿å­˜çš„æ˜¯ChannelHandlerContextå¯¹è±¡ï¼Œå®ƒæ˜¯Channelç›¸å…³çš„ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œé‡Œé¢åŒ…ç€æˆ‘ä»¬å®šä¹‰çš„å¤„ç†å™¨ChannelHandlerã€‚\n\næ ¹æ®äº‹ä»¶çš„èµ·æºï¼ŒIOäº‹ä»¶å°†ä¼šè¢« ChannelInboundHandleræˆ–è€…ChannelOutboundHandlerå¤„ç†ã€‚éšåï¼Œé€šè¿‡è°ƒç”¨ChannelHandlerContext å®ç°ï¼Œå®ƒå°†è¢«è½¬å‘ç»™åŒä¸€è¶…ç±»å‹çš„ä¸‹ä¸€ä¸ªChannelHandlerã€‚\n\n#### 1ã€ChannelHandler\n\né¦–å…ˆï¼Œæˆ‘ä»¬æ¥çœ‹è´£ä»»å¤„ç†å™¨æ¥å£ï¼ŒNettyä¸­çš„ChannelHandlerï¼Œå®ƒå……å½“äº†æ‰€æœ‰å¤„ç†å…¥ç«™å’Œå‡ºç«™æ•°æ®çš„åº”ç”¨ç¨‹åºé€»è¾‘çš„å®¹å™¨ã€‚\n```\npublic interface ChannelHandler {\n    //å½“æŠŠ ChannelHandler æ·»åŠ åˆ° ChannelPipeline ä¸­æ—¶è¢«è°ƒç”¨\n    void handlerAdded(ChannelHandlerContext ctx) throws Exception;\n    //å½“ä» ChannelPipeline ä¸­ç§»é™¤ ChannelHandler æ—¶è¢«è°ƒç”¨\n    void handlerRemoved(ChannelHandlerContext ctx) throws Exception;\n    //å½“å¤„ç†è¿‡ç¨‹ä¸­åœ¨ ChannelPipeline ä¸­æœ‰é”™è¯¯äº§ç”Ÿæ—¶è¢«è°ƒç”¨\n    void exceptionCaught(ChannelHandlerContext ctx, Throwable cause) throws Exception;\n}\n```\n\nç„¶å Netty å®šä¹‰äº†ä¸‹é¢ä¸¤ä¸ªé‡è¦çš„ ChannelHandler å­æ¥å£ï¼š\n\n- ChannelInboundHandlerï¼Œå¤„ç†å…¥ç«™æ•°æ®ä»¥åŠå„ç§çŠ¶æ€å˜åŒ–ï¼›\n\n```\npublic interface ChannelInboundHandler extends ChannelHandler {\n    //å½“ Channel å·²ç»æ³¨å†Œåˆ°å®ƒçš„ EventLoop å¹¶ä¸”èƒ½å¤Ÿå¤„ç† I/O æ—¶è¢«è°ƒç”¨\n    void channelRegistered(ChannelHandlerContext ctx) throws Exception;\n    //å½“ Channel ä»å®ƒçš„ EventLoop æ³¨é”€å¹¶ä¸”æ— æ³•å¤„ç†ä»»ä½• I/O æ—¶è¢«è°ƒç”¨\n    void channelUnregistered(ChannelHandlerContext ctx) throws Exception; \n    //å½“ Channel å¤„äºæ´»åŠ¨çŠ¶æ€æ—¶è¢«è°ƒç”¨ï¼›Channel å·²ç»è¿æ¥/ç»‘å®šå¹¶ä¸”å·²ç»å°±ç»ª\n    void channelActive(ChannelHandlerContext ctx) throws Exception;   \n    //å½“ Channel ç¦»å¼€æ´»åŠ¨çŠ¶æ€å¹¶ä¸”ä¸å†è¿æ¥å®ƒçš„è¿œç¨‹èŠ‚ç‚¹æ—¶è¢«è°ƒç”¨\n    void channelInactive(ChannelHandlerContext ctx) throws Exception;  \n    å½“ä» Channel è¯»å–æ•°æ®æ—¶è¢«è°ƒç”¨\n    void channelRead(ChannelHandlerContext ctx, Object msg) throws Exception;   \n    //å½“ Channelä¸Šçš„ä¸€ä¸ªè¯»æ“ä½œå®Œæˆæ—¶è¢«è°ƒç”¨\n    void channelReadComplete(ChannelHandlerContext ctx) throws Exception;\n    void userEventTriggered(ChannelHandlerContext ctx, Object evt) throws Exception; \n    void channelWritabilityChanged(ChannelHandlerContext ctx) throws Exception;\n    void exceptionCaught(ChannelHandlerContext ctx, Throwable cause) throws Exception;\n}\n```\n\n- ChannelOutboundHandlerï¼Œå¤„ç†å‡ºç«™æ•°æ®å¹¶ä¸”å…è®¸æ‹¦æˆªæ‰€æœ‰çš„æ“ä½œï¼›\n\n```\npublic interface ChannelOutboundHandler extends ChannelHandler {\n    \n    //å½“è¯·æ±‚å°† Channel ç»‘å®šåˆ°æœ¬åœ°åœ°å€æ—¶è¢«è°ƒç”¨\n    void bind(ChannelHandlerContext ctx, SocketAddress localAddress, ChannelPromise promise) throws Exception;\n    //å½“è¯·æ±‚å°† Channel è¿æ¥åˆ°è¿œç¨‹èŠ‚ç‚¹æ—¶è¢«è°ƒç”¨\n    void connect(ChannelHandlerContext ctx, SocketAddress remoteAddress,SocketAddress localAddress, \n        ChannelPromise promise) throws Exception;\n    //å½“è¯·æ±‚å°† Channel ä»è¿œç¨‹èŠ‚ç‚¹æ–­å¼€æ—¶è¢«è°ƒç”¨\n    void disconnect(ChannelHandlerContext ctx, ChannelPromise promise) throws Exception;\n    //å½“è¯·æ±‚å…³é—­ Channel æ—¶è¢«è°ƒç”¨\n    void close(ChannelHandlerContext ctx, ChannelPromise promise) throws Exception;\n    //å½“è¯·æ±‚å°† Channel ä»å®ƒçš„ EventLoop æ³¨é”€æ—¶è¢«è°ƒç”¨\n    void deregister(ChannelHandlerContext ctx, ChannelPromise promise) throws Exception;\n    //å½“è¯·æ±‚ä» Channel è¯»å–æ›´å¤šçš„æ•°æ®æ—¶è¢«è°ƒç”¨\n    void read(ChannelHandlerContext ctx) throws Exception;\n    //å½“è¯·æ±‚é€šè¿‡ Channel å°†æ•°æ®å†™åˆ°è¿œç¨‹èŠ‚ç‚¹æ—¶è¢«è°ƒç”¨\n    void write(ChannelHandlerContext ctx, Object msg, ChannelPromise promise) throws Exception;\n    //å½“è¯·æ±‚é€šè¿‡ Channel å°†å…¥é˜Ÿæ•°æ®å†²åˆ·åˆ°è¿œç¨‹èŠ‚ç‚¹æ—¶è¢«è°ƒç”¨\n    void flush(ChannelHandlerContext ctx) throws Exception;\n}\n```\n\n#### 2ã€ChannelPipeline\n\næ—¢ç„¶å«åšè´£ä»»é“¾æ¨¡å¼ï¼Œé‚£å°±éœ€è¦æœ‰ä¸€ä¸ªâ€œé“¾â€ï¼Œåœ¨Nettyä¸­å°±æ˜¯ChannelPipelineã€‚\n\nChannelPipeline æä¾›äº† ChannelHandler é“¾çš„å®¹å™¨ï¼Œå¹¶å®šä¹‰äº†ç”¨äºåœ¨è¯¥é“¾ä¸Šä¼ æ’­å…¥ç«™å’Œå‡ºç«™äº‹ä»¶æµçš„æ–¹æ³•ï¼Œå¦å¤–å®ƒè¿˜å…·æœ‰æ·»åŠ åˆ é™¤è´£ä»»å¤„ç†å™¨æ¥å£çš„åŠŸèƒ½ã€‚\n```\npublic interface ChannelPipeline{\n    ChannelPipeline addFirst(String name, ChannelHandler handler);\n    ChannelPipeline addLast(String name, ChannelHandler handler);\n    ChannelPipeline addBefore(String baseName, String name, ChannelHandler handler);\n    ChannelPipeline addAfter(String baseName, String name, ChannelHandler handler);\n    ChannelPipeline remove(ChannelHandler handler);\n    ChannelHandler replace(String oldName, String newName, ChannelHandler newHandler);\n    @Override\n    ChannelPipeline fireChannelRegistered();\n    @Override\n    ChannelPipeline fireChannelActive();\n    @Override\n    ChannelPipeline fireExceptionCaught(Throwable cause);\n    @Override\n    ChannelPipeline fireUserEventTriggered(Object event);\n    @Override\n    ChannelPipeline fireChannelRead(Object msg);\n    @Override\n    ChannelPipeline flush();\n    //çœç•¥éƒ¨åˆ†æ–¹æ³•.....\n}\n```\n\nç„¶åæˆ‘ä»¬çœ‹å®ƒçš„å®ç°ï¼Œé»˜è®¤æœ‰ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œå¤´ç»“ç‚¹å’Œå°¾ç»“ç‚¹ã€‚å¹¶åœ¨æ„é€ å‡½æ•°ä¸­ï¼Œä½¿å®ƒä»¬é¦–å°¾ç›¸è¿ã€‚è¿™å°±æ˜¯æ ‡å‡†çš„é“¾å¼ç»“æ„ã€‚\n```\npublic class DefaultChannelPipeline implements ChannelPipeline {\n\n    final AbstractChannelHandlerContext head;\n    final AbstractChannelHandlerContext tail;\n    private final Channel channel;\n    \n    protected DefaultChannelPipeline(Channel channel) {\n        this.channel = ObjectUtil.checkNotNull(channel, \"channel\");\n        tail = new TailContext(this);\n        head = new HeadContext(this);\n        head.next = tail;\n        tail.prev = head;\n    }\n}\n```\n\nå½“æœ‰æ–°çš„ChannelHandlerè¢«æ·»åŠ æ—¶ï¼Œåˆ™å°†å…¶å°è£…ä¸ºChannelHandlerContextå¯¹è±¡ï¼Œç„¶åæ’å…¥åˆ°é“¾è¡¨ä¸­ã€‚\n```\nprivate void addLast0(AbstractChannelHandlerContext newCtx) {\n    AbstractChannelHandlerContext prev = tail.prev;\n    newCtx.prev = prev;\n    newCtx.next = tail;\n    prev.next = newCtx;\n    tail.prev = newCtx;\n}\n```\n\n\n#### 3ã€ChannelHandlerContext\n\nChannelHandlerContext ä»£è¡¨äº† ChannelHandler å’Œ ChannelPipeline ä¹‹é—´çš„å…³è”ï¼Œæ¯å½“æœ‰ ChannelHandler æ·»åŠ åˆ° ChannelPipeline ä¸­æ—¶ï¼Œéƒ½ä¼šåˆ›å»º ChannelHandlerContextã€‚\n\nChannelHandlerContext çš„ä¸»è¦åŠŸèƒ½æ˜¯ç®¡ç†å®ƒæ‰€å…³è”çš„ ChannelHandler å’Œåœ¨åŒä¸€ä¸ª ChannelPipeline ä¸­çš„å…¶ä»– ChannelHandler ä¹‹é—´çš„äº¤äº’ã€‚\n\n```\npublic interface ChannelHandlerContext{\n    Channel channel();\n    EventExecutor executor();\n    ChannelHandler handler();\n    ChannelPipeline pipeline();\n    @Override\n    ChannelHandlerContext fireChannelRegistered();\n    @Override\n    ChannelHandlerContext fireChannelUnregistered();\n    @Override\n    ChannelHandlerContext fireChannelActive();\n    @Override\n    ChannelHandlerContext fireChannelRead(Object msg);\n    @Override\n    ChannelHandlerContext read();\n    @Override\n    ChannelHandlerContext flush();\n    //çœç•¥éƒ¨åˆ†æ–¹æ³•...\n}\n```\n\nChannelHandlerContextè´Ÿè´£åœ¨é“¾ä¸Šä¼ æ’­è´£ä»»å¤„ç†å™¨æ¥å£çš„äº‹ä»¶ã€‚\n\nå®ƒæœ‰ä¸¤ä¸ªé‡è¦çš„æ–¹æ³•ï¼ŒæŸ¥æ‰¾Inboundç±»å‹å’ŒOutboundç±»å‹çš„å¤„ç†å™¨ã€‚\n\nå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä¸€ä¸ªå…¥ç«™äº‹ä»¶è¢«è§¦å‘ï¼Œå®ƒå°†è¢«ä»ChannelPipelineçš„å¤´éƒ¨å¼€å§‹ä¸€ç›´è¢«ä¼ æ’­åˆ°ChannelPipelineçš„å°¾ç«¯ï¼›ä¸€ä¸ªå‡ºç«™äº‹ä»¶å°†ä»ChannelPipelineçš„æœ€å³è¾¹å¼€å§‹ï¼Œç„¶åå‘å·¦ä¼ æ’­ã€‚\n```\nabstract class AbstractChannelHandlerContext implements ChannelHandlerContext, ResourceLeakHint {\n\t\n    volatile AbstractChannelHandlerContext next;\n    volatile AbstractChannelHandlerContext prev;\n    \n    //æŸ¥æ‰¾ä¸‹ä¸€ä¸ªInboundç±»å‹çš„å¤„ç†å™¨ï¼Œå·¦ > å³\n    private AbstractChannelHandlerContext findContextInbound(int mask) {\n        AbstractChannelHandlerContext ctx = this;\n        EventExecutor currentExecutor = executor();\n        do {\n            ctx = ctx.next;\n        } while (skipContext(ctx, currentExecutor, mask, MASK_ONLY_INBOUND));\n        return ctx;\n    }\n    //æŸ¥æ‰¾ä¸‹ä¸€ä¸ªOutboundç±»å‹çš„å¤„ç†å™¨ï¼Œå³ > å·¦\n    private AbstractChannelHandlerContext findContextOutbound(int mask) {\n        AbstractChannelHandlerContext ctx = this;\n        EventExecutor currentExecutor = executor();\n        do {\n            ctx = ctx.prev;\n        } while (skipContext(ctx, currentExecutor, mask, MASK_ONLY_OUTBOUND));\n        return ctx;\n    }\n}\n```\n\n#### 4ã€å¤„ç†æµç¨‹\n\nå½“æˆ‘ä»¬å‘æœåŠ¡ç«¯å‘é€æ¶ˆæ¯çš„æ—¶å€™ï¼Œå°†ä¼šè§¦å‘readæ–¹æ³•ã€‚\n```\npublic abstract class AbstractNioByteChannel extends AbstractNioChannel {\n    public final void read() {\t\n        //ä»Channelä¸­è·å–å¯¹åº”çš„ChannelPipeline\n        final ChannelPipeline pipeline = pipeline();\n        //æ•°æ®è½½ä½“\n        ByteBuf byteBuf = allocHandle.allocate(allocator);\n        //ä¼ é€’æ•°æ®\n        pipeline.fireChannelRead(byteBuf);\n    }\n}\n```\n\nä¸Šé¢çš„ä»£ç ä¸­ï¼Œå°±ä¼šè°ƒç”¨åˆ°ChannelPipelineï¼Œå®ƒä¼šä»HeadèŠ‚ç‚¹å¼€å§‹ï¼Œæ ¹æ®ä¸Šä¸‹æ–‡å¯¹è±¡ä¾æ¬¡è°ƒç”¨å¤„ç†å™¨ã€‚\n```\npublic class DefaultChannelPipeline implements ChannelPipeline {\n    public final ChannelPipeline fireChannelRead(Object msg) {\n        AbstractChannelHandlerContext.invokeChannelRead(head, msg);\n        return this;\n    }\n}\n```\n\nå› ä¸ºç¬¬ä¸€ä¸ªèŠ‚ç‚¹æ˜¯é»˜è®¤çš„å¤´ç»“ç‚¹HeadContextï¼Œæ‰€ä»¥å®ƒæ˜¯ä»ChannelHandlerContextå¼€å§‹çš„ã€‚\n\n```\nabstract class AbstractChannelHandlerContext implements ChannelHandlerContext, ResourceLeakHint {\n    //æ‰¾åˆ°ä¸‹ä¸€ä¸ªChannelHandlerå¹¶æ‰§è¡Œ\n    public ChannelHandlerContext fireChannelRead(final Object msg) {\n        invokeChannelRead(findContextInbound(MASK_CHANNEL_READ), msg);\n        return this;\n    }\n    \n}\n```\n\nç„¶ååœ¨æˆ‘ä»¬è‡ªå®šä¹‰çš„ChannelHandlerä¸­ï¼Œå°±ä¼šè¢«è°ƒç”¨åˆ°ã€‚\n```\npublic class ChannelHandler1 extends ChannelInboundHandlerAdapter {\n    public void channelRead(ChannelHandlerContext ctx, Object msg){\n        System.out.println(\"ChannelHandler1:\"+msg);\n        ctx.fireChannelRead(msg);\n    }\n}\n```\n\nå¦‚æœæ¶ˆæ¯æœ‰å¤šä¸ªChannelHandlerï¼Œä½ å¯ä»¥è‡ªç”±é€‰æ‹©æ˜¯å¦ç»§ç»­å¾€ä¸‹ä¼ é€’è¯·æ±‚ã€‚\n\næ¯”å¦‚ï¼Œå¦‚æœä½ è®¤ä¸ºæ¶ˆæ¯å·²ç»è¢«å¤„ç†ä¸”ä¸åº”è¯¥ç»§ç»­å¾€ä¸‹è°ƒç”¨ï¼ŒæŠŠä¸Šé¢çš„ctx.fireChannelRead(msg);æ³¨é‡Šæ‰å°±ç»ˆæ­¢äº†æ•´ä¸ªè´£ä»»é“¾ã€‚\n\n## ä¸ƒã€ç­–ç•¥æ¨¡å¼\n\nè¯¥æ¨¡å¼å®šä¹‰äº†ä¸€ç³»åˆ—ç®—æ³•ï¼Œå¹¶å°†æ¯ä¸ªç®—æ³•å°è£…èµ·æ¥ï¼Œä½¿å®ƒä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ï¼Œä¸”ç®—æ³•çš„å˜åŒ–ä¸ä¼šå½±å“ä½¿ç”¨ç®—æ³•çš„å®¢æˆ·ã€‚\n\nç­–ç•¥æ¨¡å¼æ˜¯ä¸€ä¸ªå¾ˆå¸¸è§ï¼Œè€Œä¸”ä¹Ÿå¾ˆå¥½ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œå¦‚æœä½ çš„ä¸šåŠ¡ä»£ç ä¸­æœ‰å¤§é‡çš„if...elseï¼Œé‚£ä¹ˆå°±å¯ä»¥è€ƒè™‘æ˜¯å¦å¯ä»¥ä½¿ç”¨ç­–ç•¥æ¨¡å¼æ”¹é€ ä¸€ä¸‹ã€‚\n\nRocketMQæˆ‘ä»¬å¤§å®¶éƒ½ç†Ÿæ‚‰ï¼Œæ˜¯ä¸€æ¬¾ä¼˜ç§€çš„åˆ†å¸ƒå¼æ¶ˆæ¯ä¸­é—´ä»¶ã€‚æ¶ˆæ¯ä¸­é—´ä»¶ï¼Œç®€å•æ¥è¯´ï¼Œå°±æ˜¯å®¢æˆ·ç«¯å‘é€ä¸€æ¡æ¶ˆæ¯ï¼ŒæœåŠ¡ç«¯å­˜å‚¨èµ·æ¥å¹¶æä¾›ç»™æ¶ˆè´¹è€…å»æ¶ˆè´¹ã€‚\n\nè¯·æ±‚æ¶ˆæ¯çš„ç±»å‹å¤šç§å¤šæ ·ï¼Œå¤„ç†è¿‡ç¨‹è‚¯å®šä¹Ÿä¸ä¸€æ ·ï¼Œæ¯æ¬¡éƒ½åˆ¤æ–­ä¸€ä¸‹å†å¤„ç†å°±è½äº†ä¸‹ä¹˜ã€‚åœ¨RocketMQé‡Œï¼Œå®ƒä¼šæŠŠæ‰€æœ‰å¤„ç†å™¨æ³¨å†Œèµ·æ¥ï¼Œç„¶åæ ¹æ®è¯·æ±‚æ¶ˆæ¯çš„ code ï¼Œè®©å¯¹åº”çš„å¤„ç†å™¨å¤„ç†è¯·æ±‚ï¼Œè¿™å°±æ˜¯ç­–ç•¥æ¨¡å¼çš„åº”ç”¨ã€‚\n\né¦–å…ˆï¼Œå®ƒä»¬éœ€è¦å®ç°åŒä¸€ä¸ªæ¥å£ï¼Œåœ¨è¿™é‡Œå°±æ˜¯è¯·æ±‚å¤„ç†å™¨æ¥å£ã€‚\n```\npublic interface NettyRequestProcessor {\n    RemotingCommand processRequest(ChannelHandlerContext ctx, RemotingCommand request)throws Exception;\n    boolean rejectRequest();\n}\n```\n\nè¿™ä¸ªæ¥å£åªåšä¸€ä»¶äº‹ï¼Œå°±æ˜¯å¤„ç†æ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚ä¸åŒç±»å‹çš„è¯·æ±‚å°è£…æˆä¸åŒçš„RemotingCommandå¯¹è±¡ã€‚\n\nRocketMQå¤§æ¦‚æœ‰90å¤šç§è¯·æ±‚ç±»å‹ï¼Œéƒ½åœ¨RequestCodeé‡Œä»¥ code æ¥åŒºåˆ†ã€‚\n\nç„¶åï¼Œå®šä¹‰ä¸€ç³»åˆ—ç­–ç•¥ç±»ã€‚æˆ‘ä»¬æ¥çœ‹å‡ ä¸ªã€‚\n```\n//é»˜è®¤çš„æ¶ˆæ¯å¤„ç†å™¨\npublic class DefaultRequestProcessor implements NettyRequestProcessor {}\n//å‘é€æ¶ˆæ¯çš„å¤„ç†å™¨\npublic class SendMessageProcessor extends AbstractSendMessageProcessor implements NettyRequestProcessor {}\n//æ‹‰å–æ¶ˆæ¯çš„å¤„ç†å™¨\npublic class PullMessageProcessor implements NettyRequestProcessor {}\n//æŸ¥è¯¢æ¶ˆæ¯çš„å¤„ç†å™¨\npublic class QueryMessageProcessor implements NettyRequestProcessor {}\n//æ¶ˆè´¹è€…ç«¯ç®¡ç†çš„å¤„ç†å™¨\npublic class ConsumerManageProcessor implements NettyRequestProcessor {}\n```\n\næ¥ç€ï¼Œå°†è¿™äº›ç­–ç•¥ç±»å°è£…èµ·æ¥ã€‚åœ¨RocketMQä¸­ï¼Œåœ¨å¯åŠ¨BrokeræœåŠ¡å™¨çš„æ—¶å€™ï¼Œæ³¨å†Œè¿™äº›å¤„ç†å™¨ã€‚\n```\npublic class BrokerController {\n\n    public void registerProcessor() {\n    \n        SendMessageProcessor sendProcessor = new SendMessageProcessor(this);\n        this.remotingServer.registerProcessor(RequestCode.SEND_MESSAGE, sendProcessor, this.sendMessageExecutor);\n        this.remotingServer.registerProcessor(RequestCode.SEND_MESSAGE_V2, sendProcessor, this.sendMessageExecutor);\n        this.remotingServer.registerProcessor(RequestCode.PULL_MESSAGE,this.pullMessageProcessor,this.pullMessageExecutor);\n        \n        this.remotingServer.registerProcessor(RequestCode.SEND_REPLY_MESSAGE, replyMessageProcessor, replyMessageExecutor);\n        this.remotingServer.registerProcessor(RequestCode.SEND_REPLY_MESSAGE_V2, replyMessageProcessor, replyMessageExecutor);\n        \n        NettyRequestProcessor queryProcessor = new QueryMessageProcessor(this);\n        this.remotingServer.registerProcessor(RequestCode.QUERY_MESSAGE, queryProcessor, this.queryMessageExecutor);\n        this.remotingServer.registerProcessor(RequestCode.VIEW_MESSAGE_BY_ID, queryProcessor, this.queryMessageExecutor);\n        \n        ClientManageProcessor clientProcessor = new ClientManageProcessor(this);\n        this.remotingServer.registerProcessor(RequestCode.HEART_BEAT, clientProcessor, this.heartbeatExecutor);\n        this.remotingServer.registerProcessor(RequestCode.UNREGISTER_CLIENT, clientProcessor, this.clientManageExecutor);\n        //çœç•¥éƒ¨åˆ†æ³¨å†Œè¿‡ç¨‹.....\n    }\n}\n```\n\næœ€åï¼Œåœ¨Nettyæ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„è¯·æ±‚ä¹‹åï¼Œå°±ä¼šæ ¹æ®æ¶ˆæ¯çš„ç±»å‹ï¼Œæ‰¾åˆ°å¯¹åº”çš„ç­–ç•¥ç±»ï¼Œå»å¤„ç†æ¶ˆæ¯ã€‚\n```\npublic abstract class NettyRemotingAbstract {\n\n    public void processRequestCommand(final ChannelHandlerContext ctx, final RemotingCommand cmd) {\n        //æ ¹æ®è¯·æ±‚ç±»å‹æ‰¾åˆ°å¯¹åº”çš„ç­–ç•¥ç±»\n        final Pair<NettyRequestProcessor, ExecutorService> matched = this.processorTable.get(cmd.getCode());\n        //å¦‚æœæ²¡æœ‰æ‰¾åˆ°å°±ä½¿ç”¨é»˜è®¤çš„\n        final Pair<NettyRequestProcessor, ExecutorService> pair = \n                    null == matched ? this.defaultRequestProcessor : matched;\n        //æ‰§è¡Œç­–ç•¥\n        final RemotingCommand response = pair.getObject1().processRequest(ctx, cmd);\n        //çœç•¥å¤§éƒ¨åˆ†ä»£ç ......\n    }\n}\n```\n\nå¦‚æœæœ‰äº†æ–°çš„è¯·æ±‚æ¶ˆæ¯ç±»å‹ï¼ŒRocketMQä¹Ÿæ— éœ€ä¿®æ”¹ä¸šåŠ¡ä»£ç ï¼Œæ–°å¢ç­–ç•¥ç±»å¹¶å°†å…¶æ³¨å†Œè¿›æ¥å°±å¥½äº†ã€‚\n\n## å…«ã€ä»£ç†æ¨¡å¼\n\nä»£ç†æ¨¡å¼ï¼Œä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ç§ä»£ç†ä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚\n\nåœ¨ä¸€äº›å¼€æºæ¡†æ¶æˆ–ä¸­é—´ä»¶äº§å“ä¸­ï¼Œä»£ç†æ¨¡å¼ä¼šéå¸¸å¸¸è§ã€‚æˆ‘ä»¬ä½¿ç”¨çš„æ—¶å€™è¶Šç®€ä¾¿ï¼Œæ¡†æ¶åœ¨èƒŒåå¸®æˆ‘ä»¬åšçš„äº‹å°±å¯èƒ½è¶Šå¤æ‚ã€‚è¿™é‡Œé¢å¾€å¾€éƒ½ä½“ç°ç€ä»£ç†æ¨¡å¼çš„åº”ç”¨ï¼Œé¢‡æœ‰ç§»èŠ±æ¥æœ¨çš„å‘³é“ã€‚\n\n#### 1ã€Dubbo\n\nDubboä½œä¸ºä¸€ä¸ªRPCæ¡†æ¶ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„åŠŸèƒ½å°±æ˜¯ï¼š\n\n> æä¾›é«˜æ€§èƒ½çš„åŸºäºä»£ç†çš„è¿œç¨‹è°ƒç”¨èƒ½åŠ›ï¼ŒæœåŠ¡ä»¥æ¥å£ä¸ºç²’åº¦ï¼Œä¸ºå¼€å‘è€…å±è”½è¿œç¨‹è°ƒç”¨åº•å±‚ç»†èŠ‚ã€‚\n\nè¿™é‡Œæˆ‘ä»¬å…³æ³¨ä¸¤ä¸ªé‡ç‚¹ï¼š\n\n- é¢å‘æ¥å£ä»£ç†ï¼›\n- å±è”½è°ƒç”¨åº•å±‚ç»†èŠ‚ã€‚\n\næ¯”å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªåº“å­˜æœåŠ¡ï¼Œå®ƒæä¾›ä¸€ä¸ªæ‰£å‡åº“å­˜çš„æ¥å£ã€‚\n```\npublic interface StorageDubboService {\n    int decreaseStorage(StorageDTO storage);\n}\n```\n\nåœ¨åˆ«çš„æœåŠ¡é‡Œï¼Œéœ€è¦æ‰£å‡åº“å­˜çš„æ—¶å€™ï¼Œå°±ä¼šé€šè¿‡Dubboå¼•ç”¨è¿™ä¸ªæ¥å£ï¼Œä¹Ÿæ¯”è¾ƒç®€å•ã€‚\n```\n@Reference\nStorageDubboService storageDubboService;\n```\n\næˆ‘ä»¬ä½¿ç”¨èµ·æ¥å¾ˆç®€å•ï¼Œå¯ StorageDubboService åªæ˜¯ä¸€ä¸ªæ™®é€šçš„æœåŠ¡ç±»ï¼Œå¹¶ä¸å…·å¤‡è¿œç¨‹è°ƒç”¨çš„èƒ½åŠ›ã€‚\n\nDubboå°±æ˜¯ç»™è¿™äº›æœåŠ¡ç±»ï¼Œåˆ›å»ºäº†ä»£ç†ç±»ã€‚é€šè¿‡ReferenceBeanæ¥åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªä»£ç†å¯¹è±¡ã€‚\n\n```\npublic class ReferenceBean<T>{\n    @Override\n    public Object getObject() {\n        return get();\n    }\n    public synchronized T get() {\n        if (ref == null) {\n            init();\n        }\n        return ref;\n    }\n}\n```\nåœ¨æˆ‘ä»¬ä½¿ç”¨çš„æ—¶å€™ï¼Œå®åˆ™è°ƒç”¨çš„æ˜¯ä»£ç†å¯¹è±¡ï¼Œä»£ç†å¯¹è±¡å®Œæˆå¤æ‚çš„è¿œç¨‹è°ƒç”¨ã€‚æ¯”å¦‚è¿æ¥æ³¨å†Œä¸­å¿ƒã€è´Ÿè½½å‡è¡¡ã€é›†ç¾¤å®¹é”™ã€è¿æ¥æœåŠ¡å™¨å‘é€æ¶ˆæ¯ç­‰åŠŸèƒ½ã€‚\n\n#### 2ã€Mybatis \n\nè¿˜æœ‰ä¸€ä¸ªå…¸å‹çš„åº”ç”¨ï¼Œå°±æ˜¯æˆ‘ä»¬ç»å¸¸åœ¨ç”¨çš„Mybatisã€‚æˆ‘ä»¬åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œä¸€èˆ¬åªæ“ä½œMapperæ¥å£ï¼Œç„¶åMybatisä¼šæ‰¾åˆ°å¯¹åº”çš„SQLè¯­å¥æ¥æ‰§è¡Œã€‚\n```\npublic interface UserMapper {\t\n    List<User> getUserList();\n}\n```\n\nå¦‚ä¸Šä»£ç ï¼ŒUserMapperä¹Ÿåªæ˜¯ä¸€ä¸ªæ™®é€šçš„æ¥å£ï¼Œå®ƒæ˜¯æ€æ ·æœ€ç»ˆæ‰§è¡Œåˆ°æˆ‘ä»¬çš„SQLè¯­å¥çš„å‘¢ï¼Ÿ\n\nç­”æ¡ˆä¹Ÿæ˜¯ä»£ç†ã€‚å½“Mybatisæ‰«æåˆ°æˆ‘ä»¬å®šä¹‰çš„Mapperæ¥å£æ—¶ï¼Œä¼šå°†å…¶è®¾ç½®ä¸ºMapperFactoryBeanï¼Œå¹¶åˆ›å»ºè¿”å›ä¸€ä¸ªä»£ç†å¯¹è±¡ã€‚\n```\nprotected T newInstance(SqlSession sqlSession) {\n    final MapperProxy<T> mapperProxy = new MapperProxy<>(sqlSession, mapperInterface, methodCache);\n    return (T) Proxy.newProxyInstance(mapperInterface.getClassLoader(), new Class[] { mapperInterface }, mapperProxy);\n}\n```\n\nä»£ç†å¯¹è±¡å»é€šè¿‡è¯·æ±‚çš„æ–¹æ³•åæ‰¾åˆ°MappedStatementå¯¹è±¡ï¼Œè°ƒç”¨æ‰§è¡Œå™¨ï¼Œè§£æSqlSourceå¯¹è±¡æ¥ç”ŸæˆSQLï¼Œæ‰§è¡Œå¹¶è§£æè¿”å›ç»“æœç­‰ã€‚\n\nä»¥ä¸Šæ¡ˆä¾‹å…·ä½“çš„å®ç°è¿‡ç¨‹ï¼Œåœ¨è¿™é‡Œå°±ä¸å†æ·±å…¥ç»†èŠã€‚æœ‰å…´è¶£å¯èƒ½ç¿»é˜…ç¬”è€…å…¶ä»–æ–‡ç« ~\n\n\n## ä¹ã€è£…é¥°å™¨æ¨¡å¼\n\nè£…é¥°å™¨æ¨¡å¼ï¼Œåœ¨ä¸æ”¹å˜ç°æœ‰å¯¹è±¡ç»“æ„çš„æƒ…å†µä¸‹ï¼ŒåŠ¨æ€åœ°ç»™è¯¥å¯¹è±¡å¢åŠ ä¸€äº›èŒè´£ï¼ˆå³å¢åŠ å…¶é¢å¤–åŠŸèƒ½ï¼‰çš„æ¨¡å¼ï¼Œå®ƒå±äºå¯¹è±¡ç»“æ„å‹æ¨¡å¼ã€‚\n\nMybatisé‡Œçš„ç¼“å­˜è®¾è®¡ï¼Œå°±æ˜¯è£…é¥°å™¨æ¨¡å¼çš„å…¸å‹åº”ç”¨ã€‚\n\né¦–å…ˆï¼Œæˆ‘ä»¬çŸ¥é“ï¼ŒMyBatis æ‰§è¡Œå™¨æ˜¯ MyBatis è°ƒåº¦çš„æ ¸å¿ƒï¼Œå®ƒè´Ÿè´£SQLè¯­å¥çš„ç”Ÿæˆå’Œæ‰§è¡Œã€‚\n\nåœ¨åˆ›å»ºSqlSessionçš„æ—¶å€™ï¼Œä¼šåˆ›å»ºè¿™ä¸ªæ‰§è¡Œå™¨ï¼Œé»˜è®¤çš„æ‰§è¡Œå™¨æ˜¯SimpleExecutorã€‚\n\nä½†æ˜¯ä¸ºäº†ç»™æ‰§è¡Œå™¨å¢åŠ ç¼“å­˜çš„èŒè´£ï¼Œå°±å˜æˆäº†åœ¨SimpleExecutorä¸Šä¸€å±‚æ·»åŠ äº†CachingExecutorã€‚\n\nåœ¨CachingExecutorä¸­çš„å®é™…æ“ä½œè¿˜æ˜¯å§”æ‰˜ç»™SimpleExecutorå»æ‰§è¡Œï¼Œåªæ˜¯åœ¨æ‰§è¡Œå‰åå¢åŠ äº†ç¼“å­˜çš„æ“ä½œã€‚\n\né¦–å…ˆï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å®ƒçš„è£…é¥°è¿‡ç¨‹ã€‚\n```\npublic Executor newExecutor(Transaction transaction, ExecutorType executorType) {\n    //é»˜è®¤çš„æ‰§è¡Œå™¨\n    executorType = executorType == null ? defaultExecutorType : executorType;\n    executorType = executorType == null ? ExecutorType.SIMPLE : executorType;\n    Executor executor;\n    if (ExecutorType.BATCH == executorType) {\n        executor = new BatchExecutor(this, transaction);\n    } else if (ExecutorType.REUSE == executorType) {\n        executor = new ReuseExecutor(this, transaction);\n    } else {\n        executor = new SimpleExecutor(this, transaction);\n    }\n    //ä½¿ç”¨ç¼“å­˜æ‰§è¡Œå™¨æ¥è£…é¥°\n    if (cacheEnabled) {\n        executor = new CachingExecutor(executor);\n    }\n    executor = (Executor) interceptorChain.pluginAll(executor);\n    return executor;\n}\n```\n\nå½“SqlSessionæ‰§è¡Œæ–¹æ³•çš„æ—¶å€™ï¼Œåˆ™ä¼šå…ˆè°ƒç”¨åˆ°CachingExecutorï¼Œæˆ‘ä»¬æ¥çœ‹æŸ¥è¯¢æ–¹æ³•ã€‚\n```\npublic class CachingExecutor implements Executor {\n    @Override\n    public <E> List<E> query()throws SQLException {\n        Cache cache = ms.getCache();\n        if (cache != null) {\n            flushCacheIfRequired(ms);\n            if (ms.isUseCache() && resultHandler == null) {\n                List<E> list = (List<E>) tcm.getObject(cache, key);\n                if (list == null) {\n                    list = delegate.query(ms, parameterObject, rowBounds, resultHandler, key, boundSql);\n                    tcm.putObject(cache, key, list); // issue #578 and #116\n                }\n                return list;\n            }\n        }\n        return delegate.query(ms, parameterObject, rowBounds, resultHandler, key, boundSql);\n    }\n}\n```\nè¿™é‡Œçš„ä»£ç ï¼Œå¦‚æœå¼€å¯äº†ç¼“å­˜ï¼Œåˆ™å…ˆä»ç¼“å­˜ä¸­è·å–ç»“æœã€‚å¦‚æœæ²¡æœ‰å¼€å¯ç¼“å­˜æˆ–è€…ç¼“å­˜ä¸­æ²¡æœ‰ç»“æœï¼Œåˆ™å†è°ƒç”¨SimpleExecutoræ‰§è¡Œå™¨å»æ•°æ®åº“ä¸­æŸ¥è¯¢ã€‚\n\n\n## åã€è§‚å¯Ÿè€…æ¨¡å¼\n\nè§‚å¯Ÿè€…æ¨¡å¼ï¼Œå®šä¹‰å¯¹è±¡é—´çš„ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½å¾—åˆ°é€šçŸ¥å¹¶è¢«è‡ªåŠ¨æ›´æ–°ã€‚\n\nåœ¨Springæˆ–è€…SpringBooté¡¹ç›®ä¸­ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦åœ¨Springå®¹å™¨å¯åŠ¨å¹¶åŠ è½½å®Œä¹‹åï¼Œåšä¸€äº›ç³»ç»Ÿåˆå§‹åŒ–çš„äº‹æƒ…ã€‚è¿™æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥é…ç½®ä¸€ä¸ªè§‚å¯Ÿè€…ApplicationListenerï¼Œæ¥è¾¾åˆ°è¿™ä¸€ç›®çš„ã€‚è¿™å°±æ˜¯è§‚å¯Ÿè€…æ¨¡å¼çš„å®è·µã€‚\n```\n@Component\npublic class ApplicationStartup implements ApplicationListener<ContextRefreshedEvent> {\n    @Override\n    public void onApplicationEvent(ContextRefreshedEvent event) {\n        System.out.println(\"å¹²ä¸€äº›ç³»ç»Ÿåˆå§‹åŒ–çš„äº‹æƒ…....\");\n        ApplicationContext context = event.getApplicationContext();\n        String[] names = context.getBeanDefinitionNames();\n        for (String beanName:names){\n            System.out.println(\"----------\"+beanName+\"---------\");\n        }\n    }\n}\n```\n\né¦–å…ˆï¼Œæˆ‘ä»¬çŸ¥é“ï¼ŒApplicationContextæ˜¯ Spring ä¸­çš„æ ¸å¿ƒå®¹å™¨ã€‚\n```\npublic abstract class AbstractApplicationContext extends DefaultResourceLoader implements ConfigurableApplicationContext {\n\t\n    //è§‚å¯Ÿè€…å®¹å™¨\n    private final Set<ApplicationListener<?>> applicationListeners = new LinkedHashSet<>();\n    //è¢«è§‚å¯Ÿè€…\n    private ApplicationEventMulticaster applicationEventMulticaster;\n}\n```\n\nåœ¨ApplicationContextå®¹å™¨åˆ·æ–°çš„æ—¶å€™ï¼Œä¼šåˆå§‹åŒ–ä¸€ä¸ªè¢«è§‚å¯Ÿè€…ï¼Œå¹¶æ³¨å†Œåˆ°Springå®¹å™¨ä¸­ã€‚\n\nç„¶åï¼Œæ³¨å†Œå„ç§è§‚å¯Ÿè€…åˆ°è¢«è§‚å¯Ÿè€…ä¸­ï¼Œå½¢æˆä¸€å¯¹å¤šçš„ä¾èµ–ã€‚\n```\npublic abstract class AbstractApplicationContext{\n\t\n    protected void registerListeners() {\n        for (ApplicationListener<?> listener : getApplicationListeners()) {\n            getApplicationEventMulticaster().addApplicationListener(listener);\n        }\n        String[] listenerBeanNames = getBeanNamesForType(ApplicationListener.class, true, false);\n        for (String listenerBeanName : listenerBeanNames) {\n            getApplicationEventMulticaster().addApplicationListenerBean(listenerBeanName);\n        }\n        Set<ApplicationEvent> earlyEventsToProcess = this.earlyApplicationEvents;\n        this.earlyApplicationEvents = null;\n        if (earlyEventsToProcess != null) {\n            for (ApplicationEvent earlyEvent : earlyEventsToProcess) {\n                getApplicationEventMulticaster().multicastEvent(earlyEvent);\n            }\n        }\n    }\n}\n```\nè¿™æ—¶å€™ï¼Œæˆ‘ä»¬è‡ªå®šä¹‰çš„è§‚å¯Ÿè€…å¯¹è±¡ä¹Ÿè¢«æ³¨å†Œåˆ°äº†applicationEventMulticasteré‡Œé¢ã€‚\n\næœ€åï¼Œå½“ApplicationContextå®Œæˆåˆ·æ–°åï¼Œåˆ™å‘å¸ƒContextRefreshedEventäº‹ä»¶ã€‚\n```\nprotected void finishRefresh() {\n    publishEvent(new ContextRefreshedEvent(this));\n}\n```\n\né€šçŸ¥è§‚å¯Ÿè€…ï¼Œè°ƒç”¨ApplicationListener.onApplicationEvent()ã€‚\n```\nprivate void doInvokeListener(ApplicationListener listener, ApplicationEvent event) {\n    listener.onApplicationEvent(event);\n}\n```\n\næ¥ä¸‹æ¥æˆ‘ä»¬å†çœ‹çœ‹åœ¨Dubboæ˜¯å¦‚ä½•åº”ç”¨è¿™ä¸€æœºåˆ¶çš„ã€‚\n\nDubboæœåŠ¡å¯¼å‡ºè¿‡ç¨‹å§‹äº Spring å®¹å™¨å‘å¸ƒåˆ·æ–°äº‹ä»¶ï¼ŒDubbo åœ¨æ¥æ”¶åˆ°äº‹ä»¶åï¼Œä¼šç«‹å³æ‰§è¡ŒæœåŠ¡å¯¼å‡ºé€»è¾‘ã€‚\n```\npublic class ServiceBean<T> extends ServiceConfig<T> implements InitializingBean, DisposableBean,\n        ApplicationContextAware, ApplicationListener<ContextRefreshedEvent>, BeanNameAware,\n        ApplicationEventPublisherAware {\n\n    @Override\n    public void onApplicationEvent(ContextRefreshedEvent event) {\n        if (!isExported() && !isUnexported()) {\n            if (logger.isInfoEnabled()) {\n                logger.info(\"The service ready on spring started. service: \" + getInterface());\n            }\n            export();\n        }\n    }\n}\n```\n\næˆ‘ä»¬çœ‹åˆ°ï¼ŒDubboä¸­çš„ServiceBeanä¹Ÿå®ç°äº† ApplicationListener æ¥å£ï¼Œåœ¨ Spring å®¹å™¨å‘å¸ƒåˆ·æ–°äº‹ä»¶ä¹‹åå°±ä¼šæ‰§è¡Œå¯¼å‡ºæ–¹æ³•ã€‚æˆ‘ä»¬é‡ç‚¹å…³æ³¨ï¼Œåœ¨Dubboæ‰§è¡Œå®Œå¯¼å‡ºä¹‹åï¼Œå®ƒä¹Ÿå‘å¸ƒäº†ä¸€ä¸ªäº‹ä»¶ã€‚\n```\npublic class ServiceBean<T>{\n\t\n    public void export() {\n        super.export();\n        publishExportEvent();\n    }\n    private void publishExportEvent() {\n        ServiceBeanExportedEvent exportEvent = new ServiceBeanExportedEvent(this);\n        applicationEventPublisher.publishEvent(exportEvent);\n    }\n}\n```\n\nServiceBeanExportedEventï¼ŒæœåŠ¡å¯¼å‡ºäº‹ä»¶ï¼Œéœ€è¦ç»§æ‰¿Springä¸­çš„äº‹ä»¶å¯¹è±¡ApplicationEventã€‚\n```\npublic class ServiceBeanExportedEvent extends ApplicationEvent {\n    public ServiceBeanExportedEvent(ServiceBean serviceBean) {\n        super(serviceBean);\n    }\n    public ServiceBean getServiceBean() {\n        return (ServiceBean) super.getSource();\n    }\n}\n```\n\nç„¶åæˆ‘ä»¬è‡ªå®šä¹‰ä¸€ä¸ªApplicationListenerï¼Œä¹Ÿå°±æ˜¯è§‚å¯Ÿè€…ï¼Œå°±å¯ä»¥ç›‘å¬åˆ°DubboæœåŠ¡æ¥å£å¯¼å‡ºäº‹ä»¶äº†ã€‚\n```\n@Component\npublic class ServiceBeanListener implements ApplicationListener<ServiceBeanExportedEvent> {\n    @Override\n    public void onApplicationEvent(ServiceBeanExportedEvent event) {\n        ServiceBean serviceBean = event.getServiceBean();\n        String beanName = serviceBean.getBeanName();\n        Service service = serviceBean.getService();\n        System.out.println(beanName+\":\"+service);\n    }\n}\n```\n\n\n\n## åä¸€ã€å‘½ä»¤æ¨¡å¼\n\nå‘½ä»¤æ¨¡å¼æ˜¯ä¸€ç§è¡Œä¸ºè®¾è®¡æ¨¡å¼ï¼Œå®ƒå¯å°†è¯·æ±‚è½¬æ¢ä¸ºä¸€ä¸ªåŒ…å«ä¸è¯·æ±‚ç›¸å…³çš„æ‰€æœ‰ä¿¡æ¯çš„ç‹¬ç«‹å¯¹è±¡ã€‚è¯¥è½¬æ¢è®©ä½ èƒ½æ ¹æ®ä¸åŒçš„è¯·æ±‚å°†æ–¹æ³•å‚æ•°åŒ–ã€å»¶è¿Ÿè¯·æ±‚æ‰§è¡Œæˆ–å°†å…¶æ”¾å…¥é˜Ÿåˆ—ä¸­ï¼Œä¸”èƒ½å®ç°å¯æ’¤é”€æ“ä½œã€‚\n\nHystrixæ˜¯Netflixå¼€æºçš„ä¸€æ¬¾å®¹é”™æ¡†æ¶ï¼Œå…·æœ‰è‡ªæˆ‘ä¿æŠ¤èƒ½åŠ›ã€‚å¯ä»¥é˜»æ­¢æ•…éšœçš„è¿é”ååº”ï¼Œå¿«é€Ÿå¤±è´¥å’Œä¼˜é›…é™çº§ã€‚\n\nå®ƒç”¨ä¸€ä¸ªHystrixCommandæˆ–è€…HystrixObservableCommandåŒ…è£…æ‰€æœ‰å¯¹å¤–éƒ¨ç³»ç»Ÿ/ä¾èµ–çš„è°ƒç”¨ï¼Œæ¯ä¸ªå‘½ä»¤åœ¨å•ç‹¬çº¿ç¨‹ä¸­/ä¿¡å·æˆæƒä¸‹æ‰§è¡Œã€‚è¿™æ­£æ˜¯å‘½ä»¤æ¨¡å¼çš„å…¸å‹åº”ç”¨ã€‚\n\næˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªHystrixåº”ç”¨çš„ä¾‹å­ã€‚\n\né¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªå…·ä½“çš„å‘½ä»¤ç±»ï¼Œé€šè¿‡æ„é€ å‡½æ•°ä¼ é€’æ¥æ”¶è€…å¯¹è±¡ã€‚\n```\npublic class OrderServiceHystrixCommand extends HystrixCommand<Object> {\n\t\n\t//æ¥æ”¶è€…ï¼Œå¤„ç†ä¸šåŠ¡é€»è¾‘\n    private OrderService orderService;\n\n    public OrderServiceHystrixCommand(OrderService orderService) {\n        super(setter());\n        this.orderService = orderService;\n    }\n\t//è®¾ç½®Hystrixç›¸å…³å‚æ•°\n    public static Setter setter() {\n        HystrixCommandGroupKey groupKey = HystrixCommandGroupKey.Factory.asKey(\"orderGroup\");\n        HystrixCommandKey commandKey = HystrixCommandKey.Factory.asKey(\"orderService\");\n        HystrixThreadPoolProperties.Setter threadPoolProperties = HystrixThreadPoolProperties.Setter().withCoreSize(1)\n                .withQueueSizeRejectionThreshold(1);\n        HystrixCommandProperties.Setter commandProperties = HystrixCommandProperties.Setter();\n        return Setter.withGroupKey(groupKey)\n                .andCommandKey(commandKey)\n                .andThreadPoolPropertiesDefaults(threadPoolProperties)\n                .andCommandPropertiesDefaults(commandProperties);\n\n    }\n    @Override\n    protected Object run() throws InterruptedException {\n        Thread.sleep(500);\n        return orderService.orders();\n    }\n    @Override\n    protected Object getFallback() {\n        System.out.println(\"-------------------------------\");\n        return new ArrayList();\n    }\n}\n```\n\nç„¶åï¼Œåœ¨å®¢æˆ·ç«¯è°ƒç”¨çš„æ—¶å€™ï¼Œåˆ›å»ºè¿™ä¸ªå‘½ä»¤ç±»å¹¶æ‰§è¡Œå³å¯ã€‚\n```\n@RestController\npublic class OrderController {\n\n    @Autowired\n    OrderService orderService;\n\n    @RequestMapping(\"/orders\")\n\tpublic Object orders(){\n\t\tOrderServiceHystrixCommand command = new OrderServiceHystrixCommand(orderService);\n\t\treturn command.execute();\n\t}\n}\n```\nçœ‹ä¸Šå»ï¼Œå‘½ä»¤æ¨¡å¼å’Œç­–ç•¥æ¨¡å¼æœ‰äº›ç›¸åƒï¼Œå®ƒä»¬éƒ½å¯ä»¥é€šè¿‡æŸäº›è¡Œä¸ºæ¥å‚æ•°åŒ–å¯¹è±¡ã€‚ä½†å®ƒä»¬çš„æ€æƒ³æœ‰å¾ˆå¤§åŒºåˆ«ã€‚\n\næ¯”å¦‚è¯´æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‘½ä»¤æ¥å°†ä»»ä½•æ“ä½œè½¬æ¢ä¸ºå¯¹è±¡ï¼Œæ“ä½œçš„å‚æ•°å°†æˆä¸ºå¯¹è±¡çš„æˆå‘˜å˜é‡ã€‚åŒæ ·çš„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å¯¹è¯·æ±‚åšä»»ä½•æ“ä½œï¼Œæ¯”å¦‚å»¶è¿Ÿæ‰§è¡Œï¼Œè®°å½•æ—¥å¿—ï¼Œä¿å­˜å†å²å‘½ä»¤ç­‰ã€‚\n\nè€Œç­–ç•¥æ¨¡å¼ä¾§é‡ç‚¹åœ¨äºæè¿°å®ŒæˆæŸä»¶äº‹çš„ä¸åŒæ–¹å¼ï¼Œ è®©ä½ èƒ½å¤Ÿåœ¨åŒä¸€ä¸ªä¸Šä¸‹æ–‡ç±»ä¸­åˆ‡æ¢ç®—æ³•ã€‚\n\n\n## æ€»ç»“\n\næœ¬æ–‡é‡ç‚¹ä»‹ç»äº†è®¾è®¡æ¨¡å¼åœ¨ä¸åŒæ¡†æ¶ä¸­çš„å®ç°ï¼Œä»¥æœŸè®©å¤§å®¶æ›´å¥½åœ°ç†è§£æ¨¡å¼èƒŒåçš„æ€æƒ³å’Œåº”ç”¨åœºæ™¯ã€‚æ¬¢è¿æœ‰ä¸åŒæƒ³æ³•çš„æœ‹å‹ï¼Œç•™è¨€æ¢è®¨~\n\n\n**åŸåˆ›ä¸æ˜“ï¼Œå®¢å®˜ä»¬ç‚¹ä¸ªèµå†èµ°å˜›ï¼Œè¿™å°†æ˜¯ç¬”è€…æŒç»­å†™ä½œçš„åŠ¨åŠ›~**\n\n\n\n", "user_name": "æ¸…å¹½ä¹‹åœ°", "description": "å…¬ä¼—å·ï¼šæ¸…å¹½ä¹‹åœ°çš„åšå®¢", "got_view_count": 101075, "category_name": "åç«¯", "ctime": 1457483880}
{"tag_name": "HTTP", "concern_user_count": 151675, "user_id": "4265760848101096", "title": "ä¸ºä»€ä¹ˆcookieä¼šæœ‰sameSiteå±æ€§?-çœŸå®æ¡ˆä¾‹è§£é‡ŠCSRFçš„ä¸‰ç§æ”»å‡»æ–¹å¼", "mark_content": "<section id=\"nice\" data-tool=\"mdniceç¼–è¾‘å™¨\" data-website=\"https://www.mdnice.com\" style=\"color: black; line-height: 1.6; word-spacing: 0px; letter-spacing: 0px; word-break: break-word; word-wrap: break-word; text-align: left; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, 'PingFang SC', Cambria, Cochin, Georgia, Times, 'Times New Roman', serif; font-size: 14px; padding: 10px;\"><p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">ä½œä¸ºå§Šå¦¹ç¯‡ï¼Œå»ºè®®å…ˆé£Ÿç”¨<a href=\"https://juejin.im/post/6857698580817182728\" style=\"text-decoration: none; color: #1e6bb8; word-wrap: break-word; font-weight: bold; border-bottom: 1px solid #1e6bb8;\">ä¸€ä¸ªçœŸå®ä¾‹å­äº†è§£XSSæ”»å‡»</a>ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">åé¢ä¼šè¿™æ€»ç»“ä¸¤ç§æ”»å‡»å’ŒCookieçš„samesiteã€httponlyå±æ€§çš„å…³ç³»ã€‚</p>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-size: 22px; text-align: center; position: relative; font-weight: bold; color: black; line-height: 1.1em; padding-top: 12px; padding-bottom: 12px; margin: 70px 30px 30px; border: 1px solid #000;\"><span style=\"float: left; display: block; width: 90%; border-top: 1px solid #000; height: 1px; line-height: 1px; margin-left: -5px; margin-top: -17px;\"> </span><span class=\"prefix\" style=\"display: block; width: 3px; margin: 0 0 0 5%; height: 3px; line-height: 3px; overflow: hidden; background-color: #000; box-shadow: 3px 0 #000,\n    0 3px #000,\n    -3px 0 #000,\n    0 -3px #000;\"></span><span class=\"content\" style=\"display: block; -webkit-box-reflect: below 0em -webkit-gradient(linear,left top,left bottom, from(rgba(0,0,0,0)),to(rgba(255,255,255,0.1)));\">ä»€ä¹ˆæ˜¯CSRFæ”»å‡»ï¼Ÿ</span><span class=\"suffix\" style=\"display: block; width: 3px; margin: 0 0 0 95%; height: 3px; line-height: 3px; overflow: hidden; background-color: #000; box-shadow: 3px 0 #000,\n    0 3px #000,\n    -3px 0 #000,\n    0 -3px #000;\"></span><span style=\"float: right; display: block; width: 90%; border-bottom: 1px solid #000; height: 1px; line-height: 1px; margin-right: -5px; margin-top: 16px;\"> </span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">ç½‘ä¸Šå†²æµªè¿™äº›å¹´ï¼Œç»å¸¸èƒ½å¬åˆ°çš„ä¸€å¥è¯ï¼šâ€œåˆ«ç‚¹é‚£ä¸ªé“¾æ¥ï¼Œå°å¿ƒæœ‰ç—…æ¯’ï¼â€ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæˆ‘å°±ç‚¹å‡»ä¸€ä¸ªé“¾æ¥æ€ä¹ˆå°±èƒ½æŸ“ä¸Šç—…æ¯’äº†å‘¢ï¼Ÿè¿™ä¸ªâ€˜ç—…æ¯’â€™æ˜¯æ€æ ·ç›—èµ°æˆ‘çš„è´¦å·çš„ï¼Ÿ</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">CSRF è‹±æ–‡å…¨ç§°æ˜¯ Cross-site request forgeryï¼Œæ‰€ä»¥åˆç§°ä¸ºâ€œè·¨ç«™è¯·æ±‚ä¼ªé€ â€ï¼Œæ˜¯æŒ‡é»‘å®¢å¼•è¯±ç”¨æˆ·æ‰“å¼€é»‘å®¢çš„ç½‘ç«™ï¼Œåœ¨é»‘å®¢çš„ç½‘ç«™ä¸­ï¼Œåˆ©ç”¨ç”¨æˆ·çš„ç™»å½•çŠ¶æ€å‘èµ·çš„è·¨ç«™è¯·æ±‚ã€‚ç®€å•æ¥è®²ï¼ŒCSRF æ”»å‡»å°±æ˜¯é»‘å®¢åˆ©ç”¨äº†ç”¨æˆ·çš„ç™»å½•çŠ¶æ€ï¼Œå¹¶é€šè¿‡ç¬¬ä¸‰æ–¹çš„ç«™ç‚¹æ¥åšä¸€äº›åäº‹ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">ä¸€ä¸ªè¿œå¤ä¾‹å­ï¼š</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">é¥è¿œçš„2007å¹´ï¼ŒDavid ä½¿ç”¨æµè§ˆå™¨æ— æ‰“å¼€äº† Gmail ä¸­çš„ä¸€ä»½é‚®ä»¶ï¼Œå¹¶ç‚¹å‡»äº†è¯¥é‚®ä»¶ä¸­çš„ä¸€ä¸ªé“¾æ¥ã€‚è¿‡äº†å‡ å¤©ï¼ŒDavid å°±å‘ç°ä»–çš„åŸŸåè¢«ç›—äº†ã€‚è™½ç„¶ David æœ€åé€šè¿‡èµ°å…³ç³»ï¼ˆç½‘ä¸Šå†²æµªè®¤è¯†çš„å…³ç³»ï¼‰ï¼Œæ‹¿å›äº†åŸŸåã€‚è¢«ç›—èµ°åŸŸåï¼Œå°±æ˜¯å› ä¸ºæ— æ„é—´ç‚¹å‡»çš„é‚£ä¸ªé“¾æ¥ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">é‚£ä¹ˆé»‘å®¢æ˜¯æ€ä¹ˆç›—èµ° Davidçš„åŸŸåçš„å‘¢ï¼Ÿ</p>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6c906bd5affa469fab9b6443cafca2b2~tplv-k3u1fbpfcp-zoom-1.image\" alt=\"ç›—å–åŸŸåçš„æµç¨‹å›¾\" style=\"display: block; margin: 0 auto; max-width: 100%; box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px; border-radius: 4px; margin-top: 10px;\"><figcaption style=\"margin-top: 5px; text-align: center; color: #888; font-size: 12px;\">ç›—å–åŸŸåçš„æµç¨‹å›¾</figcaption></figure>\n<ol data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: decimal;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">é¦–å…ˆ David ä½¿ç”¨æµè§ˆå™¨å‘èµ·ç™»å½• Gmailï¼Œç„¶å Gmail æœåŠ¡å™¨è¿”å›ä¸€äº›ç™»å½•çŠ¶æ€Cookieã€Session ç­‰ç»™æµè§ˆå™¨ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">æ¥ç€é»‘å®¢å¼•è¯± David å»æ‰“å¼€ä»–çš„é“¾æ¥ï¼Œç„¶ååœ¨ xxx.com é¡µé¢ä¸­ï¼Œé»‘å®¢ç¼–å†™å¥½äº†ä¸€ä¸ªé‚®ä»¶è¿‡æ»¤å™¨çš„è¯·æ±‚å»è®¿é—®Gmailçš„æ¥å£ï¼Œè®¾ç½®å¥½äº†æ–°çš„é‚®ä»¶è¿‡æ»¤åŠŸèƒ½ï¼Œå› ä¸ºåœ¨ç›¸åŒæµè§ˆå™¨ä¸­ï¼Œè¯·æ±‚å¯ä»¥æ‹¿åˆ°æœåŠ¡å™¨è¿”å›Gmailçš„ä¸€äº›ç™»å½•çŠ¶æ€Cookieç­‰é‰´æƒä¿¡æ¯ï¼Œå¹¶é¡ºåˆ©è®¾ç½®å¥½æ‰€æœ‰çš„é‚®ä»¶éƒ½è½¬å‘åˆ°é»‘å®¢çš„é‚®ç®±ä¸­ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">é»‘å®¢é€šè¿‡é‚®ç®±æ‰¾å›åŸŸåè´¦æˆ·çš„å¯†ç ï¼Œç„¶åå°†åŸŸåè½¬å‡ºåˆ°é»‘å®¢çš„è´¦æˆ·äº†ã€‚</section></li></ol>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">ä»¥ä¸Šå°±æ˜¯ David çš„åŸŸåè¢«ç›—äº‹ä»¶ä¹‹è°œçš„çœŸç›¸ï¼Œå…¶ä¸­å‰ä¸¤æ­¥è¿‡ç¨‹å°±æ˜¯ CSRF æ”»å‡»ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">David åœ¨è¦å›äº†ä»–çš„åŸŸåä¹‹åï¼Œä¹Ÿå°†æ•´ä¸ªæ”»å‡»è¿‡ç¨‹åˆ†äº«åˆ°ä»–çš„ç«™ç‚¹ä¸Šäº†ï¼Œå¦‚æœä½ æ„Ÿå…´è¶£çš„è¯ï¼Œå¯ä»¥å‚è€ƒ<a href=\"https://www.davidairey.com/google-gmail-security-hijack\" style=\"text-decoration: none; color: #1e6bb8; word-wrap: break-word; font-weight: bold; border-bottom: 1px solid #1e6bb8;\">è¯¥é“¾æ¥</a>ï¼ˆæ”¾å¿ƒè¿™ä¸ªé“¾æ¥ä¸ä¼šå¯¹ä½ è¿›è¡ŒCSRFæ”»å‡» ç‹—å¤´ä¿å‘½ï¼‰ã€‚</p>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-size: 22px; text-align: center; position: relative; font-weight: bold; color: black; line-height: 1.1em; padding-top: 12px; padding-bottom: 12px; margin: 70px 30px 30px; border: 1px solid #000;\"><span style=\"float: left; display: block; width: 90%; border-top: 1px solid #000; height: 1px; line-height: 1px; margin-left: -5px; margin-top: -17px;\"> </span><span class=\"prefix\" style=\"display: block; width: 3px; margin: 0 0 0 5%; height: 3px; line-height: 3px; overflow: hidden; background-color: #000; box-shadow: 3px 0 #000,\n    0 3px #000,\n    -3px 0 #000,\n    0 -3px #000;\"></span><span class=\"content\" style=\"display: block; -webkit-box-reflect: below 0em -webkit-gradient(linear,left top,left bottom, from(rgba(0,0,0,0)),to(rgba(255,255,255,0.1)));\">å¦‚ä½•è¿›è¡ŒCSRFæ”»å‡»ï¼Ÿ</span><span class=\"suffix\" style=\"display: block; width: 3px; margin: 0 0 0 95%; height: 3px; line-height: 3px; overflow: hidden; background-color: #000; box-shadow: 3px 0 #000,\n    0 3px #000,\n    -3px 0 #000,\n    0 -3px #000;\"></span><span style=\"float: right; display: block; width: 90%; border-bottom: 1px solid #000; height: 1px; line-height: 1px; margin-right: -5px; margin-top: 16px;\"> </span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">æœ‰ä¸‰ç§æ–¹å¼å¯ä»¥è¿›è¡ŒCSRFæ”»å‡»ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">å‡è®¾\nç°åœ¨æœ‰ä¸€ä¸ªé“¶è¡Œè½¬è´¦æ¥å£</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px; max-width: 100%; border-radius: 4px; margin: 10px auto 0 auto;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #fafafa; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #383a42; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #fafafa; border-radius: 5px;\"><span class=\"hljs-comment\" style=\"color: #a0a1a7; font-style: italic; line-height: 26px;\">#åŒæ—¶æ”¯æŒPOSTå’ŒGet</span><br><span class=\"hljs-comment\" style=\"color: #a0a1a7; font-style: italic; line-height: 26px;\">#æ¥å£&nbsp;</span><br>https://www.bank.com/sendmoney<br><span class=\"hljs-comment\" style=\"color: #a0a1a7; font-style: italic; line-height: 26px;\">#å‚æ•°</span><br><span class=\"hljs-comment\" style=\"color: #a0a1a7; font-style: italic; line-height: 26px;\">##ç›®æ ‡ç”¨æˆ·</span><br>user<br><span class=\"hljs-comment\" style=\"color: #a0a1a7; font-style: italic; line-height: 26px;\">##ç›®æ ‡é‡‘é¢</span><br>number<br></code></pre>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; font-weight: bold; background-color: #000; color: #fff; padding: 2px 10px; width: fit-content; font-size: 17px; margin: 60px auto 10px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">1.è‡ªåŠ¨å‘èµ·GETè¯·æ±‚</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">é»‘å®¢æœ€å®¹æ˜“çš„å°±æ˜¯åœ¨ç”¨æˆ·æ— å¯Ÿè§‰çš„æƒ…å†µä¸‹å‘é€GETè¯·æ±‚ã€‚</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px; max-width: 100%; border-radius: 4px; margin: 10px auto 0 auto;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #fafafa; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #383a42; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #fafafa; border-radius: 5px;\"><span class=\"hljs-meta\" style=\"color: #4078f2; line-height: 26px;\">&lt;!DOCTYPE&nbsp;html&gt;</span><br><span class=\"hljs-tag\" style=\"line-height: 26px;\">&lt;<span class=\"hljs-name\" style=\"color: #e45649; line-height: 26px;\">html</span>&gt;</span><br>&nbsp;&nbsp;<span class=\"hljs-tag\" style=\"line-height: 26px;\">&lt;<span class=\"hljs-name\" style=\"color: #e45649; line-height: 26px;\">body</span>&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-tag\" style=\"line-height: 26px;\">&lt;<span class=\"hljs-name\" style=\"color: #e45649; line-height: 26px;\">h1</span>&gt;</span>é»‘å®¢çš„ç«™ç‚¹ï¼šCSRFæ”»å‡»æ¼”ç¤º<span class=\"hljs-tag\" style=\"line-height: 26px;\">&lt;/<span class=\"hljs-name\" style=\"color: #e45649; line-height: 26px;\">h1</span>&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-tag\" style=\"line-height: 26px;\">&lt;<span class=\"hljs-name\" style=\"color: #e45649; line-height: 26px;\">img</span>&nbsp;<span class=\"hljs-attr\" style=\"color: #986801; line-height: 26px;\">src</span>=<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">\"https://www.bank.com/sendmoney?user=hacker&amp;number=100\"</span>&gt;</span><br>&nbsp;&nbsp;<span class=\"hljs-tag\" style=\"line-height: 26px;\">&lt;/<span class=\"hljs-name\" style=\"color: #e45649; line-height: 26px;\">body</span>&gt;</span><br><span class=\"hljs-tag\" style=\"line-height: 26px;\">&lt;/<span class=\"hljs-name\" style=\"color: #e45649; line-height: 26px;\">html</span>&gt;</span><br></code></pre>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">å½“ç”¨æˆ·è®¿é—®é“¾æ¥æ—¶ï¼Œè½¬è´¦çš„è¯·æ±‚æ¥å£éšè—åœ¨ img æ ‡ç­¾å†…ï¼Œæµè§ˆå™¨ä»¥ä¸ºè¿™æ˜¯ä¸€å¼ å›¾ç‰‡èµ„æºã€‚å‘é€è¯·æ±‚ï¼ŒæœåŠ¡å™¨å°±ä¼šè®¤ä¸ºè¯¥è¯·æ±‚æ˜¯ä¸€ä¸ªè½¬è´¦è¯·æ±‚ï¼Œäºæ˜¯ç”¨æˆ·è´¦æˆ·ä¸Šçš„ 100 å—å°±è¢«è½¬ç§»åˆ°é»‘å®¢çš„è´¦æˆ·ä¸Šå»äº†ã€‚</p>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; font-weight: bold; background-color: #000; color: #fff; padding: 2px 10px; width: fit-content; font-size: 17px; margin: 60px auto 10px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">2.è‡ªåŠ¨å‘èµ· POST è¯·æ±‚</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">å¯¹äºæ¥å£ç±»å‹ä½¿ç”¨postçš„æ¥å£ï¼Œåœ¨ç«™ç‚¹ä¸Šä¼ªé€  POST è¯·æ±‚ï¼Œå½“ç”¨æˆ·ç‚¹å¼€é“¾æ¥åï¼Œä¼šè‡ªåŠ¨æäº¤ POST è¯·æ±‚ã€‚</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px; max-width: 100%; border-radius: 4px; margin: 10px auto 0 auto;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #fafafa; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #383a42; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #fafafa; border-radius: 5px;\"><span class=\"hljs-meta\" style=\"color: #4078f2; line-height: 26px;\">&lt;!DOCTYPE&nbsp;html&gt;</span><br><span class=\"hljs-tag\" style=\"line-height: 26px;\">&lt;<span class=\"hljs-name\" style=\"color: #e45649; line-height: 26px;\">html</span>&gt;</span><br><span class=\"hljs-tag\" style=\"line-height: 26px;\">&lt;<span class=\"hljs-name\" style=\"color: #e45649; line-height: 26px;\">body</span>&gt;</span><br>&nbsp;&nbsp;<span class=\"hljs-tag\" style=\"line-height: 26px;\">&lt;<span class=\"hljs-name\" style=\"color: #e45649; line-height: 26px;\">h1</span>&gt;</span>é»‘å®¢çš„ç«™ç‚¹ï¼šCSRFæ”»å‡»æ¼”ç¤º<span class=\"hljs-tag\" style=\"line-height: 26px;\">&lt;/<span class=\"hljs-name\" style=\"color: #e45649; line-height: 26px;\">h1</span>&gt;</span><br>&nbsp;&nbsp;<span class=\"hljs-tag\" style=\"line-height: 26px;\">&lt;<span class=\"hljs-name\" style=\"color: #e45649; line-height: 26px;\">form</span>&nbsp;<span class=\"hljs-attr\" style=\"color: #986801; line-height: 26px;\">id</span>=<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">'hacker-form'</span>&nbsp;<span class=\"hljs-attr\" style=\"color: #986801; line-height: 26px;\">action</span>=<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">\"https://time.geekbang.org/sendcoin\"</span>&nbsp;<span class=\"hljs-attr\" style=\"color: #986801; line-height: 26px;\">method</span>=<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">POST</span>&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-tag\" style=\"line-height: 26px;\">&lt;<span class=\"hljs-name\" style=\"color: #e45649; line-height: 26px;\">input</span>&nbsp;<span class=\"hljs-attr\" style=\"color: #986801; line-height: 26px;\">type</span>=<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">\"hidden\"</span>&nbsp;<span class=\"hljs-attr\" style=\"color: #986801; line-height: 26px;\">name</span>=<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">\"user\"</span>&nbsp;<span class=\"hljs-attr\" style=\"color: #986801; line-height: 26px;\">value</span>=<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">\"hacker\"</span>&nbsp;/&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-tag\" style=\"line-height: 26px;\">&lt;<span class=\"hljs-name\" style=\"color: #e45649; line-height: 26px;\">input</span>&nbsp;<span class=\"hljs-attr\" style=\"color: #986801; line-height: 26px;\">type</span>=<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">\"hidden\"</span>&nbsp;<span class=\"hljs-attr\" style=\"color: #986801; line-height: 26px;\">name</span>=<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">\"number\"</span>&nbsp;<span class=\"hljs-attr\" style=\"color: #986801; line-height: 26px;\">value</span>=<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">\"100\"</span>&nbsp;/&gt;</span><br>&nbsp;&nbsp;<span class=\"hljs-tag\" style=\"line-height: 26px;\">&lt;/<span class=\"hljs-name\" style=\"color: #e45649; line-height: 26px;\">form</span>&gt;</span><br>&nbsp;&nbsp;<span class=\"hljs-tag\" style=\"line-height: 26px;\">&lt;<span class=\"hljs-name\" style=\"color: #e45649; line-height: 26px;\">script</span>&gt;</span><span class=\"javascript\" style=\"line-height: 26px;\">&nbsp;<span class=\"hljs-built_in\" style=\"color: #c18401; line-height: 26px;\">document</span>.getElementById(<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">'hacker-form'</span>).submit();&nbsp;</span><span class=\"hljs-tag\" style=\"line-height: 26px;\">&lt;/<span class=\"hljs-name\" style=\"color: #e45649; line-height: 26px;\">script</span>&gt;</span><br><span class=\"hljs-tag\" style=\"line-height: 26px;\">&lt;/<span class=\"hljs-name\" style=\"color: #e45649; line-height: 26px;\">body</span>&gt;</span><br><span class=\"hljs-tag\" style=\"line-height: 26px;\">&lt;/<span class=\"hljs-name\" style=\"color: #e45649; line-height: 26px;\">html</span>&gt;</span><br></code></pre>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; font-weight: bold; background-color: #000; color: #fff; padding: 2px 10px; width: fit-content; font-size: 17px; margin: 60px auto 10px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">3.è¯±éª—é“¾æ¥</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">è¿™ç§å¸¸ç”¨äºé‚®ç®±çš„é‚®ä»¶æˆ–è€…è®ºå›ä¸Šï¼Œä¼šæ•…æ„å¼•è¯±ç”¨æˆ·å»ç‚¹å‡»é“¾æ¥ã€‚</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px; max-width: 100%; border-radius: 4px; margin: 10px auto 0 auto;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #fafafa; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #383a42; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #fafafa; border-radius: 5px;\"><span class=\"hljs-tag\" style=\"line-height: 26px;\">&lt;<span class=\"hljs-name\" style=\"color: #e45649; line-height: 26px;\">div</span>&gt;</span><br>&nbsp;&nbsp;<span class=\"hljs-tag\" style=\"line-height: 26px;\">&lt;<span class=\"hljs-name\" style=\"color: #e45649; line-height: 26px;\">img</span>&nbsp;<span class=\"hljs-attr\" style=\"color: #986801; line-height: 26px;\">width</span>=<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">150</span>&nbsp;<span class=\"hljs-attr\" style=\"color: #986801; line-height: 26px;\">src</span>=<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">http://images.xuejuzi.cn/1612/1_161230185104_1.jpg</span>&gt;</span>&nbsp;<span class=\"hljs-tag\" style=\"line-height: 26px;\">&lt;/<span class=\"hljs-name\" style=\"color: #e45649; line-height: 26px;\">img</span>&gt;</span>&nbsp;<span class=\"hljs-tag\" style=\"line-height: 26px;\">&lt;/<span class=\"hljs-name\" style=\"color: #e45649; line-height: 26px;\">div</span>&gt;</span>&nbsp;<span class=\"hljs-tag\" style=\"line-height: 26px;\">&lt;<span class=\"hljs-name\" style=\"color: #e45649; line-height: 26px;\">div</span>&gt;</span><br>&nbsp;&nbsp;<span class=\"hljs-tag\" style=\"line-height: 26px;\">&lt;<span class=\"hljs-name\" style=\"color: #e45649; line-height: 26px;\">a</span>&nbsp;<span class=\"hljs-attr\" style=\"color: #986801; line-height: 26px;\">href</span>=<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">\"https://www.bank.com/sendmoney?user=hacker&amp;number=100\"</span>&nbsp;<span class=\"hljs-attr\" style=\"color: #986801; line-height: 26px;\">taget</span>=<span class=\"hljs-string\" style=\"color: #50a14f; line-height: 26px;\">\"_blank\"</span>&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;ç‚¹å‡»ä¸‹è½½ç¾å¥³ç…§ç‰‡<br>&nbsp;&nbsp;<span class=\"hljs-tag\" style=\"line-height: 26px;\">&lt;/<span class=\"hljs-name\" style=\"color: #e45649; line-height: 26px;\">a</span>&gt;</span><br><span class=\"hljs-tag\" style=\"line-height: 26px;\">&lt;/<span class=\"hljs-name\" style=\"color: #e45649; line-height: 26px;\">div</span>&gt;</span><br></code></pre>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\"><img src=\"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/44c55b4681b8420f88768072cd0d7e30~tplv-k3u1fbpfcp-zoom-1.image\" alt style=\"display: block; margin: 0 auto; max-width: 100%; box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px; border-radius: 4px; margin-top: 10px;\">\n<a href=\"https://juejin.im/\" style=\"display: block;text-decoration: none; color: #1e6bb8; word-wrap: break-word; font-weight: bold; text-align: center;margin-top:30px\">ç‚¹å‡»è¿›è¡Œæ·±åº¦â™€å­¦ä¹ â™‚äº¤æµ</a></p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">å°±é—®ä½ å¿ƒä¸å¿ƒåŠ¨ï¼Ÿï¼ˆç‹—å¤´ï¼‰</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">é»‘å®¢é¡µé¢ä¸Šæ”¾äº†ä¸€å¼ ç¾å¥³å›¾ç‰‡ï¼Œä¸‹é¢æ”¾äº†å›¾ç‰‡ä¸‹è½½åœ°å€ï¼Œè€Œè¿™ä¸ªä¸‹è½½åœ°å€å®é™…ä¸Šæ˜¯é»‘å®¢ç”¨æ¥è½¬è´¦çš„æ¥å£ï¼Œä¸€æ—¦ç”¨æˆ·ç‚¹å‡»äº†è¿™ä¸ªé“¾æ¥ï¼Œé‚£ä¹ˆä»–çš„é’±å°±è¢«è½¬åˆ°é»‘å®¢è´¦æˆ·ä¸Šäº†ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">ä»¥ä¸Šä¸‰ç§å°±æ˜¯é»‘å®¢ç»å¸¸é‡‡ç”¨çš„CSRFæ”»å‡»æ–¹å¼ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">å½“ç„¶å‰ææ˜¯ç”¨æˆ·ç™»å½•äº†é“¶è¡Œï¼Œä»¥ä¸Šä¸‰ç§ CSRF æ”»å‡»æ–¹å¼ä¸­çš„ä»»ä½•ä¸€ç§å‘ç”Ÿæ—¶ï¼Œé‚£ä¹ˆæœåŠ¡å™¨éƒ½ä¼šå°†ä¸€å®šé‡‘é¢çš„é’±å‘é€åˆ°é»‘å®¢è´¦æˆ·ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">åˆ°è¿™é‡Œï¼Œç›¸ä¿¡ä½ å·²ç»çŸ¥é“ä»€ä¹ˆæ˜¯ CSRF æ”»å‡»äº†ã€‚å’Œ XSS ä¸åŒçš„æ˜¯ï¼ŒCSRF æ”»å‡»ä¸éœ€è¦å°†æ¶æ„ä»£ç æ³¨å…¥ç”¨æˆ·çš„é¡µé¢ï¼Œä»…ä»…æ˜¯åˆ©ç”¨æœåŠ¡å™¨çš„æ¼æ´å’Œç”¨æˆ·çš„ç™»å½•çŠ¶æ€æ¥å®æ–½æ”»å‡»ã€‚</p>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-size: 22px; text-align: center; position: relative; font-weight: bold; color: black; line-height: 1.1em; padding-top: 12px; padding-bottom: 12px; margin: 70px 30px 30px; border: 1px solid #000;\"><span style=\"float: left; display: block; width: 90%; border-top: 1px solid #000; height: 1px; line-height: 1px; margin-left: -5px; margin-top: -17px;\"> </span><span class=\"prefix\" style=\"display: block; width: 3px; margin: 0 0 0 5%; height: 3px; line-height: 3px; overflow: hidden; background-color: #000; box-shadow: 3px 0 #000,\n    0 3px #000,\n    -3px 0 #000,\n    0 -3px #000;\"></span><span class=\"content\" style=\"display: block; -webkit-box-reflect: below 0em -webkit-gradient(linear,left top,left bottom, from(rgba(0,0,0,0)),to(rgba(255,255,255,0.1)));\">å¦‚ä½•é˜»æ­¢CSRFæ”»å‡»ï¼Ÿ</span><span class=\"suffix\" style=\"display: block; width: 3px; margin: 0 0 0 95%; height: 3px; line-height: 3px; overflow: hidden; background-color: #000; box-shadow: 3px 0 #000,\n    0 3px #000,\n    -3px 0 #000,\n    0 -3px #000;\"></span><span style=\"float: right; display: block; width: 90%; border-bottom: 1px solid #000; height: 1px; line-height: 1px; margin-right: -5px; margin-top: 16px;\"> </span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">é¦–å…ˆï¼Œè®©æˆ‘ä»¬æ€»ç»“ä¸€ä¸‹èƒ½æ–½å±•CSRFæ”»å‡»çš„å‡ ä¸ªå‰æ</p>\n<ol data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: decimal;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">ç›®æ ‡ç«™ç‚¹ä¸€å®šè¦æœ‰ CSRF æ¼æ´ï¼›å³æ²¡æœ‰å®Œå–„çš„é‰´æƒæˆ–äºŒæ¬¡ç¡®è®¤ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">ç”¨æˆ·è¦ç™»å½•è¿‡ç›®æ ‡ç«™ç‚¹ï¼Œå¹¶ä¸”åœ¨æµè§ˆå™¨ä¸Šä¿æŒæœ‰è¯¥ç«™ç‚¹çš„ç™»å½•çŠ¶æ€ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">éœ€è¦ç”¨æˆ·æ‰“å¼€ä¸€ä¸ªç¬¬ä¸‰æ–¹ç«™ç‚¹ã€‚</section></li></ol>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">å¯ä»¥æ³¨æ„åˆ°ï¼Œä¸ XSS æ”»å‡»ä¸åŒï¼ŒCSRF æ”»å‡»ä¸ä¼šå¾€é¡µé¢æ³¨å…¥æ¶æ„è„šæœ¬ï¼Œå› æ­¤é»‘å®¢æ˜¯æ— æ³•é€šè¿‡ CSRF æ”»å‡»æ¥è·å–ç”¨æˆ·é¡µé¢æ•°æ®çš„ï¼›</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">å…¶æœ€å…³é”®çš„ä¸€ç‚¹æ˜¯è¦èƒ½æ‰¾åˆ°æœåŠ¡å™¨è¯·æ±‚æ¼æ´ï¼Œæ‰€ä»¥è¯´å¯¹äº CSRF æ”»å‡»æˆ‘ä»¬ä¸»è¦çš„é˜²æŠ¤æ‰‹æ®µæ˜¯æå‡æœåŠ¡å™¨çš„å®‰å…¨æ€§ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">æå‡æœåŠ¡å™¨å®‰å…¨æ€§çš„å‡ ä¸ªæ–¹æ³•ï¼š</p>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; font-weight: bold; background-color: #000; color: #fff; padding: 2px 10px; width: fit-content; font-size: 17px; margin: 60px auto 10px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">1. ä½¿ç”¨Cookieçš„SameSiteå±æ€§</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">åœ¨ HTTP å“åº”å¤´ä¸­ï¼Œè®¾ç½® Cookie æ—¶ï¼Œå¸¦ä¸Š SameSite é€‰é¡¹ï¼Œå¯ä»¥é˜²æ­¢ç¬¬ä¸‰æ–¹ç«™ç‚¹ä½¿ç”¨Cookieã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">SameSite é€‰é¡¹é€šå¸¸æœ‰ Strictã€Lax å’Œ None ä¸‰ä¸ªå€¼ã€‚</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: square;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">Strict æœ€ä¸ºä¸¥æ ¼ã€‚å¦‚æœ SameSite çš„å€¼æ˜¯ Strictï¼Œé‚£ä¹ˆæµè§ˆå™¨ä¼šå®Œå…¨ç¦æ­¢ç¬¬ä¸‰æ–¹ Cookieã€‚ç®€è¨€ä¹‹ï¼Œå¦‚æœä½ ä»æå®¢æ—¶é—´çš„é¡µé¢ä¸­è®¿é—® InfoQ çš„èµ„æºï¼Œè€Œ InfoQ çš„æŸäº› Cookie è®¾ç½®äº† SameSite = Strict çš„è¯ï¼Œé‚£ä¹ˆè¿™äº› Cookie æ˜¯ä¸ä¼šè¢«å‘é€åˆ° InfoQ çš„æœåŠ¡å™¨ä¸Šçš„ã€‚åªæœ‰ä½ ä» InfoQ çš„ç«™ç‚¹å»è¯·æ±‚ InfoQ çš„èµ„æºæ—¶ï¼Œæ‰ä¼šå¸¦ä¸Šè¿™äº› Cookieã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">Lax ç›¸å¯¹å®½æ¾ä¸€ç‚¹ã€‚åœ¨è·¨ç«™ç‚¹çš„æƒ…å†µä¸‹ï¼Œä»ç¬¬ä¸‰æ–¹ç«™ç‚¹çš„é“¾æ¥æ‰“å¼€å’Œä»ç¬¬ä¸‰æ–¹ç«™ç‚¹æäº¤ Get æ–¹å¼çš„è¡¨å•è¿™ä¸¤ç§æ–¹å¼éƒ½ä¼šæºå¸¦ Cookieã€‚ä½†å¦‚æœåœ¨ç¬¬ä¸‰æ–¹ç«™ç‚¹ä¸­ä½¿ç”¨ Post æ–¹æ³•ï¼Œæˆ–è€…é€šè¿‡ imgã€iframe ç­‰æ ‡ç­¾åŠ è½½çš„ URLï¼Œè¿™äº›åœºæ™¯éƒ½ä¸ä¼šæºå¸¦ Cookieã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">è€Œå¦‚æœä½¿ç”¨ None çš„è¯ï¼Œåœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½ä¼šå‘é€ Cookie æ•°æ®ã€‚</section></li></ul>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">ä¸¥æ ¼ç¨‹åº¦åˆ†åˆ«æ˜¯<strong style=\"font-weight: bold; color: black;\">å…¨éƒ¨ä¸å…è®¸</strong>ç¬¬ä¸‰æ–¹&gt;ä»…å…è®¸<strong style=\"font-weight: bold; color: black;\">GET</strong>è¯·æ±‚&gt;<strong style=\"font-weight: bold; color: black;\">å…¨éƒ¨å…è®¸</strong></p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">SameSiteå…·ä½“ä½¿ç”¨æ–¹å¼ï¼Œå‚è€ƒ<a href=\"https://web.dev/samesite-cookies-explained\" style=\"text-decoration: none; color: #1e6bb8; word-wrap: break-word; font-weight: bold; border-bottom: 1px solid #1e6bb8;\">é“¾æ¥</a>(æ”¾å¿ƒè¿™ä¸ªä¹Ÿæ²¡æœ‰CSRFæ”»å‡»ï¼Œä»¿ä½›CSRF PTSD)</p>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; font-weight: bold; background-color: #000; color: #fff; padding: 2px 10px; width: fit-content; font-size: 17px; margin: 60px auto 10px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">2. éªŒè¯è¯·æ±‚çš„æ¥æºç«™ç‚¹</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">å½“ä½¿ç”¨postè¯·æ±‚æ—¶ï¼ŒHTTPå¤´ä¼šè‡ªå¸¦<strong style=\"font-weight: bold; color: black;\">origin</strong>å­—æ®µï¼ŒæœåŠ¡å™¨å¯ä»¥é€šè¿‡origçŸ¥æ™“ä»é‚£ä¸ªç¬¬ä¸‰æ–¹ç«™ç‚¹è¯·æ±‚ï¼Œå¯ä»¥åšç™½åå•åŠ ä»¥è¿‡æ»¤ã€‚</p>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; font-weight: bold; background-color: #000; color: #fff; padding: 2px 10px; width: fit-content; font-size: 17px; margin: 60px auto 10px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">3. CSRF Token</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">ç®€å•æ¥è¯´å°±æ˜¯Cookieä¸å®‰å…¨ï¼Œå¯ä»¥æ‰‹åŠ¨è®¾ç½®ä¸€ä¸ªçŠ¶æ€å­—æ®µï¼Œæµè§ˆå™¨è¯·æ±‚é¡µé¢æ•°æ®çš„æ—¶å€™å¸¦è¿‡å»ï¼Œè¯·æ±‚å…³é”®æ•°æ®çš„æ—¶å€™é€šè¿‡è¯·æ±‚å­—æ®µæºå¸¦çŠ¶æ€å­—æ®µã€‚å› ä¸ºCSRFä¸èƒ½è®¿é—®ç”¨æˆ·é¡µé¢æ•°æ®ï¼Œå°±å¯ä»¥ä¿è¯è¯·æ±‚æ˜¯åˆæ³•çš„ã€‚å°±ç®—é»‘å®¢é€šè¿‡CSRFå‘å‡ºäº†è¯·æ±‚ï¼ŒæœåŠ¡å™¨ä¹Ÿä¼šå› ä¸º CSRF Token ä¸æ­£ç¡®è€Œæ‹’ç»è¯·æ±‚ã€‚</p>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-size: 22px; text-align: center; position: relative; font-weight: bold; color: black; line-height: 1.1em; padding-top: 12px; padding-bottom: 12px; margin: 70px 30px 30px; border: 1px solid #000;\"><span style=\"float: left; display: block; width: 90%; border-top: 1px solid #000; height: 1px; line-height: 1px; margin-left: -5px; margin-top: -17px;\"> </span><span class=\"prefix\" style=\"display: block; width: 3px; margin: 0 0 0 5%; height: 3px; line-height: 3px; overflow: hidden; background-color: #000; box-shadow: 3px 0 #000,\n    0 3px #000,\n    -3px 0 #000,\n    0 -3px #000;\"></span><span class=\"content\" style=\"display: block; -webkit-box-reflect: below 0em -webkit-gradient(linear,left top,left bottom, from(rgba(0,0,0,0)),to(rgba(255,255,255,0.1)));\">æ€»ç»“</span><span class=\"suffix\" style=\"display: block; width: 3px; margin: 0 0 0 95%; height: 3px; line-height: 3px; overflow: hidden; background-color: #000; box-shadow: 3px 0 #000,\n    0 3px #000,\n    -3px 0 #000,\n    0 -3px #000;\"></span><span style=\"float: right; display: block; width: 90%; border-bottom: 1px solid #000; height: 1px; line-height: 1px; margin-right: -5px; margin-top: 16px;\"> </span></h2>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: square;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">æ»¡è¶³CSRFæ”»å‡»çš„æ¡ä»¶ï¼š\n<ol style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: decimal;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">ç›®æ ‡ç«™ç‚¹å­˜åœ¨æ¼æ´</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">ç”¨æˆ·è¦ç™»å½•è¿‡ç›®æ ‡ç«™ç‚¹</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">é»‘å®¢éœ€è¦é€šè¿‡ç¬¬ä¸‰æ–¹ç«™ç‚¹å‘èµ·æ”»å‡»ã€‚</section></li></ol>\n</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">é˜²å¾¡CSRFçš„æ–¹æ³•\n<ol style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: decimal;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">åˆ©ç”¨å¥½ Cookie çš„ SameSite å±æ€§</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">éªŒè¯è¯·æ±‚çš„æ¥æºç«™ç‚¹</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">ä½¿ç”¨ CSRF Token</section></li></ol>\n</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">å‡ºç°XSSå’ŒCSRFæ¼æ´çš„åŸå› å°±æ˜¯å› ä¸ºæµè§ˆå™¨çš„åŒæºç­–ç•¥å¼€äº†ä¸¤ä¸ªå£å­ï¼šåœ¨é¡µé¢ä¸­å¯ä»¥ä»»æ„å¼•ç”¨ç¬¬ä¸‰æ–¹èµ„æºå’Œé€šè¿‡ CORS ç­–ç•¥è®© XMLHttpRequest å’Œ Fetch å»è·¨åŸŸè¯·æ±‚èµ„æºã€‚è¿™å°±å¯¼è‡´æ¥XSSå’ŒCSRFï¼Œä½œä¸ºdebugï¼Œå¼•å…¥äº† HttpOnly æœºåˆ¶æ¥ç¦æ­¢ç¬¬ä¸‰æ–¹èµ„æºå‘é€ä¸€äº›å…³é”® Cookieï¼Œå¼•å…¥äº† SameSite å’Œ Origin æ¥é˜²æ­¢CSRFè·¨åŸŸè¯·æ±‚çš„æ”»å‡»ã€‚</section></li></ul>\n<span style=\"font-size: 15px; display: block; text-align: center; margin-top: 50px; color: #999; border-bottom: 1px solid #eee;\">- END -</span></section>", "user_name": "å®«æœ¬", "description": "", "got_view_count": 943, "category_name": "é˜…è¯»", "ctime": 1457483895}
{"tag_name": "Dubbo", "concern_user_count": 9623, "user_id": "2313028193225319", "title": "èŠèŠdubbo-goçš„ConsistentHashLoadBalance", "mark_content": "## åº\næœ¬æ–‡ä¸»è¦ç ”ç©¶ä¸€ä¸‹dubbo-goçš„ConsistentHashLoadBalance\n\n## ConsistentHashLoadBalance\ndubbo-go-v1.4.2/cluster/loadbalance/consistent_hash.go\n```\nconst (\n\t// ConsistentHash ...\n\tConsistentHash = \"consistenthash\"\n\t// HashNodes ...\n\tHashNodes = \"hash.nodes\"\n\t// HashArguments ...\n\tHashArguments = \"hash.arguments\"\n)\n\nvar (\n\tselectors = make(map[string]*ConsistentHashSelector)\n\tre        = regexp.MustCompile(constant.COMMA_SPLIT_PATTERN)\n)\n\nfunc init() {\n\textension.SetLoadbalance(ConsistentHash, NewConsistentHashLoadBalance)\n}\n\n// ConsistentHashLoadBalance ...\ntype ConsistentHashLoadBalance struct {\n}\n\n// NewConsistentHashLoadBalance ...\nfunc NewConsistentHashLoadBalance() cluster.LoadBalance {\n\treturn &ConsistentHashLoadBalance{}\n}\n```\n- ConsistentHashLoadBalanceçš„initæ–¹æ³•è®¾ç½®äº†åä¸ºconsistenthashçš„ConsistentHashLoadBalanceåˆ°extensionä¸­\n\n## Select\ndubbo-go-v1.4.2/cluster/loadbalance/consistent_hash.go\n```\n// Select ...\nfunc (lb *ConsistentHashLoadBalance) Select(invokers []protocol.Invoker, invocation protocol.Invocation) protocol.Invoker {\n\tmethodName := invocation.MethodName()\n\tkey := invokers[0].GetUrl().ServiceKey() + \".\" + methodName\n\n\t// hash the invokers\n\tbs := make([]byte, 0)\n\tfor _, invoker := range invokers {\n\t\tb, err := json.Marshal(invoker)\n\t\tif err != nil {\n\t\t\treturn nil\n\t\t}\n\t\tbs = append(bs, b...)\n\t}\n\thashCode := crc32.ChecksumIEEE(bs)\n\tselector, ok := selectors[key]\n\tif !ok || selector.hashCode != hashCode {\n\t\tselectors[key] = newConsistentHashSelector(invokers, methodName, hashCode)\n\t\tselector = selectors[key]\n\t}\n\treturn selector.Select(invocation)\n}\n```\n- Selectæ–¹æ³•éå†invokersæŒ¨ä¸ªæ‰§è¡Œjson.Marshal(invoker)ï¼Œå°†bytes[]æ·»åŠ åˆ°bsä¸­ï¼Œä¹‹åé€šè¿‡crc32.ChecksumIEEE(bs)è®¡ç®—hashCodeï¼Œç„¶åå¯¹æ¯”selectors[key]çš„hashCodeä¸è®¡ç®—å‡ºæ¥çš„hashCodeæ˜¯å¦ä¸€è‡´ï¼Œä¸ä¸€è‡´åˆ™é€šè¿‡newConsistentHashSelectoré‡æ–°è®¾ç½®ä¸€ä¸ªï¼Œæœ€åæ‰§è¡Œselector.Select(invocation)\n\n## ConsistentHashSelector\ndubbo-go-v1.4.2/cluster/loadbalance/consistent_hash.go\n```\n// ConsistentHashSelector ...\ntype ConsistentHashSelector struct {\n\thashCode        uint32\n\treplicaNum      int\n\tvirtualInvokers map[uint32]protocol.Invoker\n\tkeys            Uint32Slice\n\targumentIndex   []int\n}\n```\n- ConsistentHashSelectorå®šä¹‰äº†hashCodeã€replicaNumã€virtualInvokersã€keysã€argumentIndexå±æ€§\n\n## newConsistentHashSelector\ndubbo-go-v1.4.2/cluster/loadbalance/consistent_hash.go\n```\nfunc newConsistentHashSelector(invokers []protocol.Invoker, methodName string,\n\thashCode uint32) *ConsistentHashSelector {\n\n\tselector := &ConsistentHashSelector{}\n\tselector.virtualInvokers = make(map[uint32]protocol.Invoker)\n\tselector.hashCode = hashCode\n\turl := invokers[0].GetUrl()\n\tselector.replicaNum = int(url.GetMethodParamInt(methodName, HashNodes, 160))\n\tindices := re.Split(url.GetMethodParam(methodName, HashArguments, \"0\"), -1)\n\tfor _, index := range indices {\n\t\ti, err := strconv.Atoi(index)\n\t\tif err != nil {\n\t\t\treturn nil\n\t\t}\n\t\tselector.argumentIndex = append(selector.argumentIndex, i)\n\t}\n\tfor _, invoker := range invokers {\n\t\tu := invoker.GetUrl()\n\t\taddress := u.Ip + \":\" + u.Port\n\t\tfor i := 0; i < selector.replicaNum/4; i++ {\n\t\t\tdigest := md5.Sum([]byte(address + strconv.Itoa(i)))\n\t\t\tfor j := 0; j < 4; j++ {\n\t\t\t\tkey := selector.hash(digest, j)\n\t\t\t\tselector.keys = append(selector.keys, key)\n\t\t\t\tselector.virtualInvokers[key] = invoker\n\t\t\t}\n\t\t}\n\t}\n\tsort.Sort(selector.keys)\n\treturn selector\n}\n```\n- newConsistentHashSelectoræ–¹æ³•å®ä¾‹åŒ–ConsistentHashSelectorï¼Œå¹¶åˆå§‹åŒ–virtualInvokersã€hashCodeã€argumentIndexã€keysã€virtualInvokerså±æ€§\n\n## Select\ndubbo-go-v1.4.2/cluster/loadbalance/consistent_hash.go\n```\n// Select ...\nfunc (c *ConsistentHashSelector) Select(invocation protocol.Invocation) protocol.Invoker {\n\tkey := c.toKey(invocation.Arguments())\n\tdigest := md5.Sum([]byte(key))\n\treturn c.selectForKey(c.hash(digest, 0))\n}\n\nfunc (c *ConsistentHashSelector) toKey(args []interface{}) string {\n\tvar sb strings.Builder\n\tfor i := range c.argumentIndex {\n\t\tif i >= 0 && i < len(args) {\n\t\t\tfmt.Fprint(&sb, args[i].(string))\n\t\t}\n\t}\n\treturn sb.String()\n}\n\nfunc (c *ConsistentHashSelector) selectForKey(hash uint32) protocol.Invoker {\n\tidx := sort.Search(len(c.keys), func(i int) bool {\n\t\treturn c.keys[i] >= hash\n\t})\n\tif idx == len(c.keys) {\n\t\tidx = 0\n\t}\n\treturn c.virtualInvokers[c.keys[idx]]\n}\n\nfunc (c *ConsistentHashSelector) hash(digest [16]byte, i int) uint32 {\n\treturn uint32((digest[3+i*4]&0xFF)<<24) | uint32((digest[2+i*4]&0xFF)<<16) |\n\t\tuint32((digest[1+i*4]&0xFF)<<8) | uint32(digest[i*4]&0xFF)&0xFFFFFFF\n}\n```\n- Selectæ–¹æ³•é€šè¿‡c.toKey(invocation.Arguments())è·å–keyï¼Œå†é€šè¿‡md5.Sum([]byte(key))è®¡ç®—digestï¼Œæœ€åé€šè¿‡c.selectForKey(c.hash(digest, 0))é€‰å–Invoker\n\n## å°ç»“\nConsistentHashLoadBalanceçš„Selectæ–¹æ³•éå†invokersæŒ¨ä¸ªæ‰§è¡Œjson.Marshal(invoker)ï¼Œå°†bytes[]æ·»åŠ åˆ°bsä¸­ï¼Œä¹‹åé€šè¿‡crc32.ChecksumIEEE(bs)è®¡ç®—hashCodeï¼Œç„¶åå¯¹æ¯”selectors[key]çš„hashCodeä¸è®¡ç®—å‡ºæ¥çš„hashCodeæ˜¯å¦ä¸€è‡´ï¼Œä¸ä¸€è‡´åˆ™é€šè¿‡newConsistentHashSelectoré‡æ–°è®¾ç½®ä¸€ä¸ªï¼Œæœ€åæ‰§è¡Œselector.Select(invocation)\n\n## doc\n- [consistent_hash](dubbo-go-v1.4.2/cluster/loadbalance/consistent_hash.go)", "user_name": "go4it", "description": "", "got_view_count": 245525, "category_name": "åç«¯", "ctime": 1457483880}
{"tag_name": "HTTP", "concern_user_count": 151675, "user_id": "2348212569517645", "title": "ã€ŒæŸ¥ç¼ºè¡¥æ¼ã€å·©å›ºä½ çš„HTTPçŸ¥è¯†ä½“ç³»", "mark_content": "<section id=\"nice\" data-tool=\"mdniceç¼–è¾‘å™¨\" data-website=\"https://www.mdnice.com\" style=\"font-size: 16px; color: black; padding: 0 10px; word-spacing: 0px; word-break: break-word; word-wrap: break-word; text-align: left; line-height: 1.25; font-family: Optima-Regular, Optima, PingFangTC-Light, PingFangSC-light, PingFangTC-light; letter-spacing: 2px; background-image: linear-gradient(90deg, rgba(50, 0, 0, 0.05) 3%, rgba(0, 0, 0, 0) 3%), linear-gradient(360deg, rgba(50, 0, 0, 0.05) 3%, rgba(0, 0, 0, 0) 3%); background-size: 20px 20px; background-position: center center;\"><h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; text-align: left; margin: 20px 10px 0px 0px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"font-size: 18px; font-weight: bold; display: inline-block; padding-left: 10px; border-left: 5px solid #916dd5;\">å‰è¨€</span><span class=\"suffix\"></span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">è¿™æ¬¡æ¢³ç†çš„ç¯‡å¹…ä¸»è¦æ˜¯æ¶‰åŠç½‘ç»œéƒ¨åˆ†ï¼ŒåŒ…æ‹¬HTTPç­‰ï¼Œå¯¹å·©å›ºè‡ªå·±çš„ç½‘ç»œçŸ¥è¯†ä½“ç³»ä¹Ÿæ˜¯å¾ˆæœ‰å¸®åŠ©çš„ï¼Œè¿›ä¸€æ­¥çš„å¯¹æ€§èƒ½ä¼˜åŒ–è€Œè¨€ä¹Ÿæ˜¯å¸®åŠ©å¾ˆå¤§çš„ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ä½†æ›´å¤šçš„æ˜¯æŠ›ç –å¼•ç‰ï¼Œå¸Œæœ›å¯¹ä½ ä»¬æœ‰æ‰€å¸®åŠ©ã€‚</p>\n<blockquote data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"display: block; font-size: 0.9em; overflow: auto; overflow-scrolling: touch; border-left: 3px solid rgba(0, 0, 0, 0.4); color: #6a737d; padding-top: 10px; padding-bottom: 10px; padding-left: 20px; padding-right: 10px; margin-bottom: 20px; margin-top: 20px; border-left-color: #d89cf6; background: #f4eeff;\">\n<p style=\"padding-top: 8px; padding-bottom: 8px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px; margin: 0px; color: black; line-height: 26px;\">æ„Ÿè°¢æ˜å‹çš„é¼“åŠ±ä¸æ”¯æŒğŸŒ¹ğŸŒ¹ğŸŒ¹ï¼Œå¾€æœŸæ–‡ç« éƒ½åœ¨æœ€åæ¢³ç†å‡ºæ¥äº†(â—'â—¡'â—)</p>\n</blockquote>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æ¥ä¸‹æ¥å°±ä»¥é—®é¢˜çš„å½¢å¼å±•å¼€æ¢³ç†ğŸ‘‡</p>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; text-align: left; margin: 20px 10px 0px 0px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"font-size: 18px; font-weight: bold; display: inline-block; padding-left: 10px; border-left: 5px solid #916dd5;\">è°ˆä¸€è°ˆHTTPåè®®ä¼˜ç¼ºç‚¹</span><span class=\"suffix\"></span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œ<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>HTTP æ˜¯ä¸€ä¸ªåœ¨è®¡ç®—æœºä¸–ç•Œé‡Œä¸“é—¨åœ¨ä¸¤ç‚¹ä¹‹é—´ä¼ è¾“æ–‡å­—ã€å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰è¶…æ–‡æœ¬æ•°æ®çš„çº¦å®šå’Œè§„èŒƒ<span>ã€</span></strong>ã€‚</p>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">HTTP ç‰¹ç‚¹</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<ol data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: decimal; font-size: 15px;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>çµæ´»å¯æ‰©å±•<span>ã€</span></strong>ã€‚ä¸€ä¸ªæ˜¯è¯­æ³•ä¸Šåªè§„å®šäº†åŸºæœ¬æ ¼å¼ï¼Œç©ºæ ¼åˆ†éš”å•è¯ï¼Œæ¢è¡Œåˆ†éš”å­—æ®µç­‰ã€‚å¦å¤–ä¸€ä¸ªå°±æ˜¯ä¼ è¾“å½¢å¼ä¸Šä¸ä»…å¯ä»¥ä¼ è¾“æ–‡æœ¬ï¼Œè¿˜å¯ä»¥ä¼ è¾“å›¾ç‰‡ï¼Œè§†é¢‘ç­‰ä»»æ„æ•°æ®ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>è¯·æ±‚-åº”ç­”æ¨¡å¼<span>ã€</span></strong>ï¼Œé€šå¸¸è€Œè¨€ï¼Œå°±æ˜¯ä¸€æ–¹å‘é€æ¶ˆæ¯ï¼Œå¦å¤–ä¸€æ–¹è¦æ¥å—æ¶ˆæ¯ï¼Œæˆ–è€…æ˜¯åšå‡ºç›¸åº”ç­‰ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>å¯é ä¼ è¾“<span>ã€</span></strong>ï¼ŒHTTPæ˜¯åŸºäºTCP/IPï¼Œå› æ­¤æŠŠè¿™ä¸€ç‰¹æ€§ç»§æ‰¿äº†ä¸‹æ¥ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>æ— çŠ¶æ€<span>ã€</span></strong>ï¼Œè¿™ä¸ªåˆ†åœºæ™¯å›ç­”å³å¯ã€‚</section></li></ol>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">HTTP ç¼ºç‚¹</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<ol data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: decimal; font-size: 15px;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>æ— çŠ¶æ€<span>ã€</span></strong>ï¼Œæœ‰æ—¶å€™ï¼Œéœ€è¦ä¿å­˜ä¿¡æ¯ï¼Œæ¯”å¦‚åƒè´­ç‰©ç³»ç»Ÿï¼Œéœ€è¦ä¿ç•™ä¸‹é¡¾å®¢ä¿¡æ¯ç­‰ç­‰ï¼Œå¦å¤–ä¸€æ–¹é¢ï¼Œæœ‰æ—¶å€™ï¼Œæ— çŠ¶æ€ä¹Ÿä¼šå‡å°‘ç½‘ç»œå¼€é”€ï¼Œæ¯”å¦‚ç±»ä¼¼ç›´æ’­è¡Œä¸šè¿™æ ·å­ç­‰ï¼Œè¿™ä¸ªè¿˜æ˜¯åˆ†åœºæ™¯æ¥è¯´ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>æ˜æ–‡ä¼ è¾“<span>ã€</span></strong>ï¼Œå³åè®®é‡Œçš„æŠ¥æ–‡(ä¸»è¦æŒ‡çš„æ˜¯å¤´éƒ¨)ä¸ä½¿ç”¨äºŒè¿›åˆ¶æ•°æ®ï¼Œè€Œæ˜¯æ–‡æœ¬å½¢å¼ã€‚è¿™è®©HTTPçš„æŠ¥æ–‡ä¿¡æ¯æš´éœ²ç»™äº†å¤–ç•Œï¼Œç»™æ”»å‡»è€…å¸¦æ¥äº†ä¾¿åˆ©ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>é˜Ÿå¤´é˜»å¡<span>ã€</span></strong>ï¼Œå½“httpå¼€å¯é•¿è¿æ¥æ—¶ï¼Œå…±ç”¨ä¸€ä¸ªTCPè¿æ¥ï¼Œå½“æŸä¸ªè¯·æ±‚æ—¶é—´è¿‡é•¿æ—¶ï¼Œå…¶ä»–çš„è¯·æ±‚åªèƒ½å¤„äºé˜»å¡çŠ¶æ€ï¼Œè¿™å°±æ˜¯é˜Ÿå¤´é˜»å¡é—®é¢˜ã€‚</section></li></ol>\n<hr data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; height: 1px; padding: 0; border: none; border-top: 2px solid #d9b8fa;\">\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; text-align: left; margin: 20px 10px 0px 0px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"font-size: 18px; font-weight: bold; display: inline-block; padding-left: 10px; border-left: 5px solid #916dd5;\">HTTP/1.0 HTTP1.1 HTTP2.0ç‰ˆæœ¬ä¹‹é—´çš„å·®å¼‚</span><span class=\"suffix\"></span></h2>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">HTTP 0.9</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">1991å¹´,åŸå‹ç‰ˆæœ¬ï¼ŒåŠŸèƒ½ç®€é™‹ï¼Œåªæœ‰ä¸€ä¸ªå‘½ä»¤GET,åªæ”¯æŒçº¯æ–‡æœ¬å†…å®¹ï¼Œè¯¥ç‰ˆæœ¬å·²è¿‡æ—¶ã€‚</section></li></ul>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">HTTP 1.0</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">ä»»ä½•æ ¼å¼çš„å†…å®¹éƒ½å¯ä»¥å‘é€ï¼Œè¿™ä½¿å¾—äº’è”ç½‘ä¸ä»…å¯ä»¥ä¼ è¾“æ–‡å­—ï¼Œè¿˜èƒ½ä¼ è¾“å›¾åƒã€è§†é¢‘ã€äºŒè¿›åˆ¶ç­‰æ–‡ä»¶ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">é™¤äº†GETå‘½ä»¤ï¼Œè¿˜å¼•å…¥äº†POSTå‘½ä»¤å’ŒHEADå‘½ä»¤ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">httpè¯·æ±‚å’Œå›åº”çš„æ ¼å¼æ”¹å˜ï¼Œé™¤äº†æ•°æ®éƒ¨åˆ†ï¼Œæ¯æ¬¡é€šä¿¡éƒ½å¿…é¡»åŒ…æ‹¬å¤´ä¿¡æ¯ï¼ˆHTTP headerï¼‰ï¼Œç”¨æ¥æè¿°ä¸€äº›å…ƒæ•°æ®ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">åªä½¿ç”¨ header ä¸­çš„ If-Modified-Since å’Œ Expires ä½œä¸ºç¼“å­˜å¤±æ•ˆçš„æ ‡å‡†ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">ä¸æ”¯æŒæ–­ç‚¹ç»­ä¼ ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯æ¬¡éƒ½ä¼šä¼ é€å…¨éƒ¨çš„é¡µé¢å’Œæ•°æ®ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">é€šå¸¸æ¯å°è®¡ç®—æœºåªèƒ½ç»‘å®šä¸€ä¸ª IPï¼Œæ‰€ä»¥è¯·æ±‚æ¶ˆæ¯ä¸­çš„ URL å¹¶æ²¡æœ‰ä¼ é€’ä¸»æœºåï¼ˆhostnameï¼‰</section></li></ul>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">HTTP 1.1</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">http1.1æ˜¯ç›®å‰æœ€ä¸ºä¸»æµçš„httpåè®®ç‰ˆæœ¬ï¼Œä»1999å¹´å‘å¸ƒè‡³ä»Šï¼Œä»æ˜¯ä¸»æµçš„httpåè®®ç‰ˆæœ¬ã€‚</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">å¼•å…¥äº†æŒä¹…è¿æ¥ï¼ˆ persistent connectionï¼‰ï¼Œå³TCPè¿æ¥é»˜è®¤ä¸å…³é—­ï¼Œå¯ä»¥è¢«å¤šä¸ªè¯·æ±‚å¤ç”¨ï¼Œä¸ç”¨å£°æ˜Connection: keep-aliveã€‚é•¿è¿æ¥çš„è¿æ¥æ—¶é•¿å¯ä»¥é€šè¿‡è¯·æ±‚å¤´ä¸­çš„ <code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">keep-alive</code> æ¥è®¾ç½®</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">å¼•å…¥äº†ç®¡é“æœºåˆ¶ï¼ˆ pipeliningï¼‰ï¼Œå³åœ¨åŒä¸€ä¸ªTCPè¿æ¥é‡Œï¼Œå®¢æˆ·ç«¯å¯ä»¥åŒæ—¶å‘é€å¤šä¸ª\nè¯·æ±‚ï¼Œè¿›ä¸€æ­¥æ”¹è¿›äº†HTTPåè®®çš„æ•ˆç‡ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">HTTP 1.1 ä¸­æ–°å¢åŠ äº† E-tagï¼ŒIf-Unmodified-Since, If-Match, If-None-Match ç­‰ç¼“å­˜æ§åˆ¶æ ‡å¤´æ¥æ§åˆ¶ç¼“å­˜å¤±æ•ˆã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">æ”¯æŒæ–­ç‚¹ç»­ä¼ ï¼Œé€šè¿‡ä½¿ç”¨è¯·æ±‚å¤´ä¸­çš„ <code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">Range</code> æ¥å®ç°ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">ä½¿ç”¨äº†è™šæ‹Ÿç½‘ç»œï¼Œåœ¨ä¸€å°ç‰©ç†æœåŠ¡å™¨ä¸Šå¯ä»¥å­˜åœ¨å¤šä¸ªè™šæ‹Ÿä¸»æœºï¼ˆMulti-homed Web Serversï¼‰ï¼Œå¹¶ä¸”å®ƒä»¬å…±äº«ä¸€ä¸ªIPåœ°å€ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">æ–°å¢æ–¹æ³•ï¼šPUTã€ PATCHã€ OPTIONSã€ DELETEã€‚</section></li></ul>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">http1.xç‰ˆæœ¬é—®é¢˜</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">åœ¨ä¼ è¾“æ•°æ®è¿‡ç¨‹ä¸­ï¼Œæ‰€æœ‰å†…å®¹éƒ½æ˜¯æ˜æ–‡ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯éƒ½æ— æ³•éªŒè¯å¯¹æ–¹çš„èº«ä»½ï¼Œæ— æ³•ä¿è¯æ•°æ®çš„å®‰å…¨æ€§ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">HTTP/1.1 ç‰ˆæœ¬é»˜è®¤å…è®¸å¤ç”¨TCPè¿æ¥ï¼Œä½†æ˜¯åœ¨åŒä¸€ä¸ªTCPè¿æ¥é‡Œï¼Œæ‰€æœ‰æ•°æ®é€šä¿¡æ˜¯æŒ‰æ¬¡åºè¿›è¡Œçš„ï¼ŒæœåŠ¡å™¨é€šå¸¸åœ¨å¤„ç†å®Œä¸€ä¸ªå›åº”åï¼Œæ‰ä¼šç»§ç»­å»å¤„ç†ä¸‹ä¸€ä¸ªï¼Œè¿™æ ·å­å°±ä¼šé€ æˆé˜Ÿå¤´é˜»å¡ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">http/1.x ç‰ˆæœ¬æ”¯æŒKeep-aliveï¼Œç”¨æ­¤æ–¹æ¡ˆæ¥å¼¥è¡¥åˆ›å»ºå¤šæ¬¡è¿æ¥äº§ç”Ÿçš„å»¶è¿Ÿï¼Œä½†æ˜¯åŒæ ·ä¼šç»™æœåŠ¡å™¨å¸¦æ¥å‹åŠ›ï¼Œå¹¶ä¸”çš„è¯ï¼Œå¯¹äºå•æ–‡ä»¶è¢«ä¸æ–­è¯·æ±‚çš„æœåŠ¡ï¼ŒKeep-aliveä¼šæå¤§å½±å“æ€§èƒ½ï¼Œå› ä¸ºå®ƒåœ¨æ–‡ä»¶è¢«è¯·æ±‚ä¹‹åè¿˜ä¿æŒäº†ä¸å¿…è¦çš„è¿æ¥å¾ˆé•¿æ—¶é—´ã€‚</section></li></ul>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">HTTP 2.0</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">äºŒè¿›åˆ¶åˆ†å¸§</code>  è¿™æ˜¯ä¸€æ¬¡å½»åº•çš„äºŒè¿›åˆ¶åè®®ï¼Œå¤´ä¿¡æ¯å’Œæ•°æ®ä½“éƒ½æ˜¯äºŒè¿›åˆ¶ï¼Œå¹¶ä¸”ç»Ÿç§°ä¸º\"å¸§\"ï¼šå¤´ä¿¡æ¯å¸§å’Œæ•°æ®å¸§ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">å¤´éƒ¨å‹ç¼©</code>  HTTP 1.1ç‰ˆæœ¬ä¼šå‡ºç° <strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>User-Agentã€Cookieã€Acceptã€Serverã€Range<span>ã€</span></strong> ç­‰å­—æ®µå¯èƒ½ä¼šå ç”¨å‡ ç™¾ç”šè‡³å‡ åƒå­—èŠ‚ï¼Œè€Œ Body å´ç»å¸¸åªæœ‰å‡ åå­—èŠ‚ï¼Œæ‰€ä»¥å¯¼è‡´å¤´éƒ¨åé‡ã€‚HTTP 2.0 ä½¿ç”¨ <code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">HPACK</code> ç®—æ³•è¿›è¡Œå‹ç¼©ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">å¤šè·¯å¤ç”¨</code> å¤ç”¨TCPè¿æ¥ï¼Œåœ¨ä¸€ä¸ªè¿æ¥é‡Œï¼Œå®¢æˆ·ç«¯å’Œæµè§ˆå™¨éƒ½å¯ä»¥åŒæ—¶å‘é€å¤šä¸ªè¯·æ±‚æˆ–å›åº”ï¼Œä¸”ä¸ç”¨æŒ‰é¡ºåºä¸€ä¸€å¯¹åº”ï¼Œè¿™æ ·å­è§£å†³äº†é˜Ÿå¤´é˜»å¡çš„é—®é¢˜ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">æœåŠ¡å™¨æ¨é€</code> å…è®¸æœåŠ¡å™¨æœªç»è¯·æ±‚ï¼Œä¸»åŠ¨å‘å®¢æˆ·ç«¯å‘é€èµ„æºï¼Œå³æœåŠ¡å™¨æ¨é€ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">è¯·æ±‚ä¼˜å…ˆçº§</code> å¯ä»¥è®¾ç½®æ•°æ®å¸§çš„ä¼˜å…ˆçº§ï¼Œè®©æœåŠ¡ç«¯å…ˆå¤„ç†é‡è¦èµ„æºï¼Œä¼˜åŒ–ç”¨æˆ·ä½“éªŒã€‚</section></li></ul>\n<hr data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; height: 1px; padding: 0; border: none; border-top: 2px solid #d9b8fa;\">\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; text-align: left; margin: 20px 10px 0px 0px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"font-size: 18px; font-weight: bold; display: inline-block; padding-left: 10px; border-left: 5px solid #916dd5;\">è°ˆä¸€è°ˆä½ å¯¹HTTP/2ç†è§£</span><span class=\"suffix\"></span></h2>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">å¤´éƒ¨å‹ç¼©</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">HTTP 1.1ç‰ˆæœ¬ä¼šå‡ºç° <strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>User-Agentã€Cookieã€Acceptã€Serverã€Range<span>ã€</span></strong> ç­‰å­—æ®µå¯èƒ½ä¼šå ç”¨å‡ ç™¾ç”šè‡³å‡ åƒå­—èŠ‚ï¼Œè€Œ Body å´ç»å¸¸åªæœ‰å‡ åå­—èŠ‚ï¼Œæ‰€ä»¥å¯¼è‡´å¤´éƒ¨åé‡ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">HTTP 2.0 ä½¿ç”¨ <code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">HPACK</code> ç®—æ³•è¿›è¡Œå‹ç¼©ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">é‚£æˆ‘ä»¬çœ‹çœ‹<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">HPACK</code>ç®—æ³•å§ğŸ‘‡</p>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://user-images.githubusercontent.com/34484322/89356545-a3fd4100-d6f0-11ea-8e0a-8870d832e96e.png\" alt style=\"max-width: 100%; border-radius: 6px; display: block; margin: 20px auto; object-fit: contain; box-shadow: 2px 4px 7px #999;\"></figure>\n<blockquote data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"display: block; font-size: 0.9em; overflow: auto; overflow-scrolling: touch; border-left: 3px solid rgba(0, 0, 0, 0.4); color: #6a737d; padding-top: 10px; padding-bottom: 10px; padding-left: 20px; padding-right: 10px; margin-bottom: 20px; margin-top: 20px; border-left-color: #d89cf6; background: #f4eeff;\">\n<p style=\"padding-top: 8px; padding-bottom: 8px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px; margin: 0px; color: black; line-height: 26px;\">ä»ä¸Šé¢çœ‹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç±»ä¼¼äºç´¢å¼•è¡¨ï¼Œæ¯ä¸ªç´¢å¼•è¡¨å¯¹åº”ä¸€ä¸ªå€¼ï¼Œæ¯”å¦‚ç´¢å¼•ä¸º2å¯¹åº”å¤´éƒ¨ä¸­çš„methodå¤´éƒ¨ä¿¡æ¯ï¼Œè¿™æ ·å­çš„è¯ï¼Œåœ¨ä¼ è¾“çš„æ—¶å€™ï¼Œä¸åœ¨æ˜¯ä¼ è¾“å¯¹åº”çš„å¤´éƒ¨ä¿¡æ¯äº†ï¼Œè€Œæ˜¯ä¼ é€’ç´¢å¼•ï¼Œå¯¹äºä¹‹å‰å‡ºç°è¿‡çš„å¤´éƒ¨ä¿¡æ¯ï¼Œåªéœ€è¦æŠŠ<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>ç´¢å¼•<span>ã€</span></strong>(æ¯”å¦‚1ï¼Œ2ï¼Œ...)ä¼ ç»™å¯¹æ–¹å³å¯ï¼Œå¯¹æ–¹æ‹¿åˆ°ç´¢å¼•æŸ¥è¡¨å°±è¡Œäº†ã€‚</p>\n</blockquote>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">è¿™ç§<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>ä¼ ç´¢å¼•<span>ã€</span></strong>çš„æ–¹å¼ï¼Œå¯ä»¥è¯´è®©è¯·æ±‚å¤´å­—æ®µå¾—åˆ°æå¤§ç¨‹åº¦çš„ç²¾ç®€å’Œå¤ç”¨ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å…¶æ¬¡æ˜¯å¯¹äºæ•´æ•°å’Œå­—ç¬¦ä¸²è¿›è¡Œ<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>å“ˆå¤«æ›¼ç¼–ç <span>ã€</span></strong>ï¼Œå“ˆå¤«æ›¼ç¼–ç çš„åŸç†å°±æ˜¯å…ˆå°†æ‰€æœ‰å‡ºç°çš„å­—ç¬¦å»ºç«‹ä¸€å¼ ç´¢å¼•è¡¨ï¼Œç„¶åè®©å‡ºç°æ¬¡æ•°å¤šçš„å­—ç¬¦å¯¹åº”çš„ç´¢å¼•å°½å¯èƒ½çŸ­ï¼Œä¼ è¾“çš„æ—¶å€™ä¹Ÿæ˜¯ä¼ è¾“è¿™æ ·çš„<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>ç´¢å¼•åºåˆ—<span>ã€</span></strong>ï¼Œå¯ä»¥è¾¾åˆ°éå¸¸é«˜çš„å‹ç¼©ç‡ã€‚</p>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">å¤šè·¯å¤ç”¨</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">HTTP 1.x ä¸­ï¼Œå¦‚æœæƒ³å¹¶å‘å¤šä¸ªè¯·æ±‚ï¼Œå¿…é¡»ä½¿ç”¨å¤šä¸ª TCP é“¾æ¥ï¼Œä¸”æµè§ˆå™¨ä¸ºäº†æ§åˆ¶èµ„æºï¼Œè¿˜ä¼šå¯¹å•ä¸ªåŸŸåæœ‰ 6-8ä¸ªçš„TCPé“¾æ¥è¯·æ±‚é™åˆ¶ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">HTTP2ä¸­ï¼š</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">åŒåŸŸåä¸‹æ‰€æœ‰é€šä¿¡éƒ½åœ¨å•ä¸ªè¿æ¥ä¸Šå®Œæˆã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">å•ä¸ªè¿æ¥å¯ä»¥æ‰¿è½½ä»»æ„æ•°é‡çš„åŒå‘æ•°æ®æµã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">æ•°æ®æµä»¥æ¶ˆæ¯çš„å½¢å¼å‘é€ï¼Œè€Œæ¶ˆæ¯åˆç”±ä¸€ä¸ªæˆ–å¤šä¸ªå¸§ç»„æˆï¼Œå¤šä¸ªå¸§ä¹‹é—´å¯ä»¥ä¹±åºå‘é€ï¼Œå› ä¸ºæ ¹æ®å¸§é¦–éƒ¨çš„æµæ ‡è¯†å¯ä»¥é‡æ–°ç»„è£…ï¼Œä¹Ÿå°±æ˜¯<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">Stream ID</code>ï¼Œæµæ ‡è¯†ç¬¦ï¼Œæœ‰äº†å®ƒï¼Œæ¥æ”¶æ–¹å°±èƒ½ä»ä¹±åºçš„äºŒè¿›åˆ¶å¸§ä¸­é€‰æ‹©IDç›¸åŒçš„å¸§ï¼ŒæŒ‰ç…§é¡ºåºç»„è£…æˆè¯·æ±‚/å“åº”æŠ¥æ–‡ã€‚</section></li></ul>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">æœåŠ¡å™¨æ¨é€</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æµè§ˆå™¨å‘é€ä¸€ä¸ªè¯·æ±‚ï¼ŒæœåŠ¡å™¨ä¸»åŠ¨å‘æµè§ˆå™¨æ¨é€ä¸è¿™ä¸ªè¯·æ±‚ç›¸å…³çš„èµ„æºï¼Œè¿™æ ·æµè§ˆå™¨å°±ä¸ç”¨å‘èµ·åç»­è¯·æ±‚ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ç›¸æ¯”è¾ƒhttp/1.1çš„ä¼˜åŠ¿ğŸ‘‡</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">æ¨é€èµ„æºå¯ä»¥ç”±ä¸åŒé¡µé¢å…±äº«</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">æœåŠ¡å™¨å¯ä»¥æŒ‰ç…§ä¼˜å…ˆçº§æ¨é€èµ„æº</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">å®¢æˆ·ç«¯å¯ä»¥ç¼“å­˜æ¨é€çš„èµ„æº</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">å®¢æˆ·ç«¯å¯ä»¥æ‹’æ”¶æ¨é€è¿‡æ¥çš„èµ„æº</section></li></ul>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">äºŒè¿›åˆ¶åˆ†å¸§</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ä¹‹å‰æ˜¯æ˜æ–‡ä¼ è¾“ï¼Œä¸æ–¹ä¾¿è®¡ç®—æœºè§£æï¼Œå¯¹äºå›è½¦æ¢è¡Œç¬¦æ¥è¯´åˆ°åº•æ˜¯å†…å®¹è¿˜æ˜¯åˆ†éš”ç¬¦ï¼Œéƒ½éœ€è¦å†…éƒ¨çŠ¶æ€æœºå»è¯†åˆ«ï¼Œè¿™æ ·å­æ•ˆç‡ä½ï¼ŒHTTP/2é‡‡ç”¨äºŒè¿›åˆ¶æ ¼å¼ï¼Œå…¨éƒ¨ä¼ è¾“01ä¸²ï¼Œä¾¿äºæœºå™¨è§£ç ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">è¿™æ ·å­ä¸€ä¸ªæŠ¥æ–‡æ ¼å¼å°±è¢«æ‹†åˆ†ä¸ºä¸€ä¸ªä¸ªäºŒè¿›åˆ¶å¸§ï¼Œç”¨<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>Headerså¸§<span>ã€</span></strong>å­˜æ”¾å¤´éƒ¨å­—æ®µï¼Œ<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>Dataå¸§<span>ã€</span></strong>å­˜æ”¾è¯·æ±‚ä½“æ•°æ®ã€‚è¿™æ ·å­çš„è¯ï¼Œå°±æ˜¯ä¸€å †ä¹±åºçš„äºŒè¿›åˆ¶å¸§ï¼Œå®ƒä»¬ä¸å­˜åœ¨å…ˆåå…³ç³»ï¼Œå› æ­¤ä¸éœ€è¦æ’é˜Ÿç­‰å¾…ï¼Œè§£å†³äº†HTTPé˜Ÿå¤´é˜»å¡é—®é¢˜ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">åœ¨å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´ï¼ŒåŒæ–¹éƒ½å¯ä»¥äº’ç›¸å‘é€äºŒè¿›åˆ¶å¸§ï¼Œè¿™æ ·å­<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>åŒå‘ä¼ è¾“çš„åºåˆ—<span>ã€</span></strong>ï¼Œç§°ä¸º<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">æµ</code>ï¼Œæ‰€ä»¥HTTP/2ä¸­ä»¥æµæ¥è¡¨ç¤ºä¸€ä¸ªTCPè¿æ¥ä¸Šè¿›è¡Œå¤šä¸ªæ•°æ®å¸§çš„é€šä¿¡ï¼Œè¿™å°±æ˜¯å¤šè·¯å¤ç”¨æ¦‚å¿µã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">é‚£ä¹±åºçš„äºŒè¿›åˆ¶å¸§ï¼Œæ˜¯å¦‚ä½•ç»„è£…æˆå¯¹äºçš„æŠ¥æ–‡å‘¢ï¼Ÿ</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">æ‰€è°“çš„ä¹±åºï¼Œå€¼çš„æ˜¯ä¸åŒIDçš„Streamæ˜¯ä¹±åºçš„ï¼Œå¯¹äºåŒä¸€ä¸ªStream IDçš„å¸§æ˜¯æŒ‰é¡ºåºä¼ è¾“çš„ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">æ¥æ”¶æ–¹æ”¶åˆ°äºŒè¿›åˆ¶å¸§åï¼Œå°†ç›¸åŒçš„Stream IDç»„è£…æˆå®Œæ•´çš„è¯·æ±‚æŠ¥æ–‡å’Œå“åº”æŠ¥æ–‡ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">äºŒè¿›åˆ¶å¸§ä¸­æœ‰ä¸€äº›å­—æ®µï¼Œæ§åˆ¶ç€<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">ä¼˜å…ˆçº§</code>å’Œ<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">æµé‡æ§åˆ¶</code>ç­‰åŠŸèƒ½ï¼Œè¿™æ ·å­çš„è¯ï¼Œå°±å¯ä»¥è®¾ç½®æ•°æ®å¸§çš„ä¼˜å…ˆçº§ï¼Œè®©æœåŠ¡å™¨å¤„ç†é‡è¦èµ„æºï¼Œä¼˜åŒ–ç”¨æˆ·ä½“éªŒã€‚</section></li></ul>\n<hr data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; height: 1px; padding: 0; border: none; border-top: 2px solid #d9b8fa;\">\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; text-align: left; margin: 20px 10px 0px 0px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"font-size: 18px; font-weight: bold; display: inline-block; padding-left: 10px; border-left: 5px solid #916dd5;\">ä»‹ç»ä¸€ä¸‹HTTP å¸¸è§çŠ¶æ€ç </span><span class=\"suffix\"></span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">RFC è§„å®š HTTP çš„çŠ¶æ€ç ä¸º<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>ä¸‰ä½æ•°<span>ã€</span></strong>ï¼Œç¬¬ä¸€ä¸ªæ•°å­—å®šä¹‰äº†å“åº”çš„ç±»åˆ«ï¼Œè¢«åˆ†ä¸ºäº”ç±»:</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>1xx<span>ã€</span></strong>: ä»£è¡¨è¯·æ±‚å·²è¢«æ¥å—ï¼Œéœ€è¦ç»§ç»­å¤„ç†ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>2xx<span>ã€</span></strong>: è¡¨ç¤ºæˆåŠŸçŠ¶æ€ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>3xx<span>ã€</span></strong>: é‡å®šå‘çŠ¶æ€ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>4xx<span>ã€</span></strong>: å®¢æˆ·ç«¯é”™è¯¯ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>5xx<span>ã€</span></strong>: æœåŠ¡å™¨ç«¯é”™è¯¯ã€‚</section></li></ul>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">1xx ä¿¡æ¯ç±»</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æ¥å—çš„è¯·æ±‚æ­£åœ¨å¤„ç†ï¼Œä¿¡æ¯ç±»çŠ¶æ€ç ã€‚</p>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">2xx æˆåŠŸ</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">200 OK è¡¨ç¤ºä»å®¢æˆ·ç«¯å‘æ¥çš„è¯·æ±‚åœ¨æœåŠ¡å™¨ç«¯è¢«æ­£ç¡®è¯·æ±‚ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">204 No contentï¼Œè¡¨ç¤ºè¯·æ±‚æˆåŠŸï¼Œä½†æ²¡æœ‰èµ„æºå¯è¿”å›ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">206 Partial Contentï¼Œè¯¥çŠ¶æ€ç è¡¨ç¤ºå®¢æˆ·ç«¯è¿›è¡Œäº†èŒƒå›´è¯·æ±‚ï¼Œè€ŒæœåŠ¡å™¨æˆåŠŸæ‰§è¡Œäº†è¿™éƒ¨åˆ†çš„ GET è¯·æ±‚\nå“åº”æŠ¥æ–‡ä¸­åŒ…å«ç”± <strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>Content-Range<span>ã€</span></strong> æŒ‡å®šèŒƒå›´çš„å®ä½“å†…å®¹ã€‚</section></li></ul>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">3xx é‡å®šå‘</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">301 moved permanentlyï¼Œæ°¸ä¹…æ€§é‡å®šå‘ï¼Œè¡¨ç¤ºèµ„æºå·²è¢«åˆ†é…äº†æ–°çš„ URLï¼Œè¿™æ—¶åº”è¯¥æŒ‰ Location é¦–éƒ¨å­—æ®µæç¤ºçš„ URI é‡æ–°ä¿å­˜ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">302 foundï¼Œä¸´æ—¶æ€§é‡å®šå‘ï¼Œè¡¨ç¤ºèµ„æºä¸´æ—¶è¢«åˆ†é…äº†æ–°çš„ URLã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">303 see otherï¼Œè¡¨ç¤ºèµ„æºå­˜åœ¨ç€å¦ä¸€ä¸ª URLï¼Œåº”ä½¿ç”¨ GET æ–¹æ³•è·å–èµ„æºã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">304 not modifiedï¼Œå½“åå•†ç¼“å­˜å‘½ä¸­æ—¶ä¼šè¿”å›è¿™ä¸ªçŠ¶æ€ç ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">307 temporary redirectï¼Œä¸´æ—¶é‡å®šå‘ï¼Œå’Œ302å«ä¹‰ç›¸åŒ,ä¸ä¼šæ”¹å˜method</section></li></ul>\n<blockquote data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"display: block; font-size: 0.9em; overflow: auto; overflow-scrolling: touch; border-left: 3px solid rgba(0, 0, 0, 0.4); color: #6a737d; padding-top: 10px; padding-bottom: 10px; padding-left: 20px; padding-right: 10px; margin-bottom: 20px; margin-top: 20px; border-left-color: #d89cf6; background: #f4eeff;\">\n<p style=\"padding-top: 8px; padding-bottom: 8px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px; margin: 0px; color: black; line-height: 26px;\">å½“ 301ã€302ã€303 å“åº”çŠ¶æ€ç è¿”å›æ—¶ï¼Œå‡ ä¹æ‰€æœ‰çš„æµè§ˆå™¨éƒ½ä¼šæŠŠ POST æ”¹æˆ GETï¼Œå¹¶åˆ é™¤è¯·æ±‚æŠ¥æ–‡å†…çš„ä¸»ä½“ï¼Œä¹‹åè¯·æ±‚ä¼šè‡ªåŠ¨å†æ¬¡å‘é€\n301ã€302 æ ‡å‡†æ˜¯ç¦æ­¢å°† POST æ–¹æ³•æ”¹å˜æˆ GET æ–¹æ³•çš„ï¼Œä½†å®é™…ä½¿ç”¨æ—¶å¤§å®¶éƒ½ä¼šè¿™ä¹ˆåš</p>\n</blockquote>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">4XX å®¢æˆ·ç«¯é”™è¯¯</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">400 bad requestï¼Œè¯·æ±‚æŠ¥æ–‡å­˜åœ¨è¯­æ³•é”™è¯¯ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">401 unauthorizedï¼Œè¡¨ç¤ºå‘é€çš„è¯·æ±‚éœ€è¦æœ‰é€šè¿‡ HTTP è®¤è¯çš„è®¤è¯ä¿¡æ¯ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">403 forbiddenï¼Œè¡¨ç¤ºå¯¹è¯·æ±‚èµ„æºçš„è®¿é—®è¢«æœåŠ¡å™¨æ‹’ç»ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">404 not foundï¼Œè¡¨ç¤ºåœ¨æœåŠ¡å™¨ä¸Šæ²¡æœ‰æ‰¾åˆ°è¯·æ±‚çš„èµ„æºã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">405 Method Not Allowedï¼ŒæœåŠ¡å™¨ç¦æ­¢ä½¿ç”¨è¯¥æ–¹æ³•ï¼Œå®¢æˆ·ç«¯å¯ä»¥é€šè¿‡optionsæ–¹æ³•æ¥æŸ¥çœ‹æœåŠ¡å™¨å…è®¸çš„è®¿é—®æ–¹æ³•ï¼Œå¦‚ä¸‹ ğŸ‘‡</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;\"><span style=\"display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #f8f8f8; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #333; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #f8f8f8; border-radius: 5px;\">Access-Control-Allow-Methods&nbsp;â†’GET,HEAD,PUT,PATCH,POST,DELETE<br></code></pre>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">5XX æœåŠ¡å™¨é”™è¯¯</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">500 internal sever errorï¼Œè¡¨ç¤ºæœåŠ¡å™¨ç«¯åœ¨æ‰§è¡Œè¯·æ±‚æ—¶å‘ç”Ÿäº†é”™è¯¯ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">502 Bad Gatewayï¼ŒæœåŠ¡å™¨è‡ªèº«æ˜¯æ­£å¸¸çš„ï¼Œè®¿é—®çš„æ—¶å€™å‡ºäº†é—®é¢˜ï¼Œå…·ä½“å•¥é”™è¯¯æˆ‘ä»¬ä¸çŸ¥é“ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">503 service unavailableï¼Œè¡¨æ˜æœåŠ¡å™¨æš‚æ—¶å¤„äºè¶…è´Ÿè½½æˆ–æ­£åœ¨åœæœºç»´æŠ¤ï¼Œæ— æ³•å¤„ç†è¯·æ±‚ã€‚</section></li></ul>\n<hr data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; height: 1px; padding: 0; border: none; border-top: 2px solid #d9b8fa;\">\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; text-align: left; margin: 20px 10px 0px 0px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"font-size: 18px; font-weight: bold; display: inline-block; padding-left: 10px; border-left: 5px solid #916dd5;\">DNSå¦‚ä½•å·¥ä½œçš„</span><span class=\"suffix\"></span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">DNS åè®®æä¾›çš„æ˜¯ä¸€ç§ä¸»æœºååˆ° IP åœ°å€çš„è½¬æ¢æœåŠ¡ï¼Œå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„åŸŸåç³»ç»Ÿã€‚æ˜¯åº”ç”¨å±‚åè®®ï¼Œé€šå¸¸è¯¥åè®®è¿è¡Œåœ¨UDPåè®®ä¹‹ä¸Šï¼Œä½¿ç”¨çš„æ˜¯53ç«¯å£å·ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\"><strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>æˆ‘ä»¬é€šè¿‡ä¸€å¼ å›¾æ¥çœ‹çœ‹å®ƒçš„æŸ¥è¯¢è¿‡ç¨‹å§<span>ã€</span></strong>ğŸ‘‡</p>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://user-images.githubusercontent.com/34484322/89356512-95168e80-d6f0-11ea-93aa-c4f59fd36942.png\" alt style=\"max-width: 100%; border-radius: 6px; display: block; margin: 20px auto; object-fit: contain; box-shadow: 2px 4px 7px #999;\"></figure>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">è¿™å¼ å›¾å¾ˆç”ŸåŠ¨çš„å±•ç¤ºäº†DNSåœ¨æœ¬åœ°DNSæœåŠ¡å™¨æ˜¯å¦‚ä½•æŸ¥è¯¢çš„ï¼Œ<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>ä¸€èˆ¬å‘æœ¬åœ°DNSæœåŠ¡å™¨å‘é€è¯·æ±‚æ˜¯é€’å½’æŸ¥è¯¢çš„<span>ã€</span></strong></p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æœ¬åœ° DNS æœåŠ¡å™¨å‘å…¶ä»–åŸŸåæœåŠ¡å™¨è¯·æ±‚çš„è¿‡ç¨‹æ˜¯è¿­ä»£æŸ¥è¯¢çš„è¿‡ç¨‹ğŸ‘‡</p>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://user-images.githubusercontent.com/34484322/89356522-99db4280-d6f0-11ea-9bf9-851b25bd16c3.png\" alt=\"DNSæŸ¥è¯¢\" style=\"max-width: 100%; border-radius: 6px; display: block; margin: 20px auto; object-fit: contain; box-shadow: 2px 4px 7px #999;\"><figcaption style=\"margin-top: 5px; text-align: center; color: #888; display: block; font-size: 13px;\">DNSæŸ¥è¯¢</figcaption></figure>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">é€’å½’æŸ¥è¯¢å’Œè¿­ä»£æŸ¥è¯¢</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><p style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">é€’å½’æŸ¥è¯¢æŒ‡çš„æ˜¯æŸ¥è¯¢è¯·æ±‚å‘å‡ºåï¼ŒåŸŸåæœåŠ¡å™¨ä»£ä¸ºå‘ä¸‹ä¸€çº§åŸŸåæœåŠ¡å™¨å‘å‡ºè¯·æ±‚ï¼Œæœ€åå‘ç”¨æˆ·è¿”å›æŸ¥è¯¢çš„æœ€ç»ˆç»“æœã€‚ä½¿ç”¨é€’å½’ æŸ¥è¯¢ï¼Œç”¨æˆ·åªéœ€è¦å‘å‡ºä¸€æ¬¡æŸ¥è¯¢è¯·æ±‚ã€‚</p>\n</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><p style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">è¿­ä»£æŸ¥è¯¢æŒ‡çš„æ˜¯æŸ¥è¯¢è¯·æ±‚åï¼ŒåŸŸåæœåŠ¡å™¨è¿”å›å•æ¬¡æŸ¥è¯¢çš„ç»“æœã€‚ä¸‹ä¸€çº§çš„æŸ¥è¯¢ç”±ç”¨æˆ·è‡ªå·±è¯·æ±‚ã€‚ä½¿ç”¨è¿­ä»£æŸ¥è¯¢ï¼Œç”¨æˆ·éœ€è¦å‘å‡º å¤šæ¬¡çš„æŸ¥è¯¢è¯·æ±‚ã€‚</p>\n</section></li></ul>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æ‰€ä»¥ä¸€èˆ¬è€Œè¨€ï¼Œ<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>æœ¬åœ°æœåŠ¡å™¨æŸ¥è¯¢æ˜¯é€’å½’æŸ¥è¯¢<span>ã€</span></strong>ï¼Œè€Œ<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>æœ¬åœ° DNS æœåŠ¡å™¨å‘å…¶ä»–åŸŸåæœåŠ¡å™¨è¯·æ±‚çš„è¿‡ç¨‹æ˜¯è¿­ä»£æŸ¥è¯¢çš„è¿‡ç¨‹<span>ã€</span></strong>ã€‚</p>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">DNSç¼“å­˜</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ç¼“å­˜ä¹Ÿå¾ˆå¥½ç†è§£ï¼Œåœ¨ä¸€ä¸ªè¯·æ±‚ä¸­ï¼Œå½“æŸä¸ªDNSæœåŠ¡å™¨æ”¶åˆ°ä¸€ä¸ªDNSå›ç­”åï¼Œå®ƒèƒ½å¤Ÿå›ç­”ä¸­çš„ä¿¡æ¯ç¼“å­˜åœ¨æœ¬åœ°å­˜å‚¨å™¨ä¸­ã€‚<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>è¿”å›çš„èµ„æºè®°å½•ä¸­çš„ TTL ä»£è¡¨äº†è¯¥æ¡è®°å½•çš„ç¼“å­˜çš„æ—¶é—´ã€‚<span>ã€</span></strong></p>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">DNSå®ç°è´Ÿè½½å¹³è¡¡</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å®ƒæ˜¯å¦‚ä½•å®ç°è´Ÿè½½å‡è¡¡çš„å‘¢ï¼Ÿé¦–å…ˆæˆ‘ä»¬å¾—æ¸…æ¥šDNS æ˜¯å¯ä»¥ç”¨äºåœ¨å†—ä½™çš„æœåŠ¡å™¨ä¸Šå®ç°è´Ÿè½½å¹³è¡¡ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">**åŸå› ï¼š**è¿™æ˜¯å› ä¸ºä¸€èˆ¬çš„å¤§å‹ç½‘ç«™ä½¿ç”¨å¤šå°æœåŠ¡å™¨æä¾›æœåŠ¡ï¼Œå› æ­¤ä¸€ä¸ªåŸŸåå¯èƒ½ä¼šå¯¹åº” å¤šä¸ªæœåŠ¡å™¨åœ°å€ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ä¸¾ä¸ªä¾‹å­æ¥è¯´ğŸ‘‡</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">å½“ç”¨æˆ·å‘èµ·ç½‘ç«™åŸŸåçš„ DNS è¯·æ±‚çš„æ—¶å€™ï¼ŒDNS æœåŠ¡å™¨è¿”å›è¿™ä¸ªåŸŸåæ‰€å¯¹åº”çš„æœåŠ¡å™¨ IP åœ°å€çš„é›†åˆ</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">åœ¨æ¯ä¸ªå›ç­”ä¸­ï¼Œä¼šå¾ªç¯è¿™äº› IP åœ°å€çš„é¡ºåºï¼Œç”¨æˆ·ä¸€èˆ¬ä¼šé€‰æ‹©æ’åœ¨å‰é¢çš„åœ°å€å‘é€è¯·æ±‚ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">ä»¥æ­¤å°†ç”¨æˆ·çš„è¯·æ±‚å‡è¡¡çš„åˆ†é…åˆ°å„ä¸ªä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œè¿™æ ·æ¥å®ç°è´Ÿè½½å‡è¡¡ã€‚</section></li></ul>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">æ€»ç»“</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">DNSåŸŸåç³»ç»Ÿï¼Œæ˜¯åº”ç”¨å±‚åè®®ï¼Œè¿è¡ŒUDPåè®®ä¹‹ä¸Šï¼Œä½¿ç”¨ç«¯å£43ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">æŸ¥è¯¢è¿‡ç¨‹ï¼Œæœ¬åœ°æŸ¥è¯¢æ˜¯é€’å½’æŸ¥è¯¢ï¼Œä¾æ¬¡é€šè¿‡æµè§ˆå™¨ç¼“å­˜ <code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">â€”&gt;&gt;</code> æœ¬åœ°hostsæ–‡ä»¶ <code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">â€”&gt;&gt;</code> æœ¬åœ°DNSè§£æå™¨ <code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">â€”&gt;&gt;</code>æœ¬åœ°DNSæœåŠ¡å™¨ <code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">â€”&gt;&gt;</code> å…¶ä»–åŸŸåæœåŠ¡å™¨è¯·æ±‚ã€‚ æ¥ä¸‹æ¥çš„è¿‡ç¨‹å°±æ˜¯è¿­ä»£è¿‡ç¨‹ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">é€’å½’æŸ¥è¯¢ä¸€èˆ¬è€Œè¨€ï¼Œå‘é€ä¸€æ¬¡è¯·æ±‚å°±å¤Ÿï¼Œè¿­ä»£è¿‡ç¨‹éœ€è¦ç”¨æˆ·å‘é€å¤šæ¬¡è¯·æ±‚ã€‚</section></li></ul>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; text-align: left; margin: 20px 10px 0px 0px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"font-size: 18px; font-weight: bold; display: inline-block; padding-left: 10px; border-left: 5px solid #916dd5;\">DNS ä¸ºä»€ä¹ˆä½¿ç”¨ UDP åè®®ä½œä¸ºä¼ è¾“å±‚åè®®ï¼Ÿ</span><span class=\"suffix\"></span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\"><strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>DNS ä½¿ç”¨ UDP åè®®ä½œä¸ºä¼ è¾“å±‚åè®®çš„ä¸»è¦åŸå› æ˜¯ä¸ºäº†é¿å…ä½¿ç”¨ TCP åè®®æ—¶é€ æˆçš„è¿æ¥æ—¶å»¶ã€‚<span>ã€</span></strong></p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">ä¸ºäº†å¾—åˆ°ä¸€ä¸ªåŸŸåçš„ IP åœ°å€ï¼Œå¾€å¾€ä¼šå‘å¤šä¸ªåŸŸåæœåŠ¡å™¨æŸ¥è¯¢ï¼Œå¦‚æœä½¿ç”¨ TCP åè®®ï¼Œé‚£ä¹ˆæ¯æ¬¡è¯·æ±‚éƒ½ä¼šå­˜åœ¨è¿æ¥æ—¶å»¶ï¼Œè¿™æ ·ä½¿ DNS æœåŠ¡å˜å¾—å¾ˆæ…¢ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">å¤§å¤šæ•°çš„åœ°å€æŸ¥è¯¢è¯·æ±‚ï¼Œéƒ½æ˜¯æµè§ˆå™¨è¯·æ±‚é¡µé¢æ—¶å‘å‡ºçš„ï¼Œè¿™æ ·ä¼šé€ æˆç½‘é¡µçš„ç­‰å¾…æ—¶é—´è¿‡é•¿ã€‚</section></li></ul>\n<hr data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; height: 1px; padding: 0; border: none; border-top: 2px solid #d9b8fa;\">\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; text-align: left; margin: 20px 10px 0px 0px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"font-size: 18px; font-weight: bold; display: inline-block; padding-left: 10px; border-left: 5px solid #916dd5;\">ä»‹ç»ä¸€ä¸‹Connection:keep-alive</span><span class=\"suffix\"></span></h2>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">ä»€ä¹ˆæ˜¯keep-alive</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æˆ‘ä»¬çŸ¥é“HTTPåè®®é‡‡ç”¨â€œè¯·æ±‚-åº”ç­”â€æ¨¡å¼ï¼Œå½“ä½¿ç”¨æ™®é€šæ¨¡å¼ï¼Œå³éKeepAliveæ¨¡å¼æ—¶ï¼Œæ¯ä¸ªè¯·æ±‚/åº”ç­”å®¢æˆ·å’ŒæœåŠ¡å™¨éƒ½è¦æ–°å»ºä¸€ä¸ªè¿æ¥ï¼Œå®Œæˆ ä¹‹åç«‹å³æ–­å¼€è¿æ¥ï¼ˆHTTPåè®®ä¸ºæ— è¿æ¥çš„åè®®ï¼‰ï¼›</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å½“ä½¿ç”¨Keep-Aliveæ¨¡å¼ï¼ˆåˆç§°æŒä¹…è¿æ¥ã€è¿æ¥é‡ç”¨ï¼‰æ—¶ï¼ŒKeep-AliveåŠŸèƒ½ä½¿å®¢æˆ·ç«¯åˆ°æœ åŠ¡å™¨ç«¯çš„è¿æ¥æŒç»­æœ‰æ•ˆï¼Œå½“å‡ºç°å¯¹æœåŠ¡å™¨çš„åç»§è¯·æ±‚æ—¶ï¼ŒKeep-AliveåŠŸèƒ½é¿å…äº†å»ºç«‹æˆ–è€…é‡æ–°å»ºç«‹è¿æ¥ã€‚</p>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">ä¸ºä»€ä¹ˆè¦ä½¿ç”¨keep-alive</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">keep-aliveæŠ€æœ¯çš„åˆ›å»ºç›®çš„ï¼Œèƒ½åœ¨å¤šæ¬¡HTTPä¹‹å‰é‡ç”¨åŒä¸€ä¸ªTCPè¿æ¥ï¼Œä»è€Œå‡å°‘åˆ›å»º/å…³é—­å¤šä¸ª TCP è¿æ¥çš„å¼€é”€ï¼ˆåŒ…æ‹¬å“åº”æ—¶é—´ã€CPU èµ„æºã€å‡å°‘æ‹¥å µç­‰ï¼‰ï¼Œå‚è€ƒå¦‚ä¸‹ç¤ºæ„å›¾ï¼ˆæ¥æºï¼šç»´åŸºç™¾ç§‘ï¼‰ï¼š</p>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://user-images.githubusercontent.com/34484322/89356849-64832480-d6f1-11ea-8f53-5372f8c30f39.png\" alt style=\"max-width: 100%; border-radius: 6px; display: block; margin: 20px auto; object-fit: contain; box-shadow: 2px 4px 7px #999;\"></figure>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">å®¢æˆ·ç«¯å¦‚ä½•å¼€å¯</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">åœ¨HTTP/1.0åè®®ä¸­ï¼Œé»˜è®¤æ˜¯å…³é—­çš„ï¼Œéœ€è¦åœ¨httpå¤´åŠ å…¥\"Connection: Keep-Aliveâ€ï¼Œæ‰èƒ½å¯ç”¨Keep-Aliveï¼›</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;\"><span style=\"display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #f8f8f8; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #333; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #f8f8f8; border-radius: 5px;\">Connection:&nbsp;keep-alive<br></code></pre>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">http 1.1ä¸­é»˜è®¤å¯ç”¨Keep-Aliveï¼Œå¦‚æœåŠ å…¥\"Connection: close â€œï¼Œæ‰å…³é—­ã€‚</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;\"><span style=\"display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #f8f8f8; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #333; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #f8f8f8; border-radius: 5px;\">Connection:&nbsp;close<br></code></pre>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ç›®å‰å¤§éƒ¨åˆ†æµè§ˆå™¨éƒ½æ˜¯ç”¨http1.1åè®®ï¼Œä¹Ÿå°±æ˜¯è¯´é»˜è®¤éƒ½ä¼šå‘èµ·Keep-Aliveçš„è¿æ¥è¯·æ±‚äº†ï¼Œæ‰€ä»¥æ˜¯å¦èƒ½å®Œæˆä¸€ä¸ªå®Œæ•´çš„Keep- Aliveè¿æ¥å°±çœ‹æœåŠ¡å™¨è®¾ç½®æƒ…å†µã€‚</p>\n<hr data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; height: 1px; padding: 0; border: none; border-top: 2px solid #d9b8fa;\">\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; text-align: left; margin: 20px 10px 0px 0px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"font-size: 18px; font-weight: bold; display: inline-block; padding-left: 10px; border-left: 5px solid #916dd5;\">ä»‹ç»HTTP ç¼“å­˜ç­–ç•¥</span><span class=\"suffix\"></span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">è¿™ä¸ªè·Ÿä¹‹å‰çš„æµè§ˆå™¨ç¼“å­˜åŸç†ä¸€æ ·ï¼Œæˆ‘ç›´æ¥æ‹¿æˆ‘ä¹‹å‰æ¢³ç†è¿‡çš„å§ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æˆ‘åœ¨æˆ‘ä¹‹å‰çš„é‚£ä¸€ç¯‡ä¸­å·²ç»è¯¦ç»†çš„è¯´è¿‡äº†ï¼Œ<a href=\"https://juejin.im/post/5f184aade51d4534aa4ad7c0#heading-40\" style=\"text-decoration: none; word-wrap: break-word; color: #916dd5; font-weight: bolder; border-bottom: 1px solid #916dd5;\">ç‚¹è¿™é‡Œä¼ é€é—¨èŠä¸€èŠæµè§ˆå™¨ç¼“å­˜</a></p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æˆ‘ä»¬æ¥æ¢³ç†ä¸€ä¸‹å§ğŸ‘‡</p>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">å¼ºç¼“å­˜</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å¼ºç¼“å­˜ä¸¤ä¸ªç›¸å…³å­—æ®µï¼Œ<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>Expires<span>ã€</span></strong>ï¼Œ<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>Cache-Control<span>ã€</span></strong>ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\"><strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>å¼ºç¼“å­˜åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼Œä¸€ç§æ˜¯å‘é€HTTPè¯·æ±‚ï¼Œä¸€ç§ä¸éœ€è¦å‘é€ã€‚<span>ã€</span></strong></p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">é¦–å…ˆæ£€æŸ¥å¼ºç¼“å­˜ï¼Œè¿™ä¸ªé˜¶æ®µ**ä¸éœ€è¦å‘é€HTTPè¯·æ±‚ã€‚**é€šè¿‡æŸ¥æ‰¾ä¸åŒçš„å­—æ®µæ¥è¿›è¡Œï¼Œä¸åŒçš„HTTPç‰ˆæœ¬æ‰€ä»¥ä¸åŒã€‚</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">HTTP1.0ç‰ˆæœ¬ï¼Œä½¿ç”¨çš„æ˜¯Expiresï¼ŒHTTP1.1ä½¿ç”¨çš„æ˜¯Cache-Control</section></li></ul>\n<h4 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 18px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">Expires</span><span class=\"suffix\" style=\"display: none;\"></span></h4>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\"><code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">Expires</code>å³è¿‡æœŸæ—¶é—´ï¼Œæ—¶é—´æ˜¯ç›¸å¯¹äºæœåŠ¡å™¨çš„æ—¶é—´è€Œè¨€çš„ï¼Œå­˜åœ¨äºæœåŠ¡ç«¯è¿”å›çš„å“åº”å¤´ä¸­ï¼Œåœ¨è¿™ä¸ªè¿‡æœŸæ—¶é—´ä¹‹å‰å¯ä»¥ç›´æ¥ä»ç¼“å­˜é‡Œé¢è·å–æ•°æ®ï¼Œæ— éœ€å†æ¬¡è¯·æ±‚ã€‚æ¯”å¦‚ä¸‹é¢è¿™æ ·:</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;\"><span style=\"display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #f8f8f8; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #333; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #f8f8f8; border-radius: 5px;\">Expires:Mon,&nbsp;29&nbsp;Jun&nbsp;2020&nbsp;11:10:23&nbsp;GMT<br></code></pre>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">è¡¨ç¤ºè¯¥èµ„æºåœ¨2020å¹´<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">7æœˆ29æ—¥11:10:23</code>è¿‡æœŸï¼Œè¿‡æœŸæ—¶å°±ä¼šé‡æ–°å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">è¿™ä¸ªæ–¹å¼æœ‰ä¸€ä¸ªé—®é¢˜ï¼š<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>æœåŠ¡å™¨çš„æ—¶é—´å’Œæµè§ˆå™¨çš„æ—¶é—´å¯èƒ½å¹¶ä¸ä¸€è‡´<span>ã€</span></strong>ï¼Œæ‰€ä»¥HTTP1.1æå‡ºæ–°çš„å­—æ®µä»£æ›¿å®ƒã€‚</p>\n<h4 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 18px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">Cache-Control</span><span class=\"suffix\" style=\"display: none;\"></span></h4>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">HTTP1.1ç‰ˆæœ¬ä¸­ï¼Œä½¿ç”¨çš„å°±æ˜¯è¯¥å­—æ®µï¼Œè¿™ä¸ªå­—æ®µé‡‡ç”¨çš„æ—¶é—´æ˜¯è¿‡æœŸæ—¶é•¿ï¼Œå¯¹åº”çš„æ˜¯max-ageã€‚</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;\"><span style=\"display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #f8f8f8; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #333; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #f8f8f8; border-radius: 5px;\">Cache-Control:max-age=6000<br></code></pre>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ä¸Šé¢ä»£è¡¨è¯¥èµ„æºè¿”å›å6000ç§’ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ç¼“å­˜ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å½“ç„¶äº†ï¼Œå®ƒè¿˜æœ‰å…¶ä»–å¾ˆå¤šå…³é”®çš„æŒ‡ä»¤ï¼Œæ¢³ç†äº†å‡ ä¸ªé‡è¦çš„ğŸ‘‡</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æ³¨æ„ç‚¹ï¼š</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">å½“Expireså’ŒCache-ControlåŒæ—¶å­˜åœ¨æ—¶ï¼Œä¼˜å…ˆè€ƒè™‘Cache-Controlã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">å½“ç„¶äº†ï¼Œå½“ç¼“å­˜èµ„æºå¤±æ•ˆäº†ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰å‘½ä¸­å¼ºç¼“å­˜ï¼Œæ¥ä¸‹æ¥å°±è¿›å…¥åå•†ç¼“å­˜ğŸ‘‡</section></li></ul>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">åå•†ç¼“å­˜</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å¼ºç¼“å­˜å¤±æ•ˆåï¼Œæµè§ˆå™¨åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦å“åº”çš„<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">ç¼“å­˜Tag</code>æ¥å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼ŒæœåŠ¡å™¨æ ¹æ®å¯¹åº”çš„tagï¼Œæ¥å†³å®šæ˜¯å¦ä½¿ç”¨ç¼“å­˜ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ç¼“å­˜åˆ†ä¸ºä¸¤ç§ï¼Œ<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>Last-Modified<span>ã€</span></strong> å’Œ <strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>ETag<span>ã€</span></strong>ã€‚ä¸¤è€…å„æœ‰ä¼˜åŠ¿ï¼Œå¹¶ä¸å­˜åœ¨è°å¯¹è°æœ‰<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">ç»å¯¹çš„ä¼˜åŠ¿</code>ï¼Œä¸ä¸Šé¢æ‰€è®²çš„å¼ºç¼“å­˜ä¸¤ä¸ªTagæ‰€ä¸åŒã€‚</p>\n<h4 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 18px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">Last-Modified</span><span class=\"suffix\" style=\"display: none;\"></span></h4>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">è¿™ä¸ªå­—æ®µè¡¨ç¤ºçš„æ˜¯<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>æœ€åä¿®æ”¹æ—¶é—´<span>ã€</span></strong>ã€‚åœ¨æµè§ˆå™¨ç¬¬ä¸€æ¬¡ç»™æœåŠ¡å™¨å‘é€è¯·æ±‚åï¼ŒæœåŠ¡å™¨ä¼šåœ¨å“åº”å¤´ä¸­åŠ ä¸Šè¿™ä¸ªå­—æ®µã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æµè§ˆå™¨æ¥æ”¶åˆ°åï¼Œ<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>å¦‚æœå†æ¬¡è¯·æ±‚<span>ã€</span></strong>ï¼Œä¼šåœ¨è¯·æ±‚å¤´ä¸­æºå¸¦<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">If-Modified-Since</code>å­—æ®µï¼Œè¿™ä¸ªå­—æ®µçš„å€¼ä¹Ÿå°±æ˜¯æœåŠ¡å™¨ä¼ æ¥çš„æœ€åä¿®æ”¹æ—¶é—´ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æœåŠ¡å™¨æ‹¿åˆ°è¯·æ±‚å¤´ä¸­çš„<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">If-Modified-Since</code>çš„å­—æ®µåï¼Œå…¶å®ä¼šå’Œè¿™ä¸ªæœåŠ¡å™¨ä¸­<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">è¯¥èµ„æºçš„æœ€åä¿®æ”¹æ—¶é—´</code>å¯¹æ¯”:</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">å¦‚æœè¯·æ±‚å¤´ä¸­çš„è¿™ä¸ªå€¼å°äºæœ€åä¿®æ”¹æ—¶é—´ï¼Œè¯´æ˜æ˜¯æ—¶å€™æ›´æ–°äº†ã€‚è¿”å›æ–°çš„èµ„æºï¼Œè·Ÿå¸¸è§„çš„HTTPè¯·æ±‚å“åº”çš„æµç¨‹ä¸€æ ·ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">å¦åˆ™è¿”å›304ï¼Œå‘Šè¯‰æµè§ˆå™¨ç›´æ¥ä½¿ç”¨ç¼“å­˜ã€‚</section></li></ul>\n<h4 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 18px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">ETag</span><span class=\"suffix\" style=\"display: none;\"></span></h4>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ETagæ˜¯æœåŠ¡å™¨æ ¹æ®å½“å‰æ–‡ä»¶çš„å†…å®¹ï¼Œå¯¹æ–‡ä»¶ç”Ÿæˆå”¯ä¸€çš„æ ‡è¯†ï¼Œæ¯”å¦‚MD5ç®—æ³•ï¼Œåªè¦é‡Œé¢çš„å†…å®¹æœ‰æ”¹åŠ¨ï¼Œè¿™ä¸ªå€¼å°±ä¼šä¿®æ”¹ï¼ŒæœåŠ¡å™¨é€šè¿‡æŠŠå“åº”å¤´æŠŠè¯¥å­—æ®µç»™æµè§ˆå™¨ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æµè§ˆå™¨æ¥å—åˆ°ETagå€¼ï¼Œä¼šåœ¨ä¸‹æ¬¡è¯·æ±‚çš„æ—¶å€™ï¼Œå°†è¿™ä¸ªå€¼ä½œä¸º<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>If-None-Match<span>ã€</span></strong>è¿™ä¸ªå­—æ®µçš„å†…å®¹ï¼Œå‘ç»™æœåŠ¡å™¨ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æœåŠ¡å™¨æ¥æ”¶åˆ°<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>If-None-Match<span>ã€</span></strong>åï¼Œä¼šè·ŸæœåŠ¡å™¨ä¸Šè¯¥èµ„æºçš„<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>ETag<span>ã€</span></strong>è¿›è¡Œæ¯”å¯¹ğŸ‘‡</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">å¦‚æœä¸¤è€…ä¸€æ ·çš„è¯ï¼Œç›´æ¥è¿”å›304ï¼Œå‘Šè¯‰æµè§ˆå™¨ç›´æ¥ä½¿ç”¨ç¼“å­˜</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">å¦‚æœä¸ä¸€æ ·çš„è¯ï¼Œè¯´æ˜å†…å®¹æ›´æ–°äº†ï¼Œè¿”å›æ–°çš„èµ„æºï¼Œè·Ÿå¸¸è§„çš„HTTPè¯·æ±‚å“åº”çš„æµç¨‹ä¸€æ ·</section></li></ul>\n<h4 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 18px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">ä¸¤è€…å¯¹æ¯”</span><span class=\"suffix\" style=\"display: none;\"></span></h4>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">æ€§èƒ½ä¸Šï¼Œ<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">Last-Modified</code>ä¼˜äº<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">ETag</code>ï¼Œ<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">Last-Modified</code>è®°å½•çš„æ˜¯æ—¶é—´ç‚¹ï¼Œè€Œ<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">Etag</code>éœ€è¦æ ¹æ®æ–‡ä»¶çš„MD5ç®—æ³•ç”Ÿæˆå¯¹åº”çš„hashå€¼ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">ç²¾åº¦ä¸Šï¼Œ<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">ETag</code>ä¼˜äº<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">Last-Modified</code>ã€‚<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">ETag</code>æŒ‰ç…§å†…å®¹ç»™èµ„æºå¸¦ä¸Šæ ‡è¯†ï¼Œèƒ½å‡†ç¡®æ„ŸçŸ¥èµ„æºå˜åŒ–ï¼Œ<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">Last-Modified</code>åœ¨æŸäº›åœºæ™¯å¹¶ä¸èƒ½å‡†ç¡®æ„ŸçŸ¥å˜åŒ–ï¼Œæ¯”å¦‚ğŸ‘‡\n<ul style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: square;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">ç¼–è¾‘äº†èµ„æºæ–‡ä»¶ï¼Œä½†æ˜¯æ–‡ä»¶å†…å®¹å¹¶æ²¡æœ‰æ›´æ”¹ï¼Œè¿™æ ·ä¹Ÿä¼šé€ æˆç¼“å­˜å¤±æ•ˆã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">Last-Modified èƒ½å¤Ÿæ„ŸçŸ¥çš„å•ä½æ—¶é—´æ˜¯ç§’ï¼Œå¦‚æœæ–‡ä»¶åœ¨ 1 ç§’å†…æ”¹å˜äº†å¤šæ¬¡ï¼Œé‚£ä¹ˆè¿™æ—¶å€™çš„ Last-Modified å¹¶æ²¡æœ‰ä½“ç°å‡ºä¿®æ”¹äº†ã€‚</section></li></ul>\n</section></li></ul>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æœ€åï¼Œ<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>å¦‚æœä¸¤ç§æ–¹å¼éƒ½æ”¯æŒçš„è¯ï¼ŒæœåŠ¡å™¨ä¼šä¼˜å…ˆè€ƒè™‘<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">ETag</code><span>ã€</span></strong>ã€‚</p>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">ç¼“å­˜ä½ç½®</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æ¥ä¸‹æ¥æˆ‘ä»¬è€ƒè™‘ä½¿ç”¨ç¼“å­˜çš„è¯ï¼Œç¼“å­˜çš„ä½ç½®åœ¨å“ªé‡Œå‘¢ï¼Ÿ</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æµè§ˆå™¨ç¼“å­˜çš„ä½ç½®çš„è¯ï¼Œå¯ä»¥åˆ†ä¸ºå››ç§,ä¼˜å…ˆçº§ä»é«˜åˆ°ä½æ’åˆ—åˆ†åˆ«ğŸ‘‡</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">Service Worker</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">Memory Cache</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">Disk Cache</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">Push Cache</section></li></ul>\n<h4 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 18px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">Service Worker</span><span class=\"suffix\" style=\"display: none;\"></span></h4>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">è¿™ä¸ªåº”ç”¨åœºæ™¯æ¯”å¦‚PWAï¼Œå®ƒå€Ÿé‰´äº†Web Workeræ€è·¯ï¼Œç”±äºå®ƒè„±ç¦»äº†æµè§ˆå™¨çš„çª—ä½“ï¼Œå› æ­¤æ— æ³•ç›´æ¥è®¿é—®DOMã€‚å®ƒèƒ½å®Œæˆçš„åŠŸèƒ½æ¯”å¦‚ï¼š<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">ç¦»çº¿ç¼“å­˜</code>ã€<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">æ¶ˆæ¯æ¨é€</code>å’Œ<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">ç½‘ç»œä»£ç†</code>ï¼Œå…¶ä¸­<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">ç¦»çº¿ç¼“å­˜</code>å°±æ˜¯<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>Service Worker Cache<span>ã€</span></strong>ã€‚</p>\n<h4 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 18px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">Memory Cache</span><span class=\"suffix\" style=\"display: none;\"></span></h4>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æŒ‡çš„æ˜¯å†…å­˜ç¼“å­˜ï¼Œä»æ•ˆç‡ä¸Šè®²å®ƒæ˜¯æœ€å¿«çš„ï¼Œä»å­˜æ´»æ—¶é—´æ¥è®²åˆæ˜¯æœ€çŸ­çš„ï¼Œå½“æ¸²æŸ“è¿›ç¨‹ç»“æŸåï¼Œå†…å­˜ç¼“å­˜ä¹Ÿå°±ä¸å­˜åœ¨äº†ã€‚</p>\n<h4 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 18px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">Disk Cache</span><span class=\"suffix\" style=\"display: none;\"></span></h4>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å­˜å‚¨åœ¨ç£ç›˜ä¸­çš„ç¼“å­˜ï¼Œä»å­˜å–æ•ˆç‡ä¸Šè®²æ˜¯æ¯”å†…å­˜ç¼“å­˜æ…¢çš„ï¼Œä¼˜åŠ¿åœ¨äºå­˜å‚¨å®¹é‡å’Œå­˜å‚¨æ—¶é•¿ã€‚</p>\n<h4 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 18px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">Disk Cache VS Memory Cache</span><span class=\"suffix\" style=\"display: none;\"></span></h4>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ä¸¤è€…å¯¹æ¯”ï¼Œä¸»è¦çš„ç­–ç•¥ğŸ‘‡</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å†…å®¹ä½¿ç”¨ç‡é«˜çš„è¯ï¼Œæ–‡ä»¶ä¼˜å…ˆè¿›å…¥ç£ç›˜</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æ¯”è¾ƒå¤§çš„JSï¼ŒCSSæ–‡ä»¶ä¼šç›´æ¥æ”¾å…¥ç£ç›˜ï¼Œåä¹‹æ”¾å…¥å†…å­˜ã€‚</p>\n<h4 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 18px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">Push Cache</span><span class=\"suffix\" style=\"display: none;\"></span></h4>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æ¨é€ç¼“å­˜ï¼Œè¿™ç®—æ˜¯æµè§ˆå™¨ä¸­æœ€åä¸€é“é˜²çº¿å§ï¼Œå®ƒæ˜¯<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">HTTP/2</code>çš„å†…å®¹ã€‚å…·ä½“æˆ‘ä¹Ÿä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œæœ‰å…´è¶£çš„å¯ä»¥å»äº†è§£ã€‚</p>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">æ€»ç»“</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">é¦–å…ˆæ£€æŸ¥<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">Cache-Control</code>ï¼Œ å°é²œï¼Œçœ‹å¼ºç¼“å­˜æ˜¯å¦å¯ç”¨</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">å¦‚æœå¯ç”¨çš„è¯ï¼Œç›´æ¥ä½¿ç”¨</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">å¦åˆ™è¿›å…¥åå•†ç¼“å­˜ï¼Œå‘é€HTTPè¯·æ±‚ï¼ŒæœåŠ¡å™¨é€šè¿‡è¯·æ±‚å¤´ä¸­çš„<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">If-Modified-Since</code>æˆ–è€…<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">If-None-Match</code>å­—æ®µæ£€æŸ¥èµ„æºæ˜¯å¦æ›´æ–°</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">èµ„æºæ›´æ–°ï¼Œè¿”å›èµ„æºå’Œ200çŠ¶æ€ç ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">å¦åˆ™ï¼Œè¿”å›304ï¼Œç›´æ¥å‘Šè¯‰æµè§ˆå™¨ç›´æ¥ä»ç¼“å­˜ä¸­å»èµ„æºã€‚</section></li></ul>\n<hr data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; height: 1px; padding: 0; border: none; border-top: 2px solid #d9b8fa;\">\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; text-align: left; margin: 20px 10px 0px 0px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"font-size: 18px; font-weight: bold; display: inline-block; padding-left: 10px; border-left: 5px solid #916dd5;\">è¯´ä¸€è¯´HTTP çš„è¯·æ±‚æ–¹æ³•ï¼Ÿ</span><span class=\"suffix\"></span></h2>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">HTTP1.0å®šä¹‰äº†ä¸‰ç§è¯·æ±‚æ–¹æ³•ï¼š GET, POST å’Œ HEADæ–¹æ³•</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">HTTP1.1æ–°å¢äº†äº”ç§è¯·æ±‚æ–¹æ³•ï¼šOPTIONS, PUT, DELETE, TRACE å’Œ CONNECT</section></li></ul>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\"><code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">http/1.1</code>è§„å®šäº†ä»¥ä¸‹è¯·æ±‚æ–¹æ³•(æ³¨æ„ï¼Œéƒ½æ˜¯å¤§å†™):</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">GETï¼š                è¯·æ±‚è·å–Request-URIæ‰€æ ‡è¯†çš„èµ„æº</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">POSTï¼š              åœ¨Request-URIæ‰€æ ‡è¯†çš„èµ„æºåé™„åŠ æ–°çš„æ•°æ®</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">HEADï¼š             è¯·æ±‚è·å–ç”±Request-URIæ‰€æ ‡è¯†çš„èµ„æºçš„å“åº”æ¶ˆæ¯æŠ¥å¤´</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">PUTï¼š                è¯·æ±‚æœåŠ¡å™¨å­˜å‚¨ä¸€ä¸ªèµ„æºï¼Œå¹¶ç”¨Request-URIä½œä¸ºå…¶æ ‡è¯†ï¼ˆä¿®æ”¹æ•°æ®ï¼‰</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">DELETEï¼š          è¯·æ±‚æœåŠ¡å™¨åˆ é™¤å¯¹åº”æ‰€æ ‡è¯†çš„èµ„æº</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">TRACEï¼š            è¯·æ±‚æœåŠ¡å™¨å›é€æ”¶åˆ°çš„è¯·æ±‚ä¿¡æ¯ï¼Œä¸»è¦ç”¨äºæµ‹è¯•æˆ–è¯Šæ–­</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">CONNECTï¼š      å»ºç«‹è¿æ¥éš§é“ï¼Œç”¨äºä»£ç†æœåŠ¡å™¨</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">OPTIONSï¼š       åˆ—å‡ºå¯å¯¹èµ„æºå®è¡Œçš„è¯·æ±‚æ–¹æ³•ï¼Œç”¨æ¥è·¨åŸŸè¯·æ±‚</section></li></ul>\n<hr data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; height: 1px; padding: 0; border: none; border-top: 2px solid #d9b8fa;\">\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; text-align: left; margin: 20px 10px 0px 0px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"font-size: 18px; font-weight: bold; display: inline-block; padding-left: 10px; border-left: 5px solid #916dd5;\">è°ˆä¸€è°ˆGET å’Œ POST çš„åŒºåˆ«</span><span class=\"suffix\"></span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æœ¬è´¨ä¸Šï¼Œåªæ˜¯è¯­ä¹‰ä¸Šçš„åŒºåˆ«ï¼ŒGET ç”¨äºè·å–èµ„æºï¼ŒPOST ç”¨äºæäº¤èµ„æºã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æƒ³è£…é€¼è¯·å‚è€ƒ https://zhuanlan.zhihu.com/p/22536382</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å…·ä½“å·®åˆ«ğŸ‘‡</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">ä»ç¼“å­˜è§’åº¦çœ‹ï¼ŒGET è¯·æ±‚åæµè§ˆå™¨ä¼šä¸»åŠ¨ç¼“å­˜ï¼ŒPOST é»˜è®¤æƒ…å†µä¸‹ä¸èƒ½ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">ä»å‚æ•°è§’åº¦æ¥çœ‹ï¼ŒGETè¯·æ±‚ä¸€èˆ¬æ”¾åœ¨URLä¸­ï¼Œå› æ­¤ä¸å®‰å…¨ï¼ŒPOSTè¯·æ±‚æ”¾åœ¨è¯·æ±‚ä½“ä¸­ï¼Œç›¸å¯¹è€Œè¨€è¾ƒä¸ºå®‰å…¨ï¼Œä½†æ˜¯åœ¨æŠ“åŒ…çš„æƒ…å†µä¸‹éƒ½æ˜¯ä¸€æ ·çš„ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">ä»ç¼–ç è§’åº¦çœ‹ï¼ŒGETè¯·æ±‚åªèƒ½ç»è¡ŒURLç¼–ç ï¼Œåªèƒ½æ¥å—ASCIIç ï¼Œè€ŒPOSTæ”¯æŒæ›´å¤šçš„ç¼–ç ç±»å‹ä¸”ä¸å¯¹æ•°æ®ç±»å‹é™å€¼ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">GETè¯·æ±‚å¹‚ç­‰ï¼ŒPOSTè¯·æ±‚ä¸å¹‚ç­‰ï¼Œå¹‚ç­‰æŒ‡å‘é€ M å’Œ N æ¬¡è¯·æ±‚ï¼ˆä¸¤è€…ä¸ç›¸åŒä¸”éƒ½å¤§äº1ï¼‰ï¼ŒæœåŠ¡å™¨ä¸Šèµ„æºçš„çŠ¶æ€ä¸€è‡´ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">GETè¯·æ±‚ä¼šä¸€æ¬¡æ€§å‘é€è¯·æ±‚æŠ¥æ–‡ï¼ŒPOSTè¯·æ±‚é€šå¸¸åˆ†ä¸ºä¸¤ä¸ªTCPæ•°æ®åŒ…ï¼Œé¦–å…ˆå‘ header éƒ¨åˆ†ï¼Œå¦‚æœæœåŠ¡å™¨å“åº” 100(continue)ï¼Œ ç„¶åå‘ body éƒ¨åˆ†ã€‚</section></li></ul>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ä»åº”ç”¨åœºæ™¯è§’åº¦æ¥çœ‹ï¼ŒGet å¤šç”¨äºæ— å‰¯ä½œç”¨ï¼Œå¹‚ç­‰çš„åœºæ™¯ï¼Œä¾‹å¦‚æœç´¢å…³é”®å­—ã€‚Post å¤šç”¨äºå‰¯ä½œç”¨ï¼Œä¸å¹‚ç­‰çš„åœºæ™¯ï¼Œä¾‹å¦‚æ³¨å†Œã€‚</p>\n<hr data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; height: 1px; padding: 0; border: none; border-top: 2px solid #d9b8fa;\">\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; text-align: left; margin: 20px 10px 0px 0px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"font-size: 18px; font-weight: bold; display: inline-block; padding-left: 10px; border-left: 5px solid #916dd5;\">options æ–¹æ³•æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</span><span class=\"suffix\"></span></h2>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><p style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">OPTIONS è¯·æ±‚ä¸ HEAD ç±»ä¼¼ï¼Œä¸€èˆ¬ä¹Ÿæ˜¯ç”¨äºå®¢æˆ·ç«¯æŸ¥çœ‹æœåŠ¡å™¨çš„æ€§èƒ½ã€‚</p>\n</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><p style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">è¿™ä¸ªæ–¹æ³•ä¼šè¯·æ±‚æœåŠ¡å™¨è¿”å›è¯¥èµ„æºæ‰€æ”¯æŒçš„æ‰€æœ‰ HTTP è¯·æ±‚æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šç”¨'*'æ¥ä»£æ›¿èµ„æºåç§°ï¼Œå‘æœåŠ¡å™¨å‘é€ OPTIONS è¯·æ±‚ï¼Œå¯ä»¥æµ‹è¯•æœåŠ¡å™¨åŠŸèƒ½æ˜¯å¦æ­£å¸¸ã€‚</p>\n</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><p style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">JS çš„ XMLHttpRequestå¯¹è±¡è¿›è¡Œ CORS è·¨åŸŸèµ„æºå…±äº«æ—¶ï¼Œå¯¹äºå¤æ‚è¯·æ±‚ï¼Œå°±æ˜¯ä½¿ç”¨ OPTIONS æ–¹æ³•å‘é€å—…æ¢è¯·æ±‚ï¼Œä»¥åˆ¤æ–­æ˜¯å¦æœ‰å¯¹æŒ‡å®šèµ„æºçš„è®¿é—®æƒé™ã€‚</p>\n</section></li></ul>\n<hr data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; height: 1px; padding: 0; border: none; border-top: 2px solid #d9b8fa;\">\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; text-align: left; margin: 20px 10px 0px 0px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"font-size: 18px; font-weight: bold; display: inline-block; padding-left: 10px; border-left: 5px solid #916dd5;\">è°ˆä¸€è°ˆä½ å¯¹URLç†è§£</span><span class=\"suffix\"></span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ç»Ÿä¸€èµ„æºå®šä½ç¬¦çš„ç®€ç§°ï¼ŒUniform Resource Locatorï¼Œå¸¸å¸¸è¢«ç§°ä¸ºç½‘å€ï¼Œæ˜¯å› ç‰¹ç½‘ä¸Šæ ‡å‡†çš„èµ„æºåœ°å€ã€‚</p>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">ç»„æˆ</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">é€šç”¨çš„æ ¼å¼ï¼šscheme://host[:port]/path/â€¦/?query#anchor</p>\n<section class=\"table-container\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"overflow-x: auto;\"><table style=\"display: table; text-align: left;\">\n<thead>\n<tr style=\"border: 0; border-top: 1px solid #ccc; background-color: white;\">\n<th style=\"border: 1px solid #ccc; padding: 5px 10px; text-align: left; font-weight: bold; background-color: #f0f0f0; font-size: 14px; min-width: 85px;\">åç§°</th>\n<th style=\"border: 1px solid #ccc; padding: 5px 10px; font-weight: bold; background-color: #f0f0f0; font-size: 14px; min-width: 85px; text-align: left;\">åŠŸèƒ½</th>\n</tr>\n</thead>\n<tbody style=\"border: 0;\">\n<tr style=\"border: 0; border-top: 1px solid #ccc; background-color: white;\">\n<td style=\"border: 1px solid #ccc; padding: 5px 10px; text-align: left; font-size: 14px; min-width: 85px;\">scheme</td>\n<td style=\"border: 1px solid #ccc; padding: 5px 10px; font-size: 14px; min-width: 85px; text-align: left;\">è®¿é—®æœåŠ¡å™¨ä»¥è·å–èµ„æºæ—¶è¦ä½¿ç”¨å“ªç§åè®®ï¼Œæ¯”å¦‚ï¼šhttpï¼Œhttps å’Œ FTP ç­‰</td>\n</tr>\n<tr style=\"border: 0; border-top: 1px solid #ccc; background-color: #F8F8F8;\">\n<td style=\"border: 1px solid #ccc; padding: 5px 10px; text-align: left; font-size: 14px; min-width: 85px;\">host</td>\n<td style=\"border: 1px solid #ccc; padding: 5px 10px; font-size: 14px; min-width: 85px; text-align: left;\">HTTP æœåŠ¡å™¨çš„ IP åœ°å€æˆ–è€…åŸŸå</td>\n</tr>\n<tr style=\"border: 0; border-top: 1px solid #ccc; background-color: white;\">\n<td style=\"border: 1px solid #ccc; padding: 5px 10px; text-align: left; font-size: 14px; min-width: 85px;\">port</td>\n<td style=\"border: 1px solid #ccc; padding: 5px 10px; font-size: 14px; min-width: 85px; text-align: left;\">HTTP æœåŠ¡å™¨çš„é»˜è®¤ç«¯å£æ˜¯ 80ï¼ŒHTTPSé»˜è®¤ç«¯å£æ˜¯443ï¼Œè¿™ç§æƒ…å†µä¸‹ç«¯å£å·å¯ä»¥çœç•¥ï¼Œå¦‚æœä½¿ç”¨äº†åˆ«çš„ç«¯å£ï¼Œå¿…é¡»æŒ‡æ˜ã€‚ä¸åŒçš„ç«¯å£ï¼Œä½ å¯ä»¥è®¤ä¸ºæ˜¯ä¸åŒçš„åº”ç”¨ç¨‹åºã€‚</td>\n</tr>\n<tr style=\"border: 0; border-top: 1px solid #ccc; background-color: #F8F8F8;\">\n<td style=\"border: 1px solid #ccc; padding: 5px 10px; text-align: left; font-size: 14px; min-width: 85px;\">path</td>\n<td style=\"border: 1px solid #ccc; padding: 5px 10px; font-size: 14px; min-width: 85px; text-align: left;\">è®¿é—®èµ„æºçš„è·¯å¾„</td>\n</tr>\n<tr style=\"border: 0; border-top: 1px solid #ccc; background-color: white;\">\n<td style=\"border: 1px solid #ccc; padding: 5px 10px; text-align: left; font-size: 14px; min-width: 85px;\">query-string</td>\n<td style=\"border: 1px solid #ccc; padding: 5px 10px; font-size: 14px; min-width: 85px; text-align: left;\">å‘ç»™ http æœåŠ¡å™¨çš„æ•°æ®</td>\n</tr>\n<tr style=\"border: 0; border-top: 1px solid #ccc; background-color: #F8F8F8;\">\n<td style=\"border: 1px solid #ccc; padding: 5px 10px; text-align: left; font-size: 14px; min-width: 85px;\">anchor</td>\n<td style=\"border: 1px solid #ccc; padding: 5px 10px; font-size: 14px; min-width: 85px; text-align: left;\">é”šç‚¹</td>\n</tr>\n</tbody>\n</table>\n</section><p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ä¸¾ä¸ªä¾‹å­ğŸ‘‡</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;\"><span style=\"display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #f8f8f8; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #333; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #f8f8f8; border-radius: 5px;\">https://www.baidu.com/s?tn=baidu&amp;bar=&amp;wd=TianTian<br></code></pre>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">è¿™ä¸ªURLä¸­ï¼Œhttpså°±æ˜¯åè®®ï¼Œwww.baidu.comå°±æ˜¯åŸŸåï¼Œé»˜è®¤ç«¯å£æ˜¯443ï¼Œ/så°±æ˜¯è¯·æ±‚çš„pathï¼Œ<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">tn=baidu&amp;bar=&amp;wd=TianTian</code>è¿™ä¸ªå°±æ˜¯query</p>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">URL ç¼–ç </span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">URL åªèƒ½ä½¿ç”¨ <a href=\"https://www.w3school.com.cn/tags/html_ref_ascii.asp\" style=\"text-decoration: none; word-wrap: break-word; color: #916dd5; font-weight: bolder; border-bottom: 1px solid #916dd5;\">ASCII å­—ç¬¦é›†</a>æ¥é€šè¿‡å› ç‰¹ç½‘è¿›è¡Œå‘é€ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">ç”±äº URL å¸¸å¸¸ä¼šåŒ…å« ASCII é›†åˆä¹‹å¤–çš„å­—ç¬¦ï¼ŒURL å¿…é¡»è½¬æ¢ä¸ºæœ‰æ•ˆçš„ ASCII æ ¼å¼ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">URL ç¼–ç ä½¿ç”¨ \"%\" å…¶åè·Ÿéšä¸¤ä½çš„åå…­è¿›åˆ¶æ•°æ¥æ›¿æ¢é ASCII å­—ç¬¦ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">URL ä¸èƒ½åŒ…å«ç©ºæ ¼ã€‚URL ç¼–ç é€šå¸¸ä½¿ç”¨ + æ¥æ›¿æ¢ç©ºæ ¼ã€‚</section></li></ul>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ä¸¾ä¸ªä¾‹å­ğŸ‘‡</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\"><code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">å¤©å¤©</code>è½¬æ¢ä¸ºæœ‰æ•ˆçš„ASCIIæ ¼å¼å°±æ˜¯<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">%CC%EC%CC%EC</code></p>\n<hr data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; height: 1px; padding: 0; border: none; border-top: 2px solid #d9b8fa;\">\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; text-align: left; margin: 20px 10px 0px 0px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"font-size: 18px; font-weight: bold; display: inline-block; padding-left: 10px; border-left: 5px solid #916dd5;\">è°ˆä¸€è°ˆé˜Ÿå¤´é˜»å¡é—®é¢˜</span><span class=\"suffix\"></span></h2>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">ä»€ä¹ˆæ˜¯é˜Ÿå¤´é˜»å¡ï¼Ÿ</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å¯¹äºæ¯ä¸€ä¸ªHTTPè¯·æ±‚è€Œè¨€ï¼Œè¿™äº›ä»»åŠ¡æ˜¯ä¼šè¢«æ”¾å…¥ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—ä¸­ä¸²è¡Œæ‰§è¡Œçš„ï¼Œä¸€æ—¦é˜Ÿé¦–ä»»åŠ¡è¯·æ±‚å¤ªæ…¢æ—¶ï¼Œå°±ä¼šé˜»å¡åé¢çš„è¯·æ±‚å¤„ç†ï¼Œè¿™å°±æ˜¯<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">HTTPé˜Ÿå¤´é˜»å¡</code>é—®é¢˜ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æœ‰ä»€ä¹ˆè§£å†³åŠæ³•å—ğŸ‘‡</p>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">å¹¶å‘è¿æ¥</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æˆ‘ä»¬çŸ¥é“å¯¹äºä¸€ä¸ªåŸŸåè€Œè¨€ï¼Œæ˜¯å…è®¸åˆ†é…å¤šä¸ªé•¿è¿æ¥çš„ï¼Œé‚£ä¹ˆå¯ä»¥ç†è§£æˆå¢åŠ äº†ä»»åŠ¡é˜Ÿåˆ—ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸ä¼šå¯¼è‡´ä¸€ä¸ªä»»åŠ¡é˜»å¡äº†è¯¥ä»»åŠ¡é˜Ÿåˆ—çš„å…¶ä»–ä»»åŠ¡ï¼Œåœ¨<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">RFCè§„èŒƒ</code>ä¸­è§„å®šå®¢æˆ·ç«¯æœ€å¤šå¹¶å‘2ä¸ªè¿æ¥ï¼Œä¸è¿‡å®é™…æƒ…å†µå°±æ˜¯è¦æ¯”è¿™ä¸ªè¿˜è¦å¤šï¼Œä¸¾ä¸ªä¾‹å­ï¼ŒChromeä¸­æ˜¯6ä¸ªã€‚</p>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">åŸŸååˆ†ç‰‡</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">é¡¾åæ€ä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ªåŸŸåä¸‹åˆ†å‡ºå¤šä¸ªäºŒçº§åŸŸåå‡ºæ¥ï¼Œè€Œå®ƒä»¬æœ€ç»ˆæŒ‡å‘çš„è¿˜æ˜¯åŒä¸€ä¸ªæœåŠ¡å™¨ï¼Œè¿™æ ·å­çš„è¯å°±å¯ä»¥å¹¶å‘å¤„ç†çš„ä»»åŠ¡é˜Ÿåˆ—æ›´å¤šï¼Œä¹Ÿæ›´å¥½çš„è§£å†³äº†é˜Ÿå¤´é˜»å¡çš„é—®é¢˜ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">TianTian.com</code>ï¼Œå¯ä»¥åˆ†å‡ºå¾ˆå¤šäºŒçº§åŸŸåï¼Œæ¯”å¦‚<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">Day1.TianTian.com</code>ï¼Œ<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">Day2.TianTian.com</code>,<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">Day3.TianTian.com</code>,è¿™æ ·å­å°±å¯ä»¥æœ‰æ•ˆè§£å†³é˜Ÿå¤´é˜»å¡é—®é¢˜ã€‚</p>\n<hr data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; height: 1px; padding: 0; border: none; border-top: 2px solid #d9b8fa;\">\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; text-align: left; margin: 20px 10px 0px 0px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"font-size: 18px; font-weight: bold; display: inline-block; padding-left: 10px; border-left: 5px solid #916dd5;\">è°ˆä¸€è°ˆHTTPæ•°æ®ä¼ è¾“</span><span class=\"suffix\"></span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å¤§æ¦‚é‡åˆ°çš„æƒ…å†µå°±åˆ†ä¸º<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>å®šé•¿æ•°æ®<span>ã€</span></strong> ä¸ <strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>ä¸å®šé•¿æ•°æ®<span>ã€</span></strong>çš„å¤„ç†å§ã€‚</p>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">å®šé•¿æ•°æ®</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å¯¹äºå®šé•¿çš„æ•°æ®åŒ…è€Œè¨€ï¼Œå‘é€ç«¯åœ¨å‘é€æ•°æ®çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦è®¾ç½®<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">Content-Length</code>,æ¥æŒ‡æ˜å‘é€æ•°æ®çš„é•¿åº¦ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å½“ç„¶äº†å¦‚æœé‡‡ç”¨äº†Gzipå‹ç¼©çš„è¯ï¼ŒContent-Lengthè®¾ç½®çš„å°±æ˜¯å‹ç¼©åçš„ä¼ è¾“é•¿åº¦ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æˆ‘ä»¬è¿˜éœ€è¦çŸ¥é“çš„æ˜¯ğŸ‘‡</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">Content-Lengthå¦‚æœå­˜åœ¨å¹¶ä¸”æœ‰æ•ˆçš„è¯ï¼Œåˆ™å¿…é¡»å’Œæ¶ˆæ¯å†…å®¹çš„ä¼ è¾“é•¿åº¦å®Œå…¨ä¸€è‡´ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœè¿‡çŸ­å°±ä¼šæˆªæ–­ï¼Œè¿‡é•¿çš„è¯ï¼Œå°±ä¼šå¯¼è‡´è¶…æ—¶ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">å¦‚æœé‡‡ç”¨çŸ­é“¾æ¥çš„è¯ï¼Œç›´æ¥å¯ä»¥é€šè¿‡æœåŠ¡å™¨å…³é—­è¿æ¥æ¥ç¡®å®šæ¶ˆæ¯çš„ä¼ è¾“é•¿åº¦ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">é‚£ä¹ˆåœ¨HTTP/1.0ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼ŒContent-Lengthå­—æ®µå¯æœ‰å¯æ— ,å› ä¸ºä¸€æ—¦æœåŠ¡å™¨å…³é—­è¿æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥è·å–åˆ°ä¼ è¾“æ•°æ®çš„é•¿åº¦äº†ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">åœ¨HTTP/1.1ç‰ˆæœ¬ä¸­ï¼Œå¦‚æœæ˜¯Keep-aliveçš„è¯ï¼Œchunkedä¼˜å…ˆçº§é«˜äº<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">Content-Length</code>,è‹¥æ˜¯éKeep-aliveï¼Œè·Ÿå‰é¢æƒ…å†µä¸€æ ·ï¼ŒContent-Lengthå¯æœ‰å¯æ— ã€‚</section></li></ul>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">é‚£æ€ä¹ˆæ¥è®¾ç½®<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">Content-Length</code></p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ä¸¾ä¸ªä¾‹å­æ¥çœ‹çœ‹ğŸ‘‡</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;\"><span style=\"display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #f8f8f8; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #333; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #f8f8f8; border-radius: 5px;\">const&nbsp;server&nbsp;=&nbsp;require(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'http'</span>).createServer();<br>server.on(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'request'</span>,&nbsp;(req,&nbsp;res)&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">if</span>(req.url&nbsp;===&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'/index'</span>)&nbsp;{<br>&nbsp;&nbsp;&nbsp;//&nbsp;è®¾ç½®æ•°æ®ç±»å‹<br>&nbsp;&nbsp;&nbsp;&nbsp;res.setHeader(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'Content-Type'</span>,&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'text/plain'</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;res.setHeader(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'Content-Length'</span>,&nbsp;10);<br>&nbsp;&nbsp;&nbsp;&nbsp;res.write(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"ä½ å¥½ï¼Œä½¿ç”¨çš„æ˜¯Content-Lengthè®¾ç½®ä¼ è¾“æ•°æ®å½¢å¼\"</span>);<br>&nbsp;&nbsp;}<br>})<br><br>server.listen(3000,&nbsp;()&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;console.log(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"æˆåŠŸå¯åŠ¨--TinaTian\"</span>);<br>})<br><br></code></pre>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">ä¸å®šé•¿æ•°æ®</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ç°åœ¨é‡‡ç”¨æœ€å¤šçš„å°±æ˜¯HTTP/1.1ç‰ˆæœ¬ï¼Œæ¥å®Œæˆä¼ è¾“æ•°æ®ï¼Œåœ¨ä¿å­˜Keep-aliveçŠ¶æ€ä¸‹ï¼Œå½“æ•°æ®æ˜¯ä¸å®šé•¿çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®æ–°çš„å¤´éƒ¨å­—æ®µğŸ‘‡</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;\"><span style=\"display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #f8f8f8; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #333; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #f8f8f8; border-radius: 5px;\">Transfer-Encoding:&nbsp;chunked<br></code></pre>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">é€šè¿‡chunkedæœºåˆ¶ï¼Œå¯ä»¥å®Œæˆå¯¹ä¸å®šé•¿æ•°æ®çš„å¤„ç†ï¼Œå½“ç„¶äº†ï¼Œä½ éœ€è¦çŸ¥é“çš„æ˜¯</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">å¦‚æœå¤´éƒ¨ä¿¡æ¯ä¸­æœ‰<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">Transfer-Encoding</code>,ä¼˜å…ˆé‡‡ç”¨Transfer-Encodingé‡Œé¢çš„æ–¹æ³•æ¥æ‰¾åˆ°å¯¹åº”çš„é•¿åº¦ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">å¦‚æœè®¾ç½®äº†Transfer-Encodingï¼Œé‚£ä¹ˆContent-Lengthå°†è¢«å¿½è§†ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">ä½¿ç”¨é•¿è¿æ¥çš„è¯ï¼Œä¼šæŒç»­çš„æ¨é€åŠ¨æ€å†…å®¹ã€‚</section></li></ul>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">é‚£æˆ‘ä»¬æ¥æ¨¡æ‹Ÿä¸€ä¸‹å§ğŸ‘‡</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;\"><span style=\"display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #f8f8f8; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #333; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #f8f8f8; border-radius: 5px;\">const&nbsp;server&nbsp;=&nbsp;require(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'http'</span>).createServer();<br>server.on(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'request'</span>,&nbsp;(req,&nbsp;res)&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">if</span>(req.url&nbsp;===&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'/index'</span>)&nbsp;{<br>&nbsp;&nbsp;&nbsp;//&nbsp;è®¾ç½®æ•°æ®ç±»å‹<br>&nbsp;&nbsp;&nbsp;&nbsp;res.setHeader(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'Content-Type'</span>,&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'text/html;&nbsp;charset=utf8'</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;res.setHeader(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'Content-Length'</span>,&nbsp;10);<br>&nbsp;&nbsp;&nbsp;&nbsp;res.setHeader(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'Transfer-Encoding'</span>,&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'chunked'</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;res.write(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"ä½ å¥½ï¼Œä½¿ç”¨çš„æ˜¯Transfer-Encodingè®¾ç½®ä¼ è¾“æ•°æ®å½¢å¼\"</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;setTimeout(()&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;res.write(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"ç¬¬ä¸€æ¬¡ä¼ è¾“æ•°æ®ç»™æ‚¨&lt;br/&gt;\"</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;1000);<br>&nbsp;&nbsp;&nbsp;&nbsp;res.write(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"éªšç­‰ä¸€ä¸‹\"</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;setTimeout(()&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;res.write(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"ç¬¬ä¸€æ¬¡ä¼ è¾“æ•°æ®ç»™æ‚¨\"</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;res.end()<br>&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;3000);<br>&nbsp;&nbsp;}<br>})<br><br>server.listen(3000,&nbsp;()&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;console.log(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"æˆåŠŸå¯åŠ¨--TinaTian\"</span>);<br>})<br><br></code></pre>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ä¸Šé¢ä½¿ç”¨çš„æ˜¯nodejsä¸­httpæ¨¡å—ï¼Œæœ‰å…´è¶£çš„å°ä¼™ä¼´å¯ä»¥å»è¯•ä¸€è¯•ï¼Œä»¥ä¸Šå°±æ˜¯HTTPå¯¹<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>å®šé•¿æ•°æ®<span>ã€</span></strong>å’Œ<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>ä¸å®šé•¿æ•°æ®<span>ã€</span></strong>ä¼ è¾“è¿‡ç¨‹ä¸­çš„å¤„ç†æ‰‹æ®µã€‚</p>\n<hr data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; height: 1px; padding: 0; border: none; border-top: 2px solid #d9b8fa;\">\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; text-align: left; margin: 20px 10px 0px 0px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"font-size: 18px; font-weight: bold; display: inline-block; padding-left: 10px; border-left: 5px solid #916dd5;\">ä»‹ç»ä¸€ä¸‹HTTPSå’ŒHTTPåŒºåˆ«</span><span class=\"suffix\"></span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">HTTPS è¦æ¯” HTTPS å¤šäº† secure å®‰å…¨æ€§è¿™ä¸ªæ¦‚å¿µï¼Œå®é™…ä¸Šï¼Œ HTTPS å¹¶ä¸æ˜¯ä¸€ä¸ªæ–°çš„åº”ç”¨å±‚åè®®ï¼Œå®ƒå…¶å®å°±æ˜¯ HTTP + TLS/SSL åè®®ç»„åˆè€Œæˆï¼Œè€Œå®‰å…¨æ€§çš„ä¿è¯æ­£æ˜¯ SSL/TLS æ‰€åšçš„å·¥ä½œã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\"><strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>SSL<span>ã€</span></strong></p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å®‰å…¨å¥—æ¥å±‚ï¼ˆSecure Sockets Layerï¼‰</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\"><strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>TLS<span>ã€</span></strong></p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ï¼ˆä¼ è¾“å±‚å®‰å…¨ï¼ŒTransport Layer Securityï¼‰</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ç°åœ¨ä¸»æµçš„ç‰ˆæœ¬æ˜¯ TLS/1.2, ä¹‹å‰çš„ TLS1.0ã€TLS1.1 éƒ½è¢«è®¤ä¸ºæ˜¯ä¸å®‰å…¨çš„ï¼Œåœ¨ä¸ä¹…çš„å°†æ¥ä¼šè¢«å®Œå…¨æ·˜æ±°ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\"><strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>HTTPS å°±æ˜¯èº«æŠ«äº†ä¸€å±‚ SSL çš„ HTTP<span>ã€</span></strong>ã€‚</p>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://user-images.githubusercontent.com/34484322/89356445-626c9600-d6f0-11ea-9f89-dbc77bd4ac4e.png\" alt=\"HTTPä¸HTTPSåŒºåˆ«\" style=\"max-width: 100%; border-radius: 6px; display: block; margin: 20px auto; object-fit: contain; box-shadow: 2px 4px 7px #999;\"><figcaption style=\"margin-top: 5px; text-align: center; color: #888; display: block; font-size: 13px;\">HTTPä¸HTTPSåŒºåˆ«</figcaption></figure>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">é‚£ä¹ˆåŒºåˆ«æœ‰å“ªäº›å‘¢ğŸ‘‡</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">HTTP æ˜¯æ˜æ–‡ä¼ è¾“åè®®ï¼ŒHTTPS åè®®æ˜¯ç”± SSL+HTTP åè®®æ„å»ºçš„å¯è¿›è¡ŒåŠ å¯†ä¼ è¾“ã€èº«ä»½è®¤è¯çš„ç½‘ç»œåè®®ï¼Œæ¯” HTTP åè®®å®‰å…¨ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">HTTPSæ¯”HTTPæ›´åŠ å®‰å…¨ï¼Œå¯¹æœç´¢å¼•æ“æ›´å‹å¥½ï¼Œåˆ©äºSEO,è°·æ­Œã€ç™¾åº¦ä¼˜å…ˆç´¢å¼•HTTPSç½‘é¡µã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">HTTPSæ ‡å‡†ç«¯å£443ï¼ŒHTTPæ ‡å‡†ç«¯å£80ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">HTTPSéœ€è¦ç”¨åˆ°SSLè¯ä¹¦ï¼Œè€ŒHTTPä¸ç”¨ã€‚</section></li></ul>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æˆ‘è§‰å¾—è®°ä½ä»¥ä¸‹ä¸¤ç‚¹HTTPSä¸»è¦ä½œç”¨å°±è¡ŒğŸ‘‡</p>\n<ol data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: decimal; font-size: 15px;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">å¯¹æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œå¹¶å»ºç«‹ä¸€ä¸ªä¿¡æ¯å®‰å…¨é€šé“ï¼Œæ¥ä¿è¯ä¼ è¾“è¿‡ç¨‹ä¸­çš„æ•°æ®å®‰å…¨;</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">å¯¹ç½‘ç«™æœåŠ¡å™¨è¿›è¡ŒçœŸå®èº«ä»½è®¤è¯ã€‚</section></li></ol>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; text-align: left; margin: 20px 10px 0px 0px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"font-size: 18px; font-weight: bold; display: inline-block; padding-left: 10px; border-left: 5px solid #916dd5;\">ä»‹ç»ä¸€ä¸ªHTTPSå·¥ä½œåŸç†</span><span class=\"suffix\"></span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ä¸Šä¸€èŠ‚æ¥çœ‹ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠHTTPSç†è§£æˆ<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>HTTPS = HTTP + SSL/TLS<span>ã€</span></strong></p>\n<blockquote data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"display: block; font-size: 0.9em; overflow: auto; overflow-scrolling: touch; border-left: 3px solid rgba(0, 0, 0, 0.4); color: #6a737d; padding-top: 10px; padding-bottom: 10px; padding-left: 20px; padding-right: 10px; margin-bottom: 20px; margin-top: 20px; border-left-color: #d89cf6; background: #f4eeff;\">\n<p style=\"padding-top: 8px; padding-bottom: 8px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px; margin: 0px; color: black; line-height: 26px;\">TLS/SSL çš„åŠŸèƒ½å®ç°ä¸»è¦ä¾èµ–äºä¸‰ç±»åŸºæœ¬ç®—æ³•ï¼š<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">æ•£åˆ—å‡½æ•°</code> ã€<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">å¯¹ç§°åŠ å¯†</code>å’Œ<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #916dd5; font-weight: bolder; background: none;\">éå¯¹ç§°åŠ å¯†</code>ï¼Œå…¶åˆ©ç”¨éå¯¹ç§°åŠ å¯†å®ç°èº«ä»½è®¤è¯å’Œå¯†é’¥åå•†ï¼Œå¯¹ç§°åŠ å¯†ç®—æ³•é‡‡ç”¨åå•†çš„å¯†é’¥å¯¹æ•°æ®åŠ å¯†ï¼ŒåŸºäºæ•£åˆ—å‡½æ•°éªŒè¯ä¿¡æ¯çš„å®Œæ•´æ€§ã€‚</p>\n</blockquote>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">å¯¹ç§°åŠ å¯†</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">åŠ å¯†å’Œè§£å¯†ç”¨åŒä¸€ä¸ªç§˜é’¥çš„åŠ å¯†æ–¹å¼å«åšå¯¹ç§°åŠ å¯†ã€‚Clientå®¢æˆ·ç«¯å’ŒServerç«¯å…±ç”¨ä¸€å¥—å¯†é’¥ï¼Œè¿™æ ·å­çš„åŠ å¯†è¿‡ç¨‹ä¼¼ä¹å¾ˆè®©äººç†è§£ï¼Œä½†æ˜¯éšä¹‹ä¼šäº§ç”Ÿä¸€äº›é—®é¢˜ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\"><strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>é—®é¢˜ä¸€:<span>ã€</span></strong> WWWä¸‡ç»´ç½‘æœ‰è®¸è®¸å¤šå¤šçš„å®¢æˆ·ç«¯ï¼Œä¸å¯èƒ½éƒ½ç”¨ç§˜é’¥Aè¿›è¡Œä¿¡æ¯åŠ å¯†ï¼Œè¿™æ ·å­å¾ˆä¸åˆç†ï¼Œæ‰€ä»¥è§£å†³åŠæ³•å°±æ˜¯ä½¿ç”¨ä¸€ä¸ªå®¢æˆ·ç«¯ä½¿ç”¨ä¸€ä¸ªå¯†é’¥è¿›è¡ŒåŠ å¯†ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\"><strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>é—®é¢˜äºŒ:<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>æ—¢ç„¶ä¸åŒçš„å®¢æˆ·ç«¯ä½¿ç”¨ä¸åŒçš„å¯†é’¥ï¼Œé‚£ä¹ˆ<span>ã€</span></strong>å¯¹ç§°åŠ å¯†çš„å¯†é’¥å¦‚ä½•ä¼ è¾“ï¼Ÿ<span>ã€</span></strong> é‚£ä¹ˆè§£å†³çš„åŠæ³•åªèƒ½æ˜¯<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>ä¸€ç«¯ç”Ÿæˆä¸€ä¸ªç§˜é’¥ï¼Œç„¶åé€šè¿‡HTTPä¼ è¾“ç»™å¦ä¸€ç«¯<span>ã€</span></strong>ï¼Œé‚£ä¹ˆè¿™æ ·å­åˆä¼šäº§ç”Ÿæ–°çš„é—®é¢˜ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\"><strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>é—®é¢˜ä¸‰:<span>ã€</span></strong> è¿™ä¸ªä¼ è¾“å¯†é’¥çš„è¿‡ç¨‹ï¼Œåˆå¦‚ä½•ä¿è¯åŠ å¯†ï¼Ÿ<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>å¦‚æœè¢«ä¸­é—´äººæ‹¦æˆªï¼Œå¯†é’¥ä¹Ÿä¼šè¢«è·å–,<span>ã€</span></strong> é‚£ä¹ˆä½ ä¼šè¯´å¯¹å¯†é’¥å†è¿›è¡ŒåŠ å¯†ï¼Œé‚£åˆæ€ä¹ˆä¿å­˜å¯¹å¯†é’¥åŠ å¯†çš„è¿‡ç¨‹ï¼Œæ˜¯åŠ å¯†çš„è¿‡ç¨‹ï¼Ÿ</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬ä¼¼ä¹æƒ³æ˜ç™½äº†ï¼Œä½¿ç”¨å¯¹ç§°åŠ å¯†çš„æ–¹å¼ï¼Œè¡Œä¸é€šï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é‡‡ç”¨éå¯¹ç§°åŠ å¯†ğŸ‘‡</p>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">éå¯¹ç§°åŠ å¯†</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">é€šè¿‡ä¸Šé¢çš„åˆ†æï¼Œå¯¹ç§°åŠ å¯†çš„æ–¹å¼è¡Œä¸é€šï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¥æ¢³ç†ä¸€ä¸‹éå¯¹ç§°åŠ å¯†ã€‚é‡‡ç”¨çš„ç®—æ³•æ˜¯RSAï¼Œæ‰€ä»¥åœ¨ä¸€äº›æ–‡ç« ä¸­ä¹Ÿä¼šçœ‹è§<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>ä¼ ç»ŸRSAæ¡æ‰‹<span>ã€</span></strong>ï¼ŒåŸºäºç°åœ¨TLSä¸»æµç‰ˆæœ¬æ˜¯1.2ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥æ¢³ç†çš„æ˜¯<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>TLS/1.2æ¡æ‰‹è¿‡ç¨‹<span>ã€</span></strong>ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">éå¯¹ç§°åŠ å¯†ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ˜ç¡®çš„ç‚¹æ˜¯ğŸ‘‡</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">æœ‰ä¸€å¯¹ç§˜é’¥ï¼Œ<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>å…¬é’¥<span>ã€</span></strong>å’Œ<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>ç§é’¥<span>ã€</span></strong>ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">å…¬é’¥åŠ å¯†çš„å†…å®¹ï¼Œåªæœ‰ç§é’¥å¯ä»¥è§£å¼€ï¼Œç§é’¥åŠ å¯†çš„å†…å®¹ï¼Œæ‰€æœ‰çš„å…¬é’¥éƒ½å¯ä»¥è§£å¼€ï¼Œè¿™é‡Œè¯´çš„<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>å…¬é’¥éƒ½å¯ä»¥è§£å¼€ï¼ŒæŒ‡çš„æ˜¯ä¸€å¯¹ç§˜é’¥<span>ã€</span></strong>ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">å…¬é’¥å¯ä»¥å‘é€ç»™æ‰€æœ‰çš„å®¢æˆ·ç«¯ï¼Œç§é’¥åªä¿å­˜åœ¨æœåŠ¡å™¨ç«¯ã€‚</section></li></ul>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">ä¸»è¦å·¥ä½œæµç¨‹</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æ¢³ç†èµ·æ¥ï¼Œå¯ä»¥æŠŠ<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>TLS 1.2 æ¡æ‰‹è¿‡ç¨‹<span>ã€</span></strong>åˆ†ä¸ºä¸»è¦çš„äº”æ­¥ğŸ‘‡</p>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://user-images.githubusercontent.com/34484322/89356430-58e32e00-d6f0-11ea-9320-115133c36e3e.png\" alt style=\"max-width: 100%; border-radius: 6px; display: block; margin: 20px auto; object-fit: contain; box-shadow: 2px 4px 7px #999;\"></figure>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å›¾ç‰‡å†…å®¹æ¥è‡ª<a href=\"https://juejin.im/user/4283353031252967\" style=\"text-decoration: none; word-wrap: break-word; color: #916dd5; font-weight: bolder; border-bottom: 1px solid #916dd5;\">æµªé‡Œè¡ŒèˆŸ</a></p>\n<h4 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 18px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">æ­¥éª¤(1)</span><span class=\"suffix\" style=\"display: none;\"></span></h4>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">Clientå‘èµ·ä¸€ä¸ªHTTPSè¯·æ±‚ï¼Œè¿æ¥443ç«¯å£ã€‚è¿™ä¸ªè¿‡ç¨‹å¯ä»¥ç†è§£æˆæ˜¯<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>è¯·æ±‚å…¬é’¥çš„è¿‡ç¨‹<span>ã€</span></strong>ã€‚</p>\n<h4 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 18px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">æ­¥éª¤(2)</span><span class=\"suffix\" style=\"display: none;\"></span></h4>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">Serverç«¯æ”¶åˆ°è¯·æ±‚åï¼Œé€šè¿‡ç¬¬ä¸‰æ–¹æœºæ„ç§é’¥åŠ å¯†ï¼Œä¼šæŠŠæ•°å­—è¯ä¹¦ï¼ˆä¹Ÿå¯ä»¥è®¤ä¸ºæ˜¯å…¬é’¥è¯ä¹¦ï¼‰å‘é€ç»™Clientã€‚</p>\n<h4 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 18px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">æ­¥éª¤(3)</span><span class=\"suffix\" style=\"display: none;\"></span></h4>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">æµè§ˆå™¨å®‰è£…åä¼šè‡ªåŠ¨å¸¦ä¸€äº›æƒå¨ç¬¬ä¸‰æ–¹æœºæ„å…¬é’¥ï¼Œä½¿ç”¨åŒ¹é…çš„å…¬é’¥å¯¹æ•°å­—ç­¾åè¿›è¡Œè§£å¯†ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">æ ¹æ®ç­¾åç”Ÿæˆçš„è§„åˆ™å¯¹ç½‘ç«™ä¿¡æ¯è¿›è¡Œæœ¬åœ°ç­¾åç”Ÿæˆï¼Œç„¶åä¸¤è€…æ¯”å¯¹ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">é€šè¿‡æ¯”å¯¹ä¸¤è€…ç­¾åï¼ŒåŒ¹é…åˆ™è¯´æ˜è®¤è¯é€šè¿‡ï¼Œä¸åŒ¹é…åˆ™è·å–è¯ä¹¦å¤±è´¥ã€‚</section></li></ul>\n<h4 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 18px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">æ­¥éª¤(4)</span><span class=\"suffix\" style=\"display: none;\"></span></h4>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">åœ¨å®‰å…¨æ‹¿åˆ°<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>æœåŠ¡å™¨å…¬é’¥<span>ã€</span></strong>åï¼Œå®¢æˆ·ç«¯Clientéšæœºç”Ÿæˆä¸€ä¸ª<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>å¯¹ç§°å¯†é’¥<span>ã€</span></strong>ï¼Œä½¿ç”¨<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>æœåŠ¡å™¨å…¬é’¥<span>ã€</span></strong>ï¼ˆè¯ä¹¦çš„å…¬é’¥ï¼‰åŠ å¯†è¿™ä¸ª<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>å¯¹ç§°å¯†é’¥<span>ã€</span></strong>ï¼Œå‘é€ç»™Server(æœåŠ¡å™¨)ã€‚</p>\n<h4 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 18px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">æ­¥éª¤(5)</span><span class=\"suffix\" style=\"display: none;\"></span></h4>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">Server(æœåŠ¡å™¨)é€šè¿‡è‡ªå·±çš„ç§é’¥ï¼Œå¯¹ä¿¡æ¯è§£å¯†ï¼Œè‡³æ­¤å¾—åˆ°äº†<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>å¯¹ç§°å¯†é’¥<span>ã€</span></strong>ï¼Œæ­¤æ—¶ä¸¤è€…éƒ½æ‹¥æœ‰äº†ç›¸åŒçš„<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>å¯¹ç§°å¯†é’¥<span>ã€</span></strong>ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æ¥ä¸‹æ¥ï¼Œå°±å¯ä»¥é€šè¿‡è¯¥å¯¹ç§°å¯†é’¥å¯¹ä¼ è¾“çš„ä¿¡æ¯åŠ å¯†/è§£å¯†å•¦ï¼Œä»ä¸Šé¢å›¾ä¸¾ä¸ªä¾‹å­ğŸ‘‡</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">Clientç”¨æˆ·ä½¿ç”¨è¯¥<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>å¯¹ç§°å¯†é’¥<span>ã€</span></strong>åŠ å¯†'æ˜æ–‡å†…å®¹B',å‘é€ç»™Server(æœåŠ¡å™¨)</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">Serverä½¿ç”¨è¯¥<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>å¯¹ç§°å¯†é’¥<span>ã€</span></strong>è¿›è¡Œè§£å¯†æ¶ˆæ¯ï¼Œå¾—åˆ°æ˜æ–‡å†…å®¹Bã€‚</section></li></ul>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æ¥ä¸‹æ¥è€ƒè™‘ä¸€ä¸ªé—®é¢˜ï¼Œ<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>å¦‚æœå…¬é’¥è¢«ä¸­é—´äººæ‹¿åˆ°çº‚æ”¹æ€ä¹ˆåŠå‘¢ï¼Ÿ<span>ã€</span></strong></p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ä»¥ä¸‹å›¾ç‰‡æ¥è‡ª<a href=\"https://juejin.im/user/694547078451278\" style=\"text-decoration: none; word-wrap: break-word; color: #916dd5; font-weight: bolder; border-bottom: 1px solid #916dd5;\">leocoder</a></p>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://user-images.githubusercontent.com/34484322/89356414-4cf76c00-d6f0-11ea-9b1a-5d4e4adee530.png\" alt=\"ä¸­é—´äººè·å–å…¬é’¥\" style=\"max-width: 100%; border-radius: 6px; display: block; margin: 20px auto; object-fit: contain; box-shadow: 2px 4px 7px #999;\"><figcaption style=\"margin-top: 5px; text-align: center; color: #888; display: block; font-size: 13px;\">ä¸­é—´äººè·å–å…¬é’¥</figcaption></figure>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\"><strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>å®¢æˆ·ç«¯å¯èƒ½æ‹¿åˆ°çš„å…¬é’¥æ˜¯å‡çš„ï¼Œè§£å†³åŠæ³•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ<span>ã€</span></strong></p>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">ç¬¬ä¸‰æ–¹è®¤è¯</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å®¢æˆ·ç«¯æ— æ³•è¯†åˆ«ä¼ å›å…¬é’¥æ˜¯ä¸­é—´äººçš„ï¼Œè¿˜æ˜¯æœåŠ¡å™¨çš„ï¼Œè¿™æ˜¯é—®é¢˜çš„æ ¹æœ¬ï¼Œæˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥é€šè¿‡æŸç§è§„èŒƒå¯ä»¥è®©å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éƒ½éµå¾ªæŸç§çº¦å®šå‘¢ï¼Ÿé‚£å°±æ˜¯é€šè¿‡<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>ç¬¬ä¸‰æ–¹è®¤è¯çš„æ–¹å¼<span>ã€</span></strong></p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">åœ¨HTTPSä¸­ï¼Œé€šè¿‡ <strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>è¯ä¹¦<span>ã€</span></strong> + <strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>æ•°å­—ç­¾å<span>ã€</span></strong>æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://user-images.githubusercontent.com/34484322/89356382-37824200-d6f0-11ea-8c02-630f6362ef91.png\" alt style=\"max-width: 100%; border-radius: 6px; display: block; margin: 20px auto; object-fit: contain; box-shadow: 2px 4px 7px #999;\"></figure>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">è¿™é‡Œå”¯ä¸€ä¸åŒçš„æ˜¯ï¼Œå‡è®¾å¯¹ç½‘ç«™ä¿¡æ¯åŠ å¯†çš„ç®—æ³•æ˜¯MD5ï¼Œé€šè¿‡MD5åŠ å¯†åï¼Œ<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>ç„¶åé€šè¿‡ç¬¬ä¸‰æ–¹æœºæ„çš„ç§é’¥å†æ¬¡å¯¹å…¶åŠ å¯†ï¼Œç”Ÿæˆæ•°å­—ç­¾å<span>ã€</span></strong>ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">è¿™æ ·å­çš„è¯ï¼Œæ•°å­—è¯ä¹¦åŒ…å«æœ‰ä¸¤ä¸ªç‰¹åˆ«é‡è¦çš„ä¿¡æ¯ğŸ‘‰<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>æŸç½‘ç«™å…¬é’¥+æ•°å­—ç­¾å<span>ã€</span></strong></p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æˆ‘ä»¬å†æ¬¡å‡è®¾ä¸­é—´äººæˆªå–åˆ°æœåŠ¡å™¨çš„å…¬é’¥åï¼Œå»æ›¿æ¢æˆè‡ªå·±çš„å…¬é’¥ï¼Œå› ä¸ºæœ‰æ•°å­—ç­¾åçš„å­˜åœ¨ï¼Œè¿™æ ·å­å®¢æˆ·ç«¯éªŒè¯å‘ç°æ•°å­—ç­¾åä¸åŒ¹é…ï¼Œè¿™æ ·å­å°±é˜²æ­¢ä¸­é—´äººæ›¿æ¢å…¬é’¥çš„é—®é¢˜ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">é‚£ä¹ˆå®¢æˆ·ç«¯æ˜¯å¦‚ä½•å»å¯¹æ¯”ä¸¤è€…æ•°å­—ç­¾åçš„å‘¢ï¼Ÿ</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">æµè§ˆå™¨ä¼šå»å®‰è£…ä¸€äº›æ¯”è¾ƒæƒå¨çš„ç¬¬ä¸‰æ–¹è®¤è¯æœºæ„çš„å…¬é’¥ï¼Œæ¯”å¦‚VeriSignã€Symantecä»¥åŠGlobalSignç­‰ç­‰ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">éªŒè¯æ•°å­—ç­¾åçš„æ—¶å€™ï¼Œä¼šç›´æ¥ä»æœ¬åœ°æ‹¿åˆ°ç›¸åº”çš„ç¬¬ä¸‰æ–¹çš„å…¬é’¥ï¼Œå¯¹ç§é’¥åŠ å¯†åçš„æ•°å­—ç­¾åè¿›è¡Œè§£å¯†å¾—åˆ°çœŸæ­£çš„ç­¾åã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">ç„¶åå®¢æˆ·ç«¯åˆ©ç”¨ç­¾åç”Ÿæˆè§„åˆ™è¿›è¡Œç­¾åç”Ÿæˆï¼Œçœ‹ä¸¤ä¸ªç­¾åæ˜¯å¦åŒ¹é…ï¼Œå¦‚æœåŒ¹é…è®¤è¯é€šè¿‡ï¼Œä¸åŒ¹é…åˆ™è·å–è¯ä¹¦å¤±è´¥ã€‚</section></li></ul>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">æ•°å­—ç­¾åä½œç”¨</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æ•°å­—ç­¾åï¼šå°†ç½‘ç«™çš„ä¿¡æ¯ï¼Œé€šè¿‡ç‰¹å®šçš„ç®—æ³•åŠ å¯†ï¼Œæ¯”å¦‚MD5,åŠ å¯†ä¹‹åï¼Œå†é€šè¿‡æœåŠ¡å™¨çš„ç§é’¥è¿›è¡ŒåŠ å¯†ï¼Œå½¢æˆ<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>åŠ å¯†åçš„æ•°å­—ç­¾å<span>ã€</span></strong>ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ç¬¬ä¸‰æ–¹è®¤è¯æœºæ„æ˜¯ä¸€ä¸ªå…¬å¼€çš„å¹³å°ï¼Œä¸­é—´äººå¯ä»¥å»è·å–ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å¦‚æœæ²¡æœ‰æ•°å­—ç­¾åçš„è¯ï¼Œè¿™æ ·å­å¯ä»¥å°±ä¼šæœ‰ä¸‹é¢æƒ…å†µğŸ‘‡</p>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://user-images.githubusercontent.com/34484322/89356394-40731380-d6f0-11ea-9539-46391eedcf47.png\" alt style=\"max-width: 100%; border-radius: 6px; display: block; margin: 20px auto; object-fit: contain; box-shadow: 2px 4px 7px #999;\"></figure>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ä»ä¸Šé¢æˆ‘ä»¬çŸ¥é“ï¼Œå¦‚æœ<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>åªæ˜¯å¯¹ç½‘ç«™ä¿¡æ¯è¿›è¡Œç¬¬ä¸‰æ–¹æœºæ„ç§é’¥åŠ å¯†<span>ã€</span></strong>çš„è¯ï¼Œè¿˜æ˜¯ä¼šå—åˆ°æ¬ºéª—ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å› ä¸ºæ²¡æœ‰è®¤è¯ï¼Œæ‰€ä»¥ä¸­é—´äººä¹Ÿå‘ç¬¬ä¸‰æ–¹è®¤è¯æœºæ„è¿›è¡Œç”³è¯·ï¼Œç„¶åæ‹¦æˆªåæŠŠæ‰€æœ‰çš„ä¿¡æ¯éƒ½æ›¿æ¢æˆè‡ªå·±çš„ï¼Œå®¢æˆ·ç«¯ä»ç„¶å¯ä»¥è§£å¯†ï¼Œå¹¶ä¸”æ— æ³•åˆ¤æ–­è¿™æ˜¯æœåŠ¡å™¨çš„è¿˜æ˜¯ä¸­é—´äººçš„ï¼Œæœ€åé€ æˆæ•°æ®æ³„éœ²ã€‚</p>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\"><strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>æ€»ç»“<span>ã€</span></strong></span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">HTTPSå°±æ˜¯ä½¿ç”¨SSL/TLSåè®®è¿›è¡ŒåŠ å¯†ä¼ è¾“</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">å¤§è‡´æµç¨‹ï¼šå®¢æˆ·ç«¯æ‹¿åˆ°æœåŠ¡å™¨çš„å…¬é’¥ï¼ˆæ˜¯æ­£ç¡®çš„ï¼‰ï¼Œç„¶åå®¢æˆ·ç«¯éšæœºç”Ÿæˆä¸€ä¸ª<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>å¯¹ç§°åŠ å¯†çš„ç§˜é’¥<span>ã€</span></strong>ï¼Œä½¿ç”¨<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>è¯¥å…¬é’¥<span>ã€</span></strong>åŠ å¯†ï¼Œä¼ è¾“ç»™æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯å†é€šè¿‡è§£å¯†æ‹¿åˆ°è¯¥<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>å¯¹ç§°ç§˜é’¥<span>ã€</span></strong>ï¼Œåç»­çš„æ‰€æœ‰ä¿¡æ¯éƒ½é€šè¿‡è¯¥<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>å¯¹ç§°ç§˜é’¥<span>ã€</span></strong>è¿›è¡ŒåŠ å¯†è§£å¯†ï¼Œå®Œæˆæ•´ä¸ªHTTPSçš„æµç¨‹ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>ç¬¬ä¸‰æ–¹è®¤è¯<span>ã€</span></strong>ï¼Œæœ€é‡è¦çš„æ˜¯<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>æ•°å­—ç­¾å<span>ã€</span></strong>ï¼Œé¿å…äº†è·å–çš„å…¬é’¥æ˜¯ä¸­é—´äººçš„ã€‚</section></li></ul>\n<hr data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; height: 1px; padding: 0; border: none; border-top: 2px solid #d9b8fa;\">\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; text-align: left; margin: 20px 10px 0px 0px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"font-size: 18px; font-weight: bold; display: inline-block; padding-left: 10px; border-left: 5px solid #916dd5;\">SSL è¿æ¥æ–­å¼€åå¦‚ä½•æ¢å¤ï¼Ÿ</span><span class=\"suffix\"></span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ä¸€å…±æœ‰ä¸¤ç§æ–¹æ³•æ¥æ¢å¤æ–­å¼€çš„ SSL è¿æ¥ï¼Œä¸€ç§æ˜¯ä½¿ç”¨ session IDï¼Œä¸€ç§æ˜¯ session ticketã€‚</p>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">é€šè¿‡session ID</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ä½¿ç”¨ session ID çš„æ–¹å¼ï¼Œæ¯ä¸€æ¬¡çš„ä¼šè¯éƒ½æœ‰ä¸€ä¸ªç¼–å·ï¼Œå½“å¯¹è¯ä¸­æ–­åï¼Œä¸‹ä¸€æ¬¡é‡æ–°è¿æ¥æ—¶ï¼Œåªè¦å®¢æˆ·ç«¯ç»™å‡ºè¿™ä¸ªç¼–å·ï¼ŒæœåŠ¡å™¨å¦‚æœæœ‰è¿™ä¸ªç¼–å·çš„è®°å½•ï¼Œé‚£ä¹ˆåŒæ–¹å°±å¯ä»¥ç»§ç»­ä½¿ç”¨ä»¥å‰çš„ç§˜é’¥ï¼Œè€Œä¸ç”¨é‡æ–°ç”Ÿæˆä¸€æŠŠã€‚ç›®å‰æ‰€æœ‰çš„æµè§ˆå™¨éƒ½æ”¯æŒè¿™ä¸€ç§æ–¹æ³•ã€‚ä½†æ˜¯è¿™ç§æ–¹æ³•æœ‰ä¸€ä¸ªç¼ºç‚¹æ˜¯ï¼Œsession ID åªèƒ½å¤Ÿå­˜åœ¨ä¸€å°æœåŠ¡å™¨ä¸Šï¼Œå¦‚æœæˆ‘ä»¬çš„è¯·æ±‚é€šè¿‡è´Ÿè½½å¹³è¡¡è¢«è½¬ç§»åˆ°äº†å…¶ä»–çš„æœåŠ¡å™¨ä¸Šï¼Œé‚£ä¹ˆå°±æ— æ³•æ¢å¤å¯¹è¯ã€‚</p>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">é€šè¿‡session ticket</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å¦ä¸€ç§æ–¹å¼æ˜¯ session ticket çš„æ–¹å¼ï¼Œsession ticket æ˜¯æœåŠ¡å™¨åœ¨ä¸Šä¸€æ¬¡å¯¹è¯ä¸­å‘é€ç»™å®¢æˆ·çš„ï¼Œè¿™ä¸ª ticket æ˜¯åŠ å¯†çš„ï¼Œåªæœ‰æœåŠ¡å™¨èƒ½å¤Ÿè§£å¯†ï¼Œé‡Œé¢åŒ…å«äº†æœ¬æ¬¡ä¼šè¯çš„ä¿¡æ¯ï¼Œæ¯”å¦‚å¯¹è¯ç§˜é’¥å’ŒåŠ å¯†æ–¹æ³•ç­‰ã€‚è¿™æ ·ä¸ç®¡æˆ‘ä»¬çš„è¯·æ±‚æ˜¯å¦è½¬ç§»åˆ°å…¶ä»–çš„æœåŠ¡å™¨ä¸Šï¼Œå½“æœåŠ¡å™¨å°† ticket è§£å¯†ä»¥åï¼Œå°±èƒ½å¤Ÿè·å–ä¸Šæ¬¡å¯¹è¯çš„ä¿¡æ¯ï¼Œå°±ä¸ç”¨é‡æ–°ç”Ÿæˆå¯¹è¯ç§˜é’¥äº†ã€‚</p>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; text-align: left; margin: 20px 10px 0px 0px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"font-size: 18px; font-weight: bold; display: inline-block; padding-left: 10px; border-left: 5px solid #916dd5;\">çŸ­è½®è¯¢ã€é•¿è½®è¯¢å’Œ WebSocket é—´çš„åŒºåˆ«ï¼Ÿ</span><span class=\"suffix\"></span></h2>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">çŸ­è½®è¯¢</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">çŸ­è½®è¯¢çš„åŸºæœ¬æ€è·¯:</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">æµè§ˆå™¨æ¯éš”ä¸€æ®µæ—¶é—´å‘æµè§ˆå™¨å‘é€ http è¯·æ±‚ï¼ŒæœåŠ¡å™¨ç«¯åœ¨æ”¶åˆ°è¯·æ±‚åï¼Œä¸è®ºæ˜¯å¦æœ‰æ•°æ®æ›´æ–°ï¼Œéƒ½ç›´æ¥è¿›è¡Œ\nå“åº”ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">è¿™ç§æ–¹å¼å®ç°çš„å³æ—¶é€šä¿¡ï¼Œæœ¬è´¨ä¸Šè¿˜æ˜¯æµè§ˆå™¨å‘é€è¯·æ±‚ï¼ŒæœåŠ¡å™¨æ¥å—è¯·æ±‚çš„ä¸€ä¸ªè¿‡ç¨‹ï¼Œé€šè¿‡è®©å®¢æˆ·ç«¯ä¸æ–­çš„è¿›è¡Œè¯·æ±‚ï¼Œä½¿å¾—å®¢æˆ·ç«¯èƒ½å¤Ÿæ¨¡æ‹Ÿå®æ—¶åœ°æ”¶åˆ°æœåŠ¡å™¨ç«¯çš„æ•°æ®çš„å˜åŒ–ã€‚</section></li></ul>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ä¼˜ç¼ºç‚¹ğŸ‘‡</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><p style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ä¼˜ç‚¹æ˜¯æ¯”è¾ƒç®€å•ï¼Œæ˜“äºç†è§£ã€‚</p>\n</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><p style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ç¼ºç‚¹æ˜¯è¿™ç§æ–¹å¼ç”±äºéœ€è¦ä¸æ–­çš„å»ºç«‹ http è¿æ¥ï¼Œä¸¥é‡æµªè´¹äº†æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯çš„èµ„æºã€‚å½“ç”¨æˆ·å¢åŠ æ—¶ï¼ŒæœåŠ¡å™¨ç«¯çš„å‹åŠ›å°±ä¼šå˜å¤§ï¼Œè¿™æ˜¯å¾ˆä¸åˆç†çš„ã€‚</p>\n</section></li></ul>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">é•¿è½®è¯¢</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">é•¿è½®è¯¢çš„åŸºæœ¬æ€è·¯:</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><p style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">é¦–å…ˆç”±å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œå½“æœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·ç«¯å‘æ¥çš„è¯·æ±‚åï¼ŒæœåŠ¡å™¨ç«¯ä¸ä¼šç›´æ¥è¿›è¡Œå“åº”ï¼Œè€Œæ˜¯å…ˆå°†\nè¿™ä¸ªè¯·æ±‚æŒ‚èµ·ï¼Œç„¶ååˆ¤æ–­æœåŠ¡å™¨ç«¯æ•°æ®æ˜¯å¦æœ‰æ›´æ–°ã€‚</p>\n</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><p style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å¦‚æœæœ‰æ›´æ–°ï¼Œåˆ™è¿›è¡Œå“åº”ï¼Œå¦‚æœä¸€ç›´æ²¡æœ‰æ•°æ®ï¼Œåˆ™åˆ°è¾¾ä¸€å®šçš„æ—¶é—´é™åˆ¶æ‰è¿”å›ã€‚å®¢æˆ·ç«¯ JavaScript å“åº”å¤„ç†å‡½æ•°ä¼šåœ¨å¤„ç†å®ŒæœåŠ¡å™¨è¿”å›çš„ä¿¡æ¯åï¼Œå†æ¬¡å‘å‡ºè¯·æ±‚ï¼Œé‡æ–°å»ºç«‹è¿æ¥ã€‚</p>\n</section></li></ul>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ä¼˜ç¼ºç‚¹ğŸ‘‡</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><p style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">é•¿è½®è¯¢å’ŒçŸ­è½®è¯¢æ¯”èµ·æ¥ï¼Œå®ƒçš„ä¼˜ç‚¹æ˜¯<strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>æ˜æ˜¾å‡å°‘äº†å¾ˆå¤šä¸å¿…è¦çš„ http è¯·æ±‚æ¬¡æ•°<span>ã€</span></strong>ï¼Œç›¸æ¯”ä¹‹ä¸‹èŠ‚çº¦äº†èµ„æºã€‚</p>\n</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><p style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">é•¿è½®è¯¢çš„ç¼ºç‚¹åœ¨äºï¼Œè¿æ¥æŒ‚èµ·ä¹Ÿä¼šå¯¼è‡´èµ„æºçš„æµªè´¹ã€‚</p>\n</section></li></ul>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">WebSocket</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">WebSocket æ˜¯ Html5 å®šä¹‰çš„ä¸€ä¸ªæ–°åè®®ï¼Œä¸ä¼ ç»Ÿçš„ http åè®®ä¸åŒï¼Œè¯¥åè®®å…è®¸ç”±æœåŠ¡å™¨ä¸»åŠ¨çš„å‘å®¢æˆ·ç«¯æ¨é€ä¿¡æ¯ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">ä½¿ç”¨ WebSocket åè®®çš„ç¼ºç‚¹æ˜¯åœ¨æœåŠ¡å™¨ç«¯çš„é…ç½®æ¯”è¾ƒå¤æ‚ã€‚WebSocket æ˜¯ä¸€ä¸ªå…¨åŒå·¥çš„åè®®ï¼Œä¹Ÿå°±æ˜¯é€šä¿¡åŒæ–¹æ˜¯å¹³ç­‰çš„ï¼Œå¯ä»¥ç›¸äº’å‘é€æ¶ˆæ¯ã€‚</section></li></ul>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; text-align: left; margin: 20px 10px 0px 0px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"font-size: 18px; font-weight: bold; display: inline-block; padding-left: 10px; border-left: 5px solid #916dd5;\">è¯´ä¸€è¯´æ­£å‘ä»£ç†å’Œåå‘ä»£ç†</span><span class=\"suffix\"></span></h2>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">æ­£å‘ä»£ç†</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æˆ‘ä»¬å¸¸è¯´çš„ä»£ç†ä¹Ÿå°±æ˜¯æŒ‡æ­£å‘ä»£ç†ï¼Œæ­£å‘ä»£ç†çš„è¿‡ç¨‹ï¼Œå®ƒéšè—äº†çœŸå®çš„è¯·æ±‚å®¢æˆ·ç«¯ï¼ŒæœåŠ¡ç«¯ä¸çŸ¥é“çœŸå®çš„å®¢æˆ·ç«¯æ˜¯è°ï¼Œå®¢æˆ·ç«¯è¯·æ±‚çš„æœåŠ¡éƒ½è¢«ä»£ç†æœåŠ¡å™¨ä»£æ›¿æ¥è¯·æ±‚ã€‚</p>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; color: black; font-size: 16px; font-weight: bold; text-align: center;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid #d89cf6;\">åå‘ä»£ç†</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">è¿™ç§ä»£ç†æ¨¡å¼ä¸‹ï¼Œå®ƒéšè—äº†çœŸå®çš„æœåŠ¡ç«¯ï¼Œå½“æˆ‘ä»¬å‘ä¸€ä¸ªç½‘ç«™å‘èµ·è¯·æ±‚çš„æ—¶å€™ï¼ŒèƒŒåå¯èƒ½æœ‰æˆåƒä¸Šä¸‡å°æœåŠ¡å™¨ä¸ºæˆ‘ä»¬æœåŠ¡ï¼Œå…·ä½“æ˜¯å“ªä¸€å°ï¼Œæˆ‘ä»¬ä¸æ¸…æ¥šï¼Œæˆ‘ä»¬åªéœ€è¦çŸ¥é“åå‘ä»£ç†æœåŠ¡å™¨æ˜¯è°å°±è¡Œï¼Œè€Œä¸”åå‘ä»£ç†æœåŠ¡å™¨ä¼šå¸®æˆ‘ä»¬æŠŠè¯·æ±‚è½¬å‘åˆ°çœŸå®çš„æœåŠ¡å™¨é‚£é‡Œå»ï¼Œä¸€èˆ¬è€Œè¨€åå‘ä»£ç†æœåŠ¡å™¨ä¸€èˆ¬ç”¨æ¥å®ç°è´Ÿè½½å¹³è¡¡ã€‚</p>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; text-align: left; margin: 20px 10px 0px 0px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"font-size: 18px; font-weight: bold; display: inline-block; padding-left: 10px; border-left: 5px solid #916dd5;\">è´Ÿè½½å¹³è¡¡çš„ä¸¤ç§å®ç°æ–¹å¼ï¼Ÿ</span><span class=\"suffix\"></span></h2>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><p style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ä¸€ç§æ˜¯ä½¿ç”¨åå‘ä»£ç†çš„æ–¹å¼ï¼Œç”¨æˆ·çš„è¯·æ±‚éƒ½å‘é€åˆ°åå‘ä»£ç†æœåŠ¡ä¸Šï¼Œç„¶åç”±åå‘ä»£ç†æœåŠ¡å™¨æ¥è½¬å‘è¯·æ±‚åˆ°çœŸå®çš„æœåŠ¡å™¨ä¸Šï¼Œä»¥æ­¤æ¥å®ç°é›†ç¾¤çš„è´Ÿè½½å¹³è¡¡ã€‚</p>\n</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><p style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å¦ä¸€ç§æ˜¯ DNS çš„æ–¹å¼ï¼ŒDNS å¯ä»¥ç”¨äºåœ¨å†—ä½™çš„æœåŠ¡å™¨ä¸Šå®ç°è´Ÿè½½å¹³è¡¡ã€‚å› ä¸ºç°åœ¨ä¸€èˆ¬çš„å¤§å‹ç½‘ç«™ä½¿ç”¨å¤šå°æœåŠ¡å™¨æä¾›æœåŠ¡ï¼Œå› æ­¤ä¸€ä¸ªåŸŸåå¯èƒ½ä¼šå¯¹åº”å¤šä¸ªæœåŠ¡å™¨åœ°å€ã€‚å½“ç”¨æˆ·å‘ç½‘ç«™åŸŸåè¯·æ±‚çš„æ—¶å€™ï¼ŒDNS æœåŠ¡å™¨è¿”å›è¿™ä¸ªåŸŸåæ‰€å¯¹åº”çš„æœåŠ¡å™¨ IP åœ°å€çš„é›†åˆï¼Œä½†åœ¨æ¯ä¸ªå›ç­”ä¸­ï¼Œä¼šå¾ªç¯è¿™äº› IP åœ°å€çš„é¡ºåºï¼Œç”¨æˆ·ä¸€èˆ¬ä¼šé€‰æ‹©æ’åœ¨å‰é¢çš„åœ°å€å‘é€è¯·æ±‚ã€‚ä»¥æ­¤å°†ç”¨æˆ·çš„è¯·æ±‚å‡è¡¡çš„åˆ†é…åˆ°å„ä¸ªä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œè¿™æ ·æ¥å®ç°è´Ÿè½½å‡è¡¡ã€‚è¿™ç§æ–¹å¼æœ‰ä¸€ä¸ªç¼ºç‚¹å°±æ˜¯ï¼Œç”±äº DNS æœåŠ¡å™¨ä¸­å­˜åœ¨ç¼“å­˜ï¼Œæ‰€ä»¥æœ‰å¯èƒ½ä¸€ä¸ªæœåŠ¡å™¨å‡ºç°æ•…éšœåï¼ŒåŸŸåè§£æä»ç„¶è¿”å›çš„æ˜¯é‚£ä¸ª IP åœ°å€ï¼Œå°±ä¼šé€ æˆè®¿é—®çš„é—®é¢˜ã€‚</p>\n</section></li></ul>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; text-align: left; margin: 20px 10px 0px 0px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"font-size: 18px; font-weight: bold; display: inline-block; padding-left: 10px; border-left: 5px solid #916dd5;\">å‚è€ƒ</span><span class=\"suffix\"></span></h2>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><a href=\"https://zhuanlan.zhihu.com/p/25028045\" style=\"text-decoration: none; word-wrap: break-word; color: #916dd5; font-weight: bolder; border-bottom: 1px solid #916dd5;\">å¬è¯´ã€99% çš„äººéƒ½ç†è§£é”™äº† HTTP ä¸­ GET ä¸ POST çš„åŒºåˆ«ã€ï¼Ÿï¼Ÿ</a></section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><a href=\"https://harttle.land/2015/08/15/http-status-code.html#header-11\" style=\"text-decoration: none; word-wrap: break-word; color: #916dd5; font-weight: bolder; border-bottom: 1px solid #916dd5;\">å¦‚ä½•ç†è§£HTTPå“åº”çš„çŠ¶æ€ç ï¼Ÿ</a></section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status\" style=\"text-decoration: none; word-wrap: break-word; color: #916dd5; font-weight: bolder; border-bottom: 1px solid #916dd5;\">HTTP å“åº”ä»£ç  | MDN</a></section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><a href=\"https://juejin.im/post/5eb7f811f265da7bbc7cc5bd\" style=\"text-decoration: none; word-wrap: break-word; color: #916dd5; font-weight: bolder; border-bottom: 1px solid #916dd5;\">å›¾è§£ HTTP ç¼“å­˜</a></section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><a href=\"https://juejin.im/post/5e1870736fb9a02fef3a5dcb#heading-40\" style=\"text-decoration: none; word-wrap: break-word; color: #916dd5; font-weight: bolder; border-bottom: 1px solid #916dd5;\">çœ‹å®Œè¿™ç¯‡HTTPï¼Œè·Ÿé¢è¯•å®˜æ‰¯çš®å°±æ²¡é—®é¢˜äº†</a></section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><a href=\"https://lotabout.me/2019/Things-about-keepalive/\" style=\"text-decoration: none; word-wrap: break-word; color: #916dd5; font-weight: bolder; border-bottom: 1px solid #916dd5;\">HTTP keep-alive äºŒä¸‰äº‹</a></section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><a href=\"https://juejin.im/post/6844903830916694030\" style=\"text-decoration: none; word-wrap: break-word; color: #916dd5; font-weight: bolder; border-bottom: 1px solid #916dd5;\">æ·±å…¥ç†è§£HTTPSå·¥ä½œåŸç†</a></section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><a href=\"https://juejin.im/post/6844903608421449742\" style=\"text-decoration: none; word-wrap: break-word; color: #916dd5; font-weight: bolder; border-bottom: 1px solid #916dd5;\">çœ‹å›¾å­¦HTTPS</a></section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><a href=\"https://cloud.tencent.com/developer/article/1076547\" style=\"text-decoration: none; word-wrap: break-word; color: #916dd5; font-weight: bolder; border-bottom: 1px solid #916dd5;\">è½®è¯¢ã€é•¿è½®è¯¢ã€é•¿è¿æ¥ã€websocket</a></section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><a href=\"http://www.ruanyifeng.com/blog/2016/06/dns.html\" style=\"text-decoration: none; word-wrap: break-word; color: #916dd5; font-weight: bolder; border-bottom: 1px solid #916dd5;\">DNS åŸç†å…¥é—¨</a></section></li></ul>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; text-align: left; margin: 20px 10px 0px 0px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"font-size: 18px; font-weight: bold; display: inline-block; padding-left: 10px; border-left: 5px solid #916dd5;\"><strong style=\"color: #916dd5; font-weight: bold;\"><span>ã€Œ</span>â¤ï¸ æ„Ÿè°¢å¤§å®¶<span>ã€</span></strong></span><span class=\"suffix\"></span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: black; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å¦‚æœä½ è§‰å¾—è¿™ç¯‡å†…å®¹å¯¹ä½ æŒºæœ‰æœ‰å¸®åŠ©çš„è¯ï¼š</p>\n<ol data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: decimal; font-size: 15px;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">ç‚¹èµæ”¯æŒä¸‹å§ï¼Œè®©æ›´å¤šçš„äººä¹Ÿèƒ½çœ‹åˆ°è¿™ç¯‡å†…å®¹ï¼ˆæ”¶è—ä¸ç‚¹èµï¼Œéƒ½æ˜¯è€æµæ°“ -_-ï¼‰</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">æ¬¢è¿åœ¨ç•™è¨€åŒºä¸æˆ‘åˆ†äº«ä½ çš„æƒ³æ³•ï¼Œä¹Ÿæ¬¢è¿ä½ åœ¨ç•™è¨€åŒºè®°å½•ä½ çš„æ€è€ƒè¿‡ç¨‹ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\">è§‰å¾—ä¸é”™çš„è¯ï¼Œä¹Ÿå¯ä»¥é˜…è¯»TianTianè¿‘æœŸæ¢³ç†çš„æ–‡ç« ï¼ˆæ„Ÿè°¢æ˜å‹çš„é¼“åŠ±ä¸æ”¯æŒğŸŒ¹ğŸŒ¹ğŸŒ¹ï¼‰ï¼š\n<ul style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; font-size: 15px; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><a href=\"https://juejin.im/post/6854573215830933512\" style=\"text-decoration: none; word-wrap: break-word; color: #916dd5; font-weight: bolder; border-bottom: 1px solid #916dd5;\">ã€Œä¸€åŠ³æ°¸é€¸ã€é€ä½ 21é“é«˜é¢‘JavaScriptæ‰‹å†™é¢è¯•é¢˜</a>(420+ğŸ‘)</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><a href=\"https://juejin.im/post/6854573215830933512\" style=\"text-decoration: none; word-wrap: break-word; color: #916dd5; font-weight: bolder; border-bottom: 1px solid #916dd5;\">ã€ŒæŸ¥ç¼ºè¡¥æ¼ã€é€ä½ 18é“æµè§ˆå™¨é¢è¯•é¢˜</a>(680+ğŸ‘)</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><a href=\"https://juejin.im/post/6854573211443544078\" style=\"text-decoration: none; word-wrap: break-word; color: #916dd5; font-weight: bolder; border-bottom: 1px solid #916dd5;\">ã€ŒæŸ¥ç¼ºè¡¥æ¼ã€é€ä½  54 é“ JavaScript é¢è¯•é¢˜</a>(580+ğŸ‘)</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><a href=\"https://juejin.im/post/6850418120755494925\" style=\"text-decoration: none; word-wrap: break-word; color: #916dd5; font-weight: bolder; border-bottom: 1px solid #916dd5;\">ã€Œç®—æ³•ä¸æ•°æ®ç»“æ„ã€é“¾è¡¨çš„9ä¸ªåŸºæœ¬æ“ä½œ</a>(160+ğŸ‘)</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><a href=\"https://juejin.im/post/6850037261518684167\" style=\"text-decoration: none; word-wrap: break-word; color: #916dd5; font-weight: bolder; border-bottom: 1px solid #916dd5;\">ã€Œå°æŠ€å·§ã€å†™ç»™ç”·åŒèƒçš„Chrome DevToolsè°ƒè¯•å°æŠ€å·§ï¼Œæ•ˆç‡ğŸš€ğŸš€ğŸš€</a>(210+ğŸ‘)</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><a href=\"https://juejin.im/post/6847902222349500430\" style=\"text-decoration: none; word-wrap: break-word; color: #916dd5; font-weight: bolder; border-bottom: 1px solid #916dd5;\">ã€Œæµè§ˆå™¨å·¥ä½œåŸç†ã€å†™ç»™å¥³å‹çš„ç§˜ç±-æ¸²æŸ“æµç¨‹ç¯‡ï¼ˆ1.1W+å­—ï¼‰</a>(230+ğŸ‘)</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><a href=\"https://juejin.im/post/6846687601806557192\" style=\"text-decoration: none; word-wrap: break-word; color: #916dd5; font-weight: bolder; border-bottom: 1px solid #916dd5;\">ã€Œæ•°ç»„æ–¹æ³•ã€ä»è¯¦ç»†æ“ä½œjsæ•°ç»„åˆ°æµ…æv8ä¸­array.js</a>(220+ğŸ‘)</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-size: 14px; font-weight: normal;\"><a href=\"https://juejin.im/post/6846687590540640263\" style=\"text-decoration: none; word-wrap: break-word; color: #916dd5; font-weight: bolder; border-bottom: 1px solid #916dd5;\">ã€Œæµè§ˆå™¨å·¥ä½œåŸç†ã€å†™ç»™å¥³å‹çš„ç§˜ç±-æµè§ˆå™¨ç»„æˆ&amp;ç½‘ç»œè¯·æ±‚ç¯‡ï¼ˆ1.2Wå­—)</a>(240+ğŸ‘)</section></li></ul>\n</section></li></ol>\n</section>", "user_name": "TianTianUp", "description": "ä¸ªäººå¾®ä¿¡ï¼šDayDay2021", "got_view_count": 229240, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "å‰ç«¯", "concern_user_count": 455667, "user_id": "2295436007711214", "title": "ä¸€æ–‡ç†è§£Macç¯å¢ƒé…ç½®é—®é¢˜", "mark_content": "## å‰è¨€\nä½œä¸ºå¼€å‘è€…ï¼Œæ¯å½“æ–°å®‰è£…æŸä¸ªè½¯ä»¶ï¼Œå¾ˆå®¹æ˜“ä¼šé‡åˆ°ç”µè„‘ç¯å¢ƒå˜é‡é…ç½®ç›¸å…³çš„é—®é¢˜ï¼Œå¤§éƒ¨åˆ†æƒ…å†µåªè¦æŒ‰ç…§è½¯ä»¶çš„**readme**æ–‡æ¡£è¿›è¡Œé…ç½®å³å¯ï¼Œå¦‚æœæœ‰ä»€ä¹ˆé—®é¢˜å°±googleæˆ–è€…ç™¾åº¦ä¸€ä¸‹ï¼Œä½†æ˜¯ä½œä¸ºå¼€å‘è€…æ€ä¹ˆèƒ½å…è®¸è¿™ä¹ˆé«˜é¢‘ä¸”å¯èƒ½é•¿æ—¶é—´ä¼´éšæˆ‘ä»¬çš„ä¸œè¥¿æ˜¯ä¸€ä¸ªé»‘ç›’å‘¢ï¼å¦‚æœä½ å¯¹è¿™å—å†…å®¹ä¸€çŸ¥åŠè§£ï¼Œ**æœ¬æ–‡ä¼šä»æ¯”è¾ƒåŸºæœ¬çš„æŒ‡ä»¤è¯´èµ·**ä¸å¦¨èŠ±å‡ åˆ†é’Ÿé˜…è¯»ä¸€ä¸‹æœ¬æ–‡ã€‚\n\n\n\n## å¸¸ç”¨å‘½ä»¤\n### MacOS\n**MacOS**æœ¬èº«æ˜¯åŸºäº **Unixå†…æ ¸** çš„å›¾å½¢åŒ–æ“ä½œç³»ç»Ÿï¼Œè€Œ **linux** æ˜¯å¤§ä½¬**Linus**ä¸ºäº†äººä»¬ç”¨åˆ°å…è´¹çš„ç±»unixç³»ç»Ÿè€Œå¼€å‘ï¼Œæ‰€ä»¥æœ¬è´¨ä¸Š**macOS**å’Œ**Linux**æ˜¯åŒæ ¹åŒæºçš„ï¼ˆå¯ä»¥ç†è§£ä¸ºchromeå’Œedgeéƒ½æ˜¯ç”¨chromiumå†…æ ¸ä½†æ˜¯åœ¨å¤–é¢å¥—çš„å£³ä¸ä¸€æ ·ï¼‰ã€‚  \næ‰€ä»¥ä¸¤è€…å¤§éƒ¨åˆ†ç‰¹æ€§å’Œå‘½ä»¤éƒ½æ˜¯ç›¸é€šçš„ã€‚åŒæ—¶macå¼€å‘ç¯å¢ƒè®¤è‡ªå¸¦rubyã€phpã€python2ã€bashç­‰ç¯å¢ƒ(ä»¥å‰è¿˜è‡ªå¸¦javaï¼Œåæ¥è²Œä¼¼æŸä¸ªç‰ˆæœ¬ç»™å»æ‰äº†)ã€‚\n\nå…ˆæ¥äº†è§£ä¸€ä¸‹æ–‡ä»¶æ“ä½œæœ€åŸºç¡€å¸¸ç”¨çš„æŒ‡ä»¤  \n\n| å‘½ä»¤ | åŠŸèƒ½| ä¸¾ä¾‹ |\n| :----:| :----: |:----: |\n| cd | å‰å¾€æŸç›®å½• | cd ~/Desktop|\n| ls | æ˜¾ç¤ºå½“å‰ç›®å½•çš„å†…å®¹ | ls |\n| ls -la | è¯¦ç»†æ˜¾ç¤ºå½“å‰ç›®å½•å†…å®¹ï¼ˆåŒ…å«æƒé™åŠéšè—æ–‡ä»¶ï¼‰ |ls -la|\n| pwd | æ˜¾ç¤ºå½“å‰è·¯å¾„ |pwd|\n| cat | æŸ¥çœ‹æŸæ–‡ä»¶å†…å®¹ |cat ./file.txt|\n| vim | ä½¿ç”¨vimç¼–è¾‘æŸæ–‡ä»¶å†…å®¹ | vim ./file.txt|\n| touch | åˆ›å»ºæˆ–ä¿®æ”¹æ–‡ä»¶ |touch ./test.txt|\n| rm | åˆ é™¤æ–‡ä»¶ | rm ./file.txt|\n| rm -rf | åˆ é™¤æ–‡ä»¶å¤¹å†…å®¹ |rm -rf ./dir|\n| mkdir | åˆ›å»ºæ–‡ä»¶å¤¹ | mkdir dir|\n| rmdir | åˆ é™¤æ–‡ä»¶å¤¹ | rmdir ./dir|\n| mv | ç§»åŠ¨æˆ–ä¿®æ”¹æ–‡ä»¶å |mv file0.txt file1.txt|\n| mvdir | ç§»åŠ¨æˆ–ä¿®æ”¹æ–‡ä»¶å |mvdir dir0 dir1|\n| man | æŸ¥çœ‹æŒ‡ä»¤ | man sudo|\n| sudo | ç³»ç»Ÿç®¡ç†è€…çš„èº«ä»½æ‰§è¡ŒæŒ‡ä»¤ | sudo vi /private/etc/hosts|\n\n### å¸¸ç”¨æ“ä½œæŒ‡ä»¤\næˆ‘ä»¬é€šè¿‡å‡ ç§ä¸åŒçš„å®‰è£… **Homebrew** çš„æ–¹å¼æ¥åˆ†ææˆ‘ä»¬åœ¨å®‰è£…ä¸åŒè½¯ä»¶æ—¶å¸¸ç”¨çš„ä¸€äº›æŒ‡ä»¤\n\n#### é€šè¿‡rubyå®‰è£…\n```\n/usr/bin/ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\"\n```\nå…ˆæ¥çœ‹è¿™æ¡æŒ‡ä»¤åˆ†ä¸¤å—åˆ†åˆ«æ˜¯\n- ```/usr/bin/ruby -e```  \nrubyæ˜¯ä¸€é—¨å¼€æºçš„åŠ¨æ€ç¼–ç¨‹è¯­è¨€ï¼Œæˆ‘ä½œä¸ºä¸€ä¸ªå‰ç«¯ç¨‹åºå‘˜ä½¿ç”¨çš„æ¯”è¾ƒå°‘ï¼Œä½†æ˜¯è¿™ä¸ªå‘½ä»¤æˆ‘ç»å¸¸çœ‹åˆ°æ„æ€å°±æ˜¯**ä½¿ç”¨rubyç¯å¢ƒè¿è¡Œï¼Œ -e ä»£è¡¨æŠŠåé¢çš„å­—ç¬¦ä¸²å½“è„šæœ¬æ‰§è¡Œ**\n\n- ```\"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\"```  \nå…ˆæ¥çœ‹ **$()** çš„ä½œç”¨ï¼Œ```/usr/bin/ruby -e \"$(curl -fsSL https://xxx)\"```è¿™æ¡æŒ‡ä»¤æ‰§è¡Œäº†ä¸¤ä¸ªå‘½ä»¤å…ˆæ˜¯å°†```\"$(curl -fsSL https://xxx)```çš„ç»“æœè¿”å›ï¼Œå†ç”¨```/usr/bin/ruby -e```æ‰§è¡Œä¹‹å‰å‘½ä»¤è¿”å›çš„ç»“æœï¼Œé‚£ä¹ˆ **$()** çš„ä½œç”¨å°±æ˜¯å…ˆå®Œæˆ **$()** ä¸­çš„å‘½ä»¤è¡Œï¼Œç„¶åå°†å…¶ç»“æœæ›¿æ¢å‡ºæ¥ã€‚  \nå†æ¥è¯´```curl -fsSL https://xxx```çš„ä½œç”¨ï¼Œcurlå°±æ˜¯å‘å‡ºç½‘ç»œè¯·æ±‚ï¼Œç„¶åè·å–æ•°æ®çš„å·¥å…·ï¼Œè€Œåé¢çš„```-fsSL```åˆ™æ˜¯å¯¹åº”çš„ä¸€äº›å‚æ•°å…¶ä¸­```-L```æ˜¯è‡ªåŠ¨è·³è½¬é‡å®šå‘çš„é¡µé¢ ```-fsS```åˆ™æ˜¯å¯¹ä¸€äº›æƒ…å†µè¿›è¡Œé™é»˜å¤„ç†çš„ï¼Œå…·ä½“çš„å†…å®¹å¤§å®¶å¯ä»¥è‡ªè¡Œæ‰¾ä¸€ä¸‹ **curl** çš„æ–‡æ¡£ï¼Œæˆ‘å°±ä¸æƒ³æ´—å±•å¼€äº†ã€‚\n\n\n#### é€šè¿‡bashæˆ–è€…shå®‰è£…\n```\n/bin/bash -c \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh)\"\n```\n\n```\nsh -c \"$(curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)\"\n```\n- **Bourne shell (sh)**  \nUNIX æœ€åˆä½¿ç”¨ï¼Œä¸”åœ¨æ¯ç§ UNIX ä¸Šéƒ½å¯ä»¥ä½¿ç”¨ã€‚\nåœ¨ shell ç¼–ç¨‹æ–¹é¢ç›¸å½“ä¼˜ç§€ï¼Œä½†åœ¨å¤„ç†ä¸ç”¨æˆ·çš„äº¤äº’æ–¹é¢åšå¾—ä¸å¦‚å…¶ä»–å‡ ç§shellã€‚ï¼ˆmacä¸Šç”¨çš„çš„shå‘½ä»¤å¹¶ä¸æ˜¯è¿™ä¸ªï¼Œåƒä¸‡åˆ«å¼„æ··ï¼‰\n- **bash(Bourne-Again Shell)**  \nLinux/MacOs æ“ä½œç³»ç»Ÿç¼ºçœçš„ shellã€‚  \næ˜¯ Bourne shell çš„æ‰©å±•ï¼Œä¸ Bourne shell å®Œå…¨å‘åå…¼å®¹ã€‚  \nåœ¨Bourne shell çš„åŸºç¡€ä¸Šå¢åŠ ã€å¢å¼ºäº†å¾ˆå¤šç‰¹æ€§ã€‚  \nå¯ä»¥æä¾›å¦‚å‘½ä»¤è¡¥å…¨ã€å‘½ä»¤ç¼–è¾‘å’Œå‘½ä»¤å†å²è¡¨ç­‰åŠŸèƒ½ã€‚  \næœ‰çµæ´»å’Œå¼ºå¤§çš„ç¼–ç¨‹æ¥å£ï¼ŒåŒæ—¶åˆæœ‰å¾ˆå‹å¥½çš„ç”¨æˆ·ç•Œé¢ã€‚  \nè€Œmacä¸­æ— è®ºæ˜¯**sh** è¿˜æ˜¯ **bash** æŒ‡çš„éƒ½æ˜¯ **bash**\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/01334b2da1db49f580c0762fbe8b2d03~tplv-k3u1fbpfcp-zoom-1.image)\n**sh** è·Ÿ**bash**çš„åŒºåˆ«ï¼Œå®é™…ä¸Šæ˜¯bashæœ‰æ²¡å¼€å¯POSIXæ¨¡å¼çš„åŒºåˆ«\nç®€å•è¯´ï¼Œshæ˜¯bashçš„ä¸€ç§ç‰¹æ®Šçš„æ¨¡å¼ï¼Œshå°±æ˜¯å¼€å¯äº†POSIXæ ‡å‡†çš„bashï¼Œ ```sh``` ç›¸å½“äº ```/bin/bash --posix```ã€‚\n\n\n## å¸¸ç”¨é…ç½®\n### è½¯ä»¶é…ç½®\næ¥ä¸‹æ¥è¯´ä¸€ä¸‹æˆ‘ä»¬é€šå¸¸ä½¿ç”¨çš„è½¯ä»¶é…ç½®ï¼Œç»å¤§éƒ¨åˆ†è½¯ä»¶çš„é…ç½®éƒ½æ˜¯å­˜æ”¾åœ¨æ ¹ç›®å½•çš„ï¼Œåªæ˜¯å› ä¸ºåœ¨macä¸­ä»¥ `.` ä¸ºå‰ç¼€åšä¸ºéšè—æ–‡ä»¶å­˜åœ¨ã€‚æˆ‘ä»¬é€šè¿‡ä¸‹é¢çš„æŒ‡ä»¤çœ‹ä¸€ä¸‹\n```\nls -la ~\n```\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a3241f5133a04e1fb574cbf6a8e84261~tplv-k3u1fbpfcp-zoom-1.image)\næˆ‘ä»¬å¯¹ä¸€äº›è½¯ä»¶çš„é…ç½®ä¿®æ”¹æœ¬è´¨ä¸Šå…¶å®å°±æ˜¯æ”¹è¿™é‡Œé¢çš„æ–‡ä»¶ï¼Œç”¨gitçš„é…ç½®ä½œä¸ºä¾‹å­(æˆ‘å…ˆå°†.gitconfigåˆ é™¤äº†)  \næ­£å¸¸æˆ‘ä»¬å¼€å§‹é…ç½®é…ç½®éƒ½ä¼šè¾“å…¥username å’Œ email\n```\ngit config --global user.name 'yourname'\ngit config --global user.name 'youremail'\n```\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d5963763159d421488f87a0a5db4a255~tplv-k3u1fbpfcp-zoom-1.image)\næ­£å¸¸æˆ‘ä»¬æƒ³ç”¨ä½¿ç”¨gitè¿˜è¦ç”Ÿæˆsshç§˜é’¥\n```\nssh-keygen -t rsa -C 'youreamail'\n```\né‚£è¿™ä¸ªsshå°±ç”Ÿæˆåœ¨äº†.sshä¸­\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5f02f176167a4d9f898c1674afd13aa4~tplv-k3u1fbpfcp-zoom-1.image)\nid_rsa.pub å°±æ˜¯ä½ çš„å…¬é’¥,id_rsaå°±æ˜¯ä½ çš„ç§é’¥ï¼Œå°†å…¬é’¥ç²˜è´´åˆ°æŒ‡å®šçš„ä½ç½®å³å¯äº†ã€‚ï¼ˆç§é’¥ä¸è¦è½»æ˜“æ³„éœ²ï¼Œæƒ³æ·±å…¥äº†è§£çš„å¯ä»¥çœ‹ä¸€ä¸‹éå¯¹ç§°åŠ å¯†çš„åŸç†ï¼‰\n\næ­£å¸¸æ¥è¯´ä½ çš„ç»å¤§éƒ¨åˆ†è½¯ä»¶é…ç½®éƒ½æ˜¯```~/.xx```æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ï¼Œæ‰€ä»¥é…ç½®é‡åˆ°é—®é¢˜ä¸è¦æ…Œï¼Œç›´æ¥æ‰¾åˆ°é…ç½®æ–‡ä»¶çœ‹ä¸€ä¸‹ã€‚  \nè€Œé€šå¸¸é…ç½®ä¸€èˆ¬åˆ†ä¸º3ä¸ªç­‰çº§ï¼Œä¸€èˆ¬æ‰§è¡Œçš„æƒé‡æŒ‰ç…§ æœ¬åœ°é…ç½®>ç”¨æˆ·é…ç½®>ç³»ç»Ÿé…ç½®ã€‚è¿˜æ˜¯ç”¨gitä¸¾ä¾‹åˆšæ‰çš„å‘½ä»¤ä¸­æˆ‘ç”¨äº†--globalä»£è¡¨çš„å°±æ˜¯ç”¨æˆ·é…ç½®ã€‚ä¸‹é¢æ˜¯ä¸‰ç§é…ç½®çº§åˆ«\n```\ngit config --system --list // æŸ¥çœ‹ç³»ç»Ÿconfig\n\ngit config --global  --list // æŸ¥çœ‹å½“å‰ç”¨æˆ·ï¼ˆglobalï¼‰é…ç½®ï¼š\n\ngit config --local  --list // æŸ¥çœ‹å½“å‰ä»“åº“é…ç½®ä¿¡æ¯\n\n```\n--global çš„æƒ…å†µå·²ç»è¯´è¿‡äº†ï¼Œ--local çš„è¯å¤§å®¶åœ¨gité¡¹ç›®ä¸­é€šå¸¸éƒ½æœ‰ä¸€ä¸ª.gitæ–‡ä»¶ --localå°±æ˜¯æŸ¥çœ‹é‡Œé¢çš„é…ç½®ä¿¡æ¯ï¼Œæœ€åsystemæˆ‘ä»¬æ‰§è¡Œä¸€ä¸‹ï¼Œå‘Šè¯‰æˆ‘æ²¡æœ‰æ‰¾åˆ°ç³»ç»Ÿçš„é…ç½®æ–‡ä»¶ï¼Œå› ä¸ºæˆ‘æ²¡æœ‰é…ç½®è¿‡ï¼Œæ‰€ä»¥ä¸ä¼šæœ‰é»˜è®¤çš„ã€‚\n\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b1aaa16f54cc4cfdb8899972c26b05a8~tplv-k3u1fbpfcp-zoom-1.image)\n\nä½†æ˜¯æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è·¯å¾„ä¸Šæœ‰ä¸€ä¸ª`/etc/` é€šå¸¸å¾ˆå¤šç³»ç»Ÿçº§çš„é…ç½®æ–‡ä»¶ä¼šå­˜åœ¨é‡Œé¢ï¼Œæœ‰æ—¶å€™å¤§å®¶çœ‹åˆ°ä¸€äº›è§£å†³åŠæ³•çš„æ—¶å€™å¾€```/etc/``` è·¯å¾„ä¸­ä¿®æ”¹æˆ–å¢åŠ é…ç½®ä¿¡æ¯è¦æ³¨æ„ç‚¹ï¼Œæœ¬èº«æƒé‡å¾ˆä½é‡Œé¢çš„é…ç½®ä¹Ÿå¾ˆå®¹æ˜“è¢«globalåŸºæœ¬çš„é…ç½®è¦†ç›–ã€‚\n\nï¼ˆå¦‚æœä½ æƒ³å°†é…ç½®ä¿å­˜èµ·æ¥å¿«é€Ÿçš„ç”¨åˆ°å…¶ä»–ç”µè„‘ï¼Œåªè¦æ‰¾åˆ°å¯¹åº”çš„é…ç½®æ–‡ä»¶ä¿å­˜èµ·æ¥ï¼Œæ›¿æ¢åˆ°å…¶ä»–ç”µè„‘å³å¯ï¼‰\n\n## ç¯å¢ƒé…ç½®\nåœ¨macç¯å¢ƒä¸‹é»˜è®¤éƒ½ä¼šç”¨åˆ°ä»¥ä¸‹çš„å‡ ä¸ªé…ç½®  \nç³»ç»Ÿçº§åˆ«ï¼Œå¯¹ç³»ç»Ÿæ‰€æœ‰ç”¨æˆ·éƒ½ç”Ÿæ•ˆ\n```\n/etc/profile\n/etc/paths\n```\n- `/etc/profile`  ç¬¬ä¸€ä¸ªåŠ è½½  \næ¶‰åŠç³»ç»Ÿçš„ç¯å¢ƒï¼Œå³ç¯å¢ƒå˜é‡ç›¸å…³ã€‚è¿™é‡Œä¿®æ”¹ä¼šå¯¹æ‰€æœ‰ç”¨æˆ·èµ·ä½œç”¨,æœ€å…ˆå¯åŠ¨çš„å°±æ˜¯è¿™ä¸ªå‘½ä»¤ï¼Œå½“ç„¶ä¹Ÿæ˜¯æƒé‡æœ€ä½çš„ï¼Œæœ‰æ—¶å€™é‡åˆ°é…ç½®é—®é¢˜æŒ‰ç…§ç½‘ä¸Šçš„ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶å´ä¸ç”Ÿæ•ˆå¯èƒ½å°±æ˜¯æƒé‡ä¸å¤Ÿã€‚ï¼ˆæ²¡äº‹ä¸è¦æ”¹è¿™ä¸ªæ–‡ä»¶ï¼Œç»ˆç«¯çš„é…ç½®å°½é‡æ”¾åœ¨ä¸€ä¸ªåœ°æ–¹\n\n- `/etc/paths` ç¬¬äºŒä¸ªåŠ è½½  \nå…¨å±€ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶,æœ¬èº«æ²¡æœ‰ä»€ä¹ˆè¯­æ³•ï¼Œä¸€è¡Œä¸ºä¸€æ¡ä¸æ¥å—æ³¨é‡Šä¹‹ç±»çš„ï¼Œæ²¡å•¥äº‹ä¹Ÿåˆ«æ”¹ã€‚\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ddb6ab08d7264d0083f0ce1560da6bfb~tplv-k3u1fbpfcp-zoom-1.image)\n\nç”¨æˆ·çº§åˆ«\n```\n~/.bash_profile  // ~/.bash_profile -> ~/.bash_login -> ~/.profile -> ~/.bashrc\n~/.zshrc  // è¿™ä¸ªå¹¶ä¸æ˜¯ç³»ç»Ÿè‡ªå¸¦çš„è€Œæ˜¯oh-my-zshè‡ªå¸¦çš„\n```\n\nå…ˆæ¥è¯´.bash_profileï¼Œæ­£å¸¸åœ¨macä¸‹è¯»å®Œç³»ç»Ÿçš„å˜é‡ä¹‹åå°±ä¼šè¯»å–`.bash_profile`ï¼Œå¦‚æœæ‰¾åˆ°äº†`.bash_profile`ä¹Ÿå°±ä¸ä¼šè¯»åé¢ä¸‰ä¸ªæ–‡ä»¶äº†ï¼ˆlinuxç³»ç»Ÿæœ‰æ‰€ä¸åŒï¼‰ã€‚æ‰€ä»¥ï¼Œæœ‰æ—¶å€™è§£å†³æŸäº›é…ç½®é—®é¢˜æ—¶ï¼Œå¯èƒ½äººå®¶ç»™çš„ç­”æ¡ˆå¹¶ä¸æ˜¯é’ˆå¯¹macç³»ç»Ÿï¼Œ**é‡åˆ°é…ç½®é—®é¢˜éœ€è¦ä¿®æ”¹é…ç½®ï¼Œåœ¨macç³»ç»Ÿä¸‹è€è€å®å®çš„ç”¨.bash_profileé…ç½®å°±å¥½äº†**ã€‚\n\nå†æ¥è¯´ä¸€ä¸‹ `.zshrc`ï¼Œè¿™ä¸ªå¹¶ä¸æ˜¯ç³»ç»Ÿè‡ªå¸¦çš„ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨ç»ˆç«¯æœ¬è´¨ä¸Šæ˜¯ä½¿ç”¨ä¸€ä¸ªshç¯å¢ƒï¼Œç³»ç»Ÿè‡ªå¸¦çš„æœ‰æ—¶å€™ä¸å¥½ç”¨æˆ‘ä»¬é€šå¸¸éƒ½ä¼šè‡ªå·±è£…ä¸€ä¸ªï¼Œæœ€å¸¸è§çš„å°±æ˜¯**oh-my-zsh**ï¼Œä¹‹å‰æåˆ°äº†**ç³»ç»Ÿè‡ªå¸¦çš„shç¯å¢ƒæ˜¯bash**ï¼Œé‚£ä¹ˆè£…äº†**oh-my-zsh**ä¹‹åæˆ‘ä»¬å¯åŠ¨çš„è‡ªç„¶å°±æ˜¯**zsh**ï¼Œæ‰€ä»¥è£…äº†**oh-my-zsh**çš„ç”¨æˆ·å¯åŠ¨çš„è‡ªç„¶å°±æ˜¯`~/.zshrc`ä¹Ÿå°±ä¸ä¼šè¯»å–`~/.bash_profile`æ–‡ä»¶äº†ï¼Œä¸è¿‡ä¸€èˆ¬æˆ‘ä»¬é€šå¸¸éƒ½ä¼šåœ¨`./zshrc`æ–‡ä»¶çš„æœ€ååŠ ä¸€å¥`source ~/.bash_profile`æ¥è¯»ä¸€é**bash**çš„é…ç½®ã€‚\n\næœ‰çš„åŒå­¦å¯èƒ½ä¼šé‡åˆ°è¿™æ ·çš„é—®é¢˜ï¼Œå®‰è£…äº†æŸè½¯ä»¶é…ç½®äº†ç¯å¢ƒå˜é‡åœ¨**~/.bash_profile** ä¸­å¯æ˜¯æ¯æ¬¡å¯åŠ¨ç»ˆç«¯éƒ½è¦æ‰§è¡Œä¸€æ¬¡sourceå‘½ä»¤è¿˜ä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œå¦‚æœä½ å®‰è£…äº†**zsh**é‚£ä¹ˆä½ è¦åœ¨.zshrcä¸­æ·»åŠ  `source ~/.bash_profile`å°±å¥½äº†ã€‚**å¦‚æœæˆ‘è¯´çš„ä½ èƒ½ç†è§£ï¼Œé‚£ä¹ˆé…ç½®æ–¹é¢çš„å¤§éƒ¨åˆ†é—®é¢˜åº”è¯¥éƒ½èƒ½æå®šäº†**ã€‚\n\næœ€åè¯´ä¸€ä¸‹è¯­æ³•é—®é¢˜  \næœ¬èº«è¿™äº›é…ç½®æ–‡ä»¶éƒ½æ˜¯éµå®ˆshellè¯­æ³•çš„ï¼Œå¦‚æœæ‡’å¾—çœ‹ï¼Œæˆ‘è¿™è¾¹æŠŠæˆ‘çš„.zshrcé…ç½®æœ¬èº«çš„æ³¨é‡Šå»æ‰ï¼Œç»™ä½ è§£è¯»ä¸€ä¸‹ã€‚\n``` ruby\n\n# shellä¸­exportä¸ºå¯¼å‡ºå˜é‡çš„æ„æ€ ä¸‹é¢ä¸­ $ZSH å°±æ˜¯ä½¿ç”¨è¿™ä¸ªå˜é‡\n# åŒæ—¶æˆ‘ä»¬å¯ä»¥åœ¨å‘½ä»¤è¡Œ é€šè¿‡echo $XXX æ¥æŸ¥çœ‹exportè¿‡çš„ä¿¡æ¯\nexport ZSH=$HOME/.oh-my-zsh\n\n# ä¸»é¢˜è®¾ç½®\nZSH_THEME=\"ys\"\n\n# æ’ä»¶ä½¿ç”¨\nplugins=(git npm osx web-search zsh-syntax-highlighting sudo wd history last-working-dir)\n\n# æ‰§è¡Œä¸€ä¸‹oh-my-zshçš„é…ç½®\nsource $ZSH/oh-my-zsh.sh\n\n# å‘½ä»¤åˆ«åï¼Œå¯ä»¥åœ¨å‘½ä»¤è¡Œé€šè¿‡å®šä¹‰å¥½çš„å‘½ä»¤ æ‰§è¡Œå‘½ä»¤ä¸² æ¯”å¦‚æˆ‘å†å‘½ä»¤è¡Œä½¿ç”¨pwc å°±å¯ä»¥å¤åˆ¶å½“å‰åœ°å€\nalias pwc=\"pwd | pbcopy; pwd\"\nalias p=\"projj find\"\n\n# æ–¹æ³•ä¹Ÿæ˜¯å¯ä»¥å®šä¹‰å‘½ä»¤ å¯ä»¥ç›´æ¥è°ƒç”¨æ–¹æ³•å æ‰§è¡Œé‡Œé¢çš„å‘½ä»¤\ncdtmp() {\n   cd $(mktemp -d $HOME/Tmp/${1:-xu}-XXXX);\n}\n\nmkdir() {\n command mkdir -p \"$@\" && eval cd \"\\\"\\$$#\\\"\";\n}\n\n\n# ç¯å¢ƒå˜é‡è®¾ç½® shell export å‡ºå»çš„åç§°ä¼šè¢«è®°ä½ï¼Œæ¯”å¦‚CLASS_PATHå°±å¯èƒ½è¢«å¤–é¢çš„æŸä¸ªåœ°æ–¹è°ƒç”¨\n# è€Œç¯å¢ƒå˜é‡çš„æ‹¼æ¥ä¸€èˆ¬å°±æ˜¯export PATH = \"$PATH:XXX\"\n\nexport PATH=\"~/.bin:$PATH\"\n\nexport JAVA_HOME=\"/Library/Java/JavaVirtualMachines/openjdk-12.0.1.jdk/Contents/Home\"\nexport CLASS_PATH=\"$JAVA_HOME/lib\"\nexport PATH=\"$PATH:$JAVA_HOME/bin\"\n\n\nexport NVM_DIR=\"$HOME/.nvm\"\nexport PATH=\"$NVM_DIR/versions/node/v10.16.0/bin:$PATH\"\n\nnvm(){\n   unfunction \"nvm\"\n   [ -s \"$NVM_DIR/nvm.sh\" ] && \\. \"$NVM_DIR/nvm.sh\"   # This loads nvm\n   [ -s \"$NVM_DIR/bash_completion\" ] && \\. \"$NVM_DIR/bash_completion\"  # This loads nvm bash_â†·\n\n   nvm \"$@\"\n}\n\nsource $HOME/.bash_profile\n```\n\n\n\n## ç»“æŸè¯­\næœ¬èº«è¿™ç§ç¯å¢ƒé…ç½®å¹¶ä¸å¤æ‚ï¼Œåªæ˜¯äººä¼šæ‡’å¾—è€ƒè™‘èƒ½ç”¨å°±è¡Œï¼Œä½†æ˜¯ä½œä¸ºå¼€å‘è€…è¿™ä¸ªå¯ä»¥å¿…å¤‡æŠ€èƒ½ï¼Œå¦‚æœæˆ‘å†™çš„æœ‰é”™è¯¯çš„åœ°æ–¹ï¼Œæˆ–è€…æˆ‘å†™çš„ä¸æ¸…æ¥šå¯¼è‡´æ‚¨æœ‰ç–‘é—®çš„åœ°æ–¹ï¼Œæ¬¢è¿è¯„è®ºåŒºè®¨è®ºï¼Œå¦‚æœå¯¹æ‚¨æœ‰å¸®åŠ©å¸Œæœ›æ‚¨ç‚¹ä¸ªèµæ”¯æŒä¸€ä¸‹å“ˆã€‚", "user_name": "æš®æ¡¥", "description": "", "got_view_count": 17935, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "å‰ç«¯", "concern_user_count": 455667, "user_id": "712139267650141", "title": "RxJS æºç è§£æï¼ˆäº”ï¼‰â€”â€” Operator III", "mark_content": "> DevUIæ˜¯ä¸€æ”¯å…¼å…·è®¾è®¡è§†è§’å’Œå·¥ç¨‹è§†è§’çš„å›¢é˜Ÿï¼ŒæœåŠ¡äºåä¸ºäº‘[DevCloud](https://www.huaweicloud.com/devcloud/)å¹³å°å’Œåä¸ºå†…éƒ¨æ•°ä¸ªä¸­åå°ç³»ç»Ÿï¼ŒæœåŠ¡äºè®¾è®¡å¸ˆå’Œå‰ç«¯å·¥ç¨‹å¸ˆã€‚<br>\nå®˜æ–¹ç½‘ç«™ï¼š[devui.design](https://devui.design/)<br>\nNgç»„ä»¶åº“ï¼š[ng-devui](https://github.com/DevCloudFE/ng-devui)ï¼ˆæ¬¢è¿Starï¼‰<br>\nå®˜æ–¹äº¤æµç¾¤ï¼šæ·»åŠ DevUIå°åŠ©æ‰‹ï¼ˆå¾®ä¿¡å·ï¼šdevui-officialï¼‰<br>\nDevUIHelperæ’ä»¶ï¼šDevUIHelper-LSPï¼ˆæ¬¢è¿Starï¼‰\n\n## å¼•è¨€\n\nåœ¨æœ¬æ–‡å¼€å§‹ä¹‹å‰ï¼Œå…ˆå®šä¹‰ä¸€äº›è‡ªå®šä¹‰æœ¯è¯­ï¼Œæ–¹ä¾¿é˜…è¯»ã€‚\n\n- é¡¶æµï¼šè°ƒç”¨äº†æ“ä½œç¬¦çš„æµã€‚\n- ä¸Šæ¸¸æµï¼šæ“ä½œç¬¦çš„å†…éƒ¨è®¢é˜…å™¨æ‰€è®¢é˜…çš„æµã€‚\n- ä¸‹æ¸¸æµï¼šç”±æ“ä½œç¬¦çš„å†…éƒ¨è®¢é˜…å™¨ç®¡ç†çš„æµã€‚\n- ä¸‹æ¸¸è®¢é˜…ï¼šè®¢é˜…äº†æ“ä½œç¬¦ç”Ÿæˆçš„æµçš„è®¢é˜…è€…ã€‚\n\n\n\nåœ¨ä¸Šä¸€ç¯‡ä¸­ï¼Œæˆ‘æè¿°äº† OuterSubscriber å’Œ InnerSubscriber çš„ä½œç”¨ï¼Œå¹¶å°†å‡ ä¸ª Join Creation Operator çš„æºç è§£æäº†ä¸€éã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬å°†è¿›å…¥çš„æ˜¯ Transformation Operator çš„æºç åˆ†æã€‚\n\nåœ¨çŸ¥é“äº† OuterSubscriber å’Œ InnerSubscriber æ˜¯ä¸€ç§é€šè¿‡å§”æ‰˜æ¨¡å¼å®ç°ç®¡ç†ä¸‹æ¸¸æµè®¢é˜…çš„æ–¹æ³•åï¼Œæˆ‘å‘ç°å…¶å®è¿™ç§å®ç°æŠ€å·§ç”¨äºå¾ˆå¤šçš„ operatorsã€‚é‚£ä¹ˆæœ¬ç¯‡åŠä¸‹ä¸€ç¯‡å°†ä¼šä»‹ç»æ›´å¤šè¿™ç§ç±»ä¼¼çš„è®¾è®¡ã€‚\n\n\n\nï¼ˆPSï¼šä¸ºäº†æ–¹ä¾¿æè¿°ï¼Œæˆ‘æ‹¿äº†å®˜ç½‘çš„ç›¸å…³çš„å›¾ç‰‡ï¼Œæ—¶åºå›¾çš„é˜…è¯»é¡ºåºæ˜¯ä»å·¦åˆ°å³ã€‚ï¼‰\n\n\n\n## åŸºç¡€æ˜ å°„\n\n### map \n\n![](http://zcating.gitee.io/imagebed/rxjs_alz/map.png)\n\nmap æ˜¯æœ€ä¸ºåŸºç¡€çš„æ˜ å°„ï¼Œä»–å°†ä¸Šæ¸¸æµçš„å€¼ç»è¿‡è¿ç®—ï¼Œè½¬å‘ç»™ä¸‹æ¸¸è®¢é˜…ã€‚è¿™éƒ¨åˆ†æºç ä¸æ˜¯å¾ˆå¤æ‚ï¼Œå®é™…ä¸Šå°±æ˜¯åšäº†ä¸€å±‚è½¬å‘ã€‚\n\n```typescript\nprotected _next(value: T) {\n  let result: R;\n  try {\n    result = this.project.call(this.thisArg, value, this.count++);\n  } catch (err) {\n    this.destination.error(err);\n    return;\n  }\n  this.destination.next(result);\n}\n```\n\n\n\n\n\n### scan\n\n![](http://zcating.gitee.io/imagebed/rxjs_alz/scan.png)\n\nScan å’Œ çš„ä½œç”¨è·Ÿ reduce ä¸€æ ·ï¼Œä¼ å…¥ä¸€ä¸ªå‡½æ•°æŠŠä¸€ç»„æ•°æ®æ‰“å¹³ï¼Œä½†æ˜¯è·Ÿ reduce ä¸ä¸€æ ·çš„ç‚¹åœ¨äºï¼Œæ¯ä¸€æ¬¡ç»“åˆå®Œæ¯•éƒ½ä¼šç«‹åˆ»è¿”å›ç»“æœã€‚\n\n```typescript\nconst clicks1 = fromEvent(document, 'click');\nconst ones1 = clicks.pipe(mapTo(1));\nconst seed1 = 0;\nconst count1 = ones.pipe(\n  // è¾“å…¥çš„æ˜¯è¿”å›ä»»æ„å€¼çš„å‡½æ•°\n  scan((acc, one) => acc + one, seed)\n);\ncount.subscribe(x => console.log(x));\n\n```\n\n\n\nè¿™éƒ¨åˆ†çš„å®ç°åŒæ ·ä¹Ÿä¸æ˜¯å¾ˆå¤æ‚ï¼Œåœ¨æ‹¿åˆ°ä¸Šæ¸¸æµæ•°æ®åï¼Œä½¿ç”¨ `accumulator` å¯¹æ•°æ®è¿›è¡Œç´¯åŠ æ“ä½œã€‚\n\n```typescript\nprotected _next(value: T): void {\n  // éœ€è¦åˆ¤æ–­æ˜¯å¦å¸¦æœ‰åˆå§‹å€¼ã€‚\n  if (!this.hasSeed) {\n    this.seed = value;\n    this.hasSeed = true;\n    this.destination.next(value);\n  } else {\n  \treturn this._tryNext(value);\n\t}\n}\n\nprivate _tryNext(value: T): void {\n  const index = this.index++;\n  let result: any;\n  try {\n  \t// è®¡ç®—ç»“æœ\n    result = this.accumulator(<R>this.seed, value, index);\n  } catch (err) {\n    this.destination.error(err);\n  }\n\t// ä¿å­˜ï¼Œä»¥å¤‡ä¸‹æ¬¡ä½¿ç”¨\n  this.seed = result;\n  this.destination.next(result);\n}\n```\n\n\n\n\n\n## äº”ç§åŸºç¡€å¤åˆæ˜ å°„\n\n*æ‰€è°“å¤åˆæ˜ å°„ï¼Œæ„æ€å°±æ˜¯è¿™äº›æ“ä½œç¬¦æ¥æ”¶çš„å‚æ•°æ˜¯ä¸€ä¸ªå¸¦æœ‰ä¸Šæ¸¸æµæ•°æ®ä½œä¸ºå‚æ•°å¹¶è¿”å› Observable çš„å‡½æ•°ï¼ŒåŒæ—¶æŠŠå…¶ä¸­çš„è®¢é˜…æ•°æ®è½¬å‘ç»™ä¸‹æ¸¸è®¢é˜…ã€‚*\n\nmergeMapï¼ŒswitchMapï¼ŒexhaustMapï¼ŒconcatMapï¼ŒmergeScan æ˜¯äº”ç§å¤åˆæ˜ å°„æ“ä½œç¬¦ï¼Œå®ƒä½¿å¾—ä¸Šæ¸¸æµçš„æ•°æ®å¯ä»¥ä¼ é€’ç»™ä¸‹æ¸¸æµï¼Œå¹¶äº¤ç”±å…¶å¤„ç†ã€‚ concatMap å’Œ mergeScan æ˜¯ mergeMap çš„ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦å…³æ³¨å‰©ä½™çš„ä¸‰ç§ã€‚\n\n mergeMapï¼ŒswitchMapï¼ŒexhaustMapï¼Œè¿™ä¸‰ç§æ“ä½œç¬¦çš„æºç ç»“æ„åˆ†ä¸ºè¿™ä¸‰ä¸ªéƒ¨åˆ†ï¼š\n\n- é€šè¿‡ lift æ“ä½œï¼Œå°†åŸæœ‰çš„æµæ˜ å°„æˆæ–°çš„æµã€‚\n- å®ç° Operator æ¥å£ï¼Œé€šè¿‡ call è¿”å›ä¸€ä¸ª Subscriberã€‚\n- é€šè¿‡ç»§æ‰¿ OuterSubscriber å®ç°è¿™ä¸ª Subscriberã€‚\n\nå…¶ä¸­ï¼Œå‰ä¸¤ä¸ªéƒ¨åˆ†éƒ½æ‹¥æœ‰éå¸¸ç±»ä¼¼çš„ç»“æ„ï¼Œéƒ½æ˜¯é€šè¿‡è¿™ç§æ ·æ¿ä»£ç æ¥è¿›è¡Œç¼–å†™ã€‚\n\n```typescript\nexport function someMap<T, R, O extends ObservableInput<any>>(\n  project: (value: T, index: number) => O,\n): OperatorFunction<T, ObservedValueOf<O> | R> {\n  return (source: Observable<T>) => source.lift(new SomeMapOperator(project));\n}\n\nclass SomeMapOperator<T, R> implements Operator<T, R> {\n  constructor(private project: (value: T, index: number) => ObservableInput<R>) {\n  }\n\n  call(Subscriber: Subscriber<R>, source: any): any {\n    return source.subscribe(new SomeMapSubscriber(Subscriber, this.project));\n  }\n}\n```\n\n\n\né€šè¿‡ _innerSub æä¾›çš„å†…éƒ¨æ³¨å†Œæ–¹æ³•ï¼Œåœ¨é‡Œé¢åˆ›å»º InnerSubscriberï¼Œå¹¶ä¼ å…¥å½“å‰çš„ OuterSubscriber ã€‚ \n\n```typescript\nprivate _innerSub(input: ObservableInput<R>, value: T, index: number): void {\n  const innerSubscriber = new InnerSubscriber(this, value, index);\n  const destination = this.destination as Subscription;\n  destination.add(innerSubscriber);\n  const innerSubscription = subscribeToResult<T, R>(this, input, undefined, undefined, innerSubscriber);\n  \n  // å› ä¸ºè¿™é‡Œçš„ input å¯èƒ½ä¸æ˜¯ observableï¼Œ é‚£ä¹ˆè¿”å›çš„\n  // è®¢é˜…ç»“æœä¹Ÿå¯èƒ½è·Ÿ innserSubscriber ç›¸ç­‰ï¼Œæ‰€ä»¥è¿™é‡Œè¦\n  // å¤„ç†ä¸€ä¸‹ã€‚\n  if (innerSubscription !== innerSubscriber) {\n    destination.add(innerSubscription);\n  }\n}\n```\n\n\n\næœ€ç»ˆï¼Œäº¤ç”± subscribeToResult åˆ›å»ºä¸€ä¸ªå†…éƒ¨è®¢é˜…æ¥ç®¡ç†ä¸‹æ¸¸æµã€‚\n\n\n\n### mergeMap\n\n![](http://zcating.gitee.io/imagebed/rxjs_alz/mergeMap.png)\n\nmergeMap æä¾›çš„æ˜¯ä¸€ç§åˆå¹¶æ“ä½œï¼Œé€šè¿‡åœ¨å†…éƒ¨ç»´æŠ¤äº†å¤šä¸ªä¸‹æ¸¸æµçš„è®¢é˜…ï¼Œä½¿å¾—ä¸Šæ¸¸æµå¯ä»¥å°†æ•°æ®ä¸‹å‘ç»™å¤šä¸ªä¸‹æ¸¸æµã€‚å®ƒæä¾›äº†ä¸€ä¸ªå¹¶å‘æ•°é™åˆ¶çš„å‚æ•°ï¼Œä¸»è¦ç”¨äºæ§åˆ¶ä¸‹æ¸¸æµå¹¶å‘çš„æ•°é‡ã€‚\n\n```typescript\nexport function mergeMap<T, R, O extends ObservableInput<any>>(\n  project: (value: T, index: number) => O,\n  concurrent: number = Number.POSITIVE_INFINITY\n): OperatorFunction<T, ObservedValueOf<O> | R> {\n  return (source: Observable<T>) => source.lift(new MergeMapOperator(project, concurrent));\n}\n```\n\n\n\nä¸‹é¢ï¼Œæˆ‘ä»¬å…³æ³¨çš„ç‚¹å°†è½¬ç§»åˆ° MergeMapSubscriber ã€‚é¦–å…ˆçœ‹çœ‹å®ƒçš„æ•°æ®ç»“æ„ã€‚\n\n```typescript\nexport class MergeMapSubscriber<T, R> extends OuterSubscriber<T, R> {\n  // æ ‡è®°æ˜¯å¦å·²ç»å®Œæˆ\n  private hasCompleted: boolean = false;\n  // ä¸Šæµ observable çš„æ•°æ®ç¼“å­˜ \n  private buffer: T[] = [];\n  // å½“å‰æ­£åœ¨å¼€å¯çš„æµçš„æ•°é‡\n  private active: number = 0;\n  // æ•°æ®çš„ç´¢å¼•\n  protected index: number = 0;\n\n  constructor(\n    // å¤–éƒ¨ä¼ å…¥çš„è®¢é˜…è€…\n    destination: Subscriber<R>,\n    // éœ€è¦åˆå¹¶çš„ Observable çš„å·¥å‚\n    private project: (value: T, index: number) => ObservableInput<R>,\n    // å¹¶å‘æ•°é‡\n    private concurrent: number = Number.POSITIVE_INFINITY,\n  ) {\n    super(destination);\n  }\n  ...\n}\n```\n\n\n\n#### Subscriber\n\nMergeMapSubscriber çš„ _next è°ƒç”¨çš„æ—¶å€™ï¼Œä¼šæ¯”è¾ƒ active ï¼ˆä¸‹æ¸¸æµçš„æ•°é‡ï¼‰ ä¸ concurrent ï¼ˆæœ€å¤§å¹¶å‘æ•°ï¼‰çš„å¤§å°ï¼Œactive å°äº concurrent åˆ™è°ƒç”¨ _tryNextï¼Œå¦åˆ™å°†å·²ç»åˆ°æ¥çš„æ•°æ®æ”¾å…¥ç¼“å†²åŒºä¸­ï¼Œä½†æ˜¯ä½ çŸ¥é“çš„ï¼Œ JavaScript å¹¶æ²¡æœ‰çœŸæ­£çš„å¹¶å‘ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªå¼‚æ­¥é˜Ÿåˆ—ã€‚è€Œæ¯ä¸€æ¬¡è¿›è¡Œ _tryNextï¼Œéƒ½ä¼šé€šè¿‡ project æ¥åˆ›å»ºä¸€ä¸ªä¸‹æ¸¸æµï¼ŒåŒæ—¶è®©æ›´æ–° activeï¼Œå°†ä¸‹æ¸¸æµä¼ å…¥å¹¶è§¦å‘ _innerSubã€‚\n\n```typescript\nprotected _next(value: T): void {\n  if (this.active < this.concurrent) {\n    this._tryNext(value);\n  } else {\n    this.buffer.push(value);\n  }\n}\n\nprotected _tryNext(value: T) {\n  let result: ObservableInput<R>;\n  const index = this.index++;\n  try {\n    result = this.project(value, index);\n  } catch (err) {\n    this.destination.error(err);\n    return;\n  }\n  this.active++;\n  // \n  this._innerSub(result, value, index);\n}\n```\n\n\n\nåœ¨ä¸Šæ¸¸æµå®Œæˆæ—¶ï¼Œä¼šè§¦å‘ _completeã€‚\n\n```typescript\nprotected _complete(): void {\n  this.hasCompleted = true;\n  if (this.active === 0 && this.buffer.length === 0) {\n    this.destination.complete();\n  }\n  this.unsubscribe();\n}\n```\n\n\n\nå¦‚æœæ‰€æœ‰çš„ä¸‹æ¸¸æµéƒ½å·²ç»å®Œæˆï¼Œä¸”ç¼“å†²åŒºä¸­æ²¡æœ‰æ•°æ®ï¼Œåˆ™é€šçŸ¥ä¸‹æ¸¸è®¢é˜…æ•°æ®å·²ç»è¾“å‡ºå®Œæ¯•ã€‚\n\n\n\n#### notify\n\nnotifyNext å°±æ˜¯å•çº¯çš„å°†ç»“æœä¼ é€’ç»™ä¸‹æ¸¸è®¢é˜…ï¼Œè€Œ notifyComplete åˆ™æœ‰æ„æ€å¤šäº†ã€‚\n\né€šè¿‡ notifyComplete ï¼Œå¯ä»¥å¾—çŸ¥å“ªäº›æµå·²ç»å®Œæˆä»»åŠ¡å¹¶ä¸”å…³é—­ã€‚å¦‚æœ buffer ä¸­å­˜åœ¨æ•°æ®ï¼Œé‚£ä¹ˆå°†æ•°æ®äº¤ç”± _next å‘é€å‡ºå»å¹¶åˆ›å»ºæ–°çš„ä¸‹æ¸¸æµã€‚è¿‡è¿™ç§é€’å½’æ“ä½œï¼Œå¯ä»¥å°†æ‰€æœ‰ buffer ä¸­çš„æ•°æ®éƒ½å‘é€å‡ºå»ã€‚æœ€ååˆ¤æ–­ä¸Šæ¸¸æµå’Œä¸‹æ¸¸æµæ˜¯ä¸æ˜¯éƒ½å·²ç»ç»“æŸäº†ï¼Œå¦‚æœå·²ç»ç»“æŸäº†ï¼Œåˆ™é€šçŸ¥ä¸‹æ¸¸è®¢é˜…æ•°æ®å·²ç»è¾“å‡ºå®Œæ¯•ã€‚\n\n```typescript\nnotifyNext(\n  outerValue: T, innerValue: R,\n  outerIndex: number, innerIndex: number,\n  innerSub: InnerSubscriber<T, R>\n): void {\n  this.destination.next(innerValue);\n}\n\nnotifyComplete(innerSub: Subscription): void {\n  const buffer = this.buffer;\n  this.remove(innerSub);\n  this.active--;\n  if (buffer.length > 0) {\n    this._next(buffer.shift());\n  } else if (this.active === 0 && this.hasCompleted) {\n    this.destination.complete();\n  }\n}\n```\n\n\n\n### switchMap\n\n![](http://zcating.gitee.io/imagebed/rxjs_alz/switchMap.png)\n\nswitchMap æä¾›çš„æ˜¯ä¸€ä¸ªä¸Šæ¸¸æµä¸ºä¸»çš„æ˜ å°„æ“ä½œï¼Œå½“ä¸Šæ¸¸æµçš„è®¢é˜…æ•°æ®åˆ°æ¥çš„æ—¶å€™ï¼Œæ—§çš„ä¸‹æ¸¸æµä¼šè¢«å–æ¶ˆè®¢é˜…ï¼Œç„¶åé‡æ–°è®¢é˜…ä¸€ç»„æ–°çš„ä¸‹æ¸¸æµã€‚\n\n```typescript\nexport function switchMap<T, R, O extends ObservableInput<any>>(\n  project: (value: T, index: number) => O\n): OperatorFunction<T, ObservedValueOf<O>|R> {\n  return (source: Observable<T>) => source.lift(new SwitchMapOperator(project));\n}\n```\n\n\n\n#### Subscriber\n\ninnerSubscription ä¿å­˜äº†å½“å‰ä¸‹æ¸¸æµçš„è®¢é˜…ï¼Œæ‰€ä»¥è¿™ä¸ªæ“ä½œç¬¦åªä¼šç»´æŠ¤ä¸€ä¸ªä¸‹æ¸¸æµçš„è®¢é˜…ã€‚\n\n```typescript\nprivate index: number = 0;\nprivate innerSubscription: Subscription;\n```\n\n\n\nå½“è¿›è¡Œ next æ“ä½œçš„æ—¶å€™ï¼Œä¼šå…ˆåˆ›å»ºæ–°çš„ä¸‹æ¸¸æµï¼Œå¦‚æœæ—§çš„ä¸‹æ¸¸æµå­˜åœ¨ï¼Œé‚£ä¹ˆä¼šè¢«å–æ¶ˆè®¢é˜…ã€‚\n\n```typescript\nprotected _next(value: T) {\n  let result: ObservableInput<R>;\n  const index = this.index++;\n  try {\n    // ä¸Šæ¸¸æµçš„æ•°æ®åˆ°æ¥äº†ï¼Œåˆ›å»ºæ–°çš„ä¸‹æ¸¸æµã€‚\n    result = this.project(value, index);\n  } catch (error) {\n    this.destination.error(error);\n    return;\n  }\n\n  // æ—§çš„ä¸‹æ¸¸æµå–æ¶ˆè®¢é˜…\n  const innerSubscription = this.innerSubscription;\n  if (innerSubscription) {\n    innerSubscription.unsubscribe();\n  }\n\n  this._innerSub(result, value, index);\n}\n```\n\n\n\nè¯¥ Subscriber é‡å†™äº†*_complete* ã€‚è¿™é‡Œæ„å‘³ç€ä¸Šæ¸¸æµå·²ç»è¾“å‡ºå®Œæ¯•ï¼Œé‚£ä¹ˆå¦‚æœä¸‹æ¸¸è®¢é˜…\n\n```\nprotected _complete(): void {\n  const {innerSubscription} = this;\n  if (!innerSubscription || innerSubscription.closed) {\n    super._complete();\n    return;\n  }\n  this.unsubscribe();\n}\n```\n\n\n\n\n\n#### notify\n\nè·Ÿä¹‹å‰ä¸€æ ·ï¼Œ *notifyNext* ä¾æ—§æ˜¯å°†ä¸‹æ¸¸æµä¸­çš„æ•°æ®è½¬å‘å‡ºå»ã€‚ä¸»è¦å…³æ³¨ç‚¹è¿˜æ˜¯åœ¨äº *notifyComplete*ã€‚å› ä¸º *innerSubscription* è¢«ç½®ä¸ºç©ºäº†ï¼Œæ‰€ä»¥è°ƒç”¨ *this.\\_complete* æ— æ„ä¹‰ï¼Œä¸ä¼šè§¦å‘åˆ°å…¶çˆ¶ç±»å‡½æ•°ã€‚\n\n```typescript\nnotifyComplete(innerSub: Subscription): void {\n  const destination = this.destination as Subscription;\n  destination.remove(innerSub);\n  this.innerSubscription = null;\n  if (this.isStopped) {\n    super._complete();\n  }\n}\n```\n\nå¦‚æœå½“å‰çš„ä¸‹æ¸¸æµå·²ç»å®Œæˆäº†ï¼Œé‚£ä¹ˆå°±è¦å°†å®ƒä»ä¸‹æ¸¸è®¢é˜…ï¼ˆdestinationï¼‰ä¸­ç§»é™¤ï¼Œå¦‚æœä¸Šæ¸¸æµå·²ç»åœæ­¢ï¼ˆerror æˆ–è€… complete è¢«è°ƒç”¨ï¼Œæˆ–è€…è¢«å–æ¶ˆè®¢é˜…ï¼‰ï¼Œé‚£ä¹ˆè¿˜å¾—è°ƒç”¨ super._complete è¡¨ç¤ºå·²ç»å®Œæˆã€‚\n\n\n\n\n\n### exhaustMap\n\n![](http://zcating.gitee.io/imagebed/rxjs_alz/exhaustMap.png)\n\nè·Ÿ *switchMap* ç›¸åï¼Œ *exhaustMap* æä¾›äº†ä¸€ç§ä»¥ä¸‹æ¸¸æµä¸ºä¸»çš„æ˜ å°„æ“ä½œã€‚å¦‚æœä¸‹æ¸¸æµå·²ç»å¼€å¯ï¼Œé‚£ä¹ˆä¸Šæ¸¸æµä¹‹ååˆ°æ¥çš„è®¢é˜…æ•°æ®éƒ½å°†ä¼šè¢«æŠ›å¼ƒï¼Œç›´åˆ°è¯¥ä¸‹æ¸¸æµå®Œæˆè®¢é˜…ã€‚ä¸‹æ¸¸æµå®Œæˆè®¢é˜…åï¼Œä¸Šæ¸¸æµçš„æ•°æ®æ‰ä¼šç»§ç»­è·Ÿæ–°çš„ä¸‹æ¸¸æµç»“åˆï¼Œå¹¶å½¢æˆæ–°çš„è®¢é˜…ã€‚\n\n```typescript\nexport function exhaustMap<T, R, O extends ObservableInput<any>>(\n  project: (value: T, index: number) => O,\n): OperatorFunction<T, ObservedValueOf<O>|R> {\n  return (source: Observable<T>) => source.lift(new ExhaustMapOperator(project));\n}\n```\n\n\n\n#### Subscriber\n\n *exhaustMap* çš„å®ç°å¾ˆç®€å•ï¼Œé€šè¿‡ç»´æŠ¤ *hasSubscription* è¿™æ ·ä¸€ä¸ªå†…éƒ¨çŠ¶æ€ï¼Œæ ‡è®°ä¸‹æ¸¸æµæ˜¯å¦è¢«è®¢é˜…äº†ã€‚ hasCompleted åˆ™æ˜¯ä¸Šæ¸¸æµå®Œæˆæƒ…å†µçš„æ ‡è®°ã€‚\n\n```typescript\nprivate hasSubscription = false;\nprivate hasCompleted = false;\n```\n\n\n\nè®¢é˜…ä¼šè°ƒç”¨ _nextï¼Œæ ‡è®°ä¸‹æ¸¸æµæ˜¯å¦å·²ç»å¼€å¯ï¼ˆè®¢é˜…æ˜¯å¦å·²ç»å­˜åœ¨ï¼‰ï¼Œå¦‚æœæœªå¼€å¯ï¼Œåˆ™æ„å»ºæ–°çš„ä¸‹æ¸¸æµï¼Œå¹¶æ ‡è®° *hasSubscription* ä¸º *true*ã€‚ \n\n```typescript\nprotected _next(value: T): void {\n  if (!this.hasSubscription) {\n      let result: ObservableInput<R>;\n      const index = this.index++;\n      try {\n        result = this.project(value, index);\n      } catch (err) {\n        this.destination.error(err);\n        return;\n      }\n      // æ ‡è®°ä¸º true\n      this.hasSubscription = true;\n      this._innerSub(result, value, index);\n  }\n}\n```\n\n\n\nä¸Šæ¸¸æµå’Œä¸‹æ¸¸æµçš„æ•°æ®éƒ½å·²ç»è¾“å‡ºå®Œæ¯•äº†ï¼Œé‚£ä¹ˆæŠŠå®Œæˆä¿¡å·ä¼ é€’ç»™ä¸‹æ¸¸è®¢é˜…ã€‚\n\n```typescript\nprotected _complete(): void {\n  this.hasCompleted = true;\n  if (!this.hasSubscription) {\n    this.destination.complete();\n  }\n  this.unsubscribe();\n}\n```\n\n\n\n#### notify\n\nå¦‚æœä¸‹æ¸¸æµçš„æ•°æ®è¾“å‡ºå®Œæ¯•ï¼Œé‚£ä¹ˆå°±åº”è¯¥è¦å°† *hasSubscription* æ ‡è®°ä¸º *false*ã€‚\n\n```typescript\nnotifyComplete(innerSub: Subscription): void {\n  const destination = this.destination as Subscription;\n  destination.remove(innerSub);\n\n  // æ ‡è®°ä¸º false\n  this.hasSubscription = false;\n\n  // æ­¤å¤„åˆ¤æ–­ä¸Šæ¸¸æµæ˜¯å¦å·²ç»å®Œæˆ\n  if (this.hasCompleted) {\n    this.destination.complete();\n  }\n}\n```\n\n\n\n### concatMap\n\n*concatMap* æ˜¯ mergeMap çš„ä¸€ç§ç‰¹æ®Šå½¢å¼ã€‚\n\n```typescript\nexport function concatMap<T, R, O extends ObservableInput<any>>(\n  project: (value: T, index: number) => O,\n): OperatorFunction<T, ObservedValueOf<O>|R> {\n  return mergeMap(project, 1);\n}\n```\n\n\n\n### mergeScan\n\nmergeScan çš„æºç è·Ÿ mergeMap ç±»ä¼¼ã€‚åªä¸è¿‡å°±æ˜¯æŠŠä¼ å…¥çš„å‡½æ•°æ›¿æ¢äº†ä¸€ä¸‹ï¼Œå¹¶ä¸”åœ¨å†…éƒ¨ç¼“å­˜äº†ä¸Šä¸€ä¸ªç»“åˆåçš„å€¼ã€‚\n\n```typescript\nconst clicks2 = fromEvent(document, 'click');\nconst ones2 = click$.pipe(mapTo(1));\nconst seed2 = 0;\nconst count2 = one$.pipe(\n  // è¾“å…¥ä¸€ä¸ª Observable å·¥å‚\n  mergeScan((acc, one) => of(acc + one), seed),\n);\n```\n\n\n\n### concat & merge\n\nä¸Šä¸€ç¯‡ä¸­ï¼Œå…³äº concat å’Œ merge ä¸¤ä¸ªç›¸å…³çš„ operators å¹¶æ²¡æœ‰è®²åˆ°ï¼Œå› ä¸ºè¿™å®ƒä»¬å…¶å®æœ€ç»ˆéƒ½æ˜¯è°ƒç”¨ mergeMapã€‚ \n\n\n\n### å°ç»“\n\né€šè¿‡è¿™ä¸‰ä¸ªä¸åŒçš„æ˜ å°„æ“ä½œç¬¦ï¼Œä½¿å¾—ä¸Šæ¸¸æµå¯ä»¥é€šè¿‡ä¸€å®šçš„æ–¹å¼è·Ÿä¸‹æ¸¸æµç»“åˆã€‚é‚£ä¹ˆï¼Œç»“åˆä¸€å¼ å›¾ï¼Œå¯ä»¥çœ‹çœ‹ç›¸å…³æ“ä½œç¬¦çš„å…³ç³»ã€‚\n\n![ob_map_rlt](https://zcating.gitee.io/imagebed/rxjs_alz/ob_map_relation.png)\n\nå¯¹è¿™äº›æ“ä½œç¬¦åˆ†ä¸€ä¸‹ç±»ã€‚\n\n- å±äº Transformation Operators çš„æœ‰ï¼šconcatMapï¼Œ concatMapToï¼Œ mergeMapï¼Œ mergeMapToï¼Œ switchMapï¼ŒswitchMapToï¼ŒexhaustMapï¼ŒexhaustMapToã€‚\n\n- å±äº Join Creation Operators çš„æœ‰ï¼š merge, concatã€‚\n\n- å±äº Join Operators çš„æœ‰ï¼š mergeAllï¼Œ concatAllï¼Œ switchAllï¼Œ startWithï¼ŒendWithã€‚\n\n\n\n## é›¶æ•£çš„é«˜é˜¶æ“ä½œç¬¦\n\n### expand\n\n![](http://zcating.gitee.io/imagebed/rxjs_alz/expand.png)\n\nexpand å°†ä¼ å…¥çš„ Observable å·¥å‚è¿›è¡Œé€’å½’æ“ä½œã€‚ä¸ä¸Šé¢çš„å¤åˆæ˜ å°„ç±»ä¼¼ï¼Œexpand ä¹Ÿæ˜¯ä¸€ç§å¤åˆæ˜ å°„ï¼Œåªä¸è¿‡ï¼Œä»–ä¼šä¸æ–­çš„å»å¤åˆä¸‹æ¸¸æµçš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯ç±»ä¼¼ä¸Šå›¾çš„æ¨¡å¼ã€‚\n\n\n\n#### Subscriber\n\nä¸ºäº†å®ç°ç›¸å¯¹åº”çš„åŠŸèƒ½ï¼Œexpand å®šä¹‰äº†ä»¥ä¸‹æ•°æ®ç»“æ„ã€‚\n\n```typescript\nexport class ExpandSubscriber<T, R> extends OuterSubscriber<T, R> {\n  // å½“å‰ç´¢å¼•\n  private index: number = 0;\n  // å·²å¯åŠ¨çš„ä¸‹æ¸¸æµçš„æ•°é‡\n  private active: number = 0;\n  // ä¸Šæ¸¸æµæ˜¯å¦å·²ç»å®Œæˆ\n  private hasCompleted: boolean = false;\n  // å¯¹äºç´¢å¼•çš„ç¼“å­˜æ•°æ®\n  private buffer: any[];\n  // ä¸‹æ¸¸æµå·¥å‚\n  private project: (value: T, index: number) => ObservableInput<R>,\n\t// å¹¶å‘æ•°  \n \tprivate concurrent: number;\n}\n```\n\n\n\nä¸Šæ¸¸æµæ•°æ®åˆ°æ¥çš„æ—¶å€™ï¼Œè·Ÿ mergeMap æ¯”è¾ƒç±»ä¼¼ï¼Œä¹Ÿä¼šæ¯”è¾ƒ active å’Œ concurrentï¼Œå¦‚æœ active å¤§äº concurrent ï¼Œé‚£ä¹ˆä¾¿ä¼šç”¨bufferç¼“å­˜ä¸Šæ¸¸æµçš„æ•°æ®ï¼Œå¦‚æœ active å°äº concurrent ï¼Œé‚£ä¹ˆç›´æ¥å‘é€æ•°æ®ç»™åˆ°ä¸‹æ¸¸è®¢é˜…ï¼Œå¹¶è®¢é˜…ä¸€ä¸ªæ–°çš„ä¸‹æ¸¸æµã€‚éœ€è¦æ³¨æ„çš„ä¸€ç‚¹ï¼Œä¸ºäº†é˜²æ­¢çˆ†æ ˆï¼Œexpand åœ¨è¿™é‡ŒåŠ äº†ä¸€ä¸ªåˆ¤æ–­æ¡ä»¶ï¼Œåœ¨ notify ä¸­ï¼Œå°†åˆ©ç”¨è¿™ä¸€æ¡ä»¶ï¼Œæ¥ç»“æŸé€’å½’ã€‚\n\n```typescript\nprotected _next(value: any): void {\n  const destination = this.destination;\n\n  if (destination.closed) {\n    this._complete();\n    return;\n  }\n\n  const index = this.index++;\n  if (this.active < this.concurrent) {\n    destination.next(value);\n    try {\n      const { project } = this;\n      const result = project(value, index);\n      this.subscribeToProjection(result, value, index);\n    } catch (e) {\n      destination.error(e);\n    }\n  } else {\n    this.buffer.push(value);\n  }\n}\n// è®¢é˜…æ–°çš„ä¸‹æ¸¸æµ\nprivate subscribeToProjection(result: any, value: T, index: number): void {\n  this.active++;\n  const destination = this.destination as Subscription;\n  destination.add(subscribeToResult<T, R>(this, result, value, index));\n}\n```\n\n\n\nå½“ä¸Šæ¸¸æµå®Œæˆæ—¶ï¼Œéœ€è¦æ ‡è®° hasComplete ä¸º trueã€‚è¿™ä¸€æ­¥æ˜¯ç»“æŸé€’å½’çš„é‡è¦æ ‡å¿—ã€‚\n\n```typescript\nprotected _complete(): void {\n  this.hasCompleted = true;\n  if (this.hasCompleted && this.active === 0) {\n    this.destination.complete();\n  }\n\tthis.unsubscribe();\n}\n```\n\n\n\n\n\n### notify\n\né‚£ä¹ˆ expand æ˜¯æ€ä¹ˆæ„æˆé€’å½’çš„å‘¢ï¼Œå½“ä¸‹æ¸¸æµæœ‰æ•°æ®åˆ°æ¥çš„æ—¶å€™ï¼Œä»–ä¼šç›´æ¥è°ƒç”¨ _nextã€‚æœ€ç»ˆå½¢æˆäº† ` _next -> subscribeToProjection -> next -> notifyNext -> _next` è¿™æ ·çš„ä¸€æ¡é€’å½’é“¾ã€‚\n\n```typescript\nnotifyNext(\n  outerValue: T, \n  innerValue: R,\n\touterIndex: number, \n  innerIndex: number,\n\tinnerSub: InnerSubscriber<T, R>\n): void {\n\tthis._next(innerValue);\n}\n```\n\n\n\nä¸‹æ¸¸æµå®Œæˆæ—¶ï¼Œéœ€è¦æ ¹æ® hasCompleted å’Œ buffer çš„çŠ¶æ€æ¥å†³å®šæ˜¯å¦ç»“æŸé€’å½’ã€‚åœ¨è¿™é‡Œï¼Œä¹Ÿå½¢æˆäº†ä¸€æ¡è¿™æ ·çš„é€’å½’é“¾ï¼š ` _next -> subscribeToProjection -> next -> notifyComplete -> _next`  ã€‚\n\n```typescript\nnotifyComplete(innerSub: Subscription): void {\n  const buffer = this.buffer;\n  const destination = this.destination as Subscription;\n  destination.remove(innerSub);\n  this.active--;\n  if (buffer && buffer.length > 0) {\n    this._next(buffer.shift());\n  }\n  if (this.hasCompleted && this.active === 0) {\n    this.destination.complete();\n  }\n}\n```\n\n\n\n\n\n### exhaust\n\n![](http://zcating.gitee.io/imagebed/rxjs_alz/exhaust.png)\n\nexhaust æ˜¯ä¸€ç§æ‰“å¹³æ“ä½œï¼Œå®ƒçš„æºç å¹¶æ²¡æœ‰è°ƒç”¨ exhaustMapã€‚å®ƒçš„å®ç°æ€è·¯å¾ˆç®€å•ï¼Œé€šè¿‡åˆ¤æ–­å½“å‰æ˜¯å¦å­˜åœ¨å‰ä¸€ä¸ªä¸‹æ¸¸æµè®¢é˜…ï¼ˆhasSubscriptionï¼‰ï¼Œæ¥å†³å®šå½“å‰åˆ°æ¥çš„ä¸‹æ¸¸æµæ˜¯å¦å¼€å¯ã€‚\n\n```typescript\nprivate hasCompleted: boolean = false;\nprivate hasSubscription: boolean = false;\n\n\nprotected _next(value: T): void {\n  // å¦‚æœå­˜åœ¨è®¢é˜…ï¼Œé‚£ä¹ˆæŠ›å¼ƒè¿™ä¸ªå€¼\n  if (!this.hasSubscription) {\n    this.hasSubscription = true;\n    this.add(subscribeToResult(this, value));\n  }\n}\n\nprotected _complete(): void {\n  this.hasCompleted = true;\n  if (!this.hasSubscription) {\n    this.destination.complete();\n  }\n}\n\nnotifyComplete(innerSub: Subscription): void {\n  this.remove(innerSub);\n  this.hasSubscription = false;\n  if (this.hasCompleted) {\n    this.destination.complete();\n  }\n}\n```\n\n \n\n## æ€»ç»“\n\næœ¬ç¯‡ä¸»è¦çš„å†…å®¹é›†ä¸­åœ¨åˆ†ææ“ä½œç¬¦æ˜¯å¦‚ä½•è¿›è¡Œæ•°æ®çš„æ˜ å°„ï¼Œé‚£ä¹ˆä¸‹ä¸€ç¯‡å°†è®²è§£çš„æ˜¯ buffer å’Œ window ç›¸å…³çš„ç¼“å­˜æ“ä½œç¬¦æ˜¯å¦‚ä½•è¿è¡Œå’Œå®ç°çš„ã€‚ \n\n## åŠ å…¥æˆ‘ä»¬\n\næˆ‘ä»¬æ˜¯DevUIå›¢é˜Ÿï¼Œæ¬¢è¿æ¥è¿™é‡Œå’Œæˆ‘ä»¬ä¸€èµ·æ‰“é€ ä¼˜é›…é«˜æ•ˆçš„äººæœºè®¾è®¡/ç ”å‘ä½“ç³»ã€‚æ‹›è˜é‚®ç®±ï¼šmuyang2@huawei.comã€‚\n\n\nä½œè€…ï¼šzcxï¼ˆå…¬ä¼—å·ï¼šCoderå†™å­—çš„åœ°æ–¹ï¼‰\n\nåŸæ–‡é“¾æ¥ï¼š[https://mp.weixin.qq.com/s/lrawMOuHNj6GyQJMqK1Now](https://mp.weixin.qq.com/s/lrawMOuHNj6GyQJMqK1Now)\n\n---\n\nå¾€æœŸæ–‡ç« æ¨è\n\n[ã€Šå¥½ç”¨åˆ°é£èµ·ï¼VSCodeæ’ä»¶DevUIHelperè®¾è®¡å¼€å‘å…¨æ”»ç•¥ï¼ˆä¸‰ï¼‰ã€‹](https://juejin.im/post/6856934676406370311)\n\n[ã€ŠWebç•Œé¢æ·±è‰²æ¨¡å¼å’Œä¸»é¢˜åŒ–å¼€å‘ã€‹](https://juejin.im/post/6844904167761248263)\n\n[ã€Šæ‰‹æŠŠæ‰‹æ•™ä½ æ­å»ºä¸€ä¸ªç°åº¦å‘å¸ƒç¯å¢ƒã€‹](https://juejin.im/post/6844904110601273357)\n", "user_name": "DevUIå›¢é˜Ÿ", "description": "DevUIï¼Œè‡´åŠ›äºæ‰“é€ ä¸šç•Œé¢†å…ˆçš„ä¼ä¸šçº§UIç»„ä»¶åº“ã€‚https://github.com/DevCloudFE/ng-devui", "got_view_count": 68417, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "Java", "concern_user_count": 252044, "user_id": "2796746683483751", "title": "Java8ä¸­ä½ å¯èƒ½ä¸çŸ¥é“çš„ä¸€äº›åœ°æ–¹ä¹‹Streamå®æˆ˜ä¸€", "mark_content": "<section id=\"nice\" data-tool=\"mdniceç¼–è¾‘å™¨\" data-website=\"https://www.mdnice.com\" style=\"font-size: 16px; padding: 0 10px; word-spacing: 0px; word-break: break-word; word-wrap: break-word; text-align: left; line-height: 1.25; color: #2b2b2b; font-family: Optima-Regular, Optima, PingFangTC-Light, PingFangSC-light, PingFangTC-light; letter-spacing: 2px; background-image: linear-gradient(90deg, rgba(50, 0, 0, 0.04) 3%, rgba(0, 0, 0, 0) 3%), linear-gradient(360deg, rgba(50, 0, 0, 0.04) 3%, rgba(0, 0, 0, 0) 3%); background-size: 20px 20px; background-position: center center;\"><figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://cushier.coding.net/p/picture/d/picture/git/raw/master/20200810155052.png\" alt style=\"max-width: 100%; border-radius: 6px; display: block; margin: 20px auto; object-fit: contain; box-shadow: 2px 4px 7px #999;\"></figure>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">è¯´èµ·æµï¼Œæˆ‘ä»¬ä¼šæƒ³èµ·æ‰‹æœº ï¼Œç”µè„‘ç»„è£…æµæ°´çº¿ï¼Œç‰©æµä»“åº“å•†å“åŒ…è£…æµæ°´çº¿ç­‰ç­‰ã€‚å¦‚æœæŠŠæ‰‹æœº ,ç”µè„‘,åŒ…è£¹çœ‹åšæœ€ç»ˆç»“æœçš„è¯,é‚£ä¹ˆåŠ å·¥å•†å“å‰çš„å„ç§é›¶éƒ¨ä»¶å°±å¯ä»¥çœ‹åšæ•°æ®æºï¼Œè€Œä¸­é—´ä¸€ç³»åˆ—çš„åŠ å·¥ä½œä¸šæ“ä½œï¼Œå°±å¯ä»¥çœ‹åšæµçš„å¤„ç†ã€‚</p>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #40B8FA;\"><span class=\"prefix\" style=\"display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://my-wechat.mdnice.com/fullstack-1.png); margin-bottom: -22px;\"></span><span class=\"content\" style=\"display: flex; color: #40B8FA; font-size: 20px; margin-left: 25px;\">æµçš„æ¦‚å¿µ</span><span class=\"suffix\" style=\"display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(64, 184, 250, .5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;\"></span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">Java Seä¸­å¯¹äºæµçš„æ“ä½œæœ‰è¾“å…¥è¾“å‡ºIOæµ,è€ŒJava8ä¸­å¼•å…¥çš„Stream å±äºJava APIä¸­çš„ä¸€ä¸ªæ–°æˆå‘˜ï¼Œå®ƒå…è®¸ä½ ä»¥å£°æ˜æ€§æ–¹å¼å¤„ç†æ•°æ®é›†åˆï¼ŒStream ä½¿ç”¨ä¸€ç§ç±»ä¼¼ SQL è¯­å¥ä»æ•°æ®åº“æŸ¥è¯¢æ•°æ®çš„ç›´è§‚æ–¹å¼æ¥æä¾›ä¸€ç§å¯¹ Java é›†åˆè¿ç®—å’Œè¡¨è¾¾çš„é«˜é˜¶æŠ½è±¡ã€‚ æ³¨æ„è¿™é‡Œçš„æµæ“ä½œå¯ä»¥çœ‹åšæ˜¯å¯¹é›†åˆæ•°æ®çš„å¤„ç†ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ç®€å•æ¥è¯´,æµæ˜¯ä¸€ç§æ•°æ®æ¸ é“,ç”¨äºæ“ä½œæ•°æ®æº(é›†åˆã€æ•°ç»„ã€æ–‡ä»¶ç­‰)æ‰€ç”Ÿäº§çš„å…ƒç´ åºåˆ—ã€‚</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">æº-æµä¼šä½¿ç”¨ä¸€ä¸ªæä¾›æ•°æ®çš„æº,å¦‚é›†åˆã€æ•°ç»„æˆ–è¾“å…¥|è¾“å‡ºèµ„æºã€‚</section></li></ul>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ä»æœ‰åºé›†ç”Ÿæˆæµæ—¶ä¼šä¿ç•™åŸæœ‰çš„é¡ºåºã€‚ç”±åˆ—è¡¨ç”Ÿæˆçš„æµï¼Œå…¶å…ƒç´ é¡ºåºä¸åˆ—è¡¨ä¸€è‡´</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">å…ƒç´ åºåˆ—-å°±åƒé›†åˆä¸€æ ·ï¼Œæµä¹Ÿæä¾›äº†ä¸€ä¸ªæ¥å£,å¯ä»¥è®¿é—®ç‰¹å®šå…ƒç´ ç±»å‹çš„ä¸€ç»„æœ‰åºå€¼ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">æ•°æ®å¤„ç†æ“ä½œ-æµçš„æ•°æ®å¤„ç†åŠŸèƒ½æ”¯æŒç±»ä¼¼äºæ•°æ®åº“çš„æ“ä½œ(æ•°æ®ç­›é€‰ã€è¿‡æ»¤ã€æ’åºç­‰æ“ä½œ)ã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">æµæ°´çº¿-å¤šä¸ªæµæ“ä½œæœ¬èº«ä¼šè¿”å›ä¸€ä¸ªæµï¼Œå¤šä¸ªæ“ä½œå°±å¯ä»¥é“¾æ¥èµ·æ¥,æˆä¸ºæ•°æ®å¤„ç†çš„ä¸€é“æµæ°´çº¿ã€‚</section></li></ul>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #40B8FA;\"><span class=\"prefix\" style=\"display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://my-wechat.mdnice.com/fullstack-1.png); margin-bottom: -22px;\"></span><span class=\"content\" style=\"display: flex; color: #40B8FA; font-size: 20px; margin-left: 25px;\">æµ&amp;é›†åˆ</span><span class=\"suffix\" style=\"display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(64, 184, 250, .5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;\"></span></h2>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">è®¡ç®—çš„æ—¶æœŸ</section></li></ul>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://cushier.coding.net/p/picture/d/picture/git/raw/master/20200810155614.png\" alt style=\"max-width: 100%; border-radius: 6px; display: block; margin: 20px auto; object-fit: contain; box-shadow: 2px 4px 7px #999;\"></figure>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">é›†åˆä¸­æ•°æ®éƒ½æ˜¯è®¡ç®—å®Œæ¯•çš„æ•°æ®ï¼Œä¾‹å¦‚ä»æ•°æ®åº“ä¸­æŸ¥è¯¢ç”¨æˆ·è®°å½• æŒ‰ç”¨æˆ·id æŸ¥è¯¢ é™åºæ’åˆ— ç„¶åé€šè¿‡list æ¥æ”¶ç”¨æˆ·è®°å½•ï¼Œæ•°æ®çš„è®¡ç®—å·²åœ¨æ”¾å…¥é›†åˆå‰å®Œæˆã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æµä¸­æ•°æ®æŒ‰éœ€è®¡ç®—ï¼ŒæŒ‰ç…§ä½¿ç”¨è€…çš„éœ€è¦è®¡ç®—æ•°æ®ï¼Œä¾‹å¦‚é€šè¿‡æœç´¢å¼•æ“è¿›è¡Œæœç´¢ï¼Œæœç´¢å‡ºæ¥çš„æ¡ç›®å¹¶ä¸æ˜¯å…¨éƒ¨å‘ˆç°å‡ºæ¥çš„ï¼Œè€Œä¸”å…ˆæ˜¾ç¤ºæœ€ç¬¦åˆçš„å‰ 10 æ¡æˆ–è€…å‰ 20 æ¡ï¼Œåªæœ‰åœ¨ç‚¹å‡» â€œä¸‹ä¸€é¡µâ€ çš„æ—¶å€™ï¼Œæ‰ä¼šå†è¾“å‡ºæ–°çš„ 10 æ¡ã€‚æµçš„è®¡ç®—ä¹Ÿæ˜¯è¿™æ ·ï¼Œå½“ç”¨æˆ·éœ€è¦å¯¹åº”æ•°æ®æ—¶ï¼ŒStream æ‰ä¼šå¯¹å…¶è¿›è¡Œè®¡ç®—å¤„ç†ã€‚</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">å¤–éƒ¨è¿­ä»£ä¸å†…éƒ¨è¿­ä»£</section></li></ul>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://cushier.coding.net/p/picture/d/picture/git/raw/master/20200810155717.png\" alt style=\"max-width: 100%; border-radius: 6px; display: block; margin: 20px auto; object-fit: contain; box-shadow: 2px 4px 7px #999;\"></figure>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æŠŠé›†åˆæ¯”ä½œä¸€ä¸ªå·¥å‚çš„ä»“åº“çš„è¯ï¼Œä¸€å¼€å§‹å·¥å‚ç¡¬ä»¶æ¯”è¾ƒè½åï¼Œè¦å¯¹è´§ç‰©ä½œä»€ä¹ˆä¿®æ”¹ï¼Œæ­¤æ—¶å·¥äººäº²è‡ªèµ°è¿›ä»“åº“å¯¹è´§ç‰©è¿›è¡Œå¤„ç†ï¼Œæœ‰æ—¶å€™è¿˜è¦å°†å¤„ç†åçš„è´§ç‰©è½¬è¿åˆ°å¦ä¸€ä¸ªä»“åº“ä¸­ã€‚æ­¤æ—¶å¯¹äºå¼€å‘è€…æ¥è¯´éœ€è¦äº²è‡ªå»åšè¿­ä»£ï¼Œä¸€ä¸ªä¸ªåœ°æ‰¾åˆ°éœ€è¦çš„è´§ç‰©ï¼Œå¹¶è¿›è¡Œå¤„ç†ï¼Œè¿™å«åšå¤–éƒ¨è¿­ä»£ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å½“å·¥å‚å‘å±•èµ·æ¥åï¼Œé…å¤‡äº†æµæ°´çº¿ä½œä¸šï¼Œå·¥å‚åªè¦æ ¹æ®éœ€æ±‚è®¾è®¡å‡ºç›¸åº”çš„æµæ°´çº¿ï¼Œç„¶åå·¥äººåªè¦æŠŠè´§ç‰©æ”¾åˆ°æµæ°´çº¿ä¸Šï¼Œå°±å¯ä»¥ç­‰ç€æ¥æ”¶æˆæœäº†ï¼Œè€Œä¸”æµæ°´çº¿è¿˜å¯ä»¥æ ¹æ®è¦æ±‚ç›´æ¥æŠŠè´§ç‰©è¾“é€åˆ°ç›¸åº”çš„ä»“åº“ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">è¿™å°±å«åšå†…éƒ¨è¿­ä»£ï¼Œæµæ°´çº¿å·²ç»å¸®ä½ æŠŠè¿­ä»£ç»™å®Œæˆäº†ï¼Œä½ åªéœ€è¦è¯´è¦å¹²ä»€ä¹ˆå°±å¯ä»¥äº†ï¼ˆå³è®¾è®¡å‡ºåˆç†çš„æµæ°´çº¿ï¼‰ã€‚ç›¸å½“äº Java8 å¼•å…¥çš„Stream å¯¹æ•°æ®çš„å¤„ç†å®ç°äº†â€è‡ªåŠ¨åŒ–â€æ“ä½œã€‚</p>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #40B8FA;\"><span class=\"prefix\" style=\"display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://my-wechat.mdnice.com/fullstack-1.png); margin-bottom: -22px;\"></span><span class=\"content\" style=\"display: flex; color: #40B8FA; font-size: 20px; margin-left: 25px;\">æµæ“ä½œè¿‡ç¨‹</span><span class=\"suffix\" style=\"display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(64, 184, 250, .5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;\"></span></h2>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://cushier.coding.net/p/picture/d/picture/git/raw/master/20200810155835.png\" alt style=\"max-width: 100%; border-radius: 6px; display: block; margin: 20px auto; object-fit: contain; box-shadow: 2px 4px 7px #999;\"></figure>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æ•´ä¸ªæµæ“ä½œå°±æ˜¯ä¸€æ¡æµæ°´çº¿ï¼Œå°†å…ƒç´ æ”¾åœ¨æµæ°´çº¿ä¸Šä¸€ä¸ªä¸ªåœ°è¿›è¡Œå¤„ç†ã€‚éœ€è¦æ³¨æ„çš„æ˜¯:å¾ˆå¤šæµæ“ä½œæœ¬èº«å°±ä¼šè¿”å›ä¸€ä¸ªæµï¼Œæ‰€ä»¥å¤šä¸ªæ“ä½œå¯ä»¥ç›´æ¥è¿æ¥èµ·æ¥ï¼Œ å¦‚ä¸‹å›¾è¿™æ ·ï¼Œæ“ä½œå¯ä»¥è¿›è¡Œé“¾å¼è°ƒç”¨ï¼Œå¹¶ä¸”å¹¶è¡Œæµè¿˜å¯ä»¥å®ç°æ•°æ®æµå¹¶è¡Œå¤„ç†æ“ä½œã€‚</p>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://cushier.coding.net/p/picture/d/picture/git/raw/master/20200810155909.png\" alt style=\"max-width: 100%; border-radius: 6px; display: block; margin: 20px auto; object-fit: contain; box-shadow: 2px 4px 7px #999;\"></figure>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æ€»çš„æ¥è¯´ï¼Œæµæ“ä½œè¿‡ç¨‹åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µ:</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">åˆ›å»º</section></li></ul>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å€ŸåŠ©æ•°æ®æºåˆ›å»ºæµå¯¹è±¡</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">ä¸­é—´å¤„ç†</section></li></ul>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ç­›é€‰ã€åˆ‡ç‰‡ã€æ˜ å°„ã€æ’åºç­‰ä¸­é—´æ“ä½œ</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">ç»ˆæ­¢æµ</section></li></ul>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">åŒ¹é…ã€æ±‡æ€»ã€åˆ†ç»„ç­‰ç»ˆæ­¢æ“ä½œ</p>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #40B8FA;\"><span class=\"prefix\" style=\"display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://my-wechat.mdnice.com/fullstack-1.png); margin-bottom: -22px;\"></span><span class=\"content\" style=\"display: flex; color: #40B8FA; font-size: 20px; margin-left: 25px;\">æµçš„åˆ›å»º</span><span class=\"suffix\" style=\"display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(64, 184, 250, .5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;\"></span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">å¯¹æµæ“ä½œé¦–å…ˆè¦åˆ›å»ºå¯¹åº”çš„æµï¼Œæµçš„åˆ›å»ºé›†ä¸­å½¢å¼å¦‚ä¸‹:</p>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://cushier.coding.net/p/picture/d/picture/git/raw/master/20200810160008.png\" alt style=\"max-width: 100%; border-radius: 6px; display: block; margin: 20px auto; object-fit: contain; box-shadow: 2px 4px 7px #999;\"></figure>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding: 0px; color: black; font-size: 17px; font-weight: bold; text-align: center; position: relative; margin-top: 20px; margin-bottom: 20px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid RGBA(79, 177, 249, .65); color: #2b2b2b; padding-bottom: 2px;\"><span style=\"width: 30px; height: 30px; display: block; background-image: url(https://my-wechat.mdnice.com/fullstack-2.png); background-position: center; background-size: 30px; margin: auto; opacity: 1; background-repeat: no-repeat; margin-bottom: -8px;\"></span>1 é›†åˆåˆ›å»ºæµ</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">åœ¨ Java 8 ä¸­, é›†åˆæ¥å£æœ‰ä¸¤ä¸ªæ–¹æ³•æ¥ç”Ÿæˆæµï¼š</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">stream() âˆ’ ä¸ºé›†åˆåˆ›å»ºä¸²è¡Œæµã€‚</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">parallelStream() âˆ’ ä¸ºé›†åˆåˆ›å»ºå¹¶è¡Œæµã€‚</section></li></ul>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ç¤ºä¾‹ä»£ç å¦‚ä¸‹:</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; background: #282c34; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\"><span class=\"hljs-function\" style=\"line-height: 26px;\"><span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">public</span>&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">static</span>&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">void</span>&nbsp;<span class=\"hljs-title\" style=\"color: #61aeee; line-height: 26px;\">main</span><span class=\"hljs-params\" style=\"line-height: 26px;\">(String[]&nbsp;args)</span>&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">/**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;å®šä¹‰é›†åˆl1&nbsp;å¹¶ä¸ºé›†åˆåˆ›å»ºä¸²è¡Œæµ<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><br>&nbsp;&nbsp;&nbsp;&nbsp;List&lt;String&gt;&nbsp;l1&nbsp;=&nbsp;Arrays.asList(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"å‘¨æ˜Ÿé©°\"</span>,&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"å‘¨æ°ä¼¦\"</span>,&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"å‘¨æ˜Ÿæ˜Ÿ\"</span>,&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"å‘¨æ¶¦å‘\"</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;è¿”å›ä¸²è¡Œæµ</span><br>&nbsp;&nbsp;&nbsp;&nbsp;l1.stream();<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;è¿”å›å¹¶è¡Œæµ</span><br>&nbsp;&nbsp;&nbsp;&nbsp;l1.parallelStream();<br>}<br></code></pre>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ä¸Šè¿°æ“ä½œå¾—åˆ°çš„æµæ˜¯é€šè¿‡åŸå§‹æ•°æ®è½¬æ¢è¿‡æ¥çš„æµï¼Œé™¤äº†è¿™ç§æµåˆ›å»ºçš„åŸºæœ¬æ“ä½œå¤–ï¼Œå¯¹äºæµçš„åˆ›å»ºè¿˜æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼ã€‚</p>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding: 0px; color: black; font-size: 17px; font-weight: bold; text-align: center; position: relative; margin-top: 20px; margin-bottom: 20px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid RGBA(79, 177, 249, .65); color: #2b2b2b; padding-bottom: 2px;\"><span style=\"width: 30px; height: 30px; display: block; background-image: url(https://my-wechat.mdnice.com/fullstack-2.png); background-position: center; background-size: 30px; margin: auto; opacity: 1; background-repeat: no-repeat; margin-bottom: -8px;\"></span>2 å€¼åˆ›å»ºæµ</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">Stream.of(T...) ï¼š Stream.of(\"aa\", \"bb\") ç”Ÿæˆæµ</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; background: #282c34; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\"><span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//å€¼åˆ›å»ºæµ&nbsp;ç”Ÿæˆä¸€ä¸ªå­—ç¬¦ä¸²æµ</span><br>Stream&lt;String&gt;&nbsp;stream&nbsp;=&nbsp;Stream.of(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"java8\"</span>,&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"Spring\"</span>,&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"SpringCloud\"</span>);<br>stream.forEach(System.out::println);<br></code></pre>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding: 0px; color: black; font-size: 17px; font-weight: bold; text-align: center; position: relative; margin-top: 20px; margin-bottom: 20px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid RGBA(79, 177, 249, .65); color: #2b2b2b; padding-bottom: 2px;\"><span style=\"width: 30px; height: 30px; display: block; background-image: url(https://my-wechat.mdnice.com/fullstack-2.png); background-position: center; background-size: 30px; margin: auto; opacity: 1; background-repeat: no-repeat; margin-bottom: -8px;\"></span>3 æ•°ç»„åˆ›å»ºæµ</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æ ¹æ®å‚æ•°çš„æ•°ç»„ç±»å‹åˆ›å»ºå¯¹åº”çš„æµã€‚</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">Arrays.stream(T[ ])</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">Arrays.stream(int[ ])</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">Arrays.stream(double[ ])</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">Arrays.stream(long[ ])</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; background: #282c34; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\">&nbsp;<span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">/**<br>&nbsp;*&nbsp;è¿™é‡Œä»¥int&nbsp;ä¸ºä¾‹&nbsp;&nbsp;&nbsp;long&nbsp;double&nbsp;ä¸å†ä¸¾ä¾‹<br>&nbsp;*/</span><br>&nbsp;Stream&nbsp;stream&nbsp;=&nbsp;Arrays.stream(Arrays.asList(<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">10</span>,&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">20</span>,&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">30</span>,&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">40</span>).toArray());<br>&nbsp;<span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;æ ¹æ®æ•°ç»„ç´¢å¼•èŒƒå›´åˆ›å»ºæŒ‡å®šStream</span><br>&nbsp;stream&nbsp;=&nbsp;Arrays.stream(Arrays.asList(<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">10</span>,&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">20</span>,&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">30</span>,&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">40</span>).toArray(),&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">0</span>,&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">2</span>);<br></code></pre>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding: 0px; color: black; font-size: 17px; font-weight: bold; text-align: center; position: relative; margin-top: 20px; margin-bottom: 20px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid RGBA(79, 177, 249, .65); color: #2b2b2b; padding-bottom: 2px;\"><span style=\"width: 30px; height: 30px; display: block; background-image: url(https://my-wechat.mdnice.com/fullstack-2.png); background-position: center; background-size: 30px; margin: auto; opacity: 1; background-repeat: no-repeat; margin-bottom: -8px;\"></span>4 æ–‡ä»¶ç”Ÿæˆæµ</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; background: #282c34; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\">stream&nbsp;=&nbsp;Files.lines(Paths.get(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"C:\\\\java\\\\jdbc.properties\"</span>));<br>System.out.println(stream.collect(Collectors.toList()));<br><span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;æŒ‡å®šå­—ç¬¦é›†ç¼–ç </span><br>stream&nbsp;=&nbsp;Files.lines(Paths.get(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"C:\\\\java\\\\jdbc.properties\"</span>),&nbsp;Charset.forName(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"utf-8\"</span>));<br>System.out.println(stream.collect(Collectors.toList()));<br></code></pre>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding: 0px; color: black; font-size: 17px; font-weight: bold; text-align: center; position: relative; margin-top: 20px; margin-bottom: 20px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid RGBA(79, 177, 249, .65); color: #2b2b2b; padding-bottom: 2px;\"><span style=\"width: 30px; height: 30px; display: block; background-image: url(https://my-wechat.mdnice.com/fullstack-2.png); background-position: center; background-size: 30px; margin: auto; opacity: 1; background-repeat: no-repeat; margin-bottom: -8px;\"></span>5 å‡½æ•°ç”Ÿæˆæµ</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ä¸¤ä¸ªæ–¹æ³•ï¼š</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">iterate ï¼š ä¾æ¬¡å¯¹æ¯ä¸ªæ–°ç”Ÿæˆçš„å€¼åº”ç”¨å‡½æ•°</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">generate ï¼šæ¥å—ä¸€ä¸ªå‡½æ•°ï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„å€¼</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; background: #282c34; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\">&nbsp;<span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;é‡100&nbsp;å¼€å§‹&nbsp;ç”Ÿæˆå¶æ•°æµ</span><br>&nbsp;Stream.iterate(<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">100</span>,&nbsp;n&nbsp;-&gt;&nbsp;n&nbsp;+&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">2</span>);<br>&nbsp;<span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;äº§ç”Ÿ1-100&nbsp;éšæœºæ•°</span><br>&nbsp;Stream.generate(()&nbsp;-&gt;(<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">int</span>)&nbsp;(Math.random()&nbsp;*&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">100</span>&nbsp;+&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>));<br></code></pre>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #40B8FA;\"><span class=\"prefix\" style=\"display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://my-wechat.mdnice.com/fullstack-1.png); margin-bottom: -22px;\"></span><span class=\"content\" style=\"display: flex; color: #40B8FA; font-size: 20px; margin-left: 25px;\">æµä¸­é—´æ“ä½œ</span><span class=\"suffix\" style=\"display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(64, 184, 250, .5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;\"></span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æµçš„ä¸­é—´æ“ä½œåˆ†ä¸ºä¸‰å¤§ç±»:ç­›é€‰åˆ‡ç‰‡ã€æ˜ å°„ã€æ’åºã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">ç­›é€‰åˆ‡ç‰‡:ç±»ä¼¼sql ä¸­where æ¡ä»¶åˆ¤æ–­çš„æ„æ€ï¼Œå¯¹å…ƒç´ è¿›è¡Œç­›é€‰æ“ä½œ</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æ˜ å°„:å¯¹å…ƒç´ ç»“æœè¿›è¡Œè½¬æ¢ ï¼Œä¼˜ç‚¹ç±»ä¼¼select å­—æ®µæ„æ€æˆ–è€…å¯¹å…ƒç´ å†…å®¹è¿›è¡Œè½¬æ¢å¤„ç†</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æ’åº:æ¯”è¾ƒå¥½ç†è§£ ï¼Œå¸¸ç”¨sql ä¸­æŒ‰å­—æ®µå‡åº é™åºæ“ä½œ</p>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://cushier.coding.net/p/picture/d/picture/git/raw/master/20200810161131.png\" alt style=\"max-width: 100%; border-radius: 6px; display: block; margin: 20px auto; object-fit: contain; box-shadow: 2px 4px 7px #999;\"></figure>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">æµä¸­é—´æ“ä½œæ•°æ®å‡†å¤‡ï¼ˆè¿™é‡Œä»¥è®¢å•æ•°æ®å¤„ç†ä¸ºä¾‹ï¼‰</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; background: #282c34; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\"><span class=\"hljs-meta\" style=\"color: #61aeee; line-height: 26px;\">@Data</span><br><span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">public</span>&nbsp;<span class=\"hljs-class\" style=\"line-height: 26px;\"><span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">class</span>&nbsp;<span class=\"hljs-title\" style=\"color: #e6c07b; line-height: 26px;\">Order</span>&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;è®¢å•id</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">private</span>&nbsp;Integer&nbsp;id;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;è®¢å•ç”¨æˆ·id</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">private</span>&nbsp;Integer&nbsp;userId;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;è®¢å•ç¼–å·</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">private</span>&nbsp;String&nbsp;orderNo;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;è®¢å•æ—¥æœŸ</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">private</span>&nbsp;Date&nbsp;orderDate;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;æ”¶è´§åœ°å€</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">private</span>&nbsp;String&nbsp;address;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;åˆ›å»ºæ—¶é—´</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">private</span>&nbsp;Date&nbsp;createDate;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;æ›´æ–°æ—¶é—´</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">private</span>&nbsp;Date&nbsp;updateDate;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;è®¢å•çŠ¶æ€&nbsp;&nbsp;0-æœªæ”¯ä»˜&nbsp;&nbsp;1-å·²æ”¯ä»˜&nbsp;&nbsp;2-å¾…å‘è´§&nbsp;&nbsp;3-å·²å‘è´§&nbsp;&nbsp;4-å·²æ¥æ”¶&nbsp;&nbsp;5-å·²å®Œæˆ</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">private</span>&nbsp;Integer&nbsp;status;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;æ˜¯å¦æœ‰æ•ˆ&nbsp;&nbsp;1-æœ‰æ•ˆè®¢å•&nbsp;&nbsp;0-æ— æ•ˆè®¢å•</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">private</span>&nbsp;Integer&nbsp;isValid;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//è®¢å•æ€»é‡‘é¢</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">private</span>&nbsp;&nbsp;Double&nbsp;total;<br>&nbsp;&nbsp;}<br><br>Order&nbsp;order01&nbsp;=&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">new</span>&nbsp;Order(<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>,&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">10</span>,&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"20190301\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">new</span>&nbsp;Date(),&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"ä¸Šæµ·å¸‚-æµ¦ä¸œåŒº\"</span>,&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">new</span>&nbsp;Date(),&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">new</span>&nbsp;Date(),&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">4</span>,&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>,&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">100.0</span>);<br>Order&nbsp;order02&nbsp;=&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">new</span>&nbsp;Order(<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">2</span>,&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">30</span>,&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"20190302\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">new</span>&nbsp;Date(),&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"åŒ—äº¬å¸‚å››æƒ åŒº\"</span>,&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">new</span>&nbsp;Date(),&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">new</span>&nbsp;Date(),&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>,&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>,&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">2000.0</span>);<br>Order&nbsp;order03&nbsp;=&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">new</span>&nbsp;Order(<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">3</span>,&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">20</span>,&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"20190303\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">new</span>&nbsp;Date(),&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"åŒ—äº¬å¸‚-æœé˜³åŒº\"</span>,&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">new</span>&nbsp;Date(),&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">new</span>&nbsp;Date(),&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">4</span>,&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>,&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">500.0</span>);<br>Order&nbsp;order04&nbsp;=&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">new</span>&nbsp;Order(<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">4</span>,&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">40</span>,&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"20190304\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">new</span>&nbsp;Date(),&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"åŒ—äº¬å¸‚-å¤§å…´åŒº\"</span>,&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">new</span>&nbsp;Date(),&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">new</span>&nbsp;Date(),&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">4</span>,&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>,&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">256.0</span>);<br>Order&nbsp;order05&nbsp;=&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">new</span>&nbsp;Order(<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">5</span>,&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">40</span>,&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"20190304\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">new</span>&nbsp;Date(),&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"ä¸Šæµ·å¸‚-æ¾æ±ŸåŒº\"</span>,&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">new</span>&nbsp;Date(),&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">new</span>&nbsp;Date(),&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">4</span>,&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>,&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1000.0</span>);<br>ordersList&nbsp;=&nbsp;Arrays.asList(order01,&nbsp;order02,&nbsp;order03,&nbsp;order04,&nbsp;order05);<br></code></pre>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #40B8FA;\"><span class=\"prefix\" style=\"display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://my-wechat.mdnice.com/fullstack-1.png); margin-bottom: -22px;\"></span><span class=\"content\" style=\"display: flex; color: #40B8FA; font-size: 20px; margin-left: 25px;\">ç­›é€‰&amp;åˆ‡ç‰‡</span><span class=\"suffix\" style=\"display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(64, 184, 250, .5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;\"></span></h2>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">ç­›é€‰æœ‰æ•ˆè®¢å•</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; background: #282c34; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\"><span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;è¿‡æ»¤æœ‰æ•ˆè®¢å•</span><br>ordersList.stream().filter((order)&nbsp;-&gt;&nbsp;order.getIsValid()&nbsp;==&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;.forEach(System.out::println);<br></code></pre>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">ç­›é€‰æœ‰æ•ˆè®¢å• å–ç¬¬ä¸€é¡µæ•°æ®(æ¯é¡µ2æ¡è®°å½•)</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; background: #282c34; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\">&nbsp;<span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;è¿‡æ»¤æœ‰æ•ˆè®¢å•&nbsp;å–ç¬¬ä¸€é¡µæ•°æ®(æ¯é¡µ2æ¡è®°å½•)&nbsp;</span><br>&nbsp;ordersList.stream().filter((order)&nbsp;-&gt;&nbsp;order.getIsValid()&nbsp;==&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.limit(<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">2</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.forEach(System.out::println);<br></code></pre>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">ç­›é€‰è®¢å•é›†åˆæœ‰æ•ˆè®¢å• å–æœ€åä¸€æ¡è®°å½•</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; background: #282c34; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\"><span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;è¿‡æ»¤è®¢å•é›†åˆæœ‰æ•ˆè®¢å•&nbsp;å–æœ€åä¸€æ¡è®°å½•</span><br>ordersList.stream().filter((order)&nbsp;-&gt;&nbsp;order.getIsValid()&nbsp;==&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;.skip(ordersList.size()&nbsp;-&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">2</span>)&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;è·³è¿‡å‰ordersList.size()-2&nbsp;è®°å½•</span><br>&nbsp;&nbsp;&nbsp;&nbsp;.forEach(System.out::println);<br></code></pre>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">ç­›é€‰æœ‰æ•ˆè®¢å• å–ç¬¬3é¡µæ•°æ®(æ¯é¡µ2æ¡è®°å½•)</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; background: #282c34; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\"><span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;è¿‡æ»¤æœ‰æ•ˆè®¢å•&nbsp;å–ç¬¬3é¡µæ•°æ®(æ¯é¡µ2æ¡è®°å½•)&nbsp;å¹¶æ‰“å°åˆ°æ§åˆ¶å°</span><br>ordersList.stream().filter((order)&nbsp;-&gt;&nbsp;order.getIsValid()&nbsp;==&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;.skip((<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">3</span>&nbsp;-&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>)&nbsp;*&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">2</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;.limit(<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">2</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;.forEach(System.out::println);<br></code></pre>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">ç­›é€‰æ— æ•ˆè®¢å•å»é™¤é‡å¤è®¢å•å·è®°å½•</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; background: #282c34; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\"><span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;è¿‡æ»¤æ— æ•ˆè®¢å•&nbsp;å»é™¤é‡å¤è®¢å•å·è®°å½•&nbsp;&nbsp;é‡å†™Order&nbsp;equals&nbsp;ä¸&nbsp;hashCode&nbsp;æ–¹æ³•</span><br>ordersList.stream().filter((order)&nbsp;-&gt;&nbsp;order.getIsValid()&nbsp;==&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">0</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;.distinct()<br>&nbsp;&nbsp;&nbsp;&nbsp;.forEach(System.out::println);<br></code></pre>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #40B8FA;\"><span class=\"prefix\" style=\"display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://my-wechat.mdnice.com/fullstack-1.png); margin-bottom: -22px;\"></span><span class=\"content\" style=\"display: flex; color: #40B8FA; font-size: 20px; margin-left: 25px;\">æ˜ å°„</span><span class=\"suffix\" style=\"display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(64, 184, 250, .5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;\"></span></h2>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">è¿‡æ»¤æœ‰æ•ˆè®¢å•,è·å–æ‰€æœ‰è®¢å•ç¼–å·</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; background: #282c34; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\"><span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//è¿‡æ»¤æœ‰æ•ˆè®¢å•ï¼Œè·å–æ‰€æœ‰è®¢å•ç¼–å·</span><br>ordersList.stream().filter((order)&nbsp;-&gt;&nbsp;order.getIsValid()&nbsp;==&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;.map((order)&nbsp;-&gt;&nbsp;order.getOrderNo())<br>&nbsp;&nbsp;&nbsp;&nbsp;.forEach(System.out::println);<br></code></pre>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">è¿‡æ»¤æœ‰æ•ˆè®¢å• ,å¹¶åˆ†ç¦»æ¯ä¸ªè®¢å•ä¸‹æ”¶è´§åœ°å€å¸‚åŒºä¿¡æ¯</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; background: #282c34; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\">ordersList.stream().map(o&nbsp;-&gt;&nbsp;o.getAddress()<br>&nbsp;&nbsp;&nbsp;&nbsp;.split(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"-\"</span>))<br>&nbsp;&nbsp;&nbsp;&nbsp;.flatMap(Arrays::stream)<br>&nbsp;&nbsp;&nbsp;&nbsp;.forEach(System.out::println);<br></code></pre>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #40B8FA;\"><span class=\"prefix\" style=\"display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://my-wechat.mdnice.com/fullstack-1.png); margin-bottom: -22px;\"></span><span class=\"content\" style=\"display: flex; color: #40B8FA; font-size: 20px; margin-left: 25px;\">æ’åº</span><span class=\"suffix\" style=\"display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(64, 184, 250, .5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;\"></span></h2>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">è¿‡æ»¤æœ‰æ•ˆè®¢å• æ ¹æ®ç”¨æˆ·id è¿›è¡Œæ’åº</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; background: #282c34; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\"><span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//è¿‡æ»¤æœ‰æ•ˆè®¢å•&nbsp;æ ¹æ®ç”¨æˆ·id&nbsp;è¿›è¡Œæ’åº</span><br>ordersList.stream().filter((order)&nbsp;-&gt;&nbsp;order.getIsValid()&nbsp;==&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;.sorted((o1,&nbsp;o2)&nbsp;-&gt;&nbsp;o1.getUserId()&nbsp;-&nbsp;o2.getUserId())<br>&nbsp;&nbsp;&nbsp;&nbsp;.forEach(System.out::println);&nbsp;&nbsp;<br><br>&nbsp;<span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//æˆ–è€…ç­‰ä»·å†™æ³•&nbsp;</span><br>ordersList.stream().filter((order)&nbsp;-&gt;&nbsp;order.getIsValid()&nbsp;==&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;.sorted(Comparator.comparingInt(Order::getUserId))<br>&nbsp;&nbsp;&nbsp;&nbsp;.forEach(System.out::println);<br></code></pre>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">è¿‡æ»¤æœ‰æ•ˆè®¢å• ,æ ¹æ®è®¢å•çŠ¶æ€æ’åº å¦‚æœè®¢å•çŠ¶æ€ç›¸åŒæ ¹æ®è®¢å•åˆ›å»ºæ—¶é—´æ’åº</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; background: #282c34; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px;\"><span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//è¿‡æ»¤æœ‰æ•ˆè®¢å•&nbsp;&nbsp;å¦‚æœè®¢å•çŠ¶æ€ç›¸åŒ&nbsp;æ ¹æ®è®¢å•åˆ›å»ºæ—¶é—´æ’åº&nbsp;åä¹‹æ ¹æ®è®¢å•çŠ¶æ€æ’åº</span><br>ordersList.stream().filter((order)&nbsp;-&gt;&nbsp;order.getIsValid()&nbsp;==&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;.sorted((o1,&nbsp;o2)&nbsp;-&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">if</span>&nbsp;(o1.getStatus().equals(o2.getStatus()))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">return</span>&nbsp;o1.getCreateDate().compareTo(o2.getCreateDate());<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">else</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">return</span>&nbsp;o1.getStatus().compareTo(o2.getStatus());<br>&nbsp;&nbsp;&nbsp;&nbsp;}})<br>&nbsp;&nbsp;&nbsp;&nbsp;.forEach(System.out::println);<br><br><br><span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;ç­‰ä»·å½¢å¼</span><br>ordersList.stream().filter((order)&nbsp;-&gt;&nbsp;order.getIsValid()&nbsp;==&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">1</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;.sorted(Comparator.comparing(Order::getCreateDate)<br>&nbsp;&nbsp;&nbsp;&nbsp;.thenComparing(Comparator.comparing(Order::getStatus)))<br>&nbsp;&nbsp;&nbsp;&nbsp;.forEach(System.out::println);<br></code></pre>\n", "user_name": "åŒä¸€ç‰‡è“å¤©ä¸‹", "description": "ä¸€ä¸ªå‘†èŒã®å°å°ç¨‹åºå‘˜", "got_view_count": 2085, "category_name": "åç«¯", "ctime": 1457483880}
{"tag_name": "ECMAScript 6", "concern_user_count": 156509, "user_id": "3825956197502558", "title": "ä¸€æ–‡å¸¦ä½ äº†è§£ES6 Module", "mark_content": "## å‰è¨€\n\n> å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯**Frank**ã€‚æˆ‘ä»¬æ¯å¤©éƒ½åœ¨ç”¨ `import` ã€`export`ï¼Œä½†å¥½åƒä»æ²¡æœ‰çœŸæ­£äº†è§£è¿‡å®ƒï¼Œé‚£ä¹ˆä»Šå¤©æˆ‘ä»¬å°±ä¸€èµ·æ¥äº†è§£ä¸€ä¸‹ã€‚\n\n## æ­£æ–‡\n> æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œ`es6` ä¹‹å‰Javascriptä»æœªæä¾›è¿‡æ¨¡å—çš„æ¦‚å¿µï¼ŒåƒRubyçš„ `required` ã€Pythonçš„ `import` ï¼Œç”šè‡³CSSéƒ½æœ‰ `@import` ã€‚è¯´åˆ° `es6` çš„æ¨¡å—æˆ‘ä»¬å°±éœ€è¦è¯´ä¸€ä¸‹æ¨¡å—çš„ç”±æ¥ã€‚\n\n> åœ¨JSåˆæœŸï¼Œå› ä¸ºJSé€»è¾‘éƒ½æ¯”è¾ƒç®€å•ï¼Œå†…å®¹ä¹Ÿæ¯”è¾ƒå°‘ï¼Œæ‰€ä»¥å°±æ²¡æœ‰æ¨¡å—åŒ–ã€å·¥ç¨‹åŒ–çš„æ¦‚å¿µã€‚ä½†éšç€å‰ç«¯æŠ€æœ¯çš„å‘å±•ï¼Œå‰ç«¯é€»è¾‘ä¹Ÿè¶Šæ¥è¶Šå¤æ‚ï¼Œå¦‚æœæˆ‘ä»¬æŠŠå†…å®¹éƒ½å†™åˆ°ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œé‚£åŠ¿å¿…ä¼šé€ æˆä¸å¯ç»´æŠ¤ã€‚äºæ˜¯ï¼ŒJSä¹Ÿåƒåç«¯è¯­è¨€ä¸€æ ·æ¨å‡ºäº†æ¨¡å—åŒ–ã€å·¥ç¨‹åŒ–çš„æ¦‚å¿µã€‚\n\n### 1.commonJS\n> åœ¨è¯´ `es6` æ¨¡å—ä»¥å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹åç«¯æ™®éä½¿ç”¨çš„æ‰“åŒ…æ–¹å¼ï¼ŒcommonJSçš„ä¸€äº›ç‰¹æ€§ã€‚\n\n+ åŒæ­¥åŠ è½½\n> ä¹Ÿå°±æ˜¯ä¸²è¡Œæ‰§è¡Œï¼Œåé¢çš„ä»»åŠ¡è¦ç­‰åˆ°å‰é¢ä»»åŠ¡æ‰§è¡Œå®Œæ‰èƒ½ç»§ç»­æ‰§è¡Œã€‚\n\n+ è¯­æ³•\n> commonJSä¸­ä½¿ç”¨ `require` å¼•å…¥ï¼Œ`module.exports` è¾“å‡ºã€‚\n\n+ æ‰§è¡Œé¡ºåºï¼š\n> `commonJSè¾“å‡ºçš„æ˜¯ä¸€ä¸ªå€¼å¾—æ‹·è´`ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€æ—¦è¾“å‡ºä¸€ä¸ªå€¼ï¼ˆè¯¥å€¼ä¼šè¢«ç¼“å­˜èµ·æ¥ï¼‰ï¼Œæ¨¡å—å†…éƒ¨çš„å˜åŒ–å°±ä¸ä¼šå½±å“åˆ°è¿™ä¸ªå€¼ã€‚è¿‡ç¨‹å¤§æ¦‚æ˜¯ï¼Œå…ˆå°†å¼•å…¥æ¨¡å—æ‰§è¡Œä¸€éï¼Œå†æ‰§è¡Œåé¢çš„æ–¹æ³•ï¼Œç­‰åˆ°å†…å®¹æ‰§è¡Œå®Œï¼Œç”Ÿæˆä¸€ä¸ªå˜é‡å­˜å‚¨éœ€è¦è¾“å‡ºçš„å†…å®¹ã€‚ä»”ç»†é˜…è¯»ä»¥ä¸‹ä»£ç \n```javascript\n// module.js\nlet a = 1;\nfunction foo(){\n    a++;\n}\nmodule.exports = {foo, a};\n\n// index.js\nlet {foo, a} = require('./module.js');\nconsole.log(a); // 1\nfoo();\nconsole.log(a); // 1\n```\n+ æ„ä¹‰\n> commonJSçš„æ„ä¹‰åœ¨äºå°†èšç±»çš„æ–¹æ³•å’Œå˜é‡ç­‰é™å®šçš„ç§æœ‰åŸŸä¸­ï¼ŒåŒæ—¶æ”¯æŒå¯¼å…¥å’Œå¯¼å‡ºï¼Œå°†ä¸Šä¸‹æ¸¸æ¨¡å—æ— ç¼è¡”æ¥ï¼Œæ¯ä¸ªæ¨¡å—å…·æœ‰ç‹¬ç«‹çš„ç©ºé—´ï¼Œäº’ä¸å¹²æ‰°ã€‚\n\n\n### 2.importã€export\n> ES6ä»¥åå‡ºç°çš„importã€exportå¾ˆå¥½çš„å®ç°äº†æ¨¡å—åŠŸèƒ½ã€‚æ ¸å¿ƒæ€æƒ³æ˜¯å°½é‡`é™æ€åŒ–`ï¼Œä½¿å¾—`ç¼–è¯‘æ—¶`å°±èƒ½ç¡®å®šä¾èµ–å…³ç³»ï¼Œä»¥åŠè¾“å‡ºå’Œè¾“å…¥çš„å˜é‡ã€‚è€ŒcommonJSæ˜¯åœ¨è¿è¡Œæ—¶ç¡®å®šè¿™äº›ä¸œè¥¿ã€‚\n\n+ å› ä¸ºè¿™ä¸ªåŸå› ï¼Œæœ‰äº§ç”Ÿäº†ä»¥ä¸‹ä¸¤ä¸ªé—®é¢˜ï¼š\n> 1.`import`ã€`export`éƒ½å¿…é¡»å†™åœ¨æ¨¡å—é¡¶å±‚\n> 2.å¼•å…¥çš„æ¨¡å—åº”è¯¥æ˜¯å¯ä»¥é™æ€åˆ†æçš„ï¼Œæ‰€ä»¥ä¸å…è®¸è¿è¡Œæ—¶æ”¹å˜ã€‚ä¹Ÿå°±æ˜¯è·¯å¾„ä¸­ä¸èƒ½ä½¿ç”¨å˜é‡ã€‚å³æ— æ³•å®ç°å¦‚ä¸‹ä»£ç ä¸­å±•ç¤ºçš„requireçš„åŠŸèƒ½\n```javascript\n// commonJS require\nlet path = './module'\nlet module = require(path);\n```\n\n+ å¼‚æ­¥åŠ è½½\n> ä¹Ÿå°±æ˜¯å¹¶å‘æ‰§è¡Œï¼Œæ¨¡å—`å‡ ä¹`åŒæ—¶å¯¼å…¥ï¼Œåé¢æ¨¡å—ä¸éœ€è¦ç­‰å¾…å‰é¢æ¨¡å—å¯¼å…¥å®Œæˆã€‚\n\n+ è¯­æ³•\n> `ES6 Module`ä¸­ä½¿ç”¨`import`å¼•å…¥ï¼Œ`export`è¾“å‡ºã€‚\n\n+ æ‰§è¡Œé¡ºåº\n> `ES6 Module è¾“å‡ºçš„æ˜¯å€¼çš„åŠ¨æ€å¼•ç”¨`ï¼Œä¸ä¼šç¼“å­˜ã€‚è¿˜æ˜¯ç›¸åŒçš„ä»£ç ï¼Œå¯¹æ¯”commonJS\n```javascript\n// module.js\nlet a = 1;\nfunction foo(){\n    a++;\n}\nexport {foo, a};\n\n// index.js\nlet {foo, a} = require('./module.js');\nconsole.log(a); // 1\nfoo();\nconsole.log(a); // 2\n```\n\n+ `import` å¯ä»¥æ‰§è¡Œæ¨¡å—ï¼Œå¤šæ¬¡`import`åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œ`import`åœ¨é™æ€è§£æé˜¶æ®µæ‰§è¡Œ\n```javascript\nimport foo from './module';\nimport foo from './module';\n```\n> ä»¥ä¸Šä»£ç ä¸­`foo`åªä¼šè¢«å¯¼å…¥ä¸€æ¬¡\n\n+ `import * as module from './module'`å¼•å…¥`module.js`ä¸­æ‰€æœ‰çš„æ–¹æ³•å¹¶å­˜æ”¾åˆ°å˜é‡`module`ä¸­ã€‚\n\n+ ä¸ºæ¨¡å—æŒ‡å®šé»˜è®¤è¾“å‡ºï¼Œä¸€ä¸ªæ–‡ä»¶ä¸­åªèƒ½æœ‰ä¸€ä¸ª`export default`ï¼Œä¸”åé¢ä¸èƒ½è·Ÿå˜é‡å£°æ˜çš„è¯­å¥\n```javascript\n// ä¸æ™®é€šè¾“å‡ºçš„åŒºåˆ«\nexport default function add(){}\nimport add from './add'\n\nexport function add(){}\nimport {add} from './add'\n```\n> æœ¬è´¨ä¸Šï¼Œ`export default` å°±æ˜¯è¾“å‡ºä¸€ä¸ªå« `default` çš„å˜é‡æˆ–è€…æ–¹æ³•ï¼Œç„¶åç³»ç»Ÿå…è®¸ä½ ä¸ºå®ƒé‡å‘½åã€‚æ‰€ä»¥ä¸‹é¢å†™æ³•ä¹Ÿæ˜¯ç­‰æ•ˆçš„\n\n```javascript\nfunction add(){}\n\nexport {add as default}; // ç­‰åŒäºexport default add\n\nimport {default as foo} from './module'; // ç­‰åŒäºimport foo from './module'\n```\n\n### 3.export ä¸ import çš„å¤åˆå†™æ³•\n\n```javascript\nexport {foo,bar} from 'module';\n// ç­‰åŒäº\nimport {foo,bar} from 'module;\nexport {foo,bar}\n```\n> ä¸Šé¢ä»£ç ä¸­ï¼Œ`export`å’Œ`import`è¯­å¥å¯ä»¥ç»“åˆä¸ºä¸€è¡Œä»£ç ã€‚ä½†æ˜¯ï¼Œå†™æˆä¸€è¡Œä»¥åï¼Œ`foo`å’Œ`bar`å®é™…ä¸Šæ²¡æœ‰è¢«å¯¼å…¥å½“å‰æ¨¡å—ï¼Œåªæ˜¯ç›¸å½“äºå½“å‰å¯¹å¤–è½¬å‘äº†è¿™ä¸¤ä¸ªæ¥å£ï¼Œå¯¼è‡´å½“å‰æ¨¡å—ä¸èƒ½ç›´æ¥ä½¿ç”¨`foo`ï¼Œ`bar`ã€‚\n\n### 4.è·¨æ¨¡å—å¸¸é‡\n+ constå£°æ˜çš„å¸¸é‡åªèƒ½åœ¨å½“å‰ä»£ç å—ä¸­æœ‰æ•ˆã€‚å¦‚æœæƒ³è®¾ç½®è·¨æ¨¡å—çš„å¸¸é‡ï¼Œå¯ä»¥é‡‡ç”¨ä»¥ä¸‹å†™æ³•ï¼š\n```javascript\nexport const db = {\n    a: '1',\n    b: '2',\n    ...\n}\n\nimport {db} from './module';\n```\n> vueé¡¹ç›®ä¸­propsåº”ç”¨ï¼Œè¿™æ ·å­ç»„ä»¶å°±å¯ä»¥è‡ªå·±ä¿®æ”¹propsä¸­çš„å±æ€§ï¼Œè€Œä¸éœ€è¦é€šè¿‡è°ƒç”¨çˆ¶ç»„ä»¶çš„æ–¹æ³•äº†ã€‚\n```javascript\n// çˆ¶ç»„ä»¶\n<Child :userInfo=\"userIinfo\"/>\ndata(){\n    return{\n        userInfo:{\n            name: 'å°æ˜',\n            age:18\n        }\n    }\n}\n// å­ç»„ä»¶\nprops:{\n    value(){\n        type: Object\n    }\n},\ncreated(){\n    this.value.name = 'å°çº¢';\n}\n```\n\n### 5.import()å‡½æ•°\n+ ä¸Šæ–‡æˆ‘ä»¬è¯´è¿‡ï¼Œimportçš„æ¨¡å—éœ€è¦é™æ€åˆ†æï¼Œæ‰€ä»¥ä¸èƒ½ç”¨äºåŠ¨æ€åŠ è½½ã€‚ä¹Ÿå°±ä¸èƒ½å®Œæˆ`required`åŒæ ·çš„åŠŸèƒ½\n```javascript\nconst path = './' + fileName;\nconst myModule = required(path);\n```\n> å› æ­¤ï¼Œå¼•å…¥äº†import()å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªPromiseå¯¹è±¡\n```javascript\nimport (path).then(res=>{\n    console.log(res)\n}).catch(err=>{\n    console.log(res)\n})\n```\n+ è¿™ä¸ªå‡½æ•°çš„å¼•å…¥èµ·åˆ°çš„å¾ˆå¥½çš„ä½œç”¨ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨åšå¤šè¯­è¨€åŠ è½½çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å¼•å…¥è¯­è¨€åŒ…ï¼Œä½†æ˜¯æˆ‘ä»¬åˆä¸æƒ³ä¸€æ¬¡æ€§å°†æ‰€æœ‰è¯­è¨€åŒ…å…¨éƒ¨å¼•å…¥ï¼Œæˆ‘ä»¬åªéœ€è¦å¼•å…¥éœ€è¦çš„è¯­è¨€åŒ…å°±å¯ä»¥äº†ï¼Œé‚£ä¹ˆå°±ç”¨åˆ°äº†import()å‡½æ•°ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªæŒ‰éœ€åŠ è½½è¯­è¨€åŒ…çš„ä¾‹å­\n\n```javascript\nexportÂ functionÂ loadLanguageAsync(lang){\nÂ Â ifÂ (i18n.localeÂ !==Â lang){\nÂ Â Â Â ifÂ (!loadedLanguages.includes(lang)){\nÂ Â Â Â Â Â returnÂ import(/*Â webpackChunkName:Â \"lang-[request]\"Â */Â '@/lang/'Â +Â lang).then(msgs=>{\nÂ Â Â Â Â Â Â Â i18n.setLocaleMessage(lang,Â msgs.default);\nÂ Â Â Â Â Â Â Â loadedLanguages.push(lang);\nÂ Â Â Â Â Â Â Â returnÂ setI18nLanguage(lang);\nÂ Â Â Â Â Â })\nÂ Â Â Â }\nÂ Â Â Â returnÂ Promise.resolve(setI18nLanguage(lang));\nÂ Â }\nÂ Â returnÂ Promise.resolve(lang);\n}\n```\n\n### 6.æµè§ˆå™¨åŠ è½½\n#### ä¼ ç»Ÿæ–¹æ³•\n+ `script`æ ‡ç­¾é»˜è®¤æ˜¯åŒæ­¥åŠ è½½çš„ï¼ŒåŠ ä¸Š`defer`å’Œ`async`å°±ä¼šå¼€å¯å¼‚æ­¥åŠ è½½ã€‚åŒºåˆ«ï¼š\n> `defer`è¦ç­‰åˆ°æ•´ä¸ªé¡µé¢åœ¨å†…å­˜ä¸­æ­£å¸¸æ¸²æŸ“ç»“æŸï¼Œæ‰ä¼šæ‰§è¡Œï¼›`async`ä¸€æ—¦ä¸‹è½½å®Œï¼Œæ¸²æŸ“å¼•æ“å°±ä¼šä¸­æ–­æ¸²æŸ“ï¼Œæ‰§è¡Œè¿™ä¸ªè„šæœ¬ä»¥åï¼Œå†ç»§ç»­æ¸²æŸ“ã€‚å¦å¤–ï¼Œå¦‚æœæœ‰å¤šä¸ª`defer`è„šæœ¬ï¼Œä¼šæŒ‰ç…§ä»–ä»¬åœ¨é¡µé¢ä¸­å‡ºç°çš„é¡ºåºåŠ è½½ï¼Œè€Œå¤šä¸ª`async`è„šæœ¬ï¼Œæ˜¯ä¸èƒ½ä¿è¯æŒ‰é¡ºåºåŠ è½½\n\n#### es6æ¨¡å—åŠ è½½\n+ æµè§ˆå™¨åŠ è½½ `es6` æ¨¡å—ï¼Œä¹Ÿæ˜¯ç”¨ `<script>` æ ‡ç­¾ï¼Œä¸è¿‡è¦åŠ å…¥ `type=\"module\"` å±æ€§ã€‚æ·»åŠ è¯¥å±æ€§åï¼Œé»˜è®¤å¼€å¯ `defer` å±æ€§ã€‚è‹¥æƒ³å¼€å¯ `async` å±æ€§ï¼Œå¯ä»¥ç›´æ¥æ·»åŠ ã€‚ä½œç”¨åŒä¸Šã€‚\n+ htmlä¸­å¼•ç”¨ç¤ºä¾‹\n```javascript\n<script type=\"module\">\n    import {add, redis} from './module';\n</script>\n```\n\n#### node.jsåŠ è½½\n> nodeä¸­åŸæœ¬å­˜åœ¨çš„commonJSä¸es6çš„æ¨¡å—åŠ è½½å¹¶ä¸å…¼å®¹ã€‚å› æ­¤nodeä¸­åšäº†é™åˆ¶\n> `.mjs` æ–‡ä»¶æ€»æ˜¯ä»¥es6æ¨¡å—åŠ è½½ï¼› `.cjs` æ–‡ä»¶æ€»æ˜¯ä»¥commonJSåŠ è½½ï¼Œ `.js` æ–‡ä»¶çš„åŠ è½½å–å†³äº `package.json` ä¸­typeå­—æ®µï¼Œè‹¥ `type=\"module\"` åˆ™ä»¥es6æ¨¡å—åŠ è½½ï¼Œé»˜è®¤commonJS\n\n## åè®°\nä»¥ä¸Šæ˜¯æˆ‘å­¦ä¹ `ES6 Module`ä¹‹åçš„æ”¶è·ï¼Œè·Ÿå¤§å®¶åˆ†äº«ï¼Œæ¬¢è¿å‹˜è¯¯ï¼Œè°¢è°¢~~", "user_name": "Frankã€‚", "description": "", "got_view_count": 396, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "CSS", "concern_user_count": 258450, "user_id": "4248168659429511", "title": "CSSçš„è§£æå’Œè®¡ç®—", "mark_content": "é€šè¿‡ä¸Šä¸€ç¯‡ã€ŠDOM çš„è§£æã€‹ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“å½“æµè§ˆå™¨æ¥æ”¶åˆ° HTML æ–‡æœ¬åï¼Œä¼šå°†å®ƒè§£ææˆ Token ï¼Œå†æ„å»ºæˆ DOM æ ‘ã€‚ä¸‹é¢æˆ‘ä»¬ç»§ç»­åˆ†ææµè§ˆå™¨æ¸²æŸ“æµç¨‹çš„æ ·å¼è®¡ç®—ï¼Œå³ CSSçš„è§£æå’Œè®¡ç®—ã€‚\n\n### ä¸€ã€æ”¶é›†CSSè§„åˆ™\n\næµè§ˆå™¨å¼€å§‹å¤„ç† CSS çš„ç¬¬ä¸€æ­¥å°±æ˜¯æ”¶é›† CSS è§„åˆ™ã€‚CSS çš„è§„åˆ™æ¥æºæœ‰ä¸‰ç§ï¼š\n\n1.  å†…è”è§„åˆ™\n2.  å¤–è”è§„åˆ™\n3.  è¡Œå†…è§„åˆ™\n\nå¦‚æœæµè§ˆå™¨é‡åˆ°äº†ä¸€ä¸ª `<link>` æ ‡ç­¾ï¼Œ`rel` å±æ€§æ˜¯ `stylesheet`ï¼Œé‚£ä¹ˆå®ƒä¼šè§¦å‘èµ„æºåŠ è½½ï¼Œæ ¹æ®æ ‡ç­¾é‡Œçš„ `href` å±æ€§ä¸‹è½½è¯¥èµ„æºã€‚è¿™ä¸ªåŠ è½½æ˜¯å¼‚æ­¥çš„ï¼Œä¸ä¼šå½±å“DOMæ ‘çš„æ„å»ºã€‚\n\nå½“é‡åˆ°ä¸€ä¸ª`<style>` æ ‡ç­¾ï¼Œæ•´ä¸ª`<style>` æ ‡ç­¾è§£æç»“æŸçš„æ—¶å€™ï¼Œæµè§ˆå™¨ä¼šæ”¶é›†`<style>` æ ‡ç­¾é‡Œçš„è§„åˆ™ï¼Œå­˜åˆ°ä¸€ä¸ªåœ°æ–¹ã€‚è¡Œå†…æ ·å¼ä¸æ”¶é›†ã€‚\n\næ”¶é›†å®Œ CSS è§„åˆ™åï¼Œä¼šè§£æ CSS ã€‚å…·ä½“è¿‡ç¨‹è¿˜æ˜¯å…ˆè¿›è¡Œè¯æ³•åˆ†æï¼Œç”Ÿæˆ Tokenã€‚å’Œ HTML è§£æä¸åŒçš„æ˜¯ï¼ŒCSS è¯æ³•åˆ†æåï¼Œè¿˜éœ€è¦è¿›è¡Œè¯­æ³•åˆ†æã€‚è§£æåä¼šç”Ÿæˆç›¸åº”çš„è§„åˆ™å¯¹è±¡ï¼Œå¹¶pushåˆ°è§„åˆ™æ•°ç»„ä¸­ã€‚å¯¹è±¡çš„å†…å®¹å¯ä»¥é€šè¿‡ `document.styleSheets` æŸ¥çœ‹ã€‚\n\n![Untitled.png (3306Ã—1090)](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/59481319-51fb-43c0-9a82-f5a6c6bc7714/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAT73L2G45O3KS52Y5%2F20200810%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20200810T142459Z&X-Amz-Expires=86400&X-Amz-Signature=42f4033deacc09b217dab7905773678e47e17d3859c129022cd4f9ebfe70847c&X-Amz-SignedHeaders=host&response-content-disposition=filename%20%3D%22Untitled.png%22)  \n\n### äºŒã€è§£æCSSé€‰æ‹©å™¨\n\næ­¤æ—¶ï¼ŒCSS è§„åˆ™å·²ç»è¢«è§£æå¹¶æ”¾åˆ°ä¸€ä¸ªè§„åˆ™æ•°ç»„é‡Œäº†ã€‚é‚£ä¹ˆä»€ä¹ˆæ—¶å€™å¼€å§‹è®¡ç®— CSS å‘¢ï¼Ÿ\n\né€šå¸¸æƒ…å†µä¸‹ï¼Œå½“ HTML è§£æå®Œä¸€ä¸ªå¼€å§‹æ ‡ç­¾åå°±å¼€å§‹è®¡ç®— CSSã€‚åŸå› æ˜¯ CSS4 ä¹‹å‰ï¼Œä¸æ”¯æŒçˆ¶é€‰æ‹©å™¨ã€‚æ‰€ä»¥åœ¨ä¸€ä¸ªå¼€å§‹æ ‡ç­¾è§£æå®Œåï¼Œæ‰€æœ‰çš„æ ·å¼è§„åˆ™éƒ½å·²ç»æ”¶é›†å®Œæ¯•ï¼ˆä¸€äº›ç‰¹æ®Šæƒ…å†µé™¤å¤–ï¼Œå¦‚ï¼šstyleæ ‡ç­¾å†™åœ¨ body é‡Œï¼Œè¿™æ ·ä¼šé‡æ–°è®¡ç®—ï¼‰ã€‚\n\nCSS è§„åˆ™çš„é€‰æ‹©å™¨æ˜¯ä»å³å‘å·¦åŒ¹é…ã€‚ä»å³å‘å·¦åŒ¹é…æ—¶ï¼Œå¦‚æœå½“å‰å…ƒç´ ä¸åŒ¹é…ï¼Œå°±å¯ä»¥ç›´æ¥è·³è¿‡äº†ã€‚å¦‚æœä»å·¦å‘å³ï¼Œè¦ç­‰åˆ°åŒ¹é…æœ€åä¸€ä¸ªé€‰æ‹©å™¨æ‰èƒ½çŸ¥é“å½“å‰å…ƒç´ æ˜¯å¦åŒ¹é…ã€‚æ˜¾ç„¶ä»å³å‘å·¦åŒ¹é…æ•ˆç‡ä¼šæ›´é«˜ã€‚\n\nä¸¾ä¸ªä¾‹å­ï¼š\n\n    <html>\n      <head>\n        <style>\n          body div img {\n            width: 500px;\n            height: 300px;\n          }\n        </style>\n      </head>\n      <body>\n          <div>\n            <img />\n          </div>\n      </body>\n    </html>\n\nä¸Šé¢ä»£ç ä¸­çš„ <style> é‡Œçš„å†…å®¹ï¼Œå¤§ä½“ä¼šè¢«è§£ææˆå¦‚ä¸‹æ ¼å¼ï¼š\n\n    rule: { \n    \ttype: 'rule',\n      selectors: ['body div img'],\n      declarations: [{\n        type: 'declaration',\n        property: 'width',\n        value: '500px',\n      }, {\n        type: 'declaration',\n        property: 'height',\n        value: '300px',\n      }],\n    }\n\nselectors æ˜¯è¿™æ¡è§„åˆ™çš„é€‰æ‹©å™¨ï¼Œdeclarations æ˜¯è¿™æ¡è§„åˆ™çš„å†…å®¹ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹ï¼Œå½“è§£æå®Œ <img/> æ—¶ï¼Œä¼šå¦‚ä½•è®¡ç®— <img/> çš„ CSS è§„åˆ™ã€‚\n\n### ä¸‰ã€æ‹†åˆ†é€‰æ‹©å™¨\n\nCSS é€‰æ‹©å™¨ç”±ç®€å•åˆ°å¤æ‚å¯ä»¥åˆ†æˆä»¥ä¸‹å‡ ç§ã€‚\n\n*   ç®€å•é€‰æ‹©å™¨ï¼šé’ˆå¯¹æŸä¸€ç‰¹å¾åˆ¤æ–­æ˜¯å¦é€‰ä¸­å…ƒç´ ã€‚\n*   å¤åˆé€‰æ‹©å™¨ï¼šè¿ç»­å†™åœ¨ä¸€èµ·çš„ç®€å•é€‰æ‹©å™¨ï¼Œé’ˆå¯¹å…ƒç´ è‡ªèº«ç‰¹å¾é€‰æ‹©å•ä¸ªå…ƒç´ ã€‚\n*   å¤æ‚é€‰æ‹©å™¨ï¼šç”±â€œï¼ˆç©ºæ ¼ï¼‰â€ã€â€œ >â€ã€â€œ ~â€ã€â€œ +â€ã€â€œ ||â€ç­‰ç¬¦å·è¿æ¥çš„å¤åˆé€‰æ‹©å™¨ï¼Œæ ¹æ®çˆ¶å…ƒç´ æˆ–è€…å‰åºå…ƒç´ æ£€æŸ¥å•ä¸ªå…ƒç´ ã€‚\n*   é€‰æ‹©å™¨åˆ—è¡¨ï¼šç”±é€—å·åˆ†éš”çš„å¤æ‚é€‰æ‹©å™¨ï¼Œè¡¨ç¤ºâ€œæˆ–â€çš„å…³ç³»ã€‚\n\nç¤ºä¾‹ä»£ç ä¸­çš„ `selectors: ['body div img']` æ˜¯ç”±ç©ºæ ¼è¿æ¥çš„å¤æ‚é€‰æ‹©å™¨ã€‚ç©ºæ ¼è¡¨ç¤ºåŒ¹é…å­å­™å…ƒç´ ã€‚å¤æ‚é€‰æ‹©å™¨æ˜¾ç„¶æ˜¯ä¸èƒ½ç›´æ¥åŒ¹é…æ ‡ç­¾çš„ï¼Œæ‰€ä»¥è¦æŠŠè¿™ä¸ªå¤æ‚é€‰æ‹©å™¨æ‹†åˆ†ã€‚æˆ‘ä»¬å¯ä»¥æŠŠæ ‡ç­¾åæ‹†åˆ†å‡ºæ¥ï¼š\n\n     const selectorParts = ['body', 'div', 'img'];\n\n### å››ã€é€‰æ‹©å™¨åŒ¹é…\n\nä¸‹ä¸€æ­¥å°±è¦åŒ¹é…è¿™äº›é€‰æ‹©å™¨äº†ã€‚å½“è§£æå®Œ`<img />` åï¼Œæµè§ˆå™¨ä¼šå– selectorParts çš„æœ€åä¸€é¡¹ï¼š'img'ï¼Œå’Œå½“å‰å…ƒç´  matchã€‚match å‡½æ•°é‡Œå®ç°äº†åˆ¤æ–­å„ç§é€‰æ‹©å™¨æ˜¯å¦å’Œå…ƒç´ åŒ¹é…ã€‚match å‡½æ•°å®ç°å¤§ä½“å¦‚ä¸‹ï¼š\n\n    function match(element, selector) {\n      // element: {\n      //   type: 'element',\n      //   tagName: 'img',\n      //   children: [],\n      //   attributes: [{ \n      //     name: 'id', \n      //     value: 'myid' \n      //   }, {\n      //     name: 'class', \n      //     value: 'myclass' \n    \t//   }],\n      // }\n      //\n      // selector: 'img'\n\n      if (selector.charAt(0) === '#') {\n    \t\t// idé€‰æ‹©å™¨\n        const attr = element.attributes.filter(attr => attr.name === 'id')[0];\n        if (attr && attr.value === selector.replace('#', '')) {\n          return true;\n        }\n      } else if (selector.charAt(0) === '.') {\n    \t\t// classé€‰æ‹©å™¨\n        const attr = element.attributes.filter(attr => attr.name === 'class')[0];\n        if (attr && typeof attr.value === 'string') {\n          // å¤„ç†ç©ºæ ¼çš„å¤šä¸ªclassé€‰æ‹©å™¨\n          const classList = attr.value.split(' ');\n          if (classList.includes(selector.replace('.', ''))) {\n            return true;\n          }\n        }\n    \t} else if () {\n         // å…¶ä»–é€‰æ‹©å™¨\n    \t\t ......\n      } else if (element.tagName === selector) {\n    \t\t// æ ‡ç­¾é€‰æ‹©å™¨\n        return true;\n      }\n      return false;\n    }\n\nå¦‚æœåŒ¹é…ã€‚ä¸‹ä¸€æ­¥å°±æ˜¯å– selectorParts çš„å€’æ•°ç¬¬äºŒé¡¹ï¼š'div'ï¼Œçœ‹æ˜¯å¦å’Œ img æ ‡ç­¾çš„çˆ¶å…ƒç´ åŒ¹é…ã€‚å°±è¿™æ ·ä¾æ¬¡åŒ¹é… selectorParts ä¸­çš„å…ƒç´ ï¼Œç›´åˆ°ç»“æŸã€‚å¦‚æœä¸€ç›´åŒ¹é…ï¼Œåˆ™è¡¨ç¤ºé€‰æ‹©å™¨åŒ¹é…äº†å½“å‰å…ƒç´ ã€‚é€‰æ‹©å™¨ä¸‹çš„ CSS è§„åˆ™å°±ä¼šæ·»åŠ åˆ°è¿™ä¸ªå…ƒç´ ä¸­ã€‚\n\n### äº”ã€æ ¹æ®æƒé‡ï¼ˆSpecificityï¼‰è®¡ç®—æœ€ç»ˆçš„ ComputedStyle\n\næ¥ä¸‹æ¥å°±åˆ°äº†è®¡ç®—æƒé‡çš„æ—¶å€™äº†ã€‚åœ¨ HTML æ ‡å‡†ä¸­ï¼Œå¯¹äºæ ·å¼æƒé‡ï¼Œæè¿°çš„æ¯”è¾ƒæ¨¡ç³Šã€‚æ ‡å‡†æ˜¯å¯¹äºä¸åŒçš„é€‰æ‹©å™¨ï¼Œä½¿ç”¨ä¸åŒæ•°é‡çº§çš„æ•°å­—æ¥è®¡ç®—æƒé‡ã€‚åœ¨æ¯”è¾ƒæ—©çš„ IE ä¸­æ˜¯ä½¿ç”¨ 10 å€æˆ–è€…æ›´å¤šå€æ•°æ¥è®¡ç®—æƒé‡ã€‚è¿™æ ·åšçš„é—®é¢˜å°±æ˜¯å¦‚æœæœ‰è¶³å¤Ÿæ•°é‡çš„ä½æƒé‡é€‰æ‹©å™¨ï¼Œå°±ä¼šè¦†ç›–é«˜æƒé‡çš„é€‰æ‹©å™¨ã€‚\n\næ‰€ä»¥ç°ä»£æµè§ˆå™¨ï¼Œä¼šä½¿ç”¨ä¸€ä¸ªå››ä½çš„æ•°ç»„æ¥è¡¨ç¤ºæƒé‡ï¼Œç¬¬ä¸€ä½æƒé‡æœ€é«˜ï¼Œé€æ¸é€’å‡ã€‚\n\nä¸€èˆ¬æ•°ç»„çš„ç¬¬ä¸€ä½è¡¨ç¤ºè¡Œå†…æ ·å¼ï¼Œç¬¬äºŒä½è¡¨ç¤º id é€‰æ‹©å™¨ï¼Œç¬¬ä¸‰ä½è¡¨ç¤º class é€‰æ‹©å™¨ï¼Œç¬¬å››ä½è¡¨ç¤º tagName é€‰æ‹©å™¨ã€‚\n\nè¿™æ ·åœ¨æ¯”è¾ƒæƒé‡æ—¶æ˜¯åŒçº§åˆ«ä¸åŒçº§åˆ«æ¯”è¾ƒï¼Œä¸ä¼šå‡ºç°æ•°é‡å¤šè€Œå¯¼è‡´çš„æƒé‡è¦†ç›–é—®é¢˜ã€‚å¦‚æœå°†æ¥æœ‰æ–°æ ‡å‡†ï¼Œè°ƒæ•´æ•°ç»„çš„å¤§å°å’Œä½ç½®å°±èƒ½æ»¡è¶³è¦æ±‚ã€‚\n\nä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä»£ç å¦‚ä½•å®ç°ï¼š\n\n    if (matched) {\n      const sp = specificity(rule.selectors[0]);\n      const computedStyle = element.computedStyle;\n      for (let declaration of rule.declarations) {\n        if (!computedStyle[declaration.property]) {\n          computedStyle[declaration.property] = {};\n        }\n        if (\n          !computedStyle[declaration.property].specificity ||\n          compara(computedStyle[declaration.property].specificity, sp) < 0\n        ) {\n          computedStyle[declaration.property].value = declaration.value;\n          computedStyle[declaration.property].specificity = sp;\n        }\n      }\n    }\n\nå¦‚æœé€‰æ‹©å™¨åŒ¹é…äº†å½“å‰è§„åˆ™é‚£ä¹ˆï¼Œå°±è¦æ ¹æ®æƒé‡æ¥è®¡ç®— computedStyleã€‚\n\næˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ specificity å‡½æ•°æ˜¯å¦‚ä½•å®ç°çš„ï¼š\n\n    function specificity(selector) {\n      // p[0]: inline-style\n      // p[1]: id\n      // p[2]: class\n      // p[3]: tagName\n      let p = [0, 0, 0, 0];\n      const selectorParts = selector.split(' ');\n      for (let part of selectorParts) {\n        if (part.charAt(0) === '#') {\n          p[1] += 1;\n        } else if (part.charAt(0) === '.') {\n          p[2] += 1;\n        } else {\n          p[3] += 1;\n        }\n      }\n      return p;\n    }\n\né¦–å…ˆï¼Œæ–°å»ºä¸€ä¸ªé•¿åº¦ä¸º 4 çš„æ•°ç»„ pã€‚é‡Œé¢çš„æ¯ä¸€ä½å­˜æ”¾çš„å°±æ˜¯ä¸Šé¢æåˆ°çš„å››ä¸ªä¸åŒæƒé‡é€‰æ‹©å™¨çš„å€¼ã€‚æ¯å½“åŒ¹é…åˆ°ä¸€ä¸ªé€‰æ‹©å™¨ï¼Œè¿™ä¸ªé€‰æ‹©å™¨çš„å€¼å°±åŠ ä¸€ã€‚æœ¬æ–‡åªæ˜¯å®ç°æœ€åŸºç¡€çš„é€‰æ‹©å™¨ï¼Œåœ¨çœŸå®çš„æµè§ˆå™¨ä¸­è¿˜è¦å¤„ç†æ›´å¤æ‚çš„å¤åˆé€‰æ‹©å™¨ç­‰é€»è¾‘ã€‚ä¸è¿‡å¤„ç†çš„æ–¹å¼éƒ½æ˜¯ä¸€æ ·çš„ã€‚\n\nä¸‹ä¸€æ­¥å°±æ˜¯éå† cssRules é‡Œçš„æ¯æ¡è§„åˆ™äº†ã€‚å¦‚æœåœ¨ computedStyle ä¸­è¿™æ¡è§„åˆ™æ²¡æœ‰ specificity å±æ€§ï¼Œè¯´æ˜è¿™æ¡è§„åˆ™è¿˜æ²¡è®¡ç®—è¿‡æƒé‡ï¼Œè¦æŠŠè¿™ä¸ªè§„åˆ™åŠ ä¸Šæƒé‡å’Œå€¼ã€‚\n\nå¦‚æœæœ‰ specificity å±æ€§ï¼Œé‚£ä¹ˆå°±è¦å’Œå½“å‰çš„é€‰æ‹©å™¨æƒé‡è¿›è¡Œæ¯”è¾ƒï¼Œcompara å‡½æ•°çš„å®ç°å¦‚ä¸‹ï¼š\n\n    function compara(sp1, sp2) {\n      if (sp1[0] - sp2[0]) {\n        return sp1[0] - sp2[0];\n      }\n      if (sp1[1] - sp2[1]) {\n        return sp1[1] - sp2[1];\n      }\n      if (sp1[2] - sp2[2]) {\n        return sp1[2] - sp2[2];\n      }\n      return sp1[3] - sp2[3];\n    }\n\né€»è¾‘å¾ˆç®€å•ï¼Œå°±æ˜¯é€ä½å¯¹æ¯”ã€‚ç”¨ç›¸åŒçº§åˆ«çš„é€‰æ‹©å™¨å»åšæ¯”è¾ƒã€‚æ¯”è¾ƒå‡ºæƒé‡çš„å¤§å°åï¼ŒæŒ‰æƒé‡å¤§å°åˆ¤æ–­æ˜¯å¦åº”è¯¥æ·»åŠ è¯¥è§„åˆ™ã€‚\n\n### !important\n\nå¦å¤–å…³äºæƒé‡è¿˜æœ‰ä¸€ä¸ªå¾ˆå¸¸è§çš„è¯­æ³•å°±æ˜¯ !importantã€‚!important ä¼šç›´æ¥è¦†ç›–ä¸Šè¿°çš„é‚£å‡ ç±»é€‰æ‹©å™¨ã€‚ä½†æ˜¯ !important ä¸æ˜¯ CSS æ ‡å‡†ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œåœ¨ä¸šåŠ¡å¼€å‘ä¸­ï¼Œä¸¥ç¦ä½¿ç”¨ !importantï¼Œé™¤éæ˜¯ä¿®å¤ç´§æ€¥çº¿ä¸Š bugï¼Œåœ¨æ­£å¸¸çš„ä¸šåŠ¡å¼€å‘ä¸­ï¼Œä½¿ç”¨ !important ä¼šç»™è°ƒè¯•å¸¦æ¥å·¨å¤§çš„éº»çƒ¦ã€‚é‚£ä¹ˆå¦‚ä½•è¦†ç›– !important å‘¢ï¼Ÿ!important åŒæ ·å¯ä»¥å†™å¤šä¸ªï¼Œæ•°é‡å¤šçš„ä¼šè¦†ç›–æ•°é‡å°‘çš„ã€‚\n\n### æ€»ç»“\n\né€šè¿‡éå†æ¯æ¡ CSS è§„åˆ™ï¼Œç„¶åè®¡ç®—æƒé‡ï¼Œå†æ¯”è¾ƒæƒé‡ï¼Œä»è€Œç®—å‡ºæœ€ç»ˆçš„ ComputedStyleã€‚åˆ°æ­¤ï¼Œæµè§ˆå™¨æ˜¯å¦‚ä½•å°† CSS ä»ä¸€æ¡æ¡è§„åˆ™å˜æˆåé¢å¸ƒå±€åŠæ¸²æŸ“æ‰€éœ€è¦çš„ ComputedStyle è§„åˆ™çš„åŸç†æ­ç¤ºå‡ºæ¥äº†ã€‚æœ¬æ–‡æ˜¯ä»¥å®ç°ä¸€ä¸ª ToyCSSParser çš„å½¢å¼æ¥å±•ç¤ºæµè§ˆå™¨è§£æ CSS è§„åˆ™çš„åŸç†ï¼Œç°å®ä¸­æµè§ˆå™¨è¦å¤„ç†çš„è§„åˆ™å’Œæƒ…å†µä¼šå¤æ‚çš„å¤šã€‚ä½†æ•´ä½“åŸç†ä¸å˜ï¼Œä¸è¿‡å¤æ‚åº¦å¤§å¤§å¢åŠ ã€‚æœ¬æ–‡æºç å¦‚ä¸‹ï¼š\n\n[huyinglin/ToyBrowser](https://github.com/huyinglin/ToyBrowser/blob/master/parser/cssParser.js)", "user_name": "å…­æœˆçš„é›¨_", "description": "å°çƒï¼Œå‰ç«¯", "got_view_count": 98, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "å‰ç«¯", "concern_user_count": 455667, "user_id": "4388906147515367", "title": "å¦‚ä½•å†™æŠ€æœ¯æ–‡ç« ", "mark_content": "> æœ¬æ–‡ä½œè€…æ–‡è”ºï¼Œå¥‡èˆå›¢å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆï¼Œ[ç‚¹å‡»æŸ¥çœ‹åŸæ–‡](https://juejin.im/post/6858621112277237767/)\n\nä»Šå¹´åœ¨ç»„å†…æ¨åŠ¨å¸¸æ€åŒ–çš„åˆ†äº«æ´»åŠ¨ï¼ŒååŠ©ä¸€äº›åŒå­¦é€‰é¢˜å¹¶å®¡é˜… ppt å’Œæ–‡ç« ï¼Œä¸€ç›´æƒ³å°±å…¶é—´ç§ç§é—®é¢˜åšä¸€æ¬¡æ€»ç»“ã€‚è™½ç„¶è‡ªå·±ä¸æ€ä¹ˆåŠ¨æ‰‹å†™åšå®¢ï¼Œä½†å› è´Ÿè´£ç¼–è¾‘[å¥‡èˆå‘¨åˆŠ<small>ï¼ˆweekly.75team.comï¼‰</small>](https://weekly.75team.com/)çš„ç¼˜æ•…ï¼Œè¿™å‡ å¹´æ¥è§¦äº†å¤§é‡ä¼˜ç§€çš„æ–‡ç« ï¼Œè€³æ¿¡ç›®æŸ“ï¼Œå¯¹æŠ€æœ¯æ–‡ç« çš„å†™ä½œä¹Ÿå½¢æˆäº†ä¸€äº›è‡ªå·±çš„çœ‹æ³•ã€‚\n\næœ¬æ–‡å°†ä»å‡†å¤‡å·¥ä½œã€æ–‡ç« ç»“æ„ã€æ³¨æ„äº‹é¡¹ç­‰æ–¹é¢å±•å¼€ï¼Œå¸Œæœ›å¯¹ä¹äºåˆ†äº«çš„åŒå­¦æœ‰ä¸€å®šå¯å‘ã€‚\n\n## å‡†å¤‡å·¥ä½œ\n\nåŠ¨æ‰‹å†™æ–‡ç« å‰ï¼Œé¡»ä¾æ¬¡æ˜ç¡®ä¸¤ç‚¹ï¼šç›®æ ‡å—ä¼—ï¼›å†™ä½œæ€è·¯ã€‚\n\n### æ˜ç¡®ç›®æ ‡å—ä¼—\n\nè°ä¼šçœ‹æˆ‘ä»¬çš„æ–‡ç« ï¼Ÿè°ä¼šå¯¹æˆ‘ä»¬çš„æ–‡ç« æ„Ÿå…´è¶£ï¼Ÿè¿™æ˜¯æ’°å†™æ–‡ç« çš„é¦–è¦é—®é¢˜ã€‚\n\nåŠ¨æ‰‹å‰ï¼Œä¸€å®šè¦å…ˆæƒ³å¥½ä½ çš„ç›®æ ‡å—ä¼—ï¼Œå³æ–‡ç« é¢å‘å“ªäº›è¯»è€…ã€‚è¦å……åˆ†è€ƒè™‘è¯»è€…çš„èƒŒæ™¯ã€‚é¢å‘çš„è¯»è€…ä¸åŒï¼Œè¯­è¨€é£æ ¼ã€å±•ç°å½¢å¼ç­‰ä¹Ÿé¡»æœ‰æ‰€ä¸åŒã€‚ä»¥æŠ€æœ¯ç§‘æ™®æ–‡ç« ä¸ºä¾‹ï¼Œä½ éœ€è¦æä¾›å……è¶³çš„èƒŒæ™¯çŸ¥è¯†ï¼Œé€šè¿‡åœºæ™¯åŒ–ã€æ•…äº‹æ€§çš„æ–¹å¼åˆ‡å…¥ä¸»é¢˜ï¼Œå¹¶æä¾›ä¸€ç³»åˆ—ç®€å•ã€å¯å¤ç°çš„ç¤ºä¾‹ã€‚\n\n### æ¢³ç†å†™ä½œæ€è·¯\n\næ˜ç¡®å—ä¼—ä¹‹åï¼Œå¯ä»¥ç”¨æŸç§ç»“æ„åŒ–çš„å½¢å¼æ¢³ç†å†™ä½œæ€è·¯ï¼Œå¦‚å¸¦æœ‰å±‚çº§çš„åˆ—è¡¨ã€æ€ç»´å¯¼å›¾ç­‰ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ­£å¼å†™ä½œæœ¬æ–‡å‰ï¼Œæˆ‘ä½¿ç”¨ markdown æ¢³ç†äº†æœ¬æ–‡å†™ä½œçš„å¤§è‡´æ€è·¯ã€‚\n\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fa705306eca942d59ff942b51c375804~tplv-k3u1fbpfcp-zoom-1.image)\n\nå†ç»å‡ ç•ªè°ƒæ•´ï¼Œæ–‡ç« çš„åŸºæœ¬æ¡†æ¶ä¾¿æœ‰äº†ï¼Œå¯ä»¥å¼€å§‹æ’°å†™åˆç¨¿ã€‚å½“ç„¶ï¼Œè¿™ä¸ªåŸºæœ¬æ¡†æ¶ä¹Ÿä¼šéšç€å†™ä½œçš„æ¨è¿›ä¸æ–­åŠ¨æ€è°ƒæ•´ã€‚\n\n### æ›²çº¿åŠæ³•\n\nå¦å¤–ï¼Œè¿™é‡Œæä¾›ä¸€ä¸ªæ›²çº¿è§£å†³é—®é¢˜çš„æ‡’äººæ€è·¯ã€‚è¯¥æ€è·¯æ¥æºäºå„ç±»æŠ€æœ¯å¤§ä¼šå®å½•ã€‚\n\nå†™æ–‡ç« å‰ï¼Œä½ ä¹Ÿå¯ä»¥å…ˆåšä¸€ä»½ pptï¼ˆç»“æ„æ¸…æ™°ã€å†…å®¹ç²¾ç¾è€…ä¸ºä½³ï¼‰ï¼Œå¹¶å°† ppt è½¬æ¢ä¸ºå›¾ç‰‡é€æ¬¡æ”¾å…¥æ–‡ç¨¿ä¸­ã€‚\n\nå†™ä½œæ—¶ï¼Œåªå½“è‡ªå·±åœ¨é¢å¯¹è§‚ä¼—åšç°åœº presentationï¼Œå°†è¦è¯´çš„è¯é€‚å½“æ¶¦è‰²ï¼Œæ’å…¥åˆ°æ¯å¼  ppt å‰åã€‚æ³¨æ„é…ä»¥é€‚å½“çš„è½¬æŠ˜è¯­å¥ã€‚\n\nè¿™æ ·çš„å¥½å¤„æœ‰ä¸‰ï¼šå›¾æ–‡å¹¶èŒ‚ï¼Œé€‚åˆé˜…è¯»ï¼›ä¿¡æ¯å¯†åº¦è¾ƒçº¯æ–‡å­—é«˜ï¼›ä¼ è¾¾æ–‡å­—ä¸è¶³ä»¥å®Œæˆçš„ä¿¡æ¯ã€‚\n\n## æ–‡ç« ç»“æ„\n\nä¼˜ç§€æ–‡ç« å¥—è·¯åŸºæœ¬ç›¸ä¼¼ï¼Œé—®é¢˜æ–‡ç« åˆ™å„æœ‰å„çš„ç¼ºç‚¹ã€‚è¿™é‡Œæˆ‘ç”¨â€œèµ·æ‰¿è½¬åˆâ€å››å­—æ¥æ¦‚æ‹¬åŸºæœ¬å¥—è·¯ã€‚\n\n### â€œèµ·â€\n\nå¿˜äº†æ˜¯è°è¯´çš„ï¼Œå¥½çš„å¼€å¤´æ˜¯æˆåŠŸçš„ä¸€åŠã€‚\n\nä¸€èˆ¬æ¥è¯´ï¼Œåœ¨æ–‡ç« å¼€å¤´ï¼Œä½ éœ€è¦äº¤ä»£å†™ä½œç¼˜èµ·ï¼Œå¦‚ä¸šåŠ¡é­é‡ç—›ç‚¹ã€çº¿ä¸Šç¥ç§˜ bug ç­‰ã€‚\n\nè€Œåï¼Œç®€è¦ä»‹ç»æ–‡ç« å°†ä»å“ªäº›æ–¹é¢å±•å¼€ã€è¾¾åˆ°ä»€ä¹ˆç›®çš„ï¼Œè€Œè¯»è€…èƒ½ä»ä¸­è·å¾—ä½•ç§æ”¶è·ã€‚\n\n### â€œæ‰¿â€\n\næ‰¿æ¥å¼€å¤´ï¼Œå¼€å§‹æŒ‰äº‹å…ˆæ•´ç†çš„å¤§çº²ï¼Œåˆ‡å…¥æ­£é¢˜ã€‚å¯ä»¥å¼€å§‹è¯¦ç»†ä»‹ç»ç›¸å…³åœºæ™¯ã€æ¢ç´¢è§£å†³æ–¹æ¡ˆçš„å†ç¨‹ã€‚\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå§‹ç»ˆä¸èƒ½å¿˜è®°ç›®æ ‡å—ä¼—ã€‚æ ¹æ®ç›®æ ‡å—ä¼—ç‰¹ç‚¹ï¼Œæ³¨æ„åœ¨å¿…è¦çš„åœ°æ–¹ï¼Œæä¾›å¿…è¦çš„èƒŒæ™¯çŸ¥è¯†ï¼Œå¦‚æŸé¡¹æŠ€æœ¯çš„å‘å±•å†å²åŠç›¸å…³æœ¯è¯­ä»‹ç»ã€‚\n\n### â€œè½¬â€\n\nç»è¿‡å‰é¢çš„å……åˆ†é“ºå«ï¼Œè¯é¢˜è½¬å…¥çªç ´é˜¶æ®µã€‚å¯ä»¥è¯¦ç»†ä»‹ç»ä½ æ‰€å¯»æ‰¾åˆ°çš„çªç ´æ–¹æ¡ˆåŠå…¶æ•ˆæœã€‚å¦‚æœ‰å¤šç§æ–¹æ¡ˆï¼Œå»ºè®®åŒæ—¶åˆ—å‡ºï¼Œå¹¶åŠ ä»¥å¯¹æ¯”ã€‚\n\n### â€œåˆâ€\n\nå›é¡¾å…¨æ–‡ï¼Œé€‚å½“æ€»ç»“ï¼š\n\n- æ–‡ç« è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ\n- è¿˜å¯ä»¥è¿›è¡Œå“ªäº›æ–¹å‘çš„æ¢ç´¢ï¼Ÿ\n- æœ‰ä½•ä¸è¶³ä¹‹å¤„ï¼Ÿ\n- å±•æœ›æœªæ¥\n\n## æ³¨æ„äº‹é¡¹\n\nåœ¨å†™ä½œè¿‡ç¨‹ä¸­ï¼Œæœ‰ä¸€äº›ç»†èŠ‚éœ€è¦æ³¨æ„ã€‚\n\nåˆ‡å¿Œä»¥ä¸‹é—®é¢˜ â€”â€”\n\n- ç½—åˆ—å¤§é‡æœ¯è¯­ï¼šå…¨æ— èƒŒæ™¯ä»‹ç»ï¼Œç›´æ¥å¼€å§‹ç½—åˆ—ä¸€å †æ¦‚å¿µ\n- ç²˜è´´é•¿ç¯‡ä»£ç ï¼šå¤§ç¯‡å¹…å¼•ç”¨ä»£ç ï¼Œå½±å“é˜…è¯»ä½“éªŒ\n- é£æ ¼å˜åŒ–æ— å¸¸ï¼šæ—¶è€Œä¸¥è‚ƒã€å­¦æœ¯é£ï¼Œæ—¶è€Œå–èŒã€æŠ–æœºçµ\n- å†…å®¹è´ªå›¾ç®€ä¾¿ï¼šä½¿ç”¨ä»£ç å—ã€å›¾ç‰‡æˆ– blockquote **å®Œå…¨å–ä»£æ­£æ–‡**\n\næœ‰ä»¥ä¸Šé—®é¢˜ä¸”éš¾ä»¥å…‹æœè€…ï¼Œå»ºè®®ä½¿ç”¨å‰è¿°â€œæ›²çº¿åŠæ³•â€ï¼Œå¯èƒ½ä¸€å®šæ•ˆæœã€‚\n\n## æ€»ç»“\n\nä»¥ä¸Šè°ˆäº†ä¸€äº›æŠ€æœ¯æ–‡ç« å†™ä½œçš„å¥—è·¯ï¼Œä½†æ›´é‡è¦çš„è¿˜æ˜¯æ—¥å¸¸ç§¯ç´¯ã€‚\n\nå½“ç„¶ï¼Œæ—¥å¸¸å­¦ä¹ æ—¶ä¹Ÿè¦æœ‰æ‰€ç”„åˆ«ï¼Œæ‹¥æŠ±ç²¾å“ï¼Œè¿œç¦»æ¬¡å“ã€‚\n\næœ€æ–°ä¸€æœŸçš„å¥‡èˆå‘¨åˆŠï¼ˆ[ç¬¬ 359 æœŸ](https://weekly.75team.com/issue359.html)ï¼‰é€‰å–çš„ä¸¤ç¯‡æ–‡ç« è´¨é‡ç”šå¥½ï¼Œé™„å½•å¦‚ä¸‹ â€”â€”\n\n- [æ‚Ÿç©ºæ´»åŠ¨ä¸­å° - H5 æ´»åŠ¨åŠ è½½ä¼˜åŒ–](https://mp.weixin.qq.com/s/6gtVR0nVNcZvREjwftZgzA) <small>ï¼ˆå‘è¡¨äºå…¬ä¼—å·â€œvivo äº’è”ç½‘æŠ€æœ¯â€ï¼‰</small>\n- [ä» 2.9 ç§’åˆ° 0.6 ç§’ï¼Œä¿¡æ¯æµé¦–å±ææ•ˆ 80% çš„ç§˜è¯€](https://mp.weixin.qq.com/s/dGO7cvhnr0cWdeu7O2v5Eg) <small>ï¼ˆå‘è¡¨äºå…¬ä¼—å·â€œFEPulseâ€ï¼‰</small>\n\nå¦ï¼Œå†™å®Œä¸Šæ–‡ä¹‹åï¼Œæœ‰åŒå­¦ç»™æˆ‘è½¬å‘[ã€Šå¦‚ä½•å†™å¥½ä¸€ç¯‡æŠ€æœ¯æ–‡ç« ã€‹](https://juejin.im/post/6844903504922804238)ï¼ŒåŒæ ·å»ºè®®é˜…è¯»ã€‚", "user_name": "å¥‡èˆå‘¨åˆŠ", "description": "å–œæ¬¢å¬æœˆå½±è®²æ•…äº‹", "got_view_count": 179785, "category_name": "é˜…è¯»", "ctime": 1457483895}
{"tag_name": "Vue.js", "concern_user_count": 263220, "user_id": "1873223545523101", "title": "è§£å†³é¡µé¢éœ€è¦ä¸Šä¸‹å·¦å³é€‰ä¸­å…ƒç´ çš„é—®é¢˜ï¼Œå¯Œæ“ä½œ", "mark_content": "## å‰è¨€\n\nçº¯ç²¹æ˜¯å› ä¸ºæ— èŠå§ï¼Œç„¶åå°±æ˜¯çªå‘å¥‡æƒ³ã€‚\n\næˆ‘ä»¥å‰å¼€å‘è¿‡webç«¯çš„æ”¶é“¶ç³»ç»Ÿã€‚ä¹‹å‰æ›´æ—©çš„æ—¶å€™ä¹Ÿæ˜¯åšè¿‡é›¶å”®è½¯ä»¶æ–¹é¢çš„å®æ–½ï¼Œé€šå¸¸åœ¨é—¨åº—çš„æ—¶å€™æ”¶é“¶å‘˜ä¸ºäº†æ›´ä¸ºå¿«é€Ÿçš„å»æ”¶é“¶ï¼Œæ˜¯å¾ˆå°‘ä¼šå»ç”¨é¼ æ ‡çš„ã€‚éƒ½æ˜¯é”®ç›˜è§£å†³ã€‚ä½†æ˜¯webæ“ä½œç³»ç»Ÿé¡µé¢æœ‰ä¸€ä¸ªé—®é¢˜ã€‚å°±æ˜¯ä½ çš„é€šè¿‡tabç­‰æ–¹å¼å…¶å®ä¸æ˜¯å¾ˆæ–¹ä¾¿ã€‚ç„¶åæˆ‘ä»¬è¿˜æœ‰å•†å“åˆ—è¡¨ä¹Ÿéœ€è¦é€šè¿‡é”®ç›˜æ–¹å¼é€‰ä¸­è¿”å›ã€‚å¦‚æœé€šè¿‡é¼ æ ‡ï¼Œåœ¨ä¸€äº›é—¨åº—æ¯å¤©éƒ½æ˜¯å‡ ä¸‡çš„é”€å”®é¢ä¸­ï¼Œæ˜¯éå¸¸ç´¯äººï¼Œä¸”æ•ˆç‡ä½ä¸‹çš„ã€‚è¿™æ¬¡å¼€å‘çš„è¿™ä¸ªæ’ä»¶ä¹Ÿæ˜¯ä¸ºäº†è§£å†³è¿™æ–¹é¢çš„é—®é¢˜ã€‚\n\nç›®å‰åšåˆ°äº†åŸºæœ¬çš„ä¸Šä¸‹å·¦å³ï¼Œå±äºåˆæ­¥çš„å®Œæˆã€‚æœªç»ä¸šåŠ¡å®æˆ˜ã€‚ä½†æ˜¯æˆ‘æƒ³è¿˜æ˜¯æ¯”è¾ƒOKçš„ã€‚\n\næºç åœ°å€ï¼šhttps://github.com/ht-sauce/dream/blob/master/src/components/CustomCom/RichOperate/index.vue\n\n## åŸç†ï¼š\n\né¦–å…ˆï¼Œæˆ‘ä»¬æƒ³è¦é”®ç›˜ä¸Šé¢æ“ä½œé€‰ä¸­domå…ƒç´ ã€‚æœ‰æœ¬èº«çš„tapï¼Œä¸Šä¸‹å·¦å³ç­‰ç­‰ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨tabindexï¼Œæ–¹å¼ã€‚ä½†æ˜¯è¿™äº›éƒ½æ— æ³•è¯´ä½¿å¾—æ“ä½œç»Ÿä¸€æ–¹ä¾¿ã€‚è§„åˆ™è¾ƒä¸ºæ··ä¹±ï¼Œå¹¶ä¸”æˆ‘ä»¬éƒ½çŸ¥é“divæ˜¯ä¹ˆæœ‰ç„¦ç‚¹è¿™ä¸ªçŠ¶æ€çš„ã€‚\n\né‚£ä¹ˆæˆ‘ä»¬æƒ³è¦å®ç°çš„æƒ…å†µä¸‹ï¼Œé‚£ä¹ˆå°±éœ€è¦è‡ªå·±é€ è½®å­äº†ã€‚æˆ‘ä»¬è‡ªå·±æ¥å®šä¹‰å¹¶ä¸”å®ç°è¿™ä¸€å¥—è§„åˆ™ã€‚\n\n1ã€ç›‘å¬é”®ç›˜çš„ä¸Šä¸‹å·¦å³\n\n2ã€éšç€å…ƒç´ çš„ä¸Šä¸‹å·¦å³è¿›è¡Œæ•°æ®ç§»åŠ¨ã€‚\n\nåæ§½ä¸€ä¸‹ï¼Œå¦‚æœæ˜¯jqueryæ—¶ä»£ï¼Œæ€•æ˜¯è¦éº»çƒ¦å¾ˆå¤šã€‚\n\n## å®ç°å·¦å³ç§»åŠ¨\n\nå·¦å³ç§»åŠ¨å…¶å®å¾ˆç®€å•ï¼Œæˆ‘ä»¬åªè¦æ“ä½œå…ƒç´ çš„æ•°ç»„çš„indexå¯¹åº”çš„å¢åŠ å‡å°±å¯ä»¥äº†ã€‚æ‰€ä»¥ä»£ç ç®€å•çš„ä¸è¡Œã€‚\n\nåŒç†ï¼Œæˆ‘ä»¬è¦æ“ä½œå…ƒç´ çš„ä¸Šä¸‹ä¹Ÿå¯ä»¥è¿™æ ·å®ç°ã€‚ä½†æ˜¯æˆ‘çš„ç›®çš„æ˜¯è¦æ™®é€‚æ€§çš„å®ç°ã€‚é‚£ä¹ˆå·¦å³æˆ‘ä»¬æ˜¯æ ¹æ®æ—¢å®šè§„åˆ™æ¥å®ç°çš„ã€‚\n\n## å®šä¹‰æ’å…¥çš„æ•°ç»„çš„å…ƒç´ ç»“æ„\n\n    // è®¾ç½®ç»‘å®šçš„åˆå§‹æ•°æ®\n    this.dhtSetList({\n      bindData: value, // ç»‘å®šæ•°æ®\n      self: this, // æœ¬èº«\n      select: false, // æ˜¯å¦è¢«é€‰ä¸­\n    })\n\nè¿™é‡Œå…¶å®æ¯”è¾ƒç®€å•èƒ½çœ‹å‡ºæ¥ï¼Œç¬¬ä¸€ä¸ªæ˜¯ç»‘å®šçš„æ•°æ®ã€‚ç¬¬äºŒä¸ªæ˜¯vueå½“å‰å®ä¾‹æœ¬èº«ã€‚ç¬¬ä¸‰ä¸ªå°±æ˜¯çŠ¶æ€ï¼Œå¯ä»¥ä¸ç®¡ã€‚\n\næ’å…¥çš„é¡ºåºå†³å®šäº†å·¦å³ç§»åŠ¨çš„é¡ºåº\n\n## ä¸Šä¸‹ç§»åŠ¨\n\nä¸Šä¸‹ç§»åŠ¨æœ€éº»çƒ¦çš„æ˜¯æˆ‘ä»¬ä¸èƒ½æŒ‰æ•°ç»„çš„indexè¿›è¡Œç§»åŠ¨ã€‚è¦æ ¹æ®å…ƒç´ æœ¬èº«çš„ä¸Šä¸‹ä½ç½®è¿›è¡Œç§»åŠ¨ã€‚\n\nä»£ç åŸç†è®²è§£ï¼š\n\n1ã€è¿‡æ»¤åŒçº§åˆ«å…ƒç´ \n\n2ã€ä¸Šè¿‡æ»¤æ‰æ¯”è‡ªå·±ä½çš„ï¼Œä¸‹è¿‡æ»¤æ¯”è‡ªå·±é«˜çš„\n\n3ã€å¯¹å…ƒç´ çš„é«˜ä½è¿›è¡Œæ’åºï¼Œä¸Šæœ€å°ï¼Œä¸‹æœ€å°çš„å…ƒç´ ã€‚\n\n4ã€å¦‚æœä¸Šä¸‹å­˜åœ¨ä¸€æ ·çš„Yè½´æ•°æ®ï¼Œé‚£ä¹ˆæ¯”è¾ƒXå¤§å°ï¼Œå¾—åˆ°æœ€å°Xè¿›è¡Œè¿”å›ï¼ŒXå¦‚æœè¿˜æœ‰å¤šä¸ªï¼Œé‚£ä¹ˆé»˜è®¤è¿”å›ç¬¬ä¸€ä¸ª\n\n    // ä¸Šä¸‹ç§»åŠ¨\n    topOrbottomMove(type) {\n      let currentIndex = this.lastTimeLi() // ä¸Šä¸€æ¬¡çš„index,ä¹Ÿæ˜¯å½“å‰çš„index\n      const list = this.list\n      // å½“å‰\n      const currentLi = list[currentIndex]\n      const currentLiDom = currentLi.self.$el.getBoundingClientRect()\n      const currentY = currentLiDom.y\n      const currentX = currentLiDom.x\n\n      const relativeList = []\n      list.forEach((item, index) => {\n        const { y, x } = item.self.$el.getBoundingClientRect()\n        relativeList.push({\n          li: item,\n          y: currentY - y,\n          x: Math.abs(currentX - x),\n          index,\n        })\n      })\n      // è¿‡æ»¤é€šç­‰çº§å…ƒç´ \n      const eliminate = relativeList.filter(item => item.y !== 0)\n      if (type === 'top') {\n        // å¾€ä¸Šè¿‡æ»¤æ¯”è‡ªå·±ä½çš„\n        const topEliminate = eliminate.filter(item => item.y > 0)\n        if (topEliminate.length === 0) {\n          // æœ€ç»ˆå‘é€ç¡®è®¤å€¼\n          this.sendEmit({ item: list[currentIndex], index: currentIndex })\n        } else {\n          topEliminate.sort((a, b) => a.y - b.y)\n          const xArr = topEliminate.filter(item => item.y === topEliminate[0].y)\n          if (xArr.length > 1) {\n            xArr.sort((a, b) => a.x - b.x)\n            this.sendEmit({ item: xArr[0], index: xArr[0].index })\n          } else {\n            this.sendEmit({ item: xArr[0], index: xArr[0].index })\n          }\n        }\n      }\n      if (type === 'bottom') {\n        // å¾€ä¸‹è¿‡æ»¤æ¯”è‡ªå·±é«˜çš„\n        const bottomEliminate = eliminate.filter(item => item.y < 0)\n        if (bottomEliminate.length === 0) {\n          // æœ€ç»ˆå‘é€ç¡®è®¤å€¼\n          this.sendEmit({ item: list[currentIndex], index: currentIndex })\n        } else {\n          bottomEliminate.sort((a, b) => b.y - a.y)\n          const xArr = bottomEliminate.filter(item => item.y === bottomEliminate[0].y)\n          if (xArr.length > 1) {\n            xArr.sort((a, b) => a.x - b.x)\n            this.sendEmit({ item: xArr[0], index: xArr[0].index })\n          } else {\n            this.sendEmit({ item: xArr[0], index: xArr[0].index })\n          }\n        }\n      }\n    },\n\n## ä½¿ç”¨\n\næ˜¨å¤©çœ‹äº†ä¸‹æ–‡ç« è¢«æ˜é‡‘å¤§å¤§æ¨é¦–é¡µäº†ï¼Œä¸å¥½æ„æ€å¤ªç³Šå¼„ã€‚è¿™é‡Œè´´ä¸€ä¸‹ä½¿ç”¨æ–¹å¼ã€‚\n\næ ¸å¿ƒä½¿ç”¨æ–¹å¼ï¼š\n\n    RichOperate: () => import('@/components/CustomCom/RichOperate/index'),\n\nè¿™ä¸ªæ˜¯ç»„ä»¶çš„æ ¸å¿ƒå†…å®¹ï¼Œä¼šæš´éœ²å‡ºpropså’Œä¸€ä¸ªprovideåˆ†å‘çš„dhtSetListå‡½æ•°ï¼Œå‡½æ•°æœ¬èº«å·²ç»å¤„ç†å¥½äº†å½“å‰æ“ä½œåˆ—è¡¨çš„æ˜¯å¦é‡å¤é—®é¢˜\n\nè¿™æ®µä»£ç ä¼šåˆ¤æ–­ä½ çš„ç»„ä»¶çš„æœ¬èº«æ˜¯å¦é‡å¤\n\n    // åˆ¤æ–­æ˜¯å¦å·²ç»å­˜åœ¨æ•°æ®åˆ—è¡¨å†…éƒ¨\n    this.list.forEach(item => {  \n    if (item.self === self) {    \n    item.bindData = bindData \n       alike = true  \n    }\n    })\n\nç„¶åæˆ‘çš„ç»™çš„æºä»£ç çš„æ–‡ä»¶è¾¹ä¸Šè¿˜æœ‰ä¸€ä¸ªitemæ–‡ä»¶ï¼Œè¿™ä¸ªæ˜¯å­ç»„ä»¶ã€‚ä¸€èˆ¬æ¨èå¤§å®¶æŒ‰è¿™æ ·çš„æ–¹å¼å»å°è£…ä¸€ä¸‹è‡ªå·±çš„å†…å®¹ã€‚\n\n    <template>\n      <div class=\"rich-operate-item\" ref=\"richOperateItem\">\n        <slot></slot>\n      </div>\n    </template>\n\n    <script>\n    export default {\n      name: 'RichOperateItem',\n      inject: ['dhtSetList'],\n      props: {\n        value: null, // å½“å‰ç»‘å®šçš„æ•°æ®\n      },\n      data() {\n        return {\n          select: false,\n        }\n      },\n      watch: {\n        value: {\n          deep: true,\n          immediate: true,\n          handler(value) {\n            // è®¾ç½®ç»‘å®šçš„åˆå§‹æ•°æ®\n            this.dhtSetList({\n              bindData: value, // ç»‘å®šæ•°æ®\n              self: this, // æœ¬èº«\n              select: false, // æ˜¯å¦è¢«é€‰ä¸­\n            })\n          },\n        },\n      },\n      mounted() {},\n    }\n    </script\n\nå¯¼å…¥ä¸º<span>RichOperateItme: () => import('@/components/CustomCom/RichOperate/item'),</span>\n\næœ€åä½¿ç”¨çš„æ—¶å€™å°±åƒè¿™æ ·\n\n    <rich-operate switch :index=\"5\" class=\"test\">\n      <rich-operate-itme :value=\"shiyan\">\n        <div class=\"ceshi\"></div>\n      </rich-operate-itme>\n      <rich-operate-itme>\n        <div class=\"ceshi\"></div>\n      </rich-operate-itme>\n    </rich-operate>\n\nä½†æ˜¯è¿™æ ·å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä¸çŸ¥é“æ˜¯å¦å¯¹äºç»„ä»¶åº“çš„ç»„ä»¶æœ¬èº«çš„ç»“æ„æ˜¯å¦äº§ç”Ÿå½±å“ã€‚  \n\nå¦‚æœäº§ç”Ÿå½±å“çš„è¯ï¼Œé‚£ä¹ˆå»ºè®®ä½¿ç”¨\n\n    this.dhtSetList({ \n     bindData: value, // ç»‘å®šæ•°æ®\n      self: this, // æœ¬èº« \n     select: false, // æ˜¯å¦è¢«é€‰ä¸­})\n\nä¸è¿‡è¿™ä¸ªä¹Ÿå­˜åœ¨ä¸€å®šçš„é—®é¢˜ã€‚æˆ‘è¿™é‡Œä¼ é€’è¿›å»äº†æ˜¯ç»„ä»¶æœ¬èº«thisã€‚è¿™æ ·åšçš„ç›®çš„æ˜¯ä¸ºäº†ç­‰vuedomæ¸²æŸ“å®Œæˆä¹‹åè‡ªåŠ¨ç»‘å®šdomèŠ‚ç‚¹ã€‚\n\nä¸»è¦æ˜¯è¿™äº›ã€‚å…³äºpropsä¼ å€¼ï¼Œå¤§å®¶çœ‹æºç å§ã€‚æˆ‘ä¹ æƒ¯å†™æ³¨é‡Šï¼Œè¿˜æ˜¯æŒºå…¨é¢çš„ã€‚\n\n## æ€»ç»“\n\nåŸºæœ¬åŸç†å…¶å®æŒºç®€å•çš„ã€‚\n\næ³¨æ„æˆ‘è¿™é‡Œä¸ºäº†ä¿è¯æ¯ä¸ªå­ç»„ä»¶ç”¨äº†provideã€injectæ–¹å¼è¿›è¡Œæ•°æ®åˆ†å‘ã€‚ç¤ºä¾‹ä¸­æ˜¯å•ç‹¬å®šä¹‰äº†ä¸€ä¸ªå­çš„ç»„ä»¶ï¼Œä½†æ˜¯åªè¦æ ¹æ®è§„åˆ™ä¼ é€’æ•°æ®ï¼Œé‚£ä¹ˆä¹Ÿå°±æ²¡æœ‰ä»€ä¹ˆé—®é¢˜äº†ã€‚\n\næ³¨æ„ï¼Œä½¿ç”¨äº†provideã€injectåˆ†å‘æ•°æ®ä¼šå¯¼è‡´å…¨å±€å­˜åœ¨ã€‚æ„æ€æ˜¯å­ä»£ç»„ä»¶éƒ½èƒ½å¾—åˆ°injectçš„å†…å®¹ã€‚\n\nä¸»è¦æ˜¯æä¾›ä¸€ä¸ªæ€è·¯ã€‚å¹¶ä¸”ç»™äºˆä¸€å®šçš„æºç ã€‚\n\nä»Šå¹´ä¹Ÿæ˜¯è‡ªå·±å¤Ÿä»»æ€§ï¼Œåˆå¤ªé«˜å‚²ã€‚ç”Ÿæ´»ä¾æ—§ä¸ç¨³ï¼Œä½†æ˜¯æ¥ä¸‹æ¥æˆ‘ä¸»è¦ç›®æ ‡æ˜¯vue3å’Œtypescriptã€‚ä¸¤è€…ç»“åˆä½¿ç”¨ã€‚", "user_name": "htSauce", "description": "åº§å³é“­ï¼šè´«ç©·é™åˆ¶äº†æƒ³è±¡åŠ›", "got_view_count": 66957, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "æœºå™¨å­¦ä¹ ", "concern_user_count": 133308, "user_id": "782508009724749", "title": "pandas | è¯¦è§£DataFrameä¸­çš„applyä¸applymapæ–¹æ³•", "mark_content": "æœ¬æ–‡å§‹å‘äºä¸ªäººå…¬ä¼—å·ï¼šTechFlowï¼ŒåŸåˆ›ä¸æ˜“ï¼Œæ±‚ä¸ªå…³æ³¨\n\n<br>\n\n<section id=\"nice\" data-tool=\"mdniceç¼–è¾‘å™¨\" data-website=\"https://www.mdnice.com\" style=\"color: black; line-height: 1.6; word-spacing: 0px; letter-spacing: 0px; word-break: break-word; word-wrap: break-word; text-align: left; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, 'PingFang SC', Cambria, Cochin, Georgia, Times, 'Times New Roman', serif; font-size: 14px; padding: 10px;\"><p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">ä»Šå¤©æ˜¯<strong style=\"font-weight: bold; color: black;\">pandasæ•°æ®å¤„ç†</strong>ä¸“é¢˜çš„ç¬¬5ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬æ¥èŠèŠpandasçš„ä¸€äº›é«˜çº§è¿ç®—ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">åœ¨ä¸Šä¸€ç¯‡æ–‡ç« å½“ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†panadsçš„ä¸€äº›è®¡ç®—æ–¹æ³•ï¼Œæ¯”å¦‚ä¸¤ä¸ªdataframeçš„å››åˆ™è¿ç®—ï¼Œä»¥åŠdataframeå¡«å……Nullçš„æ–¹æ³•ã€‚ä»Šå¤©è¿™ç¯‡æ–‡ç« æˆ‘ä»¬æ¥èŠèŠdataframeä¸­çš„å¹¿æ’­æœºåˆ¶ï¼Œä»¥åŠapplyå‡½æ•°çš„ä½¿ç”¨æ–¹æ³•ã€‚</p>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-size: 22px; text-align: center; position: relative; font-weight: bold; color: black; line-height: 1.1em; padding-top: 12px; padding-bottom: 12px; margin: 70px 30px 30px; border: 1px solid #000;\"><span style=\"float: left; display: block; width: 90%; border-top: 1px solid #000; height: 1px; line-height: 1px; margin-left: -5px; margin-top: -17px;\"> </span><span class=\"prefix\" style=\"display: block; width: 3px; margin: 0 0 0 5%; height: 3px; line-height: 3px; overflow: hidden; background-color: #000; box-shadow: 3px 0 #000,\n    0 3px #000,\n    -3px 0 #000,\n    0 -3px #000;\"></span><span class=\"content\" style=\"display: block; -webkit-box-reflect: below 0em -webkit-gradient(linear,left top,left bottom, from(rgba(0,0,0,0)),to(rgba(255,255,255,0.1)));\">dataframeå¹¿æ’­</span><span class=\"suffix\" style=\"display: block; width: 3px; margin: 0 0 0 95%; height: 3px; line-height: 3px; overflow: hidden; background-color: #000; box-shadow: 3px 0 #000,\n    0 3px #000,\n    -3px 0 #000,\n    0 -3px #000;\"></span><span style=\"float: right; display: block; width: 90%; border-bottom: 1px solid #000; height: 1px; line-height: 1px; margin-right: -5px; margin-top: 16px;\"> </span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\"><strong style=\"font-weight: bold; color: black;\">å¹¿æ’­æœºåˆ¶</strong>æˆ‘ä»¬å…¶å®å¹¶ä¸é™Œç”Ÿï¼Œ æˆ‘ä»¬åœ¨ä¹‹å‰ä»‹ç»numpyçš„ä¸“é¢˜æ–‡ç« å½“ä¸­æ›¾ç»ä»‹ç»è¿‡å¹¿æ’­ã€‚å½“æˆ‘ä»¬å¯¹ä¸¤ä¸ªå°ºå¯¸ä¸ä¸€è‡´çš„æ•°ç»„è¿›è¡Œè¿ç®—çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å°†å…¶ä¸­ç»´åº¦è¾ƒå°çš„é‚£ä¸ªå¡«å……æˆå’Œå¦å¤–ä¸€ä¸ªä¸€æ ·å†è¿›è¡Œè®¡ç®—ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">æ¯”å¦‚æˆ‘ä»¬å°†ä¸€ä¸ªäºŒç»´æ•°ç»„å‡å»ä¸€ä¸ªä¸€ç»´æ•°ç»„ï¼Œnumpyä¼šå…ˆå°†ä¸€ä½æ•°ç»„æ‹“å±•åˆ°äºŒç»´ä¹‹åå†è¿›è¡Œå‡æ³•è¿ç®—ã€‚çœ‹èµ·æ¥å°±åƒæ˜¯äºŒç»´æ•°ç»„çš„æ¯ä¸€è¡Œåˆ†åˆ«å‡å»äº†è¿™ä¸€ä¸ªä¸€ç»´æ•°ç»„ä¸€æ ·ã€‚å¯ä»¥ç†è§£æˆæˆ‘ä»¬å°†å‡å»è¿™ä¸€ä¸ªä¸€ç»´æ•°ç»„çš„æ“ä½œå¹¿æ’­åˆ°äº†äºŒç»´æ•°ç»„çš„æ¯ä¸€è¡Œæˆ–è€…æ˜¯æ¯ä¸€åˆ—å½“ä¸­ã€‚</p>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://tva1.sinaimg.cn/large/007S8ZIlgy1gh0lyfw456j30j308vdga.jpg\" alt style=\"display: block; margin: 0 auto; max-width: 100%; box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px; border-radius: 4px; margin-top: 10px;\"></figure>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">åœ¨ä¸Šé¢è¿™ä¸ªä¾‹å­å½“ä¸­æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªnumpyçš„æ•°ç»„ï¼Œç„¶åå‡å»äº†å®ƒçš„ç¬¬ä¸€è¡Œã€‚æˆ‘ä»¬å¯¹æ¯”ä¸‹æœ€åçš„ç»“æœä¼šå‘ç°ï¼Œarræ•°ç»„å½“ä¸­çš„æ¯ä¸€è¡Œéƒ½å‡å»äº†å®ƒçš„ç¬¬ä¸€è¡Œã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">åŒæ ·çš„æ“ä½œåœ¨dataframeä¹Ÿä¸€æ ·å¯ä»¥è¿›è¡Œã€‚</p>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://tva1.sinaimg.cn/large/007S8ZIlgy1gh0m3ir30oj30ii09xt90.jpg\" alt style=\"display: block; margin: 0 auto; max-width: 100%; box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px; border-radius: 4px; margin-top: 10px;\"></figure>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">æˆ‘ä»¬å½“ç„¶ä¹Ÿå¯ä»¥å¯¹æŸä¸€åˆ—è¿›è¡Œå¹¿æ’­ï¼Œä½†æ˜¯dataframeå››åˆ™è¿ç®—çš„å¹¿æ’­æœºåˆ¶é»˜è®¤å¯¹è¡Œç”Ÿæ•ˆï¼Œå¦‚æœè¦å¯¹åˆ—ä½¿ç”¨çš„è¯ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ç®—æœ¯è¿ç®—æ–¹æ³•ï¼Œå¹¶ä¸”æŒ‡å®šå¸Œæœ›åŒ¹é…çš„è½´ã€‚</p>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://tva1.sinaimg.cn/large/007S8ZIlgy1gh0m3efevtj30fd04hq2y.jpg\" alt style=\"display: block; margin: 0 auto; max-width: 100%; box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px; border-radius: 4px; margin-top: 10px;\"></figure>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-size: 22px; text-align: center; position: relative; font-weight: bold; color: black; line-height: 1.1em; padding-top: 12px; padding-bottom: 12px; margin: 70px 30px 30px; border: 1px solid #000;\"><span style=\"float: left; display: block; width: 90%; border-top: 1px solid #000; height: 1px; line-height: 1px; margin-left: -5px; margin-top: -17px;\"> </span><span class=\"prefix\" style=\"display: block; width: 3px; margin: 0 0 0 5%; height: 3px; line-height: 3px; overflow: hidden; background-color: #000; box-shadow: 3px 0 #000,\n    0 3px #000,\n    -3px 0 #000,\n    0 -3px #000;\"></span><span class=\"content\" style=\"display: block; -webkit-box-reflect: below 0em -webkit-gradient(linear,left top,left bottom, from(rgba(0,0,0,0)),to(rgba(255,255,255,0.1)));\">å‡½æ•°ä¸æ˜ å°„</span><span class=\"suffix\" style=\"display: block; width: 3px; margin: 0 0 0 95%; height: 3px; line-height: 3px; overflow: hidden; background-color: #000; box-shadow: 3px 0 #000,\n    0 3px #000,\n    -3px 0 #000,\n    0 -3px #000;\"></span><span style=\"float: right; display: block; width: 90%; border-bottom: 1px solid #000; height: 1px; line-height: 1px; margin-right: -5px; margin-top: 16px;\"> </span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">pandasçš„å¦å¤–ä¸€ä¸ªä¼˜ç‚¹æ˜¯<strong style=\"font-weight: bold; color: black;\">å…¼å®¹äº†numpy</strong>å½“ä¸­çš„ä¸€äº›è¿ç®—æ–¹æ³•å’Œå‡½æ•°ï¼Œä½¿å¾—æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†ä¸€äº›numpyå½“ä¸­çš„å‡½æ•°è¿ç”¨åœ¨DataFrameä¸Šï¼Œè¿™æ ·å°±å¤§å¤§æ‹“å±•äº†ä½¿ç”¨æ–¹æ³•ä»¥åŠè¿ç®—æ–¹æ³•ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">æ¯”å¦‚æˆ‘ä»¬è¦å°†DataFrameå½“ä¸­æ‰€æœ‰çš„å…ƒç´ å˜æˆå®ƒçš„å¹³æ–¹ï¼Œæˆ‘ä»¬åˆ©ç”¨numpyçš„squareæ–¹æ³•å¯ä»¥å¾ˆå®¹æ˜“åšåˆ°ï¼š</p>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://tva1.sinaimg.cn/large/007S8ZIlgy1gh0n1z0wz7j30em048dfu.jpg\" alt style=\"display: block; margin: 0 auto; max-width: 100%; box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px; border-radius: 4px; margin-top: 10px;\"></figure>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">æˆ‘ä»¬å¯ä»¥å°†DataFrameä½œä¸ºnumpyå‡½æ•°çš„å‚æ•°ä¼ å…¥ï¼Œä½†å¦‚æœæˆ‘ä»¬æƒ³è¦è‡ªå·±å®šä¹‰ä¸€ä¸ªæ–¹æ³•å¹¶ä¸”åº”ç”¨åœ¨DataFrameä¸Šæ€ä¹ˆåŠï¼Ÿ</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">æˆ‘ä»¬å¯ä»¥åˆ©ç”¨<strong style=\"font-weight: bold; color: black;\">applyæ–¹æ³•</strong>å¾ˆå®¹æ˜“åœ°å®ç°è¿™ä¸€ç‚¹ï¼Œapplyæ–¹æ³•æœ‰äº›åƒæ˜¯PythonåŸç”Ÿçš„mapæ–¹æ³•ï¼Œå¯ä»¥å¯¹DataFrameå½“ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ åšä¸€ä¸ªæ˜ å°„è®¡ç®—ã€‚æˆ‘ä»¬åªéœ€è¦åœ¨applyæ–¹æ³•å½“ä¸­ä¼ å…¥æˆ‘ä»¬æƒ³è¦åº”ç”¨åœ¨DataFrameä¸Šçš„æ–¹æ³•å³å¯ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒæ¥å—çš„å‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå…¸å‹çš„å‡½æ•°å¼ç¼–ç¨‹çš„åº”ç”¨ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">æ¯”å¦‚æˆ‘ä»¬æƒ³è¦å¯¹DataFrameè¿›è¡Œå¹³æ–¹æ“ä½œï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†np.squareå‡½æ•°å½“åšå‚æ•°ä¼ å…¥ã€‚</p>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://tva1.sinaimg.cn/large/007S8ZIlgy1gh0n6crfjtj30ew04d3yj.jpg\" alt style=\"display: block; margin: 0 auto; max-width: 100%; box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px; border-radius: 4px; margin-top: 10px;\"></figure>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">applyæ–¹æ³•é™¤äº†å¯ä»¥ç”¨åœ¨ä¸€æ•´ä¸ªDataFrameä¸Šä¹‹å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è®©å®ƒåº”ç”¨åœ¨<strong style=\"font-weight: bold; color: black;\">æŸä¸€è¡Œ</strong>æˆ–è€…æ˜¯<strong style=\"font-weight: bold; color: black;\">æŸä¸€åˆ—</strong>æˆ–è€…æ˜¯æŸä¸€ä¸ªéƒ¨åˆ†ä¸Šï¼Œåº”ç”¨çš„æ–¹æ³•éƒ½æ˜¯ä¸€æ ·çš„ã€‚æ¯”å¦‚æˆ‘ä»¬å¯ä»¥è¿™æ ·å¯¹DataFrameå½“ä¸­çš„æŸä¸€è¡Œä»¥åŠæŸä¸€åˆ—åº”ç”¨å¹³æ–¹è¿™ä¸ªæ–¹æ³•ã€‚</p>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://tva1.sinaimg.cn/large/007S8ZIlgy1gh0nbxn2zcj30jv06xglx.jpg\" alt style=\"display: block; margin: 0 auto; max-width: 100%; box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px; border-radius: 4px; margin-top: 10px;\"></figure>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">å¦å¤–ï¼Œapplyä¸­å‡½æ•°çš„ä½œç”¨åŸŸå¹¶ä¸åªå±€é™åœ¨å…ƒç´ ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å†™å‡ºä½œç”¨åœ¨ä¸€è¡Œæˆ–è€…æ˜¯ä¸€åˆ—ä¸Šçš„å‡½æ•°ã€‚æ¯”å¦‚æˆ‘ä»¬æƒ³è¦è®¡ç®—å‡ºDataFrameå½“ä¸­æ¯ä¸€åˆ—çš„æœ€å¤§å€¼ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å†™ï¼š</p>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://tva1.sinaimg.cn/large/007S8ZIlgy1gh0ndoflp7j30hz03lmx6.jpg\" alt style=\"display: block; margin: 0 auto; max-width: 100%; box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px; border-radius: 4px; margin-top: 10px;\"></figure>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">è¿™ä¸ªåŒ¿åå‡½æ•°å½“ä¸­çš„<strong style=\"font-weight: bold; color: black;\">xå…¶å®æ˜¯ä¸€ä¸ªSeries</strong>ï¼Œé‚£è¿™é‡Œçš„maxå°±æ˜¯Seriesè‡ªå¸¦çš„maxæ–¹æ³•ã€‚ä¹Ÿå°±æ˜¯è¯´applyçš„ä½œç”¨èŒƒå›´æ˜¯Seriesï¼Œè™½ç„¶æœ€ç»ˆçš„æ•ˆæœæ˜¯æ¯ä¸€ä¸ªå…ƒç´ éƒ½è¢«æ”¹å˜äº†ï¼Œä½†æ˜¯<strong style=\"font-weight: bold; color: black;\">applyçš„ä½œç”¨åŸŸå¹¶ä¸æ˜¯å…ƒç´ è€Œæ˜¯Series</strong>ã€‚æˆ‘ä»¬é€šè¿‡applyæ“ä½œè¡Œæˆ–è€…åˆ—ï¼Œè¡Œå’Œåˆ—å°†æ”¹å˜åº”ç”¨åˆ°æ¯ä¸€ä¸ªå…ƒç´ ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">åŒæ ·æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†applyçš„åº”ç”¨å¯¹è±¡é™å®šä¸ºè¡Œï¼ŒåŒæ ·æˆ‘ä»¬éœ€è¦é€šè¿‡ä¼ å…¥axisæ¥é™å®šï¼Œæˆ‘ä»¬å¯ä»¥ä¼ å…¥axis='columns'ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šaxis=1ï¼Œè¿™ä¸¤è€…çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚</p>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://tva1.sinaimg.cn/large/007S8ZIlgy1gh0oq7gu4qj30gl036glm.jpg\" alt style=\"display: block; margin: 0 auto; max-width: 100%; box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px; border-radius: 4px; margin-top: 10px;\"></figure>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">å¦å¤–ï¼Œapplyè¿”å›çš„ç»“æœå¹¶ä¸ä¸€å®šåªèƒ½æ˜¯æ ‡é‡ï¼Œä¹Ÿå¯ä»¥æ˜¯å¤šä¸ªå€¼ç»„æˆçš„listæˆ–è€…æ˜¯Seriesï¼Œå…¶å®ä¸¤è€…ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œå› ä¸ºå³ä½¿è¿”å›Listä¹Ÿä¼šè¢«è½¬åŒ–æˆSeriesã€‚</p>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://tva1.sinaimg.cn/large/007S8ZIlgy1gh0p8xq95xj30ng08xgm9.jpg\" alt style=\"display: block; margin: 0 auto; max-width: 100%; box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px; border-radius: 4px; margin-top: 10px;\"></figure>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">æœ€åæˆ‘ä»¬æ¥ä»‹ç»ä¸€ä¸‹applymapï¼Œå®ƒæ˜¯<strong style=\"font-weight: bold; color: black;\">å…ƒç´ çº§çš„map</strong>ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥æ“ä½œDataFrameä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ã€‚æ¯”å¦‚æˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥è½¬æ¢DataFrameå½“ä¸­æ•°æ®çš„æ ¼å¼ã€‚</p>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://tva1.sinaimg.cn/large/007S8ZIlgy1gh0q4zy56tj30gf04b0st.jpg\" alt style=\"display: block; margin: 0 auto; max-width: 100%; box-shadow: rgba(170, 170, 170, 0.48) 0px 0px 6px 0px; border-radius: 4px; margin-top: 10px;\"></figure>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">ä¹‹æ‰€ä»¥æˆ‘ä»¬å«å®ƒapplymapè€Œä¸æ˜¯mapï¼Œæ˜¯å› ä¸ºåœ¨Seriesçš„æ–¹æ³•å½“ä¸­ï¼Œå·²ç»æœ‰äº†mapï¼Œæ‰€ä»¥ä¸ºäº†åŒºåˆ†åˆ›å»ºäº†applymapã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">è¿™é‡Œè¦æ³¨æ„ï¼Œå¦‚æœå°†ä¸Šé¢ä»£ç ä¸­çš„applymapæ”¹æˆapplyæ˜¯ä¼šæŠ¥é”™çš„ã€‚æŠ¥é”™çš„åŸå› ä¹Ÿå¾ˆç®€å•ï¼Œå› ä¸ºapplyæ–¹æ³•çš„ä½œç”¨åŸŸä¸æ˜¯å…ƒç´ è€Œæ˜¯Seriesï¼ŒSerieså¹¶ä¸æ”¯æŒè¿™æ ·çš„æ“ä½œã€‚</p>\n<h2 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-size: 22px; text-align: center; position: relative; font-weight: bold; color: black; line-height: 1.1em; padding-top: 12px; padding-bottom: 12px; margin: 70px 30px 30px; border: 1px solid #000;\"><span style=\"float: left; display: block; width: 90%; border-top: 1px solid #000; height: 1px; line-height: 1px; margin-left: -5px; margin-top: -17px;\"> </span><span class=\"prefix\" style=\"display: block; width: 3px; margin: 0 0 0 5%; height: 3px; line-height: 3px; overflow: hidden; background-color: #000; box-shadow: 3px 0 #000,\n    0 3px #000,\n    -3px 0 #000,\n    0 -3px #000;\"></span><span class=\"content\" style=\"display: block; -webkit-box-reflect: below 0em -webkit-gradient(linear,left top,left bottom, from(rgba(0,0,0,0)),to(rgba(255,255,255,0.1)));\">æ€»ç»“</span><span class=\"suffix\" style=\"display: block; width: 3px; margin: 0 0 0 95%; height: 3px; line-height: 3px; overflow: hidden; background-color: #000; box-shadow: 3px 0 #000,\n    0 3px #000,\n    -3px 0 #000,\n    0 -3px #000;\"></span><span style=\"float: right; display: block; width: 90%; border-bottom: 1px solid #000; height: 1px; line-height: 1px; margin-right: -5px; margin-top: 16px;\"> </span></h2>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">ä»Šå¤©çš„æ–‡ç« æˆ‘ä»¬ä¸»è¦ä»‹ç»äº†pandaså½“ä¸­applyä¸applymapçš„ä½¿ç”¨æ–¹æ³•ï¼Œ è¿™ä¸¤ä¸ªæ–¹æ³•åœ¨æˆ‘ä»¬æ—¥å¸¸æ“ä½œDataFrameçš„æ•°æ®éå¸¸å¸¸ç”¨ï¼Œå¯ä»¥è¯´æ˜¯æ‰‹æœ¯åˆ€çº§çš„apiã€‚ç†Ÿç»ƒæŒæ¡å¯¹äºæˆ‘ä»¬æå®šæ•°æ®å¤„ç†éå¸¸æœ‰å¸®åŠ©ï¼Œå¦‚æœå¤§å®¶ç†è§£Pythonä¸­åŸç”Ÿçš„mapæ–¹æ³•çš„åº”ç”¨ï¼Œç›¸ä¿¡ä¸€å®šä¹Ÿå¯ä»¥å¾ˆé¡ºåˆ©åœ°ç†è§£ä»Šå¤©çš„æ–‡ç« ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 14px;\">ä»Šå¤©çš„æ–‡ç« åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼Œå¦‚æœå–œæ¬¢æœ¬æ–‡çš„è¯ï¼Œè¯·æ¥ä¸€æ³¢<strong style=\"font-weight: bold; color: black;\">ç´ è´¨ä¸‰è¿</strong>ï¼Œç»™æˆ‘ä¸€ç‚¹æ”¯æŒå§ï¼ˆ<strong style=\"font-weight: bold; color: black;\">å…³æ³¨ã€è½¬å‘ã€ç‚¹èµ</strong>ï¼‰ã€‚</p>\n<span style=\"font-size: 15px; display: block; text-align: center; margin-top: 50px; color: #999; border-bottom: 1px solid #eee;\">- END -</span></section>\n\n![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/52483df9a44947f2a6442e76dadbb96b~tplv-k3u1fbpfcp-zoom-1.image)", "user_name": "æ‰¿å¿—", "description": "å…¬ä¼—å·ï¼šTechFlow", "got_view_count": 52683, "category_name": "äººå·¥æ™ºèƒ½", "ctime": 1500876664}
{"tag_name": "Java", "concern_user_count": 252044, "user_id": "1538972007286157", "title": "æŒç»­è¾“å‡ºé¢è¯•é¢˜ç³»åˆ—ä¹‹ZooKeeperç¯‡", "mark_content": "## å¼€ç¯‡ä»‹ç»\nå¤§å®¶å¥½ï¼Œæˆ‘æ˜¯`Javaæœ€å…¨é¢è¯•é¢˜åº“`çš„æè£¤å§ï¼Œä»Šå¤©è¿™ç¯‡æ˜¯JavaEEé¢è¯•é¢˜ç³»åˆ—çš„ç¬¬åäºŒç¯‡ï¼Œä¸»è¦æ€»ç»“äº†ZooKeeperç›¸å…³çš„é¢è¯•é¢˜ï¼›åœ¨åç»­ï¼Œä¼šæ²¿ç€ç¬¬ä¸€ç¯‡å¼€ç¯‡çš„çŸ¥è¯†çº¿è·¯ä¸€ç›´æ€»ç»“ä¸‹å»ï¼Œåšåˆ°æ—¥æ›´ï¼å¦‚æœæˆ‘èƒ½åšåˆ°ç™¾æ—¥ç™¾æ›´ï¼Œå¸Œæœ›ä½ ä¹Ÿå¯ä»¥è·Ÿç€ç™¾æ—¥ç™¾åˆ·ï¼Œä¸€ç™¾å¤©å…»æˆä¸€ä¸ªå¥½ä¹ æƒ¯ã€‚\n\n## ZooKeeperæ˜¯ä»€ä¹ˆï¼Ÿ\nZooKeeperæ˜¯ä¸€ä¸ªå¼€æ”¾æºç çš„`åˆ†å¸ƒå¼åè°ƒæœåŠ¡`ï¼Œå®ƒæ˜¯é›†ç¾¤çš„ç®¡ç†è€…ï¼Œç›‘è§†ç€é›†ç¾¤ä¸­å„ä¸ªèŠ‚ç‚¹çš„çŠ¶æ€æ ¹æ®èŠ‚ç‚¹æäº¤çš„åé¦ˆè¿›è¡Œä¸‹ä¸€æ­¥åˆç†æ“ä½œã€‚æœ€ç»ˆï¼Œå°†ç®€å•æ˜“ç”¨çš„æ¥å£å’Œæ€§èƒ½é«˜æ•ˆã€åŠŸèƒ½ç¨³å®šçš„ç³»ç»Ÿæä¾›ç»™ç”¨æˆ·ã€‚\n\nåˆ†å¸ƒå¼åº”ç”¨ç¨‹åºå¯ä»¥åŸºäºZookeeperå®ç°è¯¸å¦‚æ•°æ®å‘å¸ƒ/è®¢é˜…ã€è´Ÿè½½å‡è¡¡ã€å‘½åæœåŠ¡ã€åˆ†å¸ƒå¼åè°ƒ/é€šçŸ¥ã€é›†ç¾¤ç®¡ç†ã€Masteré€‰ä¸¾ã€åˆ†å¸ƒå¼é”å’Œåˆ†å¸ƒå¼é˜Ÿåˆ—ç­‰åŠŸèƒ½ã€‚\n\nZookeeperä¿è¯äº†å¦‚ä¸‹åˆ†å¸ƒå¼ä¸€è‡´æ€§ç‰¹æ€§ï¼š\n- é¡ºåºä¸€è‡´æ€§\n- åŸå­æ€§\n- å•ä¸€è§†å›¾\n- å¯é æ€§\n- å®æ—¶æ€§ï¼ˆæœ€ç»ˆä¸€è‡´æ€§ï¼‰\n\nå®¢æˆ·ç«¯çš„è¯»è¯·æ±‚å¯ä»¥è¢«é›†ç¾¤ä¸­çš„ä»»æ„ä¸€å°æœºå™¨å¤„ç†ï¼Œå¦‚æœè¯»è¯·æ±‚åœ¨èŠ‚ç‚¹ä¸Šæ³¨å†Œäº†ç›‘å¬å™¨ï¼Œè¿™ä¸ªç›‘å¬å™¨ä¹Ÿæ˜¯ç”±æ‰€è¿æ¥çš„zookeeperæœºå™¨æ¥å¤„ç†ã€‚å¯¹äºå†™è¯·æ±‚ï¼Œè¿™äº›è¯·æ±‚ä¼šåŒæ—¶å‘ç»™å…¶ä»–zookeeperæœºå™¨å¹¶ä¸”è¾¾æˆä¸€è‡´åï¼Œè¯·æ±‚æ‰ä¼šè¿”å›æˆåŠŸã€‚å› æ­¤ï¼Œéšç€zookeeperçš„é›†ç¾¤æœºå™¨å¢å¤šï¼Œè¯»è¯·æ±‚çš„ååä¼šæé«˜ä½†æ˜¯å†™è¯·æ±‚çš„ååä¼šä¸‹é™ã€‚\n\næœ‰åºæ€§æ˜¯zookeeperä¸­éå¸¸é‡è¦çš„ä¸€ä¸ªç‰¹æ€§ï¼Œæ‰€æœ‰çš„æ›´æ–°éƒ½æ˜¯å…¨å±€æœ‰åºçš„ï¼Œæ¯ä¸ªæ›´æ–°éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„æ—¶é—´æˆ³ï¼Œè¿™ä¸ªæ—¶é—´æˆ³ç§°ä¸º`zxidï¼ˆZookeeper Transaction Idï¼‰`ã€‚è€Œè¯»è¯·æ±‚åªä¼šç›¸å¯¹äºæ›´æ–°æœ‰åºï¼Œä¹Ÿå°±æ˜¯è¯»è¯·æ±‚çš„è¿”å›ç»“æœä¸­ä¼šå¸¦æœ‰è¿™ä¸ªzookeeperæœ€æ–°çš„zxidã€‚\n\n## ZooKeeperå’Œdubboçš„åŒºåˆ«ï¼Ÿ\n**Zookeeper**: \nzookeeperç”¨æ¥æ³¨å†ŒæœåŠ¡å’Œè¿›è¡Œè´Ÿè½½å‡è¡¡ï¼Œå“ªä¸€ä¸ªæœåŠ¡ç”±å“ªä¸€ä¸ªæœºå™¨æ¥æä¾›å¿…éœ€è®©è°ƒç”¨è€…çŸ¥é“ï¼Œ\nç®€å•æ¥è¯´å°±æ˜¯ipåœ°å€å’ŒæœåŠ¡åç§°çš„å¯¹åº”å…³ç³»ã€‚å½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡ç¡¬ç¼–ç çš„æ–¹å¼æŠŠè¿™ç§å¯¹åº”å…³ç³»åœ¨è°ƒç”¨æ–¹ä¸šåŠ¡ä»£ç ä¸­å®ç°ï¼Œä½†æ˜¯å¦‚æœæä¾›æœåŠ¡çš„æœºå™¨æŒ‚æ‰ï¼Œè°ƒç”¨è€…æ— æ³•çŸ¥æ™“ï¼Œå¦‚æœä¸æ›´æ”¹ä»£ç ä¼šç»§ç»­è¯·æ±‚æŒ‚æ‰çš„æœºå™¨æä¾›æœåŠ¡ã€‚ zookeeperé€šè¿‡`å¿ƒè·³æœºåˆ¶`å¯ä»¥æ£€æµ‹æŒ‚æ‰çš„æœºå™¨å¹¶å°†æŒ‚æ‰æœºå™¨çš„ipå’ŒæœåŠ¡å¯¹åº”å…³ç³»ä»åˆ—è¡¨ä¸­åˆ é™¤ã€‚è‡³äºæ”¯æŒé«˜å¹¶å‘,ç®€å•æ¥è¯´å°±æ˜¯æ¨ªå‘æ‰©å±•,åœ¨ä¸æ›´æ”¹ä»£ç çš„æƒ…å†µé€šè¿‡æ·»åŠ æœºå™¨æ¥æé«˜è¿ç®—èƒ½åŠ›ã€‚é€šè¿‡æ·»åŠ æ–°çš„æœºå™¨å‘ zookeeperæ³¨å†ŒæœåŠ¡ï¼ŒæœåŠ¡çš„æä¾›è€…å¤šäº†èƒ½æœåŠ¡çš„å®¢æˆ·å°±å¤šäº†ã€‚\n\n**dubbo**:\næ˜¯ç®¡ç†ä¸­é—´å±‚çš„å·¥å…·ï¼Œåœ¨ä¸šåŠ¡å±‚åˆ°æ•°æ®ä»“åº“é—´æœ‰éå¸¸å¤šæœåŠ¡çš„æ¥å…¥å’ŒæœåŠ¡æä¾›è€…éœ€è¦è°ƒåº¦ï¼Œdubboæä¾›ä¸€ä¸ªæ¡†æ¶è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\n\n**zookeeperå’Œ dubboçš„å…³ç³»ï¼š**\nDubboå°†æ³¨å†Œä¸­å¿ƒè¿›è¡ŒæŠ½è±¡ï¼Œå®ƒå¯ä»¥å¤–æ¥ä¸åŒçš„å­˜å‚¨åª’ä»‹ç»™æ³¨å†Œä¸­å¿ƒæä¾›æœåŠ¡ï¼Œæœ‰ ZooKeeper, Memcached, Redisç­‰ã€‚\n\n>æ³¨æ„è¿™é‡Œçš„ dubboåªæ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œè¿™ä¸ªæ¡†æ¶ä¸­è¦å®Œæˆè°ƒåº¦å¿…é¡»è¦æœ‰ä¸€ä¸ªåˆ†å¸ƒå¼çš„æ³¨å†Œä¸­å¿ƒï¼Œå‚¨å­˜æ‰€æœ‰æœåŠ¡çš„å…ƒæ•°æ®ï¼Œå¯ä»¥ç”¨zkï¼Œä¹Ÿå¯ä»¥ç”¨åˆ«çš„ã€‚\n\n\n## Zookeeperçš„javaå®¢æˆ·ç«¯éƒ½æœ‰å“ªäº›?\n- zkè‡ªå¸¦çš„ zkclient\n- Apacheå¼€æºçš„ Curator\n\n## ZooKeeperæä¾›äº†ä»€ä¹ˆï¼Ÿ\n- æ–‡ä»¶ç³»ç»Ÿ\n- é€šçŸ¥æœºåˆ¶\n\n## è¯´è¯´ZooKeeperæ–‡ä»¶ç³»ç»Ÿ\n Zookeeperæä¾›ä¸€ä¸ªå¤šå±‚çº§çš„èŠ‚ç‚¹å‘½åç©ºé—´(èŠ‚ç‚¹ç§°ä¸º znode)ã€‚ä¸æ–‡ä»¶ç³»ç»Ÿä¸åŒçš„æ˜¯ï¼Œè¿™äº›èŠ‚ç‚¹éƒ½å¯ä»¥è®¾ç½®å…³è”çš„æ•°æ®ï¼Œè€Œæ–‡ä»¶ç³»ç»Ÿä¸­åªæœ‰æ–‡ä»¶èŠ‚ç‚¹å¯ä»¥å­˜æ”¾æ•°æ®è€Œç›®å½•èŠ‚ç‚¹ä¸è¡Œã€‚\n\n Zookeeperä¸ºäº†ä¿è¯é«˜ååå’Œä½å»¶è¿Ÿï¼Œåœ¨å†…å­˜ä¸­ç»´æŠ¤äº†è¿™ä¸ªæ ‘çŠ¶çš„ç›®å½•ç»“æ„ï¼Œè¿™ç§ç‰¹æ€§ä½¿å¾— Zookeeperä¸èƒ½ç”¨äºå­˜æ”¾å¤§é‡çš„æ•°æ®,æ¯ä¸ªèŠ‚ç‚¹çš„å­˜æ”¾æ•°æ®ä¸Šé™ä¸º1Mã€‚\n\n## è¯´è¯´ZABåè®®ï¼Ÿ\nZABåè®®æ˜¯ä¸ºåˆ†å¸ƒå¼åè°ƒæœåŠ¡Zookeeperä¸“é—¨è®¾è®¡çš„ä¸€ç§æ”¯æŒ`å´©æºƒæ¢å¤çš„åŸå­å¹¿æ’­åè®®`ã€‚\n\nZABåè®®åŒ…æ‹¬ä¸¤ç§åŸºæœ¬çš„æ¨¡å¼ï¼š`å´©æºƒæ¢å¤`å’Œ`æ¶ˆæ¯å¹¿æ’­`ã€‚\n\nå½“æ•´ä¸ªzookeeperé›†ç¾¤åˆšåˆšå¯åŠ¨æˆ–è€…LeaderæœåŠ¡å™¨å®•æœºã€é‡å¯æˆ–è€…ç½‘ç»œæ•…éšœå¯¼è‡´ä¸å­˜åœ¨è¿‡åŠçš„æœåŠ¡å™¨ä¸LeaderæœåŠ¡å™¨ä¿æŒæ­£å¸¸é€šä¿¡æ—¶ï¼Œæ‰€æœ‰è¿›ç¨‹ï¼ˆæœåŠ¡å™¨ï¼‰è¿›å…¥å´©æºƒæ¢å¤æ¨¡å¼ï¼Œé¦–å…ˆé€‰ä¸¾äº§ç”Ÿæ–°çš„LeaderæœåŠ¡å™¨ï¼Œç„¶åé›†ç¾¤ä¸­FolloweræœåŠ¡å™¨å¼€å§‹ä¸æ–°çš„LeaderæœåŠ¡å™¨è¿›è¡Œæ•°æ®åŒæ­¥ï¼Œå½“é›†ç¾¤ä¸­è¶…è¿‡åŠæ•°æœºå™¨ä¸è¯¥LeaderæœåŠ¡å™¨å®Œæˆæ•°æ®åŒæ­¥ä¹‹åï¼Œé€€å‡ºæ¢å¤æ¨¡å¼è¿›å…¥æ¶ˆæ¯å¹¿æ’­æ¨¡å¼ï¼ŒLeaderæœåŠ¡å™¨å¼€å§‹æ¥æ”¶å®¢æˆ·ç«¯çš„äº‹åŠ¡è¯·æ±‚ç”Ÿæˆäº‹ç‰©ææ¡ˆæ¥è¿›è¡Œäº‹åŠ¡è¯·æ±‚å¤„ç†ã€‚\n\n## Znodeæœ‰å“ªäº›ç±»å‹\n- `PERSISTENT-æŒä¹…èŠ‚ç‚¹`\né™¤éæ‰‹åŠ¨åˆ é™¤ï¼Œå¦åˆ™èŠ‚ç‚¹ä¸€ç›´å­˜åœ¨äºZookeeperä¸Š\n\n- `EPHEMERAL-ä¸´æ—¶èŠ‚ç‚¹`\nä¸´æ—¶èŠ‚ç‚¹çš„ç”Ÿå‘½å‘¨æœŸä¸å®¢æˆ·ç«¯ä¼šè¯ç»‘å®šï¼Œä¸€æ—¦å®¢æˆ·ç«¯ä¼šè¯å¤±æ•ˆï¼ˆå®¢æˆ·ç«¯ä¸zookeeperè¿æ¥æ–­å¼€ä¸ä¸€å®šä¼šè¯å¤±æ•ˆï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸ªå®¢æˆ·ç«¯åˆ›å»ºçš„æ‰€æœ‰ä¸´æ—¶èŠ‚ç‚¹éƒ½ä¼šè¢«ç§»é™¤ã€‚\n\n- `PERSISTENT_SEQUENTIAL-æŒä¹…é¡ºåºèŠ‚ç‚¹`\nåŸºæœ¬ç‰¹æ€§åŒæŒä¹…èŠ‚ç‚¹ï¼Œåªæ˜¯å¢åŠ äº†é¡ºåºå±æ€§ï¼ŒèŠ‚ç‚¹ååè¾¹ä¼šè¿½åŠ ä¸€ä¸ªç”±çˆ¶èŠ‚ç‚¹ç»´æŠ¤çš„è‡ªå¢æ•´å‹æ•°å­—ã€‚\n\n- `EPHEMERAL_SEQUENTIAL-ä¸´æ—¶é¡ºåºèŠ‚ç‚¹`\nåŸºæœ¬ç‰¹æ€§åŒä¸´æ—¶èŠ‚ç‚¹ï¼Œå¢åŠ äº†é¡ºåºå±æ€§ï¼ŒèŠ‚ç‚¹ååè¾¹ä¼šè¿½åŠ ä¸€ä¸ªç”±çˆ¶èŠ‚ç‚¹ç»´æŠ¤çš„è‡ªå¢æ•´å‹æ•°å­—ã€‚\n\n## ZookeeperèŠ‚ç‚¹å®•æœºå¦‚ä½•å¤„ç†ï¼Ÿ\nZookeeperæœ¬èº«ä¹Ÿæ˜¯é›†ç¾¤ï¼Œæ¨èé…ç½®`ä¸å°‘äº3ä¸ªæœåŠ¡å™¨`ã€‚Zookeeperè‡ªèº«ä¹Ÿè¦ä¿è¯å½“ä¸€ä¸ªèŠ‚ç‚¹å®•æœºæ—¶ï¼Œå…¶ä»–èŠ‚ç‚¹ä¼šç»§ç»­æä¾›æœåŠ¡ã€‚\nå¦‚æœæ˜¯ä¸€ä¸ªFollowerå®•æœºï¼Œè¿˜æœ‰2å°æœåŠ¡å™¨æä¾›è®¿é—®ï¼Œå› ä¸ºZookeeperä¸Šçš„æ•°æ®æ˜¯æœ‰å¤šä¸ªå‰¯æœ¬çš„ï¼Œæ•°æ®å¹¶ä¸ä¼šä¸¢å¤±ï¼›\nå¦‚æœæ˜¯ä¸€ä¸ªLeaderå®•æœºï¼ŒZookeeperä¼šé€‰ä¸¾å‡ºæ–°çš„Leaderã€‚\n\nZKé›†ç¾¤çš„æœºåˆ¶æ˜¯åªè¦è¶…è¿‡åŠæ•°çš„èŠ‚ç‚¹æ­£å¸¸ï¼Œé›†ç¾¤å°±èƒ½æ­£å¸¸æä¾›æœåŠ¡ã€‚\nåªæœ‰åœ¨ZKèŠ‚ç‚¹æŒ‚å¾—å¤ªå¤šï¼Œåªå‰©ä¸€åŠæˆ–ä¸åˆ°ä¸€åŠèŠ‚ç‚¹èƒ½å·¥ä½œï¼Œé›†ç¾¤æ‰å¤±æ•ˆã€‚\n\næ‰€ä»¥ï¼š\n- 3ä¸ªèŠ‚ç‚¹çš„clusterå¯ä»¥æŒ‚æ‰1ä¸ªèŠ‚ç‚¹(leaderå¯ä»¥å¾—åˆ°2ç¥¨>1.5)\n- 2ä¸ªèŠ‚ç‚¹çš„clusterä¸èƒ½æŒ‚æ‰ä»»ä½•1ä¸ªèŠ‚ç‚¹(leaderå¯ä»¥å¾—åˆ°1ç¥¨<=1)\n\n## Zookeeperæœ‰å“ªå‡ ç§å‡ ç§éƒ¨ç½²æ¨¡å¼?\nZookeeperæœ‰ä¸‰ç§éƒ¨ç½²æ¨¡å¼ï¼š\n- `å•æœºéƒ¨ç½²`ï¼šä¸€å°é›†ç¾¤ä¸Šè¿è¡Œ\n- `é›†ç¾¤éƒ¨ç½²`ï¼šå¤šå°é›†ç¾¤è¿è¡Œ\n- `ä¼ªé›†ç¾¤éƒ¨ç½²`ï¼šä¸€å°é›†ç¾¤å¯åŠ¨å¤šä¸ª Zookeeperå®ä¾‹è¿è¡Œ\n\n## Zookeeperçš„å…¸å‹åº”ç”¨åœºæ™¯ï¼Ÿ\nZookeeperæ˜¯ä¸€ä¸ªå…¸å‹çš„`å‘å¸ƒ/è®¢é˜…æ¨¡å¼`çš„åˆ†å¸ƒå¼æ•°æ®ç®¡ç†ä¸åè°ƒæ¡†æ¶ï¼Œå¼€å‘äººå‘˜å¯ä»¥ä½¿ç”¨å®ƒæ¥è¿›è¡Œåˆ†å¸ƒå¼æ•°æ®çš„å‘å¸ƒå’Œè®¢é˜…ã€‚\né€šè¿‡å¯¹ Zookeeperä¸­ä¸°å¯Œçš„æ•°æ®èŠ‚ç‚¹è¿›è¡Œäº¤å‰ä½¿ç”¨ï¼Œé…åˆ `Watcheräº‹ä»¶é€šçŸ¥æœºåˆ¶`ï¼Œå¯ä»¥éå¸¸æ–¹ä¾¿çš„æ„å»ºä¸€ç³»åˆ—åˆ†å¸ƒå¼åº”ç”¨ï¼Œä¼šæ¶‰åŠçš„æ ¸å¿ƒåŠŸèƒ½ï¼š\n- æ•°æ®å‘å¸ƒ/è®¢é˜…\n- è´Ÿè½½å‡è¡¡\n- å‘½åæœåŠ¡\n- åˆ†å¸ƒå¼åè°ƒ/é€šçŸ¥\n- é›†ç¾¤ç®¡ç†\n- Masteré€‰ä¸¾\n- åˆ†å¸ƒå¼é”\n- åˆ†å¸ƒå¼é˜Ÿåˆ—\n\n## è¯´ä¸€ä¸‹Zookeeper Watcheræœºåˆ¶\nZookeeperå…è®¸å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯çš„æŸä¸ª Znodeæ³¨å†Œä¸ª Watcherç›‘å¬ï¼Œå½“æœåŠ¡ç«¯çš„ä¸€äº›æŒ‡å®šäº‹ä»¶è§¦å‘äº†è¿™ä¸ª Watcherï¼ŒæœåŠ¡ç«¯ä¼šå‘æŒ‡å®šå®¢æˆ·ç«¯å‘é€ä¸€ä¸ªäº‹ä»¶é€šçŸ¥æ¥å®ç°åˆ†å¸ƒå¼çš„é€šçŸ¥åŠŸèƒ½ï¼Œå®¢æˆ·ç«¯æ ¹æ® Watcheré€šçŸ¥çŠ¶æ€å’Œäº‹ä»¶ç±»å‹åšå‡ºä¸šåŠ¡ä¸Šçš„æ”¹å˜ã€‚\n\nå·¥ä½œæœºåˆ¶ï¼š\n- å®¢æˆ·ç«¯æ³¨å†Œ watcher\n- æœåŠ¡ç«¯å¤„ç†watcher\n- å®¢æˆ·ç«¯å›è°ƒ watcher\n\n## å®¢æˆ·ç«¯æ³¨å†ŒWatcherçš„æµç¨‹ï¼Ÿ\n1ã€å®¢æˆ·ç«¯æ³¨å†Œ`Watcherå®ç°`\n2ã€è°ƒç”¨`getData()`/`getChildren()`/`exist()`ä¸‰ä¸ªAPIï¼Œä¼ å…¥Watcherå¯¹è±¡\n3ã€æ ‡è®°è¯·æ±‚requestï¼Œå°è£…Watcheråˆ°`WatchRegistration`\n4ã€å°è£…æˆ`Packet`å¯¹è±¡ï¼Œå‘æœåŠ¡ç«¯å‘é€request\n5ã€æ”¶åˆ°æœåŠ¡ç«¯å“åº”åï¼Œå°†Watcheræ³¨å†Œåˆ°`ZKWatcherManager`ä¸­è¿›è¡Œç®¡ç†\n6ã€è¯·æ±‚è¿”å›ï¼Œå®Œæˆæ³¨å†Œã€‚\n\n## æœåŠ¡ç«¯å¤„ç†Watcherçš„æµç¨‹ï¼Ÿ\n1ã€`æœåŠ¡ç«¯æ¥æ”¶Watcherå¹¶å­˜å‚¨`\næ¥æ”¶åˆ°å®¢æˆ·ç«¯è¯·æ±‚ï¼Œå¤„ç†è¯·æ±‚åˆ¤æ–­æ˜¯å¦éœ€è¦æ³¨å†ŒWatcherï¼Œéœ€è¦çš„è¯å°†æ•°æ®èŠ‚ç‚¹çš„èŠ‚ç‚¹è·¯å¾„å’ŒServerCnxnï¼ˆServerCnxnä»£è¡¨ä¸€ä¸ªå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„è¿æ¥ï¼Œå®ç°äº†Watcherçš„processæ¥å£ï¼Œæ­¤æ—¶å¯ä»¥çœ‹æˆä¸€ä¸ªWatcherå¯¹è±¡ï¼‰å­˜å‚¨åœ¨WatcherManagerçš„WatchTableå’Œwatch2Pathsä¸­å»ã€‚\n\n2ã€`Watcherè§¦å‘`\n- ä»¥æœåŠ¡ç«¯æ¥æ”¶åˆ° setData() äº‹åŠ¡è¯·æ±‚è§¦å‘NodeDataChangedäº‹ä»¶ä¸ºä¾‹ï¼š\n- å°è£…WatchedEvent\n- å°†é€šçŸ¥çŠ¶æ€ï¼ˆSyncConnectedï¼‰ã€äº‹ä»¶ç±»å‹ï¼ˆNodeDataChangedï¼‰ä»¥åŠèŠ‚ç‚¹è·¯å¾„å°è£…æˆä¸€ä¸ªWatchedEventå¯¹è±¡\n- æŸ¥è¯¢Watcher\n- ä»WatchTableä¸­æ ¹æ®èŠ‚ç‚¹è·¯å¾„æŸ¥æ‰¾Watcher\næ²¡æ‰¾åˆ°ï¼›è¯´æ˜æ²¡æœ‰å®¢æˆ·ç«¯åœ¨è¯¥æ•°æ®èŠ‚ç‚¹ä¸Šæ³¨å†Œè¿‡Watcher\næ‰¾åˆ°ï¼›æå–å¹¶ä»WatchTableå’ŒWatch2Pathsä¸­åˆ é™¤å¯¹åº”Watcherï¼ˆä»è¿™é‡Œå¯ä»¥çœ‹å‡ºWatcheråœ¨æœåŠ¡ç«¯æ˜¯ä¸€æ¬¡æ€§çš„ï¼Œè§¦å‘ä¸€æ¬¡å°±å¤±æ•ˆäº†ï¼‰\n\n3ã€`è°ƒç”¨processæ–¹æ³•æ¥è§¦å‘Watcher`\nè¿™é‡Œprocessä¸»è¦å°±æ˜¯é€šè¿‡ServerCnxnå¯¹åº”çš„TCPè¿æ¥å‘é€Watcheräº‹ä»¶é€šçŸ¥ã€‚\n\n## å®¢æˆ·ç«¯å›è°ƒ Watcheræµç¨‹ï¼Ÿ\n1ã€å®¢æˆ·ç«¯`SendThread`çº¿ç¨‹æ¥æ”¶äº‹ä»¶é€šçŸ¥ï¼Œäº¤ç”± EventThreadçº¿ç¨‹å›è°ƒ Watcherã€‚\n2ã€å®¢æˆ·ç«¯çš„Watcheræœºåˆ¶åŒæ ·æ˜¯ä¸€æ¬¡æ€§çš„ï¼Œä¸€æ—¦è¢«è§¦å‘åï¼Œè¯¥ Watcherå°±å¤±æ•ˆäº†ã€‚\n\n## Zookeeperå¯¹èŠ‚ç‚¹çš„ watchç›‘å¬é€šçŸ¥æ˜¯æ°¸ä¹…çš„å—?ä¸ºä»€ä¹ˆä¸æ˜¯æ°¸ä¹…çš„?\nä¸æ˜¯æ°¸ä¹…çš„ã€‚\nå®˜æ–¹å£°æ˜ï¼šä¸€ä¸ª Watchäº‹ä»¶æ˜¯ä¸€ä¸ªæ¬¡æ€§çš„è§¦å‘å™¨ï¼Œå½“è¢«è®¾ç½®äº† Watchçš„æ•°æ®å‘ç”Ÿäº†æ”¹å˜çš„æ—¶å€™ï¼Œåˆ™æœåŠ¡å™¨å°†è¿™ä¸ªæ”¹å˜å‘é€ç»™è®¾ç½®äº† Watchçš„å®¢æˆ·ç«¯ï¼Œä»¥ä¾¿é€šçŸ¥å®ƒä»¬ã€‚\n\nåŸå› ï¼š\nå¦‚æœæœåŠ¡ç«¯å˜åŠ¨é¢‘ç¹ï¼Œè€Œç›‘å¬çš„å®¢æˆ·ç«¯å¾ˆå¤šæƒ…å†µä¸‹ï¼Œæ¯æ¬¡å˜åŠ¨éƒ½è¦é€šçŸ¥åˆ°æ‰€æœ‰çš„å®¢æˆ·ç«¯ï¼Œç»™ç½‘ç»œå’ŒæœåŠ¡å™¨é€ æˆå¾ˆå¤§å‹åŠ›ã€‚ä¸€èˆ¬æ˜¯å®¢æˆ·ç«¯æ‰§è¡Œ`getData`ï¼ˆâ€œ/èŠ‚ç‚¹â€ï¼Œtrueï¼‰ï¼Œå¦‚æœèŠ‚ç‚¹Aå‘ç”Ÿäº†å˜æ›´æˆ–åˆ é™¤ï¼Œå®¢æˆ·ç«¯ä¼šå¾—åˆ°å®ƒçš„ watchäº‹ä»¶ï¼Œä½†æ˜¯åœ¨ä¹‹åèŠ‚ç‚¹Aåˆå‘ç”Ÿäº†å˜æ›´ï¼Œè€Œå®¢æˆ·ç«¯åˆæ²¡æœ‰è®¾ç½® watchäº‹ä»¶ï¼Œå°±ä¸å†ç»™å®¢æˆ·ç«¯å‘é€ã€‚\n>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¾ˆå¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„å®¢æˆ·ç«¯ä¸éœ€è¦çŸ¥é“æœåŠ¡ç«¯çš„æ¯ä¸€æ¬¡å˜åŠ¨ï¼Œæˆ‘åªè¦æœ€æ–°çš„æ•°æ®å³å¯ã€‚\n\n## è¯´è¯´ACLæƒé™æ§åˆ¶æœºåˆ¶\n1ã€`æƒé™æ¨¡å¼ï¼ˆSchemeï¼‰`\nIPï¼šä»IPåœ°å€ç²’åº¦è¿›è¡Œæƒé™æ§åˆ¶\nDigestï¼šæœ€å¸¸ç”¨ï¼Œç”¨ç±»ä¼¼äº username:password çš„æƒé™æ ‡è¯†æ¥è¿›è¡Œæƒé™é…ç½®ï¼Œä¾¿äºåŒºåˆ†ä¸åŒåº”ç”¨æ¥è¿›è¡Œæƒé™æ§åˆ¶\nWorldï¼šæœ€å¼€æ”¾çš„æƒé™æ§åˆ¶æ–¹å¼ï¼Œæ˜¯ä¸€ç§ç‰¹æ®Šçš„digestæ¨¡å¼ï¼Œåªæœ‰ä¸€ä¸ªæƒé™æ ‡è¯†â€œworld:anyoneâ€\nSuperï¼šè¶…çº§ç”¨æˆ·\n\n2ã€`æˆæƒå¯¹è±¡`\næˆæƒå¯¹è±¡æŒ‡çš„æ˜¯æƒé™èµ‹äºˆçš„ç”¨æˆ·æˆ–ä¸€ä¸ªæŒ‡å®šå®ä½“ï¼Œä¾‹å¦‚IPåœ°å€æˆ–æ˜¯æœºå™¨ç¯ã€‚\n\n3ã€`æƒé™ Permission`\n- CREATEï¼šæ•°æ®èŠ‚ç‚¹åˆ›å»ºæƒé™ï¼Œå…è®¸æˆæƒå¯¹è±¡åœ¨è¯¥Znodeä¸‹åˆ›å»ºå­èŠ‚ç‚¹\n- DELETEï¼šå­èŠ‚ç‚¹åˆ é™¤æƒé™ï¼Œå…è®¸æˆæƒå¯¹è±¡åˆ é™¤è¯¥æ•°æ®èŠ‚ç‚¹çš„å­èŠ‚ç‚¹\n- READï¼šæ•°æ®èŠ‚ç‚¹çš„è¯»å–æƒé™ï¼Œå…è®¸æˆæƒå¯¹è±¡è®¿é—®è¯¥æ•°æ®èŠ‚ç‚¹å¹¶è¯»å–å…¶æ•°æ®å†…å®¹æˆ–å­èŠ‚ç‚¹åˆ—è¡¨ç­‰\n- WRITEï¼šæ•°æ®èŠ‚ç‚¹æ›´æ–°æƒé™ï¼Œå…è®¸æˆæƒå¯¹è±¡å¯¹è¯¥æ•°æ®èŠ‚ç‚¹è¿›è¡Œæ›´æ–°æ“ä½œ\n- ADMINï¼šæ•°æ®èŠ‚ç‚¹ç®¡ç†æƒé™ï¼Œå…è®¸æˆæƒå¯¹è±¡å¯¹è¯¥æ•°æ®èŠ‚ç‚¹è¿›è¡ŒACLç›¸å…³è®¾ç½®æ“ä½œ\n\n## æœåŠ¡å™¨æœ‰å“ªäº›è§’è‰²ï¼Ÿ\n1ã€`Leader`\näº‹åŠ¡è¯·æ±‚çš„å”¯ä¸€è°ƒåº¦å’Œå¤„ç†è€…ï¼Œä¿è¯é›†ç¾¤äº‹åŠ¡å¤„ç†çš„é¡ºåºæ€§\né›†ç¾¤å†…éƒ¨å„æœåŠ¡çš„è°ƒåº¦è€…\n\n2ã€`Follower`\nå¤„ç†å®¢æˆ·ç«¯çš„éäº‹åŠ¡è¯·æ±‚ï¼Œè½¬å‘äº‹åŠ¡è¯·æ±‚ç»™LeaderæœåŠ¡å™¨\nå‚ä¸äº‹åŠ¡è¯·æ±‚Proposalçš„æŠ•ç¥¨\nå‚ä¸Leaderé€‰ä¸¾æŠ•ç¥¨\n\n3ã€`Observer`\nå¤„ç†å®¢æˆ·ç«¯çš„éäº‹åŠ¡è¯·æ±‚ï¼Œè½¬å‘äº‹åŠ¡è¯·æ±‚ç»™LeaderæœåŠ¡å™¨\nä¸å‚ä¸ä»»ä½•å½¢å¼çš„æŠ•ç¥¨\n\n## Zookeeper ä¸‹ Serverå·¥ä½œçŠ¶æ€æœ‰å“ªäº›ï¼Ÿ\n1ã€`LOOKING`ï¼šå¯»æ‰¾LeaderçŠ¶æ€ã€‚å½“æœåŠ¡å™¨å¤„äºè¯¥çŠ¶æ€æ—¶ï¼Œå®ƒä¼šè®¤ä¸ºå½“å‰é›†ç¾¤ä¸­æ²¡æœ‰Leaderï¼Œå› æ­¤éœ€è¦è¿›å…¥Leaderé€‰ä¸¾çŠ¶æ€ã€‚\n2ã€`FOLLOWING`ï¼šè·Ÿéšè€…çŠ¶æ€ã€‚è¡¨æ˜å½“å‰æœåŠ¡å™¨è§’è‰²æ˜¯Followerã€‚\n3ã€`LEADING`ï¼šé¢†å¯¼è€…çŠ¶æ€ã€‚è¡¨æ˜å½“å‰æœåŠ¡å™¨è§’è‰²æ˜¯Leaderã€‚\n4ã€`OBSERVING`ï¼šè§‚å¯Ÿè€…çŠ¶æ€ã€‚è¡¨æ˜å½“å‰æœåŠ¡å™¨è§’è‰²æ˜¯Observerã€‚\n\n## é›†ç¾¤æ”¯æŒåŠ¨æ€æ·»åŠ æœºå™¨å—ï¼Ÿ\nå…¶å®å°±æ˜¯æ°´å¹³æ‰©å®¹ï¼ŒZookeeperåœ¨è¿™æ–¹é¢ä¸å¤ªå¥½ã€‚\nä¸¤ç§æ–¹å¼ï¼š\n- `å…¨éƒ¨é‡å¯`ï¼šå…³é—­æ‰€æœ‰ ZookeeperæœåŠ¡ï¼Œä¿®æ”¹é…ç½®ä¹‹åå¯åŠ¨ã€‚ä¸å½±å“ä¹‹å‰å®¢æˆ·ç«¯çš„ä¼šè¯ã€‚\n- `é€ä¸ªé‡å¯`ï¼šåœ¨è¿‡åŠå­˜æ´»å³å¯ç”¨çš„åŸåˆ™ä¸‹ä¸€å°æœºå™¨é‡å¯ä¸å½±å“æ•´ä¸ªé›†ç¾¤å¯¹å¤–æä¾›æœåŠ¡ã€‚ï¼ˆè¿™æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„æ–¹å¼ï¼‰\n\n>3.5ç‰ˆæœ¬å¼€å§‹æ”¯æŒåŠ¨æ€æ‰©å®¹ã€‚\n\n## ä»€ä¹ˆæ˜¯Chrootï¼Ÿ\n3.2.0ç‰ˆæœ¬åï¼Œæ·»åŠ äº†ç‰¹æ€§ï¼Œè¯¥ç‰¹æ€§å…è®¸æ¯ä¸ªå®¢æˆ·ç«¯ä¸ºè‡ªå·±è®¾ç½®ä¸€ä¸ªå‘½åç©ºé—´ã€‚å¦‚æœä¸€ä¸ªå®¢æˆ·ç«¯è®¾ç½®äº† Chrootï¼Œé‚£ä¹ˆè¯¥å®¢æˆ·ç«¯å¯¹æœåŠ¡å™¨çš„ä»»ä½•æ“ä½œï¼Œéƒ½å°†ä¼šè¢«é™åˆ¶åœ¨å…¶è‡ªå·±çš„å‘½åç©ºé—´ä¸‹ã€‚\n\n>é€šè¿‡è®¾ç½® Chrootï¼Œèƒ½å¤Ÿå°†ä¸€ä¸ªå®¢æˆ·ç«¯åº”ç”¨ä¸ ZookeeperæœåŠ¡ç«¯çš„ä¸€é¢—å­æ ‘ç›¸å¯¹åº”ï¼Œåœ¨é‚£äº›å¤šä¸ªåº”ç”¨å…¬ç”¨ä¸€ä¸ª Zookeeperé›†ç¾¤çš„åœºæ™¯ä¸‹ï¼Œå¯¹å®ç°ä¸åŒåº”ç”¨é—´çš„ç›¸äº’éš”ç¦»éå¸¸æœ‰å¸®åŠ©ã€‚", "user_name": "ç¨‹åºåª›å°çº¢", "description": "æˆ‘å¯èƒ½æ˜¯ä¸ªå‡å¼€å‘", "got_view_count": 3475, "category_name": "åç«¯", "ctime": 1457483880}
{"tag_name": "Flutter", "concern_user_count": 34101, "user_id": "219558055779576", "title": "[Flutterç¿»è¯‘]åœ¨Flutterä¸­ä¸ºlinuxç¼–å†™æ’ä»¶", "mark_content": "> åŸæ–‡åœ°å€ï¼šhttps://medium.com/@yashjohri1200/writing-plugins-for-linux-in-flutter-38e46bd7872f\n>\n> åŸæ–‡ä½œè€…ï¼šhttps://medium.com/@yashjohri1200\n>\n> å‘å¸ƒæ—¶é—´ï¼š2020å¹´8æœˆ10æ—¥ - 2åˆ†é’Ÿé˜…è¯»\n\nå˜¿ï¼Œå¸Œæœ›ä½ åœ¨è¿™æ¬¡æµè¡Œç—…ä¸­æ²¡äº‹ã€‚æˆ‘ä»¬éƒ½çŸ¥é“Flutteræœ€è¿‘ç”¨[canonical](https://medium.com/flutter/announcing-flutter-linux-alpha-with-canonical-19eb824590a9)æ‰©å±•äº†å¯¹linuxçš„æ”¯æŒã€‚æœ‰äº†è¿™ä¸ªï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥æ›´å®¹æ˜“åœ°ç”¨Flutterä¸ºlinuxæ„å»ºå’Œéƒ¨ç½²åº”ç”¨ç¨‹åºäº†ã€‚\n\n# ä»å‡çº§Flutterå¼€å§‹\n\n```shell\nflutter channel master\nflutter upgrade\n```\n\n# åœ¨Flutterä¸­å¯ç”¨Linuxæ”¯æŒ\n\n```shell\nflutter config --enable-linux-desktop\n```\n\n# è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç®€å•çš„ç”µæ± æ’ä»¶\n\nåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªæ’ä»¶ï¼Œå®ƒå°†ä¸ºæˆ‘ä»¬æä¾›ç”µæ± ç™¾åˆ†æ¯”æ°´å¹³å’Œå®ƒçš„æŠ€æœ¯ã€‚\n\n```shell\nflutter create -t plugin --platforms=linux battery\n```\n\n# åˆ†æç¯å¢ƒ\n\nåœ¨ä½ çš„æ’ä»¶æ–‡ä»¶å¤¹ä¸­ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ª`lib`æ–‡ä»¶å¤¹ï¼Œå…¶ä¸­åŒ…å«`battery.dart`æ–‡ä»¶ï¼Œå®ƒå°†å¤„ç†ä½ çš„æ–¹æ³•é€šé“ï¼Œä¸€ä¸ª`example`æ–‡ä»¶å¤¹ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªç¤ºä¾‹åº”ç”¨ç¨‹åºæ¥æ¼”ç¤ºä½ çš„æ’ä»¶çš„ä½¿ç”¨ï¼Œè¿˜æœ‰ä¸€ä¸ª`linux`æ–‡ä»¶å¤¹ï¼Œå…¶ä¸­åŒ…å«battery_plugin.ccæ–‡ä»¶ï¼Œå®ƒå°†å¤„ç†ä½ çš„å¹³å°çº§æ–¹æ³•ã€‚å¹³å°çº§çš„ä»£ç æ˜¯ç”¨Linuxçš„C++ç¼–å†™çš„ã€‚\n\næ¯å½“æœ‰æ¥è‡ªFlutterçš„è°ƒç”¨æ—¶ï¼Œå‡½æ•°`battery_plugin_handle_method_call`å°†è¢«è°ƒç”¨ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨`fl_method_call_get_name(method_call)`å‡½æ•°æ¥è·å–æ–¹æ³•ã€‚å“åº”å°†ä»¥`FlMethodResponse`æ•°æ®ç±»å‹ä»linuxå¹³å°å‘é€åˆ°flutterã€‚\n\nåœ¨linuxä¸­ï¼Œæˆ‘ä»¬è¦å¤„ç†çš„æ•°æ®ç±»å‹æ˜¯`FlValue`ã€‚FlValueçš„ä¸€äº›ä¾‹å­æ˜¯ï¼š\n\nå¯¹äºå­—ç¬¦ä¸²ï¼š\n\n```cpp\nstring flutter = \"Flutter\".g_autoptr(FlValue);\ng_autoptr(FlValue) converted = fl_value_new_string(flutter.c_str());\n```\n\nå¯¹äºMapsï¼š\n\n```cpp\n// Initialize a map.\ng_autoptr(FlValue) mapExample = fl_value_new_map();\nstring flutter = \"Flutter\", dart = \"Dart\";\n// Set a value in map.\nfl_value_set(mapExample, fl_value_new_string(flutter.c_str()),               fl_value_new_string(dart.c_str()));\n// First parameter is the variable.\n// Second parameter is the key.\n// Third paramter is its value.\n```\n\nä¸ºäº†å°†FlValueè½¬æ¢ä¸ºå“åº”ï¼Œæˆ‘ä»¬å¿…é¡»ä½¿ç”¨ï¼š\n\n```cpp\ng_autoptr(FlMethodResponse) response = FL_METHOD_RESPONSE(fl_method_success_response_new(value));\n// It takes a FlValue as its parameter.\n```\n\næ›´å¤šå…³äº`FlValue`çš„ä¿¡æ¯å¯ä»¥åœ¨[è¿™é‡Œ](https://engine.chinmaygarde.com/fl__value_8h.html#a248fb199aa2cc2b92f692067e2d15cd9)æ‰¾åˆ°ã€‚\n\n# è®©æˆ‘ä»¬å¼€å§‹å·¥ä½œ\n\nåœ¨`lib/battery.dart`æ–‡ä»¶ä¸­ï¼Œæ·»åŠ ä¸€ä¸ªå‡½æ•°æ¥è°ƒç”¨`getBatteryData`æ–¹æ³•ï¼Œåƒè¿™æ ·ï¼š\n\n```dart\nstatic Future<Map<String, dynamic>> get getBatteryLevel async {\n    final Map<String, dynamic> version = Map<String, dynamic>.from(\n        await _channel.invokeMethod('getBatteryData')\n    );\n    return version;\n}\n```\n\nè¿™å°±æ˜¯æˆ‘ä»¬åœ¨flutteråº”ç”¨ä¸­è¦è°ƒç”¨çš„getterã€‚ç°åœ¨åœ¨`linux/battery_plugin.cc`ä¸­ï¼Œæˆ‘ä»¬å¿…é¡»ä¸ºæˆ‘ä»¬çš„`getBatteryData`æ–¹æ³•é€šé“æ·»åŠ ä¸€ä¸ªæ¡ä»¶ã€‚\n\n```cpp\nif (strcmp(method, \"getPlatformVersion\") == 0) {\n  /*\n   * already implemented.\n   */\n} else if (strcmp(method, \"getBatteryData\") == 0) {\n  g_autoptr(FlValue) batteryData = fl_value_new_map();\n  string command = \"cat /sys/class/power_supply/BAT1/capacity\";\n  char buffer[256];\n  FILE * pipe = popen(command.c_str(), \"r\");\n  while (!feof(pipe)) {\n    if (fgets(buffer, 128, pipe) != NULL) {\n      fl_value_set(batteryData, fl_value_new_string(\"capacity\"), fl_value_new_string(buffer));\n    }\n  }\n  pclose(pipe);\n\n  command = \"cat /sys/class/power_supply/BAT1/technology\";\n  pipe = popen(command.c_str(), \"r\");\n  while (!feof(pipe)) {\n    if (fgets(buffer, 128, pipe) != NULL) {\n      fl_value_set(batteryData, fl_value_new_string(\"technology\"), fl_value_new_string(buffer));\n    }\n  }\n  pclose(pipe);\n\n  response = FL_METHOD_RESPONSE(fl_method_success_response_new(batteryData));\n}\n```\n\n> æ³¨æ„ï¼šè¿™ä¸æ˜¯æ•´ä¸ªbattery_plugin.ccï¼Œåªæ˜¯æˆ‘ä»¬å®ç°çš„éƒ¨åˆ†ã€‚\n\nåœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨C++ä¸­çš„ç®¡é“æ¥æå–Linuxå‘½ä»¤çš„è¾“å‡ºã€‚æˆ‘ä»¬ä½¿ç”¨æ–‡ä»¶`/sys/class/power_supply/BAT1/capacity`æ¥è·å–ç”µæ± çš„ç™¾åˆ†æ¯”æ°´å¹³ï¼Œä½¿ç”¨`/sys/class/power_supply/BAT1/technology`æ¥è·å–å…¶æŠ€æœ¯ã€‚\n\n# ç°åœ¨åˆ°å‰å°\n\nè¿™æ˜¯æˆ‘ä»¬çš„`main.dart`æ–‡ä»¶ï¼Œå®ƒä½¿ç”¨ç”µæ± æ’ä»¶æ¥è·å–ç”µæ± æ•°æ®ã€‚\n\n```dart\nimport 'package:flutter/material.dart';\nimport 'dart:async';\n\nimport 'package:flutter/services.dart';\nimport 'package:battery/battery.dart';\n\nvoid main() {\n  runApp(MyApp());\n}\n\nclass MyApp extends StatefulWidget {\n  @override\n  _MyAppState createState() => _MyAppState();\n}\n\nclass _MyAppState extends State<MyApp> {\n  String capacity = \"Unknown\", technology = \"Unknown\";\n\n  @override\n  void initState() {\n    super.initState();\n    initPlatformState();\n  }\n\n  // Platform messages are asynchronous, so we initialize in an async method.\n  Future<void> initPlatformState() async {\n    Map<String, dynamic> batteryDataLocal;\n    // Platform messages may fail, so we use a try/catch PlatformException.\n    try {\n      batteryDataLocal = await Battery.getBatteryLevel;\n    } on PlatformException {\n      batteryDataLocal = <String, dynamic>{\n        'capacity': 'Failed to get capacity',\n        'technology': 'Failed to get technology',\n      };\n    }\n\n    // If the widget was removed from the tree while the asynchronous platform\n    // message was in flight, we want to discard the reply rather than calling\n    // setState to update our non-existent appearance.\n    if (!mounted) return;\n\n    setState(() {\n      capacity = batteryDataLocal[\"capacity\"];\n      technology = batteryDataLocal[\"technology\"];\n    });\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return MaterialApp(\n      home: Scaffold(\n        appBar: AppBar(\n          title: const Text('Plugin example app'),\n        ),\n        body: Center(\n          child: Text(\n            'Battery is : $capacity\\nTechnology is : $technology',\n          ),\n        ),\n      ),\n    );\n  }\n}\n```\n\n# è¿è¡Œåº”ç”¨ç¨‹åº\n\n```shell\nflutter run -d linux\n```\n\nè¦è·å¾—è¯¦ç»†çš„è°ƒè¯•æ•°æ®ï¼Œè¯·ä½¿ç”¨ï¼š\n\n```shell\nflutter run -d linux -v\n```\n\n# å°±è¿™æ ·å§\n\nè¿™æ˜¯åº”ç”¨ç¨‹åºä½œä¸ºlinuxå¯æ‰§è¡Œæ–‡ä»¶è¿è¡Œçš„æˆªå›¾ã€‚\n\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/20fc2c74ca5d42d5ba1e6f9a39e7c642~tplv-k3u1fbpfcp-zoom-1.image)\n> ç”µæ± æ’ä»¶ç¤ºä¾‹\n\n**Github : https://github.com/yash1200/flutter_battery_linux**\n\n---\n\né€šè¿‡( www.DeepL.com/Translator )ï¼ˆå…è´¹ç‰ˆï¼‰ç¿»è¯‘", "user_name": "Sunbreak", "description": "FlutteræŠ€æœ¯ä¸“å®¶", "got_view_count": 15506, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "Vue.js", "concern_user_count": 263220, "user_id": "2418581313687390", "title": "vue3.0 å“åº”å¼åŸç†(è¶…è¯¦ç»†)", "mark_content": "\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200809155509890.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3psX0FsaWVu,size_16,color_FFFFFF,t_70)\n\n\n## ä¸€ åŸºäºproxyçš„Observer\n\n### 1 ä»€ä¹ˆæ˜¯proxy\n**Proxy å¯¹è±¡ç”¨äºå®šä¹‰åŸºæœ¬æ“ä½œçš„è‡ªå®šä¹‰è¡Œä¸ºï¼ˆå¦‚å±æ€§æŸ¥æ‰¾ã€èµ‹å€¼ã€æšä¸¾ã€å‡½æ•°è°ƒç”¨ç­‰ï¼‰ã€‚**\n\nproxyæ˜¯es6æ–°ç‰¹æ€§ï¼Œä¸ºäº†å¯¹ç›®æ ‡çš„ä½œç”¨ä¸»è¦æ˜¯é€šè¿‡handlerå¯¹è±¡ä¸­çš„æ‹¦æˆªæ–¹æ³•æ‹¦æˆªç›®æ ‡å¯¹è±¡targetçš„æŸäº›è¡Œä¸ºï¼ˆå¦‚å±æ€§æŸ¥æ‰¾ã€èµ‹å€¼ã€æšä¸¾ã€å‡½æ•°è°ƒç”¨ç­‰ï¼‰ã€‚\n\n````js\n/* target: ç›®æ ‡å¯¹è±¡ï¼Œå¾…è¦ä½¿ç”¨ Proxy åŒ…è£…çš„ç›®æ ‡å¯¹è±¡ï¼ˆå¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„å¯¹è±¡ï¼ŒåŒ…æ‹¬åŸç”Ÿæ•°ç»„ï¼Œå‡½æ•°ï¼Œç”šè‡³å¦ä¸€ä¸ªä»£ç†ï¼‰ã€‚ */\n/* handler: ä¸€ä¸ªé€šå¸¸ä»¥å‡½æ•°ä½œä¸ºå±æ€§çš„å¯¹è±¡ï¼Œå„å±æ€§ä¸­çš„å‡½æ•°åˆ†åˆ«å®šä¹‰äº†åœ¨æ‰§è¡Œå„ç§æ“ä½œæ—¶ä»£ç† proxy çš„è¡Œä¸ºã€‚ */ \nconst proxy = new Proxy(target, handler);\n\n````\n\n### 2 ä¸ºä»€ä¹ˆè¦ç”¨proxyï¼Œæ”¹ç”¨proxyä¹‹åçš„åˆ©ä¸å¼Š\n\n\n > **  3.0 å°†å¸¦æ¥ä¸€ä¸ªåŸºäº Proxy çš„ observer å®ç°ï¼Œå®ƒå¯ä»¥æä¾›è¦†ç›–è¯­è¨€ (JavaScriptâ€”â€”è¯‘æ³¨) å…¨èŒƒå›´çš„å“åº”å¼èƒ½åŠ›ï¼Œæ¶ˆé™¤äº†å½“å‰ Vue 2 ç³»åˆ—ä¸­åŸºäº Object.defineProperty æ‰€å­˜åœ¨çš„ä¸€äº›å±€é™ï¼Œè¿™äº›å±€é™åŒ…æ‹¬ï¼š1 å¯¹å±æ€§çš„æ·»åŠ ã€åˆ é™¤åŠ¨ä½œçš„ç›‘æµ‹ï¼› 2 å¯¹æ•°ç»„åŸºäºä¸‹æ ‡çš„ä¿®æ”¹ã€å¯¹äº .length ä¿®æ”¹çš„ç›‘æµ‹ï¼› 3 å¯¹ Mapã€Setã€WeakMap å’Œ WeakSet çš„æ”¯æŒï¼›ï¼›\n\nvue2.0 ç”¨ **Object.defineProperty** ä½œä¸ºå“åº”å¼åŸç†çš„å®ç°ï¼Œä½†æ˜¯ä¼šæœ‰å®ƒçš„å±€é™æ€§ï¼Œæ¯”å¦‚ **æ— æ³•ç›‘å¬æ•°ç»„åŸºäºä¸‹æ ‡çš„ä¿®æ”¹ï¼Œä¸æ”¯æŒ Mapã€Setã€WeakMap å’Œ WeakSetç­‰ç¼ºé™·** ï¼Œæ‰€ä»¥æ”¹ç”¨äº†proxyè§£å†³äº†è¿™äº›é—®é¢˜ï¼Œè¿™ä¹Ÿæ„å‘³ç€vue3.0å°†æ”¾å¼ƒå¯¹ä½ç‰ˆæœ¬æµè§ˆå™¨çš„å…¼å®¹ï¼ˆå…¼å®¹ç‰ˆæœ¬ie11ä»¥ä¸Šï¼‰ã€‚\n\n\n### 3 proxyä¸­handerå¯¹è±¡çš„åŸºæœ¬ç”¨æ³•\n\n**vue3.0 å“åº”å¼ç”¨åˆ°çš„æ•è·å™¨ï¼ˆæ¥ä¸‹æ¥ä¼šé‡ç‚¹ä»‹ç»ï¼‰**\n\n**handler.has()**                      ->  **in æ“ä½œç¬¦** çš„æ•æ‰å™¨ã€‚    **(vue3.0 ç”¨åˆ°)**\n**handler.get()**                      ->  **å±æ€§è¯»å–**  æ“ä½œçš„æ•æ‰å™¨ã€‚ **(vue3.0 ç”¨åˆ°)**\n**handler.set()**                      ->  **å±æ€§è®¾ç½®*** æ“ä½œçš„æ•æ‰å™¨ã€‚ **(vue3.0 ç”¨åˆ°)**\n**handler.deleteProperty()**           ->  **delete æ“ä½œç¬¦** çš„æ•æ‰å™¨ã€‚**(vue3.0 ç”¨åˆ°)**\n**handler.ownKeys()**                  ->  **Object.getOwnPropertyNames æ–¹æ³•å’Œ Object.getOwnPropertySymbols æ–¹æ³•**çš„æ•æ‰å™¨ã€‚**(vue3.0 ç”¨åˆ°)**\n\n**vue3.0 å“åº”å¼æ²¡ç”¨åˆ°çš„æ•è·å™¨ï¼ˆæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥ç ”ç©¶ä¸€ä¸‹**ï¼‰\n\n**handler.getPrototypeOf()**           ->  **Object.getPrototypeOf** æ–¹æ³•çš„æ•æ‰å™¨ã€‚\n**handler.setPrototypeOf()**           ->  **Object.setPrototypeOf** æ–¹æ³•çš„æ•æ‰å™¨ã€‚\n**handler.isExtensible()**             ->  **Object.isExtensible** æ–¹æ³•çš„æ•æ‰å™¨ã€‚\n**handler.preventExtensions()**        ->  **Object.preventExtensions** æ–¹æ³•çš„æ•æ‰å™¨ã€‚\n**handler.getOwnPropertyDescriptor()** ->  **Object.getOwnPropertyDescriptor** æ–¹æ³•çš„æ•æ‰å™¨ã€‚\n**handler.defineProperty()**           ->  **Object.defineProperty** æ–¹æ³•çš„æ•æ‰å™¨ã€‚\n**handler.apply()**                    ->  **å‡½æ•°è°ƒç”¨æ“ä½œ** çš„æ•æ‰å™¨ã€‚\n**handler.construct()**                ->  **new æ“ä½œç¬¦**  çš„æ•æ‰å™¨ã€‚\n\n#### â‘  hasæ•è·å™¨\n\n**has(target, propKey)**\n\ntarget:ç›®æ ‡å¯¹è±¡\n\npropKey:å¾…æ‹¦æˆªå±æ€§å\n\nä½œç”¨:  æ‹¦æˆªåˆ¤æ–­targetå¯¹è±¡æ˜¯å¦å«æœ‰å±æ€§propKeyçš„æ“ä½œ\n\næ‹¦æˆªæ“ä½œï¼š **propKey in proxy**;   ä¸åŒ…å«for...inå¾ªç¯\n\nå¯¹åº”Reflect: **Reflect.has(target, propKey)**\n\nğŸŒ°ä¾‹å­ï¼š\n\n````js\nconst handler = {\n    has(target, propKey){\n        /*\n        * åšä½ çš„æ“ä½œ\n        */\n        return propKey in target\n    }\n}\nconst proxy = new Proxy(target, handler)\n\n````\n\n#### â‘¡ getæ•è·å™¨\n\n**get(target, propKey, receiver)**\n\ntarget:ç›®æ ‡å¯¹è±¡\n\npropKey:å¾…æ‹¦æˆªå±æ€§å\n\nreceiver: proxyå®ä¾‹\n\nè¿”å›ï¼š è¿”å›è¯»å–çš„å±æ€§\n\nä½œç”¨ï¼šæ‹¦æˆªå¯¹è±¡å±æ€§çš„è¯»å–\n\næ‹¦æˆªæ“ä½œï¼šproxy[propKey]æˆ–è€…ç‚¹è¿ç®—ç¬¦\n\nå¯¹åº”Reflectï¼š  **Reflect.get(target, propertyKey[, receiver])**       \n\nğŸŒ°ä¾‹å­ï¼š\n\n````js\nconst handler = {\n    get: function(obj, prop) {\n        return prop in obj ? obj[prop] : 'æ²¡æœ‰æ­¤æ°´æœ';\n    }\n}\n\nconst foot = new Proxy({}, handler)\nfoot.apple = 'è‹¹æœ'\nfoot.banana = 'é¦™è•‰';\n\nconsole.log(foot.apple, foot.banana);    /* è‹¹æœ é¦™è•‰ */\nconsole.log('pig' in foot, foot.pig);    /* false æ²¡æœ‰æ­¤æ°´æœ */\n````\n\n**ç‰¹æ®Šæƒ…å†µ**\n\n````js\nconst person = {};\nObject.defineProperty(person, 'age', {\n  value: 18, \n  writable: false,\n  configurable: false\n})\nconst proxPerson = new Proxy(person, {\n  get(target,propKey) {\n    return 20\n    //åº”è¯¥return 18;ä¸èƒ½è¿”å›å…¶ä»–å€¼ï¼Œå¦åˆ™æŠ¥é”™\n  }\n})\nconsole.log( proxPerson.age ) /* ä¼šæŠ¥é”™ */\n````\n\n#### â‘¢ setæ•è·å™¨\n\n**set(target,propKey, value,receiver)**\n\ntarget:ç›®æ ‡å¯¹è±¡\n\npropKey:å¾…æ‹¦æˆªå±æ€§å\n\nvalue:æ–°è®¾ç½®çš„å±æ€§å€¼\n\nreceiver: proxyå®ä¾‹\n\nè¿”å›ï¼šä¸¥æ ¼æ¨¡å¼ä¸‹è¿”å›trueæ“ä½œæˆåŠŸï¼›å¦åˆ™å¤±è´¥ï¼ŒæŠ¥é”™\n\nä½œç”¨ï¼š æ‹¦æˆªå¯¹è±¡çš„å±æ€§èµ‹å€¼æ“ä½œ\n\næ‹¦æˆªæ“ä½œï¼š proxy[propkey] = value\n\nå¯¹åº”Reflectï¼š  **Reflect.set(obj, prop, value, receiver)**       \n\n````js\nlet validator = {\n  set: function(obj, prop, value) {\n    if (prop === 'age') {\n      if (!Number.isInteger(value)) { /* å¦‚æœå¹´é¾„ä¸æ˜¯æ•´æ•° */\n        throw new TypeError('The age is not an integer')\n      }\n      if (value > 200) {  /* è¶…å‡ºæ­£å¸¸çš„å¹´é¾„èŒƒå›´ */\n        throw new RangeError('The age seems invalid')\n      }\n    }\n    obj[prop] = value\n    // è¡¨ç¤ºæˆåŠŸ\n    return true\n  }\n}\nlet person = new Proxy({}, validator)\nperson.age = 100\nconsole.log(person.age)  // 100\nperson.age = 'young'     // æŠ›å‡ºå¼‚å¸¸: Uncaught TypeError: The age is not an integer\nperson.age = 300         // æŠ›å‡ºå¼‚å¸¸: Uncaught RangeError: The age seems invalid\n````\n**å½“å¯¹è±¡çš„å±æ€§writableä¸ºfalseæ—¶ï¼Œè¯¥å±æ€§ä¸èƒ½åœ¨æ‹¦æˆªå™¨ä¸­è¢«ä¿®æ”¹**\n\n````js\nconst person = {};\nObject.defineProperty(person, 'age', {\n    value: 18,\n    writable: false,\n    configurable: true,\n});\n\nconst handler = {\n    set: function(obj, prop, value, receiver) {\n        return Reflect.set(...arguments);\n    },\n};\nconst proxy = new Proxy(person, handler);\nproxy.age = 20;\nconsole.log(person) // {age: 18} è¯´æ˜ä¿®æ”¹å¤±è´¥\n````\n\n\n#### â‘£ deleteProperty æ•è·å™¨\n\n**deleteProperty(target, propKey)**\n\ntarget:ç›®æ ‡å¯¹è±¡\n\npropKey:å¾…æ‹¦æˆªå±æ€§å\n\nè¿”å›ï¼šä¸¥æ ¼æ¨¡å¼ä¸‹åªæœ‰è¿”å›true, å¦åˆ™æŠ¥é”™\n\nä½œç”¨ï¼š æ‹¦æˆªåˆ é™¤targetå¯¹è±¡çš„propKeyå±æ€§çš„æ“ä½œ\n\næ‹¦æˆªæ“ä½œï¼š delete proxy[propKey]\n\nå¯¹åº”Reflectï¼š  **Reflect.delete(obj, prop)**     \n\n````js\n\nvar foot = { apple: 'è‹¹æœ' , banana:'é¦™è•‰'  }\nvar proxy = new Proxy(foot, {\n  deleteProperty(target, prop) {\n    console.log('å½“å‰åˆ é™¤æ°´æœ :',target[prop])\n    return delete target[prop]\n  }\n});\ndelete proxy.apple\nconsole.log(foot)\n\n/*\nè¿è¡Œç»“æœï¼š\n'å½“å‰åˆ é™¤æ°´æœ : è‹¹æœ'\n{  banana:'é¦™è•‰'  }\n*/\n````\n**ç‰¹æ®Šæƒ…å†µï¼š å±æ€§æ˜¯ä¸å¯é…ç½®å±æ€§æ—¶ï¼Œä¸èƒ½åˆ é™¤**\n\n````js\nvar foot = {  apple: 'è‹¹æœ' }\nObject.defineProperty(foot, 'banana', {\n   value: 'é¦™è•‰', \n   configurable: false\n})\nvar proxy = new Proxy(foot, {\n  deleteProperty(target, prop) {\n    return delete target[prop];\n  }\n})\ndelete proxy.banana /* æ²¡æœ‰æ•ˆæœ */\nconsole.log(foot)\n````\n\n#### â‘¤ownKeys æ•è·å™¨\n\n**ownKeys(target)**\n\ntargetï¼šç›®æ ‡å¯¹è±¡\n\nè¿”å›ï¼š æ•°ç»„ï¼ˆæ•°ç»„å…ƒç´ å¿…é¡»æ˜¯å­—ç¬¦æˆ–è€…Symbol,å…¶ä»–ç±»å‹æŠ¥é”™ï¼‰\n\nä½œç”¨ï¼š æ‹¦æˆªè·å–é”®å€¼çš„æ“ä½œ\n\næ‹¦æˆªæ“ä½œï¼š\n\n**1 Object.getOwnPropertyNames(proxy)**\n\n**2 Object.getOwnPropertySymbols(proxy)**\n\n**3 Object.keys(proxy)**\n\n**4 for...in...å¾ªç¯**\n\nå¯¹åº”Reflectï¼š**Reflect.ownKeys()**\n\n\n ````js\nvar obj = { a: 10, [Symbol.for('foo')]: 2 };\nObject.defineProperty(obj, 'c', {\n    value: 3, \n    enumerable: false\n})\nvar p = new Proxy(obj, {\n  ownKeys(target) {\n    return [...Reflect.ownKeys(target), 'b', Symbol.for('bar')]\n  }\n})\nconst keys = Object.keys(p)  // ['a']\n// è‡ªåŠ¨è¿‡æ»¤æ‰Symbol/éè‡ªèº«/ä¸å¯éå†çš„å±æ€§\n\n/* å’ŒObject.keys()è¿‡æ»¤æ€§è´¨ä¸€æ ·ï¼Œåªè¿”å›targetæœ¬èº«çš„å¯éå†å±æ€§ */\nfor(let prop in p) { \n  console.log('prop-',prop) /* prop-a */\n}\n\n/* åªè¿”å›æ‹¦æˆªå™¨è¿”å›çš„éSymbolçš„å±æ€§ï¼Œä¸ç®¡æ˜¯ä¸æ˜¯targetä¸Šçš„å±æ€§ */\nconst ownNames = Object.getOwnPropertyNames(p)  /* ['a', 'c', 'b'] */\n\n/* åªè¿”å›æ‹¦æˆªå™¨è¿”å›çš„Symbolçš„å±æ€§ï¼Œä¸ç®¡æ˜¯ä¸æ˜¯targetä¸Šçš„å±æ€§*/\nconst ownSymbols = Object.getOwnPropertySymbols(p)// [Symbol(foo), Symbol(bar)]\n\n/*è¿”å›æ‹¦æˆªå™¨è¿”å›çš„æ‰€æœ‰å€¼*/\nconst ownKeys = Reflect.ownKeys(p)\n// ['a','c',Symbol(foo),'b',Symbol(bar)]\n\n ````\n\n\n## äºŒ vue3.0 å¦‚ä½•å»ºç«‹å“åº”å¼\n\nvue3.0 å»ºç«‹å“åº”å¼çš„æ–¹æ³•æœ‰ä¸¤ç§ï¼š\nç¬¬ä¸€ä¸ªå°±æ˜¯è¿ç”¨composition-apiä¸­çš„reactiveç›´æ¥æ„å»ºå“åº”å¼ï¼Œcomposition-apiçš„å‡ºç°æˆ‘ä»¬å¯ä»¥åœ¨.vueæ–‡ä»¶ä¸­ï¼Œç›´æ¥ç”¨setup()å‡½æ•°æ¥å¤„ç†ä¹‹å‰çš„å¤§éƒ¨åˆ†é€»è¾‘ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬æ²¡æœ‰å¿…è¦åœ¨ export default{ } ä¸­åœ¨å£°æ˜ç”Ÿå‘½å‘¨æœŸ ï¼Œ data(){} å‡½æ•°ï¼Œwatch{} , computed{} ç­‰ ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯æˆ‘ä»¬åœ¨setupå‡½æ•°ä¸­ï¼Œç”¨vue3.0 reactive watch ç”Ÿå‘½å‘¨æœŸapiæ¥åˆ°è¾¾åŒæ ·çš„æ•ˆæœï¼Œè¿™æ ·å°±åƒreact-hooksä¸€æ ·æå‡ä»£ç çš„å¤ç”¨ç‡ï¼Œé€»è¾‘æ€§æ›´å¼ºã€‚\n\nç¬¬äºŒä¸ªå°±æ˜¯ç”¨ä¼ ç»Ÿçš„ data(){ return{} } å½¢å¼ ,vue3.0æ²¡æœ‰æ”¾å¼ƒå¯¹vue2.0å†™æ³•çš„æ”¯æŒï¼Œè€Œæ˜¯å¯¹vue2.0çš„å†™æ³•æ˜¯å®Œå…¨å…¼å®¹çš„ï¼Œæä¾›äº†**applyOptions** æ¥å¤„ç†optionså½¢å¼çš„vueç»„ä»¶ã€‚ä½†æ˜¯optionsé‡Œé¢çš„data , watch , computedç­‰å¤„ç†é€»è¾‘ï¼Œè¿˜æ˜¯ç”¨äº†composition-apiä¸­çš„APIå¯¹åº”å¤„ç†ã€‚\n\n### 1 composition-api  reactive\n\nReactive ç›¸å½“äºå½“å‰çš„ Vue.observable () APIï¼Œç»è¿‡reactiveå¤„ç†åçš„å‡½æ•°èƒ½å˜æˆå“åº”å¼çš„æ•°æ®ï¼Œç±»ä¼¼äºoption apié‡Œé¢çš„vueå¤„ç†dataå‡½æ•°çš„è¿”å›å€¼ã€‚\n\næˆ‘ä»¬ç”¨ä¸€ä¸ªtodoListçš„demoè¯•ç€å°å°é²œã€‚\n````js\n\nconst { reactive , onMounted } = Vue\nsetup(){\n    const state = reactive({\n        count:0,\n        todoList:[]\n    })\n    /* ç”Ÿå‘½å‘¨æœŸmounted */\n    onMounted(() => {\n       console.log('mounted')\n    })\n    /* å¢åŠ countæ•°é‡ */\n    function add(){\n        state.count++\n    } \n    /* å‡å°‘countæ•°é‡ */\n    function del(){\n        state.count--\n    }\n    /* æ·»åŠ ä»£åŠäº‹é¡¹ */\n    function addTodo(id,title,content){\n        state.todoList.push({\n            id,\n            title,\n            content,\n            done:false\n        })\n    }\n    /* å®Œæˆä»£åŠäº‹é¡¹ */\n    function complete(id){\n        for(let i = 0; i< state.todoList.length; i++){\n            const currentTodo = state.todoList[i] \n            if(id === currentTodo.id){\n                state.todoList[i] = {\n                    ...currentTodo,\n                    done:true\n                } \n                break\n            }\n        }\n    }\n    return {\n        state,\n        add,\n        del,\n        addTodo,\n        complete\n    }\n}\n\n````\n\n### 2 options data\n\noptionså½¢å¼çš„å’Œvue2.0å¹¶æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«\n\n````js\nexport default {\n    data(){\n        return{\n            count:0,\n            todoList:[] \n        }\n    },\n    mounted(){\n        console.log('mounted')\n    }\n    methods:{\n        add(){\n            this.count++\n        },\n        del(){\n            this.count--\n        },\n        addTodo(id,title,content){\n           this.todoList.push({\n               id,\n               title,\n               content,\n               done:false\n           })\n        },\n        complete(id){\n            for(let i = 0; i< this.todoList.length; i++){\n                const currentTodo = this.todoList[i] \n                if(id === currentTodo.id){\n                    this.todoList[i] = {\n                        ...currentTodo,\n                        done:true\n                    } \n                    break\n                }\n            }\n        }\n    }\n}\n\n````\n\n## ä¸‰ å“åº”å¼åŸç†åˆæ¢\n\n### ä¸åŒç±»å‹çš„Reactive\nvue3.0å¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€æ±‚å¼•è¿›ä¸åŒçš„APIæ–¹æ³•ã€‚è¿™é‡Œéœ€è¦\n\n#### â‘  reactive\n\nå»ºç«‹å“åº”å¼reactiveï¼Œè¿”å›proxyå¯¹è±¡ï¼Œè¿™ä¸ªreactiveå¯ä»¥æ·±å±‚æ¬¡é€’å½’ï¼Œä¹Ÿå°±æ˜¯å¦‚æœå‘ç°å±•å¼€çš„å±æ€§å€¼æ˜¯**å¼•ç”¨ç±»å‹**çš„è€Œä¸”è¢«**å¼•ç”¨**ï¼Œè¿˜ä¼šç”¨reactive**é€’å½’å¤„ç†**ã€‚è€Œä¸”å±æ€§æ˜¯å¯ä»¥è¢«ä¿®æ”¹çš„ã€‚\n\n#### â‘¡ shallowReactive\n\nå»ºç«‹å“åº”å¼shallowReactiveï¼Œè¿”å›proxyå¯¹è±¡ã€‚å’Œreactiveçš„åŒºåˆ«æ˜¯åªå»ºç«‹ä¸€å±‚çš„å“åº”å¼ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœå‘ç°å±•å¼€å±æ€§æ˜¯**å¼•ç”¨ç±»å‹**ä¹Ÿä¸ä¼š**é€’å½’**ã€‚\n\n#### â‘¢ readonly\n\nè¿”å›çš„proxyå¤„ç†çš„å¯¹è±¡ï¼Œå¯ä»¥å±•å¼€é€’å½’å¤„ç†ï¼Œä½†æ˜¯å±æ€§æ˜¯åªè¯»çš„ï¼Œä¸èƒ½ä¿®æ”¹ã€‚å¯ä»¥åšpropsä¼ é€’ç»™å­ç»„ä»¶ä½¿ç”¨ã€‚\n\n#### â‘£ shallowReadonly\n\nè¿”å›ç»è¿‡å¤„ç†çš„proxyå¯¹è±¡ï¼Œä½†æ˜¯å»ºç«‹å“åº”å¼å±æ€§æ˜¯åªè¯»çš„ï¼Œä¸å±•å¼€å¼•ç”¨ä¹Ÿä¸é€’å½’è½¬æ¢ï¼Œå¯ä»¥è¿™ç”¨äºä¸ºæœ‰çŠ¶æ€ç»„ä»¶åˆ›å»ºpropsä»£ç†å¯¹è±¡ã€‚\n\n### å‚¨å­˜å¯¹è±¡ä¸proxy\n\nä¸Šæ–‡ä¸­æˆ‘ä»¬æåŠåˆ°ã€‚ç”¨Reactiveå¤„ç†è¿‡å¹¶è¿”å›çš„å¯¹è±¡æ˜¯ä¸€ä¸ªproxyå¯¹è±¡ï¼Œå‡è®¾å­˜åœ¨å¾ˆå¤šç»„ä»¶ï¼Œæˆ–è€…åœ¨ä¸€ä¸ªç»„ä»¶ä¸­è¢«å¤šæ¬¡reactiveï¼Œå°±ä¼šæœ‰å¾ˆå¤šå¯¹proxyå¯¹è±¡å’Œå®ƒä»£ç†çš„åŸå¯¹è±¡ã€‚ä¸ºäº†èƒ½æŠŠproxyå¯¹è±¡å’ŒåŸå¯¹è±¡å»ºç«‹å…³ç³»ï¼Œvue3.0é‡‡ç”¨äº†WeakMapå»å‚¨å­˜è¿™äº›å¯¹è±¡å…³ç³»ã€‚WeakMaps ä¿æŒäº†å¯¹é”®åæ‰€å¼•ç”¨çš„å¯¹è±¡çš„å¼±å¼•ç”¨ï¼Œå³åƒåœ¾å›æ”¶æœºåˆ¶ä¸å°†è¯¥å¼•ç”¨è€ƒè™‘åœ¨å†…ã€‚åªè¦æ‰€å¼•ç”¨çš„å¯¹è±¡çš„å…¶ä»–å¼•ç”¨éƒ½è¢«æ¸…é™¤ï¼Œåƒåœ¾å›æ”¶æœºåˆ¶å°±ä¼šé‡Šæ”¾è¯¥å¯¹è±¡æ‰€å ç”¨çš„å†…å­˜ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€æ—¦ä¸å†éœ€è¦ï¼ŒWeakMap é‡Œé¢çš„é”®åå¯¹è±¡å’Œæ‰€å¯¹åº”çš„é”®å€¼å¯¹ä¼šè‡ªåŠ¨æ¶ˆå¤±ï¼Œä¸ç”¨æ‰‹åŠ¨åˆ é™¤å¼•ç”¨ã€‚\n\n\n````js\nconst rawToReactive = new WeakMap<any, any>()\nconst reactiveToRaw = new WeakMap<any, any>()\nconst rawToReadonly = new WeakMap<any, any>() /* åªè¯»çš„ */\nconst readonlyToRaw = new WeakMap<any, any>() /* åªè¯»çš„ */\n````\n\nvue3.0 ç”¨readonlyæ¥è®¾ç½®è¢«æ‹¦æˆªå™¨æ‹¦æˆªçš„å¯¹è±¡èƒ½å¦è¢«ä¿®æ”¹ï¼Œå¯ä»¥æ»¡è¶³ä¹‹å‰çš„propsä¸èƒ½è¢«ä¿®æ”¹çš„å•å‘æ•°æ®æµåœºæ™¯ã€‚\næˆ‘ä»¬æ¥ä¸‹æ¥é‡ç‚¹è®²ä¸€ä¸‹æ¥ä¸‹æ¥çš„å››ä¸ªweakMapçš„å‚¨å­˜å…³ç³»ã€‚\n\n**rawToReactive**\n\né”®å€¼å¯¹ ï¼š { [targetObject] : obseved  } \n\ntargetï¼ˆé”®ï¼‰:ç›®æ ‡å¯¹è±¡å€¼(è¿™é‡Œå¯ä»¥ç†è§£ä¸º**reactive**çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚)\nobseredï¼ˆå€¼ï¼‰:ç»è¿‡proxyä»£ç†ä¹‹åçš„proxyå¯¹è±¡ã€‚ \n\n**reactiveToRaw**\nreactiveToRaw å‚¨å­˜çš„åˆšå¥½ä¸ rawToReactiveçš„é”®å€¼å¯¹æ˜¯ç›¸åçš„ã€‚\né”®å€¼å¯¹ { [obseved] : targetObject }\n\n\n**rawToReadonly**\n\né”®å€¼å¯¹ ï¼š { [target] : obseved  } \n\ntargetï¼ˆé”®ï¼‰ï¼šç›®æ ‡å¯¹è±¡ã€‚\nobseredï¼ˆå€¼ï¼‰:ç»è¿‡proxyä»£ç†ä¹‹åçš„åªè¯»å±æ€§çš„proxyå¯¹è±¡ã€‚ \n\n**readonlyToRaw**\nå‚¨å­˜çŠ¶æ€ä¸rawToReadonlyåˆšå¥½ç›¸åã€‚\n\n\n### reactiveå…¥å£è§£æ \næ¥ä¸‹æ¥æˆ‘ä»¬é‡ç‚¹ä»reactiveå¼€å§‹è®²ã€‚\n\n#### reactive({ ...object }) å…¥å£\n\n````js\n/* TODO: */\nexport function reactive(target: object) {\n  if (readonlyToRaw.has(target)) {\n    return target\n  }\n  return createReactiveObject(\n    target,                   /* ç›®æ ‡å¯¹è±¡ */\n    rawToReactive,            /* { [targetObject] : obseved  }   */\n    reactiveToRaw,            /* { [obseved] : targetObject }  */\n    mutableHandlers,          /* å¤„ç† åŸºæœ¬æ•°æ®ç±»å‹ å’Œ å¼•ç”¨æ•°æ®ç±»å‹ */\n    mutableCollectionHandlers /* ç”¨äºå¤„ç† Set, Map, WeakMap, WeakSet ç±»å‹ */\n  )\n}\n````\n**reactive**å‡½æ•°çš„ä½œç”¨å°±æ˜¯é€šè¿‡createReactiveObjectæ–¹æ³•äº§ç”Ÿä¸€ä¸ªproxy,è€Œä¸”é’ˆå¯¹ä¸åŒçš„æ•°æ®ç±»å‹ç»™å®šäº†ä¸åŒçš„å¤„ç†æ–¹æ³•ã€‚\n\n\n#### createReactiveObject\nä¹‹å‰è¯´åˆ°çš„createReactiveObjectï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥çœ‹çœ‹createReactiveObjectå‘ç”Ÿäº†ä»€ä¹ˆã€‚\n\n````js\nconst collectionTypes = new Set<Function>([Set, Map, WeakMap, WeakSet])\nfunction createReactiveObject(\n  target: unknown,\n  toProxy: WeakMap<any, any>,\n  toRaw: WeakMap<any, any>,\n  baseHandlers: ProxyHandler<any>,\n  collectionHandlers: ProxyHandler<any>\n) {\n  /* åˆ¤æ–­ç›®æ ‡å¯¹è±¡æ˜¯å¦è¢«effect */\n  /* observed ä¸ºç»è¿‡ new Proxyä»£ç†çš„å‡½æ•° */\n  let observed = toProxy.get(target) /* { [target] : obseved  } */\n  if (observed !== void 0) { /* å¦‚æœç›®æ ‡å¯¹è±¡å·²ç»è¢«å“åº”å¼å¤„ç†ï¼Œé‚£ä¹ˆç›´æ¥è¿”å›proxyçš„observedå¯¹è±¡ */\n    return observed\n  }\n  if (toRaw.has(target)) { /* { [observed] : target  } */\n    return target\n  }\n  /* å¦‚æœç›®æ ‡å¯¹è±¡æ˜¯ Set, Map, WeakMap, WeakSet ç±»å‹ï¼Œé‚£ä¹ˆ handerå‡½æ•°æ˜¯ collectionHandlers å¦ä¾§ç›®æ ‡å‡½æ•°æ˜¯baseHandlers */\n  const handlers = collectionTypes.has(target.constructor)\n    ? collectionHandlers\n    : baseHandlers\n   /* TODO: åˆ›å»ºå“åº”å¼å¯¹è±¡  */\n  observed = new Proxy(target, handlers)\n  /* target å’Œ observed å»ºç«‹å…³è” */\n  toProxy.set(target, observed)\n  toRaw.set(observed, target)\n  /* è¿”å›observedå¯¹è±¡ */\n  return observed\n}\n````\n\n\né€šè¿‡ä¸Šé¢æºç åˆ›å»ºproxyå¯¹è±¡çš„å¤§è‡´æµç¨‹æ˜¯è¿™æ ·çš„ï¼š\nâ‘ é¦–å…ˆåˆ¤æ–­ç›®æ ‡å¯¹è±¡æœ‰æ²¡æœ‰è¢«proxyå“åº”å¼ä»£ç†è¿‡ï¼Œå¦‚æœæ˜¯é‚£ä¹ˆç›´æ¥è¿”å›å¯¹è±¡ã€‚\nâ‘¡ç„¶åé€šè¿‡åˆ¤æ–­ç›®æ ‡å¯¹è±¡æ˜¯å¦æ˜¯[ Set, Map, WeakMap, WeakSet  ]æ•°æ®ç±»å‹æ¥é€‰æ‹©æ˜¯ç”¨**collectionHandlers** ï¼Œ è¿˜æ˜¯**baseHandlers->å°±æ˜¯reactiveä¼ è¿›æ¥çš„mutableHandlers**ä½œä¸ºproxyçš„handerå¯¹è±¡ã€‚\nâ‘¢æœ€åé€šè¿‡çœŸæ­£ä½¿ç”¨new proxyæ¥åˆ›å»ºä¸€ä¸ªobserved ï¼Œç„¶åé€šè¿‡rawToReactive reactiveToRaw ä¿å­˜ targetå’Œobservedé”®å€¼å¯¹ã€‚\n\nå¤§è‡´æµç¨‹å›¾ï¼š\n\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/2020080915460594.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3psX0FsaWVu,size_16,color_FFFFFF,t_70)\n\n\n\n\n## å›› æ‹¦æˆªå™¨å¯¹è±¡baseHandlers -> mutableHandlers\n\n\nä¹‹å‰æˆ‘ä»¬ä»‹ç»è¿‡baseHandlerså°±æ˜¯è°ƒç”¨reactiveæ–¹æ³•createReactiveObjectä¼ è¿›æ¥çš„mutableHandlerså¯¹è±¡ã€‚\næˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹mutableHandlerså¯¹è±¡\n\n**mutableHandlers**\n\n### æ‹¦æˆªå™¨çš„ä½œç”¨åŸŸ\n\n````ts\nexport const mutableHandlers: ProxyHandler<object> = {\n  get,\n  set,\n  deleteProperty,\n  has,\n  ownKeys\n}\n````\nvue3.0 ç”¨åˆ°äº†ä»¥ä¸Šå‡ ä¸ªæ‹¦æˆªå™¨ï¼Œæˆ‘ä»¬åœ¨ä¸ŠèŠ‚å·²ç»ä»‹ç»äº†è¿™å‡ ä¸ªæ‹¦æˆªå™¨çš„åŸºæœ¬ç”¨æ³•,é¦–å…ˆæˆ‘ä»¬å¯¹å‡ ä¸ªåŸºæœ¬ç”¨åˆ°çš„æ‹¦æˆªå™¨åœ¨åšä¸€ä¸‹å›é¡¾ã€‚\n\nâ‘ get,å¯¹æ•°æ®çš„è¯»å–å±æ€§è¿›è¡Œæ‹¦æˆªï¼ŒåŒ…æ‹¬ target.ç‚¹è¯­æ³•  å’Œ target[]\n\nâ‘¡setï¼Œå¯¹æ•°æ®çš„å­˜å…¥å±æ€§è¿›è¡Œæ‹¦æˆª ã€‚\n\nâ‘¢deleteProperty deleteæ“ä½œç¬¦è¿›è¡Œæ‹¦æˆªã€‚\n\n**vue2.0**ä¸èƒ½å¯¹å¯¹è±¡çš„**deleteæ“ä½œç¬¦**è¿›è¡Œå±æ€§æ‹¦æˆªã€‚\n\nä¾‹å­ğŸŒ°ï¼š \n````js\ndelete object.a\n````\næ˜¯æ— æ³•ç›‘æµ‹åˆ°çš„ã€‚\n\n**vue3.0**proxyä¸­**deleteProperty** å¯ä»¥æ‹¦æˆª **delete æ“ä½œç¬¦**ï¼Œè¿™å°±è¡¨è¿°vue3.0å“åº”å¼å¯ä»¥ç›‘å¬åˆ°å±æ€§çš„åˆ é™¤æ“ä½œã€‚\n\nâ‘£hasï¼Œå¯¹ in æ“ä½œç¬¦è¿›è¡Œå±æ€§æ‹¦æˆªã€‚\n\n**vue2.0**ä¸èƒ½å¯¹å¯¹è±¡çš„**inæ“ä½œç¬¦**è¿›è¡Œå±æ€§æ‹¦æˆªã€‚\n\nä¾‹å­ \n````js\na in object\n````\nhas æ˜¯ä¸ºäº†è§£å†³å¦‚ä¸Šé—®é¢˜ã€‚è¿™å°±è¡¨ç¤ºäº†vue3.0å¯ä»¥å¯¹ **in æ“ä½œç¬¦** è¿›è¡Œæ‹¦æˆªã€‚\n\nâ‘¤ownKeys **Object.keys(proxy)** ,**for...in...å¾ªç¯** **Object.getOwnPropertySymbols(proxy)** ï¼Œ **Object.getOwnPropertyNames(proxy)** æ‹¦æˆªå™¨\n\nä¾‹å­ \n````js\nObject.keys(object)\n````\nè¯´æ˜vue3.0å¯ä»¥å¯¹ä»¥ä¸Šè¿™äº›æ–¹æ³•è¿›è¡Œæ‹¦æˆªã€‚\n\n## äº” ç»„ä»¶åˆå§‹åŒ–é˜¶æ®µ\n\n\nå¦‚æœæˆ‘ä»¬æƒ³è¦å¼„æ˜ç™½æ•´ä¸ªå“åº”å¼åŸç†ã€‚é‚£ä¹ˆç»„ä»¶åˆå§‹åŒ–ï¼Œåˆ°åˆå§‹åŒ–è¿‡ç¨‹ä¸­composition-apiçš„reactiveå¤„ç†dataï¼Œä»¥åŠç¼–è¯‘é˜¶æ®µå¯¹dataå±æ€§è¿›è¡Œä¾èµ–æ”¶é›†æ˜¯åˆ†ä¸å¼€çš„ã€‚vue3.0æä¾›äº†ä¸€å¥—ä»åˆå§‹åŒ–ï¼Œåˆ°renderè¿‡ç¨‹ä¸­ä¾èµ–æ”¶é›†ï¼Œåˆ°ç»„ä»¶æ›´æ–°,åˆ°ç»„ä»¶é”€æ¯å®Œæ•´å“åº”å¼ä½“ç³»ï¼Œæˆ‘ä»¬å¾ˆéš¾ä»ä¸€ä¸ªè§’åº¦æŠŠä¸œè¥¿è®²æ˜ç™½ï¼Œæ‰€ä»¥åœ¨æ­£å¼è®²æ‹¦æˆªå™¨å¯¹è±¡å¦‚ä½•æ”¶é›†ä¾èµ–ï¼Œæ´¾å‘æ›´æ–°ä¹‹å‰ï¼Œæˆ‘ä»¬çœ‹çœ‹effectåšäº†äº›ä»€ä¹ˆæ“ä½œã€‚\n\n\n### 1 effect -> æ–°çš„æ¸²æŸ“watcher\n\nvue3.0ç”¨effectå‰¯ä½œç”¨é’©å­æ¥ä»£æ›¿vue2.0watcherã€‚æˆ‘ä»¬éƒ½çŸ¥é“åœ¨vue2.0ä¸­ï¼Œæœ‰æ¸²æŸ“watcherä¸“é—¨è´Ÿè´£æ•°æ®å˜åŒ–åçš„ä»æ–°æ¸²æŸ“è§†å›¾ã€‚vue3.0æ”¹ç”¨effectæ¥ä»£æ›¿watcherè¾¾åˆ°åŒæ ·çš„æ•ˆæœã€‚\n\næˆ‘ä»¬å…ˆç®€å•ä»‹ç»ä¸€ä¸‹mountComponentæµç¨‹ï¼Œåé¢çš„æ–‡ç« ä¼šè¯¦ç»†ä»‹ç»mounté˜¶æ®µçš„\n#### 1 mountComponent åˆå§‹åŒ–mountComponent\n\n````js\n  // åˆå§‹åŒ–ç»„ä»¶\n  const mountComponent: MountComponentFn = (\n    initialVNode,\n    container,\n    anchor,\n    parentComponent,\n    parentSuspense,\n    isSVG,\n    optimized\n  ) => {\n    /* ç¬¬ä¸€æ­¥: åˆ›å»ºcomponent å®ä¾‹   */\n    const instance: ComponentInternalInstance = (initialVNode.component = createComponentInstance(\n      initialVNode,\n      parentComponent,\n      parentSuspense\n    ))\n\n    /* ç¬¬äºŒæ­¥ ï¼š TODO:åˆå§‹åŒ– åˆå§‹åŒ–ç»„ä»¶,å»ºç«‹proxy , æ ¹æ®å­—ç¬¦çªœæ¨¡ç‰ˆå¾—åˆ° */\n    setupComponent(instance)\n    /* ç¬¬ä¸‰æ­¥ï¼šå»ºç«‹ä¸€ä¸ªæ¸²æŸ“effectï¼Œæ‰§è¡Œeffect */\n    setupRenderEffect(\n      instance,     // ç»„ä»¶å®ä¾‹\n      initialVNode, //vnode  \n      container,    // å®¹å™¨å…ƒç´ \n      anchor,\n      parentSuspense,\n      isSVG,\n      optimized\n    )   \n  }\n````\nä¸Šé¢æ˜¯æ•´ä¸ªmountComponentçš„ä¸»è¦åˆ†ä¸ºäº†ä¸‰æ­¥ï¼Œæˆ‘ä»¬è¿™é‡Œåˆ†åˆ«ä»‹ç»ä¸€ä¸‹æ¯ä¸ªæ­¥éª¤å¹²äº†ä»€ä¹ˆï¼š\n**â‘  ç¬¬ä¸€æ­¥: åˆ›å»ºcomponent å®ä¾‹ ã€‚**\n**â‘¡ ç¬¬äºŒæ­¥ï¼šåˆå§‹åŒ–ç»„ä»¶,å»ºç«‹proxy ,æ ¹æ®å­—ç¬¦çªœæ¨¡ç‰ˆå¾—åˆ°renderå‡½æ•°ã€‚ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°å¤„ç†ç­‰ç­‰**\n**â‘¢ ç¬¬ä¸‰æ­¥ï¼šå»ºç«‹ä¸€ä¸ªæ¸²æŸ“effectï¼Œæ‰§è¡Œeffectã€‚**\n\nä»å¦‚ä¸Šæ–¹æ³•ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨**setupComponent**å·²ç»æ„å»ºäº†å“åº”å¼å¯¹è±¡ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰**åˆå§‹åŒ–æ”¶é›†ä¾èµ–**ã€‚\n\n\n#### 2 setupRenderEffect æ„å»ºæ¸²æŸ“effect \n\n````js\n const setupRenderEffect: SetupRenderEffectFn = (\n    instance,\n    initialVNode,\n    container,\n    anchor,\n    parentSuspense,\n    isSVG,\n    optimized\n  ) => {\n    /* åˆ›å»ºä¸€ä¸ªæ¸²æŸ“ effect */\n    instance.update = effect(function componentEffect() {\n      //...çœå»çš„å†…å®¹åé¢ä¼šè®²åˆ°\n    },{ scheduler: queueJob })\n  }\n````\n**ä¸ºäº†è®©å¤§å®¶æ›´æ¸…æ¥šçš„æ˜ç™½å“åº”å¼åŸç†ï¼Œæˆ‘è¿™åªä¿ç•™äº†å’Œå“åº”å¼åŸç†æœ‰å…³ç³»çš„éƒ¨åˆ†ä»£ç ã€‚**\n\n**setupRenderEffectçš„ä½œç”¨**\n\n**â‘  åˆ›å»ºä¸€ä¸ªeffectï¼Œå¹¶æŠŠå®ƒèµ‹å€¼ç»™ç»„ä»¶å®ä¾‹çš„updateæ–¹æ³•ï¼Œä½œä¸ºæ¸²æŸ“æ›´æ–°è§†å›¾ç”¨ã€‚**\n**â‘¡ componentEffectä½œä¸ºå›è°ƒå‡½æ•°å½¢å¼ä¼ é€’ç»™effectä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°**\n\n#### 3 effectåšäº†äº›ä»€ä¹ˆ\n\n````js\nexport function effect<T = any>(\n  fn: () => T,\n  options: ReactiveEffectOptions = EMPTY_OBJ\n): ReactiveEffect<T> {\n  const effect = createReactiveEffect(fn, options)\n  /* å¦‚æœä¸æ˜¯æ‡’åŠ è½½ ç«‹å³æ‰§è¡Œ effectå‡½æ•° */\n  if (!options.lazy) {\n    effect()\n  }\n  return effect\n}\n````\n**effectä½œç”¨å¦‚ä¸‹**\n\n**â‘  é¦–å…ˆè°ƒç”¨ã€‚createReactiveEffect**\n**â‘¡ å¦‚æœä¸æ˜¯æ‡’åŠ è½½ ç«‹å³æ‰§è¡Œ ç”±createReactiveEffectåˆ›å»ºå‡ºæ¥çš„ReactiveEffectå‡½æ•°**\n\n#### 4 ReactiveEffect\n\n````js\nfunction createReactiveEffect<T = any>(\n  fn: (...args: any[]) => T, /**å›è°ƒå‡½æ•° */\n  options: ReactiveEffectOptions\n): ReactiveEffect<T> {\n  const effect = function reactiveEffect(...args: unknown[]): unknown {\n    try {\n        enableTracking()\n        effectStack.push(effect) //å¾€effectæ•°ç»„ä¸­é‡Œæ”¾å…¥å½“å‰ effect\n        activeEffect = effect //TODO: effect èµ‹å€¼ç»™å½“å‰çš„ activeEffect\n        return fn(...args) //TODO:    fn ä¸ºeffectä¼ è¿›æ¥ componentEffect\n      } finally {\n        effectStack.pop() //å®Œæˆä¾èµ–æ”¶é›†åä»effectæ•°ç»„åˆ æ‰è¿™ä¸ª effect\n        resetTracking() \n        /* å°†activeEffectè¿˜åŸåˆ°ä¹‹å‰çš„effect */\n        activeEffect = effectStack[effectStack.length - 1]\n    }\n  } as ReactiveEffect\n  /* é…ç½®ä¸€ä¸‹åˆå§‹åŒ–å‚æ•° */\n  effect.id = uid++\n  effect._isEffect = true\n  effect.active = true\n  effect.raw = fn\n  effect.deps = [] /* TODO:ç”¨äºæ”¶é›†ç›¸å…³ä¾èµ– */\n  effect.options = options\n  return effect\n}\n````\ncreateReactiveEffect\n\n**createReactiveEffect**çš„ä½œç”¨ä¸»è¦æ˜¯é…ç½®äº†ä¸€äº›åˆå§‹åŒ–çš„å‚æ•°ï¼Œç„¶ååŒ…è£…äº†ä¹‹å‰ä¼ è¿›æ¥çš„fnï¼Œ**é‡è¦çš„ä¸€ç‚¹æ˜¯æŠŠå½“å‰çš„effectèµ‹å€¼ç»™äº†activeEffect,è¿™ä¸€ç‚¹éå¸¸é‡è¦ï¼Œå’Œæ”¶é›†ä¾èµ–æœ‰ç€ç›´æ¥çš„å…³ç³»**\n\n\n\nåœ¨è¿™é‡Œç•™ä¸‹äº†ä¸€ä¸ªç–‘ç‚¹ï¼Œ\n\n**â‘ ä¸ºä»€ä¹ˆè¦ç”¨effectStackæ•°ç»„æ¥å­˜æ”¾è¿™é‡Œeffect**\n\n### æ€»ç»“\n\næˆ‘ä»¬è¿™é‡Œä¸ªå“åº”å¼åˆå§‹åŒ–é˜¶æ®µè¿›è¡Œæ€»ç»“ \n\n**â‘  setupComponentåˆ›å»ºç»„ä»¶ï¼Œè°ƒç”¨composition-api,å¤„ç†optionsï¼ˆæ„å»ºå“åº”å¼ï¼‰å¾—åˆ°Observerå¯¹è±¡ã€‚**\n\n**â‘¡ åˆ›å»ºä¸€ä¸ªæ¸²æŸ“effectï¼Œé‡Œé¢åŒ…è£…äº†çœŸæ­£çš„æ¸²æŸ“æ–¹æ³•componentEffectï¼Œæ·»åŠ ä¸€äº›effectåˆå§‹åŒ–å±æ€§ã€‚**\n\n**â‘¢ ç„¶åç«‹å³æ‰§è¡Œeffectï¼Œç„¶åå°†å½“å‰æ¸²æŸ“effectèµ‹å€¼ç»™activeEffect**\n\næœ€åæˆ‘ä»¬ç”¨ä¸€å¼ å›¾æ¥è§£é‡Šä¸€ä¸‹æ•´ä¸ªæµç¨‹ã€‚\n\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/2020080915560862.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3psX0FsaWVu,size_16,color_FFFFFF,t_70)\n\n## å…­ ä¾èµ–æ”¶é›†ï¼Œgetåšäº†äº›ä»€ä¹ˆï¼Ÿ\n\n### 1 å›å½’mutableHandlersä¸­çš„getæ–¹æ³•\n\n#### 1 ä¸åŒç±»å‹çš„get\n\n````js\n/* æ·±åº¦get */\nconst get = /*#__PURE__*/ createGetter()\n/* æµ…get */\nconst shallowGet = /*#__PURE__*/ createGetter(false, true)\n/* åªè¯»çš„get */\nconst readonlyGet = /*#__PURE__*/ createGetter(true)\n/* åªè¯»çš„æµ…get */\nconst shallowReadonlyGet = /*#__PURE__*/ createGetter(true, true)\n````\nä¸Šé¢æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œå¯¹äºä¹‹å‰è®²çš„å››ç§ä¸åŒçš„å»ºç«‹å“åº”å¼æ–¹æ³•ï¼Œå¯¹åº”äº†å››ç§ä¸åŒçš„get,ä¸‹é¢æ˜¯ä¸€ä¸€å¯¹åº”å…³ç³»ã€‚\n\n**reactive ---------> get**\n\n**shallowReactive --------> shallowGet**\n\n**readonly ----------> readonlyGet**\n \n**shallowReadonly --------------->   shallowReadonlyGet**\n\nå››ç§æ–¹æ³•éƒ½æ˜¯è°ƒç”¨äº†createGetteræ–¹æ³•ï¼Œåªä¸è¿‡æ˜¯å‚æ•°çš„é…ç½®ä¸åŒï¼Œæˆ‘ä»¬è¿™é‡Œé‚£ç¬¬ä¸€ä¸ªgetæ–¹æ³•åšå‚è€ƒï¼Œæ¥ä¸‹æ¥æ¢ç´¢ä¸€ä¸‹createGetterã€‚\n\n#### createGetter\n\n````js\nfunction createGetter(isReadonly = false, shallow = false) {\n  return function get(target: object, key: string | symbol, receiver: object) {\n    const res = Reflect.get(target, key, receiver)\n    /* æµ…é€»è¾‘ */\n    if (shallow) {\n      !isReadonly && track(target, TrackOpTypes.GET, key)\n      return res\n    }\n    /* æ•°æ®ç»‘å®š */\n    !isReadonly && track(target, TrackOpTypes.GET, key)\n    return isObject(res)\n      ? isReadonly\n        ?\n          /* åªè¯»å±æ€§ */\n          readonly(res)\n          /*  */\n        : reactive(res)\n      : res\n  }\n}\n````\nè¿™å°±æ˜¯createGetterä¸»è¦æµç¨‹ï¼Œ**ç‰¹æ®Šçš„æ•°æ®ç±»å‹**å’Œ**ref**æˆ‘ä»¬æš‚æ—¶å…ˆä¸è€ƒè™‘ã€‚\nè¿™é‡Œç”¨äº†ä¸€äº›æµç¨‹åˆ¤æ–­ï¼Œæˆ‘ä»¬ç”¨æµç¨‹å›¾æ¥è¯´æ˜ä¸€ä¸‹è¿™ä¸ªå‡½æ•°ä¸»è¦åšäº†ä»€ä¹ˆï¼Ÿ\n\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/2020080915563418.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3psX0FsaWVu,size_16,color_FFFFFF,t_70)\n\n\n\næˆ‘ä»¬å¯ä»¥å¾—å‡ºç»“è®ºï¼š\n**åœ¨vue2.0çš„æ—¶å€™ã€‚å“åº”å¼æ˜¯åœ¨åˆå§‹åŒ–çš„æ—¶å€™å°±æ·±å±‚æ¬¡é€’å½’å¤„ç†äº†**\nä½†æ˜¯\n\n**ä¸vue2.0ä¸åŒçš„æ˜¯,å³ä¾¿æ˜¯æ·±åº¦å“åº”å¼æˆ‘ä»¬ä¹Ÿåªèƒ½åœ¨è·å–ä¸Šä¸€çº§getä¹‹åæ‰èƒ½è§¦å‘ä¸‹ä¸€çº§çš„æ·±åº¦å“åº”å¼ã€‚**\næ¯”å¦‚\n````js\nsetup(){\n const state = reactive({ a:{ b:{} } })\n return {\n     state\n }\n}\n````\n**åœ¨åˆå§‹åŒ–çš„æ—¶å€™ï¼Œåªæœ‰açš„ä¸€å±‚çº§å»ºç«‹äº†å“åº”å¼ï¼Œbå¹¶æ²¡æœ‰å»ºç«‹å“åº”å¼ï¼Œè€Œå½“æˆ‘ä»¬ç”¨state.açš„æ—¶å€™ï¼Œæ‰ä¼šçœŸæ­£çš„å°†bä¹Ÿåšå“åº”å¼å¤„ç†ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬è®¿é—®äº†ä¸Šä¸€çº§å±æ€§åï¼Œä¸‹ä¸€ä»£å±æ€§æ‰ä¼šçœŸæ­£æ„ä¹‰ä¸Šå»ºç«‹å“åº”å¼**\n\nè¿™æ ·åšå¥½å¤„æ˜¯ï¼Œ\n**1 åˆå§‹åŒ–çš„æ—¶å€™ä¸ç”¨é€’å½’å»å¤„ç†å¯¹è±¡ï¼Œé€ æˆäº†ä¸å¿…è¦çš„æ€§èƒ½å¼€é”€ã€‚**\n**2 æœ‰ä¸€äº›æ²¡æœ‰ç”¨ä¸Šçš„stateï¼Œè¿™é‡Œå°±ä¸éœ€è¦åœ¨æ·±å±‚æ¬¡å“åº”å¼å¤„ç†ã€‚*\n\n### 2 track->ä¾èµ–æ”¶é›†å™¨\n\næˆ‘ä»¬å…ˆæ¥çœ‹çœ‹trackæºç ï¼š\n\n#### trackåšäº†äº›ä»€ä¹ˆ\n````js\n\n/* target å¯¹è±¡æœ¬èº« ï¼Œkeyå±æ€§å€¼  type ä¸º 'GET' */\nexport function track(target: object, type: TrackOpTypes, key: unknown) {\n  /* å½“æ‰“å°æˆ–è€…è·å–å±æ€§çš„æ—¶å€™ console.log(this.a) æ˜¯æ²¡æœ‰activeEffectçš„ å½“å‰è¿”å›å€¼ä¸º0  */\n  let depsMap = targetMap.get(target)\n  if (!depsMap) {\n    /*  target -map-> depsMap  */\n    targetMap.set(target, (depsMap = new Map()))\n  }\n  let dep = depsMap.get(key)\n  if (!dep) {\n    /* key : dep depè§‚å¯Ÿè€… */\n    depsMap.set(key, (dep = new Set()))\n  }\n   /* å½“å‰activeEffect */\n  if (!dep.has(activeEffect)) {\n    /* depæ·»åŠ  activeEffect */\n    dep.add(activeEffect)\n    /* æ¯ä¸ª activeEffectçš„deps å­˜æ”¾å½“å‰çš„dep */\n    activeEffect.deps.push(dep)\n  }\n}\n````\né‡Œé¢ä¸»è¦å¼•å…¥äº†ä¸¤ä¸ªæ¦‚å¿µ **targetMap** å’Œ **depsMap**\n\n**targetMap**\né”®å€¼å¯¹ proxy  :  depsMap \nproxy ï¼š ä¸ºreactiveä»£ç†åçš„ Observerå¯¹è±¡ ã€‚\ndepsMap ï¼šä¸ºå­˜æ”¾ä¾èµ–depçš„ map æ˜ å°„ã€‚\n\n**depsMap**\né”®å€¼å¯¹ï¼škey : deps\nkey ä¸ºå½“å‰getè®¿é—®çš„å±æ€§åï¼Œ\ndeps å­˜æ”¾effectçš„setæ•°æ®ç±»å‹ã€‚\n\n**æˆ‘ä»¬çŸ¥é“trackä½œç”¨å¤§è‡´æ˜¯ï¼Œé¦–å…ˆæ ¹æ® proxyå¯¹è±¡ï¼Œè·å–å­˜æ”¾depsçš„depsMapï¼Œç„¶åé€šè¿‡è®¿é—®çš„å±æ€§åkeyè·å–å¯¹åº”çš„dep,ç„¶åå°†å½“å‰æ¿€æ´»çš„effectå­˜å…¥å½“å‰depæ”¶é›†ä¾èµ–ã€‚**\n\nä¸»è¦ä½œç”¨\n**â‘ æ‰¾åˆ°ä¸å½“å‰proxy å’Œ keyå¯¹åº”çš„depã€‚**\n**â‘¡depä¸å½“å‰activeEffectå»ºç«‹è”ç³»ï¼Œæ”¶é›†ä¾èµ–ã€‚**\n\nä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œ**targetMap** å’Œ **depsMap**çš„å…³ç³»ï¼Œä¸‹é¢æˆ‘ä»¬ç”¨ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜ï¼š\nä¾‹å­ï¼š\nçˆ¶ç»„ä»¶A\n````html\n\n<div id=\"app\" >\n  <span>{{ state.a }}</span>\n  <span>{{ state.b }}</span>\n<div>\n<script>\nconst { createApp, reactive } = Vue\n\n/* å­ç»„ä»¶ */\nconst Children ={\n    template=\"<div> <span>{{ state.c }}</span> </div>\",\n    setup(){\n       const state = reactive({\n          c:1\n       })\n       return {\n           state\n       }\n    }\n}\n/* çˆ¶ç»„ä»¶ */\ncreateApp({\n   component:{\n       Children\n   } \n   setup(){\n       const state = reactive({\n           a:1,\n           b:2\n       })\n       return {\n           state\n       }\n   }\n})mount('#app')\n\n</script>\n\n````\n\næˆ‘ä»¬ç”¨ä¸€å¹…å›¾è¡¨ç¤ºå¦‚ä¸Šå…³ç³»ï¼š\n\n\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200809155701302.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3psX0FsaWVu,size_16,color_FFFFFF,t_70)\n\n\n### æ¸²æŸ“effectå‡½æ•°å¦‚ä½•è§¦å‘get\n\næˆ‘ä»¬åœ¨å‰é¢è¯´è¿‡ï¼Œåˆ›å»ºä¸€ä¸ªæ¸²æŸ“renderEffectï¼Œç„¶åæŠŠèµ‹å€¼ç»™activeEffectï¼Œæœ€åæ‰§è¡ŒrenderEffect ï¼Œåœ¨è¿™ä¸ªæœŸé—´æ˜¯æ€ä¹ˆåšä¾èµ–æ”¶é›†çš„å‘¢ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹,updateå‡½æ•°ä¸­åšäº†ä»€ä¹ˆï¼Œæˆ‘ä»¬å›åˆ°ä¹‹å‰è®²çš„componentEffecté€»è¾‘ä¸Šæ¥\n\n````js\nfunction componentEffect() {\n    if (!instance.isMounted) {\n        let vnodeHook: VNodeHook | null | undefined\n        const { el, props } = initialVNode\n        const { bm, m, a, parent } = instance\n        /* TODO: è§¦å‘instance.renderå‡½æ•°ï¼Œå½¢æˆæ ‘ç»“æ„ */\n        const subTree = (instance.subTree = renderComponentRoot(instance))\n        if (bm) {\n          //è§¦å‘ beforeMountå£°æ˜å‘¨æœŸé’©å­\n          invokeArrayFns(bm)\n        }\n        patch(\n            null,\n            subTree,\n            container,\n            anchor,\n            instance,\n            parentSuspense,\n            isSVG\n        )\n        /* è§¦å‘å£°æ˜å‘¨æœŸ mountedé’©å­ */\n        if (m) {\n          queuePostRenderEffect(m, parentSuspense)\n        }\n        instance.isMounted = true\n      } else {\n        // æ›´æ–°ç»„ä»¶é€»è¾‘\n        // ......\n      }\n}\n\n\n````\n\n**è¿™è¾¹ä»£ç å¤§è‡´é¦–å…ˆä¼šé€šè¿‡renderComponentRootæ–¹æ³•å½¢æˆæ ‘ç»“æ„ï¼Œè¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬åœ¨æœ€åˆmountComponentçš„setupComponentæ–¹æ³•ä¸­ï¼Œå·²ç»é€šè¿‡ç¼–è¯‘æ–¹æ³•compileç¼–è¯‘äº†templateæ¨¡ç‰ˆçš„å†…å®¹ï¼Œstate.a state.bç­‰æŠ½è±¡è¯­æ³•æ ‘ï¼Œæœ€ç»ˆè¿”å›çš„renderå‡½æ•°åœ¨è¿™ä¸ªé˜¶æ®µä¼šè¢«è§¦å‘ï¼Œåœ¨renderå‡½æ•°ä¸­åœ¨æ¨¡ç‰ˆä¸­çš„è¡¨è¾¾å¼ state.a state.b ç‚¹è¯­æ³•ä¼šè¢«æ›¿æ¢æˆdataä¸­çœŸå®çš„å±æ€§ï¼Œè¿™æ—¶å€™å°±è¿›è¡Œäº†çœŸæ­£çš„ä¾èµ–æ”¶é›†ï¼Œè§¦å‘äº†getæ–¹æ³•ã€‚æ¥ä¸‹æ¥å°±æ˜¯è§¦å‘ç”Ÿå‘½å‘¨æœŸ beforeMount ,ç„¶åå¯¹æ•´ä¸ªæ ‘ç»“æ„é‡æ–°patch,patchå®Œæ¯•åï¼Œè°ƒç”¨mountedé’©å­**\n\n### ä¾èµ–æ”¶é›†æµç¨‹æ€»ç»“\n\n\nâ‘  é¦–å…ˆæ‰§è¡ŒrenderEffect ï¼Œèµ‹å€¼ç»™activeEffect ï¼Œè°ƒç”¨renderComponentRootæ–¹æ³•ï¼Œç„¶åè§¦å‘renderå‡½æ•°ã€‚\n\nâ‘¡ æ ¹æ®renderå‡½æ•°ï¼Œè§£æç»è¿‡compileï¼Œè¯­æ³•æ ‘å¤„ç†è¿‡åçš„æ¨¡ç‰ˆè¡¨è¾¾å¼ï¼Œè®¿é—®çœŸå®çš„dataå±æ€§ï¼Œè§¦å‘getã€‚\n\nâ‘¢ getæ–¹æ³•é¦–å…ˆç»è¿‡ä¹‹å‰ä¸åŒçš„reactiveï¼Œé€šè¿‡trackæ–¹æ³•è¿›è¡Œä¾èµ–æ”¶é›†ã€‚\n\nâ‘£ trackæ–¹æ³•é€šè¿‡å½“å‰proxyå¯¹è±¡target,å’Œè®¿é—®çš„å±æ€§åkeyæ¥æ‰¾åˆ°å¯¹åº”çš„depã€‚\n\nâ‘¤ å°†depä¸å½“å‰çš„activeEffectå»ºç«‹èµ·è”ç³»ã€‚å°†activeEffectå‹å…¥depæ•°ç»„ä¸­ï¼Œï¼ˆæ­¤æ—¶çš„depä¸­å·²ç»å«æœ‰å½“å‰ç»„ä»¶çš„æ¸²æŸ“effect,è¿™å°±æ˜¯å“åº”å¼çš„æ ¹æœ¬åŸå› ï¼‰å¦‚æœæˆ‘ä»¬è§¦å‘setï¼Œå°±èƒ½åœ¨æ•°ç»„ä¸­æ‰¾åˆ°å¯¹åº”çš„effectï¼Œä¾æ¬¡æ‰§è¡Œã€‚\n\næœ€åæˆ‘ä»¬ç”¨ä¸€ä¸ªæµç¨‹å›¾æ¥è¡¨è¾¾ä¸€ä¸‹ä¾èµ–æ”¶é›†çš„æµç¨‹ã€‚\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200809155729316.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3psX0FsaWVu,size_16,color_FFFFFF,t_70)\n\n\n## ä¸ƒ set æ´¾å‘æ›´æ–°\n\næ¥ä¸‹æ¥æˆ‘ä»¬setéƒ¨åˆ†é€»è¾‘ã€‚\n\n````js\n\nconst set = /*#__PURE__*/ createSetter()\n/* æµ…é€»è¾‘ */\nconst shallowSet = /*#__PURE__*/ createSetter(true)\n````\nsetä¹Ÿæ˜¯åˆ†ä¸¤ä¸ªé€»è¾‘ï¼Œsetå’ŒshallowSet,ä¸¤ç§æ–¹æ³•éƒ½æ˜¯ç”±createSetteräº§ç”Ÿï¼Œæˆ‘ä»¬è¿™é‡Œä¸»è¦ä»¥setè¿›è¡Œå‰–æã€‚\n\n### createSetteråˆ›å»ºset\n\n````js\nfunction createSetter(shallow = false) {\n  return function set(\n    target: object,\n    key: string | symbol,\n    value: unknown,\n    receiver: object\n  ): boolean {\n    const oldValue = (target as any)[key]\n    /* shallowSeté€»è¾‘ */\n\n    const hadKey = hasOwn(target, key)\n    const result = Reflect.set(target, key, value, receiver)\n    /* åˆ¤æ–­å½“å‰å¯¹è±¡ï¼Œå’Œå­˜åœ¨reactiveToRaw é‡Œé¢æ˜¯å¦ç›¸ç­‰ */\n    if (target === toRaw(receiver)) {\n      if (!hadKey) { /* æ–°å»ºå±æ€§ */\n        /*  TriggerOpTypes.ADD -> add */\n        trigger(target, TriggerOpTypes.ADD, key, value)\n      } else if (hasChanged(value, oldValue)) {\n        /* æ”¹å˜åŸæœ‰å±æ€§ */\n        /*  TriggerOpTypes.SET -> set */\n        trigger(target, TriggerOpTypes.SET, key, value, oldValue)\n      }\n    }\n    return result\n  }\n}\n````\n**createSetterçš„æµç¨‹å¤§è‡´æ˜¯è¿™æ ·çš„**\n\n**â‘  é¦–å…ˆé€šè¿‡toRawåˆ¤æ–­å½“å‰çš„proxyå¯¹è±¡å’Œå»ºç«‹å“åº”å¼å­˜å…¥reactiveToRawçš„proxyå¯¹è±¡æ˜¯å¦ç›¸ç­‰ã€‚**\n**â‘¡ åˆ¤æ–­targetæœ‰æ²¡æœ‰å½“å‰key,å¦‚æœå­˜åœ¨çš„è¯ï¼Œæ”¹å˜å±æ€§ï¼Œæ‰§è¡Œtrigger(target, TriggerOpTypes.SET, key, value, oldValue)ã€‚**\n**â‘¢ å¦‚æœå½“å‰keyä¸å­˜åœ¨ï¼Œè¯´æ˜æ˜¯èµ‹å€¼æ–°å±æ€§ï¼Œæ‰§è¡Œtrigger(target, TriggerOpTypes.ADD, key, value)ã€‚**\n\n### trigger\n\n````js\n/* æ ¹æ®valueå€¼çš„æ”¹å˜ï¼Œä»effectå’Œcomputeræ‹¿å‡ºå¯¹åº”çš„callback ï¼Œç„¶åä¾æ¬¡æ‰§è¡Œ */\nexport function trigger(\n  target: object,\n  type: TriggerOpTypes,\n  key?: unknown,\n  newValue?: unknown,\n  oldValue?: unknown,\n  oldTarget?: Map<unknown, unknown> | Set<unknown>\n) {\n  /* è·å–depssMap */\n  const depsMap = targetMap.get(target)\n  /* æ²¡æœ‰ç»è¿‡ä¾èµ–æ”¶é›†çš„ ï¼Œç›´æ¥è¿”å› */\n  if (!depsMap) {\n    return\n  }\n  const effects = new Set<ReactiveEffect>()        /* effecté’©å­é˜Ÿåˆ— */\n  const computedRunners = new Set<ReactiveEffect>() /* è®¡ç®—å±æ€§é˜Ÿåˆ— */\n  const add = (effectsToAdd: Set<ReactiveEffect> | undefined) => {\n    if (effectsToAdd) {\n      effectsToAdd.forEach(effect => {\n        if (effect !== activeEffect || !shouldTrack) {\n          if (effect.options.computed) { /* å¤„ç†computedé€»è¾‘ */\n            computedRunners.add(effect)  /* å‚¨å­˜å¯¹åº”çš„dep */\n          } else {\n            effects.add(effect)  /* å‚¨å­˜å¯¹åº”çš„dep */\n          }\n        }\n      })\n    }\n  }\n\n  add(depsMap.get(key))\n\n  const run = (effect: ReactiveEffect) => {\n    if (effect.options.scheduler) { /* æ”¾è¿› scheduler è°ƒåº¦*/\n      effect.options.scheduler(effect)\n    } else {\n      effect() /* ä¸å­˜åœ¨è°ƒåº¦æƒ…å†µï¼Œç›´æ¥æ‰§è¡Œeffect */\n    }\n  }\n\n  //TODO: å¿…é¡»é¦–å…ˆè¿è¡Œè®¡ç®—å±æ€§çš„æ›´æ–°ï¼Œä»¥ä¾¿è®¡ç®—çš„getter\n  //åœ¨ä»»ä½•ä¾èµ–äºå®ƒä»¬çš„æ­£å¸¸æ›´æ–°effectè¿è¡Œä¹‹å‰ï¼Œéƒ½å¯èƒ½å¤±æ•ˆã€‚\n\n  computedRunners.forEach(run) /* ä¾æ¬¡æ‰§è¡ŒcomputedRunners å›è°ƒ*/\n  effects.forEach(run) /* ä¾æ¬¡æ‰§è¡Œ effect å›è°ƒï¼ˆ TODO: é‡Œé¢åŒ…æ‹¬æ¸²æŸ“effect ï¼‰*/\n}\n````\næˆ‘ä»¬è¿™é‡Œä¿ç•™äº†triggerçš„æ ¸å¿ƒé€»è¾‘\n\n**â‘  é¦–å…ˆä»targetMapä¸­ï¼Œæ ¹æ®å½“å‰proxyæ‰¾åˆ°ä¸ä¹‹å¯¹åº”çš„depsMapã€‚**\n**â‘¡ æ ¹æ®keyæ‰¾åˆ°depsMapä¸­å¯¹åº”çš„depsï¼Œç„¶åé€šè¿‡addæ–¹æ³•åˆ†ç¦»å‡ºå¯¹åº”çš„effectå›è°ƒå‡½æ•°å’Œcomputedå›è°ƒå‡½æ•°ã€‚**\n**â‘¢ ä¾æ¬¡æ‰§è¡ŒcomputedRunners å’Œ effects é˜Ÿåˆ—é‡Œé¢çš„å›è°ƒå‡½æ•°ï¼Œå¦‚æœå‘ç°éœ€è¦è°ƒåº¦å¤„ç†,æ”¾è¿›scheduleräº‹ä»¶è°ƒåº¦**\n\nå€¼å¾—æ³¨æ„çš„çš„æ˜¯ï¼š\n\n**æ­¤æ—¶çš„effecté˜Ÿåˆ—ä¸­æœ‰æˆ‘ä»¬ä¸Šè¿°è´Ÿè´£æ¸²æŸ“çš„renderEffectï¼Œè¿˜æœ‰é€šè¿‡effectAPIå»ºç«‹çš„effectï¼Œä»¥åŠé€šè¿‡watchå½¢æˆçš„effectã€‚æˆ‘ä»¬è¿™é‡Œåªè€ƒè™‘åˆ°æ¸²æŸ“effectã€‚è‡³äºåé¢çš„æƒ…å†µä¼šåœ¨æ¥ä¸‹æ¥çš„æ–‡ç« ä¸­å’Œå¤§å®¶ä¸€èµ·åˆ†äº«ã€‚**\n\næˆ‘ä»¬ç”¨ä¸€å¹…æµç¨‹å›¾è¯´æ˜ä¸€ä¸‹setè¿‡ç¨‹ã€‚\n\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200809155749287.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3psX0FsaWVu,size_16,color_FFFFFF,t_70)\n\n## å…« æ€»ç»“\n\næˆ‘ä»¬æ€»ç»“ä¸€ä¸‹æ•´ä¸ªæ•°æ®ç»‘å®šå»ºç«‹å“åº”å¼å¤§è‡´åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µ\n\n1 åˆå§‹åŒ–é˜¶æ®µï¼š åˆå§‹åŒ–é˜¶æ®µé€šè¿‡ç»„ä»¶åˆå§‹åŒ–æ–¹æ³•å½¢æˆå¯¹åº”çš„**proxy**å¯¹è±¡ï¼Œç„¶åå½¢æˆä¸€ä¸ªè´Ÿè´£æ¸²æŸ“çš„effectã€‚\n\n2 getä¾èµ–æ”¶é›†é˜¶æ®µï¼šé€šè¿‡è§£ætemplateï¼Œæ›¿æ¢çœŸå®dataå±æ€§ï¼Œæ¥è§¦å‘get,ç„¶åé€šè¿‡**stack**æ–¹æ³•ï¼Œé€šè¿‡proxyå¯¹è±¡å’Œkeyå½¢æˆå¯¹åº”çš„depsï¼Œå°†è´Ÿè´£æ¸²æŸ“çš„effectå­˜å…¥depsã€‚ï¼ˆè¿™ä¸ªè¿‡ç¨‹è¿˜æœ‰å…¶ä»–çš„effectï¼Œæ¯”å¦‚watchEffectå­˜å…¥depsä¸­ ï¼‰ã€‚\n\n3 setæ´¾å‘æ›´æ–°é˜¶æ®µï¼šå½“æˆ‘ä»¬ this[key] = value æ”¹å˜å±æ€§çš„æ—¶å€™ï¼Œé¦–å…ˆé€šè¿‡**trigger**æ–¹æ³•ï¼Œé€šè¿‡proxyå¯¹è±¡å’Œkeyæ‰¾åˆ°å¯¹åº”çš„depsï¼Œç„¶åç»™depsåˆ†ç±»åˆ†æˆcomputedRunnerså’Œeffect,ç„¶åä¾æ¬¡æ‰§è¡Œï¼Œå¦‚æœéœ€è¦**è°ƒåº¦**çš„ï¼Œç›´æ¥æ”¾å…¥è°ƒåº¦ã€‚\n\n **å¾®ä¿¡æ‰«ç å…³æ³¨å…¬ä¼—å·ï¼Œå®šæœŸåˆ†äº«æŠ€æœ¯æ–‡ç« **\n\n             \n ![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200603103334627.jpg#pic_center)", "user_name": "æˆ‘ä¸æ˜¯å¤–æ˜Ÿäºº", "description": "", "got_view_count": 3077, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "JavaScript", "concern_user_count": 343215, "user_id": "2119514149895512", "title": "å‰ç«¯10ä¸ªçµé­‚æ‹·é—® åƒé€è¿™äº›ä½ å°±èƒ½æ‘†è„±åˆçº§å‰ç«¯å·¥ç¨‹å¸ˆï¼", "mark_content": "\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6039fc0ddce54be49046a9c272eff7cd~tplv-k3u1fbpfcp-zoom-1.image) \n \n> ç½‘ä¸Šå‚å·®ä¸å¼ƒçš„é¢è¯•é¢˜ï¼Œæœ¬æ–‡ç”±æµ…å…¥æ·±ï¼Œè®©ä½ åœ¨åšé¢è¯•å®˜çš„æ—¶å€™ï¼Œèƒ½å¤Ÿè¾¨åˆ«å‡ºé¢è¯•è€…æ˜¯ä¸æ˜¯çœŸçš„æœ‰ç‚¹ä¸œè¥¿ï¼Œä¹Ÿèƒ½è®©ä½ å»é¢è¯•ä¸­çº§å‰ç«¯å·¥ç¨‹å¸ˆæ›´æœ‰åº•æ°”ã€‚ä½†æ˜¯åˆ‡è®°æŠŠèƒŒè¯µé¢è¯•é¢˜å½“æˆäº†ä½ çš„å”¯ä¸€æ±‚èŒæ–¹å‘\n\n- è¶Šæ˜¯å¼€æ”¾æ€§çš„é¢˜ç›®ï¼Œæ›´èƒ½ä½“ç°å›ç­”è€…çš„æ°´å¹³ï¼Œä¸€åœºå¥½çš„é¢è¯•ï¼Œä¸ä»…èƒ½å‘ç°é¢è¯•è€…çš„ä¸è¶³ï¼Œä¹Ÿèƒ½æ‰¾åˆ°ä»–çš„é—ªå…‰ç‚¹ï¼Œè¿˜èƒ½æå‡é¢è¯•å®˜è‡ªèº«çš„æŠ€æœ¯\n\n### 1.`Css`å’Œ`Html`åˆå¹¶åœ¨ç¬¬ä¸€ä¸ªé¢˜ç›®ï¼Œè¯·ç®€è¿°ä½ è®©ä¸€ä¸ªå…ƒç´ åœ¨çª—å£ä¸­æ¶ˆå¤±ä»¥åŠå‚ç›´æ°´å¹³å±…ä¸­çš„æ–¹æ³•ï¼Œè¿˜æœ‰`Flex`å¸ƒå±€çš„ç†è§£\n\n\næ ‡å‡†ç­”æ¡ˆï¼šç™¾åº¦ä¸Šå½“ç„¶å¾ˆå¤šï¼Œè¿™é‡Œä¸åšé˜è¿°ï¼Œå¥½çš„å›ç­”æ€è·¯æ˜¯ï¼š\n* å…ƒç´ æ¶ˆå¤±çš„æ–¹æ¡ˆå…ˆåˆ—å‡ºæ¥ï¼Œ `display:none`å’Œ`visibility: hidden;`çš„åŒºåˆ«ï¼Œæ‹“å±•åˆ°`vue`æ¡†æ¶çš„`v-if`å’Œ`v-show`çš„åŒºåˆ«ï¼Œå¯ä»¥æ­é…å›æµå’Œé‡ç»˜æ¥è®²è§£\n\n#### å›æµå¿…å°†å¼•èµ·é‡ç»˜ï¼Œé‡ç»˜ä¸ä¸€å®šä¼šå¼•èµ·å›æµ\n\n##### å›æµ(Reflow)ï¼š\n>  å½“`Render Tree`ä¸­éƒ¨åˆ†æˆ–å…¨éƒ¨å…ƒç´ çš„å°ºå¯¸ã€ç»“æ„ã€æˆ–æŸäº›å±æ€§å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæµè§ˆå™¨é‡æ–°æ¸²æŸ“éƒ¨åˆ†æˆ–å…¨éƒ¨æ–‡æ¡£çš„è¿‡ç¨‹ç§°ä¸ºå›æµ\n\n* ä¸‹é¢å†…å®¹ä¼šå¯¼è‡´å›æµ:\n * é¡µé¢é¦–æ¬¡æ¸²æŸ“\n * æµè§ˆå™¨çª—å£å¤§å°å‘ç”Ÿæ”¹å˜\n * å…ƒç´ å°ºå¯¸æˆ–ä½ç½®å‘ç”Ÿæ”¹å˜\n * å…ƒç´ å†…å®¹å˜åŒ–ï¼ˆæ–‡å­—æ•°é‡æˆ–å›¾ç‰‡å¤§å°ç­‰ç­‰ï¼‰\n * å…ƒç´ å­—ä½“å¤§å°å˜åŒ–\n * æ·»åŠ æˆ–è€…åˆ é™¤å¯è§çš„DOMå…ƒç´ \n * æ¿€æ´»CSSä¼ªç±»ï¼ˆä¾‹å¦‚ï¼š:hoverï¼‰\n * æŸ¥è¯¢æŸäº›å±æ€§æˆ–è°ƒç”¨æŸäº›æ–¹æ³•\n\n* ä¸€äº›å¸¸ç”¨ä¸”ä¼šå¯¼è‡´å›æµçš„å±æ€§å’Œæ–¹æ³•ï¼š\n\n * clientWidthã€clientHeightã€clientTopã€clientLeft\n * offsetWidthã€offsetHeightã€offsetTopã€offsetLeft\n * scrollWidthã€scrollHeightã€scrollTopã€scrollLeft\n * scrollIntoView()ã€scrollIntoViewIfNeeded()\n * getComputedStyle()\n * getBoundingClientRect()\n * scrollTo()\n \n\n#### é‡ç»˜\n> å½“é¡µé¢ä¸­å…ƒç´ æ ·å¼çš„æ”¹å˜å¹¶ä¸å½±å“å®ƒåœ¨æ–‡æ¡£æµä¸­çš„ä½ç½®æ—¶ï¼ˆä¾‹å¦‚ï¼šcolorã€background-colorã€visibilityç­‰ï¼‰ï¼Œæµè§ˆå™¨ä¼šå°†æ–°æ ·å¼èµ‹äºˆç»™å…ƒç´ å¹¶é‡æ–°ç»˜åˆ¶å®ƒï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºé‡ç»˜ã€‚\n\n#### æ€§èƒ½å½±å“å¯¹æ¯”ï¼š \n\n![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d94aef9c8f064f6baa4c335f4be9983e~tplv-k3u1fbpfcp-zoom-1.image)\n \n\n[åŸæ–‡å‡ºå¤„ï¼Œæ„Ÿè°¢ä½œè€…][1]\n\n* åˆ—å‡ºå…ƒç´ å‚ç›´å±…ä¸­çš„æ–¹æ¡ˆï¼Œä»¥åŠå„ç§æ–¹æ¡ˆçš„ç¼ºé™·\n\n[16ç§å±…ä¸­æ–¹æ¡ˆï¼Œæ„Ÿè°¢ä½œè€…][2]\n\n* è®²å‡º`flex`å¸¸ç”¨çš„åœºæ™¯ï¼Œä»¥åŠ`flex 1`åšäº†ä»€ä¹ˆ \n\n[é˜®ä¸€å³°è€å¸ˆçš„Flexå¸ƒå±€][3]\n\n> ä¸Šé¢çš„é—®é¢˜å¦‚æœç­”å¾—éå¸¸å¥½ï¼Œåœ¨é‡ç»˜å’Œå›æµè¿™å—è¦ä¸‹å¤§åŠŸå¤«ã€‚è¿™ç‚¹æ˜¯å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„åŸºç¡€ï¼Œè€Œæ€§èƒ½ä¼˜åŒ–æ˜¯å‰ç«¯æœ€é‡è¦çš„æ ¸å¿ƒåŸºç¡€æŠ€èƒ½ç‚¹ï¼Œä¹Ÿæ˜¯é¢è¯•å®˜æœ€çœ‹ä¸­çš„åŸºç¡€ä¹‹ä¸€\n\n\n\n\n\n\n### 2.ä½ å¯¹`This`äº†è§£å—ï¼Œæœ‰è‡ªå·±å®ç°è¿‡`call,apply,bind`å—ï¼Ÿ\n\n[50è¡Œ`javaScript`ä»£ç å®ç°call,apply,bind][4]\n\nè¿™æ˜¯ä¸€ä¸ªå¾ˆåŸºç¡€çš„æŠ€èƒ½ç‚¹ï¼Œè€ƒå¯Ÿä½ å¯¹é—­åŒ…ï¼Œå‡½æ•°è°ƒç”¨çš„ç†è§£ç¨‹åº¦ï¼Œæˆ‘æ„Ÿè§‰æˆ‘å†™å¾—æ¯”è¾ƒç®€å•å®¹æ˜“æ‡‚\n\n### 3.å¦‚ä½•å‡å°‘é‡ç»˜å’Œå›æµçš„æ¬¡æ•°ï¼š\n\n ![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/345c2632d626430c88569741450c9309~tplv-k3u1fbpfcp-zoom-1.image)\n\n\n### 4.ä½ å¯¹å‰ç«¯çš„å¼‚æ­¥ç¼–ç¨‹æœ‰å“ªäº›äº†è§£å‘¢\n\nè¿™ä¸ªé¢˜ç›®å¦‚æœå›ç­”éå¸¸å®Œç¾ï¼Œé‚£ä¹ˆå¯ä»¥åˆ¤æ–­è¿™ä¸ªäººå·²ç»è„±ç¦»äº†åˆçº§å‰ç«¯å·¥ç¨‹å¸ˆï¼Œå‰ç«¯çš„æ ¸å¿ƒå°±æ˜¯å¼‚æ­¥ç¼–ç¨‹ï¼Œè¿™ä¸ªé¢˜ç›®ä¹Ÿæ˜¯ä½“ç°å‰ç«¯å·¥ç¨‹å¸ˆåŸºç¡€æ˜¯å¦æ‰å®çš„æœ€é‡è¦ä¾æ®ã€‚\n\n\n\nè¿˜æ˜¯è€è§„çŸ©ï¼Œä»æ˜“åˆ°éš¾å§\n\n#### ä¼ ç»Ÿçš„å®šæ—¶å™¨ï¼Œå¼‚æ­¥ç¼–ç¨‹ï¼š\n```\nsetTimeout(),setInterval()ç­‰ã€‚\n\nç¼ºç‚¹ï¼šå½“åŒæ­¥çš„ä»£ç æ¯”è¾ƒå¤šçš„æ—¶å€™ï¼Œä¸ç¡®å®šå¼‚æ­¥å®šæ—¶å™¨çš„ä»»åŠ¡æ—¶å€™èƒ½åœ¨æŒ‡å®šçš„æ—¶é—´æ‰§è¡Œã€‚\n\nä¾‹å¦‚ï¼š\n\nåœ¨ç¬¬100è¡Œæ‰§è¡Œä»£ç  setTimeout(()=>{console.log(1)},1000)//1såæ‰§è¡Œé‡Œé¢å‡½æ•°\n\nä½†æ˜¯åé¢å¯èƒ½æœ‰10000è¡Œä»£ç +å¾ˆå¤šè®¡ç®—çš„ä»»åŠ¡ï¼Œä¾‹å¦‚å¾ªç¯éå†ï¼Œé‚£ä¹ˆ1såå°±æ— æ³•è¾“å‡ºconsole.log(1)\n\nå¯èƒ½è¦åˆ°2sç”šè‡³æ›´ä¹…\n\nsetIntervalè·Ÿä¸Šé¢åŒç† å½“åŒæ­¥ä»£ç æ¯”è¾ƒå¤šæ—¶ï¼Œä¸ç¡®ä¿æ¯æ¬¡èƒ½åœ¨ä¸€æ ·çš„é—´éš”æ‰§è¡Œä»£ç ï¼Œ\n\nå¦‚æœæ˜¯åŠ¨ç”»ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šæ‰å¸§\n\n```\n\n#### `ES6`çš„å¼‚æ­¥ç¼–ç¨‹ï¼š\n> `promise generator async`\n \n- ``` new promise((resolve,reject)=>{ resolve() }).then()....```\n-ç¼ºç‚¹ï¼š ä»ç„¶æ²¡æœ‰æ‘†è„±å›æ‰å‡½æ•°ï¼Œè™½ç„¶æ”¹å–„äº†å›æ‰åœ°ç‹±\n \n- `generator`å‡½æ•° è°ƒç”¨next()æ‰§è¡Œåˆ°ä¸‹ä¸€ä¸ªyeildçš„ä»£ç å†…å®¹ï¼Œå¦‚æœä¼ å…¥å‚æ•°åˆ™ä½œä¸ºä¸Šä¸€ä¸ª`yield`çš„è¿”å›å€¼\n -ç¼ºç‚¹ï¼šä¸å¤Ÿè‡ªåŠ¨åŒ–\n\n- `async await`\n- åªæœ‰asyncå‡½æ•°å†…éƒ¨å¯ä»¥ç”¨await,å°†å¼‚æ­¥ä»£ç å˜æˆåŒæ­¥ä¹¦å†™ï¼Œä½†æ˜¯ç”±äºasyncå‡½æ•°æœ¬èº«è¿”å›ä¸€ä¸ªpromise,ä¹Ÿå¾ˆå®¹æ˜“äº§ç”ŸasyncåµŒå¥—åœ°ç‹±\n \n\n\n### `requestAnimationFrame`å’Œ`requestIdleCallback`ï¼š\n\n> ä¼ ç»Ÿçš„`javascript `åŠ¨ç”»æ˜¯é€šè¿‡å®šæ—¶å™¨ `setTimeout `æˆ–è€… `setInterval` å®ç°çš„ã€‚ä½†æ˜¯å®šæ—¶å™¨åŠ¨ç”»ä¸€ç›´å­˜åœ¨ä¸¤ä¸ªé—®é¢˜\n\n- ç¬¬ä¸€ä¸ªå°±æ˜¯åŠ¨ç”»çš„å¾ªæ—¶é—´ç¯é—´éš”ä¸å¥½ç¡®å®šï¼Œè®¾ç½®é•¿äº†åŠ¨ç”»æ˜¾å¾—ä¸å¤Ÿå¹³æ»‘æµç•…ï¼Œè®¾ç½®çŸ­äº†æµè§ˆå™¨çš„é‡ç»˜é¢‘ç‡ä¼šè¾¾åˆ°ç“¶é¢ˆï¼Œæ¨èçš„æœ€ä½³å¾ªç¯é—´éš”æ˜¯`17ms`ï¼ˆå¤§å¤šæ•°ç”µè„‘çš„æ˜¾ç¤ºå™¨åˆ·æ–°é¢‘ç‡æ˜¯`60Hzï¼Œ1000ms/60`ï¼‰ï¼›\n\n- ç¬¬äºŒä¸ªé—®é¢˜æ˜¯å®šæ—¶å™¨ç¬¬äºŒä¸ªæ—¶é—´å‚æ•°åªæ˜¯æŒ‡å®šäº†å¤šä¹…åå°†åŠ¨ç”»ä»»åŠ¡æ·»åŠ åˆ°æµè§ˆå™¨çš„UIçº¿ç¨‹é˜Ÿåˆ—ä¸­ï¼Œå¦‚æœUIçº¿ç¨‹å¤„äºå¿™ç¢ŒçŠ¶æ€ï¼Œé‚£ä¹ˆåŠ¨ç”»ä¸ä¼šç«‹åˆ»æ‰§è¡Œã€‚ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼ŒH5 ä¸­åŠ å…¥äº† `requestAnimationFrame`ä»¥åŠ`requestIdleCallback`\n\n- `requestAnimationFrame` ä¼šæŠŠæ¯ä¸€å¸§ä¸­çš„æ‰€æœ‰ DOM æ“ä½œé›†ä¸­èµ·æ¥ï¼Œåœ¨ä¸€æ¬¡é‡ç»˜æˆ–å›æµä¸­å°±å®Œæˆï¼Œå¹¶ä¸”é‡ç»˜æˆ–å›æµçš„æ—¶é—´é—´éš”ç´§ç´§è·Ÿéšæµè§ˆå™¨çš„åˆ·æ–°é¢‘ç‡\n\n- åœ¨éšè—æˆ–ä¸å¯è§çš„å…ƒç´ ä¸­ï¼Œ`requestAnimationFrame` å°†ä¸ä¼šè¿›è¡Œé‡ç»˜æˆ–å›æµï¼Œè¿™å½“ç„¶å°±æ„å‘³ç€æ›´å°‘çš„ CPUã€GPU å’Œå†…å­˜ä½¿ç”¨é‡\n\n- `requestAnimationFrame` æ˜¯ç”±æµè§ˆå™¨ä¸“é—¨ä¸ºåŠ¨ç”»æä¾›çš„ `API`ï¼Œåœ¨è¿è¡Œæ—¶æµè§ˆå™¨ä¼šè‡ªåŠ¨ä¼˜åŒ–æ–¹æ³•çš„è°ƒç”¨ï¼Œå¹¶ä¸”å¦‚æœé¡µé¢ä¸æ˜¯æ¿€æ´»çŠ¶æ€ä¸‹çš„è¯ï¼ŒåŠ¨ç”»ä¼šè‡ªåŠ¨æš‚åœï¼Œæœ‰æ•ˆèŠ‚çœäº†` CPU` å¼€é”€\n\n#### æ€§èƒ½å¯¹æ¯”ï¼š\n\n\n ![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4531de12698d46618cc7e963fa7f4b67~tplv-k3u1fbpfcp-zoom-1.image)\n\n- `requestAnimationFrame`çš„å›è°ƒä¼šåœ¨æ¯ä¸€å¸§ç¡®å®šæ‰§è¡Œï¼Œå±äºé«˜ä¼˜å…ˆçº§ä»»åŠ¡ï¼Œè€Œ`requestIdleCallback`çš„å›è°ƒåˆ™ä¸ä¸€å®šï¼Œå±äºä½ä¼˜å…ˆçº§ä»»åŠ¡ã€‚\n\n- æˆ‘ä»¬æ‰€çœ‹åˆ°çš„ç½‘é¡µï¼Œéƒ½æ˜¯æµè§ˆå™¨ä¸€å¸§ä¸€å¸§ç»˜åˆ¶å‡ºæ¥çš„ï¼Œé€šå¸¸è®¤ä¸º`FPSä¸º60`çš„æ—¶å€™æ˜¯æ¯”è¾ƒæµç•…çš„ï¼Œè€ŒFPSä¸ºä¸ªä½æ•°çš„æ—¶å€™å°±å±äºç”¨æˆ·å¯ä»¥æ„ŸçŸ¥åˆ°çš„å¡é¡¿äº†ï¼Œé‚£ä¹ˆåœ¨ä¸€å¸§é‡Œé¢æµè§ˆå™¨éƒ½è¦åšå“ªäº›äº‹æƒ…å‘¢ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1493a3df93bb42949e86f2e22bae7aa7~tplv-k3u1fbpfcp-zoom-1.image)\n\n- å›¾ä¸­ä¸€å¸§åŒ…å«äº†ç”¨æˆ·çš„äº¤äº’ã€jsçš„æ‰§è¡Œã€ä»¥åŠrequestAnimationFrameçš„è°ƒç”¨ï¼Œå¸ƒå±€è®¡ç®—ä»¥åŠé¡µé¢çš„é‡ç»˜ç­‰å·¥ä½œã€‚\n\n- å‡å¦‚æŸä¸€å¸§é‡Œé¢è¦æ‰§è¡Œçš„ä»»åŠ¡ä¸å¤šï¼Œåœ¨ä¸åˆ°16msï¼ˆ1000/60)çš„æ—¶é—´å†…å°±å®Œæˆäº†ä¸Šè¿°ä»»åŠ¡çš„è¯ï¼Œé‚£ä¹ˆè¿™ä¸€å¸§å°±ä¼šæœ‰ä¸€å®šçš„ç©ºé—²æ—¶é—´ï¼Œè¿™æ®µæ—¶é—´å°±æ°å¥½å¯ä»¥ç”¨æ¥æ‰§è¡ŒrequestIdleCallbackçš„å›è°ƒï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n \n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6caeb53fcf23485fbc5209984840dc4f~tplv-k3u1fbpfcp-zoom-1.image)\n\n\n\n### 5.ç®€è¿°æµè§ˆå™¨çš„`Eventloop`å’Œ`Node.js`çš„`Eventloop`\n\n#### æµè§ˆå™¨çš„`EventLoop` \n\n\n ![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1ef86699c22b4b6aa356b3d5a54b77ea~tplv-k3u1fbpfcp-zoom-1.image)\n\n> ä¸æƒ³è§£é‡Šå¤ªå¤šï¼Œçœ‹å›¾\n\n#### `Node.js`çš„`EventLoop` \n\n\n ![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c8c9e6d5b6fa407fa2ff17b1d821210c~tplv-k3u1fbpfcp-zoom-1.image)\n\n#### ç‰¹åˆ«æç¤ºï¼šç½‘ä¸Šå¤§éƒ¨åˆ†`Node.js`çš„`EventLoop`çš„é¢è¯•é¢˜ï¼Œéƒ½ä¼šæœ‰`BUG`ï¼Œä»£ç é‡å’Œè®¡ç®—é‡å¤ªå°‘ï¼Œå¾ˆå¯èƒ½è¿˜æ²¡æœ‰æ‰§è¡Œåˆ°å¾®ä»»åŠ¡çš„ä»£ç ï¼Œå®šæ—¶å™¨å°±åˆ°æ—¶é—´è¢«æ‰§è¡Œäº†\n\n\n### 6.é—­åŒ…ä¸`V8`åƒåœ¾å›æ”¶æœºåˆ¶ï¼š\n\n> JS çš„åƒåœ¾å›æ”¶æœºåˆ¶çš„åŸºæœ¬åŸç†æ˜¯ï¼š\n\n- æ‰¾å‡ºé‚£äº›ä¸å†ç»§ç»­ä½¿ç”¨çš„å˜é‡ï¼Œç„¶åé‡Šæ”¾å…¶å ç”¨çš„å†…å­˜ï¼Œåƒåœ¾æ”¶é›†å™¨ä¼šæŒ‰ç…§å›ºå®šçš„æ—¶é—´é—´éš”å‘¨æœŸæ€§åœ°æ‰§è¡Œè¿™ä¸€æ“ä½œã€‚\n\n- V8 çš„åƒåœ¾å›æ”¶ç­–ç•¥ä¸»è¦åŸºäºåˆ†ä»£å¼åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œåœ¨ V8 ä¸­ï¼Œå°†å†…å­˜åˆ†ä¸ºæ–°ç”Ÿä»£å’Œè€ç”Ÿä»£ï¼Œæ–°ç”Ÿä»£çš„å¯¹è±¡ä¸ºå­˜æ´»æ—¶é—´è¾ƒçŸ­çš„å¯¹è±¡ï¼Œè€ç”Ÿä»£çš„å¯¹è±¡ä¸ºå­˜æ´»äº‹ä»¶è¾ƒé•¿æˆ–å¸¸é©»å†…å­˜çš„å¯¹è±¡ã€‚\n\n\n ![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cd3b1a0ccf7644168728f92e5cee6e21~tplv-k3u1fbpfcp-zoom-1.image)\n- V8 å †çš„æ•´ä½“å¤§å°ç­‰äºæ–°ç”Ÿä»£æ‰€ç”¨å†…å­˜ç©ºé—´åŠ ä¸Šè€ç”Ÿä»£çš„å†…å­˜ç©ºé—´ï¼Œè€Œåªèƒ½åœ¨å¯åŠ¨æ—¶æŒ‡å®šï¼Œæ„å‘³ç€è¿è¡Œæ—¶æ— æ³•è‡ªåŠ¨æ‰©å……ï¼Œå¦‚æœè¶…è¿‡äº†æé™å€¼ï¼Œå°±ä¼šå¼•èµ·è¿›ç¨‹å‡ºé”™ã€‚\n\n#### `Scavenge` ç®—æ³•\n- åœ¨åˆ†ä»£çš„åŸºç¡€ä¸Šï¼Œæ–°ç”Ÿä»£çš„å¯¹è±¡ä¸»è¦é€šè¿‡ Scavenge ç®—æ³•è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œåœ¨ Scavenge å…·ä½“å®ç°ä¸­ï¼Œä¸»è¦é‡‡ç”¨äº†ä¸€ç§å¤åˆ¶çš„æ–¹å¼çš„æ–¹æ³•â€”â€” Cheney ç®—æ³•ã€‚\n\n- Cheney ç®—æ³•å°†å †å†…å­˜ä¸€åˆ†ä¸ºäºŒï¼Œä¸€ä¸ªå¤„äºä½¿ç”¨çŠ¶æ€çš„ç©ºé—´å« From ç©ºé—´ï¼Œä¸€ä¸ªå¤„äºé—²ç½®çŠ¶æ€çš„ç©ºé—´ç§°ä¸º To ç©ºé—´ã€‚åˆ†é…å¯¹è±¡æ—¶ï¼Œå…ˆæ˜¯åœ¨ From ç©ºé—´ä¸­è¿›è¡Œåˆ†é…ã€‚\n\n- å½“å¼€å§‹è¿›è¡Œåƒåœ¾å›æ”¶æ—¶ï¼Œä¼šæ£€æŸ¥ From ç©ºé—´ä¸­çš„å­˜æ´»å¯¹è±¡ï¼Œå°†å…¶å¤åˆ¶åˆ° To ç©ºé—´ä¸­ï¼Œè€Œéå­˜æ´»å¯¹è±¡å ç”¨çš„ç©ºé—´å°†ä¼šè¢«é‡Šæ”¾ã€‚å®Œæˆå¤åˆ¶åï¼ŒFrom ç©ºé—´å’Œ To ç©ºé—´çš„è§’è‰²å‘ç”Ÿå¯¹æ¢ã€‚\n\n\n\n ![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f01b71ee6ba644e4bb72a0b8215d7dc2~tplv-k3u1fbpfcp-zoom-1.image)\n- å½“ä¸€ä¸ªå¯¹è±¡ç»è¿‡å¤šæ¬¡å¤åˆ¶åä¾ç„¶å­˜æ´»ï¼Œä»–å°†ä¼šè¢«è®¤ä¸ºæ˜¯ç”Ÿå‘½å‘¨æœŸè¾ƒé•¿çš„å¯¹è±¡ï¼Œéšåä¼šè¢«ç§»åŠ¨åˆ°è€ç”Ÿä»£ä¸­ï¼Œé‡‡ç”¨æ–°çš„ç®—æ³•è¿›è¡Œç®¡ç†ã€‚\n\n- è¿˜æœ‰ä¸€ç§æƒ…å†µæ˜¯ï¼Œå¦‚æœå¤åˆ¶ä¸€ä¸ªå¯¹è±¡åˆ° To ç©ºé—´æ—¶ï¼ŒTo ç©ºé—´å ç”¨è¶…è¿‡äº† 25%ï¼Œåˆ™è¿™ä¸ªå¯¹è±¡ä¼šè¢«ç›´æ¥æ™‹å‡åˆ°è€ç”Ÿä»£ç©ºé—´ä¸­ã€‚\n \n\n#### æ ‡è®°-æ¸…é™¤å’Œæ ‡è®°-æ•´ç†ç®—æ³•\n- å¯¹äºè€ç”Ÿä»£ä¸­çš„å¯¹è±¡ï¼Œä¸»è¦é‡‡ç”¨æ ‡è®°-æ¸…é™¤å’Œæ ‡è®°-æ•´ç†ç®—æ³•ã€‚æ ‡è®°-æ¸…é™¤ å’Œå‰æ–‡æåˆ°çš„æ ‡è®°ä¸€æ ·ï¼Œä¸ Scavenge ç®—æ³•ç›¸æ¯”ï¼Œæ ‡è®°æ¸…é™¤ä¸ä¼šå°†å†…å­˜ç©ºé—´åˆ’ä¸ºä¸¤åŠï¼Œæ ‡è®°æ¸…é™¤åœ¨æ ‡è®°é˜¶æ®µä¼šæ ‡è®°æ´»ç€çš„å¯¹è±¡ï¼Œè€Œåœ¨å†…å­˜å›æ”¶é˜¶æ®µï¼Œå®ƒä¼šæ¸…é™¤æ²¡æœ‰è¢«æ ‡è®°çš„å¯¹è±¡ã€‚\n\n- è€Œæ ‡è®°æ•´ç†æ˜¯ä¸ºäº†è§£å†³æ ‡è®°æ¸…é™¤åç•™ä¸‹çš„å†…å­˜ç¢ç‰‡é—®é¢˜ã€‚\n\n#### å¢é‡æ ‡è®°ï¼ˆ`Incremental Marking`ï¼‰ç®—æ³•\n- å‰é¢çš„ä¸‰ç§ç®—æ³•ï¼Œéƒ½éœ€è¦å°†æ­£åœ¨æ‰§è¡Œçš„ JavaScript åº”ç”¨é€»è¾‘æš‚åœä¸‹æ¥ï¼Œå¾…åƒåœ¾å›æ”¶å®Œæ¯•åå†æ¢å¤ã€‚è¿™ç§è¡Œä¸ºå«ä½œâ€œå…¨åœé¡¿â€ï¼ˆstop-the-worldï¼‰ã€‚\n\n- åœ¨ V8 æ–°ç”Ÿä»£çš„åˆ†ä»£å›æ”¶ä¸­ï¼Œåªæ”¶é›†æ–°ç”Ÿä»£ï¼Œè€Œæ–°ç”Ÿä»£é€šå¸¸é…ç½®è¾ƒå°ï¼Œä¸”å­˜æ´»å¯¹è±¡è¾ƒå°‘ï¼Œæ‰€ä»¥å…¨åœé¡¿çš„å½±å“ä¸å¤§ï¼Œè€Œè€ç”Ÿä»£å°±ç›¸åäº†ã€‚\n\n- ä¸ºäº†é™ä½å…¨éƒ¨è€ç”Ÿä»£å…¨å †åƒåœ¾å›æ”¶å¸¦æ¥çš„åœé¡¿æ—¶é—´ï¼ŒV8å°†æ ‡è®°è¿‡ç¨‹åˆ†ä¸ºä¸€ä¸ªä¸ªçš„å­æ ‡è®°è¿‡ç¨‹ï¼ŒåŒæ—¶è®©åƒåœ¾å›æ”¶æ ‡è®°å’ŒJSåº”ç”¨é€»è¾‘äº¤æ›¿è¿›è¡Œï¼Œç›´åˆ°æ ‡è®°é˜¶æ®µå®Œæˆã€‚\n\n ![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/abd14220969b4741ad402a06f1705452~tplv-k3u1fbpfcp-zoom-1.image)\n- ç»è¿‡å¢é‡æ ‡è®°æ”¹è¿›åï¼Œåƒåœ¾å›æ”¶çš„æœ€å¤§åœé¡¿æ—¶é—´å¯ä»¥å‡å°‘åˆ°åŸæ¥çš„ 1/6 å·¦å³ã€‚\n\n#### å†…å­˜æ³„æ¼\n\n- å†…å­˜æ³„æ¼ï¼ˆMemory Leakï¼‰æ˜¯æŒ‡ç¨‹åºä¸­å·±åŠ¨æ€åˆ†é…çš„å †å†…å­˜ç”±äºæŸç§åŸå› ç¨‹åºæœªé‡Šæ”¾æˆ–æ— æ³•é‡Šæ”¾ï¼Œé€ æˆç³»ç»Ÿå†…å­˜çš„æµªè´¹ï¼Œå¯¼è‡´ç¨‹åºè¿è¡Œé€Ÿåº¦å‡æ…¢ç”šè‡³ç³»ç»Ÿå´©æºƒç­‰ä¸¥é‡åæœã€‚\n\n- å†…å­˜æ³„æ¼çš„å¸¸è§åœºæ™¯ï¼š\n\n* ç¼“å­˜:å­˜åœ¨å†…å­˜ä¸­æ•°æ®ä¸€åªæ²¡æœ‰è¢«æ¸…æ‰\n\n* ä½œç”¨åŸŸæœªé‡Šæ”¾ï¼ˆé—­åŒ…ï¼‰\n* æ— æ•ˆçš„ DOM å¼•ç”¨\n* æ²¡å¿…è¦çš„å…¨å±€å˜é‡\n* å®šæ—¶å™¨æœªæ¸…é™¤(`React`ä¸­çš„åˆæˆäº‹ä»¶ï¼Œè¿˜æœ‰åŸç”Ÿäº‹ä»¶çš„ç»‘å®šåŒºåˆ«)\n* äº‹ä»¶ç›‘å¬ä¸ºæ¸…ç©º\n* å†…å­˜æ³„æ¼ä¼˜åŒ–\n\n### 7.ä½ ç†Ÿæ‚‰å“ªäº›é€šä¿¡åè®®ï¼Œå®ƒä»¬çš„ä¼˜ç¼ºç‚¹ï¼Ÿ\n\n[é€šä¿¡åè®®å…¨è§£][5]\n\n- æˆ‘çš„è¿™ç¯‡æ–‡ç« éå¸¸è¯¦ç»†ä»‹ç»äº† `http1.0 http1.1 http2.0 https websocket`ç­‰åè®®\n\n### 8.ä»è¾“å…¥`url`åœ°å€æ ï¼Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿç”±æ­¤æ¥ä»‹ç»å¦‚ä½•æ€§èƒ½ä¼˜åŒ–ï¼š\n\n[æ€§èƒ½ä¼˜åŒ–ä¸å®Œå…¨æ‰‹å†Œ][6]\n\n[å¦‚ä½•ä¼˜åŒ–ä½ çš„è¶…å¤§å‹Reactåº”ç”¨][7]\n\n- æˆ‘çš„è¿™ä¸¤ç¯‡æ–‡ç« åŸºæœ¬ä¸Šæ¶µç›–äº†å‰ç«¯åŸºç¡€çš„æ€§èƒ½ä¼˜åŒ–ï¼ŒåæœŸæˆ‘ä¼šå†å‡ºä¸“æ ã€‚\n\n### 9.æµè§ˆå™¨çš„ç¼“å­˜å®ç°ï¼Œè¯·æ‚¨ä»‹ç»ï¼š\n\n1.`preload,prefetch,dns-prefetch`ç­‰\n\n[ä»€ä¹ˆæ˜¯preload][8]\n\n- ä½¿ç”¨ preload æŒ‡ä»¤çš„å¥½å¤„åŒ…æ‹¬ï¼š\n\n- å…è®¸æµè§ˆå™¨æ¥è®¾å®šèµ„æºåŠ è½½çš„ä¼˜å…ˆçº§å› æ­¤å¯ä»¥å…è®¸å‰ç«¯å¼€å‘è€…æ¥ä¼˜åŒ–æŒ‡å®šèµ„æºçš„åŠ è½½ã€‚\n\n- èµ‹äºˆæµè§ˆå™¨å†³å®šèµ„æºç±»å‹çš„èƒ½åŠ›ï¼Œå› æ­¤å®ƒèƒ½åˆ†è¾¨è¿™ä¸ªèµ„æºåœ¨ä»¥åæ˜¯å¦å¯ä»¥é‡å¤åˆ©ç”¨ã€‚\n\n- æµè§ˆå™¨å¯ä»¥é€šè¿‡æŒ‡å®š as å±æ€§æ¥å†³å®šè¿™ä¸ªè¯·æ±‚æ˜¯å¦ç¬¦åˆ content security policyã€‚\n\n- æµè§ˆå™¨å¯ä»¥åŸºäºèµ„æºçš„ç±»å‹ï¼ˆæ¯”å¦‚ image/webpï¼‰æ¥å‘é€é€‚å½“çš„ accept å¤´ã€‚\n \n\n#### `Prefetch`\n\n- `Prefetch` æ˜¯ä¸€ä¸ªä½ä¼˜å…ˆçº§çš„èµ„æºæç¤ºï¼Œå…è®¸æµè§ˆå™¨åœ¨åå°ï¼ˆç©ºé—²æ—¶ï¼‰è·å–å°†æ¥å¯èƒ½ç”¨å¾—åˆ°çš„èµ„æºï¼Œå¹¶ä¸”å°†ä»–ä»¬å­˜å‚¨åœ¨æµè§ˆå™¨çš„ç¼“å­˜ä¸­ã€‚ä¸€æ—¦ä¸€ä¸ªé¡µé¢åŠ è½½å®Œæ¯•å°±ä¼šå¼€å§‹ä¸‹è½½å…¶ä»–çš„èµ„æºï¼Œç„¶åå½“ç”¨æˆ·ç‚¹å‡»äº†ä¸€ä¸ªå¸¦æœ‰ prefetched çš„è¿æ¥ï¼Œå®ƒå°†å¯ä»¥ç«‹åˆ»ä»ç¼“å­˜ä¸­åŠ è½½å†…å®¹ã€‚\n \n\n#### `DNS Prefetching`\n\n- `DNS prefetching` å…è®¸æµè§ˆå™¨åœ¨ç”¨æˆ·æµè§ˆé¡µé¢æ—¶åœ¨åå°è¿è¡Œ DNS çš„è§£æã€‚å¦‚æ­¤ä¸€æ¥ï¼ŒDNS çš„è§£æåœ¨ç”¨æˆ·ç‚¹å‡»ä¸€ä¸ªé“¾æ¥æ—¶å·²ç»å®Œæˆï¼Œæ‰€ä»¥å¯ä»¥å‡å°‘å»¶è¿Ÿã€‚å¯ä»¥åœ¨ä¸€ä¸ª link æ ‡ç­¾çš„å±æ€§ä¸­æ·»åŠ  rel=\"dns-prefetch'  æ¥å¯¹æŒ‡å®šçš„ URL è¿›è¡Œ` DNS prefetching`ï¼Œæˆ‘ä»¬å»ºè®®`Google fontsï¼ŒGoogle Analytics` å’Œ` CDN` è¿›è¡Œå¤„ç†ã€‚\n\n\n \n2.`servece-worker`,`PWA`æ¸è¿›å¼webåº”ç”¨ \n\n[PWAæ–‡æ¡£][9]\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d1abade1fb454d4cb7c6d198b92ed9b5~tplv-k3u1fbpfcp-zoom-1.image)\n\n3.`localstorage,sessionstorage,cookie,session`ç­‰ã€‚\n[æµè§ˆå™¨çš„ä¼šè¯å­˜å‚¨å’ŒæŒä¹…æ€§å­˜å‚¨][10]\n4.æµè§ˆå™¨ç¼“å­˜çš„å®ç°æœºåˆ¶çš„å®ç°\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/595c27f811fc4e14bacee79d929a45ce~tplv-k3u1fbpfcp-zoom-1.image)\n\n\n### 10.åŒæºç­–ç•¥æ˜¯ä»€ä¹ˆï¼Œè·¨åŸŸè§£å†³åŠæ³•ï¼Œ`cookie`å¯ä»¥è·¨åŸŸå—ï¼Ÿ\n [è·¨åŸŸè§£å†³çš„åŠæ³•][11]\n\nQï¼šä¸ºä»€ä¹ˆä¼šå‡ºç°è·¨åŸŸé—®é¢˜ï¼Ÿ\n\nAï¼šå‡ºäºæµè§ˆå™¨çš„åŒæºç­–ç•¥é™åˆ¶ï¼Œæµè§ˆå™¨ä¼šæ‹’ç»è·¨åŸŸè¯·æ±‚ã€‚ \n\n * æ³¨ï¼šä¸¥æ ¼çš„è¯´ï¼Œæµè§ˆå™¨å¹¶ä¸æ˜¯æ‹’ç»æ‰€æœ‰çš„è·¨åŸŸè¯·æ±‚ï¼Œå®é™…ä¸Šæ‹’ç»çš„æ˜¯è·¨åŸŸçš„è¯»æ“ä½œã€‚æµè§ˆå™¨çš„åŒæºé™åˆ¶ç­–ç•¥æ˜¯è¿™æ ·æ‰§è¡Œçš„ï¼š\n\n- é€šå¸¸æµè§ˆå™¨å…è®¸è¿›è¡Œè·¨åŸŸå†™æ“ä½œï¼ˆCross-origin writesï¼‰ï¼Œå¦‚é“¾æ¥ï¼Œé‡å®šå‘ï¼›\n\n- é€šå¸¸æµè§ˆå™¨å…è®¸è·¨åŸŸèµ„æºåµŒå…¥ï¼ˆCross-origin embeddingï¼‰ï¼Œå¦‚ imgã€script æ ‡ç­¾ï¼›\n\n- é€šå¸¸æµè§ˆå™¨ä¸å…è®¸è·¨åŸŸè¯»æ“ä½œï¼ˆCross-origin readsï¼‰ã€‚\n\nQï¼šä»€ä¹ˆæƒ…å†µæ‰ç®—ä½œè·¨åŸŸï¼Ÿ \n\n Aï¼šéåŒæºè¯·æ±‚ï¼Œå‡ä¸ºè·¨åŸŸã€‚åè¯è§£é‡Šï¼šåŒæº â€”â€” å¦‚æœä¸¤ä¸ªé¡µé¢æ‹¥æœ‰ç›¸åŒçš„åè®®ï¼ˆprotocolï¼‰ï¼Œç«¯å£ï¼ˆportï¼‰å’Œä¸»æœºï¼ˆhostï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªé¡µé¢å°±å±äºåŒä¸€ä¸ªæºï¼ˆoriginï¼‰ã€‚\n\nQï¼šä¸ºä»€ä¹ˆæœ‰è·¨åŸŸéœ€æ±‚? \n\n - Aï¼šåœºæ™¯ â€”â€” å·¥ç¨‹æœåŠ¡åŒ–åï¼Œä¸åŒèŒè´£çš„æœåŠ¡åˆ†æ•£åœ¨ä¸åŒçš„å·¥ç¨‹ä¸­ï¼Œå¾€å¾€è¿™äº›å·¥ç¨‹çš„åŸŸåæ˜¯ä¸åŒçš„ï¼Œä½†ä¸€ä¸ªéœ€æ±‚å¯èƒ½éœ€è¦å¯¹åº”åˆ°å¤šä¸ªæœåŠ¡ï¼Œè¿™æ—¶ä¾¿éœ€è¦è°ƒç”¨ä¸åŒæœåŠ¡çš„æ¥å£ï¼Œå› æ­¤ä¼šå‡ºç°è·¨åŸŸã€‚\n\n- æ–¹æ³•ï¼š`JSONP`,`CORS`,`postmessage`,`webscoket`ï¼Œåå‘ä»£ç†æœåŠ¡å™¨ç­‰ã€‚\n \n#### æœ€å\n\n* å¤§å®¶æ„Ÿè§‰å†™å¾—ä¸é”™ï¼Œå¯ä»¥ç‚¹ä¸ªèµå’Œå…³æ³¨\n* é¡ºä¾¿å…³æ³¨ä¸‹æˆ‘çš„å…¬ä¼—å·ï¼š `å‰ç«¯å·…å³°`\n \n\n  [1]: https://juejin.im/post/5a9923e9518825558251c96a\n  [2]: https://juejin.im/post/58f818bbb123db006233ab2a\n  [3]: http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html\n  [4]: https://segmentfault.com/a/1190000020044435\n  [5]: https://segmentfault.com/a/1190000019891825\n  [6]: https://segmentfault.com/a/1190000018827395\n  [7]: https://juejin.im/post/5d35d3ecf265da1bc23fb654\n  [8]: https://juejin.im/post/5b5984b851882561da216311\n  [9]: https://lavas.baidu.com/pwa/README\n  [10]: https://juejin.im/post/5ad5b9116fb9a028e014fb19\n  [11]: https://juejin.im/post/59c132415188256bb018e825", "user_name": "Peterè°­è€å¸ˆ", "description": "å…¬ä¼—å· : å‰ç«¯å·…å³°", "got_view_count": 34022, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "Java", "concern_user_count": 252044, "user_id": "712139234346894", "title": "ä¸¢å¼ƒæ‰é‚£äº›BeanUtilså·¥å…·ç±»å§ï¼ŒMapStructçœŸé¦™ï¼ï¼ï¼", "mark_content": "åœ¨å‰å‡ å¤©çš„æ–‡ç« ã€Š[ä¸ºä»€ä¹ˆé˜¿é‡Œå·´å·´ç¦æ­¢ä½¿ç”¨Apache Beanutilsè¿›è¡Œå±æ€§çš„copyï¼Ÿ][1]ã€‹ä¸­ï¼Œæˆ‘æ›¾ç»å¯¹å‡ æ¬¾å±æ€§æ‹·è´çš„å·¥å…·ç±»è¿›è¡Œäº†å¯¹æ¯”ã€‚\n\nç„¶ååœ¨è¯„è®ºåŒºæœ‰äº›è¯»è€…åé¦ˆè¯´MapStructæ‰æ˜¯çœŸçš„é¦™ï¼Œäºæ˜¯æˆ‘å°±æŠ½æ—¶é—´äº†è§£äº†ä¸€ä¸‹MapStructã€‚ç»“æœæˆ‘å‘ç°ï¼Œè¿™çœŸçš„æ˜¯ä¸€ä¸ªç¥ä»™æ¡†æ¶ï¼Œç‚’é¸¡é¦™ã€‚\n\nè¿™ä¸€ç¯‡æ–‡ç« å°±æ¥ç®€å•ä»‹ç»ä¸‹MapStructçš„ç”¨æ³•ï¼Œå¹¶ä¸”å†å’Œå…¶ä»–å‡ ä¸ªå·¥å…·ç±»è¿›è¡Œä¸€ä¸‹å¯¹æ¯”ã€‚\n\n### ä¸ºä»€ä¹ˆéœ€è¦MapStruct ï¼Ÿ\n\né¦–å…ˆï¼Œæˆ‘ä»¬å…ˆè¯´ä¸€ä¸‹MapStructè¿™ç±»æ¡†æ¶é€‚ç”¨äºä»€ä¹ˆæ ·çš„åœºæ™¯ï¼Œä¸ºä»€ä¹ˆå¸‚é¢ä¸Šä¼šæœ‰è¿™ä¹ˆå¤šçš„ç±»ä¼¼çš„æ¡†æ¶ã€‚\n\nåœ¨è½¯ä»¶ä½“ç³»æ¶æ„è®¾è®¡ä¸­ï¼Œåˆ†å±‚å¼ç»“æ„æ˜¯æœ€å¸¸è§ï¼Œä¹Ÿæ˜¯æœ€é‡è¦çš„ä¸€ç§ç»“æ„ã€‚å¾ˆå¤šäººéƒ½å¯¹ä¸‰å±‚æ¶æ„ã€å››å±‚æ¶æ„ç­‰å¹¶ä¸é™Œç”Ÿã€‚\n\nç”šè‡³æœ‰äººè¯´ï¼š**\"è®¡ç®—æœºç§‘å­¦é¢†åŸŸçš„ä»»ä½•é—®é¢˜éƒ½å¯ä»¥é€šè¿‡å¢åŠ ä¸€ä¸ªé—´æ¥çš„ä¸­é—´å±‚æ¥è§£å†³ï¼Œå¦‚æœä¸è¡Œï¼Œé‚£å°±åŠ ä¸¤å±‚ã€‚\"**\n\nä½†æ˜¯ï¼Œéšç€è½¯ä»¶æ¶æ„åˆ†å±‚è¶Šæ¥è¶Šå¤šï¼Œé‚£ä¹ˆå„ä¸ªå±‚æ¬¡ä¹‹é—´çš„æ•°æ®æ¨¡å‹å°±è¦é¢ä¸´ç€ç›¸äº’è½¬æ¢çš„é—®é¢˜ï¼Œå…¸å‹çš„å°±æ˜¯æˆ‘ä»¬å¯ä»¥åœ¨ä»£ç ä¸­è§åˆ°å„ç§Oï¼Œå¦‚DOã€DTOã€VOç­‰ã€‚\n\nä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒåŒæ ·ä¸€ä¸ªæ•°æ®æ¨¡å‹ï¼Œæˆ‘ä»¬åœ¨ä¸åŒçš„å±‚æ¬¡è¦ä½¿ç”¨ä¸åŒçš„æ•°æ®æ¨¡å‹ã€‚**å¦‚åœ¨æ•°æ®å­˜å‚¨å±‚ï¼Œæˆ‘ä»¬ä½¿ç”¨DOæ¥æŠ½è±¡ä¸€ä¸ªä¸šåŠ¡å®ä½“ï¼›åœ¨ä¸šåŠ¡é€»è¾‘å±‚ï¼Œæˆ‘ä»¬ä½¿ç”¨DTOæ¥è¡¨ç¤ºæ•°æ®ä¼ è¾“å¯¹è±¡ï¼›åˆ°äº†å±•ç¤ºå±‚ï¼Œæˆ‘ä»¬åˆæŠŠå¯¹è±¡å°è£…æˆVOæ¥ä¸å‰ç«¯è¿›è¡Œäº¤äº’ã€‚**\n\né‚£ä¹ˆï¼Œæ•°æ®çš„ä»å‰ç«¯é€ä¼ åˆ°æ•°æ®æŒä¹…åŒ–å±‚ï¼ˆä»æŒä¹…å±‚é€ä¼ åˆ°å‰ç«¯ï¼‰ï¼Œå°±éœ€è¦è¿›è¡Œå¯¹è±¡ä¹‹é—´çš„äº’ç›¸è½¬åŒ–ï¼Œå³åœ¨ä¸åŒçš„å¯¹è±¡æ¨¡å‹ä¹‹é—´è¿›è¡Œæ˜ å°„ã€‚\n\né€šå¸¸æˆ‘ä»¬å¯ä»¥ä½¿ç”¨get/setç­‰æ–¹å¼é€ä¸€è¿›è¡Œå­—æ®µæ˜ å°„æ“ä½œï¼Œå¦‚ï¼š\n\n    personDTO.setName(personDO.getName());\n    personDTO.setAge(personDO.getAge());\n    personDTO.setSex(personDO.getSex());\n    personDTO.setBirthday(personDO.getBirthday());\n    \n\nä½†æ˜¯ï¼Œç¼–å†™è¿™æ ·çš„æ˜ å°„ä»£ç æ˜¯ä¸€é¡¹å†—é•¿ä¸”å®¹æ˜“å‡ºé”™çš„ä»»åŠ¡ã€‚MapStructç­‰ç±»ä¼¼çš„æ¡†æ¶çš„ç›®æ ‡æ˜¯é€šè¿‡è‡ªåŠ¨åŒ–çš„æ–¹å¼å°½å¯èƒ½å¤šåœ°ç®€åŒ–è¿™é¡¹å·¥ä½œã€‚\n\n### MapStructçš„ä½¿ç”¨\n\nMapStructï¼ˆhttps://mapstruct.org/ ï¼‰æ˜¯ä¸€ç§ä»£ç ç”Ÿæˆå™¨ï¼Œå®ƒæå¤§åœ°ç®€åŒ–äº†åŸºäº\"çº¦å®šä¼˜äºé…ç½®\"æ–¹æ³•çš„Java beanç±»å‹ä¹‹é—´æ˜ å°„çš„å®ç°ã€‚ç”Ÿæˆçš„æ˜ å°„ä»£ç ä½¿ç”¨çº¯æ–¹æ³•è°ƒç”¨ï¼Œå› æ­¤å¿«é€Ÿã€ç±»å‹å®‰å…¨ä¸”æ˜“äºç†è§£ã€‚\n\n> çº¦å®šä¼˜äºé…ç½®ï¼Œä¹Ÿç§°ä½œæŒ‰çº¦å®šç¼–ç¨‹ï¼Œæ˜¯ä¸€ç§è½¯ä»¶è®¾è®¡èŒƒå¼ï¼Œæ—¨åœ¨å‡å°‘è½¯ä»¶å¼€å‘äººå‘˜éœ€åšå†³å®šçš„æ•°é‡ï¼Œè·å¾—ç®€å•çš„å¥½å¤„ï¼Œè€Œåˆä¸å¤±çµæ´»æ€§ã€‚\n\nå‡è®¾æˆ‘ä»¬æœ‰ä¸¤ä¸ªç±»éœ€è¦è¿›è¡Œäº’ç›¸è½¬æ¢ï¼Œåˆ†åˆ«æ˜¯PersonDOå’ŒPersonDTOï¼Œç±»å®šä¹‰å¦‚ä¸‹ï¼š\n\n    public class PersonDO {\n        private Integer id;\n        private String name;\n        private int age;\n        private Date birthday;\n        private String gender;\n    }\n    \n    public class PersonDTO {\n        private String userName;\n        private Integer age;\n        private Date birthday;\n        private Gender gender;\n    }\n    \n\næˆ‘ä»¬æ¼”ç¤ºä¸‹å¦‚ä½•ä½¿ç”¨MapStructè¿›è¡Œbeanæ˜ å°„ã€‚\n\næƒ³è¦ä½¿ç”¨MapStructï¼Œé¦–å…ˆéœ€è¦ä¾èµ–ä»–çš„ç›¸å…³çš„jaråŒ…ï¼Œä½¿ç”¨mavenä¾èµ–æ–¹å¼å¦‚ä¸‹ï¼š\n\n    ...\n    <properties>\n        <org.mapstruct.version>1.3.1.Final</org.mapstruct.version>\n    </properties>\n    ...\n    <dependencies>\n        <dependency>\n            <groupId>org.mapstruct</groupId>\n            <artifactId>mapstruct</artifactId>\n            <version>${org.mapstruct.version}</version>\n        </dependency>\n    </dependencies>\n    ...\n    <build>\n        <plugins>\n            <plugin>\n                <groupId>org.apache.maven.plugins</groupId>\n                <artifactId>maven-compiler-plugin</artifactId>\n                <version>3.8.1</version>\n                <configuration>\n                    <source>1.8</source> <!-- depending on your project -->\n                    <target>1.8</target> <!-- depending on your project -->\n                    <annotationProcessorPaths>\n                        <path>\n                            <groupId>org.mapstruct</groupId>\n                            <artifactId>mapstruct-processor</artifactId>\n                            <version>${org.mapstruct.version}</version>\n                        </path>\n                        <!-- other annotation processors -->\n                    </annotationProcessorPaths>\n                </configuration>\n            </plugin>\n        </plugins>\n    </build>\n    \n\nå› ä¸ºMapStructéœ€è¦åœ¨ç¼–è¯‘å™¨ç”Ÿæˆè½¬æ¢ä»£ç ï¼Œæ‰€ä»¥éœ€è¦åœ¨maven-compiler-pluginæ’ä»¶ä¸­é…ç½®ä¸Šå¯¹mapstruct-processorçš„å¼•ç”¨ã€‚è¿™éƒ¨åˆ†åœ¨åæ–‡ä¼šå†æ¬¡ä»‹ç»ã€‚\n\nä¹‹åï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªåšæ˜ å°„çš„æ¥å£ï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼š\n\n    @Mapper\n    interface PersonConverter {\n        PersonConverter INSTANCE = Mappers.getMapper(PersonConverter.class);\n    \n        @Mappings(@Mapping(source = \"name\", target = \"userName\"))\n        PersonDTO do2dto(PersonDO person);\n    }\n    \n\nä½¿ç”¨æ³¨è§£ `@Mapper`å®šä¹‰ä¸€ä¸ªConverteræ¥å£ï¼Œåœ¨å…¶ä¸­å®šä¹‰ä¸€ä¸ªdo2dtoæ–¹æ³•ï¼Œæ–¹æ³•çš„å…¥å‚ç±»å‹æ˜¯PersonDOï¼Œå‡ºå‚ç±»å‹æ˜¯PersonDTOï¼Œè¿™ä¸ªæ–¹æ³•å°±ç”¨äºå°†PersonDOè½¬æˆPersonDTOã€‚\n\næµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š\n\n    public static void main(String[] args) {\n        PersonDO personDO = new PersonDO();\n        personDO.setName(\"Hollis\");\n        personDO.setAge(26);\n        personDO.setBirthday(new Date());\n        personDO.setId(1);\n        personDO.setGender(Gender.MALE.name());\n        PersonDTO personDTO = PersonConverter.INSTANCE.do2dto(personDO);\n        System.out.println(personDTO);\n    }\n    \n\nè¾“å‡ºç»“æœï¼š\n\n    PersonDTO{userName='Hollis', age=26, birthday=Sat Aug 08 19:00:44 CST 2020, gender=MALE}\n    \n\nå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬ä½¿ç”¨MapStructå®Œç¾çš„å°†PersonDOè½¬æˆäº†PersonDTOã€‚\n\nä¸Šé¢çš„ä»£ç å¯ä»¥çœ‹å‡ºï¼ŒMapStructçš„ç”¨æ³•æ¯”è¾ƒç®€å•ï¼Œä¸»è¦ä¾èµ–`@Mapper`æ³¨è§£ã€‚\n\nä½†æ˜¯æˆ‘ä»¬çŸ¥é“ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦äº’ç›¸è½¬æ¢çš„ä¸¤ä¸ªç±»ä¹‹é—´çš„å±æ€§åç§°ã€ç±»å‹ç­‰å¹¶ä¸å®Œå…¨ä¸€è‡´ï¼Œè¿˜æœ‰äº›æƒ…å†µæˆ‘ä»¬å¹¶ä¸æƒ³ç›´æ¥åšæ˜ å°„ï¼Œé‚£ä¹ˆè¯¥å¦‚ä½•å¤„ç†å‘¢ï¼Ÿ\n\nå…¶å®MapStructåœ¨è¿™æ–¹é¢ä¹Ÿæ˜¯åšçš„å¾ˆå¥½çš„ã€‚\n\n### MapStructå¤„ç†å­—æ®µæ˜ å°„\n\né¦–å…ˆï¼Œå¯ä»¥æ˜ç¡®çš„å‘Šè¯‰å¤§å®¶ï¼Œå¦‚æœè¦è½¬æ¢çš„ä¸¤ä¸ªç±»ä¸­æºå¯¹è±¡å±æ€§ä¸ç›®æ ‡å¯¹è±¡å±æ€§çš„ç±»å‹å’Œåå­—ä¸€è‡´çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨æ˜ å°„å¯¹åº”å±æ€§ã€‚\n\né‚£ä¹ˆï¼Œå¦‚æœé‡åˆ°ç‰¹æ®Šæƒ…å†µå¦‚ä½•å¤„ç†å‘¢ï¼Ÿ\n\n#### åå­—ä¸ä¸€è‡´å¦‚ä½•æ˜ å°„\n\nå¦‚ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œåœ¨PersonDOä¸­ç”¨nameè¡¨ç¤ºç”¨æˆ·åç§°ï¼Œè€Œåœ¨PersonDTOä¸­ä½¿ç”¨userNameè¡¨ç¤ºç”¨æˆ·åï¼Œé‚£ä¹ˆå¦‚ä½•è¿›è¡Œå‚æ•°æ˜ å°„å‘¢ã€‚\n\nè¿™æ—¶å€™å°±è¦ä½¿ç”¨`@Mapping`æ³¨è§£äº†ï¼Œåªéœ€è¦åœ¨æ–¹æ³•ç­¾åä¸Šï¼Œä½¿ç”¨è¯¥æ³¨è§£ï¼Œå¹¶æŒ‡æ˜éœ€è¦è½¬æ¢çš„æºå¯¹è±¡çš„åå­—å’Œç›®æ ‡å¯¹è±¡çš„åå­—å°±å¯ä»¥äº†ï¼Œå¦‚å°†nameçš„å€¼æ˜ å°„ç»™userNameï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼ï¼š\n\n    @Mapping(source = \"name\", target = \"userName\")\n    \n\n#### å¯ä»¥è‡ªåŠ¨æ˜ å°„çš„ç±»å‹\n\né™¤äº†åå­—ä¸ä¸€è‡´ä»¥å¤–ï¼Œè¿˜æœ‰ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œé‚£å°±æ˜¯ç±»å‹ä¸ä¸€è‡´ï¼Œå¦‚ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œåœ¨PersonDOä¸­ç”¨Stringç±»å‹è¡¨ç¤ºç”¨æˆ·æ€§åˆ«ï¼Œè€Œåœ¨PersonDTOä¸­ä½¿ç”¨ä¸€ä¸ªGenterçš„æšä¸¾è¡¨ç¤ºç”¨æˆ·æ€§åˆ«ã€‚\n\nè¿™æ—¶å€™ç±»å‹ä¸ä¸€è‡´ï¼Œå°±éœ€è¦æ¶‰åŠåˆ°äº’ç›¸è½¬æ¢çš„é—®é¢˜\n\nå…¶å®ï¼ŒMapStructä¼šå¯¹éƒ¨åˆ†ç±»å‹è‡ªåŠ¨åšæ˜ å°„ï¼Œä¸éœ€è¦æˆ‘ä»¬åšé¢å¤–é…ç½®ï¼Œå¦‚ä¾‹å­ä¸­æˆ‘ä»¬å°†Stringç±»å‹è‡ªåŠ¨è½¬æˆäº†æšä¸¾ç±»å‹ã€‚\n\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¯¹äºä»¥ä¸‹æƒ…å†µå¯ä»¥åšè‡ªåŠ¨ç±»å‹è½¬æ¢ï¼š\n\n*   åŸºæœ¬ç±»å‹åŠå…¶ä»–ä»¬å¯¹åº”çš„åŒ…è£…ç±»å‹ã€‚\n*   åŸºæœ¬ç±»å‹çš„åŒ…è£…ç±»å‹å’ŒStringç±»å‹ä¹‹é—´\n*   Stringç±»å‹å’Œæšä¸¾ç±»å‹ä¹‹é—´\n\n#### è‡ªå®šä¹‰å¸¸é‡\n\nå¦‚æœæˆ‘ä»¬åœ¨è½¬æ¢æ˜ å°„è¿‡ç¨‹ä¸­ï¼Œæƒ³è¦ç»™ä¸€äº›å±æ€§å®šä¹‰ä¸€ä¸ªå›ºå®šçš„å€¼ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥ä½¿ç”¨ constant\n\n    @Mapping(source = \"name\", constant = \"hollis\")\n    \n\n#### ç±»å‹ä¸ä¸€è‡´çš„å¦‚ä½•æ˜ å°„\n\nè¿˜æ˜¯ä¸Šé¢çš„ä¾‹å­ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦åœ¨Personè¿™ä¸ªå¯¹è±¡ä¸­å¢åŠ å®¶åº­ä½å€è¿™ä¸ªå±æ€§ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸€èˆ¬åœ¨PersonoDTOä¸­ä¼šå•ç‹¬å®šä¹‰ä¸€ä¸ªHomeAddressç±»æ¥è¡¨ç¤ºå®¶åº­ä½å€ï¼Œè€Œåœ¨Personç±»ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨Stringç±»å‹è¡¨ç¤ºå®¶åº­ä½å€ã€‚\n\nè¿™å°±éœ€è¦åœ¨HomeAddresså’ŒStringä¹‹é—´ä½¿ç”¨JSONè¿›è¡Œäº’ç›¸è½¬åŒ–ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼ŒMapStructä¹Ÿæ˜¯å¯ä»¥æ”¯æŒçš„ã€‚\n\n    public class PersonDO {\n        private String name;\n        private String address;\n    }\n    \n    public class PersonDTO {\n        private String userName;\n        private HomeAddress address;\n    }\n    @Mapper\n    interface PersonConverter {\n        PersonConverter INSTANCE = Mappers.getMapper(PersonConverter.class);\n    \n        @Mapping(source = \"userName\", target = \"name\")\n        @Mapping(target = \"address\",expression = \"java(homeAddressToString(dto2do.getAddress()))\")\n        PersonDO dto2do(PersonDTO dto2do);\n    \n        default String homeAddressToString(HomeAddress address){\n            return JSON.toJSONString(address);\n        }\n    }\n    \n\næˆ‘ä»¬åªéœ€è¦åœ¨PersonConverterä¸­åœ¨å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼ˆå› ä¸ºPersonConverteræ˜¯ä¸€ä¸ªæ¥å£ï¼Œæ‰€ä»¥åœ¨JDK 1.8ä»¥åçš„ç‰ˆæœ¬ä¸­å¯ä»¥å®šä¹‰ä¸€ä¸ªdefaultæ–¹æ³•ï¼‰ï¼Œè¿™ä¸ªæ–¹æ³•çš„ä½œç”¨å°±æ˜¯å°†HomeAddressè½¬æ¢æˆStringç±»å‹ã€‚\n\n> defaultæ–¹æ³•ï¼šJava 8 å¼•å…¥çš„æ–°çš„è¯­è¨€ç‰¹æ€§ï¼Œç”¨å…³é”®å­—defaultæ¥æ ‡æ³¨ï¼Œè¢«defaultæ‰€æ ‡æ³¨çš„æ–¹æ³•ï¼Œéœ€è¦æä¾›å®ç°ï¼Œè€Œå­ç±»å¯ä»¥é€‰æ‹©å®ç°æˆ–è€…ä¸å®ç°è¯¥æ–¹æ³•\n\nç„¶ååœ¨dto2doæ–¹æ³•ä¸Šï¼Œé€šè¿‡ä»¥ä¸‹æ³¨è§£æ–¹å¼å³å¯å®ç°ç±»å‹çš„è½¬æ¢ï¼š\n\n    @Mapping(target = \"address\",expression = \"java(homeAddressToString(dto2do.getAddress()))\")\n    \n\nä¸Šé¢è¿™ç§æ˜¯è‡ªå®šä¹‰çš„ç±»å‹è½¬æ¢ï¼Œè¿˜æœ‰ä¸€äº›ç±»å‹çš„è½¬æ¢æ˜¯MapStructæœ¬èº«å°±æ”¯æŒçš„ï¼Œå¦‚Stringå’ŒDateä¹‹é—´çš„è½¬æ¢ï¼š\n\n    @Mapping(target = \"birthday\",dateFormat = \"yyyy-MM-dd HH:mm:ss\")\n    \n\nä»¥ä¸Šï¼Œç®€å•ä»‹ç»äº†ä¸€äº›å¸¸ç”¨çš„å­—æ®µæ˜ å°„çš„æ–¹æ³•ï¼Œä¹Ÿæ˜¯æˆ‘è‡ªå·±åœ¨å·¥ä½œä¸­ç»å¸¸é‡åˆ°çš„å‡ ä¸ªåœºæ™¯ï¼Œæ›´å¤šçš„æƒ…å†µå¤§å®¶å¯ä»¥æŸ¥çœ‹å®˜æ–¹çš„ç¤ºä¾‹ï¼ˆhttps://github.com/mapstruct/mapstruct-examplesï¼‰ã€‚\n\n### MapStructçš„æ€§èƒ½\n\nå‰é¢è¯´äº†è¿™ä¹ˆå¤šMapStructçš„ç”¨æ³•ï¼Œå¯ä»¥çœ‹å‡ºMapStructçš„ä½¿ç”¨è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œå¹¶ä¸”å­—æ®µæ˜ å°„ä¸Šé¢çš„åŠŸèƒ½å¾ˆå¼ºå¤§ï¼Œé‚£ä¹ˆä»–çš„æ€§èƒ½åˆ°åº•æ€ä¹ˆæ ·å‘¢ï¼Ÿ\n\nå‚è€ƒã€Š[ä¸ºä»€ä¹ˆé˜¿é‡Œå·´å·´ç¦æ­¢ä½¿ç”¨Apache Beanutilsè¿›è¡Œå±æ€§çš„copyï¼Ÿ][1]ã€‹ä¸­çš„ç¤ºä¾‹ï¼Œæˆ‘ä»¬å¯¹MapStructè¿›è¡Œæ€§èƒ½æµ‹è¯•ã€‚\n\nåˆ†åˆ«æ‰§è¡Œ1000ã€10000ã€100000ã€1000000æ¬¡æ˜ å°„çš„è€—æ—¶åˆ†åˆ«ä¸ºï¼š0msã€1msã€3msã€6msã€‚\n\nå¯ä»¥çœ‹åˆ°ï¼Œ**MapStructçš„è€—æ—¶ç›¸æ¯”è¾ƒäºå…¶ä»–å‡ æ¬¾å·¥å…·æ¥è¯´æ˜¯éå¸¸çŸ­çš„**ã€‚\n\né‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆMapStructçš„æ€§èƒ½å¯ä»¥è¿™ä¹ˆå¥½å‘¢ï¼Ÿ\n\nå…¶å®ï¼ŒMapStructå’Œå…¶ä»–å‡ ç±»æ¡†æ¶æœ€å¤§çš„åŒºåˆ«å°±æ˜¯ï¼š**ä¸å…¶ä»–æ˜ å°„æ¡†æ¶ç›¸æ¯”ï¼ŒMapStructåœ¨ç¼–è¯‘æ—¶ç”Ÿæˆbeanæ˜ å°„ï¼Œè¿™ç¡®ä¿äº†é«˜æ€§èƒ½ï¼Œå¯ä»¥æå‰å°†é—®é¢˜åé¦ˆå‡ºæ¥ï¼Œä¹Ÿä½¿å¾—å¼€å‘äººå‘˜å¯ä»¥å½»åº•çš„é”™è¯¯æ£€æŸ¥ã€‚**\n\nè¿˜è®°å¾—å‰é¢æˆ‘ä»¬åœ¨å¼•å…¥MapStructçš„ä¾èµ–çš„æ—¶å€™ï¼Œç‰¹åˆ«åœ¨maven-compiler-pluginä¸­å¢åŠ äº†mapstruct-processorçš„æ”¯æŒå—ï¼Ÿ\n\nå¹¶ä¸”æˆ‘ä»¬åœ¨ä»£ç ä¸­ä½¿ç”¨äº†å¾ˆå¤šMapStructæä¾›çš„æ³¨è§£ï¼Œè¿™ä½¿å¾—åœ¨ç¼–è¯‘æœŸï¼ŒMapStructå°±å¯ä»¥ç›´æ¥ç”Ÿæˆbeanæ˜ å°„çš„ä»£ç ï¼Œç›¸å½“äºä»£æ›¿æˆ‘ä»¬å†™äº†å¾ˆå¤šsetterå’Œgetterã€‚\n\nå¦‚æˆ‘ä»¬åœ¨ä»£ç ä¸­å®šä¹‰äº†ä»¥ä¸‹ä¸€ä¸ªMapperï¼š\n\n    @Mapper\n    interface PersonConverter {\n        PersonConverter INSTANCE = Mappers.getMapper(PersonConverter.class);\n    \n        @Mapping(source = \"userName\", target = \"name\")\n        @Mapping(target = \"address\",expression = \"java(homeAddressToString(dto2do.getAddress()))\")\n        @Mapping(target = \"birthday\",dateFormat = \"yyyy-MM-dd HH:mm:ss\")\n        PersonDO dto2do(PersonDTO dto2do);\n    \n        default String homeAddressToString(HomeAddress address){\n            return JSON.toJSONString(address);\n        }\n    }\n    \n\nç»è¿‡ä»£ç ç¼–è¯‘åï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªPersonConverterImplï¼š\n\n    @Generated(\n        value = \"org.mapstruct.ap.MappingProcessor\",\n        date = \"2020-08-09T12:58:41+0800\",\n        comments = \"version: 1.3.1.Final, compiler: javac, environment: Java 1.8.0_181 (Oracle Corporation)\"\n    )\n    class PersonConverterImpl implements PersonConverter {\n    \n        @Override\n        public PersonDO dto2do(PersonDTO dto2do) {\n            if ( dto2do == null ) {\n                return null;\n            }\n    \n            PersonDO personDO = new PersonDO();\n    \n            personDO.setName( dto2do.getUserName() );\n            if ( dto2do.getAge() != null ) {\n                personDO.setAge( dto2do.getAge() );\n            }\n            if ( dto2do.getGender() != null ) {\n                personDO.setGender( dto2do.getGender().name() );\n            }\n    \n            personDO.setAddress( homeAddressToString(dto2do.getAddress()) );\n    \n            return personDO;\n        }\n    }\n    \n\nåœ¨è¿è¡ŒæœŸï¼Œå¯¹äºbeanè¿›è¡Œæ˜ å°„çš„æ—¶å€™ï¼Œå°±ä¼šç›´æ¥è°ƒç”¨PersonConverterImplçš„dto2doæ–¹æ³•ï¼Œè¿™æ ·å°±æ²¡æœ‰ä»€ä¹ˆç‰¹æ®Šçš„äº‹æƒ…è¦åšäº†ï¼Œåªæ˜¯åœ¨å†…å­˜ä¸­è¿›è¡Œsetå’Œgetå°±å¯ä»¥äº†ã€‚\n\næ‰€ä»¥ï¼Œå› ä¸ºåœ¨ç¼–è¯‘æœŸåšäº†å¾ˆå¤šäº‹æƒ…ï¼Œæ‰€ä»¥MapStructåœ¨è¿è¡ŒæœŸçš„æ€§èƒ½ä¼šå¾ˆå¥½ï¼Œå¹¶ä¸”è¿˜æœ‰ä¸€ä¸ªå¥½å¤„ï¼Œé‚£å°±æ˜¯å¯ä»¥æŠŠé—®é¢˜çš„æš´éœ²æå‰åˆ°ç¼–è¯‘æœŸã€‚\n\nä½¿å¾—å¦‚æœä»£ç ä¸­å­—æ®µæ˜ å°„æœ‰é—®é¢˜ï¼Œé‚£ä¹ˆåº”ç”¨å°±ä¼šæ— æ³•ç¼–è¯‘ï¼Œå¼ºåˆ¶å¼€å‘è€…è¦è§£å†³è¿™ä¸ªé—®é¢˜æ‰è¡Œã€‚\n\n### æ€»ç»“\n\næœ¬æ–‡ä»‹ç»äº†ä¸€æ¬¾Javaä¸­çš„å­—æ®µæ˜ å°„å·¥å…·ç±»ï¼ŒMapStructï¼Œä»–çš„ç”¨æ³•æ¯”è¾ƒç®€å•ï¼Œå¹¶ä¸”åŠŸèƒ½éå¸¸å®Œå–„ï¼Œå¯ä»¥åº”ä»˜å„ç§æƒ…å†µçš„å­—æ®µæ˜ å°„ã€‚\n\nå¹¶ä¸”å› ä¸ºä»–æ˜¯ç¼–è¯‘æœŸå°±ä¼šç”ŸæˆçœŸæ­£çš„æ˜ å°„ä»£ç ï¼Œä½¿å¾—è¿è¡ŒæœŸçš„æ€§èƒ½å¾—åˆ°äº†å¤§å¤§çš„æå‡ã€‚\n\nå¼ºçƒˆæ¨èï¼ŒçœŸçš„å¾ˆé¦™ï¼ï¼ï¼\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4c4d9540fd2845ef9399a6ebe91edf22~tplv-k3u1fbpfcp-zoom-1.image)\n\n [1]: https://www.hollischuang.com/archives/5337", "user_name": "HollisChuang", "description": "å¾®ä¿¡å…¬ä¼—å·ï¼šHollis(hollischuang) ï¼Œåšå®¢ï¼šwww.hollischuang.com", "got_view_count": 826003, "category_name": "åç«¯", "ctime": 1457483880}
{"tag_name": "Java", "concern_user_count": 252044, "user_id": "2682464104616023", "title": "å°å…­å…­å­¦Nettyç³»åˆ—ä¹‹Java BIO", "mark_content": "# å‰è¨€\n>æ–‡æœ¬å·²æ”¶å½•è‡³æˆ‘çš„GitHubä»“åº“ï¼Œæ¬¢è¿Starï¼šhttps://github.com/bin392328206/six-finger                             \n> **ç§ä¸€æ£µæ ‘æœ€å¥½çš„æ—¶é—´æ˜¯åå¹´å‰ï¼Œå…¶æ¬¡æ˜¯ç°åœ¨**   \n>æˆ‘çŸ¥é“å¾ˆå¤šäººä¸ç©**qq**äº†,ä½†æ˜¯æ€€æ—§ä¸€ä¸‹,æ¬¢è¿åŠ å…¥å…­è„‰ç¥å‰‘Javaèœé¸Ÿå­¦ä¹ ç¾¤ï¼Œç¾¤èŠå·ç ï¼š**549684836** é¼“åŠ±å¤§å®¶åœ¨æŠ€æœ¯çš„è·¯ä¸Šå†™åšå®¢\n\n## çµ®å¨ \nè¿™ä¸ªç³»åˆ—æ˜¯8æœˆçš„è®¡åˆ’ï¼Œå¤§æ¦‚èƒ½å†™ä¸ªåæ¥ç¯‡çš„æ–‡ç« ï¼Œä¼°è®¡æ˜¯è¦çš„ ï¼Œæ‰€ä»¥è¯´è¦æ˜¯åŸåˆ›æ˜¯ä¸å¯èƒ½çš„ï¼Œæˆ‘ä¸æ˜¯æ‰¾äº†å¾ˆå¤šå­¦ä¹ èµ„æ–™ï¼Œç„¶åè‚¯å®šä¼šcopyå¾ˆå¤šï¼Œæ‰€ä»¥è¯´æˆ‘è¿˜æ˜¯å¾—å¥½å¥½å­¦ä¹ ï¼ŒæŠŠå­¦ä¹ è®°å½•è®°å½•ä¸€ä¸‹ã€‚è¿˜æ˜¯é‚£å¥è¯ï¼Œå­¦ä¹ æ˜¯èºæ—‹ä¸Šå‡çš„ï¼ŒåŠ æ²¹çš„ã€‚å°ä¼™ä¼´ä»¬\n\n\n## I/Oæ¨¡å‹ \n\n### I/O æ¨¡å‹åŸºæœ¬è¯´æ˜\n\n> I/O æ¨¡å‹ç®€å•çš„ç†è§£ï¼šå°±æ˜¯ç”¨ä»€ä¹ˆæ ·çš„é€šé“è¿›è¡Œæ•°æ®çš„å‘é€å’Œæ¥æ”¶ï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šå†³å®šäº†ç¨‹åºé€šä¿¡çš„æ€§èƒ½\n\n> Javaå…±æ”¯æŒ3ç§ç½‘ç»œç¼–ç¨‹æ¨¡å‹/IOæ¨¡å¼ï¼šBIOã€NIOã€AIO\n\n- Java BIO ï¼š åŒæ­¥å¹¶é˜»å¡(ä¼ ç»Ÿé˜»å¡å‹)ï¼ŒæœåŠ¡å™¨å®ç°æ¨¡å¼ä¸ºä¸€ä¸ªè¿æ¥ä¸€ä¸ªçº¿ç¨‹ï¼Œå³å®¢æˆ·ç«¯æœ‰è¿æ¥è¯·æ±‚æ—¶æœåŠ¡å™¨ç«¯å°±éœ€è¦å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹è¿›è¡Œå¤„ç†ï¼Œå¦‚æœè¿™ä¸ªè¿æ¥ä¸åšä»»ä½•äº‹æƒ…ä¼šé€ æˆä¸å¿…è¦çš„çº¿ç¨‹å¼€é”€ \n\n- Java NIO ï¼š åŒæ­¥éé˜»å¡ï¼ŒæœåŠ¡å™¨å®ç°æ¨¡å¼ä¸ºä¸€ä¸ªçº¿ç¨‹å¤„ç†å¤šä¸ªè¯·æ±‚(è¿æ¥)ï¼Œå³å®¢æˆ·ç«¯å‘é€çš„è¿æ¥è¯·æ±‚éƒ½ä¼šæ³¨å†Œåˆ°å¤šè·¯å¤ç”¨å™¨ä¸Šï¼Œå¤šè·¯å¤ç”¨å™¨è½®è¯¢åˆ°è¿æ¥æœ‰I/Oè¯·æ±‚å°±è¿›è¡Œå¤„ç† \n\n- Java AIO(NIO.2) ï¼š å¼‚æ­¥éé˜»å¡ï¼ŒAIO å¼•å…¥å¼‚æ­¥é€šé“çš„æ¦‚å¿µï¼Œé‡‡ç”¨äº† Proactor æ¨¡å¼ï¼Œç®€åŒ–äº†ç¨‹åºç¼–å†™ï¼Œæœ‰æ•ˆçš„è¯·æ±‚æ‰å¯åŠ¨çº¿ç¨‹ï¼Œå®ƒçš„ç‰¹ç‚¹æ˜¯å…ˆç”±æ“ä½œç³»ç»Ÿå®Œæˆåæ‰é€šçŸ¥æœåŠ¡ç«¯ç¨‹åºå¯åŠ¨çº¿ç¨‹å»å¤„ç†ï¼Œä¸€èˆ¬é€‚ç”¨äºè¿æ¥æ•°è¾ƒå¤šä¸”è¿æ¥æ—¶é—´è¾ƒé•¿çš„åº”ç”¨\n\n\n### BIOã€NIOã€AIOé€‚ç”¨åœºæ™¯åˆ†æ\n\n- BIOæ–¹å¼é€‚ç”¨äºè¿æ¥æ•°ç›®æ¯”è¾ƒå°ä¸”å›ºå®šçš„æ¶æ„ï¼Œè¿™ç§æ–¹å¼å¯¹æœåŠ¡å™¨èµ„æºè¦æ±‚æ¯”è¾ƒé«˜ï¼Œå¹¶å‘å±€é™äºåº”ç”¨ä¸­ï¼ŒJDK1.4ä»¥å‰çš„å”¯ä¸€é€‰æ‹©ï¼Œä½†ç¨‹åºç®€å•æ˜“ç†è§£ã€‚\n\n- NIOæ–¹å¼é€‚ç”¨äºè¿æ¥æ•°ç›®å¤šä¸”è¿æ¥æ¯”è¾ƒçŸ­ï¼ˆè½»æ“ä½œï¼‰çš„æ¶æ„ï¼Œæ¯”å¦‚èŠå¤©æœåŠ¡å™¨ï¼Œå¼¹å¹•ç³»ç»Ÿï¼ŒæœåŠ¡å™¨é—´é€šè®¯ç­‰ã€‚ç¼–ç¨‹æ¯”è¾ƒå¤æ‚ï¼ŒJDK1.4å¼€å§‹æ”¯æŒã€‚\n\n- AIOæ–¹å¼ä½¿ç”¨äºè¿æ¥æ•°ç›®å¤šä¸”è¿æ¥æ¯”è¾ƒé•¿ï¼ˆé‡æ“ä½œï¼‰çš„æ¶æ„ï¼Œæ¯”å¦‚ç›¸å†ŒæœåŠ¡å™¨ï¼Œå……åˆ†è°ƒç”¨OSå‚ä¸å¹¶å‘æ“ä½œï¼Œç¼–ç¨‹æ¯”è¾ƒå¤æ‚ï¼ŒJDK7å¼€å§‹æ”¯æŒã€‚\n\n## Java BIO åŸºæœ¬ä»‹ç»\n\nJava BIO å°±æ˜¯ä¼ ç»Ÿçš„java io ç¼–ç¨‹ï¼Œå…¶ç›¸å…³çš„ç±»å’Œæ¥å£åœ¨ java.io \nBIO(blocking I/O) ï¼š \n\nåŒæ­¥é˜»å¡ï¼ŒæœåŠ¡å™¨å®ç°æ¨¡å¼ä¸ºä¸€ä¸ªè¿æ¥ä¸€ä¸ªçº¿ç¨‹ï¼Œå³å®¢æˆ·ç«¯æœ‰è¿æ¥è¯·æ±‚æ—¶æœåŠ¡å™¨ç«¯å°±éœ€è¦å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹è¿›è¡Œå¤„ç†ï¼Œå¦‚æœè¿™ä¸ªè¿æ¥ä¸åšä»»ä½•äº‹æƒ…ä¼šé€ æˆä¸å¿…è¦çš„çº¿ç¨‹å¼€é”€ï¼Œå¯ä»¥é€šè¿‡çº¿ç¨‹æ± æœºåˆ¶æ”¹å–„(å®ç°å¤šä¸ªå®¢æˆ·è¿æ¥æœåŠ¡å™¨)ã€‚ ã€åæœ‰åº”ç”¨å®ä¾‹ã€‘\n\n\n## Java BIO å·¥ä½œæœºåˆ¶\n\n\nå·¥ä½œåŸç†å›¾\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/682ade66810a45c08196378dc406d6d7~tplv-k3u1fbpfcp-zoom-1.image)\n\n\n### BIOç¼–ç¨‹ç®€å•æµç¨‹\n \n å°±æ˜¯ä»»ä½•ä¸€ä¸ªç½‘ç»œé€šä¿¡æ¡†æ¶éƒ½æ˜¯ä¸€æ ·çš„ï¼Œå°±å¥½æ¯”tomcatå¯¹å§ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ä»–ä»¬åŸºæœ¬æµç¨‹ï¼Œå¹¶ä¸”æˆ‘ä»¬è‡ªå·±ç”¨ä»£ç å»å®ç°ä¸€ä¸‹è¿™ä¸ªæµç¨‹å§ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½å¯¹æ•´ä¸ªbioæœ‰äº†å¾ˆæ¸…æ™°çš„äº†è§£äº†ï¼Œä»–çš„æ­¥éª¤åˆ†ä¸ºä»¥ä¸‹å‡ æ­¥\n \n- æœåŠ¡å™¨ç«¯å¯åŠ¨ä¸€ä¸ªServerSocket\n- å®¢æˆ·ç«¯å¯åŠ¨Socketå¯¹æœåŠ¡å™¨è¿›è¡Œé€šä¿¡ï¼Œé»˜è®¤æƒ…å†µä¸‹æœåŠ¡å™¨ç«¯éœ€è¦å¯¹æ¯ä¸ªå®¢æˆ· å»ºç«‹ä¸€ä¸ªçº¿ç¨‹ä¸ä¹‹é€šè®¯\n- å®¢æˆ·ç«¯å‘å‡ºè¯·æ±‚å, å…ˆå’¨è¯¢æœåŠ¡å™¨æ˜¯å¦æœ‰çº¿ç¨‹å“åº”ï¼Œå¦‚æœæ²¡æœ‰åˆ™ä¼šç­‰å¾…ï¼Œæˆ–è€…è¢«æ‹’ç»\n- å¦‚æœæœ‰å“åº”ï¼Œå®¢æˆ·ç«¯çº¿ç¨‹ä¼šç­‰å¾…è¯·æ±‚ç»“æŸåï¼Œåœ¨ç»§ç»­æ‰§è¡Œ\n\n\n## Java BIO åº”ç”¨å®ä¾‹\nå®ä¾‹è¯´æ˜ï¼š\nä½¿ç”¨BIOæ¨¡å‹ç¼–å†™ä¸€ä¸ªæœåŠ¡å™¨ç«¯ï¼Œç›‘å¬6666ç«¯å£ï¼Œå½“æœ‰å®¢æˆ·ç«¯è¿æ¥æ—¶ï¼Œå°±å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ä¸ä¹‹é€šè®¯ã€‚\n\nè¦æ±‚ä½¿ç”¨çº¿ç¨‹æ± æœºåˆ¶æ”¹å–„ï¼Œå¯ä»¥è¿æ¥å¤šä¸ªå®¢æˆ·ç«¯.\næœåŠ¡å™¨ç«¯å¯ä»¥æ¥æ”¶å®¢æˆ·ç«¯å‘é€çš„æ•°æ®(telnet æ–¹å¼å³å¯)ã€‚\n\n\n### å…·ä½“çš„å®ç°ä»£ç ï¼Œå’Œæ¼”ç¤º\n\n```\npackage com.itheima.mq.rocketmq;\n\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.net.ServerSocket;\nimport java.net.Socket;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\n\n/**\n * @author å°å…­å…­\n * @version 1.0\n * @date 2020/8/1 13:22\n */\npublic class BIOServer {\n\n    public static void main(String[] args) throws Exception {\n\n        //åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ± ,æ¯è¿æ¥åˆ°ä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œå°±å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹å’Œå®¢æˆ·ç«¯è¿›è¡Œé€šä¿¡\n        ExecutorService newCachedThreadPool = Executors.newCachedThreadPool();\n\n        @SuppressWarnings(\"resource\")\n        ServerSocket server=new ServerSocket(6666);\n        System.out.println(\"tomcatæœåŠ¡å™¨å¯åŠ¨...\");\n        while(true){\n            //é˜»å¡ï¼Œ ç­‰å¾…å®¢æˆ·ç«¯è¿æ¥\n            final Socket socket = server.accept();\n            System.out.println(\"è¿æ¥åˆ°ä¸€ä¸ªå®¢æˆ·ç«¯ï¼\");\n            newCachedThreadPool.execute(new Runnable() {\n\n                @Override\n                public void run() {\n                    //ä¸šåŠ¡å¤„ç†\n                    handler(socket);\n                }\n            });\n        }\n\n    }\n\n    /**\n     * å¤„ç†\n     * @param socket\n     */\n    public static void handler(Socket socket){\n        try {\n            byte[] bytes = new byte[1024];\n            InputStream inputStream = socket.getInputStream();\n\n            while(true){\n                //è¯»å®¢æˆ·ç«¯æ•°æ® é˜»å¡\n                int read = inputStream.read(bytes);\n                if(read != -1){\n                    System.out.println(new String(bytes, 0, read));\n                }else{\n                    break;\n                }\n            }\n\n        } catch (Exception e) {\n            e.printStackTrace();\n        }finally{\n            try {\n                System.out.println(\"å…³é—­å’Œclientçš„è¿æ¥..\");\n                socket.close();\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n}\n\n```\nä¸Šé¢çš„ä»£ç  ç”¨çš„ä¹Ÿæ˜¯jdkè‡ªå¸¦çš„çº¿ç¨‹æ± ï¼Œæ€ä¹ˆè¯´å‘¢ï¼Œå…¶å®æˆ‘çœ‹åˆ°å¾ˆå¤šå¼€æºæ¡†æ¶éƒ½ç”¨äº†è‡ªå¸¦çš„çº¿ç¨‹æ± ï¼Œå°±è¿é˜¿é‡Œçš„æ¡†æ¶ä¹Ÿæ˜¯nacosï¼Œå…¶å®è¯´ä»€ä¹ˆè‡ªå·±çš„çº¿ç¨‹æ± ä¼šoomå•¥çš„ï¼Œè¿™ä¸ªå¾—è‡ªæµ‹äº†æ‰è¡Œã€‚\n\n### æµ‹è¯•ç»“æœ\n\nè¿™è¾¹å°å…­å…­æ²¡æœ‰è‡ªå·±å†™å®¢æˆ·ç«¯äº†ï¼Œè€Œæ˜¯ç”¨çš„telent \n\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ed97c3b384ff4dbc998e2d9f7cf341ea~tplv-k3u1fbpfcp-zoom-1.image)\n\n\n### æ€»ç»“ä¸€ä¸‹ \n\n- ç¬¬ä¸€ä¸ªæˆ‘ä»¬è¦ æä¸€ä¸ªserverSocket\n\n- ServerSocket server=new ServerSocket(6666);\n\n- ç„¶åé€šè¿‡  final Socket socket = server.accept()ï¼Œè·å¾—ä¸€ä¸ªsocket å¯¹è±¡ï¼Œå½“å®¢æˆ·ç«¯æ²¡æœ‰å‘é€ä¿¡æ¯ç»™æœåŠ¡ç«¯çš„æ—¶å€™ï¼Œæ­¤æ—¶çš„çº¿ç¨‹æ˜¯é˜»å¡çš„ã€‚ä¹‹åå°±æ˜¯ç›¸äº’é€šä¿¡äº†\n\n\n## ç»“å°¾\n\næˆ‘ä»¬æ¥çœ‹çœ‹BIOè¿™ç§IOæ¨¡å‹æœ‰ä»€ä¹ˆé—®é¢˜\n\n- æ¯ä¸ªè¯·æ±‚éƒ½éœ€è¦åˆ›å»ºç‹¬ç«‹çš„çº¿ç¨‹ï¼Œä¸å¯¹åº”çš„å®¢æˆ·ç«¯è¿›è¡Œæ•°æ® Readï¼Œä¸šåŠ¡å¤„ç†ï¼Œæ•°æ® Write ã€‚\n- å½“å¹¶å‘æ•°è¾ƒå¤§æ—¶ï¼Œéœ€è¦åˆ›å»ºå¤§é‡çº¿ç¨‹æ¥å¤„ç†è¿æ¥ï¼Œç³»ç»Ÿèµ„æºå ç”¨è¾ƒå¤§ã€‚\n- è¿æ¥å»ºç«‹åï¼Œå¦‚æœå½“å‰çº¿ç¨‹æš‚æ—¶æ²¡æœ‰æ•°æ®å¯è¯»ï¼Œåˆ™çº¿ç¨‹å°±é˜»å¡åœ¨ Read æ“ä½œä¸Šï¼Œé€ æˆçº¿ç¨‹èµ„æºæµªè´¹\n\n\n\n![](https://user-gold-cdn.xitu.io/2020/4/7/1715405b9c95d021?w=900&h=500&f=png&s=109836)\n\n## æ—¥å¸¸æ±‚èµ\n> å¥½äº†å„ä½ï¼Œä»¥ä¸Šå°±æ˜¯è¿™ç¯‡æ–‡ç« çš„å…¨éƒ¨å†…å®¹äº†ï¼Œèƒ½çœ‹åˆ°è¿™é‡Œçš„äººå‘€ï¼Œéƒ½æ˜¯**çœŸç²‰**ã€‚\n\n> åˆ›ä½œä¸æ˜“ï¼Œå„ä½çš„æ”¯æŒå’Œè®¤å¯ï¼Œå°±æ˜¯æˆ‘åˆ›ä½œçš„æœ€å¤§åŠ¨åŠ›ï¼Œæˆ‘ä»¬ä¸‹ç¯‡æ–‡ç« è§\n\n>å…­è„‰ç¥å‰‘ | æ–‡ ã€åŸåˆ›ã€‘å¦‚æœæœ¬ç¯‡åšå®¢æœ‰ä»»ä½•é”™è¯¯ï¼Œè¯·æ‰¹è¯„æŒ‡æ•™ï¼Œä¸èƒœæ„Ÿæ¿€ ï¼\n\n\n\n\n", "user_name": "å…­è„‰ç¥å‰‘", "description": "ç§ä¸€æ£µæ ‘æœ€å¥½çš„æ—¶é—´æ˜¯åå¹´å‰ï¼Œå…¶æ¬¡æ˜¯ç°åœ¨", "got_view_count": 75931, "category_name": "åç«¯", "ctime": 1457483880}
{"tag_name": "Java", "concern_user_count": 252044, "user_id": "3650034333660590", "title": "ç®€ç›´éªšæ“ä½œï¼ŒThreadLocalè¿˜èƒ½å½“ç¼“å­˜ç”¨", "mark_content": "## èƒŒæ™¯è¯´æ˜\n\næœ‰æœ‹å‹é—®æˆ‘ä¸€ä¸ªå…³äºæ¥å£ä¼˜åŒ–çš„é—®é¢˜ï¼Œä»–çš„ä¼˜åŒ–ç‚¹å¾ˆæ¸…æ™°ï¼Œç”±äºæ¥å£ä¸­è°ƒç”¨äº†å†…éƒ¨å¾ˆå¤šçš„ service å»ç»„æˆäº†ä¸€ä¸ªå®Œæˆçš„ä¸šåŠ¡åŠŸèƒ½ã€‚æ¯ä¸ª service ä¸­çš„é€»è¾‘éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œè¿™æ ·å°±å¯¼è‡´äº†å¾ˆå¤šæŸ¥è¯¢æ˜¯é‡å¤çš„ï¼Œçœ‹ä¸‹å›¾ä½ å°±æ˜ç™½äº†ã€‚\n\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f3f6d31f7d6349898608ad6dbef8d6fd~tplv-k3u1fbpfcp-zoom-1.image)\n\n## ä¸Šå±‚æŸ¥è¯¢ä¼ é€’ä¸‹å»\n\nå¯¹äºè¿™ç§åœºæ™¯æœ€å¥½çš„å°±æ˜¯åœ¨ä¸Šå±‚å°†éœ€è¦çš„æ•°æ®æŸ¥è¯¢å‡ºæ¥ï¼Œç„¶åä¼ é€’åˆ°ä¸‹å±‚å»æ¶ˆè´¹ã€‚è¿™æ ·å°±ä¸ç”¨é‡å¤æŸ¥è¯¢äº†ã€‚\n\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b491752c4d6548748e97846f444af574~tplv-k3u1fbpfcp-zoom-1.image)\n\nå¦‚æœå¼€å§‹å†™ä»£ç çš„æ—¶å€™æ˜¯è¿™æ ·åšçš„æ²¡é—®é¢˜ï¼Œä½†å¾ˆå¤šæ—¶å€™ï¼Œä¹‹å‰å†™çš„æ—¶å€™éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œæˆ–è€…å¤ç”¨çš„è€é€»è¾‘ï¼Œé‡Œé¢å°±æ˜¯æœ‰ç‹¬ç«‹çš„æŸ¥è¯¢ã€‚\n\nå¦‚æœè¦åšä¼˜åŒ–å°±åªèƒ½å°†è€çš„æ–¹æ³•é‡è½½ä¸€ä¸ªï¼Œå°†éœ€è¦çš„ä¿¡æ¯ç›´æ¥ä¼ é€’è¿‡å»ã€‚\n\n```plain\npublic void xxx(int goodsId) {\n    Goods goods = goodsService.get(goodsId);\n    .....\n}\npublic void xxx(Goods goods) {\n    .....\n}\n```\n\n## åŠ ç¼“å­˜\n\nå¦‚æœä½ çš„ä¸šåŠ¡åœºæ™¯å…è®¸æ•°æ®æœ‰ä¸€å®šå»¶è¿Ÿï¼Œé‚£ä¹ˆé‡å¤è°ƒç”¨ä½ å¯ä»¥ç›´æ¥é€šè¿‡åŠ ç¼“å­˜æ¥è§£å†³ã€‚è¿™æ ·çš„å¥½å¤„åœ¨äºä¸ä¼šé‡å¤æŸ¥è¯¢æ•°æ®åº“ï¼Œè€Œæ˜¯ç›´æ¥ä»ç¼“å­˜ä¸­å–æ•°æ®ã€‚\n\næ›´å¤§çš„å¥½å¤„åœ¨äºå¯¹äºä¼˜åŒ–ç±»çš„å½±å“æœ€å°ï¼ŒåŸæœ‰çš„ä»£ç é€»è¾‘éƒ½ä¸ç”¨æ”¹å˜ï¼Œåªéœ€è¦åœ¨æŸ¥è¯¢çš„æ–¹æ³•ä¸ŠåŠ æ³¨è§£è¿›è¡Œç¼“å­˜å³å¯ã€‚\n\n```plain\npublic void xxx(int goodsId) {\n    Goods goods = goodsService.get(goodsId);\n    .....\n}\npublic void xxx(Goods goods) {\n    Goods goods = goodsService.get(goodsId);\n    .....\n}\nclass GoodsService {\n    @Cached(expire = 10, timeUnit = TimeUnit.SECONDS)\n    public Goods get(int goodsId) {\n        return dao.findById(goodsId);\n    }\n}\n```\n\nå¦‚æœä½ çš„ä¸šåŠ¡åœºæ™¯ä¸å…è®¸æœ‰ç¼“å­˜çš„è¯ï¼Œä¸Šé¢è¿™ä¸ªæ–¹æ³•å°±ä¸èƒ½ç”¨äº†ã€‚é‚£ä¹ˆæ˜¯ä¸æ˜¯è¿˜å¾—æ”¹ä»£ç ï¼Œå°†éœ€è¦çš„ä¿¡æ¯ä¸€å±‚å±‚å¾€ä¸‹ä¼ é€’å‘¢ï¼Ÿ\n\n## è‡ªå®šä¹‰çº¿ç¨‹å†…çš„ç¼“å­˜\n\næˆ‘ä»¬æ€»ç»“ä¸‹ç›®å‰çš„é—®é¢˜ï¼š\n\n1. åŒä¸€æ¬¡è¯·æ±‚å†…ï¼Œå¤šæ¬¡ç›¸åŒçš„æŸ¥è¯¢è·å– RPC ç­‰çš„è°ƒç”¨ã€‚\n2. æ•°æ®å®æ—¶æ€§è¦æ±‚é«˜ï¼Œä¸é€‚åˆåŠ ç¼“å­˜ï¼Œä¸»è¦æ˜¯åŠ ç¼“å­˜ä¹Ÿä¸å¥½è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œé™¤éé‡‡ç”¨æ•°æ®å˜æ›´ä¸»åŠ¨æ›´æ–°ç¼“å­˜çš„æ–¹å¼ã€‚\n3. åªéœ€è¦åœ¨è¿™ä¸€æ¬¡è¯·æ±‚é‡Œç¼“å­˜å³å¯ï¼Œä¸å½±å“å…¶ä»–åœ°æ–¹ã€‚\n4. ä¸æƒ³æ”¹åŠ¨å·²æœ‰ä»£ç ã€‚\n\næ€»ç»“åå‘ç°è¿™ä¸ªåœºæ™¯é€‚åˆç”¨ ThreadLocal æ¥ä¼ é€’æ•°æ®ï¼Œå¯¹å·²æœ‰ä»£ç æ”¹åŠ¨é‡æœ€å°ï¼Œè€Œä¸”ä¹Ÿåªå¯¹å½“å‰çº¿ç¨‹ç”Ÿæ•ˆï¼Œä¸ä¼šå½±å“å…¶ä»–çº¿ç¨‹ã€‚\n\n```plain\npublic void xxx(int goodsId) {\n    Goods goods = ThreadLocal.get();\n    if (goods == null) {\n        goods = goodsService.get(goodsId);\n    }\n    .....\n}\n```\n\nä¸Šé¢ä»£ç å°±æ˜¯ä½¿ç”¨äº† ThreadLocal æ¥è·å–æ•°æ®ï¼Œå¦‚æœæœ‰çš„è¯å°±ç›´æ¥ä½¿ç”¨ï¼Œä¸ç”¨å»é‡æ–°æŸ¥è¯¢ï¼Œæ²¡æœ‰çš„è¯å°±å»æŸ¥è¯¢ï¼Œä¸å½±å“è€é€»è¾‘ã€‚\n\nè™½ç„¶èƒ½å®ç°æ•ˆæœï¼Œä½†æ˜¯ä¸å¤ªå¥½ï¼Œä¸å¤Ÿä¼˜é›…ã€‚ä¹Ÿä¸å¤Ÿé€šç”¨ï¼Œå¦‚æœä¸€æ¬¡è¯·æ±‚å†…è¦ç¼“å­˜å¤šç§ç±»å‹çš„æ•°æ®æ€ä¹ˆå¤„ç†? ThreadLocal å°±ä¸èƒ½å­˜å‚¨å›ºå®šçš„ç±»å‹ã€‚è¿˜æœ‰å°±æ˜¯è€çš„é€»è¾‘è¿˜æ˜¯å¾—æ”¹ï¼ŒåŠ äº†ä¸ªåˆ¤æ–­ã€‚\n\nä¸‹é¢ä»‹ç»ä¸€ç§æ¯”è¾ƒä¼˜é›…çš„æ–¹å¼ï¼š\n\n1. è‡ªå®šä¹‰ç¼“å­˜æ³¨è§£ï¼ŒåŠ åœ¨æŸ¥è¯¢çš„æ–¹æ³•ä¸Šã€‚\n2. å®šä¹‰åˆ‡é¢åˆ‡åˆ°åŠ äº†ç¼“å­˜æ³¨è§£çš„æ–¹æ³•ä¸Šï¼Œç¬¬ä¸€æ¬¡è·å–è¿”å›å€¼å­˜å…¥ ThreadLocalã€‚ç¬¬äºŒæ¬¡ç›´æ¥ä» ThreadLocal ä¸­å–å€¼è¿”å›ã€‚\n3. ThreadLocal ä¸­å­˜å‚¨ Mapï¼ŒKey ä¸ºæŸæ–¹æ³•çš„æŸä¸€æ ‡è¯†ï¼Œè¿™æ ·å¯ä»¥ç¼“å­˜å¤šç§ç±»å‹çš„ç»“æœã€‚\n4. åœ¨ Filter ä¸­å°† ThreadLocal è¿›è¡Œ remove æ“ä½œï¼Œå› ä¸ºçº¿ç¨‹æ˜¯å¤ç”¨çš„ï¼Œä½¿ç”¨å®Œéœ€è¦æ¸…ç©ºã€‚\n\næ³¨æ„ï¼šThreadLocal ä¸èƒ½è·¨çº¿ç¨‹ï¼Œå¦‚æœæœ‰è·¨çº¿ç¨‹éœ€æ±‚ï¼Œè¯·ä½¿ç”¨é˜¿é‡Œçš„ ttl æ¥è£…é¥°ã€‚\n\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d53cba0e9f9245c28f81b71a09672ab2~tplv-k3u1fbpfcp-zoom-1.image)\n\n### æ³¨è§£å®šä¹‰\n\n```plain\n@Target({ ElementType.METHOD })\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface ThreadLocalCache {\n    /**\n     * ç¼“å­˜keyï¼Œæ”¯æŒSPELè¡¨è¾¾å¼\n     * @return\n     */\n    String key() default \"\";\n}\n```\n\n### å­˜å‚¨å®šä¹‰\n\n```plain\n/**\n * çº¿ç¨‹å†…ç¼“å­˜ç®¡ç†\n *\n * @ä½œè€… å°¹å‰æ¬¢\n * @æ—¶é—´ 2020-07-12 10:47\n */\npublic class ThreadLocalCacheManager {\n    private static ThreadLocal<Map> threadLocalCache = new ThreadLocal<>();\n    public static void setCache(Map value) {\n        threadLocalCache.set(value);\n    }\n    public static Map getCache() {\n        return threadLocalCache.get();\n    }\n    public static void removeCache() {\n        threadLocalCache.remove();\n    }\n    public static void removeCache(String key) {\n        Map cache = threadLocalCache.get();\n        if (cache != null) {\n            cache.remove(key);\n        }\n    }\n}\n```\n\n### åˆ‡é¢å®šä¹‰\n\n```plain\n/**\n * çº¿ç¨‹å†…ç¼“å­˜\n *\n * @ä½œè€… å°¹å‰æ¬¢\n * @æ—¶é—´ 2020-07-12 10:48\n */\n@Aspect\npublic class ThreadLocalCacheAspect {\n    @Around(value = \"@annotation(localCache)\")\n    public Object aroundAdvice(ProceedingJoinPoint joinpoint, ThreadLocalCache localCache) throws Throwable {\n        Object[] args = joinpoint.getArgs();\n        Method method = ((MethodSignature) joinpoint.getSignature()).getMethod();\n        String className = joinpoint.getTarget().getClass().getName();\n        String methodName = method.getName();\n        String key = parseKey(localCache.key(), method, args, getDefaultKey(className, methodName, args));\n        Map cache = ThreadLocalCacheManager.getCache();\n        if (cache == null) {\n            cache = new HashMap();\n        }\n        Map finalCache = cache;\n        Map<String, Object> data = new HashMap<>();\n        data.put(\"methodName\", className + \".\" + methodName);\n        Object cacheResult =  CatTransactionManager.newTransaction(() -> {\n            if (finalCache.containsKey(key)) {\n                return finalCache.get(key);\n            }\n            return null;\n        }, \"ThreadLocalCache\", \"CacheGet\", data);\n        if (cacheResult != null) {\n            return cacheResult;\n        }\n        return CatTransactionManager.newTransaction(() -> {\n            Object result = null;\n            try {\n                result = joinpoint.proceed();\n            } catch (Throwable throwable) {\n                throw new RuntimeException(throwable);\n            }\n            finalCache.put(key, result);\n            ThreadLocalCacheManager.setCache(finalCache);\n            return result;\n        }, \"ThreadLocalCache\", \"CachePut\", data);\n    }\n    private String getDefaultKey(String className, String methodName, Object[] args) {\n        String defaultKey = className + \".\" + methodName;\n        if (args != null) {\n            defaultKey = defaultKey + \".\" + JsonUtils.toJson(args);\n        }\n        return defaultKey;\n    }\n    private String parseKey(String key, Method method, Object[] args, String defaultKey){\n        if (!StringUtils.hasText(key)) {\n            return defaultKey;\n        }\n        LocalVariableTableParameterNameDiscoverer nameDiscoverer = new LocalVariableTableParameterNameDiscoverer();\n        String[] paraNameArr = nameDiscoverer.getParameterNames(method);\n        ExpressionParser parser = new SpelExpressionParser();\n        StandardEvaluationContext context = new StandardEvaluationContext();\n        for(int i = 0;i < paraNameArr.length; i++){\n            context.setVariable(paraNameArr[i], args[i]);\n        }\n        try {\n            return parser.parseExpression(key).getValue(context, String.class);\n        } catch (SpelEvaluationException e) {\n            // è§£æä¸å‡ºSPELé»˜è®¤ä¸ºç±»å+æ–¹æ³•å+å‚æ•°\n            return defaultKey;\n        }\n    }\n}\n```\n\n### è¿‡æ»¤å™¨å®šä¹‰\n\n```plain\n/**\n * çº¿ç¨‹ç¼“å­˜è¿‡æ»¤å™¨\n *\n * @ä½œè€… å°¹å‰æ¬¢\n * @ä¸ªäººå¾®ä¿¡ jihuan900\n * @å¾®ä¿¡å…¬ä¼—å· çŒ¿å¤©åœ°\n * @GitHub https://github.com/yinjihuan\n * @ä½œè€…ä»‹ç» http://cxytiandi.com/about\n * @æ—¶é—´ 2020-07-12 19:46\n */\n@Slf4j\npublic class ThreadLocalCacheFilter implements Filter {\n    @Override\n    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {\n        filterChain.doFilter(servletRequest, servletResponse);\n        // æ‰§è¡Œå®Œåæ¸…é™¤ç¼“å­˜\n        ThreadLocalCacheManager.removeCache();\n    }\n}\n```\n\n### è‡ªåŠ¨é…ç½®ç±»\n\n```plain\n@Configuration\npublic class ThreadLocalCacheAutoConfiguration {\n    @Bean\n    public FilterRegistrationBean idempotentParamtFilter() {\n        FilterRegistrationBean registration = new FilterRegistrationBean();\n        ThreadLocalCacheFilter filter = new ThreadLocalCacheFilter();\n        registration.setFilter(filter);\n        registration.addUrlPatterns(\"/*\");\n        registration.setName(\"thread-local-cache-filter\");\n        registration.setOrder(1);\n        return registration;\n    }\n    @Bean\n    public ThreadLocalCacheAspect threadLocalCacheAspect() {\n        return new ThreadLocalCacheAspect();\n    }\n}\n```\n\n### ä½¿ç”¨æ¡ˆä¾‹\n\n```plain\n@Service\npublic class TestService {\n    /**\n     * ThreadLocalCache ä¼šç¼“å­˜ï¼Œåªå¯¹å½“å‰çº¿ç¨‹æœ‰æ•ˆ\n     * @return\n     */\n    @ThreadLocalCache\n    public String getName() {\n        System.out.println(\"å¼€å§‹æŸ¥è¯¢äº†\");\n        return \"yinjihaun\";\n    }\n    /**\n     * æ”¯æŒSPELè¡¨è¾¾å¼\n     * @param id\n     * @return\n     */\n    @ThreadLocalCache(key = \"#id\")\n    public String getName(String id) {\n        System.out.println(\"å¼€å§‹æŸ¥è¯¢äº†\");\n        return \"yinjihaun\" + id;\n    }\n}\n```\n\nåŠŸèƒ½ä»£ç ï¼š [https://github.com/yinjihuan/kitty](https://github.com/yinjihuan/kitty)\n\næ¡ˆä¾‹ä»£ç ï¼š [https://github.com/yinjihuan/kitty-samples](https://github.com/yinjihuan/kitty-samples)\n\n**_å…³äºä½œè€…_** _ï¼šå°¹å‰æ¬¢ï¼Œç®€å•çš„æŠ€æœ¯çˆ±å¥½è€…ï¼Œã€ŠSpring Cloud å¾®æœåŠ¡-å…¨æ ˆæŠ€æœ¯ä¸æ¡ˆä¾‹è§£æã€‹, ã€ŠSpring Cloud å¾®æœåŠ¡ å…¥é—¨ å®æˆ˜ä¸è¿›é˜¶ã€‹ä½œè€…, å…¬ä¼—å·_ **_çŒ¿å¤©åœ°_** _å‘èµ·äººã€‚ä¸ªäººå¾®ä¿¡_ **_jihuan900_** _,æ¬¢è¿å‹¾æ­ã€‚_\n\n> æ„Ÿå…´è¶£çš„å¯ä»¥å…³æ³¨ä¸‹æˆ‘çš„å¾®ä¿¡å…¬ä¼—å· **çŒ¿å¤©åœ°**ï¼Œæ›´å¤šæŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´é˜…è¯»ã€‚æˆ‘çš„GitHubä¹Ÿæœ‰ä¸€äº›å¼€æºçš„ä»£ç  https://github.com/yinjihuan\n\n![](https://user-gold-cdn.xitu.io/2020/1/7/16f7dc266b81d71e?w=800&h=400&f=png&s=68150)", "user_name": "çŒ¿å¤©åœ°", "description": "æ¬¢è¿å¤§å®¶å…³æ³¨æˆ‘çš„å¾®ä¿¡å…¬ä¼—å·â€˜çŒ¿å¤©åœ°â€™ï¼Œ çŒ¿å¤©åœ°ç”±ã€ŠSpring Cloudå¾®æœåŠ¡-å…¨", "got_view_count": 130391, "category_name": "åç«¯", "ctime": 1457483880}
{"tag_name": "é¢è¯•", "concern_user_count": 285352, "user_id": "3227821869407208", "title": "è·¨åŸŸï¼ˆCORSï¼‰äº§ç”ŸåŸå› åˆ†æä¸è§£å†³æ–¹æ¡ˆï¼Œè¿™ä¸€æ¬¡å½»åº•ææ‡‚å®ƒ", "mark_content": "Cross-origin Resource Sharing ä¸­æ–‡åç§° â€œ**è·¨åŸŸèµ„æºå…±äº«**â€ ç®€ç§° â€œ**CORS**â€ï¼Œå®ƒçªç ´äº†ä¸€ä¸ªè¯·æ±‚åœ¨æµè§ˆå™¨å‘å‡ºåªèƒ½åœ¨åŒæºçš„æƒ…å†µä¸‹å‘æœåŠ¡å™¨è·å–æ•°æ®çš„é™åˆ¶ã€‚\n\næœ¬æ–‡ä¼šå…ˆä»ä¸€ä¸ªç¤ºä¾‹å¼€å§‹ï¼Œåˆ†ææ˜¯æµè§ˆå™¨è¿˜æ˜¯æœåŠ¡å™¨çš„é™åˆ¶ï¼Œä¹‹åè®²è§£ä»€ä¹ˆæ—¶å€™ä¼šäº§ç”Ÿé¢„æ£€è¯·æ±‚ï¼Œåœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œä¹Ÿä¼šè®²è§£ä¸€ä¸‹è§£å†³è¯¥é—®é¢˜çš„å®ç°æ–¹æ³•ï¼Œæ–‡æœ«ä¼šå†æ€»ç»“å¦‚ä½•ä½¿ç”¨ Node.js ä¸­çš„ cors æ¨¡å—å’Œ Nginx åå‘ä»£ç†æ¥è§£å†³è·¨åŸŸé—®é¢˜ã€‚\n\næ–‡ä¸­ä½¿ç”¨ Node.js åšä¸€äº› Demo çš„æ¼”ç¤ºï¼Œæ¯ä¸€å°èŠ‚ä¹‹åä¹Ÿä¼šç»™äºˆä»£ç çš„ Demo åœ°å€ã€‚\n\n## æµè§ˆå™¨è¿˜æ˜¯æœåŠ¡å™¨çš„é™åˆ¶\n\nå…ˆæ€è€ƒä¸‹ï¼ŒCORS æ˜¯æµè§ˆå™¨ç«¯è¿˜æ˜¯æœåŠ¡å™¨ç«¯çš„é™åˆ¶ï¼Ÿä¸ºäº†æ›´å¥½çš„è¯´æ˜è¿™ä¸ªé—®é¢˜ï¼Œä»ä¸€æ®µç¤ºä¾‹å¼€å§‹ã€‚\n\n### ä»ä¸€æ®µç¤ºä¾‹å¼€å§‹\n\n**index.html**\n\nåˆ›å»º index.html ä½¿ç”¨ fetch è°ƒç”¨ http://127.0.0.1:3011/api/data\n\n```html\n<body>\n  <!-- <script src=\"https://cdn.bootcdn.net/ajax/libs/fetch/3.0.0/fetch.min.js\"></script> -->\n  <script>\n    fetch('http://127.0.0.1:3011/api/data');\n  </script>\n</body>\n```\n\n**client.js**\n\nåˆ›å»º client.js ç”¨æ¥åŠ è½½ä¸Šé¢ index.htmlã€‚è®¾ç½®ç«¯å£ä¸º 3010ã€‚\n\n```js\nconst http = require('http');\nconst fs = require('fs');\nconst PORT = 3010;\nhttp.createServer((req, res) => {\n  fs.createReadStream('index.html').pipe(res);\n}).listen(PORT);\n```\n\n**server.js**\n\nåˆ›å»º server.js å¼€å¯ä¸€ä¸ªæœåŠ¡ï¼Œæ ¹æ®ä¸åŒçš„è¯·æ±‚è¿”å›ä¸åŒçš„å“åº”ã€‚è®¾ç½®ç«¯å£ä¸º 3011ã€‚\n\n```js\nconst http = require('http');\nconst PORT = 3011;\n\nhttp.createServer((req, res) => {\n  const url = req.url;\n  console.log('request url: ', url);\n  if (url === '/api/data') {\n    return res.end('ok!');\n  }\n  if (url === '/script') {\n    return res.end('console.log(\"hello world!\");');\n  }\n}).listen(PORT);\n\nconsole.log('Server listening on port ', PORT);\n```\n\n### æµ‹è¯•åˆ†æåŸå› \n\nè¿è¡Œä¸Šé¢çš„ client.jsã€server.js æµè§ˆå™¨è¾“å…¥ http://127.0.0.1:3010 åœ¨ Chrome æµè§ˆå™¨ä¸­æ‰“å¼€ Network é¡¹æŸ¥çœ‹è¯·æ±‚ä¿¡æ¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n\n\n![](https://imgkr2.cn-bj.ufileos.com/aa6e4452-7d55-4cac-8d74-6487f89a3615.png?UCloudPublicKey=TOKEN_8d8b72be-579a-4e83-bfd0-5f6ce1546f13&Signature=AVEIaiaohnMHJbQt2Hqv6DkOClc%253D&Expires=1597153359)\n\n\nå·¦ä¾§æ˜¯ä½¿ç”¨ fetch è¯·æ±‚çš„ 127.0.0.1:3011/api/data æ¥å£ï¼Œåœ¨è¯·æ±‚å¤´é‡Œå¯ä»¥çœ‹åˆ°æœ‰ Origin å­—æ®µï¼Œæ˜¾ç¤ºäº†æˆ‘ä»¬å½“å‰çš„è¯·æ±‚ä¿¡æ¯ã€‚å¦å¤–è¿˜æœ‰ä¸‰ä¸ª Sec-Fetch-* å¼€å¤´çš„å­—æ®µï¼Œè¿™æ˜¯ä¸€ä¸ªæ–°çš„è‰æ¡ˆ **[Fetch Metadata Request Headers](https://w3c.github.io/webappsec-fetch-metadata/ \"Fetch Metadata Request Headers\")**ã€‚\n\nå…¶ä¸­ Sec-Fetch-Mode è¡¨ç¤ºè¯·æ±‚çš„æ¨¡å¼ï¼Œé€šè¿‡å·¦å³ä¸¤ä¾§ç»“æœå¯¹æ¯”ä¹Ÿå¯ä»¥çœ‹å‡ºå·¦ä¾§æ˜¯è·¨åŸŸçš„ã€‚Sec-Fetch-Site è¡¨ç¤ºçš„æ˜¯è¿™ä¸ªè¯·æ±‚æ˜¯åŒæºè¿˜æ˜¯è·¨åŸŸï¼Œç”±äºæˆ‘ä»¬è¿™ä¸¤ä¸ªè¯·æ±‚éƒ½æ˜¯ç”± 3010 ç«¯å£å‘å‡ºå»è¯·æ±‚ 3011 ç«¯å£ï¼Œæ˜¯ä¸ç¬¦åˆåŒæºç­–ç•¥çš„ã€‚\n\nçœ‹ä¸‹æµè§ˆå™¨ Console ä¸‹çš„æ—¥å¿—ä¿¡æ¯ï¼Œæ ¹æ®æç¤ºå¾—çŸ¥åŸå› æ˜¯ä» â€œhttp://127.0.0.1:3010â€ è®¿é—® â€œhttp://127.0.0.1:3011/api/dataâ€ è¢« CORS ç­–ç•¥é˜»æ­¢äº†ï¼Œæ²¡æœ‰ â€œAccess-Control-Allow-Originâ€ æ ‡å¤´ã€‚\n\n\n![](https://imgkr2.cn-bj.ufileos.com/0aeeba1c-23e6-43af-a4fc-1a098e7481c4.png?UCloudPublicKey=TOKEN_8d8b72be-579a-4e83-bfd0-5f6ce1546f13&Signature=KFpDjSxmznVjQl%252FPJ1AkLGOutBw%253D&Expires=1597153404)\n\n\n\nåœ¨çœ‹ä¸‹æœåŠ¡ç«¯çš„æ—¥å¿—ï¼Œå› ä¸ºè¯·æ±‚ 3011 æœåŠ¡ï¼Œæ‰€ä»¥å°±çœ‹ä¸‹ 3011 æœåŠ¡çš„æ—¥å¿—ä¿¡æ¯ï¼š\n\n```\nServer listening on port  3011\nrequest url:  /script\nrequest url:  /api/data\n```\n\nåœ¨æœåŠ¡ç«¯æ˜¯æœ‰æ”¶åˆ°è¯·æ±‚ä¿¡æ¯çš„ï¼Œè¯´æ˜æœåŠ¡ç«¯æ˜¯æ­£å¸¸å·¥ä½œçš„ã€‚\n\næˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ç»ˆç«¯é€šè¿‡ curl å‘½ä»¤æµ‹è¯•ä¸‹ï¼Œåœ¨ç»ˆç«¯è„±ç¦»æµè§ˆå™¨ç¯å¢ƒä¹Ÿæ˜¯å¯ä»¥æ­£å¸¸è¯·æ±‚çš„ã€‚\n\n```\n$ curl http://127.0.0.1:3011/api/data\nok!\n```\n\næœ¬èŠ‚ä»£ç ç¤ºä¾‹ï¼š\n\n```\ngithub.com/qufei1993/http-protocol/tree/master/example/cors/01\n```\n\n### æ€»ç»“å›ç­”æœ€å¼€å§‹æå‡ºçš„é—®é¢˜\n\n**æµè§ˆå™¨é™åˆ¶äº†ä»è„šæœ¬å†…å‘èµ·çš„è·¨æº HTTP è¯·æ±‚**ï¼Œä¾‹å¦‚ **XMLHttpRequest** å’Œæˆ‘ä»¬æœ¬ç¤ºä¾‹ä¸­ä½¿ç”¨çš„ **Fetch API éƒ½æ˜¯éµå¾ªçš„åŒæºç­–ç•¥**ã€‚\n\nå½“ä¸€ä¸ªè¯·æ±‚åœ¨æµè§ˆå™¨ç«¯å‘é€å‡ºå»åï¼ŒæœåŠ¡ç«¯æ˜¯ä¼šæ”¶åˆ°çš„å¹¶ä¸”ä¹Ÿä¼šå¤„ç†å’Œå“åº”ï¼Œåªä¸è¿‡æµè§ˆå™¨åœ¨è§£æè¿™ä¸ªè¯·æ±‚çš„å“åº”ä¹‹åï¼Œå‘ç°ä¸å±äºæµè§ˆå™¨çš„**åŒæºç­–ç•¥**ï¼ˆåœ°å€é‡Œé¢çš„åè®®ã€åŸŸåå’Œç«¯å£å·å‡ç›¸åŒï¼‰ä¹Ÿæ²¡æœ‰åŒ…å«æ­£ç¡®çš„ CORS å“åº”å¤´ï¼Œè¿”å›ç»“æœè¢«æµè§ˆå™¨ç»™æ‹¦æˆªäº†ã€‚\n\n## é¢„æ£€è¯·æ±‚\n\né¢„æ£€è¯·æ±‚æ˜¯åœ¨å‘é€å®é™…çš„è¯·æ±‚ä¹‹å‰ï¼Œå®¢æˆ·ç«¯ä¼šå…ˆå‘é€ä¸€ä¸ª OPTIONS æ–¹æ³•çš„è¯·æ±‚å‘æœåŠ¡å™¨ç¡®è®¤ï¼Œå¦‚æœé€šè¿‡ä¹‹åï¼Œæµè§ˆå™¨æ‰ä¼šå‘èµ·çœŸæ­£çš„è¯·æ±‚ï¼Œè¿™æ ·å¯ä»¥é¿å…è·¨åŸŸè¯·æ±‚å¯¹æœåŠ¡å™¨çš„ç”¨æˆ·æ•°æ®é€ æˆå½±å“ã€‚\n\nçœ‹åˆ°è¿™é‡Œä½ å¯èƒ½æœ‰ç–‘é—®ä¸ºä»€ä¹ˆä¸Šé¢çš„ç¤ºä¾‹æ²¡æœ‰é¢„æ£€è¯·æ±‚ï¼Ÿå› ä¸º **CORS å°†è¯·æ±‚åˆ†ä¸ºäº†ä¸¤ç±»ï¼šç®€å•è¯·æ±‚å’Œéç®€å•è¯·æ±‚**ã€‚æˆ‘ä»¬ä¸Šé¢çš„æƒ…å†µå±äºç®€å•è¯·æ±‚ï¼Œæ‰€ä»¥ä¹Ÿå°±æ²¡æœ‰äº†é¢„æ£€è¯·æ±‚ã€‚\n\nè®©æˆ‘ä»¬ç»§ç»­åœ¨çœ‹ä¸‹ç®€å•è¯·æ±‚å’Œéç®€å•è¯·æ±‚æ˜¯å¦‚ä½•å®šä¹‰çš„ã€‚\n\n### é¢„æ£€è¯·æ±‚å®šä¹‰\n\næ ¹æ® MDN çš„æ–‡æ¡£å®šä¹‰ï¼Œè¯·æ±‚æ–¹æ³•ä¸ºï¼šGETã€POSTã€HEADï¼Œè¯·æ±‚å¤´ Content-Type ä¸ºï¼štext/plainã€multipart/form-dataã€application/x-www-form-urlencoded çš„å°±å±äº â€œç®€å•è¯·æ±‚â€ ä¸ä¼šè§¦å‘ CORS é¢„æ£€è¯·æ±‚ã€‚\n\nä¾‹å¦‚ï¼Œå¦‚æœè¯·æ±‚å¤´çš„ Content-Type ä¸º application/json å°±ä¼šè§¦å‘ CORS é¢„æ£€è¯·æ±‚ï¼Œè¿™é‡Œä¹Ÿä¼šç§°ä¸º â€œéç®€å•è¯·æ±‚â€ã€‚\n\n[â€œMDN æ–‡æ¡£ developer.mozilla.org/en-US/docs/Web/HTTP/CORS ç®€å•è¯·æ±‚â€](https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS \"â€œMDN æ–‡æ¡£ developer.mozilla.org/en-US/docs/Web/HTTP/CORS ç®€å•è¯·æ±‚â€\") æœ‰æ›´å¤šå…³äºç®€å•è¯·æ±‚çš„å­—æ®µå®šä¹‰ã€‚\n\n### é¢„æ£€è¯·æ±‚ç¤ºä¾‹\n\né€šè¿‡ä¸€ä¸ªç¤ºä¾‹å­¦ä¹ ä¸‹é¢„æ£€è¯·æ±‚ã€‚\n\n#### è®¾ç½®å®¢æˆ·ç«¯\n\nä¸º index.html é‡Œçš„ fetch æ–¹æ³•å¢åŠ ä¸€äº›è®¾ç½®ï¼Œè®¾ç½®è¯·æ±‚çš„æ–¹æ³•ä¸º PUTï¼Œè¯·æ±‚å¤´å¢åŠ ä¸€ä¸ªè‡ªå®šä¹‰å­—æ®µ Test-Corsã€‚\n\n```html\n<script>\n  fetch('http://127.0.0.1:3011/api/data', {\n    method: 'PUT',\n    headers: {\n      'Content-Type': 'text/plain',\n      'Test-Cors': 'abc'\n    }\n  });\n</script>\n```\n\nä¸Šè¿°ä»£ç åœ¨æµè§ˆå™¨æ‰§è¡Œæ—¶ä¼šå‘ç°æ˜¯ä¸€ä¸ªéç®€å•è¯·æ±‚ï¼Œå°±ä¼šå…ˆæ‰§è¡Œä¸€ä¸ªé¢„æ£€è¯·æ±‚ï¼ŒRequest Headers ä¼šæœ‰å¦‚ä¸‹ä¿¡æ¯ï¼š\n\n```\nOPTIONS /api/data HTTP/1.1\nHost: 127.0.0.1:3011\nAccess-Control-Request-Method: PUT\nAccess-Control-Request-Headers: content-type,test-cors\nOrigin: http://127.0.0.1:3010\nSec-Fetch-Mode: cors\n```\n\nå¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ª OPTIONS æ˜¯é¢„æ£€è¯·æ±‚ä½¿ç”¨çš„æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ˜¯åœ¨ HTTP/1.1 åè®®ä¸­æ‰€å®šä¹‰çš„ï¼Œè¿˜æœ‰ä¸€ä¸ªé‡è¦çš„å­—æ®µ **Origin è¡¨ç¤ºè¯·æ±‚æ¥è‡ªå“ªä¸ªæº**ï¼ŒæœåŠ¡ç«¯åˆ™å¯ä»¥æ ¹æ®è¿™ä¸ªå­—æ®µåˆ¤æ–­æ˜¯å¦æ˜¯åˆæ³•çš„è¯·æ±‚æºï¼Œä¾‹å¦‚ Websocket ä¸­å› ä¸ºæ²¡æœ‰äº†åŒæºç­–ç•¥é™åˆ¶ï¼ŒæœåŠ¡ç«¯å¯ä»¥æ ¹æ®è¿™ä¸ªå­—æ®µæ¥åˆ¤æ–­ã€‚\n\n**Access-Control-Request-Method** å‘Šè¯‰æœåŠ¡å™¨ï¼Œå®é™…è¯·æ±‚å°†ä½¿ç”¨ PUT æ–¹æ³•ã€‚\n\n**Access-Control-Request-Headers** å‘Šè¯‰æœåŠ¡å™¨ï¼Œå®é™…è¯·æ±‚å°†ä½¿ç”¨ä¸¤ä¸ªå¤´éƒ¨å­—æ®µ content-type,test-corsã€‚è¿™é‡Œå¦‚æœ content-type æŒ‡å®šçš„ä¸ºç®€å•è¯·æ±‚ä¸­çš„å‡ ä¸ªå€¼ï¼ŒAccess-Control-Request-Headers åœ¨å‘Šè¯‰æœåŠ¡å™¨æ—¶ï¼Œå®é™…è¯·æ±‚å°†åªæœ‰ test-cors è¿™ä¸€ä¸ªå¤´éƒ¨å­—æ®µã€‚\n\n#### è®¾ç½®æœåŠ¡ç«¯\n\nä¸Šé¢è®²è§£äº†å®¢æˆ·ç«¯çš„è®¾ç½®ï¼ŒåŒæ ·çš„è¦ä½¿è¯·æ±‚èƒ½å¤Ÿæ­£å¸¸å“åº”ï¼Œè¿˜éœ€æœåŠ¡ç«¯çš„æ”¯æŒã€‚\n\nä¿®æ”¹æˆ‘ä»¬çš„ server.js é‡ç‚¹æ˜¯è®¾ç½® Response Headers ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š\n\n```js\nres.writeHead(200, {\n  'Access-Control-Allow-Origin': 'http://127.0.0.1:3010',\n  'Access-Control-Allow-Headers': 'Test-CORS, Content-Type',\n  'Access-Control-Allow-Methods': 'PUT,DELETE',\n  'Access-Control-Max-Age': 86400\n});\n```\n\nä¸ºä»€ä¹ˆæ˜¯ä»¥ä¸Šé…ç½®ï¼Ÿé¦–å…ˆé¢„æ£€è¯·æ±‚æ—¶ï¼Œæµè§ˆå™¨ç»™äº†æœåŠ¡å™¨å‡ ä¸ªé‡è¦çš„ä¿¡æ¯ Originã€Method ä¸º PUTã€Headers ä¸º content-type,test-cors æœåŠ¡ç«¯åœ¨æ”¶åˆ°ä¹‹åï¼Œä¹Ÿè¦åšäº›è®¾ç½®ï¼Œç»™äºˆå›åº”ã€‚\n\nAccess-Control-Allow-Origin è¡¨ç¤º â€œhttp://127.0.0.1:3010â€ è¿™ä¸ªè¯·æ±‚æºæ˜¯å¯ä»¥è®¿é—®çš„ï¼Œè¯¥å­—æ®µä¹Ÿå¯ä»¥è®¾ç½®ä¸º â€œ*â€ è¡¨ç¤ºå…è®¸ä»»æ„è·¨æºè¯·æ±‚ã€‚\n\nAccess-Control-Allow-Methods è¡¨ç¤ºæœåŠ¡å™¨å…è®¸å®¢æˆ·ç«¯ä½¿ç”¨ PUTã€DELETE æ–¹æ³•å‘èµ·è¯·æ±‚ï¼Œå¯ä»¥ä¸€æ¬¡è®¾ç½®å¤šä¸ªï¼Œè¡¨ç¤ºæœåŠ¡å™¨æ‰€æ”¯æŒçš„æ‰€æœ‰è·¨åŸŸæ–¹æ³•ï¼Œè€Œä¸å•æ˜¯å½“å‰è¯·æ±‚é‚£ä¸ªæ–¹æ³•ï¼Œè¿™æ ·å¥½å¤„æ˜¯ä¸ºäº†é¿å…å¤šæ¬¡é¢„æ£€è¯·æ±‚ã€‚\n\nAccess-Control-Allow-Headers è¡¨ç¤ºæœåŠ¡å™¨å…è®¸è¯·æ±‚ä¸­æºå¸¦ Test-CORSã€Content-Type å­—æ®µï¼Œä¹Ÿå¯ä»¥è®¾ç½®å¤šä¸ªã€‚\n\nAccess-Control-Max-Age è¡¨ç¤ºè¯¥å“åº”çš„æœ‰æ•ˆæœŸï¼Œå•ä½ä¸ºç§’ã€‚åœ¨æœ‰æ•ˆæ—¶é—´å†…ï¼Œæµè§ˆå™¨æ— é¡»ä¸ºåŒä¸€è¯·æ±‚å†æ¬¡å‘èµ·é¢„æ£€è¯·æ±‚ã€‚è¿˜æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œè¯¥å€¼è¦å°äºæµè§ˆå™¨è‡ªèº«ç»´æŠ¤çš„æœ€å¤§æœ‰æ•ˆæ—¶é—´ï¼Œå¦åˆ™æ˜¯æ— æ•ˆçš„ã€‚\n\nçœ‹ä¸‹å¢åŠ äº†é¢„æ£€è¯·æ±‚çš„æ•ˆæœï¼Œç¬¬ä¸€æ¬¡å…ˆå‘å‡ºäº† OPTIONS è¯·æ±‚ï¼Œå¹¶ä¸”åœ¨è¯·æ±‚å¤´è®¾ç½®äº†æœ¬æ¬¡è¯·æ±‚çš„æ–¹æ³•å’Œ Headers ä¿¡æ¯ï¼ŒæœåŠ¡ç«¯åœ¨ Response ä¹Ÿåšäº†å›åº”ï¼Œåœ¨ OPTIONS æˆåŠŸä¹‹åï¼Œæµè§ˆå™¨ç´§è·Ÿç€æ‰å‘èµ·äº†æˆ‘ä»¬æœ¬æ¬¡éœ€è¦çš„çœŸå®è¯·æ±‚ï¼Œå¦‚å›¾å³ä¾§æ‰€ç¤º Resquest Method ä¸º PUTã€‚\n\n\n![](https://imgkr2.cn-bj.ufileos.com/c443c689-1991-4581-badc-1536acba30e9.png?UCloudPublicKey=TOKEN_8d8b72be-579a-4e83-bfd0-5f6ce1546f13&Signature=6vNXQMcBptT7RN0Kw1vCSa50mzU%253D&Expires=1597153441)\n\n\næœ¬èŠ‚ä»£ç ç¤ºä¾‹ï¼š\n```\ngithub.com/qufei1993/http-protocol/tree/master/example/cors/02\n```\n\n## CORS ä¸è®¤è¯\n\nå¯¹äºè·¨åŸŸçš„ XMLHttpRequest æˆ– Fetch è¯·æ±‚ï¼Œæµè§ˆå™¨æ˜¯ä¸ä¼šå‘é€èº«ä»½å‡­è¯ä¿¡æ¯çš„ã€‚ä¾‹å¦‚æˆ‘ä»¬è¦åœ¨è·¨åŸŸè¯·æ±‚ä¸­å‘é€ Cookie ä¿¡æ¯ï¼Œå°±è¦åšäº›è®¾ç½®ï¼š\n\nä¸ºäº†èƒ½çœ‹åˆ°æ•ˆæœï¼Œæˆ‘å…ˆè‡ªå®šä¹‰äº†ä¸€ä¸ª cookie ä¿¡æ¯ id=NodejsRoadmapã€‚\n\né‡ç‚¹æ˜¯è®¾ç½®è®¤è¯å­—æ®µï¼Œæœ¬æ–‡ä¸­ fetch ç¤ºä¾‹è®¾ç½® **credentials: \"include\"** å¦‚æœæ˜¯ XMLHttpRequest åˆ™è®¾ç½® **withCredentials:\"include\"**\n\n```html\n<body>\n  <script>\n    document.cookie = `id=NodejsRoadmap`;\n    fetch('http://127.0.0.1:3011/api/data', {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n        'Test-Cors': 'abc',\n      },\n      credentials: \"include\"\n    });\n  </script>\n</body>\n```\n\nç»è¿‡ä»¥ä¸Šè®¾ç½®ï¼Œæµè§ˆå™¨å‘é€å®é™…è¯·æ±‚æ—¶ä¼šå‘æœåŠ¡å™¨å‘é€ Cookiesï¼ŒåŒæ—¶æœåŠ¡å™¨ä¹Ÿéœ€è¦åœ¨å“åº”ä¸­è®¾ç½® Access-Control-Allow-Credentials å“åº”å¤´\n\n```js\nres.writeHead(200, {\n  'Access-Control-Allow-Origin': 'http://127.0.0.1:3010',\n  'Access-Control-Allow-Credentials': true\n});\n```\n\nå¦‚æœæœåŠ¡ç«¯ä¸è®¾ç½®æµè§ˆå™¨å°±ä¸ä¼šæ­£å¸¸å“åº”ï¼Œä¼šæŠ¥ä¸€ä¸ªè·¨åŸŸé”™è¯¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n\n```\nAccess to fetch at 'http://127.0.0.1:3011/api/data' from origin 'http://127.0.0.1:3010' has been blocked by CORS policy: Response to preflight request doesn't pass access control check: The value of the 'Access-Control-Allow-Credentials' header in the response is '' which must be 'true' when the request's credentials mode is 'include'.\n```\n\nè¿˜æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œå¦‚æœæˆ‘ä»¬åœ¨è¯·æ±‚ä¸­è®¾ç½®äº† **credentials: \"include\"** æœåŠ¡ç«¯å°±ä¸èƒ½è®¾ç½® **Access-Control-Allow-Origin: \"*\"** åªèƒ½è®¾ç½®ä¸ºä¸€ä¸ªæ˜ç¡®çš„åœ°å€ã€‚\n\næœ¬èŠ‚ä»£ç ç¤ºä¾‹ï¼š\n\n```\ngithub.com/qufei1993/http-protocol/tree/master/example/cors/03\n```\n\n## è§£å†³è·¨åŸŸé—®é¢˜çš„å‡ ç§æ–¹æ³•\n\né€šè¿‡ä¸Šé¢çš„åˆ†æäº†è§£è·¨åŸŸäº§ç”Ÿçš„åŸå› ä¹‹åï¼Œè§£å†³å…¶å®å¹¶ä¸éš¾ï¼Œä¸Šé¢çš„è®²è§£ä¸­å…¶å®ä¹Ÿæä¾›äº†è§£å†³æ–¹æ¡ˆï¼Œä¾‹å¦‚åœ¨ Node.js ä¸­æˆ‘ä»¬å¯ä»¥è®¾ç½®å“åº”å¤´éƒ¨å­—æ®µ Access-Control-Allow-Originã€Access-Control-Expose-Headersã€Access-Control-Allow-Methods ç­‰ï¼Œä½†æ˜¯åœ¨å®é™…å¼€å‘ä¸­è¿™æ ·è®¾ç½®éš¾å…ç¹çï¼Œä¸‹é¢ä»‹ç»å‡ ç§å¸¸ç”¨çš„è§£å†³æ–¹æ³•ã€‚\n\n### ä½¿ç”¨ CORS æ¨¡å—\n\nåœ¨ Node.js ä¸­æ¨èä½ ä½¿ç”¨ cors æ¨¡å— [github.com/expressjs/cors](https://github.com/expressjs/cors \"github.com/expressjs/cors\")ã€‚ \n\nåœ¨æˆ‘ä»¬æœ¬èŠ‚çš„ç¤ºä¾‹ä¸­ï¼Œä¸€ç›´ä½¿ç”¨çš„ Node.js åŸç”Ÿæ¨¡å—æ¥ç¼–å†™æˆ‘ä»¬çš„ç¤ºä¾‹ï¼Œåœ¨å¼•å…¥ cors æ¨¡å—åï¼Œå¯ä»¥æŒ‰ç…§å¦‚ä¸‹æ–¹å¼æ”¹å†™ï¼š\n\n```js\nconst http = require('http');\nconst PORT = 3011;\nconst corsMiddleware = require('cors')({\n  origin: 'http://127.0.0.1:3010',\n  methods: 'PUT,DELETE',\n  allowedHeaders: 'Test-CORS, Content-Type',\n  maxAge: 1728000,\n  credentials: true,\n});\n\nhttp.createServer((req, res) => {\n  const { url, method } = req;\n  console.log('request url:', url, ', request method:', method);\n  const nextFn = () => {\n    if (method === 'PUT' && url === '/api/data') {\n      return res.end('ok!');\n    }\n    return res.end();\n  }\n  corsMiddleware(req, res, nextFn);\n}).listen(PORT);\n```\n\ncors åœ¨é¢„æ£€è¯·æ±‚ä¹‹åæˆ–åœ¨é¢„æ£€è¯·æ±‚é‡Œå¹¶é€‰é¡¹ä¸­è®¾ç½®äº† preflightContinue å±æ€§ä¹‹åæ‰ä¼šæ‰§è¡Œ nextFn è¿™ä¸ªå‡½æ•°ï¼Œå¦‚æœé¢„æ£€å¤±è´¥å°±ä¸ä¼šæ‰§è¡Œ nextFn å‡½æ•°ã€‚\n\nå¦‚æœä½ ç”¨çš„ Express.js æ¡†æ¶ï¼Œä½¿ç”¨èµ·æ¥ä¹Ÿå¾ˆç®€å•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n\n```js\nconst express = require('express')\nconst cors = require('cors')\nconst app = express()\n\napp.use(cors());\n```\n\n### JSONP\n\næµè§ˆå™¨æ˜¯å…è®¸åƒ linkã€imgã€script æ ‡ç­¾åœ¨è·¯å¾„ä¸ŠåŠ è½½ä¸€äº›å†…å®¹è¿›è¡Œè¯·æ±‚ï¼Œæ˜¯å…è®¸è·¨åŸŸçš„ï¼Œé‚£ä¹ˆ jsonp çš„å®ç°åŸç†å°±æ˜¯åœ¨ script æ ‡ç­¾é‡Œé¢åŠ è½½äº†ä¸€ä¸ªé“¾æ¥ï¼Œå»è®¿é—®æœåŠ¡å™¨çš„æŸä¸ªè¯·æ±‚ï¼Œè¿”å›å†…å®¹ã€‚\n\n```html\n<body>\n  <script>\n    // fetch('http://127.0.0.1:3011/api/data', {\n    //   method: 'PUT',\n    //   headers: {\n    //     'Content-Type': 'application/json',\n    //     'Test-Cors': 'abc',\n    //   },\n    //   credentials: \"include\"\n    // });\n    <srcipt src=\"http://127.0.0.1:3011/api/data\"></srcipt>\n  </script>\n</body>\n```\n\nç›¸æ¯”ä¸Šé¢ CORS æ¨¡å—ï¼ŒJSONP åªæ”¯æŒ GET è¯·æ±‚ï¼Œæ˜¾ç„¶æ˜¯æ²¡æœ‰ CORS æ¨¡å—å¼ºå¤§çš„ã€‚\n\n### Nginx ä»£ç†æœåŠ¡å™¨é…ç½®è·¨åŸŸ\n\nä½¿ç”¨ Nginx ä»£ç†æœåŠ¡å™¨ä¹‹åï¼Œè¯·æ±‚ä¸ä¼šç›´æ¥åˆ°è¾¾æˆ‘ä»¬çš„ Node.js æœåŠ¡å™¨ç«¯ï¼Œè¯·æ±‚ä¼šå…ˆç»è¿‡ Nginx åœ¨è®¾ç½®ä¸€äº›è·¨åŸŸç­‰ä¿¡æ¯ä¹‹åå†ç”± Nginx è½¬å‘åˆ°æˆ‘ä»¬çš„ Node.js æœåŠ¡ç«¯ï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™æˆ‘ä»¬çš„ Nginx æœåŠ¡å™¨å»ç›‘å¬çš„ 3011 ç«¯å£ï¼Œæˆ‘ä»¬æŠŠ Node.js æœåŠ¡çš„ç«¯å£ä¿®æ”¹ä¸º 30011ï¼Œç®€å•é…ç½®å¦‚ä¸‹æ‰€ç¤ºï¼š\n\n```conf\nserver {\n  listen          3011;\n  server_name     localhost;\n\n  location / {\n    if ($request_method = 'OPTIONS') {\n      add_header 'Access-Control-Allow-Origin' 'http://127.0.0.1:3010';\n      add_header 'Access-Control-Allow-Methods' 'PUT,DELETE';\n      add_header 'Access-Control-Allow-Headers' 'Test-CORS, Content-Type';\n      add_header 'Access-Control-Max-Age' 1728000;\n      add_header 'Access-Control-Allow-Credentials' 'true';\n      add_header 'Content-Length' 0;\n      return 204;\n    }\n\n    add_header 'Access-Control-Allow-Origin' 'http://127.0.0.1:3010';\n    add_header 'Access-Control-Allow-Credentials' 'true';\n\n    proxy_pass http://127.0.0.1:30011;\n    proxy_set_header Host $host;\n  }\n}\n```\n\næœ¬èŠ‚ä»£ç ç¤ºä¾‹ï¼š\n\n```\ngithub.com/qufei1993/http-protocol/tree/master/example/cors/04\n```\n\n## æ€»ç»“\n\nå¦‚æœä½ æ˜¯ä¸€ä¸ªå‰ç«¯å¼€å‘è€…ï¼Œåœ¨å·¥ä½œéš¾å…ä¼šé‡åˆ°è·¨åŸŸé—®é¢˜ï¼Œè™½ç„¶å®ƒå±äºæµè§ˆå™¨çš„åŒæºç­–ç•¥é™åˆ¶ï¼Œä½†æ˜¯è¦æƒ³è§£å†³è¿™é—®é¢˜è¿˜éœ€æµè§ˆå™¨ç«¯ä¸æœåŠ¡ç«¯çš„å…±åŒæ”¯æŒï¼Œå¸Œæœ›è¯»åˆ°è¿™ç¯‡æ–‡ç« çš„è¯»è€…èƒ½å¤Ÿç†è§£è·¨åŸŸäº§ç”Ÿçš„åŸå› ï¼Œæœ€åç»™äºˆçš„å‡ ä¸ªè§£å†³æ–¹æ¡ˆï¼Œä¹Ÿå¸Œæœ›èƒ½è§£å†³ä½ å¯¹äºè·¨åŸŸè¿™ä¸ªé—®é¢˜çš„å›°æƒ‘ã€‚\n\n**ä½œè€…ç®€ä»‹**ï¼šäº”æœˆå›ï¼Œè½¯ä»¶è®¾è®¡å¸ˆï¼Œå…¬ä¼—å·ã€ŒNodejsæŠ€æœ¯æ ˆã€ä½œè€…ã€‚", "user_name": "äº”æœˆå›", "description": "å…¬ä¼—å· â€œNodejsæŠ€æœ¯æ ˆâ€ ä½œè€…ï¼Œä¸“æ³¨ Nodejs ç›¸å…³æŠ€æœ¯æ ˆåˆ†äº«", "got_view_count": 59209, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "Java", "concern_user_count": 252044, "user_id": "448256477237560", "title": "è¶…è¯¦ç»†Canalå…¥é—¨ï¼Œçœ‹è¿™ç¯‡å°±å¤Ÿäº†ï¼", "mark_content": "# æ€ç»´å¯¼å›¾\n\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200808151414675.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llaG9uZ3poaTE5OTQ=,size_16,color_FFFFFF,t_70#pic_center)\n\n> æœ¬æ–‡ç« å·²æ”¶å½•åˆ°ä¸ªäººåšå®¢ç½‘ç«™(æˆ‘çˆ±Bç«™)ï¼šme.lovebilibili.com\n\n# å‰è¨€\n\næˆ‘ä»¬éƒ½çŸ¥é“ä¸€ä¸ªç³»ç»Ÿæœ€é‡è¦çš„æ˜¯æ•°æ®ï¼Œæ•°æ®æ˜¯ä¿å­˜åœ¨æ•°æ®åº“é‡Œã€‚ä½†æ˜¯å¾ˆå¤šæ—¶å€™ä¸å•æ­¢è¦ä¿å­˜åœ¨æ•°æ®åº“ä¸­ï¼Œè¿˜è¦åŒæ­¥ä¿å­˜åˆ°Elastic Searchã€HBaseã€Redisç­‰ç­‰ã€‚\n\nè¿™æ—¶æˆ‘æ³¨æ„åˆ°é˜¿é‡Œå¼€æºçš„æ¡†æ¶**Canal**ï¼Œä»–å¯ä»¥å¾ˆæ–¹ä¾¿åœ°**åŒæ­¥æ•°æ®åº“çš„å¢é‡æ•°æ®åˆ°å…¶ä»–çš„å­˜å‚¨åº”ç”¨**ã€‚æ‰€ä»¥åœ¨è¿™é‡Œæ€»ç»“ä¸€ä¸‹ï¼Œåˆ†äº«ç»™å„ä½è¯»è€…å‚è€ƒ~\n\n# ä¸€ã€ä»€ä¹ˆæ˜¯canal\n\næˆ‘ä»¬å…ˆçœ‹å®˜ç½‘çš„ä»‹ç»\n\n> canalï¼Œè¯‘æ„ä¸ºæ°´é“/ç®¡é“/æ²Ÿæ¸ ï¼Œä¸»è¦ç”¨é€”æ˜¯åŸºäº **MySQL æ•°æ®åº“å¢é‡æ—¥å¿—è§£æ**ï¼Œæä¾›**å¢é‡æ•°æ®è®¢é˜…å’Œæ¶ˆè´¹**ã€‚\n\nè¿™å¥ä»‹ç»æœ‰å‡ ä¸ªå…³é”®å­—ï¼š**å¢é‡æ—¥å¿—ï¼Œå¢é‡æ•°æ®è®¢é˜…å’Œæ¶ˆè´¹**ã€‚\n\nè¿™é‡Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°æŠŠcanalç†è§£ä¸ºä¸€ä¸ªç”¨æ¥**åŒæ­¥å¢é‡æ•°æ®çš„ä¸€ä¸ªå·¥å…·**ã€‚\n\næ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸€å¼ å®˜ç½‘æä¾›çš„ç¤ºæ„å›¾ï¼š\n\n![](https://imgconvert.csdnimg.cn/aHR0cHM6Ly9zdGF0aWMubG92ZWJpbGliaWxpLmNvbS9waWMvY2FuYWxfc3l0LnBuZw?x-oss-process=image/format,png)\n\ncanalçš„å·¥ä½œåŸç†å°±æ˜¯**æŠŠè‡ªå·±ä¼ªè£…æˆMySQL slaveï¼Œæ¨¡æ‹ŸMySQL slaveçš„äº¤äº’åè®®å‘MySQL Materå‘é€ dumpåè®®ï¼ŒMySQL materæ”¶åˆ°canalå‘é€è¿‡æ¥çš„dumpè¯·æ±‚ï¼Œå¼€å§‹æ¨é€binary logç»™canalï¼Œç„¶åcanalè§£æbinary logï¼Œå†å‘é€åˆ°å­˜å‚¨ç›®çš„åœ°**ï¼Œæ¯”å¦‚MySQLï¼ŒKafkaï¼ŒElastic Searchç­‰ç­‰ã€‚\n\n# äºŒã€canalèƒ½åšä»€ä¹ˆ\n\nä»¥ä¸‹å‚è€ƒ[canalå®˜ç½‘](https://github.com/alibaba/canal)ã€‚\n\nä¸å…¶é—®canalèƒ½åšä»€ä¹ˆï¼Œä¸å¦‚è¯´æ•°æ®åŒæ­¥æœ‰ä»€ä¹ˆä½œç”¨ã€‚\n\nä½†æ˜¯canalçš„æ•°æ®åŒæ­¥**ä¸æ˜¯å…¨é‡çš„ï¼Œè€Œæ˜¯å¢é‡**ã€‚åŸºäºbinary logå¢é‡è®¢é˜…å’Œæ¶ˆè´¹ï¼Œcanalå¯ä»¥åšï¼š\n\n- æ•°æ®åº“é•œåƒ\n- æ•°æ®åº“å®æ—¶å¤‡ä»½\n- ç´¢å¼•æ„å»ºå’Œå®æ—¶ç»´æŠ¤\n- ä¸šåŠ¡cache(ç¼“å­˜)åˆ·æ–°\n- å¸¦ä¸šåŠ¡é€»è¾‘çš„å¢é‡æ•°æ®å¤„ç†\n\n# ä¸‰ã€å¦‚ä½•æ­å»ºcanal\n\n## 3.1 é¦–å…ˆæœ‰ä¸€ä¸ªMySQLæœåŠ¡å™¨\n\nå½“å‰çš„ canal æ”¯æŒæºç«¯ MySQL ç‰ˆæœ¬åŒ…æ‹¬ 5.1.x , 5.5.x , 5.6.x , 5.7.x , 8.0.x\n\næˆ‘çš„LinuxæœåŠ¡å™¨å®‰è£…çš„MySQLæœåŠ¡å™¨æ˜¯5.7ç‰ˆæœ¬ã€‚\n\nMySQLçš„å®‰è£…è¿™é‡Œå°±ä¸æ¼”ç¤ºäº†ï¼Œæ¯”è¾ƒç®€å•ï¼Œç½‘ä¸Šä¹Ÿæœ‰å¾ˆå¤šæ•™ç¨‹ã€‚\n\nç„¶ååœ¨MySQLä¸­éœ€è¦åˆ›å»ºä¸€ä¸ªç”¨æˆ·ï¼Œå¹¶æˆæƒï¼š\n\n```sql\n-- ä½¿ç”¨å‘½ä»¤ç™»å½•ï¼šmysql -u root -p\n-- åˆ›å»ºç”¨æˆ· ç”¨æˆ·åï¼šcanal å¯†ç ï¼šCanal@123456\ncreate user 'canal'@'%' identified by 'Canal@123456';\n-- æˆæƒ *.*è¡¨ç¤ºæ‰€æœ‰åº“\ngrant SELECT, REPLICATION SLAVE, REPLICATION CLIENT on *.* to 'canal'@'%' identified by 'Canal@123456';\n```\n\nä¸‹ä¸€æ­¥åœ¨MySQLé…ç½®æ–‡ä»¶my.cnfè®¾ç½®å¦‚ä¸‹ä¿¡æ¯ï¼š\n\n```yml\n[mysqld]\n# æ‰“å¼€binlog\nlog-bin=mysql-bin\n# é€‰æ‹©ROW(è¡Œ)æ¨¡å¼\nbinlog-format=ROW\n# é…ç½®MySQL replactionéœ€è¦å®šä¹‰ï¼Œä¸è¦å’Œcanalçš„slaveIdé‡å¤\nserver_id=1\n```\n\næ”¹äº†é…ç½®æ–‡ä»¶ä¹‹åï¼Œé‡å¯MySQLï¼Œä½¿ç”¨å‘½ä»¤æŸ¥çœ‹æ˜¯å¦æ‰“å¼€binlogæ¨¡å¼ï¼š\n\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200808151606261.png#pic_center)\n\næŸ¥çœ‹binlogæ—¥å¿—æ–‡ä»¶åˆ—è¡¨ï¼š\n\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200808151715291.png#pic_center)\n\næŸ¥çœ‹å½“å‰æ­£åœ¨å†™å…¥çš„binlogæ–‡ä»¶ï¼š\n\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/2020080815153247.png#pic_center)\n\nMySQLæœåŠ¡å™¨è¿™è¾¹å°±æå®šäº†ï¼Œå¾ˆç®€å•ã€‚\n\n## 3.2 å®‰è£…canal\n\nå»å®˜ç½‘ä¸‹è½½é¡µé¢è¿›è¡Œä¸‹è½½ï¼šhttps://github.com/alibaba/canal/releases\n\næˆ‘è¿™é‡Œä¸‹è½½çš„æ˜¯1.1.4çš„ç‰ˆæœ¬ï¼š\n\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/2020080815145065.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llaG9uZ3poaTE5OTQ=,size_16,color_FFFFFF,t_70#pic_center)\n\nè§£å‹**canal.deployer-1.1.4.tar.gz**ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é‡Œé¢æœ‰å››ä¸ªæ–‡ä»¶å¤¹ï¼š\n\n![](https://imgconvert.csdnimg.cn/aHR0cHM6Ly9zdGF0aWMubG92ZWJpbGliaWxpLmNvbS9waWMvdGFyX29uZS5wbmc?x-oss-process=image/format,png)\n\næ¥ç€æ‰“å¼€é…ç½®æ–‡ä»¶conf/example/instance.propertiesï¼Œé…ç½®ä¿¡æ¯å¦‚ä¸‹ï¼š\n\n```properties\n## mysql serverId , v1.0.26+ will autoGen\n## v1.0.26ç‰ˆæœ¬åä¼šè‡ªåŠ¨ç”ŸæˆslaveIdï¼Œæ‰€ä»¥å¯ä»¥ä¸ç”¨é…ç½®\n# canal.instance.mysql.slaveId=0\n\n# æ•°æ®åº“åœ°å€\ncanal.instance.master.address=127.0.0.1:3306\n# binlogæ—¥å¿—åç§°\ncanal.instance.master.journal.name=mysql-bin.000001\n# mysqlä¸»åº“é“¾æ¥æ—¶èµ·å§‹çš„binlogåç§»é‡\ncanal.instance.master.position=154\n# mysqlä¸»åº“é“¾æ¥æ—¶èµ·å§‹çš„binlogçš„æ—¶é—´æˆ³\ncanal.instance.master.timestamp=\ncanal.instance.master.gtid=\n\n# username/password\n# åœ¨MySQLæœåŠ¡å™¨æˆæƒçš„è´¦å·å¯†ç \ncanal.instance.dbUsername=canal\ncanal.instance.dbPassword=Canal@123456\n# å­—ç¬¦é›†\ncanal.instance.connectionCharset = UTF-8\n# enable druid Decrypt database password\ncanal.instance.enableDruid=false\n\n# table regex .*\\\\..*è¡¨ç¤ºç›‘å¬æ‰€æœ‰è¡¨ ä¹Ÿå¯ä»¥å†™å…·ä½“çš„è¡¨åï¼Œç”¨ï¼Œéš”å¼€\ncanal.instance.filter.regex=.*\\\\..*\n# mysql æ•°æ®è§£æè¡¨çš„é»‘åå•ï¼Œå¤šä¸ªè¡¨ç”¨ï¼Œéš”å¼€\ncanal.instance.filter.black.regex=\n```\n\næˆ‘è¿™é‡Œç”¨çš„æ˜¯win10ç³»ç»Ÿï¼Œæ‰€ä»¥åœ¨binç›®å½•ä¸‹æ‰¾åˆ°startup.batå¯åŠ¨ï¼š\n\nå¯åŠ¨å°±æŠ¥é”™ï¼Œå‘å‘€ï¼š\n\n![](https://imgconvert.csdnimg.cn/aHR0cHM6Ly9zdGF0aWMubG92ZWJpbGliaWxpLmNvbS9waWMvY2FuYWxfNC5wbmc?x-oss-process=image/format,png)\n\nè¦ä¿®æ”¹ä¸€ä¸‹å¯åŠ¨çš„è„šæœ¬startup.batï¼š\n\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200808151858871.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llaG9uZ3poaTE5OTQ=,size_16,color_FFFFFF,t_70#pic_center)\n\nç„¶åå†å¯åŠ¨è„šæœ¬ï¼š\n\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200808151912493.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llaG9uZ3poaTE5OTQ=,size_16,color_FFFFFF,t_70#pic_center)\n\nè¿™å°±å¯åŠ¨æˆåŠŸäº†ã€‚\n\n# Javaå®¢æˆ·ç«¯æ“ä½œ\n\né¦–å…ˆå¼•å…¥mavenä¾èµ–ï¼š\n\n```xml\n<dependency>\n    <groupId>com.alibaba.otter</groupId>\n    <artifactId>canal.client</artifactId>\n    <version>1.1.4</version>\n</dependency>\n```\n\nç„¶ååˆ›å»ºä¸€ä¸ªcanalé¡¹ç›®ï¼Œä½¿ç”¨SpringBootæ„å»ºï¼Œå¦‚å›¾æ‰€ç¤ºï¼š\n\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200808151936163.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llaG9uZ3poaTE5OTQ=,size_16,color_FFFFFF,t_70#pic_center)\n\nåœ¨CannalClientç±»ä½¿ç”¨Spring Beançš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°afterPropertiesSet()ï¼š\n\n```java\n@Component\npublic class CannalClient implements InitializingBean {\n\n    private final static int BATCH_SIZE = 1000;\n\n    @Override\n    public void afterPropertiesSet() throws Exception {\n        // åˆ›å»ºé“¾æ¥\n        CanalConnector connector = CanalConnectors.newSingleConnector(new InetSocketAddress(\"127.0.0.1\", 11111), \"example\", \"\", \"\");\n        try {\n            //æ‰“å¼€è¿æ¥\n            connector.connect();\n            //è®¢é˜…æ•°æ®åº“è¡¨,å…¨éƒ¨è¡¨\n            connector.subscribe(\".*\\\\..*\");\n            //å›æ»šåˆ°æœªè¿›è¡Œackçš„åœ°æ–¹ï¼Œä¸‹æ¬¡fetchçš„æ—¶å€™ï¼Œå¯ä»¥ä»æœ€åä¸€ä¸ªæ²¡æœ‰ackçš„åœ°æ–¹å¼€å§‹æ‹¿\n            connector.rollback();\n            while (true) {\n                // è·å–æŒ‡å®šæ•°é‡çš„æ•°æ®\n                Message message = connector.getWithoutAck(BATCH_SIZE);\n                //è·å–æ‰¹é‡ID\n                long batchId = message.getId();\n                //è·å–æ‰¹é‡çš„æ•°é‡\n                int size = message.getEntries().size();\n                //å¦‚æœæ²¡æœ‰æ•°æ®\n                if (batchId == -1 || size == 0) {\n                    try {\n                        //çº¿ç¨‹ä¼‘çœ 2ç§’\n                        Thread.sleep(2000);\n                    } catch (InterruptedException e) {\n                        e.printStackTrace();\n                    }\n                } else {\n                    //å¦‚æœæœ‰æ•°æ®,å¤„ç†æ•°æ®\n                    printEntry(message.getEntries());\n                }\n                //è¿›è¡Œ batch id çš„ç¡®è®¤ã€‚ç¡®è®¤ä¹‹åï¼Œå°äºç­‰äºæ­¤ batchId çš„ Message éƒ½ä¼šè¢«ç¡®è®¤ã€‚\n                connector.ack(batchId);\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        } finally {\n            connector.disconnect();\n        }\n    }\n\n    /**\n     * æ‰“å°canal serverè§£æbinlogè·å¾—çš„å®ä½“ç±»ä¿¡æ¯\n     */\n    private static void printEntry(List<Entry> entrys) {\n        for (Entry entry : entrys) {\n            if (entry.getEntryType() == EntryType.TRANSACTIONBEGIN || entry.getEntryType() == EntryType.TRANSACTIONEND) {\n                //å¼€å¯/å…³é—­äº‹åŠ¡çš„å®ä½“ç±»å‹ï¼Œè·³è¿‡\n                continue;\n            }\n            //RowChangeå¯¹è±¡ï¼ŒåŒ…å«äº†ä¸€è¡Œæ•°æ®å˜åŒ–çš„æ‰€æœ‰ç‰¹å¾\n            //æ¯”å¦‚isDdl æ˜¯å¦æ˜¯ddlå˜æ›´æ“ä½œ sql å…·ä½“çš„ddl sql beforeColumns afterColumns å˜æ›´å‰åçš„æ•°æ®å­—æ®µç­‰ç­‰\n            RowChange rowChage;\n            try {\n                rowChage = RowChange.parseFrom(entry.getStoreValue());\n            } catch (Exception e) {\n                throw new RuntimeException(\"ERROR ## parser of eromanga-event has an error , data:\" + entry.toString(), e);\n            }\n            //è·å–æ“ä½œç±»å‹ï¼šinsert/update/deleteç±»å‹\n            EventType eventType = rowChage.getEventType();\n            //æ‰“å°Headerä¿¡æ¯\n            System.out.println(String.format(\"================ã€‹; binlog[%s:%s] , name[%s,%s] , eventType : %s\",\n                    entry.getHeader().getLogfileName(), entry.getHeader().getLogfileOffset(),\n                    entry.getHeader().getSchemaName(), entry.getHeader().getTableName(),\n                    eventType));\n            //åˆ¤æ–­æ˜¯å¦æ˜¯DDLè¯­å¥\n            if (rowChage.getIsDdl()) {\n                System.out.println(\"================ã€‹;isDdl: true,sql:\" + rowChage.getSql());\n            }\n            //è·å–RowChangeå¯¹è±¡é‡Œçš„æ¯ä¸€è¡Œæ•°æ®ï¼Œæ‰“å°å‡ºæ¥\n            for (RowData rowData : rowChage.getRowDatasList()) {\n                //å¦‚æœæ˜¯åˆ é™¤è¯­å¥\n                if (eventType == EventType.DELETE) {\n                    printColumn(rowData.getBeforeColumnsList());\n                    //å¦‚æœæ˜¯æ–°å¢è¯­å¥\n                } else if (eventType == EventType.INSERT) {\n                    printColumn(rowData.getAfterColumnsList());\n                    //å¦‚æœæ˜¯æ›´æ–°çš„è¯­å¥\n                } else {\n                    //å˜æ›´å‰çš„æ•°æ®\n                    System.out.println(\"------->; before\");\n                    printColumn(rowData.getBeforeColumnsList());\n                    //å˜æ›´åçš„æ•°æ®\n                    System.out.println(\"------->; after\");\n                    printColumn(rowData.getAfterColumnsList());\n                }\n            }\n        }\n    }\n\n    private static void printColumn(List<Column> columns) {\n        for (Column column : columns) {\n            System.out.println(column.getName() + \" : \" + column.getValue() + \"    update=\" + column.getUpdated());\n        }\n    }\n}\n```\n\nä»¥ä¸Šå°±å®Œæˆäº†Javaå®¢æˆ·ç«¯çš„ä»£ç ã€‚è¿™é‡Œä¸åšå…·ä½“çš„å¤„ç†ï¼Œä»…ä»…æ˜¯æ‰“å°ï¼Œå…ˆæœ‰ä¸ªç›´è§‚çš„æ„Ÿå—ã€‚\n\næœ€åæˆ‘ä»¬å¼€å§‹æµ‹è¯•ï¼Œé¦–å…ˆå¯åŠ¨MySQLã€Canal Serverï¼Œè¿˜æœ‰åˆšåˆšå†™çš„Spring Booté¡¹ç›®ã€‚ç„¶ååˆ›å»ºè¡¨ï¼š\n\n```sql\nCREATE TABLE `tb_commodity_info` (\n  `id` varchar(32) NOT NULL,\n  `commodity_name` varchar(512) DEFAULT NULL COMMENT 'å•†å“åç§°',\n  `commodity_price` varchar(36) DEFAULT '0' COMMENT 'å•†å“ä»·æ ¼',\n  `number` int(10) DEFAULT '0' COMMENT 'å•†å“æ•°é‡',\n  `description` varchar(2048) DEFAULT '' COMMENT 'å•†å“æè¿°',\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='å•†å“ä¿¡æ¯è¡¨';\n```\n\nç„¶åæˆ‘ä»¬åœ¨æ§åˆ¶å°å°±å¯ä»¥çœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯ï¼š\n\n![](https://imgconvert.csdnimg.cn/aHR0cHM6Ly9zdGF0aWMubG92ZWJpbGliaWxpLmNvbS9waWMvY2FuYWxfMTAucG5n?x-oss-process=image/format,png)\n\nå¦‚æœæ–°å¢ä¸€æ¡æ•°æ®åˆ°è¡¨ä¸­ï¼š\n\n```sql\nINSERT INTO tb_commodity_info VALUES('3e71a81fd80711eaaed600163e046cc3','å‰çƒ§åŒ…','3.99',3,'åˆå¤§åˆé¦™çš„å‰çƒ§åŒ…ï¼Œè€äººå°å­©éƒ½å–œæ¬¢');\n```\n\næ§åˆ¶å°å¯ä»¥çœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯ï¼š\n\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200809230414536.png#pic_center)\n\n# æ€»ç»“\n\ncanalçš„å¥½å¤„åœ¨äº**å¯¹ä¸šåŠ¡ä»£ç æ²¡æœ‰ä¾µå…¥**ï¼Œå› ä¸ºæ˜¯**åŸºäºç›‘å¬binlogæ—¥å¿—å»è¿›è¡ŒåŒæ­¥æ•°æ®çš„**ã€‚å®æ—¶æ€§ä¹Ÿèƒ½åšåˆ°å‡†å®æ—¶ï¼Œå…¶å®æ˜¯å¾ˆå¤šä¼ä¸šä¸€ç§æ¯”è¾ƒå¸¸è§çš„æ•°æ®åŒæ­¥çš„æ–¹æ¡ˆã€‚\n\né€šè¿‡ä¸Šé¢çš„å­¦ä¹ ä¹‹åï¼Œæˆ‘ä»¬åº”è¯¥éƒ½æ˜ç™½canalæ˜¯ä»€ä¹ˆï¼Œå®ƒçš„åŸç†ï¼Œè¿˜æœ‰ç”¨æ³•ã€‚å®é™…ä¸Šè¿™ä»…ä»…åªæ˜¯å…¥é—¨ï¼Œå› ä¸ºå®é™…é¡¹ç›®ä¸­æˆ‘ä»¬ä¸æ˜¯è¿™æ ·ç©çš„...\n\nå®é™…é¡¹ç›®æˆ‘ä»¬æ˜¯**é…ç½®MQæ¨¡å¼ï¼Œé…åˆRocketMQæˆ–è€…Kafkaï¼Œcanalä¼šæŠŠæ•°æ®å‘é€åˆ°MQçš„topicä¸­ï¼Œç„¶åé€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—çš„æ¶ˆè´¹è€…è¿›è¡Œå¤„ç†**ã€‚\n\n![](https://imgconvert.csdnimg.cn/aHR0cHM6Ly9zdGF0aWMubG92ZWJpbGliaWxpLmNvbS9waWMvY2FuYWxfMTIucG5n?x-oss-process=image/format,png)\n\nCanalçš„éƒ¨ç½²ä¹Ÿæ˜¯æ”¯æŒé›†ç¾¤çš„ï¼Œéœ€è¦é…åˆZooKeeperè¿›è¡Œé›†ç¾¤ç®¡ç†ã€‚\n\nCanalè¿˜æœ‰ä¸€ä¸ªç®€å•çš„Webç®¡ç†ç•Œé¢ã€‚\n\nä¸‹ä¸€ç¯‡å°±è®²ä¸€ä¸‹**é›†ç¾¤éƒ¨ç½²Canalï¼Œé…åˆä½¿ç”¨Kafkaï¼ŒåŒæ­¥æ•°æ®åˆ°Redis**ã€‚\n\nå‚è€ƒèµ„æ–™ï¼š[Canalå®˜ç½‘](https://github.com/alibaba/canal)\n\n## çµ®å¨\n\nä¸Šé¢æ‰€æœ‰ä¾‹å­çš„ä»£ç éƒ½ä¸Šä¼ Githubäº†ï¼š\n\n> https://github.com/yehongzhi/mall\n\n**å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰ç”¨ï¼Œç‚¹ä¸ªèµå§**~\n\n**ä½ çš„ç‚¹èµæ˜¯æˆ‘åˆ›ä½œçš„æœ€å¤§åŠ¨åŠ›**~\n\næƒ³ç¬¬ä¸€æ—¶é—´çœ‹åˆ°æˆ‘æ›´æ–°çš„æ–‡ç« ï¼Œå¯ä»¥å¾®ä¿¡æœç´¢å…¬ä¼—å·ã€Œ`javaæŠ€æœ¯çˆ±å¥½è€…`ã€ï¼Œ**æ‹’ç»åšä¸€æ¡å’¸é±¼ï¼Œæˆ‘æ˜¯ä¸€ä¸ªåŠªåŠ›è®©å¤§å®¶è®°ä½çš„ç¨‹åºå‘˜ã€‚æˆ‘ä»¬ä¸‹æœŸå†è§ï¼ï¼ï¼**\n\n> èƒ½åŠ›æœ‰é™ï¼Œå¦‚æœæœ‰ä»€ä¹ˆé”™è¯¯æˆ–è€…ä¸å½“ä¹‹å¤„ï¼Œè¯·å¤§å®¶æ‰¹è¯„æŒ‡æ­£ï¼Œä¸€èµ·å­¦ä¹ äº¤æµï¼", "user_name": "javaæŠ€æœ¯çˆ±å¥½è€…", "description": "ä¸€ä¸ªä¸æƒ³æˆä¸ºä½œå®¶çš„ç¨‹åºå‘˜ï¼Œä¸æ˜¯ä¸€ä¸ªå¥½å¨å¸ˆ", "got_view_count": 12010, "category_name": "åç«¯", "ctime": 1457483880}
{"tag_name": "GitHub", "concern_user_count": 330249, "user_id": "1574156384091320", "title": "GitHub çƒ­ç‚¹é€Ÿè§ˆ Vol.32ï¼šVScode éŸ­èœåŸºé‡‘æ’ä»¶ï¼Œæå¤§æé«˜â€œå·¥ä½œâ€æ•ˆç‡", "mark_content": "ä½œè€…ï¼šHelloGitHub-**å°é±¼å¹²**\n\n> æ‘˜è¦ï¼šæœ‰ä»€ä¹ˆæ¯”å¹²ç€æœ¬èŒå·¥ä½œâ€”â€”ç¼–ç ï¼Œè€Œåˆå…¼é¡¾â€œå¤–å¿«â€â€”â€”ç‚’è‚¡æ›´æœ‰å¼€å¿ƒçš„äº‹æƒ…å‘¢ï¼Ÿleek-fund å°±æ˜¯è¿™ä¹ˆä¸€ä¸ªæå¤§æå‡ä½ å·¥ä½œå¹¸ç¦åº¦å’Œæ•ˆç‡çš„æ’ä»¶ï¼Œå¯éšæ—¶å…³æ³¨ä¸Šè¯æŒ‡æ•° & å®æ—¶åŸºé‡‘æ•°æ®ã€‚é™¤äº† leek-fund è¿™ä¸ªæ’ä»¶ï¼Œæœ¬å‘¨ç‰¹æ¨ simdjson ä¹Ÿæ˜¯ä¸€å¤§æ•ˆç‡æ€å™¨ï¼Œå®ƒå¯ä»¥æ¯ç§’è§£æåƒå…†å­—èŠ‚çš„ JSONï¼Œé™¤äº†æ•ˆç‡ï¼Œå‘¨è· 1000+ star çš„ 955.WLB åˆ™å…³æ³¨ä½ çš„ç”Ÿæ´»å’Œå·¥ä½œï¼Œè®©ä½ å¹³è¡¡äºŒè€…ï¼Œä¹Ÿä¸å¤±ä¸ºä¸€ä¸ªæå‡ä½ æ‰¾å·¥ä½œæ•ˆç‡ repoâ€¦\n\nä»¥ä¸‹å†…å®¹æ‘˜å½•è‡ªå¾®åš[@HelloGitHub](https://www.weibo.com/hellogithub/) çš„ GitHub Trending åŠ Hacker News çƒ­å¸–ï¼ˆç®€ç§° HN çƒ­å¸–ï¼‰ï¼Œé€‰é¡¹æ ‡å‡†ï¼š`æ–°å‘å¸ƒ` | `å®ç”¨` | `æœ‰è¶£`ï¼Œæ ¹æ®é¡¹ç›® release æ—¶é—´åˆ†ç±»ï¼Œå‘å¸ƒæ—¶é—´ä¸è¶…è¿‡ 7 day çš„é¡¹ç›®ä¼šæ ‡æ³¨ `New`ï¼Œæ— è¯¥æ ‡å¿—åˆ™è¯´æ˜é¡¹ç›® release è¶…è¿‡ä¸€å‘¨ã€‚ç”±äºæœ¬æ–‡ç¯‡å¹…æœ‰é™ï¼Œè¿˜æœ‰éƒ¨åˆ†é¡¹ç›®æœªèƒ½åœ¨æœ¬æ–‡å±•ç¤ºï¼Œæœ›å‘¨çŸ¥ ğŸŒ\n\n- æœ¬æ–‡ç›®å½•\n    - 1. æœ¬å‘¨ç‰¹æ¨\n        - 1.1 json è§£æå¤§æ€å™¨ï¼šsimdjson\n        - 1.2 å®‰å…¨å·¥ç¨‹ï¼šhow-to-secure-anything\n    - 2. GitHub Trending å‘¨æ¦œ\n        - 2.1 ä¸‡ç‰©çš†å¯åŠ¨ï¼šfirst-order-model\n        - 2.2 å¹³è¡¡ç”Ÿæ´»å’Œå·¥ä½œï¼š955.WLB\n        - 2.3 VSCode éŸ­èœåŸºé‡‘æ’ä»¶ï¼šleek-fund\n        - 2.4 cat å…‹éš†ç‰ˆï¼šbat\n        - 2.5 rust å°ç»ƒä¹ ï¼šrustlings\n        - 2.6 æ·±åº¦å­¦ä¹ å¼•æ“ï¼šoneflow\n        - 2.7 èµ„æºç›‘è§†å™¨ï¼šbpytop\n    - 3. Emoji Time\n    - 4. æ¨èé˜…è¯»\n\n## 1. æœ¬å‘¨ç‰¹æ¨\n\n### 1.1 json è§£æå¤§æ€å™¨ï¼šsimdjson\n\n**æœ¬å‘¨ star å¢é•¿æ•°ï¼š1400+**\n\nsimdjson æ˜¯ä¸€ä¸ªæ¯ç§’è§£æåƒå…†å­—èŠ‚çš„ JSON è§£æå·¥å…·ã€‚simdjson åº“ä½¿ç”¨å¸¸ç”¨çš„ SIMD æŒ‡ä»¤å’Œå¾®å¹¶è¡Œç®—æ³•æ¥è§£æ JSONï¼Œé€Ÿåº¦æ¯”å…¶ä»–è§£æå™¨å¿« 2.5 å€ã€‚\n\n> GitHub åœ°å€â†’https://github.com/simdjson/simdjson\n\n![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d7f155c3742a4eeeaa37c6ae84c7da0c~tplv-k3u1fbpfcp-zoom-1.image)\n\n### 1.2 å®‰å…¨å·¥ç¨‹ï¼šhow-to-secure-anything\n\n**æœ¬å‘¨ star å¢é•¿æ•°ï¼š2800+**\n\nhow-to-secure-anything æ˜¯ä¸€ä¸ªå®‰å…¨å·¥ç¨‹è¯¾ç¨‹ï¼Œæ”¶å½•äº†å¤§é‡åŒå®‰å…¨ç›¸å…³çš„èµ„æ–™ï¼Œä»æœ€åŸºç¡€çš„å®‰å…¨å·¥ç¨‹æ˜¯ä»€ä¹ˆè®²èµ·ï¼Œåˆ°å·²çŸ¥çš„å®‰å…¨æœ€ä½³å®è·µï¼Œåˆ°å®‰å…¨æ¨¡å‹æ„å»ºã€å¢å¼ºé˜²å¾¡æ–¹æ³•ã€ç§‘å­¦æŸ¥æ‰¾æ¼æ´ï¼Œç»ˆäºå®‰å…¨å·¥ç¨‹çš„æœªæ¥å±•æœ›ï¼Œæ˜¯ä¸€ä»½è¯¦ç»†å…¨é¢çš„å®‰å…¨å·¥ç¨‹æ•™ç¨‹ã€‚\n\n> GitHub åœ°å€â†’https://github.com/veeral-patel/how-to-secure-anything\n\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f4f6e50b14634770832a6ff9bfa6ecfb~tplv-k3u1fbpfcp-zoom-1.image)\n\n## 2. GitHub Trending å‘¨æ¦œ\n\n### 2.1 ä¸‡ç‰©çš†å¯åŠ¨ï¼šfirst-order-model\n\n**æœ¬å‘¨ star å¢é•¿æ•°ï¼š600+**\n\nfirst-order-model è¿™ä¸ªæ¨¡å‹å¯ä»¥å¯¹è§†é¢‘ä¸­çš„å¯¹è±¡è¿›è¡ŒåŠ¨ç”»å¤„ç†ï¼Œå¹¶ç”Ÿæˆè§†é¢‘åºåˆ—ã€‚åŸºäºè¿™ä¸ªæ¨¡å‹ï¼Œå¯ä»¥å®ç°å›¾ç‰‡æ¢è£…ï¼Œé™æ€å°é©¬è·‘èµ·æ¥ï¼Œç‰¹æœ—æ™®å’ŒæƒåŠ›æ¸¸æˆè§’è‰²å¯¹è¯ç­‰ç­‰åŠŸèƒ½ã€‚\n\n> GitHub åœ°å€â†’https://github.com/AliaksandrSiarohin/first-order-model\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/96150a07e59f443b8faefec9beafd755~tplv-k3u1fbpfcp-zoom-1.image)\n\n### 2.2 å¹³è¡¡ç”Ÿæ´»å’Œå·¥ä½œï¼š955.WLB\n\n**æœ¬å‘¨ star å¢é•¿æ•°ï¼š1100+**\n\n955.WLB æ˜¯ä¸€ä»½ 955 ä¸åŠ ç­çš„å…¬å¸åå•ï¼Œå¦‚æœä½ æƒ³è¦æ‰¾ä¸€ä»½ 955 çš„å·¥ä½œï¼Œä¸å¦¨ pick è¿™ä»½åå•ã€‚\n\n> GitHub åœ°å€â†’https://github.com/formulahendry/955.WLB\n\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e6a59a9a23ff4d26b36dfa4b2540f713~tplv-k3u1fbpfcp-zoom-1.image)\n\n### 2.3 VSCode éŸ­èœåŸºé‡‘æ’ä»¶ï¼šleek-fund\n\n**æœ¬å‘¨ star å¢é•¿æ•°ï¼š150+**\n\n`New` leek-fund æ˜¯ä¸€ä¸ª VSCode æ’ä»¶ï¼Œåœ¨ç¼–ç çš„æ—¶å€™éšæ—¶å…³æ³¨å®æ—¶è‚¡ç¥¨&åŸºé‡‘æ•°æ®ã€‚åŠŸèƒ½ä¸»è¦æœ‰ï¼š\n- åŸºé‡‘æ¶¨è·ŒæŸ¥çœ‹ï¼Œå¯è‡ªå®šä¹‰é…ç½®åŸºé‡‘ä»£ç ï¼Œæ”¯æŒæŸ¥çœ‹åŸºé‡‘å†å²å‡€å€¼è¯¦æƒ…\n- è‚¡ç¥¨æ¶¨è·ŒæŸ¥çœ‹ï¼Œå¯è‡ªå®šä¹‰é…ç½®è‚¡ç¥¨ä»£ç ï¼Œæ”¯æŒæŸ¥çœ‹è‚¡ç¥¨å®æ—¶ K çº¿å›¾\n- å·¦ä¾§èœå•é¢æ¿\n- åº•éƒ¨çŠ¶æ€ bar\n- æ”¯æŒ GUI æ“ä½œæ–°å¢&åˆ é™¤ åŸºé‡‘ å’Œ è‚¡ç¥¨\n- æ¯å¤© 9~15 ç‚¹ä¹‹é—´è½®è¯¢åˆ·æ–°æ•°æ®ï¼ˆåˆ·æ–°é¢‘ç‡æœ€ä½ 3 ç§’ï¼Œå¯é…ç½®ï¼‰\n- æ”¯æŒå‡åº/é™åºæ’åº\n\n> GitHub åœ°å€â†’https://github.com/giscafer/leek-fund\n\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e87f7007c7964c1fbd58276f0ea872ad~tplv-k3u1fbpfcp-zoom-1.image)\n\n### 2.4 cat å…‹éš†ç‰ˆï¼šbat\n\n**æœ¬å‘¨ star å¢é•¿æ•°ï¼š750+**\n\nbat æ˜¯ä¸€ä¸ª cat å‘½ä»¤çš„ä¸€ä¸ªå…‹éš†ç‰ˆï¼Œå¸¦æœ‰è¯­æ³•é«˜äº®ã€é›†æˆ git ç­‰ç‰¹æ€§ã€‚\n\n> GitHub åœ°å€â†’https://github.com/sharkdp/bat\n\n![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/837419e3ed4947bf855b3732697124ac~tplv-k3u1fbpfcp-zoom-1.image)\n\n### 2.5 rust å°ç»ƒä¹ ï¼šrustlings\n\n**æœ¬å‘¨ star å¢é•¿æ•°ï¼š900+**\n\nrustlings æ”¶å½•ä¸€äº›å…³äº rust çš„å°ç»ƒä¹ ï¼Œæ–¹ä¾¿ä½ é˜…è¯»å’Œç¼–å†™ rust ä»£ç ã€‚\n\n> GitHub åœ°å€â†’https://github.com/rust-lang/rustlings\n\n![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0dbc9f784b0948fc99cbdf0e9b1ab6b6~tplv-k3u1fbpfcp-zoom-1.image)\n\n### 2.6 æ·±åº¦å­¦ä¹ å¼•æ“ï¼šoneflow\n\n**æœ¬å‘¨ star å¢é•¿æ•°ï¼š800+**\n\noneflow æ˜¯å›½å†…ä¸€æµç§‘æŠ€å¼€æºçš„æ·±åº¦å­¦ä¹ æ¡†æ¶ï¼Œoneflow å›¢é˜Ÿçš„ç›®æ ‡æ˜¯ç ”å‘ä¸€ä¸ªé€šç”¨æ¡†æ¶è‡ªåŠ¨è§£å†³è¿™äº›é—®é¢˜ï¼Œè®©é‚£äº›æ²¡æœ‰æ¡†æ¶ç ”å‘èƒ½åŠ›çš„å›¢é˜Ÿä¹Ÿèƒ½å¤Ÿäº«å—åˆ†å¸ƒå¼ GPU é›†ç¾¤å¸¦æ¥çš„æ•ˆç‡ã€‚\n\n> GitHub åœ°å€â†’https://github.com/Oneflow-Inc/oneflow\n\n### 2.7 èµ„æºç›‘è§†å™¨ï¼šbpytop\n\n**æœ¬å‘¨ star å¢é•¿æ•°ï¼š2700+**\n\nbpytop æ˜¯åŸºäº Python è¯­è¨€çš„ Linux / OSX / FreeBSD èµ„æºç›‘è§†ï¼Œç”¨äºæ˜¾ç¤ºå¤„ç†å™¨ï¼Œå†…å­˜ï¼Œç£ç›˜ï¼Œç½‘ç»œå’Œè¿›ç¨‹çš„ä½¿ç”¨æƒ…å†µå’ŒçŠ¶æ€ã€‚\n\n> GitHub åœ°å€â†’https://github.com/aristocratos/bpytop\n\n![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/15c73b4f2a17416c9994a163aac29632~tplv-k3u1fbpfcp-zoom-1.image)\n\n## 3. TTime\n\nTalk Time (^o^)/ ä½ æ°¸è¿œä¸çŸ¥é“åœ¨ GitHub ä¼šæ‰¾åˆ°ä»€ä¹ˆæœ‰æ„æ€çš„é¡¹ç›®ï¼Œæœ¬ç¯‡ TT è¯é¢˜ #è®©ä½ æƒŠå‘†äº†çš„ GitHub é¡¹ç›®# ï¼Œè¯„è®ºåŒºå°±åå§ ğŸ˜Š\n\nä¾æ—§æˆ‘å…ˆæ¥ï¼Œè¿™æ˜¯ä¸€ä¸ªæœ¬å‘¨ Twitter ä¸Šå’Œ HN ä¸Šè®¨è®ºçƒ­çƒˆçš„é¡¹ç›®â€”â€”é€šè¿‡å¾®ä¿¡å°ç¨‹åºæ§åˆ¶å°å¼ºçš„ç§»åŠ¨ [æ‰‹åŠ¨ç‹—å¤´] å›´è§‚åœ°å€åœ¨è¿™é‡Œï¼šhttps://github.com/chuangzhu/insect-robot/tree/2f466f8a04e431f5b42ae0229402c28271fdfaf2\n\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b94075abef354082806acf5d10ddee92~tplv-k3u1fbpfcp-zoom-1.image)\n\nè¿˜æœ‰å‰å¹´çš„å£çº¢è‰²å·é¡¹ç›®â€¦ ğŸ¤” ä¸‹é¢ï¼Œäº¤ç»™ä½ æ¥è¯´è¯´ä½ é‡åˆ°è¿‡çš„ amazing GitHub repo å•¦~~ \n\n## 4. æ¨èé˜…è¯» \n\n- [GitHub çƒ­ç‚¹é€Ÿè§ˆ Vol.31ï¼šåœ¨ï¼Ÿè·‘ä¸ª GitHub è¯„åˆ†å¦‚ä½•ï¼Ÿ](https://juejin.im/post/6856915146116333575)\n- [GitHub çƒ­ç‚¹é€Ÿè§ˆ Vol.30ï¼šé‚£äº›æå‡æ•ˆç‡çš„å°å·¥å…·ä»¬](https://juejin.im/post/6855129007793537037)\n- [GitHub çƒ­ç‚¹é€Ÿè§ˆ Vol.29ï¼šç¨‹åºå‘˜èµ„æ–™å¤§å…¨](https://juejin.im/post/6854573212936699912)\n\nä»¥ä¸Šä¸º 2020 å¹´ç¬¬ 32 ä¸ªå·¥ä½œå‘¨çš„ GitHub Trending ğŸ‰å¦‚æœä½  Pick å…¶ä»–å¥½ç©ã€å®ç”¨çš„ GitHub é¡¹ç›®ï¼Œè®°å¾—æ¥ [HelloGitHub](https://github.com/521xueweihan/HelloGitHub) issue åŒºå’Œæˆ‘ä»¬åˆ†äº«ä¸‹å“Ÿ ğŸŒ \n\n> HelloGitHub äº¤æµç¾¤ç°å·²å…¨é¢å¼€æ”¾ï¼Œæ·»åŠ å¾®ä¿¡å·ï¼šHelloGitHub ä¸ºå¥½å‹å…¥ç¾¤ï¼Œå¯åŒå‰ç«¯ã€Javaã€Go ç­‰å„ç•Œå¤§ä½¬è°ˆç¬‘é£ç”Ÿã€åˆ‡ç£‹æŠ€æœ¯~\n\n---\n\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a4fd97bf46764353a5fd7ca91214a1d6~tplv-k3u1fbpfcp-zoom-1.image)\n\n**å…³æ³¨å…¬ä¼—å·åŠ å…¥äº¤æµç¾¤**\n\n\n\n", "user_name": "HelloGitHub", "description": "åˆ†äº« GitHub ä¸Šæœ‰è¶£ã€å…¥é—¨çº§çš„å¼€æºé¡¹ç›®", "got_view_count": 217139, "category_name": "é˜…è¯»", "ctime": 1457483895}
{"tag_name": "Java", "concern_user_count": 252044, "user_id": "2647279732263159", "title": "æ•™ä½ å¯ç”¨HTTPSï¼Œè®©ä½ çš„ç½‘ç«™ä¹Ÿèƒ½é€šè¿‡httpsè®¿é—®", "mark_content": "<section id=\"nice\" data-tool=\"mdniceç¼–è¾‘å™¨\" data-website=\"https://www.mdnice.com\" style=\"padding: 0 10px; word-spacing: 0px; word-wrap: break-word; text-align: left; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, 'PingFang SC', Cambria, Cochin, Georgia, Times, 'Times New Roman', serif; line-height: 1.6; letter-spacing: .034em; color: rgb(63, 63, 63); font-size: 16px; word-break: all;\"><p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 23px; color: rgb(74,74,74); line-height: 1.75em;\">å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å°èœï¼Œä¸€ä¸ªæ¸´æœ›åœ¨äº’è”ç½‘è¡Œä¸šåšåˆ°è”¡ä¸èœçš„å°èœã€‚å¯æŸ”å¯åˆšï¼Œç‚¹èµåˆ™æŸ”ï¼Œç™½å«–åˆ™åˆšï¼\n<strong style=\"font-weight: bold; line-height: 1.75em; color: rgb(74,74,74);\">æ­»é¬¼~çœ‹å®Œè®°å¾—ç»™æˆ‘æ¥ä¸ªä¸‰è¿å“¦ï¼</strong><img src=\"https://user-gold-cdn.xitu.io/2020/4/11/17169c46045528af?w=240&amp;h=224&amp;f=jpeg&amp;s=7529\" alt style=\"display: block; margin: 0 auto; max-width: 100%; border-radius: 4px; margin-bottom: 25px;\"></p>\n<blockquote data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 0.9em; overflow: auto; overflow-scrolling: touch; background: rgba(0, 0, 0, 0.05); color: #6a737d; padding-top: 10px; padding-bottom: 10px; padding-left: 20px; padding-right: 10px; margin-bottom: 20px; margin-top: 20px; padding: 15px 20px; line-height: 27px; background-color: rgb(239, 239, 239); border-left: none; display: block;\">\n<p style=\"padding-bottom: 8px; padding-top: 23px; margin: 0px; line-height: 26px; padding: 0px; font-size: 15px; color: rgb(89,89,89);\">æœ¬æ–‡ä¸»è¦ä»‹ç» <code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(60, 112, 198);\">å¦‚ä½•å¯ç”¨HTTPS</code></p>\n<p style=\"padding-bottom: 8px; padding-top: 23px; margin: 0px; line-height: 26px; padding: 0px; font-size: 15px; color: rgb(89,89,89);\">å¦‚æœ‰éœ€è¦ï¼Œå¯ä»¥å‚è€ƒ</p>\n<p style=\"padding-bottom: 8px; padding-top: 23px; margin: 0px; line-height: 26px; padding: 0px; font-size: 15px; color: rgb(89,89,89);\">å¦‚æœ‰å¸®åŠ©ï¼Œä¸å¿˜ <strong style=\"font-weight: bold; line-height: 1.75em; color: rgb(74,74,74);\">ç‚¹èµ</strong> â¥</p>\n</blockquote>\n<h3 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 20px;\"><span style=\"background-image: url(https://my-wechat.mdnice.com/mountain_1.png); background-size: 15px 15px; display: inline-block; width: 15px; height: 15px; line-height: 15px; margin-bottom: -1px;\"></span><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"font-size: 16px; font-weight: bold; display: inline-block; margin-left: 8px; color: rgb(60,112,198);\">ä¸€ã€å‡†å¤‡å·¥ä½œ</span><span class=\"suffix\" style=\"display: none;\"></span></h3>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: disc;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">æœåŠ¡å™¨ä¸€å°ï¼ˆå¯ä»¥è´­ä¹°é˜¿é‡Œäº‘è½»é‡åº”ç”¨æœåŠ¡å™¨ï¼Œæ¯”è¾ƒä¾¿å®œï¼‰</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">SSLè¯ä¹¦ ï¼ˆå¯ä»¥æ³¨å†Œé˜¿é‡Œäº‘å…è´¹è¯ä¹¦ï¼Œå®‰å…¨æ€§è¾ƒå·®ï¼‰</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">åŸŸåä¸€ä¸ª ï¼ˆå¯ä»¥åœ¨ä¸‡ç½‘ä¸Šè´­ä¹°å¹¶è¦è¿›è¡Œå¤‡æ¡ˆï¼‰</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">æœ¬åœ°æ‰“åŒ…å¥½çš„é¡¹ç›®ï¼ˆåšä¸»æ˜¯ä½¿ç”¨springbootå¼€å‘ï¼Œæ‰€ä»¥æ‰“åŒ…å¥½çš„æ˜¯jaråŒ…è€Œä¸æ˜¯waråŒ…ï¼‰</section></li><li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\"><code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(60, 112, 198);\">ftp</code>å®¢æˆ·ç«¯</section></li></ul>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 23px; color: rgb(74,74,74); line-height: 1.75em;\"><em style=\"font-style: italic; color: black;\">é¦–å…ˆåœ¨æœåŠ¡å™¨ä¸Šæ­å»ºå¥½ç¯å¢ƒï¼ˆæ•°æ®åº“ï¼Œjdkä¹‹ç±»çš„ï¼‰ï¼Œå› ä¸ºæ¼”ç¤ºçš„é¡¹ç›®æ˜¯ç”±<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(60, 112, 198);\">SpringBoot</code>æ­å»ºï¼Œæœ‰å†…ç½®è¿è¡Œå®¹å™¨ï¼Œæ‰€ä»¥ä¸ç”¨Tomcatã€‚</em></p>\n<h4 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 18px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">1ï¼‰SSLè¯ä¹¦</span><span class=\"suffix\" style=\"display: none;\"></span></h4>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 23px; color: rgb(74,74,74); line-height: 1.75em;\">å¯ä»¥ä¸Šé˜¿é‡Œäº‘ç”³è¯·å…è´¹ç‰ˆçš„<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(60, 112, 198);\">SSL</code>è¯ä¹¦ï¼Œä¹Ÿå¯ä»¥è®¿é—®<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(60, 112, 198);\">FreeSSL</code>ç½‘ç«™è¿›è¡Œæ³¨å†Œå…è´¹çš„è¯ä¹¦\n<img src=\"https://img-blog.csdnimg.cn/20200308123216857.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4NzIzOQ==,size_16,color_FFFFFF,t_70\" alt=\" \" style=\"display: block; margin: 0 auto; max-width: 100%; border-radius: 4px; margin-bottom: 25px;\"></p>\n<h4 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 18px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">2ï¼‰åŸŸåå¤‡æ¡ˆæˆåŠŸåéœ€è¦è¿›è¡Œè§£æ</span><span class=\"suffix\" style=\"display: none;\"></span></h4>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 23px; color: rgb(74,74,74); line-height: 1.75em;\">åˆ°é˜¿é‡Œäº‘æ§åˆ¶å°ï¼Œè¿›å…¥åŸŸåç®¡ç†\n<img src=\"https://img-blog.csdnimg.cn/20200308124447722.png\" alt=\" \" style=\"display: block; margin: 0 auto; max-width: 100%; border-radius: 4px; margin-bottom: 25px;\">\n<img src=\"https://img-blog.csdnimg.cn/2020030812450570.png\" alt=\" \" style=\"display: block; margin: 0 auto; max-width: 100%; border-radius: 4px; margin-bottom: 25px;\">\n<img src=\"https://img-blog.csdnimg.cn/20200308124534492.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4NzIzOQ==,size_16,color_FFFFFF,t_70\" alt=\" \" style=\"display: block; margin: 0 auto; max-width: 100%; border-radius: 4px; margin-bottom: 25px;\"></p>\n<h4 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 18px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">3ï¼‰è§£æå®Œæˆååœ¨è¿™å—ç‚¹å‡»è¯ä¹¦ç”³è¯·ï¼Œå¡«å†™ç›¸å…³ä¿¡æ¯</span><span class=\"suffix\" style=\"display: none;\"></span></h4>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 23px; color: rgb(74,74,74); line-height: 1.75em;\"><img src=\"https://img-blog.csdnimg.cn/20200308123451479.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4NzIzOQ==,size_16,color_FFFFFF,t_70\" alt=\" \" style=\"display: block; margin: 0 auto; max-width: 100%; border-radius: 4px; margin-bottom: 25px;\">\n<img src=\"https://img-blog.csdnimg.cn/20200308123551767.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4NzIzOQ==,size_16,color_FFFFFF,t_70\" alt=\" \" style=\"display: block; margin: 0 auto; max-width: 100%; border-radius: 4px; margin-bottom: 25px;\">\nç”³è¯·å¥½åç»è¿‡å®¡æ ¸ ï¼Œç„¶åä¾¿å¯ä»¥ç‚¹å‡»ä¸‹è½½\n<img src=\"https://img-blog.csdnimg.cn/20200308123711279.png\" alt=\" \" style=\"display: block; margin: 0 auto; max-width: 100%; border-radius: 4px; margin-bottom: 25px;\"></p>\n<h4 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 18px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">4ï¼‰æ³¨å…¥<code>ServletWebServerFactory</code></span><span class=\"suffix\" style=\"display: none;\"></span></h4>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 23px; color: rgb(74,74,74); line-height: 1.75em;\">åœ¨æˆ‘ä»¬<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(60, 112, 198);\">SpringBoot</code>é¡¹ç›®ä¸­çš„<strong style=\"font-weight: bold; line-height: 1.75em; color: rgb(74,74,74);\">å¯åŠ¨ç±»</strong>ä¸­æ³¨å…¥<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(60, 112, 198);\">ServletWebServerFactory</code>ï¼š</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #1E1E1E; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #DCDCDC; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #1E1E1E; border-radius: 5px;\"><span class=\"hljs-meta\" style=\"color: #9B9B9B; line-height: 26px;\">@Bean</span><br><span class=\"hljs-function\" style=\"color: #DCDCDC; line-height: 26px;\"><span class=\"hljs-keyword\" style=\"color: #569CD6; line-height: 26px;\">public</span>&nbsp;ServletWebServerFactory&nbsp;<span class=\"hljs-title\" style=\"color: #DCDCDC; line-height: 26px;\">servletContainer</span><span class=\"hljs-params\" style=\"color: #DCDCDC; line-height: 26px;\">()</span></span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;TomcatServletWebServerFactory&nbsp;tomcat&nbsp;=&nbsp;<span class=\"hljs-keyword\" style=\"color: #569CD6; line-height: 26px;\">new</span>&nbsp;TomcatServletWebServerFactory();<br>&nbsp;&nbsp;&nbsp;&nbsp;tomcat.addAdditionalTomcatConnectors(createHTTPConnector());<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #569CD6; line-height: 26px;\">return</span>&nbsp;tomcat;<br>}<br><br><span class=\"hljs-function\" style=\"color: #DCDCDC; line-height: 26px;\"><span class=\"hljs-keyword\" style=\"color: #569CD6; line-height: 26px;\">private</span>&nbsp;Connector&nbsp;<span class=\"hljs-title\" style=\"color: #DCDCDC; line-height: 26px;\">createHTTPConnector</span><span class=\"hljs-params\" style=\"color: #DCDCDC; line-height: 26px;\">()</span>&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;Connector&nbsp;connector&nbsp;=&nbsp;<span class=\"hljs-keyword\" style=\"color: #569CD6; line-height: 26px;\">new</span>&nbsp;Connector(<span class=\"hljs-string\" style=\"color: #D69D85; line-height: 26px;\">\"org.apache.coyote.http11.Http11NioProtocol\"</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #57A64A; font-style: italic; line-height: 26px;\">//åŒæ—¶å¯ç”¨httpï¼ˆ8080ï¼‰ã€httpsï¼ˆ8866ï¼‰ä¸¤ä¸ªç«¯å£</span><br>&nbsp;&nbsp;&nbsp;&nbsp;connector.setScheme(<span class=\"hljs-string\" style=\"color: #D69D85; line-height: 26px;\">\"http\"</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;connector.setSecure(<span class=\"hljs-keyword\" style=\"color: #569CD6; line-height: 26px;\">false</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;connector.setPort(<span class=\"hljs-number\" style=\"color: #B8D7A3; line-height: 26px;\">8080</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;connector.setRedirectPort(<span class=\"hljs-number\" style=\"color: #B8D7A3; line-height: 26px;\">8866</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #569CD6; line-height: 26px;\">return</span>&nbsp;connector;<br>}<br></code></pre>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 23px; color: rgb(74,74,74); line-height: 1.75em;\">ç„¶ååœ¨<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(60, 112, 198);\">application.properties</code>é…ç½®æ–‡ä»¶ä¸­æ·»åŠ \n<img src=\"https://img-blog.csdnimg.cn/20200308124149288.png\" alt=\" \" style=\"display: block; margin: 0 auto; max-width: 100%; border-radius: 4px; margin-bottom: 25px;\">\n<em style=\"font-style: italic; color: black;\">è¿™é‡Œæ³¨æ„æ˜¯<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(60, 112, 198);\">server.ssl.key-store-password</code>è€Œä¸æ˜¯ <code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(60, 112, 198);\">server.ssl.key-password</code></em></p>\n<h4 data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 18px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">5ï¼‰æ‰“åŒ…é¡¹ç›®</span><span class=\"suffix\" style=\"display: none;\"></span></h4>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 23px; color: rgb(74,74,74); line-height: 1.75em;\">å°†<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(60, 112, 198);\">è‡ªå·±æ‰“åŒ…å¥½çš„é¡¹ç›®å’Œä¸‹è½½ä¸‹æ¥çš„è¯ä¹¦</code>æ”¾åˆ°<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(60, 112, 198);\">usr/develop/project</code> æ–‡ä»¶å¤¹ä¸‹ï¼Œæ–‡ä»¶å¤¹ç›®å½•å¯ä»¥è‡ªå·±é€‰æ‹©ã€‚</p>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 23px; color: rgb(74,74,74); line-height: 1.75em;\">ä¸ºäº†æ–¹ä¾¿æˆ‘è‡ªå·±å»ºäº†å‡ ä¸ªè„šæœ¬æ–¹ä¾¿è¿è¡Œã€‚</p>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: disc;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\"><p style=\"font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 23px; color: rgb(74,74,74); line-height: 1.75em;\"><code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(60, 112, 198);\">vim start.sh</code></p>\n<p style=\"font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 23px; color: rgb(74,74,74); line-height: 1.75em;\">å»ºç«‹å¯åŠ¨è„šæœ¬ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>\n</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #1E1E1E; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #DCDCDC; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #1E1E1E; border-radius: 5px;\">nohup&nbsp;java&nbsp;-jar&nbsp;è‡ªå·±çš„é¡¹ç›®åç§°.jar&nbsp;&amp;<br></code></pre>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: disc;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\"><p style=\"font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 23px; color: rgb(74,74,74); line-height: 1.75em;\"><code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(60, 112, 198);\">vim stop.sh</code></p>\n<p style=\"font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 23px; color: rgb(74,74,74); line-height: 1.75em;\">å»ºç«‹åœæ­¢è„šæœ¬ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>\n</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #1E1E1E; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #DCDCDC; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #1E1E1E; border-radius: 5px;\">PID=$(ps&nbsp;-ef&nbsp;|&nbsp;grep&nbsp;è‡ªå·±çš„é¡¹ç›®åç§°.jar&nbsp;|&nbsp;grep&nbsp;-v&nbsp;grep&nbsp;|&nbsp;awk&nbsp;'{&nbsp;print&nbsp;$2&nbsp;}')<br>if&nbsp;[&nbsp;-z&nbsp;\"$PID\"&nbsp;]<br>then<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;Application&nbsp;is&nbsp;already&nbsp;stopped<br>else<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;kill&nbsp;$PID<br>&nbsp;&nbsp;&nbsp;&nbsp;kill&nbsp;-9&nbsp;$PID<br>fi<br></code></pre>\n<ul data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: disc;\">\n<li><section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\"><p style=\"font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 23px; color: rgb(74,74,74); line-height: 1.75em;\"><code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(60, 112, 198);\">vim run.sh</code></p>\n<p style=\"font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 23px; color: rgb(74,74,74); line-height: 1.75em;\">å»ºç«‹è¿è¡Œè„šæœ¬ï¼Œå†…å®¹å¦‚ä¸‹</p>\n</section></li></ul>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #1E1E1E; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #DCDCDC; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #1E1E1E; border-radius: 5px;\">echo&nbsp;stop&nbsp;application<br>source&nbsp;stop.sh<br>echo&nbsp;start&nbsp;application<br>source&nbsp;start.sh<br></code></pre>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 23px; color: rgb(74,74,74); line-height: 1.75em;\">ç„¶ååœ¨ç»ˆç«¯è¾“å…¥ <code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(60, 112, 198);\">./run.sh</code>\nå¦‚æœæç¤ºæ²¡æœ‰æƒé™ï¼Œåˆ™è¾“å…¥</p>\n<pre class=\"custom\" data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;\"><span style=\"display: block; background: url(https://my-wechat.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #1E1E1E; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #DCDCDC; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #1E1E1E; border-radius: 5px;\">chmod&nbsp;u+x&nbsp;*.sh<br></code></pre>\n<p data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 16px; padding-bottom: 8px; margin: 0; padding-top: 23px; color: rgb(74,74,74); line-height: 1.75em;\">ç„¶åå†è¾“å…¥ <code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(60, 112, 198);\">./run.sh</code>\nè¿™æ ·æˆ‘ä»¬çš„ç¨‹åºå°±å¯åŠ¨äº†ï¼Œç„¶åæˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸Šå°±å¯ä»¥é€šè¿‡<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(60, 112, 198);\">https://åŸŸå:ç«¯å£å·</code>è®¿é—®è‡ªå·±çš„é¡¹ç›®äº†</p>\n<figure data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly93d3cuNTJkb3V0dS5jbi9zdGF0aWMvdGVtcC9waWMvOWJkNjhkMTUwZjA3ODdjNTYwYTQzOWRhMzU5YTU4MGEucG5n?x-oss-process=image/format,png#pic_center\" alt=\"çœ‹å®Œä¸èµï¼Œéƒ½æ˜¯åè›‹\" style=\"display: block; margin: 0 auto; max-width: 100%; border-radius: 4px; margin-bottom: 25px;\"><figcaption style=\"margin-top: 5px; text-align: center; color: #888; display: block; font-size: 12px; font-family: PingFangSC-Light;\">çœ‹å®Œä¸èµï¼Œéƒ½æ˜¯åè›‹</figcaption></figure>\n<blockquote data-tool=\"mdniceç¼–è¾‘å™¨\" style=\"font-size: 0.9em; overflow: auto; overflow-scrolling: touch; background: rgba(0, 0, 0, 0.05); color: #6a737d; padding-top: 10px; padding-bottom: 10px; padding-left: 20px; padding-right: 10px; margin-bottom: 20px; margin-top: 20px; padding: 15px 20px; line-height: 27px; background-color: rgb(239, 239, 239); border-left: none; display: block;\">\n<p style=\"padding-bottom: 8px; padding-top: 23px; margin: 0px; line-height: 26px; padding: 0px; font-size: 15px; color: rgb(89,89,89);\">ä»Šå¤©çš„ä½ å¤šåŠªåŠ›ä¸€ç‚¹ï¼Œæ˜å¤©çš„ä½ å°±èƒ½å°‘è¯´ä¸€å¥æ±‚äººçš„è¯ï¼</p>\n<p style=\"padding-bottom: 8px; padding-top: 23px; margin: 0px; line-height: 26px; padding: 0px; font-size: 15px; color: rgb(89,89,89);\"><em style=\"font-style: italic; color: black;\">æˆ‘æ˜¯å°èœï¼Œä¸€ä¸ªå’Œä½ ä¸€èµ·å­¦ä¹ çš„ç”·äººã€‚</em> <code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(60, 112, 198);\">ğŸ’‹</code></p>\n</blockquote>\n</section>", "user_name": "è”¡ä¸èœä¸¶", "description": "å…¬ä¼—å·ï¼šå°èœè‰¯è®°", "got_view_count": 28340, "category_name": "åç«¯", "ctime": 1457483880}
{"tag_name": "å‰ç«¯", "concern_user_count": 455667, "user_id": "2858385961407853", "title": "é¢è¯•é€ ç«ç®­ï¼Œçœ‹ä¸‹è¿™äº›å¤§å‚åŸé¢˜", "mark_content": "> éœ€æ±‚å·²æ”¹æ´»å·²åŠ ï¼ŒåŠ ç­é€šå®µçœ‹æœéœã€‚\n> ç»ˆæ˜¯ä¸Šçº¿å·²å»¶æœŸï¼Œbugè¿˜æ˜¯æ”¹ä¸å®Œã€‚\n\né¢è¯•é€ ç«ç®­ï¼Œå·¥ä½œæ‹§èºä¸ï¼Œè™½ç„¶æˆ‘åªæƒ³æ‹§èºä¸ï¼Œå¯æ˜¯æˆ‘éœ€è¦ç”¨é€ ç«ç®­çš„æŠ€æœ¯å»å¯»æ‰¾æ‹§èºä¸çš„å·¥ä½œï¼Œå¦‚ä½•èƒ½åœ¨é¢è¯•è¿‡ç¨‹ä¸­è®©è‡ªå·±å¤„äºä¸è´¥çš„åœ°æ­¥å‘¢ï¼Œåˆ·é¢˜æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¥½çš„æ·å¾„ï¼Œä»Šå¤©å°±æ±‡æ€»äº†ä¸€äº›æ¯”è¾ƒç»å…¸çš„é¢è¯•é¢˜è¿›è¡Œäº†æ±‡æ€»ï¼Œåˆ†äº«ç»™å¤§å®¶ã€‚\n>æœ¬æ–‡ä¸­çš„æ‰€æœ‰é¢˜ç›®é¦–å‘äºå…¬ä¼—å·ã€å‰ç«¯æœ‰çš„ç©ã€‘ï¼Œå°ç¼–æ¯å¤©éƒ½ä¼šæ•´ç†ä¸€é“ä¸¤é“é¢è¯•é¢˜ï¼Œç„¶åæ¨é€ç»™æ‰€æœ‰çš„æœ‹å‹ï¼Œå…³æ³¨å°ç¼–ï¼Œæ¯å¤©å¸¦ä½ å»åˆ·é¢è¯•é¢˜ï¼Œä¸æƒ³å½“å’¸é±¼ï¼Œæƒ³è¦æ¢å·¥ä½œï¼Œè¿˜åœ¨çŠ¹è±«ä»€ä¹ˆï¼Œå…³æ³¨ === å¤§å‚offerã€‚\n\n### é¢˜ç›®ä¸€\n\n#### é¢˜ç›®ä»‹ç»\n\nå¦‚ä¸‹ä¸ºä¸€æ®µä»£ç ï¼Œè¯·å®Œå–„sumå‡½æ•°ï¼Œä½¿å¾— sum(1,2,3,4,5,6) å‡½æ•°è¿”å›å€¼ä¸º 21 ,éœ€è¦åœ¨ sum å‡½æ•°ä¸­è°ƒç”¨ asyncAdd å‡½æ•°ï¼Œä¸”ä¸èƒ½ä¿®æ”¹asyncAddå‡½æ•°\n\n```javascript\n/**\n * è¯·åœ¨ sumå‡½æ•°ä¸­è°ƒç”¨æ­¤å‡½æ•°ï¼Œå®Œæˆæ•°å€¼è®¡ç®—\n * @param {*} a è¦ç›¸åŠ çš„ç¬¬ä¸€ä¸ªå€¼\n * @param {*} b è¦ç›¸åŠ çš„ç¬¬äºŒä¸ªå€¼\n * @param {*} callback ç›¸åŠ ä¹‹åçš„å›è°ƒå‡½æ•°\n */\nfunction asyncAdd(a,b,callback) {\n  setTimeout(function(){\n   callback(null, a+b)\n  },1000)\n}\n\n/**\n * è¯·åœ¨æ­¤æ–¹æ³•ä¸­è°ƒç”¨asyncAddæ–¹æ³•ï¼Œå®Œæˆæ•°å€¼è®¡ç®—\n * @param  {...any} rest ä¼ å…¥çš„å‚æ•°\n */\nasync function sum(...rest) {\n  // è¯·åœ¨æ­¤å¤„å®Œå–„ä»£ç \n}\n\nlet start = window.performance.now()\nsum(1, 2, 3, 4, 5, 6).then(res => {\n  // è¯·ä¿è¯åœ¨è°ƒç”¨sumæ–¹æ³•ä¹‹åï¼Œè¿”å›ç»“æœ21\n  console.log(res)\n  console.log(`ç¨‹åºæ‰§è¡Œå…±è€—æ—¶: ${window.performance.now() - start}`)\n})\n```\n\næœ¬é¢˜æ ¹æ®ç¨‹åºè¾“å‡ºæ—¶é—´ä¸åŒ,å¯ä»¥åˆ’åˆ†ä¸ºä¸‰ä¸ªéš¾åº¦ç­‰çº§\n\n1. é’é“œéš¾åº¦ï¼Œ è¾“å‡ºæ—¶é•¿å¤§äº6ç§’\n2. ç™½é“¶éš¾åº¦ï¼Œ è¾“å‡ºæ—¶é•¿å¤§äº3ç§’\n3. ç‹è€…éš¾åº¦ï¼Œ è¾“å‡ºæ—¶é•¿å¤§äº1ç§’\n\n#### ç­”æ¡ˆ\n\n1. é’é“œéš¾åº¦\n\n```javascript\nasync function sum(...rest) {\n  // å–å‡ºæ¥ç¬¬ä¸€ä¸ªä½œä¸ºåˆå§‹å€¼\n  let result = rest.shift()\n  // é€šè¿‡for of éå† rest, ä¾æ¬¡ç›¸åŠ \n  for(let num of rest) {\n    // ä½¿ç”¨promise è·å–ç›¸åŠ ç»“æœ\n    result = await new Promise(resolve => {\n      asyncAdd(result, num, (_,res) => {\n        resolve(res)\n      })\n    })\n  }\n  // è¿”å›æ‰§è¡Œç»“æœ\n  return result\n}\n\n// æ‰§è¡ŒæˆåŠŸï¼Œæ‰§è¡Œæ—¶é•¿å¤§äº6ç§’\nsum1(1, 2, 3, 4, 5,6).then(res => {\n  console.log(`è®¡ç®—ç»“æœä¸º:${res}`)\n})\n\n```\n\n\n\n2. ç™½é“¶éš¾åº¦\n\nåœ¨é’é“œéš¾åº¦ï¼Œæˆ‘ä»¬æŠŠæ•°ç»„é‡Œé¢çš„æ¯ä¸€é¡¹ä¾æ¬¡ç›¸åŠ ã€‚ä½†æ˜¯ä¹Ÿå¯ä»¥è¿›è¡Œä¸€äº›ä¼˜åŒ–ï¼Œå¯ä»¥å¹¶å‘æ‰§è¡Œå¤šä¸ªï¼Œæ¯”å¦‚ `sum(1,2,3,4,5,6)`ï¼Œå¯ä»¥åŒæ—¶æ‰§è¡Œ `1+2`,`3+4`,`5+6`,è¿™æ ·å°±å¯ä»¥æå‡æ‰§è¡Œæ•ˆç‡\n\n```javascript\nasync function sum(...rest) {\n  // å¦‚æœä¼ çš„å€¼å°‘äº2ä¸ªï¼Œåˆ™ç›´æ¥è¿”å›\n  if (rest.length <= 1) {\n    return rest[0] || 0\n  }\n  const promises = []\n  // éå†å°†æ•°ç»„é‡Œé¢çš„å€¼ä¸¤ä¸ªä¸¤ä¸ªçš„æ‰§è¡Œ\n  for (let i = 0; i < rest.length; i += 2) {\n    promises.push(\n      new Promise(resolve => {\n        // å¦‚æœ rest[i+1] æ˜¯ undefined, è¯´æ˜æ•°ç»„é•¿åº¦æ˜¯å¥‡æ•°ï¼Œè¿™ä¸ªæ˜¯æœ€åä¸€ä¸ª\n        if (rest[i + 1] === undefined) {\n          resolve(rest[i])\n        } else {\n          // è°ƒç”¨asyncAdd è¿›è¡Œè®¡ç®—\n          asyncAdd(rest[i], rest[i + 1], (_, result) => {\n            resolve(result)\n          })\n        }\n      })\n    )\n  }\n  // è·å–ç¬¬ä¸€æ¬¡è®¡ç®—ç»“æœ\n  const result = await Promise.all(promises)\n  // ç„¶åå°†ç¬¬ä¸€æ¬¡è·å–åˆ°çš„ç»“æœå³ [3,7,11] å†æ¬¡è°ƒç”¨ sumæ‰§è¡Œ\n  return await sum(...result)\n}\n\n// æ‰§è¡ŒæˆåŠŸï¼Œæ‰§è¡Œæ—¶é•¿å¤§äº3ç§’å°äº4ç§’\nsum1(1, 2, 3, 4, 5,6).then(res => {\n  console.log(`è®¡ç®—ç»“æœä¸º:${res}`)\n})\n```\n\n\n\n3. ç‹è€…éš¾åº¦\n\n```javascript\nasync function sum(...rest) {\n  let result = 0\n  // éšæ°ç±»å‹è½¬æ¢ï¼Œ å¯¹è±¡ + æ•°å­—ï¼Œä¼šå…ˆè°ƒç”¨å¯¹è±¡çš„toString æ–¹æ³•\n  const obj = {}\n  obj.toString = function() {\n    return result\n  }\n  const promises = []\n  for(let num of rest) {\n    promises.push(new Promise((resolve) => {\n      asyncAdd(obj, num, (_, res) => {\n        resolve(res)\n      })\n    }).then(res => {\n      // åœ¨è¿™é‡Œå°† resultçš„å€¼æ”¹å˜ä¹‹åï¼Œobj.toString çš„è¿”å›å€¼å°±å˜äº†ï¼Œè¿™æ—¶å€™ä¸‹ä¸€ä¸ªsetTimeoutè°ƒç”¨æ—¶å°±ä½¿ç”¨äº†æ–°å€¼\n      result = res\n    }))\n  }\n  await Promise.all(promises)\n  return result\n}\n\n// æ‰§è¡ŒæˆåŠŸï¼Œæ‰§è¡Œæ—¶é•¿å¤§äº1ç§’å°äº2ç§’\nsum1(1, 2, 3, 4, 5,6).then(res => {\n  console.log(`è®¡ç®—ç»“æœä¸º:${res}`)\n})\n```\n\nå› ä¸º`js`æ˜¯æ‰§è¡Œåœ¨å•çº¿ç¨‹é‡Œé¢çš„ï¼Œæ‰€ä»¥ä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä»¬åœ¨`for of`å°†æ‰€æœ‰çš„è®¡ç®—æ”¾åˆ°`promises`æ•°ç»„é‡Œé¢ï¼Œç„¶åé€šè¿‡`Promise.all`å»ä¸€æ¬¡æ€§æ‰§è¡Œï¼Œè¿™æ—¶å€™å¹¶ä¸éœ€è¦è€ƒè™‘åˆ°åº•å…ˆæ‰§è¡Œå“ªä¸¤ä¸ªæ•°å­—ç›¸åŠ ã€‚å› ä¸ºå•çº¿ç¨‹çš„åŸå› ï¼Œæˆ‘ä»¬å¯ä»¥ä¿è¯è¿™å‡ ä¸ª`Promise`æ˜¯ä¾æ¬¡æ‰§è¡Œçš„ï¼Œè¿™æ—¶å€™`obj.toString`è¿”å›å€¼å°±æ˜¯ä¸Šä¸€ä¸ª`Promise`çš„è¿”å›å€¼ï¼Œå¤šè·‘å‡ éä»£ç ä½ å°±æ‡‚äº†å“¦\n\n### é¢˜ç›®äºŒ\n\n#### é¢˜ç›®ä»‹ç»\n\nè¯·è¯´æ˜ä»¥ä¸‹ä»£ç å„è¾“å‡ºäº†ä»€ä¹ˆ?\n\n```javascript\nconsole.log(typeof (() => {}))\n\nconsole.log(typeof ['å‰ç«¯æœ‰çš„ç©','å…¬ä¼—å·'])\n\nconsole.log(typeof null)\n\nconsole.log(typeof undefined)\n\nconsole.log(typeof Function.prototype)\n\nconsole.log('å­å›' instanceof String)\n\nconsole.log(new Date() instanceof Date)\n```\n\n#### ç­”æ¡ˆ\n\n```javascript\n// è¾“å‡º function\nconsole.log(typeof (() => {}))\n\n// è¾“å‡º object\nconsole.log(typeof ['å‰ç«¯æœ‰çš„ç©','å…¬ä¼—å·'])\n\n// è¾“å‡º object\nconsole.log(typeof null)\n\n// è¾“å‡º undefined\nconsole.log(typeof undefined)\n\n// è¾“å‡º function \nconsole.log(typeof Function.prototype)\n\n// è¾“å‡º false\nconsole.log('å­å›' instanceof String)\n\n// è¾“å‡º true\nconsole.log(new Date() instanceof Date)\n```\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¯¹äº `typeof`, å¯ä»¥æ­£ç¡®åˆ¤æ–­é™¤äº†`null`ä¹‹å¤–çš„æ‰€æœ‰åŸºæœ¬ç±»å‹ï¼Œè€Œå¯¹äºå¼•ç”¨ç±»å‹ï¼Œé™¤äº†å‡½æ•°å¤–å…¶ä»–éƒ½ä¼šè¢«åˆ¤æ–­ä¸º`object`ã€‚\n\nå¯¹äº`instanceof`,æ— æ³•åˆ¤æ–­åŸºæœ¬ç±»å‹ï¼Œä½†å¯ä»¥æ­£ç¡®åˆ¤æ–­å¼•ç”¨ç±»å‹\n\n### é¢˜ç›®ä¸‰\n\n#### é¢˜ç›®ä»‹ç»\n\nè¯·å®ç°ä¸€ä¸ª`instanceof`,è®©ä»¥ä¸‹ä»£ç å¯æ­£å¸¸è¿è¡Œ\n\n```javascript\n/**\n è‡ªå®šä¹‰instanceof \n*/\nfunction instanceOf(left, right) {\n    // è¯·å®Œå–„ä»¥ä¸‹ä»£ç ï¼Œä¸èƒ½ä½¿ç”¨åŸç”Ÿinstanceof\n}\n\nclass A{}\nclass B extends A {}\nclass C{}\n\nconst b = new B()\n// è¾“å‡º true\nconsole.log(instanceOf(b,B))\n// è¾“å‡º true\nconsole.log(instanceOf(b,A))\n// è¾“å‡º false\nconsole.log(instanceOf(b,C))\n```\n\n#### ç­”æ¡ˆ\n\næœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ`instanceof`çš„åˆ¤æ–­åŸç†ï¼Œ`instanceof`ä¸»è¦çš„å®ç°åŸç†å°±æ˜¯åªè¦å³è¾¹å˜é‡çš„ `prototype` åœ¨å·¦è¾¹å˜é‡çš„åŸå‹é“¾ä¸Šå³å¯ã€‚å› æ­¤ï¼Œ`instanceof` åœ¨æŸ¥æ‰¾çš„è¿‡ç¨‹ä¸­ä¼šéå†å·¦è¾¹å˜é‡çš„åŸå‹é“¾ï¼Œç›´åˆ°æ‰¾åˆ°å³è¾¹å˜é‡çš„ `prototype`ï¼Œå¦‚æœæŸ¥æ‰¾å¤±è´¥ï¼Œåˆ™ä¼šè¿”å› `false`ã€‚\n\n```javascript\n/**\n  è‡ªå®šä¹‰instanceof \n*/\nfunction instanceOf(left, right) {\n  let proto = left.__proto__\n  while(proto){\n    if(proto === right.prototype){\n       return true\n    }\n    proto = proto.__proto__\n  }  \n  return false\n}\n\nclass A{}\nclass B extends A {}\nclass C{}\n\nconst b = new B()\n// è¾“å‡º true\nconsole.log(instanceOf(b,B))\n// è¾“å‡º true\nconsole.log(instanceOf(b,A))\n// è¾“å‡º false\nconsole.log(instanceOf(b,C))\n```\n\n### é¢˜ç›®å››\n\n#### é¢˜ç›®ä»‹ç»\n\nè¯·æ¨¡æ‹Ÿå®ç°`new`æ“ä½œç¬¦ï¼Œä½¿ä¸‹é¢ä»£ç æ­£å¸¸è¿è¡Œ\n\n```javascript\nfunction myNew(constructor, ...rest) {\n // è¯·åœ¨æ­¤å¤„å®Œå–„ä»£ç ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨ new æ“ä½œç¬¦\n}\nfunction Fun(name,sex) {\n  this.name = name\n  this.sex = sex\n}\nFun.prototype.getUserInfo = function() {\n  return `æˆ‘çš„å§“å${this.name},æˆ‘çš„æ€§åˆ«${this.sex}`\n}\n\nconst fun = myNew(Fun,'å­å›','ç”·')\n// æˆ‘çš„å§“åå­å›ï¼Œæˆ‘çš„æ€§åˆ«ç”·\nconsole.log(fun.getUserInfo())\n```\n\n#### ç­”æ¡ˆ\n\nè¿™é“é¢˜è€ƒå¯Ÿçš„æ˜¯ä½¿ç”¨`newæ“ä½œç¬¦`è°ƒç”¨æ„é€ å‡½æ•°æ‰€ç»å†çš„é˜¶æ®µ:\n\n1. åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡;\n2. å°†æ„é€ å‡½æ•°çš„ä½œç”¨åŸŸèµ‹ç»™æ–°çš„å¯¹è±¡;\n3. æ‰§è¡Œæ„é€ å‡½æ•°ä¸­çš„ä»£ç ;\n4. è¿”å›æ–°çš„å¯¹è±¡;\n\n```javascript\nfunction myNew(constructor, ...rest) {\n  if (typeof constructor !== 'function') {\n        return constructor;\n    }\n    //åˆ›å»ºæ–°çš„å¯¹è±¡,å…³è”æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡\n    const _constructor = Object.create(constructor.prototype);\n    //æ‰§è¡Œæ„é€ å‡½æ•°\n    const obj = constructor.apply(_constructor, rest);\n    //å¦‚æœæ„é€ å‡½æ•°æ‰§è¡Œç»“æœæ˜¯å¯¹è±¡åˆ™è¿”å›æ‰§è¡Œç»“æœ\n    if (typeof obj === 'object') {\n        return obj;\n    } else {\n        return _constructor;\n    }\n}\nfunction Fun(name,sex) {\n  this.name = name\n  this.sex = sex\n}\nFun.prototype.getUserInfo = function() {\n  return `æˆ‘çš„å§“å${this.name},æˆ‘çš„æ€§åˆ«${this.sex}`\n}\n\nconst fun = myNew(Fun,'å­å›','ç”·')\n// æˆ‘çš„å§“åå­å›ï¼Œæˆ‘çš„æ€§åˆ«ç”·\nconsole.log(fun.getUserInfo())\n```\n\n### é¢˜ç›®äº”\n\n#### é¢˜ç›®ä»‹ç»\n\nè¯·è¯´å‡ºä»¥ä¸‹ä»£ç è¾“å‡ºå†…å®¹\n\n```javascript\nconst a = {}\nconst b = Symbol('1')\nconst c = Symbol('1')\na[b] = 'å­å›'\na[c] = 'å›å­'\n\n// æˆ‘æ˜¯å­å›è¿˜æ˜¯å›å­å‘¢\nconsole.log(a[b])\n\nconst d = {}\nconst e = {key: '1'}\nconst f = {key: '2'}\nd[e] = 'å­å›'\nd[f] = 'å›å­'\n\n// æˆ‘æ˜¯å­å›è¿˜æ˜¯å›å­å‘¢\nconsole.log(d[e])\n```\n\n#### ç­”æ¡ˆ\n\n```javascript\nconst a = {}\nconst b = Symbol('1')\nconst c = Symbol('1')\na[b] = 'å­å›'\na[c] = 'å›å­'\n\n// è¾“å‡ºå­å›\nconsole.log(a[b])\n\nconst d = {}\nconst e = {key: '1'}\nconst f = {key: '2'}\nd[e] = 'å­å›'\nd[f] = 'å›å­'\n\n// è¾“å‡ºå›å­\nconsole.log(d[e])\n```\n\nå¯¹äºç¬¬ä¸€ä¸ªè¾“å‡ºï¼Œ`Symbol()`å‡½æ•°ä¼šè¿”å›**ã€Œsymbolã€**ç±»å‹çš„å€¼ï¼Œè€Œ`Symbol`å‡½æ•°ä¼ çš„å‚æ•°ä»…ä»…æ˜¯ç”¨äºæ ‡è¯†çš„ï¼Œä¸ä¼šå½±å“å€¼çš„å”¯ä¸€æ€§\n\nå¯¹äºç¬¬äºŒä¸ªè¾“å‡ºï¼Œ å› ä¸º`e`å’Œ`f`éƒ½æ˜¯å¯¹è±¡ï¼Œè€Œå¯¹è±¡çš„`key`åªèƒ½æ˜¯æ•°å€¼æˆ–å­—ç¬¦ï¼Œæ‰€ä»¥ä¼šå°†å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ï¼Œå¯¹è±¡çš„`toString`æ–¹æ³•è¿”å›çš„æ˜¯`[object Object]`, æ‰€æœ‰è¾“å‡ºçš„æ˜¯å›å­\n\n#### é¢˜ç›®å…­\n\n#### é¢˜ç›®ä»‹ç»\n\nè¯·è¯´å‡ºä»¥ä¸‹ä»£ç è¾“å‡ºçš„å†…å®¹\n\n```javascript\nconsole.log([] + [])\nconsole.log({} + [])\nconsole.log([] == ![])\nconsole.log(true + false)\n```\n\n#### ç­”æ¡ˆ\n\n1. ç¬¬ä¸€è¡Œä»£ç \n\n```\n// è¾“å‡º \"\" ç©ºå­—ç¬¦ä¸²\nconsole.log([] + [])\n```\n\nè¿™è¡Œä»£ç è¾“å‡ºçš„æ˜¯ç©ºå­—ç¬¦ä¸²`\"\"`ï¼Œ åŒ…è£…ç±»å‹åœ¨è¿ç®—çš„æ—¶å€™ï¼Œä¼šå…ˆè°ƒç”¨`valueOf`æ–¹æ³•ï¼Œå¦‚æœ`valueOf`è¿”å›çš„è¿˜æ˜¯åŒ…è£…ç±»å‹ï¼Œé‚£ä¹ˆå†è°ƒç”¨`toString`æ–¹æ³•\n\n```\n// è¿˜æ˜¯ æ•°ç»„\nconst val = [].valueOf()\n// æ•°ç»„ toString é»˜è®¤ä¼šå°†æ•°ç»„å„é¡¹ä½¿ç”¨é€—å· \",\" éš”å¼€, æ¯”å¦‚ [1,2,3].toSting å˜æˆäº†\"1,2,3\",ç©ºæ•°ç»„ toString å°±æ˜¯ç©ºå­—ç¬¦ä¸²\nconst val1 = val.toString() // val1 æ˜¯ç©ºå­—ç¬¦ä¸²\n```\n\næ‰€ä»¥ä¸Šé¢çš„ä»£ç ç›¸å½“äº\n\n```\nconsole.log(\"\" + \"\")\n```\n\n1. ç¬¬äºŒè¡Œä»£ç \n\n   ```\n   // è¾“å‡º \"[object Object]\"\n   console.log({} + [])\n   ```\n\n   å’Œç¬¬ä¸€é¢˜é“ç†ä¸€æ ·ï¼Œå¯¹è±¡ `{}`éšæ°è½¬æ¢æˆäº†`[object Object]`,ç„¶åä¸`\"\"`ç›¸åŠ \n\n2. ç¬¬ä¸‰è¡Œä»£ç \n\n   ```\n   // è¾“å‡º true\n   console.log([] == ![])\n   ```\n\n   å¯¹äº`===`, ä¼šä¸¥æ ¼æ¯”è¾ƒä¸¤è€…çš„å€¼ï¼Œä½†æ˜¯å¯¹äº`==`å°±ä¸ä¸€æ ·äº†\n\n   æ‰€ä»¥å¯¹äºä¸Šé¢çš„ä»£ç ,çœ‹ä¸‹é¢ä¸€æ­¥ä¸€æ­¥åˆ†æ\n\n   ```\n   // è¿™ä¸ªè¾“å‡º false\n   console.log(![])\n   // å¥—ç”¨ä¸Šé¢ç¬¬ä¸‰æ¡ å°† false è½¬æ¢ä¸º æ•°å€¼\n   // è¿™ä¸ªè¾“å‡º 0\n   console.log(Number(false))\n   // åŒ…è£…ç±»å‹ä¸ åŸºæœ¬ç±»å‹ == å…ˆå°†åŒ…è£…ç±»å‹é€šè¿‡ valueOf toString è½¬æ¢ä¸ºåŸºæœ¬ç±»å‹ \n   // è¾“å‡º \"\"\n   console.log([].toString())\n   // å¥—ç”¨ç¬¬2æ¡ï¼Œ å°†ç©ºå­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å€¼ã€\n   // è¾“å‡º 0\n   console.log(Number(\"\"))\n   // æ‰€ä»¥\n   console.log(0 == 0)\n   ```\n\n3. 1. æ¯”å¦‚ `null == undefined`\n   2. å¦‚æœé`number`ä¸`number`æ¯”è¾ƒï¼Œä¼šå°†å…¶è½¬æ¢ä¸º`number`\n   3. å¦‚æœæ¯”è¾ƒçš„åŒæ–¹ä¸­ç”±ä¸€æ–¹æ˜¯`boolean`,é‚£ä¹ˆä¼šå…ˆå°†`boolean`è½¬æ¢ä¸º`number`\n\n4. ç¬¬å››è¡Œä»£ç \n\n   ```\n   // è¾“å‡º 1\n   console.log(true + false)\n   ```\n\n   ä¸¤ä¸ªåŸºæœ¬ç±»å‹ç›¸åŠ ï¼Œå¦‚æœå…¶ä¸­ä¸€æ–¹æ˜¯å­—ç¬¦ï¼Œåˆ™å°†å…¶ä»–çš„è½¬æ¢ä¸ºå­—ç¬¦ç›¸åŠ ï¼Œå¦åˆ™å°†ç±»å‹è½¬æ¢ä¸º`Number`,ç„¶åç›¸åŠ , `Number(true)` æ˜¯`1`, `Number(false)`æ˜¯`0`, æ‰€ä»¥ç»“æœæ˜¯ `1`\n\n>æœ¬æ–‡ä¸­çš„æ‰€æœ‰é¢˜ç›®é¦–å‘äºå…¬ä¼—å·ã€å‰ç«¯æœ‰çš„ç©ã€‘ï¼Œå°ç¼–æ¯å¤©éƒ½ä¼šæ•´ç†ä¸€é“ä¸¤é“é¢è¯•é¢˜ï¼Œç„¶åæ¨é€ç»™æ‰€æœ‰çš„æœ‹å‹ï¼Œå…³æ³¨å°ç¼–ï¼Œæ¯å¤©å¸¦ä½ å»åˆ·é¢è¯•é¢˜ï¼Œä¸æƒ³å½“å’¸é±¼ï¼Œæƒ³è¦æ¢å·¥ä½œï¼Œè¿˜åœ¨çŠ¹è±«ä»€ä¹ˆï¼Œå…³æ³¨ === å¤§å‚offerã€‚\n\n #### ç»“è¯­\n > ä¸è¦å¹ç­ä½ çš„çµæ„Ÿå’Œä½ çš„æƒ³è±¡åŠ›; ä¸è¦æˆä¸ºä½ çš„æ¨¡å‹çš„å¥´éš¶ã€‚ â€”â€”æ–‡æ£®ç‰¹ãƒ»æ¢µé«˜", "user_name": "å‰ç«¯è¿›å‡»è€…", "description": "æŠ€æœ¯æ—¥æ–°æœˆå¼‚ï¼Œæˆ‘æ„¿ç´§éšä¸èˆã€‚ä¸ªäººå…¬ä¼—å·ã€å‰ç«¯æœ‰çš„ç©ã€‘", "got_view_count": 313529, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "Spring Boot", "concern_user_count": 26072, "user_id": "4107431172378887", "title": "è‡ªå·±åŠ¨æ‰‹ç¼–å†™ä¸€ä¸ªMybatisæ’ä»¶ï¼šMybatisè„±æ•æ’ä»¶", "mark_content": "![](https://asset.felord.cn/blog/20200810155526.jpg)\n\n## 1. å‰è¨€\n\nåœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œèº«ä»½è¯å·ã€æ‰‹æœºå·ã€å¡å·ã€å®¢æˆ·å·ç­‰ä¸ªäººä¿¡æ¯éƒ½éœ€è¦è¿›è¡Œæ•°æ®è„±æ•ã€‚å¦åˆ™å®¹æ˜“é€ æˆä¸ªäººéšç§æ³„éœ²ï¼Œå®¢æˆ·èµ„æ–™æ³„éœ²ï¼Œç»™ä¸æ³•åˆ†å­å¯ä¹˜ä¹‹æœºã€‚ä½†æ˜¯æ•°æ®è„±æ•ä¸æ˜¯æŠŠæ•æ„Ÿä¿¡æ¯éšè—èµ·æ¥ï¼Œè€Œæ˜¯çœ‹èµ·æ¥åƒçœŸçš„ä¸€æ ·ï¼Œå®é™…ä¸Šä¸èƒ½æ˜¯çœŸçš„ã€‚æˆ‘ä»¥å‰çš„å…¬å¸å°±å› ä¸ºä¸é‡è§†è„±æ•ï¼Œä¸€åå‘˜å·¥åœ¨ç¦»èŒçš„æ—¶å€™é€šè¿‡åå°çš„å¯¼å‡ºåŠŸèƒ½å¯¼å‡ºäº†æ ¸å¿ƒçš„å®¢æˆ·èµ„æ–™å–ç»™äº†ç«å“ï¼Œç»™å…¬å¸é€ æˆäº†é‡å¤§çš„æŸå¤±ã€‚å½“ç„¶è¿™é‡Œæœ‰æ•°æ®ç®¡ç†çš„åŸå› ï¼Œä½†æ˜¯è„±æ•ä»æ—§æ˜¯ä¸å¯å¿½ç•¥çš„ä¸€ç¯ï¼Œè„±æ•å¯ä»¥ä»ä¸€å®šç¨‹åº¦ä¸Šä¿è¯æ•°æ®çš„åˆè§„ä½¿ç”¨ã€‚ä¸‹é¢å°±æ˜¯ä¸€ä»½ç»è¿‡è„±æ•çš„æ•°æ®ï¼š\n\n![è„±æ•ä¹‹åçš„æ•°æ®](https://asset.felord.cn/blog/20200809212703.png)\n\n## 2. Mybatis è„±æ•æ’ä»¶\n\næœ€è¿‘åœ¨ç ”ç©¶**Mybatis**çš„æ’ä»¶ï¼Œæ‰€ä»¥è€ƒè™‘èƒ½ä¸èƒ½åœ¨**ORM**ä¸­æä¸€æè„±æ•ï¼Œæ‰€ä»¥å°±å°è¯•äº†ä¸€ä¸‹ï¼Œè¿™é‡Œåˆ†äº«ä¸€ä¸‹æ€è·¯ã€‚å€Ÿæ­¤ä¹Ÿåˆ†äº«ä¸€ä¸‹**Mybatis**æ’ä»¶å¼€å‘çš„æ€è·¯ã€‚\n\n### 2.1 Mybatis æ’ä»¶æ¥å£\n\n**Mybatis**ä¸­ä½¿ç”¨æ’ä»¶ï¼Œéœ€è¦å®ç°æ¥å£`org.apache.ibatis.plugin.Interceptor`ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n\n```java\npublic interface Interceptor {\n\n  Object intercept(Invocation invocation) throws Throwable;\n\n  default Object plugin(Object target) {\n    return Plugin.wrap(target, this);\n  }\n\n  default void setProperties(Properties properties) {\n    // NOP\n  }\n\n}\n```\n\nè¿™é‡Œå…¶å®æœ€æ ¸å¿ƒçš„æ˜¯`Object intercept(Invocation invocation)`æ–¹æ³•ï¼Œè¿™æ˜¯æˆ‘ä»¬éœ€è¦å®ç°çš„æ–¹æ³•ã€‚\n\n### 2.2 Invocation å¯¹è±¡\n\né‚£ä¹ˆæ ¸å¿ƒæ–¹æ³•ä¸­çš„`Invocation `æ˜¯ä¸ªä»€ä¹ˆæ¦‚å¿µå‘¢ï¼Ÿ\n\n```java\npublic class Invocation {\n\n  private final Object target;\n  private final Method method;\n  private final Object[] args;\n\n  public Invocation(Object target, Method method, Object[] args) {\n    this.target = target;\n    this.method = method;\n    this.args = args;\n  }\n\n  public Object getTarget() {\n    return target;\n  }\n\n  public Method getMethod() {\n    return method;\n  }\n\n  public Object[] getArgs() {\n    return args;\n  }\n\n  public Object proceed() throws InvocationTargetException, IllegalAccessException {\n    return method.invoke(target, args);\n  }\n\n}\n```\n\nè¿™ä¸ªä¸œè¥¿åŒ…å«äº†å››ä¸ªæ¦‚å¿µï¼š\n\n- **target** æ‹¦æˆªçš„å¯¹è±¡\n- **method** æ‹¦æˆª**target**ä¸­çš„å…·ä½“æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´**Mybatis**æ’ä»¶çš„ç²’åº¦æ˜¯ç²¾ç¡®åˆ°æ–¹æ³•çº§åˆ«çš„ã€‚\n- **args**  æ‹¦æˆªåˆ°çš„å‚æ•°ã€‚\n- **proceed** æ‰§è¡Œè¢«æ‹¦æˆªåˆ°çš„æ–¹æ³•ï¼Œä½ å¯ä»¥åœ¨æ‰§è¡Œçš„å‰ååšä¸€äº›äº‹æƒ…ã€‚\n\n### 2.3 æ‹¦æˆªç­¾å\n\næ—¢ç„¶æˆ‘ä»¬çŸ¥é“äº†**Mybatis**æ’ä»¶çš„ç²’åº¦æ˜¯ç²¾ç¡®åˆ°æ–¹æ³•çº§åˆ«çš„ï¼Œé‚£ä¹ˆç–‘é—®æ¥äº†ï¼Œæ’ä»¶å¦‚ä½•çŸ¥é“è½®åˆ°å®ƒå·¥ä½œäº†å‘¢ï¼Ÿ\n\næ‰€ä»¥**Mybatis**è®¾è®¡äº†ç­¾åæœºåˆ¶æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œé€šè¿‡åœ¨æ’ä»¶æ¥å£ä¸Šä½¿ç”¨æ³¨è§£`@Intercepts`æ ‡æ³¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\n\n```java\n@Intercepts(@Signature(type = ResultSetHandler.class,\n        method = \"handleResultSets\",\n        args = {Statement.class}))\n```\n\nå°±åƒä¸Šé¢ä¸€æ ·ï¼Œäº‹å®ä¸Šå°±ç­‰äºé…ç½®äº†ä¸€ä¸ª`Invocation`ã€‚\n\n### 2.4 æ’ä»¶çš„ä½œç”¨åŸŸ\n\né‚£ä¹ˆé—®é¢˜åˆæ¥äº†ï¼Œ**Mybatis**æ’ä»¶èƒ½æ‹¦æˆªå“ªäº›å¯¹è±¡,æˆ–è€…è¯´æ’ä»¶èƒ½åœ¨å“ªä¸ªç”Ÿå‘½å‘¨æœŸé˜¶æ®µèµ·ä½œç”¨å‘¢ï¼Ÿå®ƒå¯ä»¥æ‹¦æˆªä»¥ä¸‹å››å¤§å¯¹è±¡ï¼š\n\n- **Executor** æ˜¯**SQL**æ‰§è¡Œå™¨ï¼ŒåŒ…å«äº†ç»„è£…å‚æ•°ï¼Œç»„è£…ç»“æœé›†åˆ°è¿”å›å€¼ä»¥åŠæ‰§è¡Œ**SQL**çš„è¿‡ç¨‹ï¼Œç²’åº¦æ¯”è¾ƒç²—ã€‚\n- **StatementHandler** ç”¨æ¥å¤„ç†SQLçš„æ‰§è¡Œè¿‡ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œé‡å†™**SQL**éå¸¸å¸¸ç”¨ã€‚\n- **ParameterHandler** ç”¨æ¥å¤„ç†ä¼ å…¥**SQL**çš„å‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥é‡å†™å‚æ•°çš„å¤„ç†è§„åˆ™ã€‚\n- **ResultSetHandler** ç”¨äºå¤„ç†ç»“æœé›†ï¼Œæˆ‘ä»¬å¯ä»¥é‡å†™ç»“æœé›†çš„ç»„è£…è§„åˆ™ã€‚\n\nä½ éœ€è¦åšçš„å°±æ˜¯æ˜ç¡®çš„ä½ çš„ä¸šåŠ¡éœ€è¦åœ¨ä¸Šé¢å››ä¸ªå¯¹è±¡çš„å“ªä¸ªå¤„ç†é˜¶æ®µæ‹¦æˆªå¤„ç†å³å¯ã€‚\n\n### 2.5 MetaObject\n\n**Mybatis**æä¾›äº†ä¸€ä¸ªå·¥å…·ç±»`org.apache.ibatis.reflection.MetaObject`ã€‚å®ƒé€šè¿‡åå°„æ¥è¯»å–å’Œä¿®æ”¹ä¸€äº›é‡è¦å¯¹è±¡çš„å±æ€§ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨å®ƒæ¥å¤„ç†å››å¤§å¯¹è±¡çš„ä¸€äº›å±æ€§ï¼Œè¿™æ˜¯**Mybatis**æ’ä»¶å¼€å‘çš„ä¸€ä¸ªå¸¸ç”¨å·¥å…·ç±»ã€‚\n\n- **Object getValue(String name)** æ ¹æ®åç§°è·å–å¯¹è±¡çš„å±æ€§å€¼ï¼Œæ”¯æŒ**OGNL**è¡¨è¾¾å¼ã€‚\n- **void setValue(String name, Object value)** è®¾ç½®æŸä¸ªå±æ€§çš„å€¼ã€‚\n- **Class<?> getSetterType(String name)** è·å–**setter**æ–¹æ³•çš„å…¥å‚ç±»å‹ã€‚\n- **Class<?> getGetterType(String name)** è·å–**getter**æ–¹æ³•çš„è¿”å›å€¼ç±»å‹ã€‚\n\né€šå¸¸æˆ‘ä»¬ä½¿ç”¨`SystemMetaObject.forObject(Object object)`æ¥å®ä¾‹åŒ–`MetaObject`å¯¹è±¡ã€‚ä½ ä¼šåœ¨æ¥ä¸‹æ¥çš„å®æˆ˜DEMOä¸­çœ‹åˆ°æˆ‘ä½¿ç”¨å®ƒã€‚\n\n## 3. Mybatis è„±æ•æ’ä»¶å®æˆ˜\n\næ¥ä¸‹æ¥æˆ‘å°±æŠŠå¼€å¤´çš„è„±æ•éœ€æ±‚å®ç°ä¸€ä¸‹ã€‚é¦–å…ˆéœ€è¦å¯¹è„±æ•å­—æ®µè¿›è¡Œæ ‡è®°å¹¶ç¡®å®šä½¿ç”¨çš„è„±æ•ç­–ç•¥ã€‚\n\nç¼–å†™è„±æ•å‡½æ•°ï¼š\n\n```java\n/**\n * å…·ä½“ç­–ç•¥çš„å‡½æ•°\n * @author felord.cn\n * @since 11:24\n **/\npublic interface Desensitizer  extends Function<String,String>  {\n\n}\n```\n\nç¼–å†™è„±æ•ç­–ç•¥æšä¸¾ï¼š\n\n```java\n/**\n * è„±æ•ç­–ç•¥.\n *\n * @author felord.cn\n * @since 11 :25\n */\npublic enum SensitiveStrategy {\n    /**\n     * Username sensitive strategy.\n     */\n    USERNAME(s -> s.replaceAll(\"(\\\\S)\\\\S(\\\\S*)\", \"$1*$2\")),\n    /**\n     * Id card sensitive type.\n     */\n    ID_CARD(s -> s.replaceAll(\"(\\\\d{4})\\\\d{10}(\\\\w{4})\", \"$1****$2\")),\n    /**\n     * Phone sensitive type.\n     */\n    PHONE(s -> s.replaceAll(\"(\\\\d{3})\\\\d{4}(\\\\d{4})\", \"$1****$2\")),\n\n    /**\n     * Address sensitive type.\n     */\n    ADDRESS(s -> s.replaceAll(\"(\\\\S{8})\\\\S{4}(\\\\S*)\\\\S{4}\", \"$1****$2****\"));\n\n\n    private final Desensitizer desensitizer;\n\n    SensitiveStrategy(Desensitizer desensitizer) {\n        this.desensitizer = desensitizer;\n    }\n\n    /**\n     * Gets desensitizer.\n     *\n     * @return the desensitizer\n     */\n    public Desensitizer getDesensitizer() {\n        return desensitizer;\n    }\n}\n```\n\nç¼–å†™è„±æ•å­—æ®µçš„æ ‡è®°æ³¨è§£ï¼š\n\n```java\n@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.FIELD)\npublic @interface Sensitive {\n    SensitiveStrategy strategy();\n}\n```\n\næˆ‘ä»¬çš„è¿”å›å¯¹è±¡ä¸­å¦‚æœæŸä¸ªå­—æ®µéœ€è¦è„±æ•ï¼Œåªéœ€è¦é€šè¿‡æ ‡è®°å°±å¯ä»¥äº†ã€‚ä¾‹å¦‚ä¸‹é¢è¿™æ ·ï¼š\n\n```java\n@Data\npublic class UserInfo {\n\n    private static final long serialVersionUID = -8938650956516110149L;\n    private Long userId;\n    @Sensitive(strategy = SensitiveStrategy.USERNAME)\n    private String name;\n    private Integer age;\n}\n```\n\n\n\nç„¶åå°±æ˜¯ç¼–å†™æ’ä»¶äº†ï¼Œæˆ‘å¯ä»¥ç¡®å®šçš„æ˜¯éœ€è¦æ‹¦æˆªçš„æ˜¯`ResultSetHandler`å¯¹è±¡çš„`handleResultSets`æ–¹æ³•ï¼Œæˆ‘ä»¬åªéœ€è¦å®ç°æ’ä»¶æ¥å£`Interceptor`å¹¶æ·»åŠ ç­¾åå°±å¯ä»¥äº†ã€‚å…¨éƒ¨é€»è¾‘å¦‚ä¸‹ï¼š\n\n```java\n@Slf4j\n@Intercepts(@Signature(type = ResultSetHandler.class,\n        method = \"handleResultSets\",\n        args = {Statement.class}))\npublic class SensitivePlugin implements Interceptor {\n    @SuppressWarnings(\"unchecked\")\n    @Override\n    public Object intercept(Invocation invocation) throws Throwable {\n        List<Object> records = (List<Object>) invocation.proceed();\n        // å¯¹ç»“æœé›†è„±æ•\n        records.forEach(this::sensitive);\n        return records;\n    }\n\n\n    private void sensitive(Object source) {\n        // æ‹¿åˆ°è¿”å›å€¼ç±»å‹\n        Class<?> sourceClass = source.getClass();\n        // åˆå§‹åŒ–è¿”å›å€¼ç±»å‹çš„ MetaObject\n        MetaObject metaObject = SystemMetaObject.forObject(source);\n        // æ•æ‰åˆ°å±æ€§ä¸Šçš„æ ‡è®°æ³¨è§£ @Sensitive å¹¶è¿›è¡Œå¯¹åº”çš„è„±æ•å¤„ç†\n        Stream.of(sourceClass.getDeclaredFields())\n                .filter(field -> field.isAnnotationPresent(Sensitive.class))\n                .forEach(field -> doSensitive(metaObject, field));\n    }\n\n\n    private void doSensitive(MetaObject metaObject, Field field) {\n        // æ‹¿åˆ°å±æ€§å\n        String name = field.getName();\n        // è·å–å±æ€§å€¼\n        Object value = metaObject.getValue(name);\n        // åªæœ‰å­—ç¬¦ä¸²ç±»å‹æ‰èƒ½è„±æ•  è€Œä¸”ä¸èƒ½ä¸ºnull\n        if (String.class == metaObject.getGetterType(name) && value != null) {\n            Sensitive annotation = field.getAnnotation(Sensitive.class);\n            // è·å–å¯¹åº”çš„è„±æ•ç­–ç•¥ å¹¶è¿›è¡Œè„±æ•\n            SensitiveStrategy type = annotation.strategy();\n            Object o = type.getDesensitizer().apply((String) value);\n            // æŠŠè„±æ•åçš„å€¼å¡å›å»\n            metaObject.setValue(name, o);\n        }\n    }\n}\n```\n\nç„¶åé…ç½®è„±æ•æ’ä»¶ä½¿ä¹‹ç”Ÿæ•ˆï¼š\n\n```java\n@Bean\npublic SensitivePlugin sensitivePlugin(){\n    return new SensitivePlugin();\n}\n```\n\næ“ä½œæŸ¥è¯¢è·å¾—ç»“æœ `UserInfo(userId=123123, name=æ*é¾™, age=28)` ï¼ŒæˆåŠŸå°†æŒ‡å®šå­—æ®µè¿›è¡Œäº†è„±æ•ã€‚\n\n> è¡¥å……ä¸€å¥ï¼Œå…¶å®è„±æ•ä¹Ÿå¯ä»¥åœ¨**JSON**åºåˆ—åŒ–çš„æ—¶å€™è¿›è¡Œã€‚\n\n## 4. æ€»ç»“\n\nä»Šå¤©å¯¹ç¼–å†™**Mybatis**æ’ä»¶çš„ä¸€äº›è¦ç‚¹è¿›è¡Œäº†è¯´æ˜ï¼ŒåŒæ—¶æ ¹æ®è¯´æ˜å®ç°äº†ä¸€ä¸ªè„±æ•æ’ä»¶ã€‚ä½†æ˜¯è¯·æ³¨æ„ä¸€å®šè¦ç†Ÿæ‚‰å››å¤§å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¦åˆ™è‡ªå†™æ’ä»¶å¯èƒ½ä¼šé€ æˆæ„æƒ³ä¸åˆ°çš„ç»“æœã€‚æ’ä»¶å¯ä»¥å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼š**ç å†œå°èƒ–å“¥** å›å¤å…³é”®å­— **sensitive** è¿›è¡Œè·å–ã€‚å¦‚æœä½ è§‰å¾—æœ‰ç”¨è¯·æ— æƒ…çš„ç‚¹èµã€å†çœ‹ã€è½¬å‘ã€‚\n\n`å…³æ³¨å…¬ä¼—å·ï¼šFelordcnè·å–æ›´å¤šèµ„è®¯`\n\n[ä¸ªäººåšå®¢ï¼šhttps://felord.cn](https://felord.cn)", "user_name": "ç å†œå°èƒ–å“¥", "description": "å…³æ³¨å…¬ä¼—å·ï¼šç å†œå°èƒ–å“¥", "got_view_count": 163507, "category_name": "åç«¯", "ctime": 1457483880}
{"tag_name": "TypeScript", "concern_user_count": 37742, "user_id": "782508012077678", "title": "èµ°è¿‘MidwayJSï¼šåˆè¯†TSè£…é¥°å™¨ä¸IoCæœºåˆ¶", "mark_content": "\n\n## å‰è¨€\n\nå¾ˆæƒ­æ„§åœ¨é˜¿é‡Œå®ä¹ å°†è¿‘ä¸‰ä¸ªæœˆæ²¡æœ‰ä¸€ç‚¹æ–‡ç« äº§å‡ºï¼ŒåŒæœŸå…¥èŒçš„ [ç‚½ç¿](https://juejin.im/user/3122268753634541) å’Œ [ç‚¬é€](https://juejin.im/user/2365804756090381) éƒ½äº§å‡ºäº†ä¸å°‘ä¼˜ç§€çš„æ–‡ç« ï¼Œå¦‚[ä¸æƒ³ç—›å¤±è–ªèµ„æ™®è°ƒå’Œå¹´ç»ˆå¥–ï¼Ÿè¯•è¯•è‡ªåŠ¨åŒ–æµ‹è¯•ï¼ï¼ˆåŸºç¡€ç¯‡ï¼‰](https://juejin.im/post/6844904194600599560)ï¼Œä¸ç¦æ„Ÿæ…¨ä¼˜ç§€çš„äººéƒ½æ˜¯æœ‰å…±åŒç‚¹çš„ï¼šå–„äºæ€»ç»“æ²‰æ·€ï¼Œè€Œä¸”æ–‡ç¬”è¿˜å¥½ï¼ˆè¿™ç‚¹å¤ªç¾¡æ…•äº†ï¼‰ã€‚å…¥èŒå³å°†æ»¡ä¸‰ä¸ªæœˆï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä¸‰ä¸ªå¤šæœˆæ²¡å†™è¿‡æ–‡ç« äº†ã€‚æ–‡ç¬”æ‹™åŠ£ï¼Œè¿˜è¯·è§è°…ã€‚\n\næœ¬ç¯‡æ–‡ç« æ˜¯ [MidwayJS ](https://github.com/midwayjs/midway)çš„ç³»åˆ—æ¨å¹¿æ–‡ç« ç¬¬ä¸€ç¯‡ï¼ŒåŸæœ¬æˆ‘æ‰“ç®—ç›´æ¥ä¸€ç¯‡æå®šï¼Œåšä¸ªMidwayJSå¼€å‘åå°åº”ç”¨çš„æ•™ç¨‹å°±å¥½äº†ã€‚ä½†æ˜¯åœ¨æç¬”å‰è¯¢é—®è¿‡ä¸€äº›åŒå­¦ï¼Œå‘ç°å³ä½¿æ˜¯å·²ç»æœ‰å·¥ä½œç»éªŒçš„å‰ç«¯åŒå­¦ä¸­ä¹Ÿæœ‰ä¸€éƒ¨åˆ†æ²¡æœ‰äº†è§£è¿‡TSè£…é¥°å™¨ç›¸å…³çš„çŸ¥è¯†ï¼Œå¯¹äºIoCæœºåˆ¶ä¹ŸçŸ¥ä¹‹ç”šå°‘ï¼ˆè™½ç„¶æ²¡å­¦è¿‡Javaçš„æˆ‘åŒæ ·åªæ˜¯ä¸€çŸ¥åŠè§£ï¼‰ï¼Œå› æ­¤è¿™ç¯‡æ–‡ç« ä¼šé¦–å…ˆè®²è§£**IoCæœºåˆ¶ï¼ˆä¾èµ–æ³¨å…¥ï¼‰**ä¸**TSè£…é¥°å™¨**ç›¸å…³çš„çŸ¥è¯†ï¼ŒåŠ›æ±‚å†…å®¹ä¸æ¯ç‡¥ï¼Œå¹¶ä½¿å„ä½æˆåŠŸçš„å¯¹MidwayJSæ¥ç”µ~\n\n\n\n## MidwayJSç®€ä»‹\n\n> MidwayJSç›®å‰å·²ç»å‡çº§åˆ°Midway-Serverlessä½“ç³»ï¼Œè¿™å¯èƒ½ä¼šç»™æ²¡æ¥è§¦è¿‡Serverlessã€åªæ˜¯æƒ³å­¦ä¹ æ¡†æ¶æœ¬èº«çš„ä½ å¸¦æ¥ä¸€äº›å›°æ‰°ã€‚ä½ å¯ä»¥å…ˆé˜…è¯»å…¶[æ¡†æ¶æœ¬èº«æ–‡æ¡£](https://midwayjs.org/midway/)ï¼Œæ¥åªä½“éªŒæ¡†æ¶æœ¬èº«ä½œä¸ºåç«¯åº”ç”¨çš„èƒ½åŠ›ã€‚\n\nä½ å¯èƒ½æ²¡æœ‰å¬è¿‡`Egg`ï¼Œä½†ä½ ä¸€å®šå¬è¿‡æˆ–è€…ä½¿ç”¨è¿‡`Koa`/`Express`ï¼Œ`Egg`åŸºäº`Koa`å¹¶åœ¨å…¶èƒ½åŠ›ä¸Šåšäº†å¢å¼ºï¼Œå¥‰è¡Œ**ã€çº¦å®šä¼˜äºé…ç½®ã€‘**ï¼ŒåŒæ—¶å®ƒåˆèƒ½ä½œä¸ºä¸€æ¬¾å®šåˆ¶èƒ½åŠ›å¼ºçš„åŸºç¡€æ¡†æ¶ï¼Œæ¥ä½¿å¾—ä½ èƒ½åŸºäºè‡ªå·±çš„æŠ€æœ¯æ¶æ„å°è£…å‡ºä¸€å¥—é€‚åˆè‡ªå·±ä¸šåŠ¡åœºæ™¯çš„æ¡†æ¶ã€‚`MidwayJS`æ­£æ˜¯åŸºäº`Egg`ï¼Œä½†åœ¨`Egg`çš„åŸºç¡€ä¸Šåšäº†ä¸€äº›è¾ƒå¤§çš„å˜åŠ¨ï¼š\n\n- æ›´å¥½çš„TSæ”¯æŒï¼Œå¯ä»¥è¯´å†™MidwayJSæ¯”è¾ƒèˆ’æœçš„ä¸€ä¸ªåœ°æ–¹å°±æ˜¯å®ƒçš„**TypeScriptæ”¯æŒ**äº†ï¼Œæ¯”å¦‚ä¼šä½œä¸ºæœåŠ¡çš„æ¥å£å®šä¹‰ä¼šå•ç‹¬å­˜æ”¾äº`interface`, æä¾›çš„èƒ½åŠ›å¼ºå¤§çš„è£…é¥°å™¨ï¼Œä¸TypeORMè¿™ç§TSæ”¯æŒå¥½çš„æ¡†æ¶åä½œèµ·æ¥æ›´æ˜¯æ„‰æ‚¦ã€‚\n\n- IoCæœºåˆ¶çš„è·¯ç”±ï¼Œä»¥æˆ‘ä»¬ä¸‹ç¯‡æ–‡ç« å°†è¦å®ç°çš„æ¥å£ä¸ºä¾‹ï¼š\n\n  ```typescript\n  @provide()\n  @controller('/user')\n  export class UserController {\n  \n    @get('/all')\n    async getUser(): Promise<void> {\n      // ...\n    }\n  \n    @get('/uid/:uid')\n    async findUserByUid(): Promise<void> {\n      // ...\n    }\n  \n    @post('/uid/:uid')\n    async updateUser(): Promise<void> {\n      // ...\n    }\n    \n    // ...\n  \n  }\n  ```\n\n  ï¼ˆMidwayåŒæ—¶ä¿ç•™äº†Eggçš„è·¯ç”±èƒ½åŠ›ï¼Œå³`src/app/router.ts`çš„è·¯ç”±é…ç½®æ–¹å¼ï¼‰\n\n  è¿™é‡Œæ˜¯å¦ä¼šè®©ä½ æƒ³åˆ°`NestJS`ï¼Ÿçš„ç¡®åœ¨è·¯ç”±è¿™é‡ŒäºŒè€…çš„æ€æƒ³åŸºæœ¬æ˜¯ç›¸åŒçš„ï¼Œä½†Midwayçš„IoCæœºåˆ¶åº•å±‚åŸºäº [Injection]([https://midwayjs.org/injection/guide.html#%E8%8E%B7%E5%8F%96-ioc-%E5%AE%B9%E5%99%A8](https://midwayjs.org/injection/guide.html#è·å–-ioc-å®¹å™¨))ï¼ŒåŒæ ·æ˜¯Midwayå›¢é˜Ÿçš„ä½œå“ã€‚å¹¶ä¸”ï¼ŒMidwayçš„IoCæœºåˆ¶ä¹Ÿæ˜¯`Midway-Serverless`èƒ½åŠ›çš„é‡è¦æ”¯æŒï¼ˆè¿™ä¸ªæˆ‘ä»¬ä¸‹ç¯‡æ–‡ç« æ‰ä¼šè®²åˆ°ï¼‰ã€‚\n\n- ç”Ÿæ€å¤ç”¨ï¼ŒEggä¸Koaçš„ä¸­é—´ä»¶å¤§éƒ¨åˆ†èƒ½åœ¨Midwayåº”ç”¨ä¸­å®Œç¾å…¼å®¹,å°‘éƒ¨åˆ†æš‚ä¸æ”¯æŒçš„ä¹Ÿç”±å®˜æ–¹å›¢é˜Ÿåœ¨å¿«é€Ÿå…¼å®¹ã€‚\n\n- ç¨³å®šæ”¯æŒï¼ŒMidwayJSè‡³ä»Šä»åœ¨å¿«é€Ÿå‘å±•è¿­ä»£ï¼ŒåŒæ—¶ä¹Ÿåœ¨é˜¿é‡Œå†…éƒ¨ä½œä¸ºServerlessåŸºå»ºçš„é‡è¦æˆå‘˜è€Œå—åˆ°ç›¸å½“çš„é‡è§†ï¼Œæ‰€ä»¥ä½ ä¸ç”¨æ‹…å¿ƒå®ƒåç»­çš„ç»´æŠ¤æƒ…å†µã€‚\n\n\n\nä¸‹é¢çš„éƒ¨åˆ†é‡Œï¼Œæˆ‘ä»¬ä¼šè®²è§£è¿™äº›ä¸œè¥¿ï¼š\n\n- **TSè£…é¥°å™¨ åŸºæœ¬è¯­æ³•ã€ç±»å‹**\n- **Reflect å…ƒç¼–ç¨‹**\n- **IoCæœºåˆ¶ä¸ä¾èµ–æ³¨å…¥ï¼ˆDependence Injectionï¼‰**\n- **å®ç°ç®€å•çš„åŸºäºIoCçš„è·¯ç”±**\n- **å¸¸ç”¨ä¾èµ–æ³¨å…¥å·¥å…·åº“**\n\n\n\n## TS è£…é¥°å™¨\n\n### TSè£…é¥°å™¨çš„é‚£äº›äº‹å„¿\né¦–å…ˆæˆ‘ä»¬éœ€è¦çŸ¥é“ï¼ŒJSä¸TSä¸­çš„è£…é¥°å™¨ä¸æ˜¯ä¸€å›äº‹ï¼ŒJSä¸­çš„è£…é¥°å™¨ç›®å‰ä¾ç„¶åœç•™åœ¨ [stage 2](https://github.com/tc39/proposal-decorators) é˜¶æ®µï¼Œå¹¶ä¸”ç›®å‰ç‰ˆæœ¬çš„è‰æ¡ˆä¸TSä¸­çš„å®ç°å·®å¼‚ç›¸å½“ä¹‹å¤§ï¼ˆTSæ˜¯åŸºäºç¬¬ä¸€ç‰ˆï¼ŒJSç›®å‰å·²ç»ç¬¬ä¸‰ç‰ˆäº†ï¼‰ï¼Œæ‰€ä»¥äºŒè€…æœ€ç»ˆçš„è£…é¥°å™¨å®ç°å¿…ç„¶æœ‰éå¸¸å¤§çš„å·®å¼‚ã€‚\n\nå…¶æ¬¡ï¼Œè£…é¥°å™¨ä¸æ˜¯TSæ‰€æä¾›çš„ç‰¹æ€§ï¼ˆå¦‚ç±»å‹ã€æ¥å£ï¼‰ï¼Œè€Œæ˜¯TSå®ç°çš„ECMAScriptææ¡ˆï¼ˆå°±åƒç±»çš„ç§æœ‰æˆå‘˜ä¸€æ ·ï¼‰ã€‚TSå®é™…ä¸Šåªä¼šå¯¹**stage-3**ä»¥ä¸Šçš„è¯­è¨€æä¾›æ”¯æŒï¼Œæ¯”å¦‚TS3.7.5å¼•å…¥äº†å¯é€‰é“¾ï¼ˆ[Optional chaining](https://github.com/tc39/proposal-optional-chaining)ï¼‰ä¸ç©ºå€¼åˆå¹¶ï¼ˆ[Nullish-Coalescing](https://github.com/tc39/proposal-nullish-coalescing)ï¼‰ã€‚è€Œå½“TSå¼•å…¥è£…é¥°å™¨æ—¶ï¼ˆå¤§çº¦åœ¨15å¹´å·¦å³ï¼‰ï¼ŒJSä¸­çš„è£…é¥°å™¨ä¾ç„¶å¤„äº**stage-1**\n\né˜¶æ®µã€‚å…¶åŸå› æ˜¯TSä¸Angularå›¢é˜ŸPYæˆåŠŸäº†ï¼ŒNgå›¢é˜Ÿä¸å†ç»´æŠ¤ [AtScript]([atscript-playground](https://github.com/angular/atscript-playground))ï¼Œè€ŒTSå¼•å…¥äº†æ³¨è§£è¯­æ³•ï¼ˆ**Annotation**ï¼‰åŠç›¸å…³ç‰¹æ€§ã€‚\n\nä½†æ˜¯å¹¶ä¸éœ€è¦æ‹…å¿ƒï¼Œå³ä½¿è£…é¥°å™¨æ°¸è¿œåˆ°è¾¾ä¸äº†stage-3/4é˜¶æ®µï¼Œå®ƒä¹Ÿä¸ä¼šæ¶ˆå¤±çš„ã€‚æœ‰ç›¸å½“å¤šçš„æ¡†æ¶éƒ½æ˜¯è£…é¥°å™¨çš„é‡åº¦ç”¨æˆ·ï¼Œå¦‚`Angular`ã€`Nest`ã€`Midway`ç­‰ã€‚å¯¹äºè£…é¥°å™¨çš„å®ç°ä¸ç¼–è¯‘ç»“æœä¼šå§‹ç»ˆä¿ç•™ï¼Œå°±åƒ`JSX`ä¸€æ ·ã€‚å¦‚æœä½ å¯¹å®ƒçš„å†å²ä¸å‘å±•æ–¹å‘æœ‰å…´è¶£ï¼Œå¯ä»¥è¯»ä¸€è¯» [æ˜¯å¦åº”è¯¥åœ¨productioné‡Œä½¿ç”¨typescriptçš„decoratorï¼Ÿ](https://www.zhihu.com/question/404724504)ï¼ˆè´ºå¸ˆä¿Šè´ºè€çš„å›ç­”ï¼‰\n\n\n\nä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦è£…é¥°å™¨ï¼Ÿåœ¨åé¢çš„ä¾‹å­ä¸­æˆ‘ä»¬ä¼šä½“ä¼šåˆ°è£…é¥°å™¨çš„å¼ºå¤§ä¸é­…åŠ›ï¼ŒåŸºäºè£…é¥°å™¨æˆ‘ä»¬èƒ½å¤Ÿ**å¿«é€Ÿä¼˜é›…çš„å¤ç”¨é€»è¾‘**ï¼Œ**æä¾›æ³¨é‡Šä¸€èˆ¬çš„è§£é‡Šè¯´æ˜æ•ˆæœ**ï¼Œä»¥åŠ**å¯¹ä¸šåŠ¡ä»£ç è¿›è¡Œèƒ½åŠ›å¢å¼º**ã€‚åŒæ—¶æˆ‘ä»¬æœ¬æ–‡çš„é‡ç‚¹ï¼š**ä¾èµ–æ³¨å…¥**ä¹Ÿå¯ä»¥é€šè¿‡è£…é¥°å™¨æ¥éå¸¸ç®€æ´çš„å®ç°ã€‚ç°åœ¨æˆ‘ä»¬å¯èƒ½æš‚æ—¶ä½“ä¼šä¸åˆ° **å¼ºå¤§**ã€**ç®€æ´** è¿™äº›å…³é”®è¯ï¼Œä¸æ€¥ï¼Œå®‰å¿ƒè¯»ä¸‹å»ã€‚æˆ‘ä¼šå°è¯•é€šè¿‡è¿™ç¯‡æ–‡ç« è®©ä½ å¯¹TSè£…é¥°å™¨æ•´ä½“å»ºç«‹èµ·ä¸€ä¸ªè®¤çŸ¥ï¼Œå¹¶åœ¨æ—¥å¸¸å¼€å‘é‡Œä¹Ÿçˆ±ä¸Šä½¿ç”¨è£…é¥°å™¨ã€‚\n\n\n\n### è£…é¥°å™¨ä¸æ³¨è§£\n\n> **ç”±äºæˆ‘æœ¬èº«å¹¶æ²¡å­¦ä¹ è¿‡Javaä»¥åŠSpring IoCï¼Œå› æ­¤æˆ‘çš„ç†è§£å¯èƒ½å­˜åœ¨ä¸€äº›åå·®ï¼Œè¿˜è¯·åœ¨è¯„è®ºåŒºæŒ‡å‡ºé”™è¯¯ä¹‹å¤„~**\n\nè£…é¥°å™¨ä¸æ³¨è§£å®é™…ä¸Šä¹Ÿæœ‰ä¸€å®šåŒºåˆ«ï¼Œç”±äºå¹¶æ²¡æœ‰å­¦è¿‡Javaï¼Œè¿™é‡Œå°±ä¸ä¸Javaä¸­çš„æ³¨è§£è¿›è¡Œæ¯”è¾ƒäº†ã€‚è€Œåªæ˜¯è¯´æˆ‘æ‰€è®¤ä¸ºçš„äºŒè€…å·®å¼‚ï¼š\n\n- **æ³¨è§£** åº”è¯¥å¦‚åŒå­—é¢æ„ä¹‰ä¸€æ ·ï¼Œ åªæ˜¯ä¸ºæŸä¸ªè¢«æ³¨è§£çš„å¯¹è±¡æä¾›å…ƒæ•°æ®ï¼ˆ`metadata`ï¼‰çš„æ³¨å…¥ï¼Œæœ¬è´¨ä¸Šä¸èƒ½èµ·åˆ°ä»»ä½•ä¿®æ”¹è¡Œä¸ºçš„æ“ä½œï¼Œéœ€è¦`scanner`å»è¿›è¡Œæ‰«æè·å¾—å…ƒæ•°æ®å¹¶åŸºäºå…¶å»æ‰§è¡Œæ“ä½œï¼Œæ³¨è§£çš„å…ƒæ•°æ®æ‰æœ‰å®é™…æ„ä¹‰ã€‚\n- **è£…é¥°å™¨** æ²¡æ³•æ·»åŠ å…ƒæ•°æ®ï¼Œåªèƒ½åŸºäºå·²ç»ç”±æ³¨è§£æ³¨å…¥çš„å…ƒæ•°æ®æ¥æ‰§è¡Œæ“ä½œï¼Œæ¥å¯¹ç±»ã€æ–¹æ³•ã€å±æ€§ã€å‚æ•°è¿›è¡ŒæŸç§ç‰¹å®šçš„æ“ä½œã€‚\n\nä½†å®é™…ä¸Šï¼ŒTSä¸­çš„è£…é¥°å™¨é€šå¸¸æ˜¯åŒæ—¶åŒ…å«äº†è¿™ä¸¤ç§æ•ˆèƒ½çš„ï¼Œå®ƒå¯èƒ½æ¶ˆè´¹å…ƒæ•°æ®çš„åŒæ—¶ä¹Ÿæä¾›äº†å…ƒæ•°æ®ä¾›åˆ«çš„è£…é¥°å™¨æ¶ˆè´¹ã€‚\n\n\n\n### ä¸åŒç±»å‹çš„è£…é¥°å™¨åŠä½¿ç”¨\n\n> åœ¨å¼€å§‹å‰ï¼Œä½ éœ€è¦ç¡®ä¿åœ¨`tsconfig.json`ä¸­è®¾ç½®äº†`experimentalDecorators`ä¸`emitDecoratorMetadata`ä¸ºtrueã€‚\n\né¦–å…ˆè¦æ˜ç¡®åœ°æ˜¯ï¼ŒTSä¸­çš„è£…é¥°å™¨å®ç°æœ¬è´¨æ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œå®ƒçš„æœ¬è´¨æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¦‚æœè°ƒç”¨å½¢å¼ä¸º`@deco()`ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°åº”è¯¥å†è¿”å›ä¸€ä¸ªå‡½æ•°æ¥å®ç°è°ƒç”¨ã€‚\n\nå…¶æ¬¡ï¼Œä½ åº”è¯¥æ˜ç™½ES6ä¸­classçš„å®è´¨ï¼Œå¦‚æœä¸æ˜ç™½ï¼Œæ¨èé˜…è¯»æˆ‘çš„è¿™ç¯‡æ–‡ç« : [ä»Babelç¼–è¯‘ç»“æœçœ‹ES6çš„Classå®è´¨](https://linbudu.top/posts/2020/03/25/babel-class.html)\n\n#### ç±»è£…é¥°å™¨\n\n```ts\nfunction addProp(constructor: Function) {\n  constructor.prototype.job = 'fe';\n}\n\n@addProp\nclass P {\n  job: string;\n  constructor(public name: string) {}\n}\n\nlet p = new P('æ—ä¸æ¸¡');\n\nconsole.log(p.job); // fe\n```\n\næˆ‘ä»¬å‘ç°ï¼Œåœ¨ä»¥å•çº¯è£…é¥°å™¨æ–¹å¼`@addProp`è°ƒç”¨æ—¶ï¼Œä¸ç®¡ç”¨å®ƒæ¥è£…é¥°å“ªä¸ªç±»ï¼Œèµ·åˆ°çš„ä½œç”¨éƒ½æ˜¯ç›¸åŒçš„ï¼Œå› ä¸ºå…¶ä¸­è¦å¤ç”¨çš„é€»è¾‘æ˜¯å›ºå®šçš„ã€‚æˆ‘ä»¬è¯•è¯•ä»¥`@addProp()`çš„æ–¹å¼æ¥è°ƒç”¨ï¼š\n\n```typescript\nfunction addProp(param: string): ClassDecorator {\n  return (constructor: Function) => {\n    constructor.prototype.job = param;\n  };\n}\n\n@addProp('fe+be')\nclass P {\n  job: string;\n  constructor(public name: string) {}\n}\n\nlet p = new P('æ—ä¸æ¸¡');\n\nconsole.log(p.job); // fe+be\n```\n\nç°åœ¨æˆ‘ä»¬æƒ³è¦æ·»åŠ çš„å±æ€§å€¼å°±å¯ä»¥ç”±æˆ‘ä»¬å†³å®šäº†, å®é™…ä¸Šç”±äºæˆ‘ä»¬æ‹¿åˆ°äº†åŸå‹å¯¹è±¡ï¼Œè¿˜å¯ä»¥è¿›è¡ŒèŠ±å¼æ“ä½œï¼Œèƒ½å¤Ÿè§£é”æ›´å¤šç¥ç§˜å§¿åŠ¿~\n\n\n\n#### æ–¹æ³•è£…é¥°å™¨\n\n æ–¹æ³•è£…é¥°å™¨çš„å…¥å‚ä¸º **ç±»çš„åŸå‹å¯¹è±¡**  **å±æ€§å** ä»¥åŠ**å±æ€§æè¿°ç¬¦(descriptor)**ï¼Œå…¶å±æ€§æè¿°ç¬¦åŒ…å«`writable` `enumerable` `configurable` ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œå»é…ç½®å…¶ç›¸å…³ä¿¡æ¯ã€‚\n\n> æ³¨æ„ï¼Œå¯¹äºé™æ€æˆå‘˜æ¥è¯´ï¼Œé¦–ä¸ªå‚æ•°ä¼šæ˜¯ç±»çš„æ„é€ å‡½æ•°ã€‚è€Œå¯¹äºå®ä¾‹æˆå‘˜ï¼ˆæ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼‰ï¼Œåˆ™æ˜¯ç±»çš„åŸå‹å¯¹è±¡\n\n```ts\nfunction addProps(): MethodDecorator {\n  return (target, propertyKey, descriptor) => {\n    console.log(target);\n    console.log(propertyKey);\n    console.log(JSON.stringify(descriptor));\n\n    descriptor.writable = false;\n  };\n}\n\nclass A {\n  @addProps()\n  originMethod() {\n    console.log(\"I'm Original!\");\n  }\n}\n\nconst a = new A();\n\na.originMethod = () => {\n  console.log(\"I'm Changed!\");\n};\n\na.originMethod();// I'm Changed!\n```\n\nä½ æ˜¯å¦è§‰å¾—æœ‰ç‚¹æƒ³èµ·æ¥`Object.defineProperty()`ï¼Ÿ çš„ç¡®æ–¹æ³•è£…é¥°å™¨ä¹Ÿæ˜¯å€ŸåŠ©å®ƒæ¥ä¿®æ”¹ç±»å’Œæ–¹æ³•çš„å±æ€§çš„ï¼Œä½ å¯ä»¥å»[TypeScript Playground](https://www.typescriptlang.org/play)çœ‹çœ‹TSå¯¹ä¸Šé¢ä»£ç çš„ç¼–è¯‘ç»“æœã€‚\n\n\n\n#### å±æ€§è£…é¥°å™¨\n\nç±»ä¼¼äºæ–¹æ³•è£…é¥°å™¨ï¼Œä½†å®ƒçš„å…¥å‚å°‘äº†å±æ€§æè¿°ç¬¦ã€‚åŸå› åˆ™æ˜¯ç›®å‰æ²¡æœ‰æ–¹æ³•åœ¨å®šä¹‰åŸå‹å¯¹è±¡æˆå‘˜åŒæ—¶å»æè¿°ä¸€ä¸ªå®ä¾‹çš„å±æ€§ï¼ˆåˆ›å»ºæè¿°ç¬¦ï¼‰ã€‚\n\n```typescript\nfunction addProps(): PropertyDecorator {\n  return (target, propertyKey) => {\n    console.log(target);\n    console.log(propertyKey);\n  };\n}\n\nclass A {\n  @addProps()\n  originProps: any;\n}\n```\n\nå±æ€§ä¸æ–¹æ³•è£…é¥°å™¨æœ‰ä¸€ä¸ªé‡è¦ä½œç”¨æ˜¯æ³¨å…¥ä¸æå–å…ƒæ•°æ®ï¼Œè¿™ç‚¹æˆ‘ä»¬åœ¨åé¢ä¼šä½“ç°åˆ°ã€‚\n\n\n\n#### å‚æ•°è£…é¥°å™¨\n\nå‚æ•°è£…é¥°å™¨çš„å…¥å‚é¦–è¦ä¸¤ä½ä¸å±æ€§è£…é¥°å™¨ç›¸åŒï¼Œç¬¬ä¸‰ä¸ªå‚æ•°åˆ™æ˜¯å‚æ•°åœ¨å½“å‰å‡½æ•°å‚æ•°ä¸­çš„**ç´¢å¼•**ã€‚\n\n```ts\nfunction paramDeco(params?: any): ParameterDecorator {\n  return (target, propertyKey, index) => {\n    console.log(target);\n    console.log(propertyKey);\n    console.log(index);\n    target.constructor.prototype.fromParamDeco = 'å‘€å‘¼ï¼';\n  };\n}\n\nclass B {\n  someMethod(@paramDeco() param1: any, @paramDeco() param2: any) {\n    console.log(`${param1}  ${param2}`);\n  }\n}\n\nnew B().someMethod('å•Šå“ˆ', 'æ—ä¸æ¸¡ï¼');\n// @ts-ignore\nconsole.log(B.prototype.fromParamDeco);\n\n```\n\nå‚æ•°è£…é¥°å™¨ä¸å±æ€§è£…é¥°å™¨éƒ½æœ‰ä¸ªç‰¹åˆ«ä¹‹å¤„ï¼Œä»–ä»¬éƒ½ä¸èƒ½è·å–åˆ°æè¿°ç¬¦descriptorï¼Œå› æ­¤ä¹Ÿå°±ä¸èƒ½å»ä¿®æ”¹å…¶å‚æ•°/å±æ€§çš„è¡Œä¸ºã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆåšï¼š**ç»™ç±»åŸå‹æ·»åŠ æŸä¸ªå±æ€§ï¼Œæºå¸¦ä¸Šä¸å‚æ•°/å±æ€§/è£…é¥°å™¨ç›¸å…³çš„å…ƒæ•°æ®ï¼Œå¹¶ç”±ä¸‹ä¸€ä¸ªæ‰§è¡Œçš„è£…é¥°å™¨æ¥è¯»å–ã€‚**(è£…é¥°å™¨çš„æ‰§è¡Œé¡ºåºè¯·å‚è§ä¸‹ä¸€èŠ‚)\n\nå½“ç„¶åƒä¾‹å­ä¸­è¿™æ ·ç›´æ¥åœ¨åŸå‹ä¸Šæ·»åŠ å±æ€§çš„æ–¹å¼æ˜¯ååˆ†ä¸æ¨èçš„ï¼Œåé¢æˆ‘ä»¬ä¼šä½¿ç”¨ES7çš„`Reflect Metadata`æ¥è¿›è¡Œå…ƒæ•°æ®çš„è¯»/å†™ã€‚\n\n\n\n### è£…é¥°å™¨å·¥å‚\n\nå‡è®¾ç°åœ¨æˆ‘ä»¬åŒæ—¶éœ€è¦å››ç§è£…é¥°å™¨ï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿå®šä¹‰å››ç§è£…é¥°å™¨ç„¶ååˆ†åˆ«ä½¿ç”¨å—ï¼Ÿä¹Ÿè¡Œï¼Œä½†åç»­ä½ çœ‹ç€è¿™ä¸€å †è£…é¥°å™¨å¯èƒ½ä¼šæ„Ÿè§‰æœ‰ç‚¹å¤´ç–¼...ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥è€ƒè™‘æ¥å…¥å·¥å‚æ¨¡å¼ï¼Œä½¿ç”¨ä¸€ä¸ªè£…é¥°å™¨å·¥å‚æ¥ä¸ºæˆ‘ä»¬æ ¹æ®æ¡ä»¶åå‡ºä¸åŒçš„è£…é¥°å™¨ã€‚\n\n\n\né¦–å…ˆæˆ‘ä»¬å‡†å¤‡å¥½å„ä¸ªè£…é¥°å™¨å‡½æ•°ï¼š\n\nï¼ˆä¸å»ºè®®æŠŠåŠŸèƒ½ä¹Ÿå†™åœ¨è£…é¥°å™¨å·¥å‚ä¸­ï¼Œä¼šé€ æˆè€¦åˆï¼‰\n\n```ts\n// @ts-nocheck\n\nfunction classDeco(): ClassDecorator {\n  return (target: Object) => {\n    console.log('Class Decorator Invoked');\n    console.log(target);\n  };\n}\n\nfunction propDeco(): PropertyDecorator {\n  return (target: Object, propertyKey: string) => {\n    console.log('Property Decorator Invoked');\n    console.log(propertyKey);\n  };\n}\n\nfunction methodDeco(): MethodDecorator {\n  return (\n    target: Object,\n    propertyKey: string,\n    descriptor: PropertyDescriptor\n  ) => {\n    console.log('Method Decorator Invoked');\n    console.log(propertyKey);\n  };\n}\n\nfunction paramDeco(): ParameterDecorator {\n  return (target: Object, propertyKey: string, index: number) => {\n    console.log('Param Decorator Invoked');\n    console.log(propertyKey);\n    console.log(index);\n  };\n}\n```\n\n \n\næ¥ç€ï¼Œæˆ‘ä»¬å®ç°ä¸€ä¸ªå·¥å‚å‡½æ•°æ¥æ ¹æ®ä¸åŒæ¡ä»¶è¿”å›ä¸åŒçš„è£…é¥°å™¨ï¼š\n\n```typescript\nenum DecoratorType {\n  CLASS = 'CLASS',\n  METHOD = 'METHOD',\n  PROPERTY = 'PROPERTY',\n  PARAM = 'PARAM',\n}\n\ntype FactoryReturnType =\n  | ClassDecorator\n  | MethodDecorator\n  | PropertyDecorator\n  | ParameterDecorator;\n\nfunction decoFactory(type: DecoratorType, ...args: any[]): FactoryReturnType {\n  switch (type) {\n    case DecoratorType.CLASS:\n      return classDeco.apply(this, args);\n\n    case DecoratorType.METHOD:\n      return methodDeco.apply(this, args);\n\n    case DecoratorType.PROPERTY:\n      return propDeco.apply(this, args);\n\n    case DecoratorType.PARAM:\n      return paramDeco.apply(this, args);\n\n    default:\n      throw new Error('Invalid DecoratorType');\n  }\n}\n\n@decoFactory(DecoratorType.CLASS)\nclass C {\n  @decoFactory(DecoratorType.PROPERTY)\n  prop: any;\n\n  @decoFactory(DecoratorType.METHOD)\n  method(@decoFactory(DecoratorType.PARAM) param: string) {}\n}\n\nnew C().method();\n```\n\nï¼ˆæ³¨æ„ï¼Œè¿™é‡Œåœ¨TSç±»å‹å®šä¹‰ä¸Šä¼¼ä¹æœ‰äº›é—®é¢˜ï¼Œæ‰€ä»¥éœ€è¦å¸¦ä¸Šé¡¶éƒ¨çš„`@ts-nocheck`ï¼Œåœ¨åç»­è§£å†³äº†ç±»å‹æŠ¥é”™åï¼Œæˆ‘ä¼šåŠæ—¶æ›´æ–°çš„TATï¼‰\n\n\n\n### å¤šä¸ªè£…é¥°å™¨å£°æ˜\n\n> è£…é¥°å™¨æ±‚å€¼é¡ºåºæ¥è‡ªäºTypeScriptå®˜æ–¹æ–‡æ¡£ä¸€èŠ‚ä¸­çš„è£…é¥°å™¨è¯´æ˜ã€‚\n\n ç±»ä¸­ä¸åŒå£°æ˜ä¸Šçš„è£…é¥°å™¨å°†æŒ‰ä»¥ä¸‹è§„å®šçš„é¡ºåºåº”ç”¨ï¼š\n\n 1. *å‚æ•°è£…é¥°å™¨*ï¼Œç„¶åä¾æ¬¡æ˜¯*æ–¹æ³•è£…é¥°å™¨*ï¼Œ*è®¿é—®ç¬¦è£…é¥°å™¨*ï¼Œæˆ–*å±æ€§è£…é¥°å™¨*åº”ç”¨åˆ°æ¯ä¸ªå®ä¾‹æˆå‘˜ã€‚\n 2. *å‚æ•°è£…é¥°å™¨*ï¼Œç„¶åä¾æ¬¡æ˜¯*æ–¹æ³•è£…é¥°å™¨*ï¼Œ*è®¿é—®ç¬¦è£…é¥°å™¨*ï¼Œæˆ–*å±æ€§è£…é¥°å™¨*åº”ç”¨åˆ°æ¯ä¸ªé™æ€æˆå‘˜ã€‚\n 3. *å‚æ•°è£…é¥°å™¨*åº”ç”¨åˆ°æ„é€ å‡½æ•°ã€‚\n 4. *ç±»è£…é¥°å™¨*åº”ç”¨åˆ°ç±»ã€‚\n\n\n\næ³¨æ„è¿™ä¸ªé¡ºåºï¼Œåé¢æˆ‘ä»¬èƒ½å¤Ÿå®ç°å…ƒæ•°æ®è¯»å†™ï¼Œä¹Ÿæ­£æ˜¯å› ä¸ºè¿™ä¸ªé¡ºåºã€‚\n\n\n\nå½“å­˜åœ¨å¤šä¸ªè£…é¥°å™¨æ¥è£…é¥°åŒä¸€ä¸ªå£°æ˜æ—¶ï¼Œåˆ™ä¼šæœ‰ä»¥ä¸‹çš„é¡ºåºï¼š\n\n- é¦–å…ˆï¼Œç”±ä¸Šè‡³ä¸‹ä¾æ¬¡å¯¹è£…é¥°å™¨è¡¨è¾¾å¼æ±‚å€¼ï¼Œå¾—åˆ°è¿”å›çš„çœŸå®å‡½æ•°ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰\n- è€Œåï¼Œæ±‚å€¼çš„ç»“æœä¼šç”±ä¸‹è‡³ä¸Šä¾æ¬¡è°ƒç”¨\n\nï¼ˆæœ‰ç‚¹ç±»ä¼¼æ´‹è‘±æ¨¡å‹ï¼‰\n\n\n\n```ts\nfunction foo() {\n    console.log(\"foo in\");\n    return function (target, propertyKey: string, descriptor: PropertyDescriptor) {\n        console.log(\"foo out\");\n    }\n}\n\nfunction bar() {\n    console.log(\"bar in\");\n    return function (target, propertyKey: string, descriptor: PropertyDescriptor) {\n        console.log(\"bar out\");\n    }\n}\n\nclass A {\n    @foo()\n    @bar()\n    method() {}\n}\n\n// foo in\n// bar in\n// bar out\n// foo out\n```\n\n\n\n## Reflect Metadata\n\n### åŸºæœ¬å…ƒæ•°æ®è¯»å†™\n\n`Reflect Metadata`æ˜¯å±äºES7çš„ä¸€ä¸ªææ¡ˆï¼Œå…¶ä¸»è¦ä½œç”¨æ˜¯åœ¨å£°æ˜æ—¶å»è¯»å†™å…ƒæ•°æ®ã€‚TSæ—©åœ¨1.5+ç‰ˆæœ¬å°±å·²ç»æ”¯æŒåå°„å…ƒæ•°æ®çš„ä½¿ç”¨ï¼Œç›®å‰æƒ³è¦ä½¿ç”¨ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å®‰è£…`reflect-metadata`ä¸åœ¨`tsconfig.json`ä¸­å¯ç”¨`emitDecoratorMetadata`é€‰é¡¹ã€‚\n\n\n\nä½ å¯ä»¥å°†å…ƒæ•°æ®ç†è§£ä¸ºç”¨äºæè¿°æ•°æ®çš„æ•°æ®ï¼Œå¦‚æŸä¸ªå¯¹è±¡çš„é”®ã€é”®å€¼ã€ç±»å‹ç­‰ç­‰å°±å¯ç§°ä¹‹ä¸ºè¯¥å¯¹è±¡çš„å…ƒæ•°æ®ã€‚æˆ‘ä»¬å…ˆä¸ç”¨å¤ªåœ¨æ„å…ƒæ•°æ®å®šä¹‰çš„ä½ç½®ï¼Œå…ˆåšä¸€ä¸ªç®€å•çš„é˜è¿°ï¼š\n\n*ä¸ºç±»æˆ–ç±»å±æ€§æ·»åŠ äº†å…ƒæ•°æ®åï¼Œæ„é€ å‡½æ•°çš„åŸå‹ï¼ˆæˆ–æ˜¯æ„é€ å‡½æ•°ï¼Œæ ¹æ®é™æ€æˆå‘˜è¿˜æ˜¯å®ä¾‹æˆå‘˜å†³å®šï¼‰ä¼šå…·æœ‰`[[Metadata]]`å±æ€§ï¼Œè¯¥å±æ€§å†…éƒ¨åŒ…å«ä¸€ä¸ª**Map**ç»“æ„ï¼Œ**é”®ä¸ºå±æ€§é”®ï¼Œå€¼ä¸ºå…ƒæ•°æ®é”®å€¼å¯¹**ã€‚*\n\n`reflect-metadata`æä¾›äº†å¯¹Reflectå¯¹è±¡çš„æ‰©å±•ï¼Œåœ¨å¼•å…¥åï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä»`Reflect`å¯¹è±¡ä¸Šè·å–æ‰©å±•æ–¹æ³•ã€‚\n\n> æ–‡æ¡£è§ [reflect-metadata](https://github.com/rbuckton/reflect-metadata)ï¼Œä½†ä¸ç”¨æ€¥ç€çœ‹ï¼Œå…¶APIå‘½ä»¤è¿˜æ˜¯å¾ˆè¯­ä¹‰åŒ–çš„\n\n```ts\nimport 'reflect-metadata';\n\n@Reflect.metadata('className', 'D')\nclass D {\n  @Reflect.metadata('methodName', 'hello')\n  public hello(): string {\n    return 'hello world';\n  }\n}\n\nconst d = new D();\nconsole.log(Reflect.getMetadata('className', D));\nconsole.log(Reflect.getMetadata('methodName', d));\n\n```\n\nå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬ç»™ç±»Dä¸Då†…éƒ¨çš„æ–¹æ³•helloéƒ½æ³¨å…¥äº†å…ƒæ•°æ®ï¼Œå¹¶é€šè¿‡`getMetadata(metadataKey, target)`è¿™ä¸ªæ–¹å¼å–å‡ºäº†å­˜æ”¾çš„å…ƒæ•°æ®ã€‚\n\n> Reflect-metadataæ”¯æŒå‘½ä»¤å¼(`Reflect.defineMetadata`)ä¸å£°æ˜å¼ï¼ˆä¸Šé¢çš„è£…é¥°å™¨æ–¹å¼ï¼‰çš„å…ƒæ•°æ®å®šä¹‰\n\n\n\næˆ‘ä»¬æ³¨æ„åˆ°ï¼Œæ³¨å…¥åœ¨ç±»ä¸Šçš„å…ƒæ•°æ®åœ¨å–å‡ºæ—¶targetä¸ºè¿™ä¸ªç±»Dï¼Œè€Œæ³¨å…¥åœ¨æ–¹æ³•ä¸Šçš„å…ƒæ•°æ®åœ¨å–å‡ºæ—¶targetåˆ™ä¸ºå®ä¾‹dã€‚åŸå› å…¶å®æˆ‘ä»¬å®é™…ä¸Šåœ¨ä¸Šé¢çš„è£…é¥°å™¨æ‰§è¡Œé¡ºåºæåˆ°äº†ï¼Œè¿™æ˜¯ç”±äº**æ³¨å…¥åœ¨æ–¹æ³•ã€å±æ€§ã€å‚æ•°ä¸Šçš„å…ƒæ•°æ®å®é™…ä¸Šæ˜¯è¢«æ·»åŠ åœ¨äº†å®ä¾‹å¯¹åº”çš„ä½ç½®ä¸Šï¼Œå› æ­¤éœ€è¦å®ä¾‹åŒ–æ‰èƒ½å–å‡ºã€‚**\n\n\n\n### å†…ç½®å…ƒæ•°æ®\n\nReflectå…è®¸ç¨‹åºå»æ£€è§†è‡ªèº«ï¼ŒåŸºäºè¿™ä¸ªæ•ˆæœï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è£…é¥°å™¨è¿è¡Œæ—¶å»æ£€æŸ¥å…¶ç±»å‹ç›¸å…³ä¿¡æ¯ï¼Œå¦‚ç›®æ ‡ç±»å‹ã€ç›®æ ‡å‚æ•°çš„ç±»å‹ä»¥åŠæ–¹æ³•è¿”å›å€¼çš„ç±»å‹ï¼Œè¿™éœ€è¦å€ŸåŠ©TSå†…ç½®çš„**å…ƒæ•°æ®metadataKey**æ¥å®ç°ï¼Œä»¥ä¸€ä¸ªæ£€æŸ¥å…¥å‚çš„ä¾‹å­ä¸ºä¾‹ï¼š\n\n> è®¿é—®ç¬¦è£…é¥°å™¨çš„å±æ€§æè¿°ç¬¦ä¼šé¢å¤–æ‹¥æœ‰`get`ä¸`set`æ–¹æ³•ï¼Œå…¶ä»–ä¸å±æ€§è£…é¥°å™¨ç›¸åŒ\n\n```typescript\nimport 'reflect-metadata';\n\nclass Point {\n  x: number;\n  y: number;\n}\n\nclass Line {\n  private _p0: Point;\n  private _p1: Point;\n\n  @validate\n  set p0(value: Point) {\n    this._p0 = value;\n  }\n  get p0() {\n    return this._p0;\n  }\n\n  @validate\n  set p1(value: Point) {\n    this._p1 = value;\n  }\n  get p1() {\n    return this._p1;\n  }\n}\n\nfunction validate<T>(\n  target: any,\n  propertyKey: string,\n  descriptor: TypedPropertyDescriptor<T>\n) {\n  let set = descriptor.set!;\n  descriptor.set = function (value: T) {\n    let type = Reflect.getMetadata('design:type', target, propertyKey);\n    if (!(value instanceof type)) {\n      throw new TypeError('Invalid type.');\n    }\n    set(value);\n  };\n}\n```\n\n> è¿™ä¸ªä¾‹å­æ¥è‡ªäºTypeScriptå®˜æ–¹æ–‡æ¡£ï¼Œä½†å®é™…ä¸Šä¸èƒ½æ­£å¸¸æ‰§è¡Œã€‚å› ä¸ºåœ¨ç»è¿‡è£…é¥°å™¨å¤„ç†åï¼Œsetæ–¹æ³•çš„thiså°†ä¼šä¸¢å¤±ã€‚ä½†æˆ‘çŒœæƒ³å®˜æ–¹çš„ç”¨æ„åªæ˜¯å±•ç¤º`design:type`çš„ç”¨æ³•ã€‚\n\nåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åŸºäº`Reflect.getMetadata('design:type', target, propertyKey);`è·å–åˆ°äº†è£…é¥°å™¨å¯¹åº”å£°æ˜çš„å±æ€§ç±»å‹ï¼Œå¹¶ç¡®ä¿åœ¨`setter`è¢«è°ƒç”¨æ—¶æ£€æŸ¥å€¼ç±»å‹ã€‚\n\nè¿™é‡Œçš„ `design:type` å³æ˜¯TSçš„å†…ç½®å…ƒæ•°æ®ï¼Œä½ å¯ä»¥ç†è§£ä¸ºTSåœ¨ç¼–è¯‘å‰è¿˜æ‰‹åŠ¨æ‰§è¡Œäº†`@Reflect.metadata(\"design:type\", Point)`ã€‚TSè¿˜å†…ç½®äº†**`design:paramtypes`ï¼ˆè·å–ç›®æ ‡å‚æ•°ç±»å‹ï¼‰**ä¸**`design:returntype`ï¼ˆè·å–æ–¹æ³•è¿”å›å€¼ç±»å‹ï¼‰**è¿™ä¸¤ç§å…ƒæ•°æ®å­—æ®µæ¥æä¾›å¸®åŠ©ã€‚ä½†æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œ**å³ä½¿å¯¹äºåŸºæœ¬ç±»å‹ï¼Œè¿™äº›å…ƒæ•°æ®ä¹Ÿè¿”å›å¯¹åº”çš„åŒ…è£…ç±»å‹ï¼Œå¦‚`number` -> `[Function: Number]`**\n\n\n\n## IoC\n\n### IoCã€ä¾èµ–æ³¨å…¥ã€å®¹å™¨\n\nIoCçš„å…¨ç§°ä¸º **Inversion of Control**ï¼Œæ„ä¸º**æ§åˆ¶åè½¬**ï¼Œå®ƒæ˜¯OOPä¸­çš„ä¸€ç§åŸåˆ™ï¼ˆè™½ç„¶ä¸åœ¨nå¤§è®¾è®¡æ¨¡å¼ä¸­ï¼Œä½†å®é™…ä¸ŠIoCä¹Ÿå±äºä¸€ç§è®¾è®¡æ¨¡å¼ï¼‰ï¼Œå®ƒå¯ä»¥å¾ˆå¥½çš„è§£è€¦ä»£ç ã€‚\n\nåœ¨ä¸ä½¿ç”¨IoCçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å†™å‡ºæ¥è¿™æ ·çš„ä»£ç ï¼š\n\n```typescript\nimport { A } from './modA';\nimport { B } from './modB';\n\nclass C {\n  constructor() {\n    this.a = new A();\n    this.b = new B();\n  }\n}\n```\n\nä¹ä¸€çœ‹å¯èƒ½æ²¡ä»€ä¹ˆï¼Œä½†å®é™…ä¸Šç±»Cä¼šå¼ºä¾èµ–äºAã€Bï¼Œé€ æˆæ¨¡å—ä¹‹é—´çš„è€¦åˆã€‚è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆåšï¼šç”¨ä¸€ä¸ªç¬¬ä¸‰æ–¹å®¹å™¨æ¥è´Ÿè´£ç®¡ç†å®¹å™¨ï¼Œå½“æˆ‘ä»¬éœ€è¦æŸä¸ªå®ä¾‹æ—¶ï¼Œç”±è¿™ä¸ªå®¹å™¨æ¥æ›¿æˆ‘ä»¬å®ä¾‹åŒ–å¹¶äº¤ç»™æˆ‘ä»¬å®ä¾‹ã€‚ä»¥`Injcetion`ä¸ºä¾‹ï¼š\n\n```typescript\nimport { Container } from 'injection';\nimport { A } from './A';\nimport { B } from './B';\nconst container = new Container();\ncontainer.bind(A);\ncontainer.bind(B);\n\nclass C {\n  constructor() {\n    this.a = container.get('a');\n    this.b = container.get('b');\n  }\n}\n```\n\nç°åœ¨Aã€Bã€Cä¹‹é—´æ²¡æœ‰äº†è€¦åˆï¼Œç”šè‡³å½“æŸä¸ªç±»Déœ€è¦ä½¿ç”¨Cçš„å®ä¾‹æ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠCäº¤ç»™IoCå®¹å™¨ã€‚\n\næˆ‘ä»¬ç°åœ¨èƒ½å¤ŸçŸ¥é“IoCå®¹å™¨å¤§æ¦‚çš„ä½œç”¨äº†ï¼šå®¹å™¨å†…éƒ¨ç»´æŠ¤ç€ä¸€ä¸ªå¯¹è±¡æ± ï¼Œç®¡ç†ç€å„ä¸ªå¯¹è±¡å®ä¾‹ï¼Œå½“ç”¨æˆ·éœ€è¦ä½¿ç”¨å®ä¾‹æ—¶ï¼Œå®¹å™¨ä¼šè‡ªåŠ¨å°†å¯¹è±¡å®ä¾‹åŒ–äº¤ç»™ç”¨æˆ·ã€‚\n\nå†ä¸¾ä¸ªæ —å­ï¼Œå½“æˆ‘ä»¬æƒ³è¦å¤„å¯¹è±¡æ—¶ï¼Œä¼šä¸ŠSoulã€Summerã€é™Œé™Œ...ç­‰ç­‰å»ä¸€ä¸ªä¸ªæ‰¾ï¼Œæ‰¾å“ªç§çš„ä¸æ€ä¹ˆæ‰¾æ˜¯ç”±æˆ‘è‡ªå·±å†³å®šçš„ï¼Œè¿™å« **æ§åˆ¶æ­£è½¬**ã€‚ç°åœ¨æˆ‘è§‰å¾—æœ‰ç‚¹éº»çƒ¦ï¼Œç›´æ¥æŠŠè‡ªå·±çš„ä»‹ç»ä¸Šä¼ åˆ°ä¸–çºªä½³ç¼˜ï¼Œå¦‚æœæœ‰äººçœ‹ä¸Šæˆ‘äº†ï¼Œå°±ä¼šä¸»åŠ¨å‘æˆ‘å‘èµ·èŠå¤©ï¼Œè¿™å« **æ§åˆ¶åè½¬**ã€‚\n\nDIçš„å…¨ç§°ä¸º**Dependency Injection**ï¼Œå³**ä¾èµ–æ³¨å…¥**ã€‚ä¾èµ–æ³¨å…¥æ˜¯æ§åˆ¶åè½¬æœ€å¸¸è§çš„ä¸€ç§åº”ç”¨æ–¹å¼ï¼Œå°±å¦‚å®ƒçš„åå­—ä¸€æ ·ï¼Œå®ƒçš„æ€è·¯å°±æ˜¯åœ¨å¯¹è±¡åˆ›å»ºæ—¶è‡ªåŠ¨æ³¨å…¥ä¾èµ–å¯¹è±¡ã€‚å†ä»¥`Injection`çš„ä½¿ç”¨ä¸ºä¾‹ï¼š\n\n```typescript\n// provideæ„ä¸ºå½“å‰å¯¹è±¡éœ€è¦è¢«ç»‘å®šåˆ°å®¹å™¨ä¸­\n// injectæ„ä¸ºå»å®¹å™¨ä¸­å–å‡ºå¯¹åº”çš„å®ä¾‹æ³¨å…¥åˆ°å½“å‰å±æ€§ä¸­\n@provide()\nexport class UserService {\n \n  @inject()\n  userModel;\n\n  async getUser(userId) {\n    return await this.userModel.get(userId);\n  }\n}\n```\n\næˆ‘ä»¬ä¸éœ€è¦åœ¨æ„é€ å‡½æ•°ä¸­å»æ‰‹åŠ¨`this.userModel = xxx`äº†ï¼Œå®¹å™¨ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬åšè¿™ä¸€æ­¥ã€‚\n\n\n\n### å®ä¾‹: åŸºäºIoCçš„è·¯ç”±ç®€æ˜“å®ç°\n\næˆ‘ä»¬åœ¨æœ€å¼€å§‹ä»‹ç»äº†MidwayJSçš„è·¯ç”±æœºåˆ¶ï¼Œå¤§æ¦‚é•¿è¿™æ ·ï¼š\n\n```typescript\n@provide()\n@controller('/user')\nexport class UserController {\n\n  @get('/all')\n  async getUser(): Promise<void> {\n    // ...\n  }\n\n  @get('/uid/:uid')\n  async findUserByUid(): Promise<void> {\n    // ...\n  }\n\n  @post('/uid/:uid')\n  async updateUser(): Promise<void> {\n    // ...\n  }\n}\n```\n\nï¼ˆ`@provide()`æ¥è‡ªäºåº•å±‚çš„IoCæ”¯æŒ`Injection`ï¼ŒMidwayåœ¨åº”ç”¨å¯åŠ¨æ—¶ä¼šå»æ‰«æè¢«`@provide()`è£…é¥°çš„å¯¹è±¡ï¼Œå¹¶è£…è½½åˆ°å®¹å™¨ä¸­ï¼Œè¿™é‡Œä¸æ˜¯é‡ç‚¹ï¼Œå¯ä»¥æš‚ä¸”è·³è¿‡ï¼Œæˆ‘ä»¬ä¸»è¦å…³æ³¨å¦‚ä½•**å°†è£…é¥°å™¨è·¯ç”±è§£ææˆè·¯ç”±è¡¨**çš„å½¢å¼ï¼‰\n\næˆ‘ä»¬è¦è§£æçš„è·¯ç”±å¦‚ä¸‹ï¼š\n\n```typescript\n@controller('/user')\nexport class UserController {\n  @get('/all')\n  async getAllUser(): Promise<void> {\n    // ...\n  }\n\n  @post('/update')\n  async updateUser(): Promise<void> {\n    // ...\n  }\n}\n```\n\né¦–å…ˆæ€è€ƒ`controller`å’Œ`get`/`post`è£…é¥°å™¨ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨è¿™å‡ ä¸ªè£…é¥°å™¨æ³¨å…¥å“ªäº›ä¿¡æ¯ï¼š\n\n- **è·¯å¾„**\n- **æ–¹æ³•ï¼ˆæ–¹æ³•è£…é¥°å™¨ï¼‰**\n\né¦–å…ˆæ˜¯å¯¹äºæ•´ä¸ªç±»ï¼Œæˆ‘ä»¬éœ€è¦å°†`path: \"/user\"`è¿™ä¸ªæ•°æ®æ³¨å…¥ï¼š\n\n```typescript\n// å·¥å…·å¸¸é‡æšä¸¾\nexport enum METADATA_MAP {\n  METHOD = 'method',\n  PATH = 'path',\n  GET = 'get',\n  POST = 'post',\n  MIDDLEWARE = 'middleware',\n}\n\nconst { METHOD, PATH, GET, POST } = METADATA_MAP;\n\nexport const controller = (path: string): ClassDecorator => {\n  return (target) => {\n    Reflect.defineMetadata(PATH, path, target);\n  };\n};\n```\n\nè€Œåæ˜¯æ–¹æ³•è£…é¥°å™¨ï¼Œæˆ‘ä»¬é€‰æ‹©ä¸€ä¸ªé«˜é˜¶å‡½æ•°ï¼ˆæŸ¯é‡ŒåŒ–ï¼‰å»åå‡ºå„ä¸ªæ–¹æ³•çš„è£…é¥°å™¨ï¼Œè€Œä¸æ˜¯ä¸ºæ¯ç§æ–¹æ³•å®šä¹‰ä¸€ä¸ªã€‚\n\n```typescript\n// æ–¹æ³•è£…é¥°å™¨ ä¿å­˜æ–¹æ³•ä¸è·¯å¾„\nexport const methodDecoCreator = (method: string) => {\n  return (path: string): MethodDecorator => {\n    return (_target, _key, descriptor) => {\n      Reflect.defineMetadata(METHOD, method, descriptor.value!);\n      Reflect.defineMetadata(PATH, path, descriptor.value!);\n    };\n  };\n};\n\n// é¦–å…ˆç¡®å®šæ–¹æ³•ï¼Œè€Œååœ¨ä½¿ç”¨æ—¶æ‰å»ç¡®å®šè·¯å¾„\nconst get = methodDecoCreator(GET);\nconst post = methodDecoCreator(POST);\n```\n\næ¥ä¸‹æ¥æˆ‘ä»¬è¦åšçš„äº‹æƒ…å°±å¾ˆç®€å•äº†ï¼š\n\n- æ‹¿åˆ°æ³¨å…¥åœ¨ç±»ä¸Šå…ƒæ•°æ®çš„æ ¹è·¯å¾„\n- æ‹¿åˆ°æ¯ä¸ªæ–¹æ³•ä¸Šå…ƒæ•°æ®çš„æ–¹æ³•ã€è·¯å¾„\n- æ‹¼æ¥ï¼Œç”Ÿæˆè·¯ç”±è¡¨\n\n```typescript\nconst routeGenerator = (ins: Object) => {\n  const prototype = Object.getPrototypeOf(ins);\n\n  const rootPath = Reflect.getMetadata(PATH, prototype['constructor']);\n\n  const methods = Object.getOwnPropertyNames(prototype).filter(\n    (item) => item !== 'constructor'\n  );\n\n  const routeGroup = methods.map((methodName) => {\n    const methodBody = prototype[methodName];\n\n    const path = Reflect.getMetadata(PATH, methodBody);\n    const method = Reflect.getMetadata(METHOD, methodBody);\n    return {\n      path: `${rootPath}${path}`,\n      method,\n      methodName,\n      methodBody,\n    };\n  });\n  console.log(routeGroup);\n  return routeGroup;\n};\n```\n\nç”Ÿæˆçš„ç»“æœå¤§æ¦‚æ˜¯è¿™æ ·ï¼š\n\n```typescript\n[\n  {\n    path: '/user/all',\n    method: 'post',\n    methodName: 'getAllUser',\n    methodBody: [Function (anonymous)]\n  },\n  {\n    path: '/user/update',\n    method: 'get',\n    methodName: 'updateUser',\n    methodBody: [Function (anonymous)]\n  }\n]\n```\n\nåŸºäºè¿™ç§æ€è·¯ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“çš„å†™ä¸€ä¸ªä½¿Koaæ”¯æŒIoCè·¯ç”±çš„å·¥å…·ã€‚å¦‚æœä½ æœ‰å…´è¶£ï¼Œä¸å¦¨æ‰©å±•ä¸€ä¸‹ã€‚æ¯”å¦‚è¯´è·¯ç”±è¿˜æœ‰å¯èƒ½é•¿è¿™æ ·ï¼š\n\n```typescript\n@controller('/user', { middleware:[mw1, mw2, ...] })\nexport class UserController {\n  @get('/all', { middleware:[mw11, mw22, ...] })\n  async getAllUser(): Promise<void> {\n    // ...\n  }\n\n  @get('/:uid')\n    async getUser(): Promise<void> {\n      // ...\n    }\n\n  @post('/update')\n  async updateUser(): Promise<void> {\n    // ...\n  }\n}\n```\n\næ–°å¢äº†å‡ ä¸ªåœ°æ–¹ï¼š\n\n- å…¨å±€ä¸­é—´ä»¶\n- è·¯ç”±çº§åˆ«ä¸­é—´ä»¶\n- è·¯ç”±ä¼ å‚\n\nè¦ä¸è¦è¯•è¯•æ•´æ´»ï¼Ÿ\n\n\n\nè¿™ä¸ªä¾‹å­æ˜¯å¦å±äºIoCæœºåˆ¶çš„ä½“ç°å¯èƒ½ä¼šæœ‰äº‰è®®ï¼Œä½†æˆ‘ä¸ªäººè®¤ä¸º`Reflect Metadata`çš„è®¾è®¡æœ¬èº«å°±æ˜¯IoCçš„ä½“ç°ã€‚å¦‚æœä½ æœ‰åˆ«çš„çœ‹æ³•ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºå‘ŠçŸ¥æˆ‘ã€‚\n\n\n\n### ä¾èµ–æ³¨å…¥å·¥å…·åº“\n\næˆ‘ä¸ªäººäº†è§£å¹¶ä½¿ç”¨è¿‡çš„TSä¾èµ–æ³¨å…¥å·¥å…·åº“åŒ…æ‹¬ï¼š\n\n- [TypeDI](https://github.com/typestack/typedi)ï¼ŒTypeStackå‡ºå“\n- [TSYringe](https://github.com/microsoft/tsyringe)ï¼Œå¾®è½¯å‡ºå“\n- [Injection](https://github.com/midwayjs/injection)ï¼ŒMidwayJSå›¢é˜Ÿå‡ºå“ï¼Œæ˜¯MidwayJSåº•å±‚IoCçš„èƒ½åŠ›æ”¯æŒ\n\nå…¶ä¸­`TypeDI`ä¹Ÿæ˜¯æˆ‘æ—¥å¸¸ä½¿ç”¨è¾ƒå¤šçš„ä¸€ä¸ªï¼Œå¦‚æœä½ ä½¿ç”¨åŸºæœ¬çš„Koaå¼€å‘é¡¹ç›®ï¼Œä¸å¦¨è¯•ä¸€è¯•`TypeORM` + `TypeORM-TypeDI-Extensions `ã€‚æˆ‘ä»¬å†çœ‹çœ‹ä¸Šé¢å‘ˆç°è¿‡çš„`Injection`çš„ä¾‹å­ï¼š\n\n```typescript\n@provide()\nexport class UserService {\n \n  @inject()\n  userModel;\n\n  async getUser(userId) {\n    return await this.userModel.get(userId);\n  }\n}\n```\n\nå®é™…ä¸Šï¼Œä¸€ä¸ªä¾èµ–æ³¨å…¥å·¥å…·åº“å¿…å®šä¼šæä¾›çš„å°±æ˜¯ **ä»å®¹å™¨ä¸­è·å–å®ä¾‹** ä¸ **æ³¨å…¥å¯¹è±¡åˆ°å®¹å™¨ä¸­**çš„ä¸¤ä¸ªæ–¹æ³•ï¼Œå¦‚ä¸Šé¢çš„`provide`ä¸`inject`ï¼ŒTypeDIçš„`Service`ä¸`Inject`ã€‚\n\n\n\n## æ€»ç»“\n\nè¯»å®Œè¿™ç¯‡æ–‡ç« ï¼Œæˆ‘æƒ³ä½ åº”è¯¥å¯¹TypeScriptä¸­çš„è£…é¥°å™¨ä¸IoCæœºåˆ¶æœ‰äº†å¤§æ¦‚çš„äº†è§£ï¼Œå¦‚æœä½ æ„çŠ¹æœªå°½ï¼Œä¸å¦¨å»çœ‹ä¸€ä¸‹TypeScriptå¯¹è£…é¥°å™¨ã€åå°„å…ƒæ•°æ®çš„ç¼–è¯‘ç»“æœï¼Œè§[TypeScript Playground](https://www.typescriptlang.org/play)ã€‚æˆ–è€…ï¼Œå¦‚æœä½ æƒ³æ—©ç‚¹å¼€å§‹äº†è§£MidwayJSï¼Œåœ¨é˜…è¯»[æ–‡æ¡£](https://midwayjs.org/midway/)çš„åŸºç¡€ä¸Šï¼Œä½ ä¹Ÿå¯ä»¥ç…ç…æˆ‘å†™çš„è¿™ä¸ªç®€å•çš„Demoï¼š[Midway-Article-Demo](https://github.com/linbudu599/Midway-Article-Demo)ï¼ŒåŸºäº `Midway` + `TypeORM` + `SQLite3`ï¼Œä½†è¯·æ³¨æ„ä»å¤„äºé›å½¢ï¼Œè®¸å¤šMidwayçš„å¼ºå¤§èƒ½åŠ›å°šæœªå¾—åˆ°ä½“ç°ï¼Œæ‰€ä»¥ä¸è¦ä»¥è¿™ä¸ªDemoåˆ¤å®šMidwayçš„èƒ½åŠ›ï¼Œæˆ‘ä¼šå°½å¿«å®Œå–„è¿™ä¸ªDemoçš„ã€‚\n\nä¸‹ä¸€ç¯‡ï¼Œæˆ‘ä»¬ä¼šè®²è§£Midwayçš„åŸºç¡€èƒ½åŠ›ï¼Œä»¥åŠå¯¹Midway-Serverlessï¼šé˜¿é‡Œå·´å·´æ·˜ç³»æŠ€æœ¯éƒ¨é¢å¯¹Serverlessäº¤å‡ºçš„å…¶ä¸­ä¸€ä»½ç­”å·çš„å±•æœ›ã€‚æœ¬ç¯‡å†…å®¹å¯èƒ½è¿˜æ˜¯æœ‰äº›æ¯ç‡¥ï¼Œä¸‹ä¸€ç¯‡æˆ‘ä»¬å°±ä¼šè¿›å…¥æ¬¢ä¹çš„å®æˆ˜ç¯èŠ‚å•¦~\n\n\n\n", "user_name": "æ—ä¸æ¸¡", "description": "å‰ç«¯", "got_view_count": 1956, "category_name": "å‰ç«¯", "ctime": 1457483942}
{"tag_name": "é¢è¯•", "concern_user_count": 285352, "user_id": "1451011080727639", "title": "Javaç¨‹åºå‘˜é¢è¯•å¿…å¤‡ï¼šVolatileå…¨æ–¹ä½è§£æ", "mark_content": "### å‰è¨€\nvolatileæ˜¯Javaç¨‹åºå‘˜å¿…å¤‡çš„åŸºç¡€ï¼Œä¹Ÿæ˜¯é¢è¯•å®˜éå¸¸å–œæ¬¢é—®çš„ä¸€ä¸ªè¯é¢˜ï¼Œæœ¬æ–‡è·Ÿå¤§å®¶ä¸€èµ·å¼€å¯vlatileå­¦ä¹ ä¹‹æ—…ï¼Œå¦‚æœæœ‰ä¸æ­£ç¡®çš„åœ°æ–¹ï¼Œä¹Ÿéº»çƒ¦å¤§å®¶æŒ‡å‡ºå“ˆï¼Œä¸€èµ·ç›¸äº’å­¦ä¹ ~\n\n- 1.volatileçš„ç”¨æ³•\n- 2.vlatileå˜é‡çš„ä½œç”¨\n- 3.ç°ä»£è®¡ç®—æœºçš„å†…å­˜æ¨¡å‹ï¼ˆè®¡ç®—æœºæ¨¡å‹ï¼Œæ€»çº¿ï¼ŒMESIåè®®ï¼Œå—…æ¢æŠ€æœ¯ï¼‰\n- 4.Javaå†…å­˜æ¨¡å‹ï¼ˆJMMï¼‰\n- 5.å¹¶å‘ç¼–ç¨‹çš„3ä¸ªç‰¹æ€§ï¼ˆåŸå­æ€§ã€å¯è§æ€§ã€æœ‰åºæ€§ã€happen-beforeã€as-if-serialã€æŒ‡ä»¤é‡æ’ï¼‰\n- 6.volatileçš„åº•å±‚åŸç†ï¼ˆå¦‚ä½•ä¿è¯å¯è§æ€§ï¼Œå¦‚ä½•ä¿è¯æŒ‡ä»¤é‡æ’ï¼Œå†…å­˜å±éšœï¼‰\n- 7.volatileçš„å…¸å‹åœºæ™¯ï¼ˆçŠ¶æ€æ ‡å¿—ï¼ŒDCLå•ä¾‹æ¨¡å¼ï¼‰\n- 8.volatileå¸¸è§é¢è¯•é¢˜&&ç­”æ¡ˆè§£æ\n- å…¬ä¼—å·ï¼šæ¡ç”°èºçš„å°ç”·å­©\n\n**github åœ°å€**\n> https://github.com/whx123/JavaHome\n\n### 1.volatileçš„ç”¨æ³•\nvolatileå…³é”®å­—æ˜¯Javaè™šæ‹Ÿæœºæä¾›çš„çš„**æœ€è½»é‡çº§çš„åŒæ­¥æœºåˆ¶**ï¼Œå®ƒä½œä¸ºä¸€ä¸ªä¿®é¥°ç¬¦å‡ºç°ï¼Œç”¨æ¥**ä¿®é¥°å˜é‡**ï¼Œä½†æ˜¯è¿™é‡Œä¸åŒ…æ‹¬å±€éƒ¨å˜é‡å“¦ã€‚æˆ‘ä»¬æ¥çœ‹ä¸ªdemoå§ï¼Œä»£ç å¦‚ä¸‹:\n```\n/**\n *  @Author æ¡ç”°èºçš„å°ç”·å­©\n *  @Date 2020/08/02\n *  @Desc volatileçš„å¯è§æ€§æ¢ç´¢\n */\npublic class VolatileTest  {\n\n    public static void main(String[] args) throws InterruptedException {\n        Task task = new Task();\n\n        Thread t1 = new Thread(task, \"çº¿ç¨‹t1\");\n        Thread t2 = new Thread(new Runnable() {\n            @Override\n            public void run() {\n                try {\n                    Thread.sleep(1000);\n                    System.out.println(\"å¼€å§‹é€šçŸ¥çº¿ç¨‹åœæ­¢\");\n                    task.stop = true; //ä¿®æ”¹stopå˜é‡å€¼ã€‚\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n\n            }\n        }, \"çº¿ç¨‹t2\");\n        t1.start();  //å¼€å¯çº¿ç¨‹t1\n        t2.start();  //å¼€å¯çº¿ç¨‹t2\n        Thread.sleep(1000);\n    }\n}\n\nclass Task implements Runnable {\n    boolean stop = false;\n    int i = 0;\n\n    @Override\n    public void run() {\n        long s = System.currentTimeMillis();\n        while (!stop) {\n            i++;\n        }\n        System.out.println(\"çº¿ç¨‹é€€å‡º\" + (System.currentTimeMillis() - s));\n    }\n}\n```\n**è¿è¡Œç»“æœï¼š**\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/057e2eec568a40fe9f47e05f3b47bdb7~tplv-k3u1fbpfcp-zoom-1.image)\nå¯ä»¥å‘ç°çº¿ç¨‹t2ï¼Œè™½ç„¶æŠŠstopè®¾ç½®ä¸ºtrueäº†ï¼Œä½†æ˜¯çº¿ç¨‹t1å¯¹t2çš„**stopå˜é‡è§†è€Œä¸å¯è§**ï¼Œå› æ­¤ï¼Œå®ƒä¸€ç›´åœ¨æ­»å¾ªç¯runningä¸­ã€‚å¦‚æœç»™å˜é‡stopåŠ ä¸Švolatileä¿®é¥°ï¼Œçº¿ç¨‹t1æ˜¯å¯ä»¥åœä¸‹æ¥çš„,è¿è¡Œç»“æœå¦‚ä¸‹ï¼š\n```\nvolatile boolean stop = false;\n```\n![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/81326a66e9cc4350af71b0e9ff4dc304~tplv-k3u1fbpfcp-zoom-1.image)\n\n\n### 2. vlatileä¿®é¥°å˜é‡çš„ä½œç”¨\n\nä»ä»¥ä¸Šä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°å˜é‡stopï¼ŒåŠ äº†vlatileä¿®é¥°ä¹‹åï¼Œçº¿ç¨‹t1å¯¹stopå°±å¯è§äº†ã€‚å…¶å®ï¼Œvlatileçš„ä½œç”¨å°±æ˜¯ï¼š**ä¿è¯å˜é‡å¯¹æ‰€æœ‰çº¿ç¨‹å¯è§æ€§**ã€‚å½“ç„¶ï¼Œvlatileè¿˜æœ‰ä¸ªä½œç”¨å°±æ˜¯ï¼Œ**ç¦æ­¢æŒ‡ä»¤é‡æ’**ï¼Œä½†æ˜¯å®ƒ**ä¸ä¿è¯åŸå­æ€§**ã€‚\n![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b5177218cf2b491da99d43392c7bd271~tplv-k3u1fbpfcp-zoom-1.image)\n\næ‰€ä»¥å½“é¢è¯•å®˜é—®ä½ **volatileçš„ä½œç”¨æˆ–è€…ç‰¹æ€§**ï¼Œéƒ½å¯ä»¥è¿™ä¹ˆå›ç­”ï¼š\n- ä¿è¯å˜é‡å¯¹æ‰€æœ‰çº¿ç¨‹å¯è§æ€§;\n- ç¦æ­¢æŒ‡ä»¤é‡æ’åº\n- ä¸ä¿è¯åŸå­æ€§\n\n### 3. ç°ä»£è®¡ç®—æœºçš„å†…å­˜æ¨¡å‹ï¼ˆè®¡ç®—æœºæ¨¡å‹ï¼ŒMESIåè®®ï¼Œå—…æ¢æŠ€æœ¯ï¼Œæ€»çº¿ï¼‰\nä¸ºäº†æ›´å¥½ç†è§£volatileï¼Œå…ˆå›é¡¾ä¸€ä¸‹è®¡ç®—æœºçš„å†…å­˜æ¨¡å‹ä¸JMMï¼ˆJavaå†…å­˜æ¨¡å‹ï¼‰å§~\n\n#### è®¡ç®—æœºæ¨¡å‹\nè®¡ç®—æœºæ‰§è¡Œç¨‹åºæ—¶ï¼ŒæŒ‡ä»¤æ˜¯ç”±CPUå¤„ç†å™¨æ‰§è¡Œçš„ï¼Œè€Œæ‰“äº¤é“çš„æ•°æ®æ˜¯åœ¨ä¸»å†…å­˜å½“ä¸­çš„ã€‚\n\nç”±äºè®¡ç®—æœºçš„å­˜å‚¨è®¾å¤‡ä¸å¤„ç†å™¨çš„è¿ç®—é€Ÿåº¦æœ‰å‡ ä¸ªæ•°é‡çº§çš„å·®è·ï¼Œæ€»ä¸èƒ½æ¯æ¬¡CPUæ‰§è¡Œå®ŒæŒ‡ä»¤ï¼Œç„¶åç­‰ä¸»å†…å­˜æ…¢æ‚ æ‚ å­˜å–æ•°æ®å§ï¼Œ\næ‰€ä»¥ç°ä»£è®¡ç®—æœºç³»ç»ŸåŠ å…¥ä¸€å±‚è¯»å†™é€Ÿåº¦æ¥è¿‘å¤„ç†å™¨è¿ç®—é€Ÿåº¦çš„é«˜é€Ÿç¼“å­˜ï¼ˆCacheï¼‰ï¼Œä»¥ä½œä¸ºæ¥ä½œä¸ºå†…å­˜ä¸å¤„ç†å™¨ä¹‹é—´çš„ç¼“å†²ã€‚\n\nåœ¨å¤šè·¯å¤„ç†å™¨ç³»ç»Ÿä¸­ï¼Œæ¯ä¸ªå¤„ç†å™¨éƒ½æœ‰è‡ªå·±çš„é«˜é€Ÿç¼“å­˜ï¼Œè€Œå®ƒä»¬å…±äº«åŒä¸€ä¸»å†…å­˜ã€‚**è®¡ç®—æœºæŠ½è±¡å†…å­˜æ¨¡å‹**å¦‚ä¸‹ï¼š\n\n![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f995fb284a7241b9b95431e79a1c37b0~tplv-k3u1fbpfcp-zoom-1.image)\n\n- ç¨‹åºæ‰§è¡Œæ—¶ï¼ŒæŠŠéœ€è¦ç”¨åˆ°çš„æ•°æ®ï¼Œä»ä¸»å†…å­˜æ‹·è´ä¸€ä»½åˆ°é«˜é€Ÿç¼“å­˜ã€‚\n- CPUå¤„ç†å™¨è®¡ç®—æ—¶ï¼Œä»å®ƒçš„é«˜é€Ÿç¼“å­˜ä¸­è¯»å–ï¼ŒæŠŠè®¡ç®—å®Œçš„æ•°æ®å†™å…¥é«˜é€Ÿç¼“å­˜ã€‚\n- å½“ç¨‹åºè¿ç®—ç»“æŸï¼ŒæŠŠé«˜é€Ÿç¼“å­˜çš„æ•°æ®åˆ·æ–°ä¼šä¸»å†…å­˜ã€‚\n\néšç€ç§‘å­¦æŠ€æœ¯çš„å‘å±•ï¼Œä¸ºäº†æ•ˆç‡ï¼Œé«˜é€Ÿç¼“å­˜åˆè¡ç”Ÿå‡ºä¸€çº§ç¼“å­˜ï¼ˆL1ï¼‰ï¼ŒäºŒçº§ç¼“å­˜ï¼ˆL2ï¼‰ï¼Œç”šè‡³ä¸‰çº§ç¼“å­˜(L3);\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/05fa9ff22d7f42ae82122bfc6c233bd9~tplv-k3u1fbpfcp-zoom-1.image)\n\nå½“å¤šä¸ªå¤„ç†å™¨çš„è¿ç®—ä»»åŠ¡éƒ½æ¶‰åŠåŒä¸€å—ä¸»å†…å­˜åŒºåŸŸï¼Œå¯èƒ½å¯¼è‡´**ç¼“å­˜æ•°æ®ä¸ä¸€è‡´**é—®é¢˜ã€‚å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿæœ‰ä¸¤ç§æ–¹æ¡ˆ\n\n> - 1ã€é€šè¿‡åœ¨æ€»çº¿åŠ LOCK#é”çš„æ–¹å¼ã€‚\n> - 2ã€é€šè¿‡ç¼“å­˜ä¸€è‡´æ€§åè®®ï¼ˆCache Coherence Protocolï¼‰\n\n#### æ€»çº¿\n\n> æ€»çº¿ï¼ˆBusï¼‰æ˜¯è®¡ç®—æœºå„ç§åŠŸèƒ½éƒ¨ä»¶ä¹‹é—´ä¼ é€ä¿¡æ¯çš„å…¬å…±é€šä¿¡å¹²çº¿ï¼Œå®ƒæ˜¯ç”±å¯¼çº¿ç»„æˆçš„ä¼ è¾“çº¿æŸï¼Œ æŒ‰ç…§è®¡ç®—æœºæ‰€ä¼ è¾“çš„ä¿¡æ¯ç§ç±»ï¼Œè®¡ç®—æœºçš„æ€»çº¿å¯ä»¥åˆ’åˆ†ä¸ºæ•°æ®æ€»çº¿ã€åœ°å€æ€»çº¿å’Œæ§åˆ¶æ€»çº¿ï¼Œåˆ†åˆ«ç”¨æ¥ä¼ è¾“æ•°æ®ã€æ•°æ®åœ°å€å’Œæ§åˆ¶ä¿¡å·ã€‚\n\nCPUå’Œå…¶ä»–åŠŸèƒ½éƒ¨ä»¶æ˜¯é€šè¿‡æ€»çº¿é€šä¿¡çš„ï¼Œå¦‚æœåœ¨æ€»çº¿åŠ LOCK#é”ï¼Œé‚£ä¹ˆåœ¨é”ä½æ€»çº¿æœŸé—´ï¼Œå…¶ä»–CPUæ˜¯æ— æ³•è®¿é—®å†…å­˜ï¼Œè¿™æ ·ä¸€æ¥ï¼Œ**æ•ˆç‡å°±æ¯”è¾ƒä½äº†**ã€‚\n\n#### MESIåè®®\nä¸ºäº†è§£å†³ä¸€è‡´æ€§é—®é¢˜ï¼Œè¿˜å¯ä»¥é€šè¿‡ç¼“å­˜ä¸€è‡´æ€§åè®®ã€‚å³å„ä¸ªå¤„ç†å™¨è®¿é—®ç¼“å­˜æ—¶éƒ½éµå¾ªä¸€äº›åè®®ï¼Œåœ¨è¯»å†™æ—¶è¦æ ¹æ®åè®®æ¥è¿›è¡Œæ“ä½œï¼Œè¿™ç±»åè®®æœ‰MSIã€MESIï¼ˆIllinoisProtocolï¼‰ã€MOSIã€Synapseã€FireflyåŠDragonProtocolç­‰ã€‚æ¯”è¾ƒè‘—åçš„å°±æ˜¯Intelçš„MESIï¼ˆModified Exclusive Shared Or Invalidï¼‰åè®®ï¼Œå®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š\n\n >  å½“CPUå†™æ•°æ®æ—¶ï¼Œå¦‚æœå‘ç°æ“ä½œçš„å˜é‡æ˜¯å…±äº«å˜é‡ï¼Œå³åœ¨å…¶ä»–CPUä¸­ä¹Ÿå­˜åœ¨è¯¥å˜é‡çš„å‰¯æœ¬ï¼Œä¼šå‘å‡ºä¿¡å·é€šçŸ¥å…¶ä»–CPUå°†è¯¥å˜é‡çš„ç¼“å­˜è¡Œç½®ä¸ºæ— æ•ˆçŠ¶æ€ï¼Œå› æ­¤å½“å…¶ä»–CPUéœ€è¦è¯»å–è¿™ä¸ªå˜é‡æ—¶ï¼Œå‘ç°è‡ªå·±ç¼“å­˜ä¸­ç¼“å­˜è¯¥å˜é‡çš„ç¼“å­˜è¡Œæ˜¯æ— æ•ˆçš„ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šä»å†…å­˜é‡æ–°è¯»å–ã€‚\n\nCPUä¸­æ¯ä¸ªç¼“å­˜è¡Œæ ‡è®°çš„4ç§çŠ¶æ€ï¼ˆMã€Eã€Sã€Iï¼‰,ä¹Ÿäº†è§£ä¸€ä¸‹å§:\n\n| ç¼“å­˜çŠ¶æ€ | æè¿° |\n|-----|-----|\n|  Mï¼Œè¢«ä¿®æ”¹ï¼ˆModified) | è¯¥ç¼“å­˜è¡Œåªè¢«è¯¥CPUç¼“å­˜ï¼Œä¸ä¸»å­˜çš„å€¼ä¸åŒï¼Œä¼šåœ¨å®ƒè¢«å…¶ä»–CPUè¯»å–ä¹‹å‰å†™å…¥å†…å­˜ï¼Œå¹¶è®¾ç½®ä¸ºShared  | \n| Eï¼Œç‹¬äº«çš„ï¼ˆExclusive) | è¯¥ç¼“å­˜è¡Œåªè¢«è¯¥CPUç¼“å­˜ï¼Œä¸ä¸»å­˜çš„å€¼ç›¸åŒï¼Œè¢«å…¶ä»–CPUè¯»å–æ—¶ç½®ä¸ºSharedï¼Œè¢«å…¶ä»–CPUå†™æ—¶ç½®ä¸ºModified  | \n| Sï¼Œå…±äº«çš„ï¼ˆShared) | è¯¥ç¼“å­˜è¡Œå¯èƒ½è¢«å¤šä¸ªCPUç¼“å­˜ï¼Œå„ä¸ªç¼“å­˜ä¸­çš„æ•°æ®ä¸ä¸»å­˜æ•°æ®ç›¸åŒ| \n| Iï¼Œæ— æ•ˆçš„ï¼ˆInvalidï¼‰ | è¯¥ç¼“å­˜è¡Œæ•°æ®æ˜¯æ— æ•ˆï¼Œéœ€è¦æ—¶éœ€é‡æ–°ä»ä¸»å­˜è½½å…¥ | \n\n\nMESIåè®®æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿå¦‚ä½•ä¿è¯å½“å‰å¤„ç†å™¨çš„å†…éƒ¨ç¼“å­˜ã€ä¸»å†…å­˜å’Œå…¶ä»–å¤„ç†å™¨çš„ç¼“å­˜æ•°æ®åœ¨æ€»çº¿ä¸Šä¿æŒä¸€è‡´çš„ï¼Ÿ**å¤šå¤„ç†å™¨æ€»çº¿å—…æ¢**\n\n#### å—…æ¢æŠ€æœ¯\n> åœ¨å¤šå¤„ç†å™¨ä¸‹ï¼Œä¸ºäº†ä¿è¯å„ä¸ªå¤„ç†å™¨çš„ç¼“å­˜æ˜¯ä¸€è‡´çš„ï¼Œå°±ä¼šå®ç°ç¼“å­˜ç¼“å­˜ä¸€è‡´æ€§åè®®ï¼Œæ¯ä¸ªå¤„ç†å™¨é€šè¿‡å—…æ¢åœ¨æ€»çº¿ä¸Šä¼ æ’­çš„æ•°æ®æ¥æ£€æŸ¥è‡ªå·±çš„ç¼“å­˜å€¼æ˜¯ä¸æ˜¯è¿‡æœŸäº†ï¼Œå¦‚æœå¤„ç†å™¨å‘ç°è‡ªå·±ç¼“å­˜è¡Œå¯¹åº”çš„å†…å­˜åœ°å€è¢«ä¿®æ”¹ï¼Œå°±ä¼šå°†å½“å‰å¤„ç†å™¨çš„ç¼“å­˜è¡Œè®¾ç½®æ— æ•ˆçŠ¶æ€ï¼Œå½“å¤„ç†å™¨å¯¹è¿™ä¸ªæ•°æ®è¿›è¡Œä¿®æ”¹æ“ä½œçš„æ—¶å€™ï¼Œä¼šé‡æ–°ä»ç³»ç»Ÿå†…å­˜ä¸­æŠŠæ•°æ®åº“è¯»åˆ°å¤„ç†å™¨ç¼“å­˜ä¸­ã€‚\n\n### 4. Javaå†…å­˜æ¨¡å‹ï¼ˆJMMï¼‰\n\n- Javaè™šæ‹Ÿæœºè§„èŒƒè¯•å›¾å®šä¹‰ä¸€ç§Javaå†…å­˜æ¨¡å‹,æ¥**å±è”½æ‰å„ç§ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿçš„å†…å­˜è®¿é—®å·®å¼‚**ï¼Œä»¥å®ç°è®©Javaç¨‹åºåœ¨å„ç§å¹³å°ä¸Šéƒ½èƒ½è¾¾åˆ°ä¸€è‡´çš„å†…å­˜è®¿é—®æ•ˆæœã€‚\n- Javaå†…å­˜æ¨¡å‹**ç±»æ¯”**äºè®¡ç®—æœºå†…å­˜æ¨¡å‹ã€‚\n- ä¸ºäº†æ›´å¥½çš„æ‰§è¡Œæ€§èƒ½ï¼Œjavaå†…å­˜æ¨¡å‹å¹¶æ²¡æœ‰é™åˆ¶æ‰§è¡Œå¼•æ“ä½¿ç”¨å¤„ç†å™¨çš„ç‰¹å®šå¯„å­˜å™¨æˆ–ç¼“å­˜æ¥å’Œä¸»å†…å­˜æ‰“äº¤é“ï¼Œä¹Ÿæ²¡æœ‰é™åˆ¶ç¼–è¯‘å™¨è¿›è¡Œè°ƒæ•´ä»£ç é¡ºåºä¼˜åŒ–ã€‚æ‰€ä»¥Javaå†…å­˜æ¨¡å‹**ä¼šå­˜åœ¨ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜å’ŒæŒ‡ä»¤é‡æ’åºé—®é¢˜çš„**ã€‚\n- Javaå†…å­˜æ¨¡å‹è§„å®šæ‰€æœ‰çš„å˜é‡éƒ½æ˜¯å­˜åœ¨ä¸»å†…å­˜å½“ä¸­ï¼ˆç±»ä¼¼äºè®¡ç®—æœºæ¨¡å‹ä¸­çš„ç‰©ç†å†…å­˜ï¼‰ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„å·¥ä½œå†…å­˜ï¼ˆç±»ä¼¼äºè®¡ç®—æœºæ¨¡å‹çš„é«˜é€Ÿç¼“å­˜ï¼‰ã€‚è¿™é‡Œçš„**å˜é‡**åŒ…æ‹¬å®ä¾‹å˜é‡å’Œé™æ€å˜é‡ï¼Œä½†æ˜¯**ä¸åŒ…æ‹¬å±€éƒ¨å˜é‡**ï¼Œå› ä¸ºå±€éƒ¨å˜é‡æ˜¯çº¿ç¨‹ç§æœ‰çš„ã€‚\n- çº¿ç¨‹çš„å·¥ä½œå†…å­˜ä¿å­˜äº†è¢«è¯¥çº¿ç¨‹ä½¿ç”¨çš„å˜é‡çš„ä¸»å†…å­˜å‰¯æœ¬ï¼Œ**çº¿ç¨‹å¯¹å˜é‡çš„æ‰€æœ‰æ“ä½œéƒ½å¿…é¡»åœ¨å·¥ä½œå†…å­˜ä¸­è¿›è¡Œ**ï¼Œè€Œä¸èƒ½ç›´æ¥æ“ä½œæ“ä½œä¸»å†…å­˜ã€‚å¹¶ä¸”æ¯ä¸ªçº¿ç¨‹ä¸èƒ½è®¿é—®å…¶ä»–çº¿ç¨‹çš„å·¥ä½œå†…å­˜ã€‚\n\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a6ca8c98a8cc42c998dd4fe3324ded79~tplv-k3u1fbpfcp-zoom-1.image)\n\nä¸¾ä¸ªä¾‹å­å§ï¼Œå‡è®¾içš„åˆå§‹å€¼æ˜¯0ï¼Œæ‰§è¡Œä»¥ä¸‹è¯­å¥ï¼š\n```\ni = i+1;\n```\né¦–å…ˆï¼Œæ‰§è¡Œçº¿ç¨‹t1ä»ä¸»å†…å­˜ä¸­è¯»å–åˆ°i=0ï¼Œåˆ°å·¥ä½œå†…å­˜ã€‚ç„¶ååœ¨å·¥ä½œå†…å­˜ä¸­ï¼Œèµ‹å€¼i+1,å·¥ä½œå†…å­˜å°±å¾—åˆ°i=1ï¼Œæœ€åæŠŠç»“æœå†™å›ä¸»å†…å­˜ã€‚å› æ­¤ï¼Œå¦‚æœæ˜¯å•çº¿ç¨‹çš„è¯ï¼Œè¯¥è¯­å¥æ‰§è¡Œæ˜¯æ²¡é—®é¢˜çš„ã€‚ä½†æ˜¯å‘¢ï¼Œçº¿ç¨‹t2çš„æœ¬åœ°å·¥ä½œå†…å­˜è¿˜æ²¡è¿‡æœŸï¼Œé‚£ä¹ˆå®ƒè¯»åˆ°çš„æ•°æ®å°±æ˜¯è„æ•°æ®äº†ã€‚å¦‚å›¾ï¼š\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c0abe171336e4f89a58722a1569d64ce~tplv-k3u1fbpfcp-zoom-1.image)\n\nJavaå†…å­˜æ¨¡å‹æ˜¯å›´ç»•ç€å¦‚ä½•åœ¨å¹¶å‘è¿‡ç¨‹ä¸­å¦‚ä½•å¤„ç†**åŸå­æ€§ã€å¯è§æ€§å’Œæœ‰åºæ€§**è¿™3ä¸ªç‰¹å¾æ¥å»ºç«‹çš„ï¼Œæˆ‘ä»¬å†æ¥ä¸€èµ·å›é¡¾ä¸€ä¸‹~\n\n### 5.å¹¶å‘ç¼–ç¨‹çš„3ä¸ªç‰¹æ€§ï¼ˆåŸå­æ€§ã€å¯è§æ€§ã€æœ‰åºæ€§ï¼‰\n\n#### åŸå­æ€§\n\nåŸå­æ€§ï¼ŒæŒ‡æ“ä½œæ˜¯ä¸å¯ä¸­æ–­çš„ï¼Œè¦ä¹ˆæ‰§è¡Œå®Œæˆï¼Œè¦ä¹ˆä¸æ‰§è¡Œï¼ŒåŸºæœ¬æ•°æ®ç±»å‹çš„è®¿é—®å’Œè¯»å†™éƒ½æ˜¯å…·æœ‰åŸå­æ€§ï¼Œå½“ç„¶ï¼ˆlongå’Œdoubleçš„éåŸå­æ€§åå®šé™¤å¤–ï¼‰ã€‚æˆ‘ä»¬æ¥çœ‹å‡ ä¸ªå°ä¾‹å­ï¼š\n```\ni =666ï¼› // è¯­å¥1\ni = j;   // è¯­å¥2\ni = i+1;  //è¯­å¥ 3\ni++;   // è¯­å¥4\n```\n- è¯­å¥1æ“ä½œæ˜¾ç„¶æ˜¯åŸå­æ€§çš„ï¼Œå°†æ•°å€¼666èµ‹å€¼ç»™iï¼Œå³çº¿ç¨‹æ‰§è¡Œè¿™ä¸ªè¯­å¥æ—¶ï¼Œç›´æ¥å°†æ•°å€¼666å†™å…¥åˆ°å·¥ä½œå†…å­˜ä¸­ã€‚\n- è¯­å¥2æ“ä½œçœ‹èµ·æ¥ä¹Ÿæ˜¯åŸå­æ€§çš„ï¼Œä½†æ˜¯å®ƒå®é™…ä¸Šæ¶‰åŠä¸¤ä¸ªæ“ä½œï¼Œå…ˆå»è¯»jçš„å€¼ï¼Œå†æŠŠjçš„å€¼å†™å…¥å·¥ä½œå†…å­˜ï¼Œä¸¤ä¸ªæ“ä½œåˆ†å¼€éƒ½æ˜¯åŸå­æ“ä½œï¼Œä½†æ˜¯åˆèµ·æ¥å°±ä¸æ»¡è¶³åŸå­æ€§äº†ã€‚\n- è¯­å¥3è¯»å–içš„å€¼ï¼ŒåŠ 1ï¼Œå†å†™å›ä¸»å­˜ï¼Œè¿™ä¸ªå°±ä¸æ˜¯åŸå­æ€§æ“ä½œäº†ã€‚\n- è¯­å¥4 ç­‰åŒäºè¯­å¥3ï¼Œä¹Ÿæ˜¯éåŸå­æ€§æ“ä½œã€‚\n\n#### å¯è§æ€§\n\n- å¯è§æ€§å°±æ˜¯æŒ‡å½“ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†å…±äº«å˜é‡çš„å€¼æ—¶ï¼Œå…¶ä»–çº¿ç¨‹èƒ½å¤Ÿç«‹å³å¾—çŸ¥è¿™ä¸ªä¿®æ”¹ã€‚\n- Javaå†…å­˜æ¨¡å‹æ˜¯é€šè¿‡åœ¨å˜é‡ä¿®æ”¹åå°†æ–°å€¼åŒæ­¥å›ä¸»å†…å­˜ï¼Œåœ¨å˜é‡è¯»å–å‰ä»ä¸»å†…å­˜åˆ·æ–°å˜é‡å€¼è¿™ç§ä¾èµ–ä¸»å†…å­˜ä½œä¸ºä¼ é€’åª’ä»‹çš„æ–¹å¼æ¥å®ç°å¯è§æ€§çš„ï¼Œæ— è®ºæ˜¯æ™®é€šå˜é‡è¿˜æ˜¯volatileå˜é‡éƒ½æ˜¯å¦‚æ­¤ã€‚\n- volatileå˜é‡ï¼Œä¿è¯æ–°å€¼èƒ½ç«‹å³åŒæ­¥å›ä¸»å†…å­˜ï¼Œä»¥åŠæ¯æ¬¡ä½¿ç”¨å‰ç«‹å³ä»ä¸»å†…å­˜åˆ·æ–°ï¼Œæ‰€ä»¥æˆ‘ä»¬è¯´volatileä¿è¯äº†å¤šçº¿ç¨‹æ“ä½œå˜é‡çš„å¯è§æ€§ã€‚\n- synchronizedå’ŒLockä¹Ÿèƒ½å¤Ÿä¿è¯å¯è§æ€§ï¼Œçº¿ç¨‹åœ¨é‡Šæ”¾é”ä¹‹å‰ï¼Œä¼šæŠŠå…±äº«å˜é‡å€¼éƒ½åˆ·å›ä¸»å­˜ã€‚finalä¹Ÿå¯ä»¥å®ç°å¯è§æ€§ã€‚\n\n \n#### æœ‰åºæ€§\n\nJavaè™šæ‹Ÿæœºè¿™æ ·æè¿°Javaç¨‹åºçš„æœ‰åºæ€§çš„ï¼šå¦‚æœåœ¨æœ¬çº¿ç¨‹å†…è§‚å¯Ÿï¼Œæ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯æœ‰åºçš„ï¼›å¦‚æœåœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­ï¼Œè§‚å¯Ÿå¦ä¸€ä¸ªçº¿ç¨‹ï¼Œæ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯æ— åºçš„ã€‚\n\nååŠå¥æ„æ€å°±æ˜¯ï¼Œåœ¨Javaå†…å­˜æ¨¡å‹ä¸­ï¼Œ**å…è®¸ç¼–è¯‘å™¨å’Œå¤„ç†å™¨å¯¹æŒ‡ä»¤è¿›è¡Œé‡æ’åº**ï¼Œä¼šå½±å“åˆ°å¤šçº¿ç¨‹å¹¶å‘æ‰§è¡Œçš„æ­£ç¡®æ€§ï¼›å‰åŠå¥æ„æ€å°±æ˜¯**as-if-serial**çš„è¯­ä¹‰ï¼Œå³ä¸ç®¡æ€ä¹ˆé‡æ’åºï¼ˆç¼–è¯‘å™¨å’Œå¤„ç†å™¨ä¸ºäº†æé«˜å¹¶è¡Œåº¦ï¼‰ï¼Œï¼ˆå•çº¿ç¨‹ï¼‰ç¨‹åºçš„æ‰§è¡Œç»“æœä¸ä¼šè¢«æ”¹å˜ã€‚\n\næ¯”å¦‚ä»¥ä¸‹ç¨‹åºä»£ç ï¼š\n```\ndouble pi  = 3.14;    //A\ndouble r   = 1.0;     //B\ndouble area = pi * r * r; //C\n```\næ­¥éª¤Cä¾èµ–äºæ­¥éª¤Aå’ŒBï¼Œå› ä¸ºæŒ‡ä»¤é‡æ’çš„å­˜åœ¨ï¼Œç¨‹åºæ‰§è¡Œé¡ºè®¯å¯èƒ½æ˜¯A->B->C,ä¹Ÿå¯èƒ½æ˜¯B->A->C,ä½†æ˜¯Cä¸èƒ½åœ¨Aæˆ–è€…Bå‰é¢æ‰§è¡Œï¼Œè¿™å°†è¿åas-if-serialè¯­ä¹‰ã€‚\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/87387195b86749ddbe1f36582a562988~tplv-k3u1fbpfcp-zoom-1.image)\n\nçœ‹æ®µä»£ç å§ï¼Œå‡è®¾ç¨‹åºå…ˆæ‰§è¡Œreadæ–¹æ³•ï¼Œå†æ‰§è¡Œaddæ–¹æ³•ï¼Œç»“æœä¸€å®šæ˜¯è¾“å‡ºsum=2å˜›ï¼Ÿ\n```\nbool flag = false;\nint b = 0;\n\npublic void read() {\n   b = 1;              //1\n   flag = true;        //2\n}\n\npublic void add() {\n   if (flag) {         //3\n       int sum =b+b;   //4\n       System.out.println(\"bb sum is\"+sum); \n   } \n}\n\n```\n\nå¦‚æœæ˜¯å•çº¿ç¨‹ï¼Œç»“æœåº”è¯¥æ²¡é—®é¢˜ï¼Œå¦‚æœæ˜¯å¤šçº¿ç¨‹ï¼Œçº¿ç¨‹t1å¯¹æ­¥éª¤1å’Œ2è¿›è¡Œäº†**æŒ‡ä»¤é‡æ’åº**å‘¢ï¼Ÿç»“æœsumå°±ä¸æ˜¯2äº†ï¼Œè€Œæ˜¯0ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/093c6e37453c462985bed78c4d239979~tplv-k3u1fbpfcp-zoom-1.image)\n\nè¿™æ˜¯ä¸ºå•¥å‘¢ï¼Ÿ**æŒ‡ä»¤é‡æ’åº**äº†è§£ä¸€ä¸‹ï¼ŒæŒ‡ä»¤é‡æ’æ˜¯æŒ‡åœ¨ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­,**ä¸ºäº†æé«˜æ€§èƒ½**, **ç¼–è¯‘å™¨å’ŒCPUå¯èƒ½ä¼šå¯¹æŒ‡ä»¤è¿›è¡Œé‡æ–°æ’åº**ã€‚CPUé‡æ’åºåŒ…æ‹¬æŒ‡ä»¤å¹¶è¡Œé‡æ’åºå’Œå†…å­˜ç³»ç»Ÿé‡æ’åºï¼Œé‡æ’åºç±»å‹å’Œé‡æ’åºæ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d8a24934eab24bf9b80c402039371aa2~tplv-k3u1fbpfcp-zoom-1.image)\n\nå®é™…ä¸Šï¼Œå¯ä»¥ç»™flagåŠ ä¸Švolatileå…³é”®å­—ï¼Œæ¥ä¿è¯æœ‰åºæ€§ã€‚å½“ç„¶ï¼Œä¹Ÿå¯ä»¥é€šè¿‡synchronizedå’ŒLockæ¥ä¿è¯æœ‰åºæ€§ã€‚synchronizedå’ŒLockä¿è¯æŸä¸€æ—¶åˆ»æ˜¯åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œç›¸å½“äºæ˜¯è®©çº¿ç¨‹é¡ºåºæ‰§è¡Œç¨‹åºä»£ç äº†ï¼Œè‡ªç„¶å°±ä¿è¯äº†æœ‰åºæ€§ã€‚\n\nå®é™…ä¸ŠJavaå†…å­˜æ¨¡å‹çš„æœ‰åºæ€§å¹¶ä¸æ˜¯ä»…é volatileã€synchronizedå’ŒLockæ¥ä¿è¯æœ‰åºæ€§çš„ã€‚è¿™æ˜¯å› ä¸ºJavaè¯­è¨€ä¸­ï¼Œæœ‰ä¸€ä¸ªå…ˆè¡Œå‘ç”ŸåŸåˆ™ï¼ˆhappens-beforeï¼‰ï¼š\n- **ç¨‹åºæ¬¡åºè§„åˆ™**ï¼šåœ¨ä¸€ä¸ªçº¿ç¨‹å†…ï¼ŒæŒ‰ç…§æ§åˆ¶æµé¡ºåºï¼Œä¹¦å†™åœ¨å‰é¢çš„æ“ä½œå…ˆè¡Œå‘ç”Ÿäºä¹¦å†™åœ¨åé¢çš„æ“ä½œã€‚\n- **ç®¡ç¨‹é”å®šè§„åˆ™**ï¼šä¸€ä¸ªunLockæ“ä½œå…ˆè¡Œå‘ç”Ÿäºåé¢å¯¹åŒä¸€ä¸ªé”é¢lockæ“ä½œ\n- **volatileå˜é‡è§„åˆ™**ï¼šå¯¹ä¸€ä¸ªå˜é‡çš„å†™æ“ä½œå…ˆè¡Œå‘ç”Ÿäºåé¢å¯¹è¿™ä¸ªå˜é‡çš„è¯»æ“ä½œ\n- **çº¿ç¨‹å¯åŠ¨è§„åˆ™**ï¼šThreadå¯¹è±¡çš„start()æ–¹æ³•å…ˆè¡Œå‘ç”Ÿäºæ­¤çº¿ç¨‹çš„æ¯ä¸ªä¸€ä¸ªåŠ¨ä½œ\n- **çº¿ç¨‹ç»ˆæ­¢è§„åˆ™**ï¼šçº¿ç¨‹ä¸­æ‰€æœ‰çš„æ“ä½œéƒ½å…ˆè¡Œå‘ç”Ÿäºçº¿ç¨‹çš„ç»ˆæ­¢æ£€æµ‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡Thread.join()æ–¹æ³•ç»“æŸã€Thread.isAlive()çš„è¿”å›å€¼æ‰‹æ®µæ£€æµ‹åˆ°çº¿ç¨‹å·²ç»ç»ˆæ­¢æ‰§è¡Œ\n- **çº¿ç¨‹ä¸­æ–­è§„åˆ™**ï¼šå¯¹çº¿ç¨‹interrupt()æ–¹æ³•çš„è°ƒç”¨å…ˆè¡Œå‘ç”Ÿäºè¢«ä¸­æ–­çº¿ç¨‹çš„ä»£ç æ£€æµ‹åˆ°ä¸­æ–­äº‹ä»¶çš„å‘ç”Ÿ\n- **å¯¹è±¡ç»ˆç»“è§„åˆ™**ï¼šä¸€ä¸ªå¯¹è±¡çš„åˆå§‹åŒ–å®Œæˆå…ˆè¡Œå‘ç”Ÿäºä»–çš„finalize()æ–¹æ³•çš„å¼€å§‹\n- **ä¼ é€’æ€§**ï¼šå¦‚æœæ“ä½œAå…ˆè¡Œå‘ç”Ÿäºæ“ä½œBï¼Œè€Œæ“ä½œBåˆå…ˆè¡Œå‘ç”Ÿäºæ“ä½œCï¼Œåˆ™å¯ä»¥å¾—å‡ºæ“ä½œAå…ˆè¡Œå‘ç”Ÿäºæ“ä½œC\n\næ ¹æ®happens-beforeçš„å…«å¤§è§„åˆ™ï¼Œæˆ‘ä»¬å›åˆ°åˆšçš„ä¾‹å­ï¼Œä¸€èµ·åˆ†æä¸€ä¸‹ã€‚ç»™flagåŠ ä¸Švolatileå…³é”®å­—ï¼Œlook lookå®ƒæ˜¯å¦‚ä½•ä¿è¯æœ‰åºæ€§çš„ï¼Œ\n```\nvolatile bool flag = false;\nint b = 0;\n\npublic void read() {\n   b = 1;              //1\n   flag = true;        //2\n}\n\npublic void add() {\n   if (flag) {         //3\n       int sum =b+b;   //4\n       System.out.println(\"bb sum is\"+sum); \n   } \n}\n```\n- é¦–å…ˆå‘¢ï¼ŒflagåŠ ä¸Švolatileå…³é”®å­—ï¼Œé‚£å°±ç¦æ­¢äº†æŒ‡ä»¤é‡æ’ï¼Œä¹Ÿå°±æ˜¯1 happens-before 2äº†\n- æ ¹æ®**volatileå˜é‡è§„åˆ™**ï¼Œ2 happens-before 3\n- ç”±**ç¨‹åºæ¬¡åºè§„åˆ™**ï¼Œå¾—å‡º 3 happens-before 4\n- æœ€åç”±**ä¼ é€’æ€§**ï¼Œå¾—å‡º1 happens-before 4ï¼Œå› æ­¤å¦¥å¦¥çš„è¾“å‡ºsum=2å•¦~\n\n### 6.volatileåº•å±‚åŸç†\n\nä»¥ä¸Šè®¨è®ºå­¦ä¹ ï¼Œæˆ‘ä»¬çŸ¥é“volatileçš„è¯­ä¹‰å°±æ˜¯ä¿è¯å˜é‡å¯¹æ‰€æœ‰çº¿ç¨‹å¯è§æ€§ä»¥åŠç¦æ­¢æŒ‡ä»¤é‡æ’ä¼˜åŒ–ã€‚é‚£ä¹ˆï¼Œå®ƒçš„åº•å±‚æ˜¯å¦‚ä½•ä¿è¯å¯è§æ€§å’Œç¦æ­¢æŒ‡ä»¤é‡æ’çš„å‘¢ï¼Ÿ\n\n#### å›¾è§£volatileæ˜¯å¦‚ä½•ä¿è¯å¯è§æ€§çš„ï¼Ÿ\nåœ¨è¿™é‡Œï¼Œå…ˆçœ‹å‡ ä¸ªå›¾å§ï¼Œå“ˆå“ˆ~\n\nå‡è®¾flagå˜é‡çš„åˆå§‹å€¼falseï¼Œç°åœ¨æœ‰ä¸¤æ¡çº¿ç¨‹t1å’Œt2è¦è®¿é—®å®ƒï¼Œå°±å¯ä»¥ç®€åŒ–ä¸ºä»¥ä¸‹å›¾ï¼š\n![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7ddbe230c8dc4501a77ffbe0587b5ba6~tplv-k3u1fbpfcp-zoom-1.image)\n\nå¦‚æœçº¿ç¨‹t1æ‰§è¡Œä»¥ä¸‹ä»£ç è¯­å¥ï¼Œå¹¶ä¸”flagæ²¡æœ‰volatileä¿®é¥°çš„è¯ï¼›t1åˆšä¿®æ”¹å®Œflagçš„å€¼ï¼Œè¿˜æ²¡æ¥å¾—åŠåˆ·æ–°åˆ°ä¸»å†…å­˜ï¼Œt2åˆè·‘è¿‡æ¥è¯»å–äº†ï¼Œå¾ˆå®¹æ˜“å°±æ•°æ®flagä¸ä¸€è‡´äº†ï¼Œå¦‚ä¸‹ï¼š\n\n```\nflag=true;\n```\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cc065cf75803496aa1efafd6d68ba968~tplv-k3u1fbpfcp-zoom-1.image)\n\nå¦‚æœflagå˜é‡æ˜¯ç”±volatileä¿®é¥°çš„è¯ï¼Œå°±ä¸ä¸€æ ·äº†ï¼Œå¦‚æœçº¿ç¨‹t1ä¿®æ”¹äº†flagå€¼ï¼Œvolatileèƒ½ä¿è¯ä¿®é¥°çš„flagå˜é‡åï¼Œå¯ä»¥**ç«‹å³åŒæ­¥å›ä¸»å†…å­˜**ã€‚å¦‚å›¾ï¼š\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/27e9e195810a4a71bdeb38dd128b27e4~tplv-k3u1fbpfcp-zoom-1.image)\n\nç»†å¿ƒçš„æœ‹å‹ä¼šå‘ç°ï¼Œçº¿ç¨‹t2ä¸è¿˜æ˜¯flagæ—§çš„å€¼å—ï¼Œè¿™ä¸è¿˜æœ‰é—®é¢˜å˜›ï¼Ÿå…¶å®volatileè¿˜æœ‰ä¸€ä¸ªä¿è¯ï¼Œå°±æ˜¯**æ¯æ¬¡ä½¿ç”¨å‰ç«‹å³å…ˆä»ä¸»å†…å­˜åˆ·æ–°æœ€æ–°çš„å€¼**ï¼Œçº¿ç¨‹t1ä¿®æ”¹å®Œåï¼Œçº¿ç¨‹t2çš„å˜é‡å‰¯æœ¬ä¼šè¿‡æœŸäº†ï¼Œå¦‚å›¾ï¼š\n![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7e67dcdfe9d9412dab89961bf92b5b53~tplv-k3u1fbpfcp-zoom-1.image)\n\næ˜¾ç„¶ï¼Œè¿™é‡Œè¿˜ä¸æ˜¯åº•å±‚ï¼Œå®é™…ä¸Švolatileä¿è¯å¯è§æ€§å’Œç¦æ­¢æŒ‡ä»¤é‡æ’éƒ½è·Ÿ**å†…å­˜å±éšœ**æœ‰å…³ï¼Œæˆ‘ä»¬ç¼–è¯‘volatileç›¸å…³ä»£ç çœ‹çœ‹~\n\n#### DCLå•ä¾‹æ¨¡å¼ï¼ˆvolatileï¼‰&ç¼–è¯‘å¯¹æ¯”\nDCLå•ä¾‹æ¨¡å¼ï¼ˆDouble Check Lockï¼ŒåŒé‡æ£€æŸ¥é”ï¼‰æ¯”è¾ƒå¸¸ç”¨ï¼Œå®ƒæ˜¯éœ€è¦volatileä¿®é¥°çš„ï¼Œæ‰€ä»¥å°±æ‹¿è¿™æ®µä»£ç ç¼–è¯‘å§\n```\npublic class Singleton {  \n    private volatile static Singleton instance;  \n    private Singleton (){}  \n    public static Singleton getInstance() {  \n    if (instance == null) {  \n        synchronized (Singleton.class) {  \n        if (instance == null) {  \n            instance = new Singleton();  \n        }  \n        }  \n    }  \n    return instance;  \n    }  \n}  \n```\nç¼–è¯‘è¿™æ®µä»£ç åï¼Œè§‚å¯Ÿæœ‰volatileå…³é”®å­—å’Œæ²¡æœ‰volatileå…³é”®å­—æ—¶çš„instanceæ‰€ç”Ÿæˆçš„æ±‡ç¼–ä»£ç å‘ç°ï¼Œæœ‰volatileå…³é”®å­—ä¿®é¥°æ—¶ï¼Œä¼šå¤šå‡ºä¸€ä¸ªlock addl $0x0,(%esp)ï¼Œå³å¤šå‡ºä¸€ä¸ªlockå‰ç¼€æŒ‡ä»¤\n```\n0x01a3de0f: mov    $0x3375cdb0,%esi   ;...beb0cd75 33  \n                                        ;   {oop('Singleton')}  \n0x01a3de14: mov    %eax,0x150(%esi)   ;...89865001 0000  \n0x01a3de1a: shr    $0x9,%esi          ;...c1ee09  \n0x01a3de1d: movb   $0x0,0x1104800(%esi)  ;...c6860048 100100  \n0x01a3de24: lock addl $0x0,(%esp)     ;...f0830424 00  \n                                        ;*putstatic instance  \n                                        ; - Singleton::getInstance@24 \n```\n lockæŒ‡ä»¤ç›¸å½“äºä¸€ä¸ª**å†…å­˜å±éšœ**ï¼Œå®ƒä¿è¯ä»¥ä¸‹è¿™å‡ ç‚¹ï¼š\n > - 1.é‡æ’åºæ—¶ä¸èƒ½æŠŠåé¢çš„æŒ‡ä»¤é‡æ’åºåˆ°å†…å­˜å±éšœä¹‹å‰çš„ä½ç½®\n > - 2.å°†æœ¬å¤„ç†å™¨çš„ç¼“å­˜å†™å…¥å†…å­˜\n > - 3.å¦‚æœæ˜¯å†™å…¥åŠ¨ä½œï¼Œä¼šå¯¼è‡´å…¶ä»–å¤„ç†å™¨ä¸­å¯¹åº”çš„ç¼“å­˜æ— æ•ˆã€‚\n\næ˜¾ç„¶ï¼Œç¬¬2ã€3ç‚¹ä¸å°±æ˜¯volatileä¿è¯å¯è§æ€§çš„ä½“ç°å˜›ï¼Œç¬¬1ç‚¹å°±æ˜¯ç¦æ­¢æŒ‡ä»¤é‡æ’åˆ—çš„ä½“ç°ã€‚\n\n#### å†…å­˜å±éšœ\n\nå†…å­˜å±éšœå››å¤§åˆ†ç±»ï¼šï¼ˆLoad ä»£è¡¨è¯»å–æŒ‡ä»¤ï¼ŒStoreä»£è¡¨å†™å…¥æŒ‡ä»¤ï¼‰\n\n| å†…å­˜å±éšœç±»å‹ | æŠ½è±¡åœºæ™¯| æè¿°|\n|-----|-----|-----|\n|LoadLoadå±éšœ| Load1; LoadLoad; Load2|åœ¨Load2è¦è¯»å–çš„æ•°æ®è¢«è®¿é—®å‰ï¼Œä¿è¯Load1è¦è¯»å–çš„æ•°æ®è¢«è¯»å–å®Œæ¯•ã€‚|\n|StoreStoreå±éšœ|Store1; StoreStore; Store2|åœ¨Store2å†™å…¥æ‰§è¡Œå‰ï¼Œä¿è¯Store1çš„å†™å…¥æ“ä½œå¯¹å…¶å®ƒå¤„ç†å™¨å¯è§|\n|LoadStoreå±éšœ|Load1; LoadStore; Store2| åœ¨Store2è¢«å†™å…¥å‰ï¼Œä¿è¯Load1è¦è¯»å–çš„æ•°æ®è¢«è¯»å–å®Œæ¯•ã€‚|\n|StoreLoadå±éšœ|Store1; StoreLoad; Load2|åœ¨Load2è¯»å–æ“ä½œæ‰§è¡Œå‰ï¼Œä¿è¯Store1çš„å†™å…¥å¯¹æ‰€æœ‰å¤„ç†å™¨å¯è§ã€‚|\n\nä¸ºäº†å®ç°volatileçš„å†…å­˜è¯­ä¹‰ï¼ŒJavaå†…å­˜æ¨¡å‹é‡‡å–ä»¥ä¸‹çš„ä¿å®ˆç­–ç•¥\n- åœ¨æ¯ä¸ªvolatileå†™æ“ä½œçš„å‰é¢æ’å…¥ä¸€ä¸ªStoreStoreå±éšœã€‚\n- åœ¨æ¯ä¸ªvolatileå†™æ“ä½œçš„åé¢æ’å…¥ä¸€ä¸ªStoreLoadå±éšœã€‚\n- åœ¨æ¯ä¸ªvolatileè¯»æ“ä½œçš„å‰é¢æ’å…¥ä¸€ä¸ªLoadLoadå±éšœã€‚\n- åœ¨æ¯ä¸ªvolatileè¯»æ“ä½œçš„åé¢æ’å…¥ä¸€ä¸ªLoadStoreå±éšœã€‚\n\næœ‰äº›å°ä¼™ä¼´ï¼Œå¯èƒ½å¯¹è¿™ä¸ªè¿˜æ˜¯æœ‰ç‚¹ç–‘æƒ‘ï¼Œå†…å­˜å±éšœè¿™ç©æ„å¤ªæŠ½è±¡äº†ã€‚æˆ‘ä»¬ç…§ç€ä»£ç çœ‹ä¸‹å§ï¼š\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a3097b7467304540b6a552d897d46997~tplv-k3u1fbpfcp-zoom-1.image)\nå†…å­˜å±éšœä¿è¯å‰é¢çš„æŒ‡ä»¤å…ˆæ‰§è¡Œï¼Œæ‰€ä»¥è¿™å°±ä¿è¯äº†ç¦æ­¢äº†æŒ‡ä»¤é‡æ’å•¦ï¼ŒåŒæ—¶å†…å­˜å±éšœä¿è¯ç¼“å­˜å†™å…¥å†…å­˜å’Œå…¶ä»–å¤„ç†å™¨ç¼“å­˜å¤±æ•ˆï¼Œè¿™ä¹Ÿå°±ä¿è¯äº†å¯è§æ€§ï¼Œå“ˆå“ˆ~\n\n### 7.volatileçš„å…¸å‹åœºæ™¯\né€šå¸¸æ¥è¯´ï¼Œä½¿ç”¨volatileå¿…é¡»å…·å¤‡ä»¥ä¸‹2ä¸ªæ¡ä»¶ï¼š\n- 1ï¼‰å¯¹å˜é‡çš„å†™æ“ä½œä¸ä¾èµ–äºå½“å‰å€¼\n- 2ï¼‰è¯¥å˜é‡æ²¡æœ‰åŒ…å«åœ¨å…·æœ‰å…¶ä»–å˜é‡çš„ä¸å˜å¼ä¸­\n\nå®é™…ä¸Šï¼Œvolatileåœºæ™¯ä¸€èˆ¬å°±æ˜¯**çŠ¶æ€æ ‡å¿—**ï¼Œä»¥åŠ**DCLå•ä¾‹æ¨¡å¼**ã€‚\n\n#### 7.1 çŠ¶æ€æ ‡å¿—\næ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºï¼Œä¹¦ä¸­çš„ä¾‹å­ï¼š\n```\nMap configOptions;\nchar[] configText;\n// æ­¤å˜é‡å¿…é¡»å®šä¹‰ä¸º volatile\nvolatile boolean initialized = false;\n\n// å‡è®¾ä»¥ä¸‹ä»£ç åœ¨çº¿ç¨‹ A ä¸­è¿è¡Œ\n// æ¨¡æ‹Ÿè¯»å–é…ç½®ä¿¡æ¯, å½“è¯»å–å®Œæˆåå°† initialized è®¾ç½®ä¸º true ä»¥å‘ŠçŸ¥å…¶ä»–çº¿ç¨‹é…ç½®å¯ç”¨\nconfigOptions = new HashMap();\nconfigText = readConfigFile(fileName);\nprocessConfigOptions(configText, configOptions);\ninitialized = true;\n      \n// å‡è®¾ä»¥ä¸‹ä»£ç åœ¨çº¿ç¨‹ B ä¸­è¿è¡Œ\n// ç­‰å¾… initialized ä¸º true, ä»£è¡¨çº¿ç¨‹ A å·²ç»æŠŠé…ç½®ä¿¡æ¯åˆå§‹åŒ–å®Œæˆ\nwhile(!initialized) {\n   sleep();\n}\n// ä½¿ç”¨çº¿ç¨‹ A ä¸­åˆå§‹åŒ–å¥½çš„é…ç½®ä¿¡æ¯\ndoSomethingWithConfig();\n```\n#### 7.2 DCLå•ä¾‹æ¨¡å¼\n```\nclass Singleton{\n    private volatile static Singleton instance = null;\n     \n    private Singleton() {   \n    }\n     \n    public static Singleton getInstance() {\n        if(instance==null) {\n            synchronized (Singleton.class) {\n                if(instance==null)\n                    instance = new Singleton();\n            }\n        }\n        return instance;\n    }\n}\n\n```\n\n### 8. volatileç›¸å…³ç»å…¸é¢è¯•é¢˜\n- è°ˆè°ˆvolatileçš„ç‰¹æ€§\n- volatileçš„å†…å­˜è¯­ä¹‰  \n- è¯´è¯´å¹¶å‘ç¼–ç¨‹çš„3å¤§ç‰¹æ€§\n- ä»€ä¹ˆæ˜¯å†…å­˜å¯è§æ€§ï¼Œä»€ä¹ˆæ˜¯æŒ‡ä»¤é‡æ’åºï¼Ÿ\n- volatileæ˜¯å¦‚ä½•è§£å†³javaå¹¶å‘ä¸­å¯è§æ€§çš„é—®é¢˜\n- volatileå¦‚ä½•é˜²æ­¢æŒ‡ä»¤é‡æ’\n- volatileå¯ä»¥è§£å†³åŸå­æ€§å˜›ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ\n- volatileåº•å±‚çš„å®ç°æœºåˆ¶\n- volatileå’Œsynchronizedçš„åŒºåˆ«ï¼Ÿ\n\n#### 8.1 è°ˆè°ˆvolatileçš„ç‰¹æ€§\n\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8e624231e978455ebec33c7380ffba0d~tplv-k3u1fbpfcp-zoom-1.image)\n\n#### 8.2  volatileçš„å†…å­˜è¯­ä¹‰\n\n- å½“å†™ä¸€ä¸ª volatile å˜é‡æ—¶ï¼ŒJMM ä¼šæŠŠè¯¥çº¿ç¨‹å¯¹åº”çš„æœ¬åœ°å†…å­˜ä¸­çš„å…±äº«å˜é‡å€¼åˆ·æ–°åˆ°ä¸»å†…å­˜ã€‚\n- å½“è¯»ä¸€ä¸ª volatile å˜é‡æ—¶ï¼ŒJMM ä¼šæŠŠè¯¥çº¿ç¨‹å¯¹åº”çš„æœ¬åœ°å†…å­˜ç½®ä¸ºæ— æ•ˆã€‚çº¿ç¨‹æ¥ä¸‹æ¥å°†ä»ä¸»å†…å­˜ä¸­è¯»å–å…±äº«å˜é‡ã€‚\n\n#### 8.3 è¯´è¯´å¹¶å‘ç¼–ç¨‹çš„3å¤§ç‰¹æ€§\n- åŸå­æ€§\n- å¯è§æ€§\n- æœ‰åºæ€§\n\n#### 8.4 ä»€ä¹ˆæ˜¯å†…å­˜å¯è§æ€§ï¼Œä»€ä¹ˆæ˜¯æŒ‡ä»¤é‡æ’åºï¼Ÿ\n- å¯è§æ€§å°±æ˜¯æŒ‡å½“ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†å…±äº«å˜é‡çš„å€¼æ—¶ï¼Œå…¶ä»–çº¿ç¨‹èƒ½å¤Ÿç«‹å³å¾—çŸ¥è¿™ä¸ªä¿®æ”¹ã€‚\n- æŒ‡ä»¤é‡æ’æ˜¯æŒ‡JVMåœ¨ç¼–è¯‘Javaä»£ç çš„æ—¶å€™ï¼Œæˆ–è€…CPUåœ¨æ‰§è¡ŒJVMå­—èŠ‚ç çš„æ—¶å€™ï¼Œå¯¹ç°æœ‰çš„æŒ‡ä»¤é¡ºåºè¿›è¡Œé‡æ–°æ’åºã€‚\n\n#### 8.5 volatileæ˜¯å¦‚ä½•è§£å†³javaå¹¶å‘ä¸­å¯è§æ€§çš„é—®é¢˜\n\nåº•å±‚æ˜¯é€šè¿‡å†…å­˜å±éšœå®ç°çš„å“¦ï¼Œvolatileèƒ½ä¿è¯ä¿®é¥°çš„å˜é‡åï¼Œå¯ä»¥ç«‹å³åŒæ­¥å›ä¸»å†…å­˜ï¼Œæ¯æ¬¡ä½¿ç”¨å‰ç«‹å³å…ˆä»ä¸»å†…å­˜åˆ·æ–°æœ€æ–°çš„å€¼ã€‚\n\n#### 8.6 volatileå¦‚ä½•é˜²æ­¢æŒ‡ä»¤é‡æ’\n\nä¹Ÿæ˜¯å†…å­˜å±éšœå“¦ï¼Œè·Ÿé¢è¯•å®˜è®²ä¸‹Javaå†…å­˜çš„ä¿å®ˆç­–ç•¥ï¼š\n- åœ¨æ¯ä¸ªvolatileå†™æ“ä½œçš„å‰é¢æ’å…¥ä¸€ä¸ªStoreStoreå±éšœã€‚\n- åœ¨æ¯ä¸ªvolatileå†™æ“ä½œçš„åé¢æ’å…¥ä¸€ä¸ªStoreLoadå±éšœã€‚\n- åœ¨æ¯ä¸ªvolatileè¯»æ“ä½œçš„å‰é¢æ’å…¥ä¸€ä¸ªLoadLoadå±éšœã€‚\n- åœ¨æ¯ä¸ªvolatileè¯»æ“ä½œçš„åé¢æ’å…¥ä¸€ä¸ªLoadStoreå±éšœã€‚\n\nå†è®²ä¸‹volatileçš„è¯­ä¹‰å“¦ï¼Œé‡æ’åºæ—¶ä¸èƒ½æŠŠå†…å­˜å±éšœåé¢çš„æŒ‡ä»¤é‡æ’åºåˆ°å†…å­˜å±éšœä¹‹å‰çš„ä½ç½®\n\n#### 8.7 volatileå¯ä»¥è§£å†³åŸå­æ€§å˜›ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ\n\nä¸å¯ä»¥ï¼Œå¯ä»¥ç›´æ¥ä¸¾i++é‚£ä¸ªä¾‹å­ï¼ŒåŸå­æ€§éœ€è¦synchronziedæˆ–è€…lockä¿è¯\n\n```\npublic class Test {\n    public volatile int race = 0;\n     \n    public void increase() {\n        race++;\n    }\n     \n    public static void main(String[] args) {\n        final Test test = new Test();\n        for(int i=0;i<10;i++){\n            new Thread(){\n                public void run() {\n                    for(int j=0;j<100;j++)\n                        test.increase();\n                };\n            }.start();\n        }\n        \n        //ç­‰å¾…æ‰€æœ‰ç´¯åŠ çº¿ç¨‹ç»“æŸ\n        while(Thread.activeCount()>1)  \n            Thread.yield();\n        System.out.println(test.race);\n    }\n}\n```\n\n #### 8.8 volatileåº•å±‚çš„å®ç°æœºåˆ¶\n \n å¯ä»¥çœ‹æœ¬æ–‡çš„ç¬¬å…­å°èŠ‚ï¼Œvolatileåº•å±‚åŸç†å“ˆï¼Œä¸»è¦ä½ è¦è·Ÿé¢è¯•å®˜è®²è¿°ï¼Œvolatileå¦‚ä½•ä¿è¯å¯è§æ€§å’Œç¦æ­¢æŒ‡ä»¤é‡æ’ï¼Œéœ€è¦è®²åˆ°å†…å­˜å±éšœ~\n \n #### 8.9 volatileå’Œsynchronizedçš„åŒºåˆ«ï¼Ÿ\n - volatileä¿®é¥°çš„æ˜¯å˜é‡ï¼Œsynchronizedä¸€èˆ¬ä¿®é¥°ä»£ç å—æˆ–è€…æ–¹æ³•\n - volatileä¿è¯å¯è§æ€§ã€ç¦æ­¢æŒ‡ä»¤é‡æ’ï¼Œä½†æ˜¯ä¸ä¿è¯åŸå­æ€§ï¼›synchronizedå¯ä»¥ä¿è¯åŸå­æ€§\n - volatileä¸ä¼šé€ æˆçº¿ç¨‹é˜»å¡ï¼Œsynchronizedå¯èƒ½ä¼šé€ æˆçº¿ç¨‹çš„é˜»å¡ï¼Œæ‰€ä»¥åé¢æ‰æœ‰é”ä¼˜åŒ–é‚£ä¹ˆå¤šæ•…äº‹~\n - å“ˆå“ˆï¼Œä½ è¿˜æœ‰è¡¥å……å˜›~\n\næ¨èä¹‹å‰å†™çš„ä¸€ç¯‡æ–‡ç« ï¼š\n[Synchronizedè§£æâ€”â€”å¦‚æœä½ æ„¿æ„ä¸€å±‚ä¸€å±‚å‰¥å¼€æˆ‘çš„å¿ƒ](https://juejin.im/post/6844903918653145102)\n\n\n### å…¬ä¼—å·\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/07e9fd0521c244adab8556fee99a2011~tplv-k3u1fbpfcp-zoom-1.image)\n\n### å‚è€ƒä¸æ„Ÿè°¢\n- <<æ·±å…¥ç†è§£Javaè™šæ‹Ÿæœº>>\n- [Javaå¹¶å‘ç¼–ç¨‹ï¼švolatileå…³é”®å­—è§£æ](https://www.cnblogs.com/dolphin0520/p/3920373.html)\n- [é¢è¯•å®˜æœ€çˆ±çš„volatileå…³é”®å­—](https://juejin.im/post/6844903520760496141)\n- [ é¢è¯•å®˜æ²¡æƒ³åˆ°ä¸€ä¸ªVolatileï¼Œæˆ‘éƒ½èƒ½è·Ÿä»–æ‰¯åŠå°æ—¶](https://juejin.im/post/6844904149536997384)\n- [å†æœ‰äººé—®ä½ Javaå†…å­˜æ¨¡å‹æ˜¯ä»€ä¹ˆï¼Œå°±æŠŠè¿™ç¯‡æ–‡ç« å‘ç»™ä»–ã€‚](http://47.103.216.138/archives/2550)\n- [ã€å¹¶å‘ç¼–ç¨‹ã€‘MESI--CPUç¼“å­˜ä¸€è‡´æ€§åè®®](https://www.cnblogs.com/z00377750/p/9180644.html)\n- [æ¼«ç”»ï¼švolatileå¯¹æŒ‡ä»¤é‡æ’çš„å½±å“ ](https://www.sohu.com/a/211287207_684445)\n- [volatileä¸‰å¤§ç‰¹æ€§è¯¦è§£](https://www.jianshu.com/p/765e3abbe89a)\n\n", "user_name": "Jay_huaxiao", "description": "éƒ½æ€ªè¿™å‰ä»–ï¼Œå¼¹å¾—å¤ªå‡„å‡‰ï¼ˆä¸ªäººå…¬ä¼—å·ï¼šæ¡ç”°èºçš„å°ç”·å­©ï¼‰", "got_view_count": 190798, "category_name": "åç«¯", "ctime": 1457483880}
{"tag_name": "React.js", "concern_user_count": 199177, "user_id": "3456520257288974", "title": "ç¼–å†™é«˜è´¨é‡å¯ç»´æŠ¤çš„ä»£ç ï¼šä¼˜åŒ–é€»è¾‘åˆ¤æ–­", "mark_content": "![](https://user-gold-cdn.xitu.io/2020/7/26/1738ae6bd8113663?w=1317&h=260&f=png&s=67242)\n\n> è¿™æ˜¯ç¬¬ <font size=3 color=\"red\">64</font> ç¯‡ä¸æºæ°´çš„åŸåˆ›ï¼Œæƒ³è·å–æ›´å¤šåŸåˆ›å¥½æ–‡ï¼Œè¯·æ‰« ğŸ‘† ä¸Šæ–¹äºŒç»´ç å…³æ³¨æˆ‘ä»¬å§~\n> æœ¬æ–‡é¦–å‘äºæ”¿é‡‡äº‘å‰ç«¯åšå®¢ï¼š[ç¼–å†™é«˜è´¨é‡å¯ç»´æŠ¤çš„ä»£ç ï¼šé€»è¾‘åˆ¤æ–­](https://www.zoo.team/article/logical-judgment)\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c2f595a79a3e43c8af7dd8d02cda28bd~tplv-k3u1fbpfcp-zoom-1.image)\n\n## å‰è¨€\n\nif elseã€switch case æ˜¯æ—¥å¸¸å¼€å‘ä¸­æœ€å¸¸è§çš„æ¡ä»¶åˆ¤æ–­è¯­å¥ï¼Œè¿™ç§çœ‹ä¼¼ç®€å•çš„è¯­å¥ï¼Œå½“é‡åˆ°å¤æ‚çš„ä¸šåŠ¡åœºæ™¯æ—¶ï¼Œå¦‚æœå¤„ç†ä¸å–„ï¼Œå°±ä¼šå‡ºç°å¤§é‡çš„é€»è¾‘åµŒå¥—ï¼Œå¯è¯»æ€§å·®å¹¶ä¸”éš¾ä»¥æ‰©å±•ã€‚\n\n\n\nç¼–å†™é«˜è´¨é‡å¯ç»´æŠ¤çš„ä»£ç ï¼Œæˆ‘ä»¬å…ˆä»æœ€å°å¤„å…¥æ‰‹ï¼Œä¸€èµ·æ¥çœ‹çœ‹åœ¨å‰ç«¯å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥ä»å“ªäº›æ–¹é¢æ¥ä¼˜åŒ–é€»è¾‘åˆ¤æ–­ï¼Ÿ  \n\n\n\nä¸‹é¢æˆ‘ä»¬ä¼šåˆ†åˆ«ä» JavaScript è¯­æ³•å’Œ React JSX è¯­æ³•ä¸¤ä¸ªæ–¹é¢æ¥åˆ†äº«ä¸€äº›ä¼˜åŒ–çš„æŠ€å·§ã€‚\n\n\n\n## JavaScript è¯­æ³•ç¯‡ ##\n\n### åµŒå¥—å±‚çº§ä¼˜åŒ– ###\n\n```javascript\nfunction supply(fruit, quantity) {\n  const redFruits = ['apple', 'strawberry', 'cherry', 'cranberries'];\n  // æ¡ä»¶ 1: æ°´æœå­˜åœ¨\n  if (fruit) {\n    // æ¡ä»¶ 2: å±äºçº¢è‰²æ°´æœ\n    if (redFruits.includes(fruit)) {\n      console.log('çº¢è‰²æ°´æœ');\n      // æ¡ä»¶ 3: æ°´æœæ•°é‡å¤§äº 10 ä¸ª\n      if (quantity > 10) {\n        console.log('æ•°é‡å¤§äº 10 ä¸ª');\n      }\n    }\n  } else {\n    throw new Error('æ²¡æœ‰æ°´æœå•¦!');\n  }\n}\n```\n\n\n\nåˆ†æä¸Šé¢çš„æ¡ä»¶åˆ¤æ–­ï¼Œå­˜åœ¨ä¸‰å±‚ if æ¡ä»¶åµŒå¥—ã€‚\n\n\n\nå¦‚æœæå‰ return æ‰æ— æ•ˆæ¡ä»¶ï¼Œå°† if elseçš„å¤šé‡åµŒå¥—å±‚æ¬¡å‡å°‘åˆ°ä¸€å±‚ï¼Œæ›´å®¹æ˜“ç†è§£å’Œç»´æŠ¤ã€‚\n\n\n\n```javascript\nfunction supply(fruit, quantity) {\n  const redFruits = ['apple', 'strawberry', 'cherry', 'cranberries'];\n  if (!fruit) throw new Error('æ²¡æœ‰æ°´æœå•¦'); // æ¡ä»¶ 1: å½“ fruit æ— æ•ˆæ—¶ï¼Œæå‰å¤„ç†é”™è¯¯\n  if (!redFruits.includes(fruit)) return; // æ¡ä»¶ 2: å½“ä¸æ˜¯çº¢è‰²æ°´æœæ—¶ï¼Œæå‰ return\n  \n  console.log('çº¢è‰²æ°´æœ');\n  \n  // æ¡ä»¶ 3: æ°´æœæ•°é‡å¤§äº 10 ä¸ª\n  if (quantity > 10) {\n    console.log('æ•°é‡å¤§äº 10 ä¸ª');\n  }\n}\n```\n\n\n\n### å¤šæ¡ä»¶åˆ†æ”¯çš„ä¼˜åŒ–å¤„ç† ###\n\nå½“éœ€è¦æšä¸¾å€¼å¤„ç†ä¸åŒçš„ä¸šåŠ¡åˆ†æ”¯é€»è¾‘æ—¶ï¼Œ ç¬¬ä¸€ååº”æ˜¯å†™ä¸‹ if else ï¼Ÿæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ï¼š \n\n```javascript\nfunction pick(color) {\n  // æ ¹æ®é¢œè‰²é€‰æ‹©æ°´æœ\n  if(color === 'red') {\n      return ['apple', 'strawberry']; \n  } else if (color === 'yellow') {\n      return ['banana', 'pineapple'];\n  } else if (color === 'purple') {\n      return ['grape', 'plum'];\n  } else {\n      return [];\n  }\n}\n```\n\n\n\nåœ¨ä¸Šé¢çš„å®ç°ä¸­ï¼š\n\n- if else åˆ†æ”¯å¤ªå¤š\n- if else æ›´é€‚åˆäºæ¡ä»¶åŒºé—´åˆ¤æ–­ï¼Œè€Œ switch case æ›´é€‚åˆäºå…·ä½“æšä¸¾å€¼çš„åˆ†æ”¯åˆ¤æ–­\n\nä½¿ç”¨ switch case ä¼˜åŒ–ä¸Šé¢çš„ä»£ç åï¼š\n\n```javascript\nfunction pick(color) {\n  // æ ¹æ®é¢œè‰²é€‰æ‹©æ°´æœ\n  switch (color) {\n    case 'red':\n      return ['apple', 'strawberry'];\n    case 'yellow':\n      return ['banana', 'pineapple'];\n    case 'purple':\n      return ['grape', 'plum'];\n    default:\n      return [];\n  }\n}\n```\n\n\n\nswitch case ä¼˜åŒ–ä¹‹åçš„ä»£ç çœ‹ä¸Šå»æ ¼å¼æ•´é½ï¼Œæ€è·¯å¾ˆæ¸…æ™°ï¼Œä½†è¿˜æ˜¯å¾ˆå†—é•¿ã€‚ç»§ç»­ä¼˜åŒ–ï¼š \n\n- å€ŸåŠ© Object çš„ { key: value } ç»“æ„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ Object ä¸­æšä¸¾æ‰€æœ‰çš„æƒ…å†µï¼Œç„¶åå°† key ä½œä¸ºç´¢å¼•ï¼Œç›´æ¥é€šè¿‡ Object.key  æˆ–è€… Object[key] æ¥è·å–å†…å®¹\n\n```javascript\nconst fruitColor = {\n  red: ['apple', 'strawberry'],\n  yellow: ['banana', 'pineapple'],\n  purple: ['grape', 'plum'],\n};\nfunction pick(color) {\n  return fruitColor[color] || [];\n}\n```\n\n- ä½¿ç”¨ Map æ•°æ®ç»“æ„ï¼ŒçœŸæ­£çš„ (key, value) é”®å€¼å¯¹ç»“æ„ ï¼› \n\n```javascript\nconst fruitColor = new Map()\n.set('red', ['apple', 'strawberry'])\n.set('yellow', ['banana', 'pineapple'])\n.set('purple', ['grape', 'plum']);\n\nfunction pick(color) {\n  return fruitColor.get(color) || [];\n}\n```\n\n\n\nä¼˜åŒ–ä¹‹åï¼Œä»£ç æ›´ç®€æ´ã€æ›´å®¹æ˜“æ‰©å±•ã€‚ \n\n\n\nä¸ºäº†æ›´å¥½çš„å¯è¯»æ€§ï¼Œè¿˜å¯ä»¥é€šè¿‡æ›´åŠ è¯­ä¹‰åŒ–çš„æ–¹å¼å®šä¹‰å¯¹è±¡ï¼Œç„¶åä½¿ç”¨ Array.filter è¾¾åˆ°åŒæ ·çš„æ•ˆæœã€‚\n\n\n\n```javascript\nconst fruits = [\n  { name: 'apple', color: 'red' }, \n  { name: 'strawberry', color: 'red' }, \n  { name: 'banana', color: 'yellow' }, \n  { name: 'pineapple', color: 'yellow' }, \n  { name: 'grape', color: 'purple' }, \n  { name: 'plum', color: 'purple' }\n];\n\nfunction pick(color) {\n  return fruits.filter(f => f.color === color);\n}\n```\n\n\n\n### ä½¿ç”¨æ•°ç»„æ–°ç‰¹æ€§ç®€åŒ–é€»è¾‘åˆ¤æ–­ ###\n\nå·§å¦™çš„åˆ©ç”¨ ES6 ä¸­æä¾›çš„æ•°ç»„æ–°ç‰¹æ€§ï¼Œä¹Ÿå¯ä»¥è®©æˆ‘ä»¬æ›´è½»æ¾çš„å¤„ç†é€»è¾‘åˆ¤æ–­ã€‚\n\n\n\n#### **å¤šæ¡ä»¶åˆ¤æ–­**\n\nç¼–ç æ—¶é‡åˆ°å¤šä¸ªåˆ¤æ–­æ¡ä»¶æ—¶ï¼Œæœ¬èƒ½çš„å†™ä¸‹ä¸‹é¢çš„ä»£ç ï¼ˆå…¶å®ä¹Ÿæ˜¯æœ€èƒ½è¡¨è¾¾ä¸šåŠ¡é€»è¾‘çš„é¢å‘è¿‡ç¨‹ç¼–ç ï¼‰ã€‚ \n\n\n\n```javascript\nfunction judge(fruit) {\n  if (fruit === 'apple' || fruit === 'strawberry' || fruit === 'cherry' || fruit === 'cranberries' ) {\n    console.log('red');\n  }\n}\n```\n\n\n\nä½†æ˜¯å½“ type æœªæ¥åˆ° 10 ç§ç”šè‡³æ›´å¤šæ—¶ï¼Œ æˆ‘ä»¬åªèƒ½ç»§ç»­æ·»åŠ  || æ¥ç»´æŠ¤ä»£ç ä¹ˆ ? \n\nè¯•è¯• **Array.includes** ~\n\n\n\n```javascript\n// å°†åˆ¤æ–­æ¡ä»¶æŠ½å–æˆä¸€ä¸ªæ•°ç»„\nconst redFruits = ['apple', 'strawberry', 'cherry', 'cranberries'];\nfunction judge(fruit) {\n  if (redFruits.includes(fruit)) {\n      console.log('red');\n   }\n}\n\n```\n\n\n\n#### **åˆ¤æ–­æ•°ç»„ä¸­æ˜¯å¦æ‰€æœ‰é¡¹éƒ½æ»¡è¶³æŸæ¡ä»¶**\n\n```javascript\nconst fruits = [\n  { name: 'apple', color: 'red' },\n  { name: 'banana', color: 'yellow' },\n  { name: 'grape', color: 'purple' }\n];\n\nfunction match() {\n  let isAllRed = true;\n\n  // åˆ¤æ–­æ¡ä»¶ï¼šæ‰€æœ‰çš„æ°´æœéƒ½å¿…é¡»æ˜¯çº¢è‰²\n  for (let f of fruits) {\n    if (!isAllRed) break;\n    isAllRed = (f.color === 'red');\n  }\n\n  console.log(isAllRed); // false\n}\n\n```\n\n\n\nä¸Šé¢çš„å®ç°ä¸­ï¼Œä¸»è¦æ˜¯ä¸ºäº†å¤„ç†æ•°ç»„ä¸­çš„æ‰€æœ‰é¡¹éƒ½ç¬¦åˆæ¡ä»¶ã€‚\n\nä½¿ç”¨ **Array.every** å¯ä»¥å¾ˆå®¹çš„å®ç°è¿™ä¸ªé€»è¾‘ï¼š\n\n\n\n```javascript\nconst fruits = [\n  { name: 'apple', color: 'red' },\n  { name: 'banana', color: 'yellow' },\n  { name: 'grape', color: 'purple' }\n];\n\nfunction match() {\n  // æ¡ä»¶ï¼šæ‰€æœ‰æ°´æœéƒ½å¿…é¡»æ˜¯çº¢è‰²\n  const isAllRed = fruits.every(f => f.color === 'red');\n\n  console.log(isAllRed); // false\n}\n\n```\n\n\n\n#### **åˆ¤æ–­æ•°ç»„ä¸­æ˜¯å¦æœ‰æŸä¸€é¡¹æ»¡è¶³æ¡ä»¶**\n\n**Array.some** ï¼Œå®ƒä¸»è¦å¤„ç†çš„åœºæ™¯æ˜¯åˆ¤æ–­æ•°ç»„ä¸­æ˜¯å¦æœ‰ä¸€é¡¹æ»¡è¶³æ¡ä»¶ã€‚\n\nå¦‚æœæƒ³çŸ¥é“æ˜¯å¦æœ‰çº¢è‰²æ°´æœï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ **Array.some** æ–¹æ³•ï¼š\n\n\n\n```javascript\nconst fruits = [\n  { name: 'apple', color: 'red' },\n  { name: 'banana', color: 'yellow' },\n  { name: 'grape', color: 'purple' }\n];\n\n// æ¡ä»¶ï¼šæ˜¯å¦æœ‰çº¢è‰²æ°´æœ \nconst isAnyRed = fruits.some(f => f.color == 'red');\n\n```\n\nè¿˜æœ‰è®¸å¤šå…¶ä»–æ•°ç»„æ–°ç‰¹æ€§ï¼Œæ¯”å¦‚ Array.findã€Array.sliceã€Array.findIndexã€Array.reduceã€Array.splice ç­‰ï¼Œåœ¨å®é™…åœºæ™¯ä¸­å¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©ä½¿ç”¨ã€‚\n\n\n\n### **å‡½æ•°é»˜è®¤å€¼**\n\n#### ä½¿ç”¨é»˜è®¤å‚æ•°\n\n```javascript\nconst buyFruit = (fruit,amount) => {\n if(!fruit){\n\treturn\n  }\n  amount = amount || 1;\n  console.log(amount)\n}\n\n```\n\n\n\næˆ‘ä»¬ç»å¸¸éœ€è¦å¤„ç†å‡½æ•°å†…éƒ¨çš„ä¸€äº›å‚æ•°é»˜è®¤å€¼ï¼Œä¸Šé¢çš„ä»£ç å¤§å®¶éƒ½ä¸é™Œç”Ÿï¼Œä½¿ç”¨å‡½æ•°çš„é»˜è®¤å‚æ•°ï¼Œå¯ä»¥å¾ˆå¥½çš„å¸®åŠ©å¤„ç†è¿™ç§åœºæ™¯ã€‚\n\n\n\n```javascript\nconst buyFruit = (fruit,amount = 1) => {\n if(!fruit){\n\t\treturn\n  }\n  console.log(amount,'amount')\n}\n\n```\n\n\næˆ‘ä»¬å¯ä»¥é€šè¿‡ Babel çš„è½¬è¯‘æ¥çœ‹ä¸€ä¸‹é»˜è®¤å‚æ•°æ˜¯å¦‚ä½•å®ç°çš„ã€‚\n\n\n\n![](https://www.zoo.team/images/upload/upload_cf9531ce99d2eb9fe3d47feb21714304.png)\n\n\n\nä»ä¸Šé¢çš„è½¬è¯‘ç»“æœå¯ä»¥å‘ç°ï¼Œåªæœ‰å‚æ•°ä¸º undefined æ—¶æ‰ä¼šä½¿ç”¨é»˜è®¤å‚æ•°ã€‚\n\næµ‹è¯•çš„æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š\n\n```js\nbuyFruit('apple','');  // amount\nbuyFruit('apple',null);  //null amount\nbuyFruit('apple');  //1 amount\n\n```\n\næ‰€ä»¥ä½¿ç”¨é»˜è®¤å‚æ•°çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„çš„æ˜¯é»˜è®¤å‚æ•° `amount=1` å¹¶ä¸ç­‰åŒäº `amount || 1`ã€‚\n\n\n\n#### ä½¿ç”¨è§£æ„ä¸é»˜è®¤å‚æ•°\n\nå½“å‡½æ•°å‚æ•°æ˜¯å¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è§£æ„ç»“åˆé»˜è®¤å‚æ•°æ¥ç®€åŒ–é€»è¾‘ã€‚\n\nBefore:\n\n```javascript\nconst buyFruit = (fruit,amount) => {\n  fruit = fruit || {};\n  if(!fruit.name || !fruit.price){\n      return;\n  }\n  ...\n  amount = amount || 1;\n  console.log(amount)\n}\n\n```\n\nAfter:\n\n```javascript\nconst buyFruit = ({ name,price }={},amount) => {\n  if(!name || !prices){\n  \treturn;\n  }\n  console.log(amount)\n}\n\n```\n\n\n\n#### å¤æ‚æ•°æ®è§£æ„\n\nå½“å¤„ç†æ¯”è¾ƒç®€çš„å¯¹è±¡æ—¶ï¼Œè§£æ„ä¸é»˜è®¤å‚æ•°çš„é…åˆæ˜¯éå¸¸å¥½çš„ï¼Œä½†åœ¨ä¸€äº›å¤æ‚çš„åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬é¢ä¸´çš„å¯èƒ½æ˜¯æ›´å¤æ‚çš„ç»“æ„ã€‚\n\n```javascript\nconst oneComplexObj = {\n  firstLevel: {\n    secondLevel: [{\n      name: '',\n      price: '',\n    }],\n  },\n};\n```\n\n\n\nè¿™ä¸ªæ—¶å€™å¦‚æœå†é€šè¿‡è§£æ„å»è·å–å¯¹è±¡é‡Œçš„å€¼ã€‚\n\n```javascript\nconst {\n  firstLevel: {\n    secondLevel: [{ name, price }] = [],\n  } = {},\n} = oneComplexObj;\n```\n\n\n\nå¯è¯»æ€§å°±ä¼šæ¯”è¾ƒå·®ï¼Œè€Œä¸”éœ€è¦è€ƒè™‘å¤šå±‚è§£æ„çš„é»˜è®¤å€¼ä»¥åŠæ•°æ®å¼‚å¸¸æƒ…å†µã€‚\n\nè¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœé¡¹ç›®ä¸­ä½¿ç”¨ lodash åº“ï¼Œå¯ä»¥ä½¿ç”¨å…¶ä¸­çš„ lodash/get æ–¹æ³•ã€‚\n\n\n\n```javascript\nimport lodashGet from 'lodash/get';\n\nconst { name,price } = lodashGet(oneComplexObj,'firstLevel.secondLevel[0]',{});\n\n```\n\n\n\n### ç­–ç•¥æ¨¡å¼ä¼˜åŒ–åˆ†æ”¯é€»è¾‘å¤„ç† ###\n\nç­–ç•¥æ¨¡å¼ï¼šå®šä¹‰ä¸€ç³»åˆ—çš„ç®—æ³•ï¼ŒæŠŠå®ƒä»¬ä¸€ä¸ªä¸ªå°è£…èµ·æ¥ï¼Œ å¹¶ä¸”ä½¿å®ƒä»¬å¯ç›¸äº’æ›¿æ¢ã€‚\n\nä½¿ç”¨åœºæ™¯ï¼šç­–ç•¥æ¨¡å¼å±äºå¯¹è±¡è¡Œä¸ºæ¨¡å¼ï¼Œå½“é‡åˆ°å…·æœ‰ç›¸åŒè¡Œä¸ºæ¥å£ã€è¡Œä¸ºå†…éƒ¨ä¸åŒé€»è¾‘å®ç°çš„å®ä¾‹å¯¹è±¡æ—¶ï¼Œå¯ä»¥é‡‡ç”¨ç­–ç•¥æ¨¡å¼ï¼›æˆ–è€…æ˜¯ä¸€ç»„å¯¹è±¡å¯ä»¥æ ¹æ®éœ€è¦åŠ¨æ€çš„é€‰æ‹©å‡ ç§è¡Œä¸ºä¸­çš„æŸä¸€ç§æ—¶ï¼Œä¹Ÿå¯ä»¥é‡‡ç”¨ç­–ç•¥æ¨¡å¼ï¼›è¿™é‡Œä»¥ç¬¬äºŒç§æƒ…å†µä½œä¸ºç¤ºä¾‹ï¼š\n\nBefore:\n\n```javascript\nconst TYPE = {\n  JUICE: 'juice',\n  SALAD: 'salad',\n  JAM: 'jam',\n};\nfunction enjoy({ type = TYPE.JUICE, fruits }) {\n  if (!fruits || !fruits.length) {\n    console.log('è¯·å…ˆé‡‡è´­æ°´æœï¼');\n    return;\n  }\n  if (type === TYPE.JUICE) {\n    console.log('æ¦¨æœæ±ä¸­...');\n    return 'æœæ±';\n  }\n  if (type === TYPE.SALAD) {\n    console.log('åšæ²™æ‹‰ä¸­...');\n    return 'æ‹‰æ²™';\n  }\n  if (type === TYPE.JAM) {\n    console.log('åšæœé…±ä¸­...');\n    return 'æœé…±';\n  }\n}\n\nenjoy({ type: 'juice', fruits });\n```\n\nä½¿ç”¨æ€è·¯ï¼šå®šä¹‰ç­–ç•¥å¯¹è±¡å°è£…ä¸åŒè¡Œä¸ºã€æä¾›ç­–ç•¥é€‰æ‹©æ¥å£ï¼Œåœ¨ä¸åŒçš„è§„åˆ™æ—¶è°ƒç”¨ç›¸åº”çš„è¡Œä¸ºã€‚\n\nAfterï¼š\n\n```javascript\nconst TYPE = {\n  JUICE: 'juice',\n  SALAD: 'salad',\n  JAM: 'jam',\n};\n\nconst strategies = {\n  [TYPE.JUICE](fruits) {\n    console.log('æ¦¨æœæ±ä¸­...');\n    return 'æœæ±';\n  },\n  [TYPE.SALAD](fruits) {\n    console.log('åšæ²™æ‹‰ä¸­...');\n    return 'æ²™æ‹‰';\n  },\n  [TYPE.JAM](fruits) {\n    console.log('åšæœé…±ä¸­...');\n    return 'æœé…±';\n  },\n};\n\nfunction enjoy({ type = TYPE.JUICE, fruits }) {\n  if (!type) {\n    console.log('è¯·ç›´æ¥äº«ç”¨ï¼');\n    return;\n  }\n  if (!fruits || !fruits.length) {\n    console.log('è¯·å…ˆé‡‡è´­æ°´æœï¼');\n    return;\n  }\n  return strategies[type](fruits);\n}\n\nenjoy({ type: 'juice', fruits });\n```\n\n\n\n## æ¡†æ¶ç¯‡ä¹‹ React JSX é€»è¾‘åˆ¤æ–­ä¼˜åŒ– ##\n\nJSX æ˜¯ä¸€ä¸ªçœ‹èµ·æ¥å¾ˆåƒ XML çš„ JavaScript è¯­æ³•æ‰©å±•ã€‚ä¸€èˆ¬åœ¨ React ä¸­ä½¿ç”¨ JSX æ¥æè¿°ç•Œé¢ä¿¡æ¯ï¼ŒReactDOM.render() å°† JSX ç•Œé¢ä¿¡æ¯æ¸²æŸ“åˆ°é¡µé¢ä¸Šã€‚\n\n\n\nåœ¨ JSX ä¸­æ”¯æŒ JavaScript è¡¨è¾¾å¼ï¼Œæ—¥å¸¸å¾ˆå¸¸è§çš„å¾ªç¯è¾“å‡ºå­ç»„ä»¶ã€ä¸‰å…ƒè¡¨è¾¾å¼åˆ¤æ–­ã€å†å¤æ‚ä¸€äº›ç›´æ¥æŠ½è±¡å‡ºä¸€ä¸ªå‡½æ•°ã€‚\n\n\n\nåœ¨ JSX ä¸­å†™è¿™ä¹ˆå¤š  JavaScript è¡¨è¾¾å¼ï¼Œæ•´ä½“ä»£ç çœ‹èµ·æ¥ä¼šæœ‰ç‚¹å„¿æ‚ä¹±ã€‚è¯•ç€ä¼˜åŒ–ä¸€ä¸‹ï¼\n\n\n\n### JSX-Control-Statements \n\n[JSX-Control-Statements](https://www.npmjs.com/package/jsx-control-statements) æ˜¯ä¸€ä¸ª Babel æ’ä»¶ï¼Œå®ƒæ‰©å±•äº† JSX çš„èƒ½åŠ›ï¼Œæ”¯æŒä»¥æ ‡ç­¾çš„å½¢å¼å¤„ç†æ¡ä»¶åˆ¤æ–­ã€å¾ªç¯ã€‚\n\n\n\n#### If æ ‡ç­¾ ####\n\n<If> æ ‡ç­¾å†…å®¹åªæœ‰åœ¨ condition ä¸º true æ—¶æ‰ä¼šæ¸²æŸ“ï¼Œç­‰ä»·äºæœ€ç®€å•çš„ä¸‰å…ƒè¡¨è¾¾å¼ã€‚\n\nBefore: \n\n```javascript\n{ condition() ? 'Hello World!' : null }   \n\n```\n\n After:\n\n```javascript\n<If condition={ condition() }>Hello World!</If>   \n\n```\n\næ³¨æ„ï¼š<Else /> å·²è¢«åºŸå¼ƒï¼Œå¤æ‚çš„æ¡ä»¶åˆ¤æ–­å¯ä»¥ä½¿ç”¨ <Choose> æ ‡ç­¾ã€‚\n\n\n\n#### Choose æ ‡ç­¾ ####\n\n<Choose> æ ‡ç­¾ä¸‹åŒ…æ‹¬è‡³å°‘ä¸€ä¸ª <When> æ ‡ç­¾ã€å¯é€‰çš„ <Otherwise> æ ‡ç­¾ã€‚\n\n<When> æ ‡ç­¾å†…å®¹åªæœ‰åœ¨ condition ä¸º true æ—¶æ‰ä¼šæ¸²æŸ“ï¼Œç›¸å½“äºä¸€ä¸ª if æ¡ä»¶åˆ¤æ–­åˆ†æ”¯ã€‚\n\n<Otherwise> æ ‡ç­¾åˆ™ç›¸å½“äºæœ€åçš„ else åˆ†æ”¯ã€‚\n\nBefore: \n\n```javascript\n{ test1 ? <span>IfBlock1</span> : test2 ? <span>IfBlock2</span> : <span>ElseBlock</span> }\n\n```\n\nAfter:\n\n```javascript\n<Choose>\n  <When condition={ test1 }>\n    <span>IfBlock1</span>\n  </When>\n  <When condition={ test2 }>\n    <span>IfBlock2</span>\n  </When>\n  <Otherwise>\n    <span>ElseBlock</span>\n  </Otherwise>\n</Choose>\n\n```\n\n\n\n#### For æ ‡ç­¾ ####\n\n<For> æ ‡ç­¾éœ€è¦å£°æ˜ ofã€each å±æ€§ã€‚\n\nof æ¥æ”¶çš„æ˜¯å¯ä»¥ä½¿ç”¨è¿­ä»£å™¨è®¿é—®çš„å¯¹è±¡ã€‚\n\neach ä»£è¡¨è¿­ä»£å™¨è®¿é—®æ—¶çš„å½“å‰æŒ‡å‘å…ƒç´ ã€‚\n\nBefore:\n\n```javascript\n{\n  (this.props.items || []).map(item => {\n      return <span key={ item.id }>{ item.title }</span>\n  })\n}\n\n```\n\nAfter:\n\n```javascript\n<For each=\"item\" of={ this.props.items }>\n   <span key={ item.id }>{ item.title }</span>\n</For>\n\n```\n\næ³¨æ„ï¼š<For> æ ‡ç­¾ä¸èƒ½ä½œä¸ºæ ¹å…ƒç´ ã€‚\n\n\n\n#### With æ ‡ç­¾ ####\n\n<With> æ ‡ç­¾æä¾›å˜é‡ä¼ å‚çš„åŠŸèƒ½ã€‚\n\nBefore:\n\n```javascript\nrenderFoo = (foo) => {\n    return <span>{ foo }</span>;\n}\n\n// JSX ä¸­è¡¨è¾¾å¼è°ƒç”¨\n{\n    this.renderFoo(47)\n}\n\n```\n\nAfter:\n\n```javascript\n<With foo={ 47 }>\n  <span>{ foo }</span>\n</With>\n\n```\n\n\n\nä½¿ç”¨è¿™å‡ ç§æ ‡ç­¾ä¼˜åŒ–ä»£ç ï¼Œå¯ä»¥å‡å°‘  JSX ä¸­å­˜åœ¨çš„æ˜¾å¼ JavaScript è¡¨è¾¾å¼ï¼Œä½¿æˆ‘ä»¬çš„ä»£ç çœ‹ä¸Šå»æ›´ç®€æ´ï¼Œä½†æ˜¯è¿™äº›æ ‡ç­¾å°è£…çš„èƒ½åŠ›ï¼Œåœ¨ç¼–è¯‘æ—¶éœ€è¦è½¬æ¢ä¸ºç­‰ä»·çš„ JavaScript è¡¨è¾¾å¼ã€‚\n\n\n\næ³¨æ„ï¼šå…·ä½“ babel-plugin-jsx-control-statements æ’ä»¶çš„ä½¿ç”¨è§ç¬¬ä¸‰ç¯‡å‚è€ƒæ–‡ç« ï¼›Vue æ¡†æ¶å·²ç»é€šè¿‡æŒ‡ä»¤çš„å½¢å¼æ”¯æŒ v-ifã€v-else-ifã€v-elseã€v-showã€slot ç­‰ã€‚\n\n\n\n## æ€»ç»“ \n\nä»¥ä¸Šæˆ‘ä»¬æ€»ç»“äº†ä¸€äº›å¸¸è§çš„é€»è¾‘åˆ¤æ–­ä¼˜åŒ–æŠ€å·§ã€‚å½“ç„¶ï¼Œç¼–å†™é«˜è´¨é‡å¯ç»´æŠ¤çš„ä»£ç ï¼Œé™¤äº†é€»è¾‘åˆ¤æ–­ä¼˜åŒ–ï¼Œè¿˜éœ€è¦æœ‰æ¸…æ™°çš„æ³¨é‡Šã€å«ä¹‰æ˜ç¡®çš„å˜é‡å‘½åã€åˆç†çš„ä»£ç ç»“æ„æ‹†åˆ†ã€é€»è¾‘åˆ†å±‚è§£è€¦ã€ä»¥åŠæ›´é«˜å±‚æ¬¡çš„è´´åˆä¸šåŠ¡çš„é€»è¾‘æŠ½è±¡ç­‰ç­‰ï¼Œç›¸ä¿¡å„ä½åœ¨è¿™æ–¹é¢ä¹Ÿæœ‰è‡ªå·±çš„ä¸€äº›å¿ƒå¾—ï¼Œæ¬¢è¿ä¸€èµ·ç•™è¨€è®¨è®º~\n\n\n\n## å‚è€ƒæ–‡çŒ® \n\n\n* [5 Tips to Write Better Conditionals in JavaScript](<https://scotch.io/bar-talk/5-tips-to-write-better-conditionals-in-javascript>)\n* [stop-putting-so-many-if-statements-in-your-javascript](<https://medium.com/better-programming/stop-putting-so-many-if-statements-in-your-javascript-3b65aaa4b86b>)\n* [JSX Control Statements](<https://www.npmjs.com/package/jsx-control-statements>)\n\n## æ¨èé˜…è¯»\n[åˆ†åˆ†é’Ÿæ•™ä¼šä½ æ­å»ºä¼ä¸šçº§çš„ npm ç§æœ‰ä»“åº“](https://juejin.im/editor/posts/5eef64de518825658c1ad1f6)\n\n[ä¸€ä»½å€¼å¾—æ”¶è—çš„ Git å¼‚å¸¸å¤„ç†æ¸…å•](https://juejin.im/post/6844904182822993927)\n  \n## æ‹›è´¤çº³å£«\næ”¿é‡‡äº‘å‰ç«¯å›¢é˜Ÿï¼ˆZooTeamï¼‰ï¼Œä¸€ä¸ªå¹´è½»å¯Œæœ‰æ¿€æƒ…å’Œåˆ›é€ åŠ›çš„å‰ç«¯å›¢é˜Ÿï¼Œéš¶å±äºæ”¿é‡‡äº‘äº§å“ç ”å‘éƒ¨ï¼ŒBase åœ¨é£æ™¯å¦‚ç”»çš„æ­å·ã€‚å›¢é˜Ÿç°æœ‰ 50 ä½™ä¸ªå‰ç«¯å°ä¼™ä¼´ï¼Œå¹³å‡å¹´é¾„ 27 å²ï¼Œè¿‘ 3 æˆæ˜¯å…¨æ ˆå·¥ç¨‹å¸ˆï¼Œå¦¥å¦¥çš„é’å¹´é£æš´å›¢ã€‚æˆå‘˜æ„æˆæ—¢æœ‰æ¥è‡ªäºé˜¿é‡Œã€ç½‘æ˜“çš„â€œè€â€å…µï¼Œä¹Ÿæœ‰æµ™å¤§ã€ä¸­ç§‘å¤§ã€æ­ç”µç­‰æ ¡çš„åº”å±Šæ–°äººã€‚å›¢é˜Ÿåœ¨æ—¥å¸¸çš„ä¸šåŠ¡å¯¹æ¥ä¹‹å¤–ï¼Œè¿˜åœ¨ç‰©æ–™ä½“ç³»ã€å·¥ç¨‹å¹³å°ã€æ­å»ºå¹³å°ã€æ€§èƒ½ä½“éªŒã€äº‘ç«¯åº”ç”¨ã€æ•°æ®åˆ†æåŠå¯è§†åŒ–ç­‰æ–¹å‘è¿›è¡ŒæŠ€æœ¯æ¢ç´¢å’Œå®æˆ˜ï¼Œæ¨åŠ¨å¹¶è½åœ°äº†ä¸€ç³»åˆ—çš„å†…éƒ¨æŠ€æœ¯äº§å“ï¼ŒæŒç»­æ¢ç´¢å‰ç«¯æŠ€æœ¯ä½“ç³»çš„æ–°è¾¹ç•Œã€‚\n\nå¦‚æœä½ æƒ³æ”¹å˜ä¸€ç›´è¢«äº‹æŠ˜è…¾ï¼Œå¸Œæœ›å¼€å§‹èƒ½æŠ˜è…¾äº‹ï¼›å¦‚æœä½ æƒ³æ”¹å˜ä¸€ç›´è¢«å‘Šè¯«éœ€è¦å¤šäº›æƒ³æ³•ï¼Œå´æ— ä»ç ´å±€ï¼›å¦‚æœä½ æƒ³æ”¹å˜ä½ æœ‰èƒ½åŠ›å»åšæˆé‚£ä¸ªç»“æœï¼Œå´ä¸éœ€è¦ä½ ï¼›å¦‚æœä½ æƒ³æ”¹å˜ä½ æƒ³åšæˆçš„äº‹éœ€è¦ä¸€ä¸ªå›¢é˜Ÿå»æ”¯æ’‘ï¼Œä½†æ²¡ä½ å¸¦äººçš„ä½ç½®ï¼›å¦‚æœä½ æƒ³æ”¹å˜æ—¢å®šçš„èŠ‚å¥ï¼Œå°†ä¼šæ˜¯â€œ 5 å¹´å·¥ä½œæ—¶é—´ 3 å¹´å·¥ä½œç»éªŒâ€ï¼›å¦‚æœä½ æƒ³æ”¹å˜æœ¬æ¥æ‚Ÿæ€§ä¸é”™ï¼Œä½†æ€»æ˜¯æœ‰é‚£ä¸€å±‚çª—æˆ·çº¸çš„æ¨¡ç³Šâ€¦ å¦‚æœä½ ç›¸ä¿¡ç›¸ä¿¡çš„åŠ›é‡ï¼Œç›¸ä¿¡å¹³å‡¡äººèƒ½æˆå°±éå‡¡äº‹ï¼Œç›¸ä¿¡èƒ½é‡åˆ°æ›´å¥½çš„è‡ªå·±ã€‚å¦‚æœä½ å¸Œæœ›å‚ä¸åˆ°éšç€ä¸šåŠ¡è…¾é£çš„è¿‡ç¨‹ï¼Œäº²æ‰‹æ¨åŠ¨ä¸€ä¸ªæœ‰ç€æ·±å…¥çš„ä¸šåŠ¡ç†è§£ã€å®Œå–„çš„æŠ€æœ¯ä½“ç³»ã€æŠ€æœ¯åˆ›é€ ä»·å€¼ã€å½±å“åŠ›å¤–æº¢çš„å‰ç«¯å›¢é˜Ÿçš„æˆé•¿å†ç¨‹ï¼Œæˆ‘è§‰å¾—æˆ‘ä»¬è¯¥èŠèŠã€‚ä»»ä½•æ—¶é—´ï¼Œç­‰ç€ä½ å†™ç‚¹ä»€ä¹ˆï¼Œå‘ç»™ `ZooTeam@cai-inc.com`\n\n![](https://user-gold-cdn.xitu.io/2020/7/26/1738ae797b21cb74?w=1652&h=714&f=png&s=239198)", "user_name": "æ”¿é‡‡äº‘å‰ç«¯å›¢é˜Ÿ", "description": "æ”¿é‡‡äº‘å‰ç«¯ ZooTeam å›¢é˜Ÿï¼Œä¸æºæ°´çš„åŸåˆ›ã€‚ å›¢é˜Ÿç«™ç‚¹ï¼šhttps://zoo.team", "got_view_count": 632079, "category_name": "å‰ç«¯", "ctime": 1457483942}
